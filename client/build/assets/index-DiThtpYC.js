var Tfe=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var h_t=Tfe((__t,ZA)=>{function Cfe(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var cx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Bf(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var nJ={exports:{}},ik={},rJ={exports:{}},Jr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $M=Symbol.for("react.element"),Afe=Symbol.for("react.portal"),Pfe=Symbol.for("react.fragment"),Ife=Symbol.for("react.strict_mode"),kfe=Symbol.for("react.profiler"),Rfe=Symbol.for("react.provider"),Ofe=Symbol.for("react.context"),Lfe=Symbol.for("react.forward_ref"),Dfe=Symbol.for("react.suspense"),Nfe=Symbol.for("react.memo"),zfe=Symbol.for("react.lazy"),RV=Symbol.iterator;function Ffe(t){return t===null||typeof t!="object"?null:(t=RV&&t[RV]||t["@@iterator"],typeof t=="function"?t:null)}var iJ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oJ=Object.assign,sJ={};function t1(t,e,n){this.props=t,this.context=e,this.refs=sJ,this.updater=n||iJ}t1.prototype.isReactComponent={};t1.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};t1.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function aJ(){}aJ.prototype=t1.prototype;function X4(t,e,n){this.props=t,this.context=e,this.refs=sJ,this.updater=n||iJ}var K4=X4.prototype=new aJ;K4.constructor=X4;oJ(K4,t1.prototype);K4.isPureReactComponent=!0;var OV=Array.isArray,lJ=Object.prototype.hasOwnProperty,Z4={current:null},cJ={key:!0,ref:!0,__self:!0,__source:!0};function uJ(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)lJ.call(e,r)&&!cJ.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),d=0;d<a;d++)l[d]=arguments[d+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:$M,type:t,key:o,ref:s,props:i,_owner:Z4.current}}function Bfe(t,e){return{$$typeof:$M,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function J4(t){return typeof t=="object"&&t!==null&&t.$$typeof===$M}function $fe(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var LV=/\/+/g;function FL(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$fe(""+t.key):e.toString(36)}function hA(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case $M:case Afe:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+FL(s,0):r,OV(i)?(n="",t!=null&&(n=t.replace(LV,"$&/")+"/"),hA(i,e,n,"",function(d){return d})):i!=null&&(J4(i)&&(i=Bfe(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(LV,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",OV(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+FL(o,a);s+=hA(o,e,n,l,i)}else if(l=Ffe(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+FL(o,a++),s+=hA(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function uT(t,e,n){if(t==null)return t;var r=[],i=0;return hA(t,r,"","",function(o){return e.call(n,o,i++)}),r}function jfe(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gl={current:null},fA={transition:null},Ufe={ReactCurrentDispatcher:Gl,ReactCurrentBatchConfig:fA,ReactCurrentOwner:Z4};Jr.Children={map:uT,forEach:function(t,e,n){uT(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return uT(t,function(){e++}),e},toArray:function(t){return uT(t,function(e){return e})||[]},only:function(t){if(!J4(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Jr.Component=t1;Jr.Fragment=Pfe;Jr.Profiler=kfe;Jr.PureComponent=X4;Jr.StrictMode=Ife;Jr.Suspense=Dfe;Jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ufe;Jr.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=oJ({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Z4.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)lJ.call(e,l)&&!cJ.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var d=0;d<l;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:$M,type:t.type,key:i,ref:o,props:r,_owner:s}};Jr.createContext=function(t){return t={$$typeof:Ofe,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Rfe,_context:t},t.Consumer=t};Jr.createElement=uJ;Jr.createFactory=function(t){var e=uJ.bind(null,t);return e.type=t,e};Jr.createRef=function(){return{current:null}};Jr.forwardRef=function(t){return{$$typeof:Lfe,render:t}};Jr.isValidElement=J4;Jr.lazy=function(t){return{$$typeof:zfe,_payload:{_status:-1,_result:t},_init:jfe}};Jr.memo=function(t,e){return{$$typeof:Nfe,type:t,compare:e===void 0?null:e}};Jr.startTransition=function(t){var e=fA.transition;fA.transition={};try{t()}finally{fA.transition=e}};Jr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Jr.useCallback=function(t,e){return Gl.current.useCallback(t,e)};Jr.useContext=function(t){return Gl.current.useContext(t)};Jr.useDebugValue=function(){};Jr.useDeferredValue=function(t){return Gl.current.useDeferredValue(t)};Jr.useEffect=function(t,e){return Gl.current.useEffect(t,e)};Jr.useId=function(){return Gl.current.useId()};Jr.useImperativeHandle=function(t,e,n){return Gl.current.useImperativeHandle(t,e,n)};Jr.useInsertionEffect=function(t,e){return Gl.current.useInsertionEffect(t,e)};Jr.useLayoutEffect=function(t,e){return Gl.current.useLayoutEffect(t,e)};Jr.useMemo=function(t,e){return Gl.current.useMemo(t,e)};Jr.useReducer=function(t,e,n){return Gl.current.useReducer(t,e,n)};Jr.useRef=function(t){return Gl.current.useRef(t)};Jr.useState=function(t){return Gl.current.useState(t)};Jr.useSyncExternalStore=function(t,e,n){return Gl.current.useSyncExternalStore(t,e,n)};Jr.useTransition=function(){return Gl.current.useTransition()};Jr.version="18.2.0";rJ.exports=Jr;var W=rJ.exports;const Ze=xi(W),ob=Cfe({__proto__:null,default:Ze},[W]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vfe=W,Wfe=Symbol.for("react.element"),Hfe=Symbol.for("react.fragment"),Gfe=Object.prototype.hasOwnProperty,qfe=Vfe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yfe={key:!0,ref:!0,__self:!0,__source:!0};function dJ(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Gfe.call(e,r)&&!Yfe.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Wfe,type:t,key:o,ref:s,props:i,_owner:qfe.current}}ik.Fragment=Hfe;ik.jsx=dJ;ik.jsxs=dJ;nJ.exports=ik;var F=nJ.exports,hJ={exports:{}},xu={},fJ={exports:{}},pJ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ie,ve){var Ee=ie.length;ie.push(ve);e:for(;0<Ee;){var Ne=Ee-1>>>1,Ge=ie[Ne];if(0<i(Ge,ve))ie[Ne]=ve,ie[Ee]=Ge,Ee=Ne;else break e}}function n(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var ve=ie[0],Ee=ie.pop();if(Ee!==ve){ie[0]=Ee;e:for(var Ne=0,Ge=ie.length,dt=Ge>>>1;Ne<dt;){var Ue=2*(Ne+1)-1,st=ie[Ue],lt=Ue+1,Rt=ie[lt];if(0>i(st,Ee))lt<Ge&&0>i(Rt,st)?(ie[Ne]=Rt,ie[lt]=Ee,Ne=lt):(ie[Ne]=st,ie[Ue]=Ee,Ne=Ue);else if(lt<Ge&&0>i(Rt,Ee))ie[Ne]=Rt,ie[lt]=Ee,Ne=lt;else break e}}return ve}function i(ie,ve){var Ee=ie.sortIndex-ve.sortIndex;return Ee!==0?Ee:ie.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],d=[],f=1,p=null,g=3,v=!1,x=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(ie){for(var ve=n(d);ve!==null;){if(ve.callback===null)r(d);else if(ve.startTime<=ie)r(d),ve.sortIndex=ve.expirationTime,e(l,ve);else break;ve=n(d)}}function k(ie){if(b=!1,C(ie),!x)if(n(l)!==null)x=!0,ue(O);else{var ve=n(d);ve!==null&&be(k,ve.startTime-ie)}}function O(ie,ve){x=!1,b&&(b=!1,M(U),U=-1),v=!0;var Ee=g;try{for(C(ve),p=n(l);p!==null&&(!(p.expirationTime>ve)||ie&&!X());){var Ne=p.callback;if(typeof Ne=="function"){p.callback=null,g=p.priorityLevel;var Ge=Ne(p.expirationTime<=ve);ve=t.unstable_now(),typeof Ge=="function"?p.callback=Ge:p===n(l)&&r(l),C(ve)}else r(l);p=n(l)}if(p!==null)var dt=!0;else{var Ue=n(d);Ue!==null&&be(k,Ue.startTime-ve),dt=!1}return dt}finally{p=null,g=Ee,v=!1}}var D=!1,B=null,U=-1,J=5,V=-1;function X(){return!(t.unstable_now()-V<J)}function oe(){if(B!==null){var ie=t.unstable_now();V=ie;var ve=!0;try{ve=B(!0,ie)}finally{ve?pe():(D=!1,B=null)}}else D=!1}var pe;if(typeof T=="function")pe=function(){T(oe)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,he=re.port2;re.port1.onmessage=oe,pe=function(){he.postMessage(null)}}else pe=function(){S(oe,0)};function ue(ie){B=ie,D||(D=!0,pe())}function be(ie,ve){U=S(function(){ie(t.unstable_now())},ve)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_continueExecution=function(){x||v||(x=!0,ue(O))},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(ie){switch(g){case 1:case 2:case 3:var ve=3;break;default:ve=g}var Ee=g;g=ve;try{return ie()}finally{g=Ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ie,ve){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var Ee=g;g=ie;try{return ve()}finally{g=Ee}},t.unstable_scheduleCallback=function(ie,ve,Ee){var Ne=t.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Ne+Ee:Ne):Ee=Ne,ie){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=Ee+Ge,ie={id:f++,callback:ve,priorityLevel:ie,startTime:Ee,expirationTime:Ge,sortIndex:-1},Ee>Ne?(ie.sortIndex=Ee,e(d,ie),n(l)===null&&ie===n(d)&&(b?(M(U),U=-1):b=!0,be(k,Ee-Ne))):(ie.sortIndex=Ge,e(l,ie),x||v||(x=!0,ue(O))),ie},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(ie){var ve=g;return function(){var Ee=g;g=ve;try{return ie.apply(this,arguments)}finally{g=Ee}}}})(pJ);fJ.exports=pJ;var Xfe=fJ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mJ=W,hu=Xfe;function dn(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gJ=new Set,XS={};function O0(t,e){sb(t,e),sb(t+"Capture",e)}function sb(t,e){for(XS[t]=e,t=0;t<e.length;t++)gJ.add(e[t])}var om=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),GN=Object.prototype.hasOwnProperty,Kfe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,DV={},NV={};function Zfe(t){return GN.call(NV,t)?!0:GN.call(DV,t)?!1:Kfe.test(t)?NV[t]=!0:(DV[t]=!0,!1)}function Jfe(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Qfe(t,e,n,r){if(e===null||typeof e>"u"||Jfe(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ql(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Fa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Fa[t]=new ql(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Fa[e]=new ql(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Fa[t]=new ql(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Fa[t]=new ql(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Fa[t]=new ql(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Fa[t]=new ql(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Fa[t]=new ql(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Fa[t]=new ql(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Fa[t]=new ql(t,5,!1,t.toLowerCase(),null,!1,!1)});var Q4=/[\-:]([a-z])/g;function e5(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Q4,e5);Fa[e]=new ql(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Q4,e5);Fa[e]=new ql(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Q4,e5);Fa[e]=new ql(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Fa[t]=new ql(t,1,!1,t.toLowerCase(),null,!1,!1)});Fa.xlinkHref=new ql("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Fa[t]=new ql(t,1,!1,t.toLowerCase(),null,!0,!0)});function t5(t,e,n,r){var i=Fa.hasOwnProperty(e)?Fa[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Qfe(e,n,i,r)&&(n=null),r||i===null?Zfe(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bm=mJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dT=Symbol.for("react.element"),ux=Symbol.for("react.portal"),dx=Symbol.for("react.fragment"),n5=Symbol.for("react.strict_mode"),qN=Symbol.for("react.profiler"),yJ=Symbol.for("react.provider"),vJ=Symbol.for("react.context"),r5=Symbol.for("react.forward_ref"),YN=Symbol.for("react.suspense"),XN=Symbol.for("react.suspense_list"),i5=Symbol.for("react.memo"),Ig=Symbol.for("react.lazy"),_J=Symbol.for("react.offscreen"),zV=Symbol.iterator;function uw(t){return t===null||typeof t!="object"?null:(t=zV&&t[zV]||t["@@iterator"],typeof t=="function"?t:null)}var Bo=Object.assign,BL;function sS(t){if(BL===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);BL=e&&e[1]||""}return`
`+BL+t}var $L=!1;function jL(t,e){if(!t||$L)return"";$L=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{$L=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?sS(t):""}function epe(t){switch(t.tag){case 5:return sS(t.type);case 16:return sS("Lazy");case 13:return sS("Suspense");case 19:return sS("SuspenseList");case 0:case 2:case 15:return t=jL(t.type,!1),t;case 11:return t=jL(t.type.render,!1),t;case 1:return t=jL(t.type,!0),t;default:return""}}function KN(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case dx:return"Fragment";case ux:return"Portal";case qN:return"Profiler";case n5:return"StrictMode";case YN:return"Suspense";case XN:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vJ:return(t.displayName||"Context")+".Consumer";case yJ:return(t._context.displayName||"Context")+".Provider";case r5:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case i5:return e=t.displayName||null,e!==null?e:KN(t.type)||"Memo";case Ig:e=t._payload,t=t._init;try{return KN(t(e))}catch{}}return null}function tpe(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return KN(e);case 8:return e===n5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cy(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xJ(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function npe(t){var e=xJ(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hT(t){t._valueTracker||(t._valueTracker=npe(t))}function bJ(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xJ(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function JA(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ZN(t,e){var n=e.checked;return Bo({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function FV(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=cy(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wJ(t,e){e=e.checked,e!=null&&t5(t,"checked",e,!1)}function JN(t,e){wJ(t,e);var n=cy(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?QN(t,e.type,n):e.hasOwnProperty("defaultValue")&&QN(t,e.type,cy(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function BV(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function QN(t,e,n){(e!=="number"||JA(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var aS=Array.isArray;function $x(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+cy(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ez(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(dn(91));return Bo({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $V(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(dn(92));if(aS(n)){if(1<n.length)throw Error(dn(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:cy(n)}}function SJ(t,e){var n=cy(e.value),r=cy(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function jV(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function MJ(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tz(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?MJ(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fT,EJ=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fT=fT||document.createElement("div"),fT.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fT.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function KS(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var _S={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rpe=["Webkit","ms","Moz","O"];Object.keys(_S).forEach(function(t){rpe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_S[e]=_S[t]})});function TJ(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||_S.hasOwnProperty(t)&&_S[t]?(""+e).trim():e+"px"}function CJ(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=TJ(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ipe=Bo({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nz(t,e){if(e){if(ipe[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(dn(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(dn(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(dn(61))}if(e.style!=null&&typeof e.style!="object")throw Error(dn(62))}}function rz(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iz=null;function o5(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var oz=null,jx=null,Ux=null;function UV(t){if(t=VM(t)){if(typeof oz!="function")throw Error(dn(280));var e=t.stateNode;e&&(e=ck(e),oz(t.stateNode,t.type,e))}}function AJ(t){jx?Ux?Ux.push(t):Ux=[t]:jx=t}function PJ(){if(jx){var t=jx,e=Ux;if(Ux=jx=null,UV(t),e)for(t=0;t<e.length;t++)UV(e[t])}}function IJ(t,e){return t(e)}function kJ(){}var UL=!1;function RJ(t,e,n){if(UL)return t(e,n);UL=!0;try{return IJ(t,e,n)}finally{UL=!1,(jx!==null||Ux!==null)&&(kJ(),PJ())}}function ZS(t,e){var n=t.stateNode;if(n===null)return null;var r=ck(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(dn(231,e,typeof n));return n}var sz=!1;if(om)try{var dw={};Object.defineProperty(dw,"passive",{get:function(){sz=!0}}),window.addEventListener("test",dw,dw),window.removeEventListener("test",dw,dw)}catch{sz=!1}function ope(t,e,n,r,i,o,s,a,l){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var xS=!1,QA=null,eP=!1,az=null,spe={onError:function(t){xS=!0,QA=t}};function ape(t,e,n,r,i,o,s,a,l){xS=!1,QA=null,ope.apply(spe,arguments)}function lpe(t,e,n,r,i,o,s,a,l){if(ape.apply(this,arguments),xS){if(xS){var d=QA;xS=!1,QA=null}else throw Error(dn(198));eP||(eP=!0,az=d)}}function L0(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function OJ(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function VV(t){if(L0(t)!==t)throw Error(dn(188))}function cpe(t){var e=t.alternate;if(!e){if(e=L0(t),e===null)throw Error(dn(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return VV(i),t;if(o===r)return VV(i),e;o=o.sibling}throw Error(dn(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(dn(189))}}if(n.alternate!==r)throw Error(dn(190))}if(n.tag!==3)throw Error(dn(188));return n.stateNode.current===n?t:e}function LJ(t){return t=cpe(t),t!==null?DJ(t):null}function DJ(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=DJ(t);if(e!==null)return e;t=t.sibling}return null}var NJ=hu.unstable_scheduleCallback,WV=hu.unstable_cancelCallback,upe=hu.unstable_shouldYield,dpe=hu.unstable_requestPaint,us=hu.unstable_now,hpe=hu.unstable_getCurrentPriorityLevel,s5=hu.unstable_ImmediatePriority,zJ=hu.unstable_UserBlockingPriority,tP=hu.unstable_NormalPriority,fpe=hu.unstable_LowPriority,FJ=hu.unstable_IdlePriority,ok=null,Sf=null;function ppe(t){if(Sf&&typeof Sf.onCommitFiberRoot=="function")try{Sf.onCommitFiberRoot(ok,t,void 0,(t.current.flags&128)===128)}catch{}}var Mh=Math.clz32?Math.clz32:ype,mpe=Math.log,gpe=Math.LN2;function ype(t){return t>>>=0,t===0?32:31-(mpe(t)/gpe|0)|0}var pT=64,mT=4194304;function lS(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nP(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=lS(a):(o&=s,o!==0&&(r=lS(o)))}else s=n&~i,s!==0?r=lS(s):o!==0&&(r=lS(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Mh(e),i=1<<n,r|=t[n],e&=~i;return r}function vpe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _pe(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Mh(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=vpe(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function lz(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function BJ(){var t=pT;return pT<<=1,!(pT&4194240)&&(pT=64),t}function VL(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function jM(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mh(e),t[e]=n}function xpe(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Mh(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function a5(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Mh(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Fi=0;function $J(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jJ,l5,UJ,VJ,WJ,cz=!1,gT=[],qg=null,Yg=null,Xg=null,JS=new Map,QS=new Map,Og=[],bpe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function HV(t,e){switch(t){case"focusin":case"focusout":qg=null;break;case"dragenter":case"dragleave":Yg=null;break;case"mouseover":case"mouseout":Xg=null;break;case"pointerover":case"pointerout":JS.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":QS.delete(e.pointerId)}}function hw(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=VM(e),e!==null&&l5(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function wpe(t,e,n,r,i){switch(e){case"focusin":return qg=hw(qg,t,e,n,r,i),!0;case"dragenter":return Yg=hw(Yg,t,e,n,r,i),!0;case"mouseover":return Xg=hw(Xg,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return JS.set(o,hw(JS.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,QS.set(o,hw(QS.get(o)||null,t,e,n,r,i)),!0}return!1}function HJ(t){var e=zv(t.target);if(e!==null){var n=L0(e);if(n!==null){if(e=n.tag,e===13){if(e=OJ(n),e!==null){t.blockedOn=e,WJ(t.priority,function(){UJ(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pA(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=uz(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);iz=r,n.target.dispatchEvent(r),iz=null}else return e=VM(n),e!==null&&l5(e),t.blockedOn=n,!1;e.shift()}return!0}function GV(t,e,n){pA(t)&&n.delete(e)}function Spe(){cz=!1,qg!==null&&pA(qg)&&(qg=null),Yg!==null&&pA(Yg)&&(Yg=null),Xg!==null&&pA(Xg)&&(Xg=null),JS.forEach(GV),QS.forEach(GV)}function fw(t,e){t.blockedOn===e&&(t.blockedOn=null,cz||(cz=!0,hu.unstable_scheduleCallback(hu.unstable_NormalPriority,Spe)))}function e2(t){function e(i){return fw(i,t)}if(0<gT.length){fw(gT[0],t);for(var n=1;n<gT.length;n++){var r=gT[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qg!==null&&fw(qg,t),Yg!==null&&fw(Yg,t),Xg!==null&&fw(Xg,t),JS.forEach(e),QS.forEach(e),n=0;n<Og.length;n++)r=Og[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Og.length&&(n=Og[0],n.blockedOn===null);)HJ(n),n.blockedOn===null&&Og.shift()}var Vx=bm.ReactCurrentBatchConfig,rP=!0;function Mpe(t,e,n,r){var i=Fi,o=Vx.transition;Vx.transition=null;try{Fi=1,c5(t,e,n,r)}finally{Fi=i,Vx.transition=o}}function Epe(t,e,n,r){var i=Fi,o=Vx.transition;Vx.transition=null;try{Fi=4,c5(t,e,n,r)}finally{Fi=i,Vx.transition=o}}function c5(t,e,n,r){if(rP){var i=uz(t,e,n,r);if(i===null)QL(t,e,r,iP,n),HV(t,r);else if(wpe(i,t,e,n,r))r.stopPropagation();else if(HV(t,r),e&4&&-1<bpe.indexOf(t)){for(;i!==null;){var o=VM(i);if(o!==null&&jJ(o),o=uz(t,e,n,r),o===null&&QL(t,e,r,iP,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else QL(t,e,r,null,n)}}var iP=null;function uz(t,e,n,r){if(iP=null,t=o5(r),t=zv(t),t!==null)if(e=L0(t),e===null)t=null;else if(n=e.tag,n===13){if(t=OJ(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return iP=t,null}function GJ(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hpe()){case s5:return 1;case zJ:return 4;case tP:case fpe:return 16;case FJ:return 536870912;default:return 16}default:return 16}}var Fg=null,u5=null,mA=null;function qJ(){if(mA)return mA;var t,e=u5,n=e.length,r,i="value"in Fg?Fg.value:Fg.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return mA=i.slice(t,1<r?1-r:void 0)}function gA(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yT(){return!0}function qV(){return!1}function bu(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?yT:qV,this.isPropagationStopped=qV,this}return Bo(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yT)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yT)},persist:function(){},isPersistent:yT}),e}var n1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},d5=bu(n1),UM=Bo({},n1,{view:0,detail:0}),Tpe=bu(UM),WL,HL,pw,sk=Bo({},UM,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:h5,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pw&&(pw&&t.type==="mousemove"?(WL=t.screenX-pw.screenX,HL=t.screenY-pw.screenY):HL=WL=0,pw=t),WL)},movementY:function(t){return"movementY"in t?t.movementY:HL}}),YV=bu(sk),Cpe=Bo({},sk,{dataTransfer:0}),Ape=bu(Cpe),Ppe=Bo({},UM,{relatedTarget:0}),GL=bu(Ppe),Ipe=Bo({},n1,{animationName:0,elapsedTime:0,pseudoElement:0}),kpe=bu(Ipe),Rpe=Bo({},n1,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ope=bu(Rpe),Lpe=Bo({},n1,{data:0}),XV=bu(Lpe),Dpe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Npe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zpe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fpe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zpe[t])?!!e[t]:!1}function h5(){return Fpe}var Bpe=Bo({},UM,{key:function(t){if(t.key){var e=Dpe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=gA(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Npe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:h5,charCode:function(t){return t.type==="keypress"?gA(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gA(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$pe=bu(Bpe),jpe=Bo({},sk,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),KV=bu(jpe),Upe=Bo({},UM,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:h5}),Vpe=bu(Upe),Wpe=Bo({},n1,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hpe=bu(Wpe),Gpe=Bo({},sk,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qpe=bu(Gpe),Ype=[9,13,27,32],f5=om&&"CompositionEvent"in window,bS=null;om&&"documentMode"in document&&(bS=document.documentMode);var Xpe=om&&"TextEvent"in window&&!bS,YJ=om&&(!f5||bS&&8<bS&&11>=bS),ZV=" ",JV=!1;function XJ(t,e){switch(t){case"keyup":return Ype.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KJ(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hx=!1;function Kpe(t,e){switch(t){case"compositionend":return KJ(e);case"keypress":return e.which!==32?null:(JV=!0,ZV);case"textInput":return t=e.data,t===ZV&&JV?null:t;default:return null}}function Zpe(t,e){if(hx)return t==="compositionend"||!f5&&XJ(t,e)?(t=qJ(),mA=u5=Fg=null,hx=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return YJ&&e.locale!=="ko"?null:e.data;default:return null}}var Jpe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function QV(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Jpe[t.type]:e==="textarea"}function ZJ(t,e,n,r){AJ(r),e=oP(e,"onChange"),0<e.length&&(n=new d5("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var wS=null,t2=null;function Qpe(t){lQ(t,0)}function ak(t){var e=mx(t);if(bJ(e))return t}function eme(t,e){if(t==="change")return e}var JJ=!1;if(om){var qL;if(om){var YL="oninput"in document;if(!YL){var eW=document.createElement("div");eW.setAttribute("oninput","return;"),YL=typeof eW.oninput=="function"}qL=YL}else qL=!1;JJ=qL&&(!document.documentMode||9<document.documentMode)}function tW(){wS&&(wS.detachEvent("onpropertychange",QJ),t2=wS=null)}function QJ(t){if(t.propertyName==="value"&&ak(t2)){var e=[];ZJ(e,t2,t,o5(t)),RJ(Qpe,e)}}function tme(t,e,n){t==="focusin"?(tW(),wS=e,t2=n,wS.attachEvent("onpropertychange",QJ)):t==="focusout"&&tW()}function nme(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ak(t2)}function rme(t,e){if(t==="click")return ak(e)}function ime(t,e){if(t==="input"||t==="change")return ak(e)}function ome(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ch=typeof Object.is=="function"?Object.is:ome;function n2(t,e){if(Ch(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!GN.call(e,i)||!Ch(t[i],e[i]))return!1}return!0}function nW(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rW(t,e){var n=nW(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nW(n)}}function eQ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eQ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tQ(){for(var t=window,e=JA();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=JA(t.document)}return e}function p5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sme(t){var e=tQ(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&eQ(n.ownerDocument.documentElement,n)){if(r!==null&&p5(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=rW(n,o);var s=rW(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ame=om&&"documentMode"in document&&11>=document.documentMode,fx=null,dz=null,SS=null,hz=!1;function iW(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hz||fx==null||fx!==JA(r)||(r=fx,"selectionStart"in r&&p5(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),SS&&n2(SS,r)||(SS=r,r=oP(dz,"onSelect"),0<r.length&&(e=new d5("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fx)))}function vT(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var px={animationend:vT("Animation","AnimationEnd"),animationiteration:vT("Animation","AnimationIteration"),animationstart:vT("Animation","AnimationStart"),transitionend:vT("Transition","TransitionEnd")},XL={},nQ={};om&&(nQ=document.createElement("div").style,"AnimationEvent"in window||(delete px.animationend.animation,delete px.animationiteration.animation,delete px.animationstart.animation),"TransitionEvent"in window||delete px.transitionend.transition);function lk(t){if(XL[t])return XL[t];if(!px[t])return t;var e=px[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nQ)return XL[t]=e[n];return t}var rQ=lk("animationend"),iQ=lk("animationiteration"),oQ=lk("animationstart"),sQ=lk("transitionend"),aQ=new Map,oW="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _y(t,e){aQ.set(t,e),O0(e,[t])}for(var KL=0;KL<oW.length;KL++){var ZL=oW[KL],lme=ZL.toLowerCase(),cme=ZL[0].toUpperCase()+ZL.slice(1);_y(lme,"on"+cme)}_y(rQ,"onAnimationEnd");_y(iQ,"onAnimationIteration");_y(oQ,"onAnimationStart");_y("dblclick","onDoubleClick");_y("focusin","onFocus");_y("focusout","onBlur");_y(sQ,"onTransitionEnd");sb("onMouseEnter",["mouseout","mouseover"]);sb("onMouseLeave",["mouseout","mouseover"]);sb("onPointerEnter",["pointerout","pointerover"]);sb("onPointerLeave",["pointerout","pointerover"]);O0("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));O0("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));O0("onBeforeInput",["compositionend","keypress","textInput","paste"]);O0("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));O0("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));O0("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cS="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ume=new Set("cancel close invalid load scroll toggle".split(" ").concat(cS));function sW(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,lpe(r,e,void 0,t),t.currentTarget=null}function lQ(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,d=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;sW(i,a,d),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,d=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;sW(i,a,d),o=l}}}if(eP)throw t=az,eP=!1,az=null,t}function po(t,e){var n=e[yz];n===void 0&&(n=e[yz]=new Set);var r=t+"__bubble";n.has(r)||(cQ(e,t,2,!1),n.add(r))}function JL(t,e,n){var r=0;e&&(r|=4),cQ(n,t,r,e)}var _T="_reactListening"+Math.random().toString(36).slice(2);function r2(t){if(!t[_T]){t[_T]=!0,gJ.forEach(function(n){n!=="selectionchange"&&(ume.has(n)||JL(n,!1,t),JL(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_T]||(e[_T]=!0,JL("selectionchange",!1,e))}}function cQ(t,e,n,r){switch(GJ(e)){case 1:var i=Mpe;break;case 4:i=Epe;break;default:i=c5}n=i.bind(null,e,n,t),i=void 0,!sz||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function QL(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=zv(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}RJ(function(){var d=o,f=o5(n),p=[];e:{var g=aQ.get(t);if(g!==void 0){var v=d5,x=t;switch(t){case"keypress":if(gA(n)===0)break e;case"keydown":case"keyup":v=$pe;break;case"focusin":x="focus",v=GL;break;case"focusout":x="blur",v=GL;break;case"beforeblur":case"afterblur":v=GL;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=YV;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Ape;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Vpe;break;case rQ:case iQ:case oQ:v=kpe;break;case sQ:v=Hpe;break;case"scroll":v=Tpe;break;case"wheel":v=qpe;break;case"copy":case"cut":case"paste":v=Ope;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=KV}var b=(e&4)!==0,S=!b&&t==="scroll",M=b?g!==null?g+"Capture":null:g;b=[];for(var T=d,C;T!==null;){C=T;var k=C.stateNode;if(C.tag===5&&k!==null&&(C=k,M!==null&&(k=ZS(T,M),k!=null&&b.push(i2(T,k,C)))),S)break;T=T.return}0<b.length&&(g=new v(g,x,null,n,f),p.push({event:g,listeners:b}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",g&&n!==iz&&(x=n.relatedTarget||n.fromElement)&&(zv(x)||x[sm]))break e;if((v||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,v?(x=n.relatedTarget||n.toElement,v=d,x=x?zv(x):null,x!==null&&(S=L0(x),x!==S||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=d),v!==x)){if(b=YV,k="onMouseLeave",M="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(b=KV,k="onPointerLeave",M="onPointerEnter",T="pointer"),S=v==null?g:mx(v),C=x==null?g:mx(x),g=new b(k,T+"leave",v,n,f),g.target=S,g.relatedTarget=C,k=null,zv(f)===d&&(b=new b(M,T+"enter",x,n,f),b.target=C,b.relatedTarget=S,k=b),S=k,v&&x)t:{for(b=v,M=x,T=0,C=b;C;C=y_(C))T++;for(C=0,k=M;k;k=y_(k))C++;for(;0<T-C;)b=y_(b),T--;for(;0<C-T;)M=y_(M),C--;for(;T--;){if(b===M||M!==null&&b===M.alternate)break t;b=y_(b),M=y_(M)}b=null}else b=null;v!==null&&aW(p,g,v,b,!1),x!==null&&S!==null&&aW(p,S,x,b,!0)}}e:{if(g=d?mx(d):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var O=eme;else if(QV(g))if(JJ)O=ime;else{O=nme;var D=tme}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=rme);if(O&&(O=O(t,d))){ZJ(p,O,n,f);break e}D&&D(t,g,d),t==="focusout"&&(D=g._wrapperState)&&D.controlled&&g.type==="number"&&QN(g,"number",g.value)}switch(D=d?mx(d):window,t){case"focusin":(QV(D)||D.contentEditable==="true")&&(fx=D,dz=d,SS=null);break;case"focusout":SS=dz=fx=null;break;case"mousedown":hz=!0;break;case"contextmenu":case"mouseup":case"dragend":hz=!1,iW(p,n,f);break;case"selectionchange":if(ame)break;case"keydown":case"keyup":iW(p,n,f)}var B;if(f5)e:{switch(t){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else hx?XJ(t,n)&&(U="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(U="onCompositionStart");U&&(YJ&&n.locale!=="ko"&&(hx||U!=="onCompositionStart"?U==="onCompositionEnd"&&hx&&(B=qJ()):(Fg=f,u5="value"in Fg?Fg.value:Fg.textContent,hx=!0)),D=oP(d,U),0<D.length&&(U=new XV(U,t,null,n,f),p.push({event:U,listeners:D}),B?U.data=B:(B=KJ(n),B!==null&&(U.data=B)))),(B=Xpe?Kpe(t,n):Zpe(t,n))&&(d=oP(d,"onBeforeInput"),0<d.length&&(f=new XV("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=B))}lQ(p,e)})}function i2(t,e,n){return{instance:t,listener:e,currentTarget:n}}function oP(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ZS(t,n),o!=null&&r.unshift(i2(t,o,i)),o=ZS(t,e),o!=null&&r.push(i2(t,o,i))),t=t.return}return r}function y_(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function aW(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,d=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&d!==null&&(a=d,i?(l=ZS(n,o),l!=null&&s.unshift(i2(n,l,a))):i||(l=ZS(n,o),l!=null&&s.push(i2(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var dme=/\r\n?/g,hme=/\u0000|\uFFFD/g;function lW(t){return(typeof t=="string"?t:""+t).replace(dme,`
`).replace(hme,"")}function xT(t,e,n){if(e=lW(e),lW(t)!==e&&n)throw Error(dn(425))}function sP(){}var fz=null,pz=null;function mz(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gz=typeof setTimeout=="function"?setTimeout:void 0,fme=typeof clearTimeout=="function"?clearTimeout:void 0,cW=typeof Promise=="function"?Promise:void 0,pme=typeof queueMicrotask=="function"?queueMicrotask:typeof cW<"u"?function(t){return cW.resolve(null).then(t).catch(mme)}:gz;function mme(t){setTimeout(function(){throw t})}function eD(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),e2(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);e2(e)}function Kg(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uW(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var r1=Math.random().toString(36).slice(2),yf="__reactFiber$"+r1,o2="__reactProps$"+r1,sm="__reactContainer$"+r1,yz="__reactEvents$"+r1,gme="__reactListeners$"+r1,yme="__reactHandles$"+r1;function zv(t){var e=t[yf];if(e)return e;for(var n=t.parentNode;n;){if(e=n[sm]||n[yf]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=uW(t);t!==null;){if(n=t[yf])return n;t=uW(t)}return e}t=n,n=t.parentNode}return null}function VM(t){return t=t[yf]||t[sm],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function mx(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(dn(33))}function ck(t){return t[o2]||null}var vz=[],gx=-1;function xy(t){return{current:t}}function yo(t){0>gx||(t.current=vz[gx],vz[gx]=null,gx--)}function lo(t,e){gx++,vz[gx]=t.current,t.current=e}var uy={},xl=xy(uy),_c=xy(!1),p0=uy;function ab(t,e){var n=t.type.contextTypes;if(!n)return uy;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function xc(t){return t=t.childContextTypes,t!=null}function aP(){yo(_c),yo(xl)}function dW(t,e,n){if(xl.current!==uy)throw Error(dn(168));lo(xl,e),lo(_c,n)}function uQ(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(dn(108,tpe(t)||"Unknown",i));return Bo({},n,r)}function lP(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||uy,p0=xl.current,lo(xl,t),lo(_c,_c.current),!0}function hW(t,e,n){var r=t.stateNode;if(!r)throw Error(dn(169));n?(t=uQ(t,e,p0),r.__reactInternalMemoizedMergedChildContext=t,yo(_c),yo(xl),lo(xl,t)):yo(_c),lo(_c,n)}var Dp=null,uk=!1,tD=!1;function dQ(t){Dp===null?Dp=[t]:Dp.push(t)}function vme(t){uk=!0,dQ(t)}function by(){if(!tD&&Dp!==null){tD=!0;var t=0,e=Fi;try{var n=Dp;for(Fi=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Dp=null,uk=!1}catch(i){throw Dp!==null&&(Dp=Dp.slice(t+1)),NJ(s5,by),i}finally{Fi=e,tD=!1}}return null}var yx=[],vx=0,cP=null,uP=0,nd=[],rd=0,m0=null,$p=1,jp="";function bv(t,e){yx[vx++]=uP,yx[vx++]=cP,cP=t,uP=e}function hQ(t,e,n){nd[rd++]=$p,nd[rd++]=jp,nd[rd++]=m0,m0=t;var r=$p;t=jp;var i=32-Mh(r)-1;r&=~(1<<i),n+=1;var o=32-Mh(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,$p=1<<32-Mh(e)+i|n<<i|r,jp=o+t}else $p=1<<o|n<<i|r,jp=t}function m5(t){t.return!==null&&(bv(t,1),hQ(t,1,0))}function g5(t){for(;t===cP;)cP=yx[--vx],yx[vx]=null,uP=yx[--vx],yx[vx]=null;for(;t===m0;)m0=nd[--rd],nd[rd]=null,jp=nd[--rd],nd[rd]=null,$p=nd[--rd],nd[rd]=null}var lu=null,su=null,To=!1,ph=null;function fQ(t,e){var n=cd(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fW(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,lu=t,su=Kg(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,lu=t,su=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=m0!==null?{id:$p,overflow:jp}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=cd(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,lu=t,su=null,!0):!1;default:return!1}}function _z(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xz(t){if(To){var e=su;if(e){var n=e;if(!fW(t,e)){if(_z(t))throw Error(dn(418));e=Kg(n.nextSibling);var r=lu;e&&fW(t,e)?fQ(r,n):(t.flags=t.flags&-4097|2,To=!1,lu=t)}}else{if(_z(t))throw Error(dn(418));t.flags=t.flags&-4097|2,To=!1,lu=t}}}function pW(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;lu=t}function bT(t){if(t!==lu)return!1;if(!To)return pW(t),To=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!mz(t.type,t.memoizedProps)),e&&(e=su)){if(_z(t))throw pQ(),Error(dn(418));for(;e;)fQ(t,e),e=Kg(e.nextSibling)}if(pW(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(dn(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){su=Kg(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}su=null}}else su=lu?Kg(t.stateNode.nextSibling):null;return!0}function pQ(){for(var t=su;t;)t=Kg(t.nextSibling)}function lb(){su=lu=null,To=!1}function y5(t){ph===null?ph=[t]:ph.push(t)}var _me=bm.ReactCurrentBatchConfig;function ch(t,e){if(t&&t.defaultProps){e=Bo({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var dP=xy(null),hP=null,_x=null,v5=null;function _5(){v5=_x=hP=null}function x5(t){var e=dP.current;yo(dP),t._currentValue=e}function bz(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Wx(t,e){hP=t,v5=_x=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yc=!0),t.firstContext=null)}function yd(t){var e=t._currentValue;if(v5!==t)if(t={context:t,memoizedValue:e,next:null},_x===null){if(hP===null)throw Error(dn(308));_x=t,hP.dependencies={lanes:0,firstContext:t}}else _x=_x.next=t;return e}var Fv=null;function b5(t){Fv===null?Fv=[t]:Fv.push(t)}function mQ(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,b5(e)):(n.next=i.next,i.next=n),e.interleaved=n,am(t,r)}function am(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var kg=!1;function w5(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gQ(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zp(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zg(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,hi&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,am(t,n)}return i=r.interleaved,i===null?(e.next=e,b5(r)):(e.next=i.next,i.next=e),r.interleaved=e,am(t,n)}function yA(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,a5(t,n)}}function mW(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fP(t,e,n,r){var i=t.updateQueue;kg=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,d=l.next;l.next=null,s===null?o=d:s.next=d,s=l;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==s&&(a===null?f.firstBaseUpdate=d:a.next=d,f.lastBaseUpdate=l))}if(o!==null){var p=i.baseState;s=0,f=d=l=null,a=o;do{var g=a.lane,v=a.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,b=a;switch(g=e,v=n,b.tag){case 1:if(x=b.payload,typeof x=="function"){p=x.call(v,p,g);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,g=typeof x=="function"?x.call(v,p,g):x,g==null)break e;p=Bo({},p,g);break e;case 2:kg=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[a]:g.push(a))}else v={eventTime:v,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(d=f=v,l=p):f=f.next=v,s|=g;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;g=a,a=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(f===null&&(l=p),i.baseState=l,i.firstBaseUpdate=d,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);y0|=s,t.lanes=s,t.memoizedState=p}}function gW(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(dn(191,i));i.call(r)}}}var yQ=new mJ.Component().refs;function wz(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Bo({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var dk={isMounted:function(t){return(t=t._reactInternals)?L0(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Vl(),i=Qg(t),o=Zp(r,i);o.payload=e,n!=null&&(o.callback=n),e=Zg(t,o,i),e!==null&&(Eh(e,t,i,r),yA(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Vl(),i=Qg(t),o=Zp(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Zg(t,o,i),e!==null&&(Eh(e,t,i,r),yA(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Vl(),r=Qg(t),i=Zp(n,r);i.tag=2,e!=null&&(i.callback=e),e=Zg(t,i,r),e!==null&&(Eh(e,t,r,n),yA(e,t,r))}};function yW(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!n2(n,r)||!n2(i,o):!0}function vQ(t,e,n){var r=!1,i=uy,o=e.contextType;return typeof o=="object"&&o!==null?o=yd(o):(i=xc(e)?p0:xl.current,r=e.contextTypes,o=(r=r!=null)?ab(t,i):uy),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dk,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function vW(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&dk.enqueueReplaceState(e,e.state,null)}function Sz(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=yQ,w5(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=yd(o):(o=xc(e)?p0:xl.current,i.context=ab(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(wz(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&dk.enqueueReplaceState(i,i.state,null),fP(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function mw(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(dn(309));var r=n.stateNode}if(!r)throw Error(dn(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;a===yQ&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(dn(284));if(!n._owner)throw Error(dn(290,t))}return t}function wT(t,e){throw t=Object.prototype.toString.call(e),Error(dn(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _W(t){var e=t._init;return e(t._payload)}function _Q(t){function e(M,T){if(t){var C=M.deletions;C===null?(M.deletions=[T],M.flags|=16):C.push(T)}}function n(M,T){if(!t)return null;for(;T!==null;)e(M,T),T=T.sibling;return null}function r(M,T){for(M=new Map;T!==null;)T.key!==null?M.set(T.key,T):M.set(T.index,T),T=T.sibling;return M}function i(M,T){return M=ey(M,T),M.index=0,M.sibling=null,M}function o(M,T,C){return M.index=C,t?(C=M.alternate,C!==null?(C=C.index,C<T?(M.flags|=2,T):C):(M.flags|=2,T)):(M.flags|=1048576,T)}function s(M){return t&&M.alternate===null&&(M.flags|=2),M}function a(M,T,C,k){return T===null||T.tag!==6?(T=lD(C,M.mode,k),T.return=M,T):(T=i(T,C),T.return=M,T)}function l(M,T,C,k){var O=C.type;return O===dx?f(M,T,C.props.children,k,C.key):T!==null&&(T.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ig&&_W(O)===T.type)?(k=i(T,C.props),k.ref=mw(M,T,C),k.return=M,k):(k=SA(C.type,C.key,C.props,null,M.mode,k),k.ref=mw(M,T,C),k.return=M,k)}function d(M,T,C,k){return T===null||T.tag!==4||T.stateNode.containerInfo!==C.containerInfo||T.stateNode.implementation!==C.implementation?(T=cD(C,M.mode,k),T.return=M,T):(T=i(T,C.children||[]),T.return=M,T)}function f(M,T,C,k,O){return T===null||T.tag!==7?(T=t0(C,M.mode,k,O),T.return=M,T):(T=i(T,C),T.return=M,T)}function p(M,T,C){if(typeof T=="string"&&T!==""||typeof T=="number")return T=lD(""+T,M.mode,C),T.return=M,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case dT:return C=SA(T.type,T.key,T.props,null,M.mode,C),C.ref=mw(M,null,T),C.return=M,C;case ux:return T=cD(T,M.mode,C),T.return=M,T;case Ig:var k=T._init;return p(M,k(T._payload),C)}if(aS(T)||uw(T))return T=t0(T,M.mode,C,null),T.return=M,T;wT(M,T)}return null}function g(M,T,C,k){var O=T!==null?T.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return O!==null?null:a(M,T,""+C,k);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case dT:return C.key===O?l(M,T,C,k):null;case ux:return C.key===O?d(M,T,C,k):null;case Ig:return O=C._init,g(M,T,O(C._payload),k)}if(aS(C)||uw(C))return O!==null?null:f(M,T,C,k,null);wT(M,C)}return null}function v(M,T,C,k,O){if(typeof k=="string"&&k!==""||typeof k=="number")return M=M.get(C)||null,a(T,M,""+k,O);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case dT:return M=M.get(k.key===null?C:k.key)||null,l(T,M,k,O);case ux:return M=M.get(k.key===null?C:k.key)||null,d(T,M,k,O);case Ig:var D=k._init;return v(M,T,C,D(k._payload),O)}if(aS(k)||uw(k))return M=M.get(C)||null,f(T,M,k,O,null);wT(T,k)}return null}function x(M,T,C,k){for(var O=null,D=null,B=T,U=T=0,J=null;B!==null&&U<C.length;U++){B.index>U?(J=B,B=null):J=B.sibling;var V=g(M,B,C[U],k);if(V===null){B===null&&(B=J);break}t&&B&&V.alternate===null&&e(M,B),T=o(V,T,U),D===null?O=V:D.sibling=V,D=V,B=J}if(U===C.length)return n(M,B),To&&bv(M,U),O;if(B===null){for(;U<C.length;U++)B=p(M,C[U],k),B!==null&&(T=o(B,T,U),D===null?O=B:D.sibling=B,D=B);return To&&bv(M,U),O}for(B=r(M,B);U<C.length;U++)J=v(B,M,U,C[U],k),J!==null&&(t&&J.alternate!==null&&B.delete(J.key===null?U:J.key),T=o(J,T,U),D===null?O=J:D.sibling=J,D=J);return t&&B.forEach(function(X){return e(M,X)}),To&&bv(M,U),O}function b(M,T,C,k){var O=uw(C);if(typeof O!="function")throw Error(dn(150));if(C=O.call(C),C==null)throw Error(dn(151));for(var D=O=null,B=T,U=T=0,J=null,V=C.next();B!==null&&!V.done;U++,V=C.next()){B.index>U?(J=B,B=null):J=B.sibling;var X=g(M,B,V.value,k);if(X===null){B===null&&(B=J);break}t&&B&&X.alternate===null&&e(M,B),T=o(X,T,U),D===null?O=X:D.sibling=X,D=X,B=J}if(V.done)return n(M,B),To&&bv(M,U),O;if(B===null){for(;!V.done;U++,V=C.next())V=p(M,V.value,k),V!==null&&(T=o(V,T,U),D===null?O=V:D.sibling=V,D=V);return To&&bv(M,U),O}for(B=r(M,B);!V.done;U++,V=C.next())V=v(B,M,U,V.value,k),V!==null&&(t&&V.alternate!==null&&B.delete(V.key===null?U:V.key),T=o(V,T,U),D===null?O=V:D.sibling=V,D=V);return t&&B.forEach(function(oe){return e(M,oe)}),To&&bv(M,U),O}function S(M,T,C,k){if(typeof C=="object"&&C!==null&&C.type===dx&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case dT:e:{for(var O=C.key,D=T;D!==null;){if(D.key===O){if(O=C.type,O===dx){if(D.tag===7){n(M,D.sibling),T=i(D,C.props.children),T.return=M,M=T;break e}}else if(D.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ig&&_W(O)===D.type){n(M,D.sibling),T=i(D,C.props),T.ref=mw(M,D,C),T.return=M,M=T;break e}n(M,D);break}else e(M,D);D=D.sibling}C.type===dx?(T=t0(C.props.children,M.mode,k,C.key),T.return=M,M=T):(k=SA(C.type,C.key,C.props,null,M.mode,k),k.ref=mw(M,T,C),k.return=M,M=k)}return s(M);case ux:e:{for(D=C.key;T!==null;){if(T.key===D)if(T.tag===4&&T.stateNode.containerInfo===C.containerInfo&&T.stateNode.implementation===C.implementation){n(M,T.sibling),T=i(T,C.children||[]),T.return=M,M=T;break e}else{n(M,T);break}else e(M,T);T=T.sibling}T=cD(C,M.mode,k),T.return=M,M=T}return s(M);case Ig:return D=C._init,S(M,T,D(C._payload),k)}if(aS(C))return x(M,T,C,k);if(uw(C))return b(M,T,C,k);wT(M,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,T!==null&&T.tag===6?(n(M,T.sibling),T=i(T,C),T.return=M,M=T):(n(M,T),T=lD(C,M.mode,k),T.return=M,M=T),s(M)):n(M,T)}return S}var cb=_Q(!0),xQ=_Q(!1),WM={},Mf=xy(WM),s2=xy(WM),a2=xy(WM);function Bv(t){if(t===WM)throw Error(dn(174));return t}function S5(t,e){switch(lo(a2,e),lo(s2,t),lo(Mf,WM),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tz(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=tz(e,t)}yo(Mf),lo(Mf,e)}function ub(){yo(Mf),yo(s2),yo(a2)}function bQ(t){Bv(a2.current);var e=Bv(Mf.current),n=tz(e,t.type);e!==n&&(lo(s2,t),lo(Mf,n))}function M5(t){s2.current===t&&(yo(Mf),yo(s2))}var Oo=xy(0);function pP(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var nD=[];function E5(){for(var t=0;t<nD.length;t++)nD[t]._workInProgressVersionPrimary=null;nD.length=0}var vA=bm.ReactCurrentDispatcher,rD=bm.ReactCurrentBatchConfig,g0=0,zo=null,js=null,la=null,mP=!1,MS=!1,l2=0,xme=0;function tl(){throw Error(dn(321))}function T5(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ch(t[n],e[n]))return!1;return!0}function C5(t,e,n,r,i,o){if(g0=o,zo=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vA.current=t===null||t.memoizedState===null?Mme:Eme,t=n(r,i),MS){o=0;do{if(MS=!1,l2=0,25<=o)throw Error(dn(301));o+=1,la=js=null,e.updateQueue=null,vA.current=Tme,t=n(r,i)}while(MS)}if(vA.current=gP,e=js!==null&&js.next!==null,g0=0,la=js=zo=null,mP=!1,e)throw Error(dn(300));return t}function A5(){var t=l2!==0;return l2=0,t}function hf(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return la===null?zo.memoizedState=la=t:la=la.next=t,la}function vd(){if(js===null){var t=zo.alternate;t=t!==null?t.memoizedState:null}else t=js.next;var e=la===null?zo.memoizedState:la.next;if(e!==null)la=e,js=t;else{if(t===null)throw Error(dn(310));js=t,t={memoizedState:js.memoizedState,baseState:js.baseState,baseQueue:js.baseQueue,queue:js.queue,next:null},la===null?zo.memoizedState=la=t:la=la.next=t}return la}function c2(t,e){return typeof e=="function"?e(t):e}function iD(t){var e=vd(),n=e.queue;if(n===null)throw Error(dn(311));n.lastRenderedReducer=t;var r=js,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,d=o;do{var f=d.lane;if((g0&f)===f)l!==null&&(l=l.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};l===null?(a=l=p,s=r):l=l.next=p,zo.lanes|=f,y0|=f}d=d.next}while(d!==null&&d!==o);l===null?s=r:l.next=a,Ch(r,e.memoizedState)||(yc=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,zo.lanes|=o,y0|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function oD(t){var e=vd(),n=e.queue;if(n===null)throw Error(dn(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Ch(o,e.memoizedState)||(yc=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function wQ(){}function SQ(t,e){var n=zo,r=vd(),i=e(),o=!Ch(r.memoizedState,i);if(o&&(r.memoizedState=i,yc=!0),r=r.queue,P5(TQ.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||la!==null&&la.memoizedState.tag&1){if(n.flags|=2048,u2(9,EQ.bind(null,n,r,i,e),void 0,null),ca===null)throw Error(dn(349));g0&30||MQ(n,e,i)}return i}function MQ(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=zo.updateQueue,e===null?(e={lastEffect:null,stores:null},zo.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function EQ(t,e,n,r){e.value=n,e.getSnapshot=r,CQ(e)&&AQ(t)}function TQ(t,e,n){return n(function(){CQ(e)&&AQ(t)})}function CQ(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ch(t,n)}catch{return!0}}function AQ(t){var e=am(t,1);e!==null&&Eh(e,t,1,-1)}function xW(t){var e=hf();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c2,lastRenderedState:t},e.queue=t,t=t.dispatch=Sme.bind(null,zo,t),[e.memoizedState,t]}function u2(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=zo.updateQueue,e===null?(e={lastEffect:null,stores:null},zo.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function PQ(){return vd().memoizedState}function _A(t,e,n,r){var i=hf();zo.flags|=t,i.memoizedState=u2(1|e,n,void 0,r===void 0?null:r)}function hk(t,e,n,r){var i=vd();r=r===void 0?null:r;var o=void 0;if(js!==null){var s=js.memoizedState;if(o=s.destroy,r!==null&&T5(r,s.deps)){i.memoizedState=u2(e,n,o,r);return}}zo.flags|=t,i.memoizedState=u2(1|e,n,o,r)}function bW(t,e){return _A(8390656,8,t,e)}function P5(t,e){return hk(2048,8,t,e)}function IQ(t,e){return hk(4,2,t,e)}function kQ(t,e){return hk(4,4,t,e)}function RQ(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function OQ(t,e,n){return n=n!=null?n.concat([t]):null,hk(4,4,RQ.bind(null,e,t),n)}function I5(){}function LQ(t,e){var n=vd();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&T5(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function DQ(t,e){var n=vd();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&T5(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function NQ(t,e,n){return g0&21?(Ch(n,e)||(n=BJ(),zo.lanes|=n,y0|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yc=!0),t.memoizedState=n)}function bme(t,e){var n=Fi;Fi=n!==0&&4>n?n:4,t(!0);var r=rD.transition;rD.transition={};try{t(!1),e()}finally{Fi=n,rD.transition=r}}function zQ(){return vd().memoizedState}function wme(t,e,n){var r=Qg(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},FQ(t))BQ(e,n);else if(n=mQ(t,e,n,r),n!==null){var i=Vl();Eh(n,t,r,i),$Q(n,e,r)}}function Sme(t,e,n){var r=Qg(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(FQ(t))BQ(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Ch(a,s)){var l=e.interleaved;l===null?(i.next=i,b5(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=mQ(t,e,i,r),n!==null&&(i=Vl(),Eh(n,t,r,i),$Q(n,e,r))}}function FQ(t){var e=t.alternate;return t===zo||e!==null&&e===zo}function BQ(t,e){MS=mP=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $Q(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,a5(t,n)}}var gP={readContext:yd,useCallback:tl,useContext:tl,useEffect:tl,useImperativeHandle:tl,useInsertionEffect:tl,useLayoutEffect:tl,useMemo:tl,useReducer:tl,useRef:tl,useState:tl,useDebugValue:tl,useDeferredValue:tl,useTransition:tl,useMutableSource:tl,useSyncExternalStore:tl,useId:tl,unstable_isNewReconciler:!1},Mme={readContext:yd,useCallback:function(t,e){return hf().memoizedState=[t,e===void 0?null:e],t},useContext:yd,useEffect:bW,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_A(4194308,4,RQ.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _A(4194308,4,t,e)},useInsertionEffect:function(t,e){return _A(4,2,t,e)},useMemo:function(t,e){var n=hf();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hf();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=wme.bind(null,zo,t),[r.memoizedState,t]},useRef:function(t){var e=hf();return t={current:t},e.memoizedState=t},useState:xW,useDebugValue:I5,useDeferredValue:function(t){return hf().memoizedState=t},useTransition:function(){var t=xW(!1),e=t[0];return t=bme.bind(null,t[1]),hf().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=zo,i=hf();if(To){if(n===void 0)throw Error(dn(407));n=n()}else{if(n=e(),ca===null)throw Error(dn(349));g0&30||MQ(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,bW(TQ.bind(null,r,o,t),[t]),r.flags|=2048,u2(9,EQ.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=hf(),e=ca.identifierPrefix;if(To){var n=jp,r=$p;n=(r&~(1<<32-Mh(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=l2++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=xme++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Eme={readContext:yd,useCallback:LQ,useContext:yd,useEffect:P5,useImperativeHandle:OQ,useInsertionEffect:IQ,useLayoutEffect:kQ,useMemo:DQ,useReducer:iD,useRef:PQ,useState:function(){return iD(c2)},useDebugValue:I5,useDeferredValue:function(t){var e=vd();return NQ(e,js.memoizedState,t)},useTransition:function(){var t=iD(c2)[0],e=vd().memoizedState;return[t,e]},useMutableSource:wQ,useSyncExternalStore:SQ,useId:zQ,unstable_isNewReconciler:!1},Tme={readContext:yd,useCallback:LQ,useContext:yd,useEffect:P5,useImperativeHandle:OQ,useInsertionEffect:IQ,useLayoutEffect:kQ,useMemo:DQ,useReducer:oD,useRef:PQ,useState:function(){return oD(c2)},useDebugValue:I5,useDeferredValue:function(t){var e=vd();return js===null?e.memoizedState=t:NQ(e,js.memoizedState,t)},useTransition:function(){var t=oD(c2)[0],e=vd().memoizedState;return[t,e]},useMutableSource:wQ,useSyncExternalStore:SQ,useId:zQ,unstable_isNewReconciler:!1};function db(t,e){try{var n="",r=e;do n+=epe(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function sD(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Mz(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Cme=typeof WeakMap=="function"?WeakMap:Map;function jQ(t,e,n){n=Zp(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vP||(vP=!0,Lz=r),Mz(t,e)},n}function UQ(t,e,n){n=Zp(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Mz(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Mz(t,e),typeof r!="function"&&(Jg===null?Jg=new Set([this]):Jg.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function wW(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Cme;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=jme.bind(null,t,e,n),e.then(t,t))}function SW(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function MW(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zp(-1,1),e.tag=2,Zg(n,e,1))),n.lanes|=1),t)}var Ame=bm.ReactCurrentOwner,yc=!1;function zl(t,e,n,r){e.child=t===null?xQ(e,null,n,r):cb(e,t.child,n,r)}function EW(t,e,n,r,i){n=n.render;var o=e.ref;return Wx(e,i),r=C5(t,e,n,r,o,i),n=A5(),t!==null&&!yc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,lm(t,e,i)):(To&&n&&m5(e),e.flags|=1,zl(t,e,r,i),e.child)}function TW(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!F5(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,VQ(t,e,o,r,i)):(t=SA(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:n2,n(s,r)&&t.ref===e.ref)return lm(t,e,i)}return e.flags|=1,t=ey(o,r),t.ref=e.ref,t.return=e,e.child=t}function VQ(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(n2(o,r)&&t.ref===e.ref)if(yc=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(yc=!0);else return e.lanes=t.lanes,lm(t,e,i)}return Ez(t,e,n,r,i)}function WQ(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},lo(bx,Kc),Kc|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,lo(bx,Kc),Kc|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,lo(bx,Kc),Kc|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,lo(bx,Kc),Kc|=r;return zl(t,e,i,n),e.child}function HQ(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ez(t,e,n,r,i){var o=xc(n)?p0:xl.current;return o=ab(e,o),Wx(e,i),n=C5(t,e,n,r,o,i),r=A5(),t!==null&&!yc?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,lm(t,e,i)):(To&&r&&m5(e),e.flags|=1,zl(t,e,n,i),e.child)}function CW(t,e,n,r,i){if(xc(n)){var o=!0;lP(e)}else o=!1;if(Wx(e,i),e.stateNode===null)xA(t,e),vQ(e,n,r),Sz(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=yd(d):(d=xc(n)?p0:xl.current,d=ab(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==d)&&vW(e,s,r,d),kg=!1;var g=e.memoizedState;s.state=g,fP(e,r,s,i),l=e.memoizedState,a!==r||g!==l||_c.current||kg?(typeof f=="function"&&(wz(e,n,f,r),l=e.memoizedState),(a=kg||yW(e,n,a,r,g,l,d))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=d,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,gQ(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:ch(e.type,a),s.props=d,p=e.pendingProps,g=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=yd(l):(l=xc(n)?p0:xl.current,l=ab(e,l));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||g!==l)&&vW(e,s,r,l),kg=!1,g=e.memoizedState,s.state=g,fP(e,r,s,i);var x=e.memoizedState;a!==p||g!==x||_c.current||kg?(typeof v=="function"&&(wz(e,n,v,r),x=e.memoizedState),(d=kg||yW(e,n,d,r,g,x,l)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,x,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,x,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),s.props=r,s.state=x,s.context=l,r=d):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Tz(t,e,n,r,o,i)}function Tz(t,e,n,r,i,o){HQ(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&hW(e,n,!1),lm(t,e,o);r=e.stateNode,Ame.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=cb(e,t.child,null,o),e.child=cb(e,null,a,o)):zl(t,e,a,o),e.memoizedState=r.state,i&&hW(e,n,!0),e.child}function GQ(t){var e=t.stateNode;e.pendingContext?dW(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dW(t,e.context,!1),S5(t,e.containerInfo)}function AW(t,e,n,r,i){return lb(),y5(i),e.flags|=256,zl(t,e,n,r),e.child}var Cz={dehydrated:null,treeContext:null,retryLane:0};function Az(t){return{baseLanes:t,cachePool:null,transitions:null}}function qQ(t,e,n){var r=e.pendingProps,i=Oo.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),lo(Oo,i&1),t===null)return xz(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=mk(s,r,0,null),t=t0(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Az(n),e.memoizedState=Cz,t):k5(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Pme(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ey(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=ey(a,o):(o=t0(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Az(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Cz,r}return o=t.child,t=o.sibling,r=ey(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function k5(t,e){return e=mk({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ST(t,e,n,r){return r!==null&&y5(r),cb(e,t.child,null,n),t=k5(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Pme(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=sD(Error(dn(422))),ST(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=mk({mode:"visible",children:r.children},i,0,null),o=t0(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&cb(e,t.child,null,s),e.child.memoizedState=Az(s),e.memoizedState=Cz,o);if(!(e.mode&1))return ST(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(dn(419)),r=sD(o,r,void 0),ST(t,e,s,r)}if(a=(s&t.childLanes)!==0,yc||a){if(r=ca,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,am(t,i),Eh(r,t,i,-1))}return z5(),r=sD(Error(dn(421))),ST(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Ume.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,su=Kg(i.nextSibling),lu=e,To=!0,ph=null,t!==null&&(nd[rd++]=$p,nd[rd++]=jp,nd[rd++]=m0,$p=t.id,jp=t.overflow,m0=e),e=k5(e,r.children),e.flags|=4096,e)}function PW(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),bz(t.return,e,n)}function aD(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function YQ(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(zl(t,e,r.children,n),r=Oo.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&PW(t,n,e);else if(t.tag===19)PW(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(lo(Oo,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&pP(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),aD(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&pP(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}aD(e,!0,n,null,o);break;case"together":aD(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xA(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function lm(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),y0|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(dn(153));if(e.child!==null){for(t=e.child,n=ey(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ey(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ime(t,e,n){switch(e.tag){case 3:GQ(e),lb();break;case 5:bQ(e);break;case 1:xc(e.type)&&lP(e);break;case 4:S5(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;lo(dP,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(lo(Oo,Oo.current&1),e.flags|=128,null):n&e.child.childLanes?qQ(t,e,n):(lo(Oo,Oo.current&1),t=lm(t,e,n),t!==null?t.sibling:null);lo(Oo,Oo.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return YQ(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),lo(Oo,Oo.current),r)break;return null;case 22:case 23:return e.lanes=0,WQ(t,e,n)}return lm(t,e,n)}var XQ,Pz,KQ,ZQ;XQ=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pz=function(){};KQ=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Bv(Mf.current);var o=null;switch(n){case"input":i=ZN(t,i),r=ZN(t,r),o=[];break;case"select":i=Bo({},i,{value:void 0}),r=Bo({},r,{value:void 0}),o=[];break;case"textarea":i=ez(t,i),r=ez(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=sP)}nz(n,r);var s;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var a=i[d];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(XS.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var l=r[d];if(a=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&l!==a&&(l!=null||a!=null))if(d==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(d,n)),n=l;else d==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(d,l)):d==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(d,""+l):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(XS.hasOwnProperty(d)?(l!=null&&d==="onScroll"&&po("scroll",t),o||a===l||(o=[])):(o=o||[]).push(d,l))}n&&(o=o||[]).push("style",n);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};ZQ=function(t,e,n,r){n!==r&&(e.flags|=4)};function gw(t,e){if(!To)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nl(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function kme(t,e,n){var r=e.pendingProps;switch(g5(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nl(e),null;case 1:return xc(e.type)&&aP(),nl(e),null;case 3:return r=e.stateNode,ub(),yo(_c),yo(xl),E5(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(bT(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ph!==null&&(zz(ph),ph=null))),Pz(t,e),nl(e),null;case 5:M5(e);var i=Bv(a2.current);if(n=e.type,t!==null&&e.stateNode!=null)KQ(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(dn(166));return nl(e),null}if(t=Bv(Mf.current),bT(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[yf]=e,r[o2]=o,t=(e.mode&1)!==0,n){case"dialog":po("cancel",r),po("close",r);break;case"iframe":case"object":case"embed":po("load",r);break;case"video":case"audio":for(i=0;i<cS.length;i++)po(cS[i],r);break;case"source":po("error",r);break;case"img":case"image":case"link":po("error",r),po("load",r);break;case"details":po("toggle",r);break;case"input":FV(r,o),po("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},po("invalid",r);break;case"textarea":$V(r,o),po("invalid",r)}nz(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&xT(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&xT(r.textContent,a,t),i=["children",""+a]):XS.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&po("scroll",r)}switch(n){case"input":hT(r),BV(r,o,!0);break;case"textarea":hT(r),jV(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=sP)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=MJ(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[yf]=e,t[o2]=r,XQ(t,e,!1,!1),e.stateNode=t;e:{switch(s=rz(n,r),n){case"dialog":po("cancel",t),po("close",t),i=r;break;case"iframe":case"object":case"embed":po("load",t),i=r;break;case"video":case"audio":for(i=0;i<cS.length;i++)po(cS[i],t);i=r;break;case"source":po("error",t),i=r;break;case"img":case"image":case"link":po("error",t),po("load",t),i=r;break;case"details":po("toggle",t),i=r;break;case"input":FV(t,r),i=ZN(t,r),po("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Bo({},r,{value:void 0}),po("invalid",t);break;case"textarea":$V(t,r),i=ez(t,r),po("invalid",t);break;default:i=r}nz(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?CJ(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&EJ(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&KS(t,l):typeof l=="number"&&KS(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(XS.hasOwnProperty(o)?l!=null&&o==="onScroll"&&po("scroll",t):l!=null&&t5(t,o,l,s))}switch(n){case"input":hT(t),BV(t,r,!1);break;case"textarea":hT(t),jV(t);break;case"option":r.value!=null&&t.setAttribute("value",""+cy(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?$x(t,!!r.multiple,o,!1):r.defaultValue!=null&&$x(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=sP)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nl(e),null;case 6:if(t&&e.stateNode!=null)ZQ(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(dn(166));if(n=Bv(a2.current),Bv(Mf.current),bT(e)){if(r=e.stateNode,n=e.memoizedProps,r[yf]=e,(o=r.nodeValue!==n)&&(t=lu,t!==null))switch(t.tag){case 3:xT(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xT(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yf]=e,e.stateNode=r}return nl(e),null;case 13:if(yo(Oo),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(To&&su!==null&&e.mode&1&&!(e.flags&128))pQ(),lb(),e.flags|=98560,o=!1;else if(o=bT(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(dn(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(dn(317));o[yf]=e}else lb(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nl(e),o=!1}else ph!==null&&(zz(ph),ph=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Oo.current&1?Us===0&&(Us=3):z5())),e.updateQueue!==null&&(e.flags|=4),nl(e),null);case 4:return ub(),Pz(t,e),t===null&&r2(e.stateNode.containerInfo),nl(e),null;case 10:return x5(e.type._context),nl(e),null;case 17:return xc(e.type)&&aP(),nl(e),null;case 19:if(yo(Oo),o=e.memoizedState,o===null)return nl(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)gw(o,!1);else{if(Us!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=pP(t),s!==null){for(e.flags|=128,gw(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return lo(Oo,Oo.current&1|2),e.child}t=t.sibling}o.tail!==null&&us()>hb&&(e.flags|=128,r=!0,gw(o,!1),e.lanes=4194304)}else{if(!r)if(t=pP(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gw(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!To)return nl(e),null}else 2*us()-o.renderingStartTime>hb&&n!==1073741824&&(e.flags|=128,r=!0,gw(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=us(),e.sibling=null,n=Oo.current,lo(Oo,r?n&1|2:n&1),e):(nl(e),null);case 22:case 23:return N5(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Kc&1073741824&&(nl(e),e.subtreeFlags&6&&(e.flags|=8192)):nl(e),null;case 24:return null;case 25:return null}throw Error(dn(156,e.tag))}function Rme(t,e){switch(g5(e),e.tag){case 1:return xc(e.type)&&aP(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ub(),yo(_c),yo(xl),E5(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return M5(e),null;case 13:if(yo(Oo),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(dn(340));lb()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return yo(Oo),null;case 4:return ub(),null;case 10:return x5(e.type._context),null;case 22:case 23:return N5(),null;case 24:return null;default:return null}}var MT=!1,ul=!1,Ome=typeof WeakSet=="function"?WeakSet:Set,Hn=null;function xx(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qo(t,e,r)}else n.current=null}function Iz(t,e,n){try{n()}catch(r){qo(t,e,r)}}var IW=!1;function Lme(t,e){if(fz=rP,t=tQ(),p5(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,d=0,f=0,p=t,g=null;t:for(;;){for(var v;p!==n||i!==0&&p.nodeType!==3||(a=s+i),p!==o||r!==0&&p.nodeType!==3||(l=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(v=p.firstChild)!==null;)g=p,p=v;for(;;){if(p===t)break t;if(g===n&&++d===i&&(a=s),g===o&&++f===r&&(l=s),(v=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=v}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(pz={focusedElem:t,selectionRange:n},rP=!1,Hn=e;Hn!==null;)if(e=Hn,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Hn=t;else for(;Hn!==null;){e=Hn;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,S=x.memoizedState,M=e.stateNode,T=M.getSnapshotBeforeUpdate(e.elementType===e.type?b:ch(e.type,b),S);M.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(dn(163))}}catch(k){qo(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,Hn=t;break}Hn=e.return}return x=IW,IW=!1,x}function ES(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Iz(e,n,o)}i=i.next}while(i!==r)}}function fk(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function kz(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function JQ(t){var e=t.alternate;e!==null&&(t.alternate=null,JQ(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yf],delete e[o2],delete e[yz],delete e[gme],delete e[yme])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function QQ(t){return t.tag===5||t.tag===3||t.tag===4}function kW(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||QQ(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rz(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=sP));else if(r!==4&&(t=t.child,t!==null))for(Rz(t,e,n),t=t.sibling;t!==null;)Rz(t,e,n),t=t.sibling}function Oz(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Oz(t,e,n),t=t.sibling;t!==null;)Oz(t,e,n),t=t.sibling}var ka=null,dh=!1;function hg(t,e,n){for(n=n.child;n!==null;)eee(t,e,n),n=n.sibling}function eee(t,e,n){if(Sf&&typeof Sf.onCommitFiberUnmount=="function")try{Sf.onCommitFiberUnmount(ok,n)}catch{}switch(n.tag){case 5:ul||xx(n,e);case 6:var r=ka,i=dh;ka=null,hg(t,e,n),ka=r,dh=i,ka!==null&&(dh?(t=ka,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ka.removeChild(n.stateNode));break;case 18:ka!==null&&(dh?(t=ka,n=n.stateNode,t.nodeType===8?eD(t.parentNode,n):t.nodeType===1&&eD(t,n),e2(t)):eD(ka,n.stateNode));break;case 4:r=ka,i=dh,ka=n.stateNode.containerInfo,dh=!0,hg(t,e,n),ka=r,dh=i;break;case 0:case 11:case 14:case 15:if(!ul&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Iz(n,e,s),i=i.next}while(i!==r)}hg(t,e,n);break;case 1:if(!ul&&(xx(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){qo(n,e,a)}hg(t,e,n);break;case 21:hg(t,e,n);break;case 22:n.mode&1?(ul=(r=ul)||n.memoizedState!==null,hg(t,e,n),ul=r):hg(t,e,n);break;default:hg(t,e,n)}}function RW(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ome),e.forEach(function(r){var i=Vme.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function nh(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:ka=a.stateNode,dh=!1;break e;case 3:ka=a.stateNode.containerInfo,dh=!0;break e;case 4:ka=a.stateNode.containerInfo,dh=!0;break e}a=a.return}if(ka===null)throw Error(dn(160));eee(o,s,i),ka=null,dh=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(d){qo(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tee(e,t),e=e.sibling}function tee(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nh(e,t),uf(t),r&4){try{ES(3,t,t.return),fk(3,t)}catch(b){qo(t,t.return,b)}try{ES(5,t,t.return)}catch(b){qo(t,t.return,b)}}break;case 1:nh(e,t),uf(t),r&512&&n!==null&&xx(n,n.return);break;case 5:if(nh(e,t),uf(t),r&512&&n!==null&&xx(n,n.return),t.flags&32){var i=t.stateNode;try{KS(i,"")}catch(b){qo(t,t.return,b)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&wJ(i,o),rz(a,s);var d=rz(a,o);for(s=0;s<l.length;s+=2){var f=l[s],p=l[s+1];f==="style"?CJ(i,p):f==="dangerouslySetInnerHTML"?EJ(i,p):f==="children"?KS(i,p):t5(i,f,p,d)}switch(a){case"input":JN(i,o);break;case"textarea":SJ(i,o);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?$x(i,!!o.multiple,v,!1):g!==!!o.multiple&&(o.defaultValue!=null?$x(i,!!o.multiple,o.defaultValue,!0):$x(i,!!o.multiple,o.multiple?[]:"",!1))}i[o2]=o}catch(b){qo(t,t.return,b)}}break;case 6:if(nh(e,t),uf(t),r&4){if(t.stateNode===null)throw Error(dn(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(b){qo(t,t.return,b)}}break;case 3:if(nh(e,t),uf(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{e2(e.containerInfo)}catch(b){qo(t,t.return,b)}break;case 4:nh(e,t),uf(t);break;case 13:nh(e,t),uf(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(L5=us())),r&4&&RW(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ul=(d=ul)||f,nh(e,t),ul=d):nh(e,t),uf(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Hn=t,f=t.child;f!==null;){for(p=Hn=f;Hn!==null;){switch(g=Hn,v=g.child,g.tag){case 0:case 11:case 14:case 15:ES(4,g,g.return);break;case 1:xx(g,g.return);var x=g.stateNode;if(typeof x.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(b){qo(r,n,b)}}break;case 5:xx(g,g.return);break;case 22:if(g.memoizedState!==null){LW(p);continue}}v!==null?(v.return=g,Hn=v):LW(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=p.stateNode,l=p.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=TJ("display",s))}catch(b){qo(t,t.return,b)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(b){qo(t,t.return,b)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:nh(e,t),uf(t),r&4&&RW(t);break;case 21:break;default:nh(e,t),uf(t)}}function uf(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(QQ(n)){var r=n;break e}n=n.return}throw Error(dn(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(KS(i,""),r.flags&=-33);var o=kW(t);Oz(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=kW(t);Rz(t,a,s);break;default:throw Error(dn(161))}}catch(l){qo(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Dme(t,e,n){Hn=t,nee(t)}function nee(t,e,n){for(var r=(t.mode&1)!==0;Hn!==null;){var i=Hn,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||MT;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ul;a=MT;var d=ul;if(MT=s,(ul=l)&&!d)for(Hn=i;Hn!==null;)s=Hn,l=s.child,s.tag===22&&s.memoizedState!==null?DW(i):l!==null?(l.return=s,Hn=l):DW(i);for(;o!==null;)Hn=o,nee(o),o=o.sibling;Hn=i,MT=a,ul=d}OW(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Hn=o):OW(t)}}function OW(t){for(;Hn!==null;){var e=Hn;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ul||fk(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ul)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ch(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&gW(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gW(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&e2(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(dn(163))}ul||e.flags&512&&kz(e)}catch(g){qo(e,e.return,g)}}if(e===t){Hn=null;break}if(n=e.sibling,n!==null){n.return=e.return,Hn=n;break}Hn=e.return}}function LW(t){for(;Hn!==null;){var e=Hn;if(e===t){Hn=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Hn=n;break}Hn=e.return}}function DW(t){for(;Hn!==null;){var e=Hn;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{fk(4,e)}catch(l){qo(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){qo(e,i,l)}}var o=e.return;try{kz(e)}catch(l){qo(e,o,l)}break;case 5:var s=e.return;try{kz(e)}catch(l){qo(e,s,l)}}}catch(l){qo(e,e.return,l)}if(e===t){Hn=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Hn=a;break}Hn=e.return}}var Nme=Math.ceil,yP=bm.ReactCurrentDispatcher,R5=bm.ReactCurrentOwner,dd=bm.ReactCurrentBatchConfig,hi=0,ca=null,Ts=null,Na=0,Kc=0,bx=xy(0),Us=0,d2=null,y0=0,pk=0,O5=0,TS=null,pc=null,L5=0,hb=1/0,Op=null,vP=!1,Lz=null,Jg=null,ET=!1,Bg=null,_P=0,CS=0,Dz=null,bA=-1,wA=0;function Vl(){return hi&6?us():bA!==-1?bA:bA=us()}function Qg(t){return t.mode&1?hi&2&&Na!==0?Na&-Na:_me.transition!==null?(wA===0&&(wA=BJ()),wA):(t=Fi,t!==0||(t=window.event,t=t===void 0?16:GJ(t.type)),t):1}function Eh(t,e,n,r){if(50<CS)throw CS=0,Dz=null,Error(dn(185));jM(t,n,r),(!(hi&2)||t!==ca)&&(t===ca&&(!(hi&2)&&(pk|=n),Us===4&&Lg(t,Na)),bc(t,r),n===1&&hi===0&&!(e.mode&1)&&(hb=us()+500,uk&&by()))}function bc(t,e){var n=t.callbackNode;_pe(t,e);var r=nP(t,t===ca?Na:0);if(r===0)n!==null&&WV(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&WV(n),e===1)t.tag===0?vme(NW.bind(null,t)):dQ(NW.bind(null,t)),pme(function(){!(hi&6)&&by()}),n=null;else{switch($J(r)){case 1:n=s5;break;case 4:n=zJ;break;case 16:n=tP;break;case 536870912:n=FJ;break;default:n=tP}n=uee(n,ree.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ree(t,e){if(bA=-1,wA=0,hi&6)throw Error(dn(327));var n=t.callbackNode;if(Hx()&&t.callbackNode!==n)return null;var r=nP(t,t===ca?Na:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xP(t,r);else{e=r;var i=hi;hi|=2;var o=oee();(ca!==t||Na!==e)&&(Op=null,hb=us()+500,e0(t,e));do try{Bme();break}catch(a){iee(t,a)}while(!0);_5(),yP.current=o,hi=i,Ts!==null?e=0:(ca=null,Na=0,e=Us)}if(e!==0){if(e===2&&(i=lz(t),i!==0&&(r=i,e=Nz(t,i))),e===1)throw n=d2,e0(t,0),Lg(t,r),bc(t,us()),n;if(e===6)Lg(t,r);else{if(i=t.current.alternate,!(r&30)&&!zme(i)&&(e=xP(t,r),e===2&&(o=lz(t),o!==0&&(r=o,e=Nz(t,o))),e===1))throw n=d2,e0(t,0),Lg(t,r),bc(t,us()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(dn(345));case 2:wv(t,pc,Op);break;case 3:if(Lg(t,r),(r&130023424)===r&&(e=L5+500-us(),10<e)){if(nP(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Vl(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=gz(wv.bind(null,t,pc,Op),e);break}wv(t,pc,Op);break;case 4:if(Lg(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Mh(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=us()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nme(r/1960))-r,10<r){t.timeoutHandle=gz(wv.bind(null,t,pc,Op),r);break}wv(t,pc,Op);break;case 5:wv(t,pc,Op);break;default:throw Error(dn(329))}}}return bc(t,us()),t.callbackNode===n?ree.bind(null,t):null}function Nz(t,e){var n=TS;return t.current.memoizedState.isDehydrated&&(e0(t,e).flags|=256),t=xP(t,e),t!==2&&(e=pc,pc=n,e!==null&&zz(e)),t}function zz(t){pc===null?pc=t:pc.push.apply(pc,t)}function zme(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Ch(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Lg(t,e){for(e&=~O5,e&=~pk,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mh(e),r=1<<n;t[n]=-1,e&=~r}}function NW(t){if(hi&6)throw Error(dn(327));Hx();var e=nP(t,0);if(!(e&1))return bc(t,us()),null;var n=xP(t,e);if(t.tag!==0&&n===2){var r=lz(t);r!==0&&(e=r,n=Nz(t,r))}if(n===1)throw n=d2,e0(t,0),Lg(t,e),bc(t,us()),n;if(n===6)throw Error(dn(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wv(t,pc,Op),bc(t,us()),null}function D5(t,e){var n=hi;hi|=1;try{return t(e)}finally{hi=n,hi===0&&(hb=us()+500,uk&&by())}}function v0(t){Bg!==null&&Bg.tag===0&&!(hi&6)&&Hx();var e=hi;hi|=1;var n=dd.transition,r=Fi;try{if(dd.transition=null,Fi=1,t)return t()}finally{Fi=r,dd.transition=n,hi=e,!(hi&6)&&by()}}function N5(){Kc=bx.current,yo(bx)}function e0(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,fme(n)),Ts!==null)for(n=Ts.return;n!==null;){var r=n;switch(g5(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&aP();break;case 3:ub(),yo(_c),yo(xl),E5();break;case 5:M5(r);break;case 4:ub();break;case 13:yo(Oo);break;case 19:yo(Oo);break;case 10:x5(r.type._context);break;case 22:case 23:N5()}n=n.return}if(ca=t,Ts=t=ey(t.current,null),Na=Kc=e,Us=0,d2=null,O5=pk=y0=0,pc=TS=null,Fv!==null){for(e=0;e<Fv.length;e++)if(n=Fv[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Fv=null}return t}function iee(t,e){do{var n=Ts;try{if(_5(),vA.current=gP,mP){for(var r=zo.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}mP=!1}if(g0=0,la=js=zo=null,MS=!1,l2=0,R5.current=null,n===null||n.return===null){Us=1,d2=e,Ts=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=Na,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var d=l,f=a,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=SW(s);if(v!==null){v.flags&=-257,MW(v,s,a,o,e),v.mode&1&&wW(o,d,e),e=v,l=d;var x=e.updateQueue;if(x===null){var b=new Set;b.add(l),e.updateQueue=b}else x.add(l);break e}else{if(!(e&1)){wW(o,d,e),z5();break e}l=Error(dn(426))}}else if(To&&a.mode&1){var S=SW(s);if(S!==null){!(S.flags&65536)&&(S.flags|=256),MW(S,s,a,o,e),y5(db(l,a));break e}}o=l=db(l,a),Us!==4&&(Us=2),TS===null?TS=[o]:TS.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var M=jQ(o,l,e);mW(o,M);break e;case 1:a=l;var T=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Jg===null||!Jg.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var k=UQ(o,a,e);mW(o,k);break e}}o=o.return}while(o!==null)}aee(n)}catch(O){e=O,Ts===n&&n!==null&&(Ts=n=n.return);continue}break}while(!0)}function oee(){var t=yP.current;return yP.current=gP,t===null?gP:t}function z5(){(Us===0||Us===3||Us===2)&&(Us=4),ca===null||!(y0&268435455)&&!(pk&268435455)||Lg(ca,Na)}function xP(t,e){var n=hi;hi|=2;var r=oee();(ca!==t||Na!==e)&&(Op=null,e0(t,e));do try{Fme();break}catch(i){iee(t,i)}while(!0);if(_5(),hi=n,yP.current=r,Ts!==null)throw Error(dn(261));return ca=null,Na=0,Us}function Fme(){for(;Ts!==null;)see(Ts)}function Bme(){for(;Ts!==null&&!upe();)see(Ts)}function see(t){var e=cee(t.alternate,t,Kc);t.memoizedProps=t.pendingProps,e===null?aee(t):Ts=e,R5.current=null}function aee(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Rme(n,e),n!==null){n.flags&=32767,Ts=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Us=6,Ts=null;return}}else if(n=kme(n,e,Kc),n!==null){Ts=n;return}if(e=e.sibling,e!==null){Ts=e;return}Ts=e=t}while(e!==null);Us===0&&(Us=5)}function wv(t,e,n){var r=Fi,i=dd.transition;try{dd.transition=null,Fi=1,$me(t,e,n,r)}finally{dd.transition=i,Fi=r}return null}function $me(t,e,n,r){do Hx();while(Bg!==null);if(hi&6)throw Error(dn(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(dn(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(xpe(t,o),t===ca&&(Ts=ca=null,Na=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ET||(ET=!0,uee(tP,function(){return Hx(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=dd.transition,dd.transition=null;var s=Fi;Fi=1;var a=hi;hi|=4,R5.current=null,Lme(t,n),tee(n,t),sme(pz),rP=!!fz,pz=fz=null,t.current=n,Dme(n),dpe(),hi=a,Fi=s,dd.transition=o}else t.current=n;if(ET&&(ET=!1,Bg=t,_P=i),o=t.pendingLanes,o===0&&(Jg=null),ppe(n.stateNode),bc(t,us()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(vP)throw vP=!1,t=Lz,Lz=null,t;return _P&1&&t.tag!==0&&Hx(),o=t.pendingLanes,o&1?t===Dz?CS++:(CS=0,Dz=t):CS=0,by(),null}function Hx(){if(Bg!==null){var t=$J(_P),e=dd.transition,n=Fi;try{if(dd.transition=null,Fi=16>t?16:t,Bg===null)var r=!1;else{if(t=Bg,Bg=null,_P=0,hi&6)throw Error(dn(331));var i=hi;for(hi|=4,Hn=t.current;Hn!==null;){var o=Hn,s=o.child;if(Hn.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var d=a[l];for(Hn=d;Hn!==null;){var f=Hn;switch(f.tag){case 0:case 11:case 15:ES(8,f,o)}var p=f.child;if(p!==null)p.return=f,Hn=p;else for(;Hn!==null;){f=Hn;var g=f.sibling,v=f.return;if(JQ(f),f===d){Hn=null;break}if(g!==null){g.return=v,Hn=g;break}Hn=v}}}var x=o.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var S=b.sibling;b.sibling=null,b=S}while(b!==null)}}Hn=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,Hn=s;else e:for(;Hn!==null;){if(o=Hn,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ES(9,o,o.return)}var M=o.sibling;if(M!==null){M.return=o.return,Hn=M;break e}Hn=o.return}}var T=t.current;for(Hn=T;Hn!==null;){s=Hn;var C=s.child;if(s.subtreeFlags&2064&&C!==null)C.return=s,Hn=C;else e:for(s=T;Hn!==null;){if(a=Hn,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:fk(9,a)}}catch(O){qo(a,a.return,O)}if(a===s){Hn=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,Hn=k;break e}Hn=a.return}}if(hi=i,by(),Sf&&typeof Sf.onPostCommitFiberRoot=="function")try{Sf.onPostCommitFiberRoot(ok,t)}catch{}r=!0}return r}finally{Fi=n,dd.transition=e}}return!1}function zW(t,e,n){e=db(n,e),e=jQ(t,e,1),t=Zg(t,e,1),e=Vl(),t!==null&&(jM(t,1,e),bc(t,e))}function qo(t,e,n){if(t.tag===3)zW(t,t,n);else for(;e!==null;){if(e.tag===3){zW(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Jg===null||!Jg.has(r))){t=db(n,t),t=UQ(e,t,1),e=Zg(e,t,1),t=Vl(),e!==null&&(jM(e,1,t),bc(e,t));break}}e=e.return}}function jme(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Vl(),t.pingedLanes|=t.suspendedLanes&n,ca===t&&(Na&n)===n&&(Us===4||Us===3&&(Na&130023424)===Na&&500>us()-L5?e0(t,0):O5|=n),bc(t,e)}function lee(t,e){e===0&&(t.mode&1?(e=mT,mT<<=1,!(mT&130023424)&&(mT=4194304)):e=1);var n=Vl();t=am(t,e),t!==null&&(jM(t,e,n),bc(t,n))}function Ume(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lee(t,n)}function Vme(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(dn(314))}r!==null&&r.delete(e),lee(t,n)}var cee;cee=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||_c.current)yc=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return yc=!1,Ime(t,e,n);yc=!!(t.flags&131072)}else yc=!1,To&&e.flags&1048576&&hQ(e,uP,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xA(t,e),t=e.pendingProps;var i=ab(e,xl.current);Wx(e,n),i=C5(null,e,r,t,i,n);var o=A5();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xc(r)?(o=!0,lP(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,w5(e),i.updater=dk,e.stateNode=i,i._reactInternals=e,Sz(e,r,t,n),e=Tz(null,e,r,!0,o,n)):(e.tag=0,To&&o&&m5(e),zl(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xA(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Hme(r),t=ch(r,t),i){case 0:e=Ez(null,e,r,t,n);break e;case 1:e=CW(null,e,r,t,n);break e;case 11:e=EW(null,e,r,t,n);break e;case 14:e=TW(null,e,r,ch(r.type,t),n);break e}throw Error(dn(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ch(r,i),Ez(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ch(r,i),CW(t,e,r,i,n);case 3:e:{if(GQ(e),t===null)throw Error(dn(387));r=e.pendingProps,o=e.memoizedState,i=o.element,gQ(t,e),fP(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=db(Error(dn(423)),e),e=AW(t,e,r,n,i);break e}else if(r!==i){i=db(Error(dn(424)),e),e=AW(t,e,r,n,i);break e}else for(su=Kg(e.stateNode.containerInfo.firstChild),lu=e,To=!0,ph=null,n=xQ(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(lb(),r===i){e=lm(t,e,n);break e}zl(t,e,r,n)}e=e.child}return e;case 5:return bQ(e),t===null&&xz(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,mz(r,i)?s=null:o!==null&&mz(r,o)&&(e.flags|=32),HQ(t,e),zl(t,e,s,n),e.child;case 6:return t===null&&xz(e),null;case 13:return qQ(t,e,n);case 4:return S5(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=cb(e,null,r,n):zl(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ch(r,i),EW(t,e,r,i,n);case 7:return zl(t,e,e.pendingProps,n),e.child;case 8:return zl(t,e,e.pendingProps.children,n),e.child;case 12:return zl(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,lo(dP,r._currentValue),r._currentValue=s,o!==null)if(Ch(o.value,s)){if(o.children===i.children&&!_c.current){e=lm(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Zp(-1,n&-n),l.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?l.next=l:(l.next=f.next,f.next=l),d.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),bz(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(dn(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),bz(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}zl(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Wx(e,n),i=yd(i),r=r(i),e.flags|=1,zl(t,e,r,n),e.child;case 14:return r=e.type,i=ch(r,e.pendingProps),i=ch(r.type,i),TW(t,e,r,i,n);case 15:return VQ(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ch(r,i),xA(t,e),e.tag=1,xc(r)?(t=!0,lP(e)):t=!1,Wx(e,n),vQ(e,r,i),Sz(e,r,i,n),Tz(null,e,r,!0,t,n);case 19:return YQ(t,e,n);case 22:return WQ(t,e,n)}throw Error(dn(156,e.tag))};function uee(t,e){return NJ(t,e)}function Wme(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cd(t,e,n,r){return new Wme(t,e,n,r)}function F5(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hme(t){if(typeof t=="function")return F5(t)?1:0;if(t!=null){if(t=t.$$typeof,t===r5)return 11;if(t===i5)return 14}return 2}function ey(t,e){var n=t.alternate;return n===null?(n=cd(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function SA(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")F5(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case dx:return t0(n.children,i,o,e);case n5:s=8,i|=8;break;case qN:return t=cd(12,n,e,i|2),t.elementType=qN,t.lanes=o,t;case YN:return t=cd(13,n,e,i),t.elementType=YN,t.lanes=o,t;case XN:return t=cd(19,n,e,i),t.elementType=XN,t.lanes=o,t;case _J:return mk(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yJ:s=10;break e;case vJ:s=9;break e;case r5:s=11;break e;case i5:s=14;break e;case Ig:s=16,r=null;break e}throw Error(dn(130,t==null?t:typeof t,""))}return e=cd(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function t0(t,e,n,r){return t=cd(7,t,r,e),t.lanes=n,t}function mk(t,e,n,r){return t=cd(22,t,r,e),t.elementType=_J,t.lanes=n,t.stateNode={isHidden:!1},t}function lD(t,e,n){return t=cd(6,t,null,e),t.lanes=n,t}function cD(t,e,n){return e=cd(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Gme(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=VL(0),this.expirationTimes=VL(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=VL(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function B5(t,e,n,r,i,o,s,a,l){return t=new Gme(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=cd(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},w5(o),t}function qme(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ux,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function dee(t){if(!t)return uy;t=t._reactInternals;e:{if(L0(t)!==t||t.tag!==1)throw Error(dn(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xc(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(dn(171))}if(t.tag===1){var n=t.type;if(xc(n))return uQ(t,n,e)}return e}function hee(t,e,n,r,i,o,s,a,l){return t=B5(n,r,!0,t,i,o,s,a,l),t.context=dee(null),n=t.current,r=Vl(),i=Qg(n),o=Zp(r,i),o.callback=e??null,Zg(n,o,i),t.current.lanes=i,jM(t,i,r),bc(t,r),t}function gk(t,e,n,r){var i=e.current,o=Vl(),s=Qg(i);return n=dee(n),e.context===null?e.context=n:e.pendingContext=n,e=Zp(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Zg(i,e,s),t!==null&&(Eh(t,i,s,o),yA(t,i,s)),s}function bP(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function FW(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $5(t,e){FW(t,e),(t=t.alternate)&&FW(t,e)}function Yme(){return null}var fee=typeof reportError=="function"?reportError:function(t){console.error(t)};function j5(t){this._internalRoot=t}yk.prototype.render=j5.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(dn(409));gk(t,e,null,null)};yk.prototype.unmount=j5.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;v0(function(){gk(null,t,null,null)}),e[sm]=null}};function yk(t){this._internalRoot=t}yk.prototype.unstable_scheduleHydration=function(t){if(t){var e=VJ();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Og.length&&e!==0&&e<Og[n].priority;n++);Og.splice(n,0,t),n===0&&HJ(t)}};function U5(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function BW(){}function Xme(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var d=bP(s);o.call(d)}}var s=hee(e,r,t,0,null,!1,!1,"",BW);return t._reactRootContainer=s,t[sm]=s.current,r2(t.nodeType===8?t.parentNode:t),v0(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var d=bP(l);a.call(d)}}var l=B5(t,0,!1,null,null,!1,!1,"",BW);return t._reactRootContainer=l,t[sm]=l.current,r2(t.nodeType===8?t.parentNode:t),v0(function(){gk(e,l,n,r)}),l}function _k(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=bP(s);a.call(l)}}gk(e,s,t,i)}else s=Xme(n,e,t,i,r);return bP(s)}jJ=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=lS(e.pendingLanes);n!==0&&(a5(e,n|1),bc(e,us()),!(hi&6)&&(hb=us()+500,by()))}break;case 13:v0(function(){var r=am(t,1);if(r!==null){var i=Vl();Eh(r,t,1,i)}}),$5(t,1)}};l5=function(t){if(t.tag===13){var e=am(t,134217728);if(e!==null){var n=Vl();Eh(e,t,134217728,n)}$5(t,134217728)}};UJ=function(t){if(t.tag===13){var e=Qg(t),n=am(t,e);if(n!==null){var r=Vl();Eh(n,t,e,r)}$5(t,e)}};VJ=function(){return Fi};WJ=function(t,e){var n=Fi;try{return Fi=t,e()}finally{Fi=n}};oz=function(t,e,n){switch(e){case"input":if(JN(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ck(r);if(!i)throw Error(dn(90));bJ(r),JN(r,i)}}}break;case"textarea":SJ(t,n);break;case"select":e=n.value,e!=null&&$x(t,!!n.multiple,e,!1)}};IJ=D5;kJ=v0;var Kme={usingClientEntryPoint:!1,Events:[VM,mx,ck,AJ,PJ,D5]},yw={findFiberByHostInstance:zv,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Zme={bundleType:yw.bundleType,version:yw.version,rendererPackageName:yw.rendererPackageName,rendererConfig:yw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bm.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=LJ(t),t===null?null:t.stateNode},findFiberByHostInstance:yw.findFiberByHostInstance||Yme,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var TT=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!TT.isDisabled&&TT.supportsFiber)try{ok=TT.inject(Zme),Sf=TT}catch{}}xu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kme;xu.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!U5(e))throw Error(dn(200));return qme(t,e,null,n)};xu.createRoot=function(t,e){if(!U5(t))throw Error(dn(299));var n=!1,r="",i=fee;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=B5(t,1,!1,null,null,n,!1,r,i),t[sm]=e.current,r2(t.nodeType===8?t.parentNode:t),new j5(e)};xu.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(dn(188)):(t=Object.keys(t).join(","),Error(dn(268,t)));return t=LJ(e),t=t===null?null:t.stateNode,t};xu.flushSync=function(t){return v0(t)};xu.hydrate=function(t,e,n){if(!vk(e))throw Error(dn(200));return _k(null,t,e,!0,n)};xu.hydrateRoot=function(t,e,n){if(!U5(t))throw Error(dn(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=fee;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=hee(e,null,t,1,n??null,i,!1,o,s),t[sm]=e.current,r2(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new yk(e)};xu.render=function(t,e,n){if(!vk(e))throw Error(dn(200));return _k(null,t,e,!1,n)};xu.unmountComponentAtNode=function(t){if(!vk(t))throw Error(dn(40));return t._reactRootContainer?(v0(function(){_k(null,null,t,!1,function(){t._reactRootContainer=null,t[sm]=null})}),!0):!1};xu.unstable_batchedUpdates=D5;xu.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!vk(n))throw Error(dn(200));if(t==null||t._reactInternals===void 0)throw Error(dn(38));return _k(t,e,n,!1,r)};xu.version="18.2.0-next-9e3b772b8-20220608";function pee(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pee)}catch(t){console.error(t)}}pee(),hJ.exports=xu;var i1=hJ.exports;const CT=xi(i1);var mee,$W=i1;mee=$W.createRoot,$W.hydrateRoot;/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function h2(){return h2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h2.apply(this,arguments)}var $g;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})($g||($g={}));const jW="popstate";function Jme(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:s,hash:a}=r.location;return Fz("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:yee(i)}return ege(e,n,null,t)}function Hs(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function gee(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Qme(){return Math.random().toString(36).substr(2,8)}function UW(t,e){return{usr:t.state,key:t.key,idx:e}}function Fz(t,e,n,r){return n===void 0&&(n=null),h2({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?o1(e):e,{state:n,key:e&&e.key||r||Qme()})}function yee(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function o1(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function ege(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=$g.Pop,l=null,d=f();d==null&&(d=0,s.replaceState(h2({},s.state,{idx:d}),""));function f(){return(s.state||{idx:null}).idx}function p(){a=$g.Pop;let S=f(),M=S==null?null:S-d;d=S,l&&l({action:a,location:b.location,delta:M})}function g(S,M){a=$g.Push;let T=Fz(b.location,S,M);n&&n(T,S),d=f()+1;let C=UW(T,d),k=b.createHref(T);try{s.pushState(C,"",k)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(k)}o&&l&&l({action:a,location:b.location,delta:1})}function v(S,M){a=$g.Replace;let T=Fz(b.location,S,M);n&&n(T,S),d=f();let C=UW(T,d),k=b.createHref(T);s.replaceState(C,"",k),o&&l&&l({action:a,location:b.location,delta:0})}function x(S){let M=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof S=="string"?S:yee(S);return T=T.replace(/ $/,"%20"),Hs(M,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,M)}let b={get action(){return a},get location(){return t(i,s)},listen(S){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(jW,p),l=S,()=>{i.removeEventListener(jW,p),l=null}},createHref(S){return e(i,S)},createURL:x,encodeLocation(S){let M=x(S);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:g,replace:v,go(S){return s.go(S)}};return b}var VW;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(VW||(VW={}));function tge(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?o1(e):e,i=xee(r.pathname||"/",n);if(i==null)return null;let o=vee(t);nge(o);let s=null;for(let a=0;s==null&&a<o.length;++a){let l=pge(i);s=dge(o[a],l)}return s}function vee(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(Hs(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let d=n0([r,l.relativePath]),f=n.concat(l);o.children&&o.children.length>0&&(Hs(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),vee(o.children,e,f,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:cge(d,o.index),routesMeta:f})};return t.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of _ee(o.path))i(o,s,l)}),e}function _ee(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=_ee(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function nge(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:uge(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const rge=/^:[\w-]+$/,ige=3,oge=2,sge=1,age=10,lge=-2,WW=t=>t==="*";function cge(t,e){let n=t.split("/"),r=n.length;return n.some(WW)&&(r+=lge),e&&(r+=oge),n.filter(i=>!WW(i)).reduce((i,o)=>i+(rge.test(o)?ige:o===""?sge:age),r)}function uge(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function dge(t,e){let{routesMeta:n}=t,r={},i="/",o=[];for(let s=0;s<n.length;++s){let a=n[s],l=s===n.length-1,d=i==="/"?e:e.slice(i.length)||"/",f=hge({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},d);if(!f)return null;Object.assign(r,f.params);let p=a.route;o.push({params:r,pathname:n0([i,f.pathname]),pathnameBase:xge(n0([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=n0([i,f.pathnameBase]))}return o}function hge(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=fge(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:g,isOptional:v}=f;if(g==="*"){let b=a[p]||"";s=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const x=a[p];return v&&!x?d[g]=void 0:d[g]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:s,pattern:t}}function fge(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),gee(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function pge(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gee(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function xee(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function mge(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?o1(t):t;return{pathname:n?n.startsWith("/")?n:gge(n,e):e,search:bge(r),hash:wge(i)}}function gge(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function uD(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yge(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function vge(t,e){let n=yge(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function _ge(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=o1(t):(i=h2({},t),Hs(!i.pathname||!i.pathname.includes("?"),uD("?","pathname","search",i)),Hs(!i.pathname||!i.pathname.includes("#"),uD("#","pathname","hash",i)),Hs(!i.search||!i.search.includes("#"),uD("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let p=e.length-1;if(!r&&s.startsWith("..")){let g=s.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}a=p>=0?e[p]:"/"}let l=mge(i,a),d=s&&s!=="/"&&s.endsWith("/"),f=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(d||f)&&(l.pathname+="/"),l}const n0=t=>t.join("/").replace(/\/\/+/g,"/"),xge=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bge=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,wge=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Sge(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const bee=["post","put","patch","delete"];new Set(bee);const Mge=["get",...bee];new Set(Mge);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function f2(){return f2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f2.apply(this,arguments)}const V5=W.createContext(null),Ege=W.createContext(null),xk=W.createContext(null),bk=W.createContext(null),wy=W.createContext({outlet:null,matches:[],isDataRoute:!1}),wee=W.createContext(null);function wk(){return W.useContext(bk)!=null}function Sk(){return wk()||Hs(!1),W.useContext(bk).location}function See(t){W.useContext(xk).static||W.useLayoutEffect(t)}function Sy(){let{isDataRoute:t}=W.useContext(wy);return t?jge():Tge()}function Tge(){wk()||Hs(!1);let t=W.useContext(V5),{basename:e,future:n,navigator:r}=W.useContext(xk),{matches:i}=W.useContext(wy),{pathname:o}=Sk(),s=JSON.stringify(vge(i,n.v7_relativeSplatPath)),a=W.useRef(!1);return See(()=>{a.current=!0}),W.useCallback(function(d,f){if(f===void 0&&(f={}),!a.current)return;if(typeof d=="number"){r.go(d);return}let p=_ge(d,JSON.parse(s),o,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:n0([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,s,o,t])}const Cge=W.createContext(null);function Age(t){let e=W.useContext(wy).outlet;return e&&W.createElement(Cge.Provider,{value:t},e)}function Pge(){let{matches:t}=W.useContext(wy),e=t[t.length-1];return e?e.params:{}}function Ige(t,e){return kge(t,e)}function kge(t,e,n,r){wk()||Hs(!1);let{navigator:i}=W.useContext(xk),{matches:o}=W.useContext(wy),s=o[o.length-1],a=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let d=Sk(),f;if(e){var p;let S=typeof e=="string"?o1(e):e;l==="/"||(p=S.pathname)!=null&&p.startsWith(l)||Hs(!1),f=S}else f=d;let g=f.pathname||"/",v=g;if(l!=="/"){let S=l.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(S.length).join("/")}let x=tge(t,{pathname:v}),b=Nge(x&&x.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:n0([l,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?l:n0([l,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),o,n,r);return e&&b?W.createElement(bk.Provider,{value:{location:f2({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:$g.Pop}},b):b}function Rge(){let t=$ge(),e=Sge(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),n?W.createElement("pre",{style:i},n):null,null)}const Oge=W.createElement(Rge,null);class Lge extends W.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?W.createElement(wy.Provider,{value:this.props.routeContext},W.createElement(wee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Dge(t){let{routeContext:e,match:n,children:r}=t,i=W.useContext(V5);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),W.createElement(wy.Provider,{value:e},r)}function Nge(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if((o=n)!=null&&o.errors)t=n.matches;else return null}let s=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let f=s.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id]));f>=0||Hs(!1),s=s.slice(0,Math.min(s.length,f+1))}let l=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<s.length;f++){let p=s[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:v}=n,x=p.route.loader&&g[p.route.id]===void 0&&(!v||v[p.route.id]===void 0);if(p.route.lazy||x){l=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((f,p,g)=>{let v,x=!1,b=null,S=null;n&&(v=a&&p.route.id?a[p.route.id]:void 0,b=p.route.errorElement||Oge,l&&(d<0&&g===0?(Uge("route-fallback",!1),x=!0,S=null):d===g&&(x=!0,S=p.route.hydrateFallbackElement||null)));let M=e.concat(s.slice(0,g+1)),T=()=>{let C;return v?C=b:x?C=S:p.route.Component?C=W.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=f,W.createElement(Dge,{match:p,routeContext:{outlet:f,matches:M,isDataRoute:n!=null},children:C})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?W.createElement(Lge,{location:n.location,revalidation:n.revalidation,component:b,error:v,children:T(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):T()},null)}var Mee=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Mee||{}),wP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(wP||{});function zge(t){let e=W.useContext(V5);return e||Hs(!1),e}function Fge(t){let e=W.useContext(Ege);return e||Hs(!1),e}function Bge(t){let e=W.useContext(wy);return e||Hs(!1),e}function Eee(t){let e=Bge(),n=e.matches[e.matches.length-1];return n.route.id||Hs(!1),n.route.id}function $ge(){var t;let e=W.useContext(wee),n=Fge(wP.UseRouteError),r=Eee(wP.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function jge(){let{router:t}=zge(Mee.UseNavigateStable),e=Eee(wP.UseNavigateStable),n=W.useRef(!1);return See(()=>{n.current=!0}),W.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,f2({fromRouteId:e},o)))},[t,e])}const HW={};function Uge(t,e,n){!e&&!HW[t]&&(HW[t]=!0)}function Vge(t){return Age(t.context)}function Ju(t){Hs(!1)}function Wge(t){let{basename:e="/",children:n=null,location:r,navigationType:i=$g.Pop,navigator:o,static:s=!1,future:a}=t;wk()&&Hs(!1);let l=e.replace(/^\/*/,"/"),d=W.useMemo(()=>({basename:l,navigator:o,static:s,future:f2({v7_relativeSplatPath:!1},a)}),[l,a,o,s]);typeof r=="string"&&(r=o1(r));let{pathname:f="/",search:p="",hash:g="",state:v=null,key:x="default"}=r,b=W.useMemo(()=>{let S=xee(f,l);return S==null?null:{location:{pathname:S,search:p,hash:g,state:v,key:x},navigationType:i}},[l,f,p,g,v,x,i]);return b==null?null:W.createElement(xk.Provider,{value:d},W.createElement(bk.Provider,{children:n,value:b}))}function Hge(t){let{children:e,location:n}=t;return Ige(Bz(e),n)}new Promise(()=>{});function Bz(t,e){e===void 0&&(e=[]);let n=[];return W.Children.forEach(t,(r,i)=>{if(!W.isValidElement(r))return;let o=[...e,i];if(r.type===W.Fragment){n.push.apply(n,Bz(r.props.children,o));return}r.type!==Ju&&Hs(!1),!r.props.index||!r.props.children||Hs(!1);let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=Bz(r.props.children,o)),n.push(s)}),n}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Gge="6";try{window.__reactRouterVersion=Gge}catch{}const qge="startTransition",GW=ob[qge];function Yge(t){let{basename:e,children:n,future:r,window:i}=t,o=W.useRef();o.current==null&&(o.current=Jme({window:i,v5Compat:!0}));let s=o.current,[a,l]=W.useState({action:s.action,location:s.location}),{v7_startTransition:d}=r||{},f=W.useCallback(p=>{d&&GW?GW(()=>l(p)):l(p)},[l,d]);return W.useLayoutEffect(()=>s.listen(f),[s,f]),W.createElement(Wge,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:s,future:r})}var qW;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(qW||(qW={}));var YW;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(YW||(YW={}));var Tee={exports:{}},Cee={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HM=W;function Xge(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kge=typeof Object.is=="function"?Object.is:Xge,Zge=HM.useSyncExternalStore,Jge=HM.useRef,Qge=HM.useEffect,eye=HM.useMemo,tye=HM.useDebugValue;Cee.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var o=Jge(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=eye(function(){function l(v){if(!d){if(d=!0,f=v,v=r(v),i!==void 0&&s.hasValue){var x=s.value;if(i(x,v))return p=x}return p=v}if(x=p,Kge(f,v))return x;var b=r(v);return i!==void 0&&i(x,b)?x:(f=v,p=b)}var d=!1,f,p,g=n===void 0?null:n;return[function(){return l(e())},g===null?void 0:function(){return l(g())}]},[e,n,r,i]);var a=Zge(t,o[0],o[1]);return Qge(function(){s.hasValue=!0,s.value=a},[a]),tye(a),a};Tee.exports=Cee;var nye=Tee.exports,ti="default"in ob?Ze:ob,XW=Symbol.for("react-redux-context"),KW=typeof globalThis<"u"?globalThis:{};function rye(){if(!ti.createContext)return{};const t=KW[XW]??(KW[XW]=new Map);let e=t.get(ti.createContext);return e||(e=ti.createContext(null),t.set(ti.createContext,e)),e}var cm=rye(),Aee=()=>{throw new Error("uSES not initialized!")};function W5(t=cm){return function(){return ti.useContext(t)}}var Pee=W5(),Iee=Aee,iye=t=>{Iee=t},oye=(t,e)=>t===e;function sye(t=cm){const e=t===cm?Pee:W5(t),n=(r,i={})=>{const{equalityFn:o=oye,devModeChecks:s={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:l,getServerState:d,stabilityCheck:f,identityFunctionCheck:p}=e();ti.useRef(!0);const g=ti.useCallback({[r.name](x){return r(x)}}[r.name],[r,f,s.stabilityCheck]),v=Iee(l.addNestedSub,a.getState,d||a.getState,g,o);return ti.useDebugValue(v),v};return Object.assign(n,{withTypes:()=>n}),n}var pr=sye(),aye=Symbol.for("react.element"),lye=Symbol.for("react.portal"),cye=Symbol.for("react.fragment"),uye=Symbol.for("react.strict_mode"),dye=Symbol.for("react.profiler"),hye=Symbol.for("react.provider"),fye=Symbol.for("react.context"),pye=Symbol.for("react.server_context"),kee=Symbol.for("react.forward_ref"),mye=Symbol.for("react.suspense"),gye=Symbol.for("react.suspense_list"),H5=Symbol.for("react.memo"),yye=Symbol.for("react.lazy"),vye=kee,_ye=H5;function xye(t){if(typeof t=="object"&&t!==null){const e=t.$$typeof;switch(e){case aye:{const n=t.type;switch(n){case cye:case dye:case uye:case mye:case gye:return n;default:{const r=n&&n.$$typeof;switch(r){case pye:case fye:case kee:case yye:case H5:case hye:return r;default:return e}}}}case lye:return e}}}function bye(t){return xye(t)===H5}function wye(t,e,n,r,{areStatesEqual:i,areOwnPropsEqual:o,areStatePropsEqual:s}){let a=!1,l,d,f,p,g;function v(T,C){return l=T,d=C,f=t(l,d),p=e(r,d),g=n(f,p,d),a=!0,g}function x(){return f=t(l,d),e.dependsOnOwnProps&&(p=e(r,d)),g=n(f,p,d),g}function b(){return t.dependsOnOwnProps&&(f=t(l,d)),e.dependsOnOwnProps&&(p=e(r,d)),g=n(f,p,d),g}function S(){const T=t(l,d),C=!s(T,f);return f=T,C&&(g=n(f,p,d)),g}function M(T,C){const k=!o(C,d),O=!i(T,l,C,d);return l=T,d=C,k&&O?x():k?b():O?S():g}return function(C,k){return a?M(C,k):v(C,k)}}function Sye(t,{initMapStateToProps:e,initMapDispatchToProps:n,initMergeProps:r,...i}){const o=e(t,i),s=n(t,i),a=r(t,i);return wye(o,s,a,t,i)}function Mye(t,e){const n={};for(const r in t){const i=t[r];typeof i=="function"&&(n[r]=(...o)=>e(i(...o)))}return n}function $z(t){return function(n){const r=t(n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function ZW(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function Ree(t,e){return function(r,{displayName:i}){const o=function(a,l){return o.dependsOnOwnProps?o.mapToProps(a,l):o.mapToProps(a,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(a,l){o.mapToProps=t,o.dependsOnOwnProps=ZW(t);let d=o(a,l);return typeof d=="function"&&(o.mapToProps=d,o.dependsOnOwnProps=ZW(d),d=o(a,l)),d},o}}function G5(t,e){return(n,r)=>{throw new Error(`Invalid value of type ${typeof t} for ${e} argument when connecting component ${r.wrappedComponentName}.`)}}function Eye(t){return t&&typeof t=="object"?$z(e=>Mye(t,e)):t?typeof t=="function"?Ree(t):G5(t,"mapDispatchToProps"):$z(e=>({dispatch:e}))}function Tye(t){return t?typeof t=="function"?Ree(t):G5(t,"mapStateToProps"):$z(()=>({}))}function Cye(t,e,n){return{...n,...t,...e}}function Aye(t){return function(n,{displayName:r,areMergedPropsEqual:i}){let o=!1,s;return function(l,d,f){const p=t(l,d,f);return o?i(p,s)||(s=p):(o=!0,s=p),s}}}function Pye(t){return t?typeof t=="function"?Aye(t):G5(t,"mergeProps"):()=>Cye}function Oee(t){t()}function Iye(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Oee(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var JW={notify(){},get:()=>[]};function Lee(t,e){let n,r=JW,i=0,o=!1;function s(b){f();const S=r.subscribe(b);let M=!1;return()=>{M||(M=!0,S(),p())}}function a(){r.notify()}function l(){x.onStateChange&&x.onStateChange()}function d(){return o}function f(){i++,n||(n=e?e.addNestedSub(l):t.subscribe(l),r=Iye())}function p(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=JW)}function g(){o||(o=!0,f())}function v(){o&&(o=!1,p())}const x={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:d,trySubscribe:g,tryUnsubscribe:v,getListeners:()=>r};return x}var kye=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SP=kye?ti.useLayoutEffect:ti.useEffect;function QW(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function dD(t,e){if(QW(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!QW(t[n[i]],e[n[i]]))return!1;return!0}var Rye={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Oye={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Lye={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Dee={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Dye={[vye]:Lye,[_ye]:Dee};function eH(t){return bye(t)?Dee:Dye[t.$$typeof]||Rye}var Nye=Object.defineProperty,zye=Object.getOwnPropertyNames,tH=Object.getOwnPropertySymbols,Fye=Object.getOwnPropertyDescriptor,Bye=Object.getPrototypeOf,nH=Object.prototype;function jz(t,e){if(typeof e!="string"){if(nH){const o=Bye(e);o&&o!==nH&&jz(t,o)}let n=zye(e);tH&&(n=n.concat(tH(e)));const r=eH(t),i=eH(e);for(let o=0;o<n.length;++o){const s=n[o];if(!Oye[s]&&!(i&&i[s])&&!(r&&r[s])){const a=Fye(e,s);try{Nye(t,s,a)}catch{}}}}return t}var Nee=Aee,$ye=t=>{Nee=t},jye=[null,null];function Uye(t,e,n){SP(()=>t(...e),n)}function Vye(t,e,n,r,i,o){t.current=r,n.current=!1,i.current&&(i.current=null,o())}function Wye(t,e,n,r,i,o,s,a,l,d,f){if(!t)return()=>{};let p=!1,g=null;const v=()=>{if(p||!a.current)return;const b=e.getState();let S,M;try{S=r(b,i.current)}catch(T){M=T,g=T}M||(g=null),S===o.current?s.current||d():(o.current=S,l.current=S,s.current=!0,f())};return n.onStateChange=v,n.trySubscribe(),v(),()=>{if(p=!0,n.tryUnsubscribe(),n.onStateChange=null,g)throw g}}function Hye(t,e){return t===e}function Gye(t,e,n,{pure:r,areStatesEqual:i=Hye,areOwnPropsEqual:o=dD,areStatePropsEqual:s=dD,areMergedPropsEqual:a=dD,forwardRef:l=!1,context:d=cm}={}){const f=d,p=Tye(t),g=Eye(e),v=Pye(n),x=!!t;return S=>{const M=S.displayName||S.name||"Component",T=`Connect(${M})`,C={shouldHandleStateChanges:x,displayName:T,wrappedComponentName:M,WrappedComponent:S,initMapStateToProps:p,initMapDispatchToProps:g,initMergeProps:v,areStatesEqual:i,areStatePropsEqual:s,areOwnPropsEqual:o,areMergedPropsEqual:a};function k(B){const[U,J,V]=ti.useMemo(()=>{const{reactReduxForwardedRef:ge,...tt}=B;return[B.context,ge,tt]},[B]),X=ti.useMemo(()=>{let ge=f;return U!=null&&U.Consumer,ge},[U,f]),oe=ti.useContext(X),pe=!!B.store&&!!B.store.getState&&!!B.store.dispatch,re=!!oe&&!!oe.store,he=pe?B.store:oe.store,ue=re?oe.getServerState:he.getState,be=ti.useMemo(()=>Sye(he.dispatch,C),[he]),[ie,ve]=ti.useMemo(()=>{if(!x)return jye;const ge=Lee(he,pe?void 0:oe.subscription),tt=ge.notifyNestedSubs.bind(ge);return[ge,tt]},[he,pe,oe]),Ee=ti.useMemo(()=>pe?oe:{...oe,subscription:ie},[pe,oe,ie]),Ne=ti.useRef(),Ge=ti.useRef(V),dt=ti.useRef(),Ue=ti.useRef(!1);ti.useRef(!1);const st=ti.useRef(!1),lt=ti.useRef();SP(()=>(st.current=!0,()=>{st.current=!1}),[]);const Rt=ti.useMemo(()=>()=>dt.current&&V===Ge.current?dt.current:be(he.getState(),V),[he,V]),Lt=ti.useMemo(()=>tt=>ie?Wye(x,he,ie,be,Ge,Ne,Ue,st,dt,ve,tt):()=>{},[ie]);Uye(Vye,[Ge,Ne,Ue,V,dt,ve]);let Fe;try{Fe=Nee(Lt,Rt,ue?()=>be(ue(),V):Rt)}catch(ge){throw lt.current&&(ge.message+=`
The error may be correlated with this previous error:
${lt.current.stack}

`),ge}SP(()=>{lt.current=void 0,dt.current=void 0,Ne.current=Fe});const at=ti.useMemo(()=>ti.createElement(S,{...Fe,ref:J}),[J,S,Fe]);return ti.useMemo(()=>x?ti.createElement(X.Provider,{value:Ee},at):at,[X,at,Ee])}const D=ti.memo(k);if(D.WrappedComponent=S,D.displayName=k.displayName=T,l){const U=ti.forwardRef(function(V,X){return ti.createElement(D,{...V,reactReduxForwardedRef:X})});return U.displayName=T,U.WrappedComponent=S,jz(U,S)}return jz(D,S)}}var qye=Gye;function Yye({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:o="once"}){const s=ti.useMemo(()=>{const d=Lee(t);return{store:t,subscription:d,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:o}},[t,r,i,o]),a=ti.useMemo(()=>t.getState(),[t]);SP(()=>{const{subscription:d}=s;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),a!==t.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[s,a]);const l=e||cm;return ti.createElement(l.Provider,{value:s},n)}var Xye=Yye;function zee(t=cm){const e=t===cm?Pee:W5(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var Kye=zee();function Zye(t=cm){const e=t===cm?Kye:zee(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Yl=Zye(),Jye=Oee;iye(nye.useSyncExternalStoreWithSelector);$ye(W.useSyncExternalStore);function Pa(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Qye=typeof Symbol=="function"&&Symbol.observable||"@@observable",rH=Qye,hD=()=>Math.random().toString(36).substring(7).split("").join("."),eve={INIT:`@@redux/INIT${hD()}`,REPLACE:`@@redux/REPLACE${hD()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${hD()}`},MP=eve;function q5(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Fee(t,e,n){if(typeof t!="function")throw new Error(Pa(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Pa(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Pa(1));return n(Fee)(t,e)}let r=t,i=e,o=new Map,s=o,a=0,l=!1;function d(){s===o&&(s=new Map,o.forEach((S,M)=>{s.set(M,S)}))}function f(){if(l)throw new Error(Pa(3));return i}function p(S){if(typeof S!="function")throw new Error(Pa(4));if(l)throw new Error(Pa(5));let M=!0;d();const T=a++;return s.set(T,S),function(){if(M){if(l)throw new Error(Pa(6));M=!1,d(),s.delete(T),o=null}}}function g(S){if(!q5(S))throw new Error(Pa(7));if(typeof S.type>"u")throw new Error(Pa(8));if(typeof S.type!="string")throw new Error(Pa(17));if(l)throw new Error(Pa(9));try{l=!0,i=r(i,S)}finally{l=!1}return(o=s).forEach(T=>{T()}),S}function v(S){if(typeof S!="function")throw new Error(Pa(10));r=S,g({type:MP.REPLACE})}function x(){const S=p;return{subscribe(M){if(typeof M!="object"||M===null)throw new Error(Pa(11));function T(){const k=M;k.next&&k.next(f())}return T(),{unsubscribe:S(T)}},[rH](){return this}}}return g({type:MP.INIT}),{dispatch:g,subscribe:p,getState:f,replaceReducer:v,[rH]:x}}function tve(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:MP.INIT})>"u")throw new Error(Pa(12));if(typeof n(void 0,{type:MP.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Pa(13))})}function Bee(t){const e=Object.keys(t),n={};for(let o=0;o<e.length;o++){const s=e[o];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{tve(n)}catch(o){i=o}return function(s={},a){if(i)throw i;let l=!1;const d={};for(let f=0;f<r.length;f++){const p=r[f],g=n[p],v=s[p],x=g(v,a);if(typeof x>"u")throw a&&a.type,new Error(Pa(14));d[p]=x,l=l||x!==v}return l=l||r.length!==Object.keys(s).length,l?d:s}}function EP(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function nve(...t){return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(Pa(15))};const s={getState:i.getState,dispatch:(l,...d)=>o(l,...d)},a=t.map(l=>l(s));return o=EP(...a)(i.dispatch),{...i,dispatch:o}}}function rve(t){return q5(t)&&"type"in t&&typeof t.type=="string"}var $ee=Symbol.for("immer-nothing"),iH=Symbol.for("immer-draftable"),fu=Symbol.for("immer-state");function _h(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var fb=Object.getPrototypeOf;function dy(t){return!!t&&!!t[fu]}function um(t){var e;return t?jee(t)||Array.isArray(t)||!!t[iH]||!!((e=t.constructor)!=null&&e[iH])||Ek(t)||Tk(t):!1}var ive=Object.prototype.constructor.toString();function jee(t){if(!t||typeof t!="object")return!1;const e=fb(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===ive}function TP(t,e){Mk(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function Mk(t){const e=t[fu];return e?e.type_:Array.isArray(t)?1:Ek(t)?2:Tk(t)?3:0}function Uz(t,e){return Mk(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Uee(t,e,n){const r=Mk(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function ove(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Ek(t){return t instanceof Map}function Tk(t){return t instanceof Set}function Sv(t){return t.copy_||t.base_}function Vz(t,e){if(Ek(t))return new Map(t);if(Tk(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);if(!e&&jee(t))return fb(t)?{...t}:Object.assign(Object.create(null),t);const n=Object.getOwnPropertyDescriptors(t);delete n[fu];let r=Reflect.ownKeys(n);for(let i=0;i<r.length;i++){const o=r[i],s=n[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[o]})}return Object.create(fb(t),n)}function Y5(t,e=!1){return Ck(t)||dy(t)||!um(t)||(Mk(t)>1&&(t.set=t.add=t.clear=t.delete=sve),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>Y5(r,!0))),t}function sve(){_h(2)}function Ck(t){return Object.isFrozen(t)}var ave={};function _0(t){const e=ave[t];return e||_h(0,t),e}var p2;function Vee(){return p2}function lve(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function oH(t,e){e&&(_0("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Wz(t){Hz(t),t.drafts_.forEach(cve),t.drafts_=null}function Hz(t){t===p2&&(p2=t.parent_)}function sH(t){return p2=lve(p2,t)}function cve(t){const e=t[fu];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function aH(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[fu].modified_&&(Wz(e),_h(4)),um(t)&&(t=CP(e,t),e.parent_||AP(e,t)),e.patches_&&_0("Patches").generateReplacementPatches_(n[fu].base_,t,e.patches_,e.inversePatches_)):t=CP(e,n,[]),Wz(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==$ee?t:void 0}function CP(t,e,n){if(Ck(e))return e;const r=e[fu];if(!r)return TP(e,(i,o)=>lH(t,r,e,i,o,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return AP(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),TP(o,(a,l)=>lH(t,r,i,a,l,n,s)),AP(t,i,!1),n&&t.patches_&&_0("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function lH(t,e,n,r,i,o,s){if(dy(i)){const a=o&&e&&e.type_!==3&&!Uz(e.assigned_,r)?o.concat(r):void 0,l=CP(t,i,a);if(Uee(n,r,l),dy(l))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(um(i)&&!Ck(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;CP(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&AP(t,i)}}function AP(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Y5(e,n)}function uve(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:Vee(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=X5;n&&(i=[r],o=m2);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var X5={get(t,e){if(e===fu)return t;const n=Sv(t);if(!Uz(n,e))return dve(t,n,e);const r=n[e];return t.finalized_||!um(r)?r:r===fD(t.base_,e)?(pD(t),t.copy_[e]=qz(r,t)):r},has(t,e){return e in Sv(t)},ownKeys(t){return Reflect.ownKeys(Sv(t))},set(t,e,n){const r=Wee(Sv(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=fD(Sv(t),e),o=i==null?void 0:i[fu];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(ove(n,i)&&(n!==void 0||Uz(t.base_,e)))return!0;pD(t),Gz(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return fD(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,pD(t),Gz(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Sv(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){_h(11)},getPrototypeOf(t){return fb(t.base_)},setPrototypeOf(){_h(12)}},m2={};TP(X5,(t,e)=>{m2[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});m2.deleteProperty=function(t,e){return m2.set.call(this,t,e,void 0)};m2.set=function(t,e,n){return X5.set.call(this,t[0],e,n,t[0])};function fD(t,e){const n=t[fu];return(n?Sv(n):t)[e]}function dve(t,e,n){var i;const r=Wee(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function Wee(t,e){if(!(e in t))return;let n=fb(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=fb(n)}}function Gz(t){t.modified_||(t.modified_=!0,t.parent_&&Gz(t.parent_))}function pD(t){t.copy_||(t.copy_=Vz(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var hve=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const s=this;return function(l=o,...d){return s.produce(l,f=>n.call(this,f,...d))}}typeof n!="function"&&_h(6),r!==void 0&&typeof r!="function"&&_h(7);let i;if(um(e)){const o=sH(this),s=qz(e,void 0);let a=!0;try{i=n(s),a=!1}finally{a?Wz(o):Hz(o)}return oH(o,r),aH(i,o)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===$ee&&(i=void 0),this.autoFreeze_&&Y5(i,!0),r){const o=[],s=[];_0("Patches").generateReplacementPatches_(e,i,o,s),r(o,s)}return i}else _h(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...a)=>this.produceWithPatches(s,l=>e(l,...a));let r,i;return[this.produce(e,n,(s,a)=>{r=s,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){um(t)||_h(8),dy(t)&&(t=Hee(t));const e=sH(this),n=qz(t,void 0);return n[fu].isManual_=!0,Hz(e),n}finishDraft(t,e){const n=t&&t[fu];(!n||!n.isManual_)&&_h(9);const{scope_:r}=n;return oH(r,e),aH(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=_0("Patches").applyPatches_;return dy(t)?r(t,e):this.produce(t,i=>r(i,e))}};function qz(t,e){const n=Ek(t)?_0("MapSet").proxyMap_(t,e):Tk(t)?_0("MapSet").proxySet_(t,e):uve(t,e);return(e?e.scope_:Vee()).drafts_.push(n),n}function Hee(t){return dy(t)||_h(10,t),Gee(t)}function Gee(t){if(!um(t)||Ck(t))return t;const e=t[fu];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Vz(t,e.scope_.immer_.useStrictShallowCopy_)}else n=Vz(t,!0);return TP(n,(r,i)=>{Uee(n,r,Gee(i))}),e&&(e.finalized_=!1),n}var pu=new hve,qee=pu.produce;pu.produceWithPatches.bind(pu);pu.setAutoFreeze.bind(pu);pu.setUseStrictShallowCopy.bind(pu);pu.applyPatches.bind(pu);pu.createDraft.bind(pu);pu.finishDraft.bind(pu);function fve(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function pve(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function mve(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var cH=t=>Array.isArray(t)?t:[t];function gve(t){const e=Array.isArray(t[0])?t[0]:t;return mve(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function yve(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var vve=class{constructor(t){this.value=t}deref(){return this.value}},_ve=typeof WeakRef<"u"?WeakRef:vve,xve=0,uH=1;function AT(){return{s:xve,v:void 0,o:null,p:null}}function K5(t,e={}){let n=AT();const{resultEqualityCheck:r}=e;let i,o=0;function s(){var p;let a=n;const{length:l}=arguments;for(let g=0,v=l;g<v;g++){const x=arguments[g];if(typeof x=="function"||typeof x=="object"&&x!==null){let b=a.o;b===null&&(a.o=b=new WeakMap);const S=b.get(x);S===void 0?(a=AT(),b.set(x,a)):a=S}else{let b=a.p;b===null&&(a.p=b=new Map);const S=b.get(x);S===void 0?(a=AT(),b.set(x,a)):a=S}}const d=a;let f;if(a.s===uH?f=a.v:(f=t.apply(null,arguments),o++),d.s=uH,r){const g=((p=i==null?void 0:i.deref)==null?void 0:p.call(i))??i;g!=null&&r(g,f)&&(f=g,o!==0&&o--),i=typeof f=="object"&&f!==null||typeof f=="function"?new _ve(f):f}return d.v=f,f}return s.clearCache=()=>{n=AT(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function Yee(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let o=0,s=0,a,l={},d=i.pop();typeof d=="object"&&(l=d,d=i.pop()),fve(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const f={...n,...l},{memoize:p,memoizeOptions:g=[],argsMemoize:v=K5,argsMemoizeOptions:x=[],devModeChecks:b={}}=f,S=cH(g),M=cH(x),T=gve(i),C=p(function(){return o++,d.apply(null,arguments)},...S),k=v(function(){s++;const D=yve(T,arguments);return a=C.apply(null,D),a},...M);return Object.assign(k,{resultFunc:d,memoizedResultFunc:C,dependencies:T,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>a,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:p,argsMemoize:v})};return Object.assign(r,{withTypes:()=>r}),r}var bve=Yee(K5),wve=Object.assign((t,e=bve)=>{pve(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(o=>t[o]);return e(r,(...o)=>o.reduce((s,a,l)=>(s[n[l]]=a,s),{}))},{withTypes:()=>wve});function Xee(t){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,t):i(o)}var Sve=Xee(),Mve=Xee,Eve=(...t)=>{const e=Yee(...t),n=Object.assign((...r)=>{const i=e(...r),o=(s,...a)=>i(dy(s)?Hee(s):s,...a);return Object.assign(o,i),o},{withTypes:()=>n});return n};Eve(K5);var Tve=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?EP:EP.apply(null,arguments)};function pb(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(wc(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>rve(r)&&r.type===t,n}var Kee=class uS extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,uS.prototype)}static get[Symbol.species](){return uS}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new uS(...e[0].concat(this)):new uS(...e.concat(this))}};function dH(t){return um(t)?qee(t,()=>{}):t}function hH(t,e,n){if(t.has(e)){let i=t.get(e);return n.update&&(i=n.update(i,e,t),t.set(e,i)),i}if(!n.insert)throw new Error(wc(10));const r=n.insert(e,t);return t.set(e,r),r}function Cve(t){return typeof t=="boolean"}var Ave=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=e??{};let s=new Kee;return n&&(Cve(n)?s.push(Sve):s.push(Mve(n.extraArgument))),s},Pve="RTK_autoBatch",Zee=t=>e=>{setTimeout(e,t)},Ive=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Zee(10),kve=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,o=!1,s=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?Ive:t.type==="callback"?t.queueNotification:Zee(t.timeout),d=()=>{s=!1,o&&(o=!1,a.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const p=()=>i&&f(),g=r.subscribe(p);return a.add(f),()=>{g(),a.delete(f)}},dispatch(f){var p;try{return i=!((p=f==null?void 0:f.meta)!=null&&p[Pve]),o=!i,o&&(s||(s=!0,l(d))),r.dispatch(f)}finally{i=!0}}})},Rve=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new Kee(t);return r&&i.push(kve(typeof r=="object"?r:void 0)),i},Ove=!0;function Lve(t){const e=Ave(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:s=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(q5(n))a=Bee(n);else throw new Error(wc(1));let l;typeof r=="function"?l=r(e):l=e();let d=EP;i&&(d=Tve({trace:!Ove,...typeof i=="object"&&i}));const f=nve(...l),p=Rve(f);let g=typeof s=="function"?s(p):p();const v=d(...g);return Fee(a,o,v)}function Jee(t){const e={},n=[];let r;const i={addCase(o,s){const a=typeof o=="string"?o:o.type;if(!a)throw new Error(wc(28));if(a in e)throw new Error(wc(29));return e[a]=s,i},addMatcher(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase(o){return r=o,i}};return t(i),[e,n,r]}function Dve(t){return typeof t=="function"}function Nve(t,e){let[n,r,i]=Jee(e),o;if(Dve(t))o=()=>dH(t());else{const a=dH(t);o=()=>a}function s(a=o(),l){let d=[n[l.type],...r.filter(({matcher:f})=>f(l)).map(({reducer:f})=>f)];return d.filter(f=>!!f).length===0&&(d=[i]),d.reduce((f,p)=>{if(p)if(dy(f)){const v=p(f,l);return v===void 0?f:v}else{if(um(f))return qee(f,g=>p(g,l));{const g=p(f,l);if(g===void 0){if(f===null)return f;throw new Error(wc(9))}return g}}return f},a)}return s.getInitialState=o,s}var zve="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Fve=(t=21)=>{let e="",n=t;for(;n--;)e+=zve[Math.random()*64|0];return e},Bve=Symbol.for("rtk-slice-createasyncthunk");function $ve(t,e){return`${t}/${e}`}function jve({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[Bve];return function(i){const{name:o,reducerPath:s=o}=i;if(!o)throw new Error(wc(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(Vve()):i.reducers)||{},l=Object.keys(a),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(C,k){const O=typeof C=="string"?C:C.type;if(!O)throw new Error(wc(12));if(O in d.sliceCaseReducersByType)throw new Error(wc(13));return d.sliceCaseReducersByType[O]=k,f},addMatcher(C,k){return d.sliceMatchers.push({matcher:C,reducer:k}),f},exposeAction(C,k){return d.actionCreators[C]=k,f},exposeCaseReducer(C,k){return d.sliceCaseReducersByName[C]=k,f}};l.forEach(C=>{const k=a[C],O={reducerName:C,type:$ve(o,C),createNotation:typeof i.reducers=="function"};Hve(k)?qve(O,k,f,e):Wve(O,k,f)});function p(){const[C={},k=[],O=void 0]=typeof i.extraReducers=="function"?Jee(i.extraReducers):[i.extraReducers],D={...C,...d.sliceCaseReducersByType};return Nve(i.initialState,B=>{for(let U in D)B.addCase(U,D[U]);for(let U of d.sliceMatchers)B.addMatcher(U.matcher,U.reducer);for(let U of k)B.addMatcher(U.matcher,U.reducer);O&&B.addDefaultCase(O)})}const g=C=>C,v=new Map;let x;function b(C,k){return x||(x=p()),x(C,k)}function S(){return x||(x=p()),x.getInitialState()}function M(C,k=!1){function O(B){let U=B[C];return typeof U>"u"&&k&&(U=S()),U}function D(B=g){const U=hH(v,k,{insert:()=>new WeakMap});return hH(U,B,{insert:()=>{const J={};for(const[V,X]of Object.entries(i.selectors??{}))J[V]=Uve(X,B,S,k);return J}})}return{reducerPath:C,getSelectors:D,get selectors(){return D(O)},selectSlice:O}}const T={name:o,reducer:b,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:S,...M(s),injectInto(C,{reducerPath:k,...O}={}){const D=k??s;return C.inject({reducerPath:D,reducer:b},O),{...T,...M(D,!0)}}};return T}}function Uve(t,e,n,r){function i(o,...s){let a=e(o);return typeof a>"u"&&r&&(a=n()),t(a,...s)}return i.unwrapped=t,i}var s1=jve();function Vve(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function Wve({type:t,reducerName:e,createNotation:n},r,i){let o,s;if("reducer"in r){if(n&&!Gve(r))throw new Error(wc(17));o=r.reducer,s=r.prepare}else o=r;i.addCase(t,o).exposeCaseReducer(e,o).exposeAction(e,s?pb(t,s):pb(t))}function Hve(t){return t._reducerDefinitionType==="asyncThunk"}function Gve(t){return t._reducerDefinitionType==="reducerWithPrepare"}function qve({type:t,reducerName:e},n,r,i){if(!i)throw new Error(wc(18));const{payloadCreator:o,fulfilled:s,pending:a,rejected:l,settled:d,options:f}=n,p=i(t,o,f);r.exposeAction(e,p),s&&r.addCase(p.fulfilled,s),a&&r.addCase(p.pending,a),l&&r.addCase(p.rejected,l),d&&r.addMatcher(p.settled,d),r.exposeCaseReducer(e,{fulfilled:s||PT,pending:a||PT,rejected:l||PT,settled:d||PT})}function PT(){}var Yve=(t,e)=>{if(typeof t!="function")throw new Error(wc(32))},Z5="listenerMiddleware",Xve=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:o}=t;if(e)i=pb(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(wc(21));return Yve(o),{predicate:i,type:e,effect:o}},Kve=Object.assign(t=>{const{type:e,predicate:n,effect:r}=Xve(t);return{id:Fve(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(wc(22))}}},{withTypes:()=>Kve}),Zve=Object.assign(pb(`${Z5}/add`),{withTypes:()=>Zve});pb(`${Z5}/removeAll`);var Jve=Object.assign(pb(`${Z5}/remove`),{withTypes:()=>Jve});function wc(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const{reducer:Qve,actions:Qee}=s1({name:"errors",initialState:{errors:[]},reducers:{push(t,e){t.errors.push(e.payload)},pop(t){t.errors.length&&t.errors.shift()}}}),{reducer:e0e,actions:eu}=s1({name:"devices",initialState:{items:{},selectedId:null,selectedIds:[]},reducers:{refresh(t,e){t.items={},e.payload.forEach(n=>t.items[n.id]=n)},update1(t,e){t.items[e.payload.id]=e.payload},update(t,e){e.payload.forEach(n=>t.items[n.id]=n)},select(t,e){t.selectedId=e.payload},selectId(t,e){t.selectedId=e.payload,t.selectedIds=[t.selectedId]},selectIds(t,e){t.selectedIds=e.payload,[t.selectedId]=t.selectedIds},remove(t,e){delete t.items[e.payload]},clear(t,e){t.items={}}}}),{reducer:t0e,actions:mD}=s1({name:"data",initialState:{server:null,user:null,socket:null,camera:{},positions:{},history:{}},reducers:{updateServer(t,e){t.server=e.payload},updateUser(t,e){t.user=e.payload},updateSocket(t,e){t.socket=e.payload},updatePositions(t,e){Object.keys(e.payload).length>0&&e.payload.forEach(n=>{t.positions[n.deviceId]=n,t.history={}})},updatePosition(t,e){t.positions[e.payload.deviceId]===void 0&&(t.positions[e.payload.deviceId]={attributes:{}}),e.payload.hasOwnProperty("latitude")&&(t.positions[e.payload.deviceId].id=e.payload.id,t.positions[e.payload.deviceId].deviceId=e.payload.deviceId,t.positions[e.payload.deviceId].latitude=e.payload.latitude,t.positions[e.payload.deviceId].longitude=e.payload.longitude,t.positions[e.payload.deviceId].altitude=e.payload.altitude,t.positions[e.payload.deviceId].deviceTime=e.payload.deviceTime),e.payload.hasOwnProperty("course")&&(t.positions[e.payload.deviceId].course=e.payload.course),e.payload.hasOwnProperty("speed")&&(t.positions[e.payload.deviceId].speed=e.payload.speed),e.payload.hasOwnProperty("batteryLevel")&&(t.positions[e.payload.deviceId].attributes.batteryLevel=e.payload.batteryLevel)},updateCamera(t,e){Object.keys(e.payload).length>0&&e.payload.forEach(n=>{t.camera[n.deviceId]=n})}}}),n0e=t=>{let e=[];for(let n=0;n<t.length;n++){if(e[n]={},t[n].hasOwnProperty("uav")&&(e[n].uav=t[n].uav),e[n].id=n,e[n].name=t[n].name,e[n].wp=[],e[n].attributes={},Array.isArray(t[n].wp))for(let r=0;r<t[n].wp.length;r++)e[n].wp[r]={},e[n].wp[r].pos=t[n].wp[r].pos,e[n].wp[r].yaw=t[n].wp[r].yaw,e[n].wp[r].gimbal=t[n].wp[r].gimbal,t[n].wp[r].hasOwnProperty("speed")&&(e[n].wp[r].speed=t[n].wp[r].speed),t[n].wp[r].hasOwnProperty("action")&&(e[n].wp[r].action=t[n].wp[r].action);t[n].hasOwnProperty("attributes")?(t[n].attributes.hasOwnProperty("mode_landing")&&(console.log("have modelanding"+n),e[n].attributes.mode_landing=t[n].attributes.mode_landing),t[n].attributes.hasOwnProperty("mode_yaw")&&(e[n].attributes.mode_yaw=t[n].attributes.mode_yaw),t[n].attributes.hasOwnProperty("mode_gimbal")&&(e[n].attributes.mode_gimbal=t[n].attributes.mode_gimbal),t[n].attributes.hasOwnProperty("mode_trace")&&(e[n].attributes.mode_trace=t[n].attributes.mode_trace),t[n].attributes.hasOwnProperty("idle_vel")&&(e[n].attributes.idle_vel=t[n].attributes.idle_vel),t[n].attributes.hasOwnProperty("max_vel")&&(e[n].attributes.max_vel=t[n].attributes.max_vel)):(t[n].hasOwnProperty("mode_landing")&&(e[n].attributes.mode_landing=t[n].mode_landing),t[n].hasOwnProperty("mode_yaw")&&(e[n].attributes.mode_yaw=t[n].mode_yaw),t[n].hasOwnProperty("mode_gimbal")&&(e[n].attributes.mode_gimbal=t[n].mode_gimbal),t[n].hasOwnProperty("mode_trace")&&(e[n].attributes.mode_trace=t[n].mode_trace),t[n].hasOwnProperty("idle_vel")&&(e[n].attributes.idle_vel=t[n].idle_vel),t[n].hasOwnProperty("max_vel")&&(e[n].attributes.max_vel=t[n].max_vel))}return e},r0e=t=>{let e=[];console.log("mission < 3");for(let n=1;n<=t.uav_n;n++)if(t.hasOwnProperty("uav_"+n)){let r=n-1;console.log("uav - "+r),e[r]={},e[r].id=r,e[r].uav="uav_"+n,e[r].name="uav_"+n,e[r].wp=[],e[r].attributes={};for(let i=0;i<t["uav_"+n].wp_n;i++)e[r].wp[i]={},t["uav_"+n]["wp_"+i].length==3?(e[r].wp[i].yaw=0,e[r].wp[i].pos=t["uav_"+n]["wp_"+i]):(e[r].wp[i].yaw=t["uav_"+n]["wp_"+i][3],e[r].wp[i].pos=t["uav_"+n]["wp_"+i].slice(0,-1));t.hasOwnProperty("mode_landing")&&(e[r].attributes.mode_landing=t.mode_landing),t.hasOwnProperty("mode_yaw")&&(e[r].attributes.mode_yaw=t.mode_yaw),t.hasOwnProperty("idle_vel")&&(e[r].attributes.idle_vel=t.idle_vel),t["uav_"+n].hasOwnProperty("attributes")?(t["uav_"+n].attributes.hasOwnProperty("mode_landing")&&(console.log("have modelanding"+n),e[r].attributes.mode_landing=t["uav_"+n].attributes.mode_landing),t["uav_"+n].attributes.hasOwnProperty("mode_yaw")&&(e[r].attributes.mode_yaw=t["uav_"+n].attributes.mode_yaw),t["uav_"+n].attributes.hasOwnProperty("idle_vel")&&(e[r].attributes.idle_vel=t["uav_"+n].attributes.idle_vel),t["uav_"+n].attributes.hasOwnProperty("max_vel")&&(e[n].attributes.max_vel=t["uav_"+n].attributes.max_vel)):(t["uav_"+n].hasOwnProperty("mode_landing")&&(e[r].attributes.mode_landing=t["uav_"+n].mode_landing),t["uav_"+n].hasOwnProperty("mode_yaw")&&(e[r].attributes.mode_yaw=t["uav_"+n].mode_yaw),t["uav_"+n].hasOwnProperty("idle_vel")&&(e[r].attributes.idle_vel=t["uav_"+n].idle_vel))}return console.log("-----------   legacy   --------"),console.log(e),e},{reducer:i0e,actions:_f}=s1({name:"mission",initialState:{name:"Mission no loaded",description:"",home:[0,0],route:[],attributes:{},selectpoint:{id:-1}},reducers:{updateWpPos(t,e){e.payload.route_id>=0&&(t.route[e.payload.route_id].wp[e.payload.wp_id].pos[0]=e.payload.lat,t.route[e.payload.route_id].wp[e.payload.wp_id].pos[1]=e.payload.lng)},selectpoint(t,e){console.log("selec point"),t.selectpoint=e.payload},reloadMission(t,e){t.route=e.payload},reloadName(t,e){t.name=e.payload.name,t.description=e.payload.description},updateMission(t,e){if(t.name=e.payload.name,e.payload.version=="3"){let n=0;t.home=e.payload.route[n].wp[0].pos,t.route=n0e(e.payload.route)}else{let n=1;t.home=e.payload["uav_"+n].wp_0,t.route=r0e(e.payload)}},clearMission(t,e){console.log("clear mission"),t.name="Mission no loaded",t.route=[],t.attributes={}}}}),{reducer:o0e,actions:mh}=s1({name:"session",initialState:{server:null,user:{latitude:37.19384768456065,longitude:-6.7029656624597465,zoom:10,attributes:{}},socket:null,positions:{},history:{},markers:{bases:[],elements:[]},planning:{id:1234,name:"no mission",objetivo:{id:0},loc:[],meteo:[],bases:[],settings:{}}},reducers:{updateServer(t,e){t.server=e.payload},updateServerROS(t,e){t.server.rosState=e.payload},updateUser(t,e){t.user=e.payload},updateSocket(t,e){t.socket=e.payload},updatePositions(t,e){const n=t.user.attributes.mapLiveRoutes||t.server.attributes.mapLiveRoutes||"none",r=t.user.attributes["web.liveRouteLength"]||t.user.attributes["web.liveRouteLength"]||10;e.payload.forEach(i=>{if(t.positions[i.deviceId]=i,n!=="none"){const o=t.history[i.deviceId]||[],s=o.at(-1);(!s||s[0]!==i.longitude&&s[1]!==i.latitude)&&(t.history[i.deviceId]=[...o.slice(1-r),[i.longitude,i.latitude]])}else t.history={}})},updateMarker(t,e){t.markers=e.payload},addMarkerElement(t,e){t.markers.elements.push(...e.payload)},addMarkerBase(t,e){t.markers.bases.push(...e.payload)},updatePlanning(t,e){t.planning=e.payload}}}),{reducer:s0e,actions:a0e}=s1({name:"events",initialState:{items:[]},reducers:{add(t,e){t.items.unshift(...e.payload),t.items.splice(50)},delete(t,e){t.items=t.items.filter(n=>n.id!==e.payload.id)},deleteAll(t){t.items=[]}}}),fH=3,l0e=1500,c0e=()=>t=>{const e=[];let n=!1,r=0;return setInterval(()=>{n?(e.length<fH&&(n=!1),Jye(()=>e.splice(0,e.length).forEach(i=>t(i)))):(r>fH&&(n=!0),r=0)},l0e),i=>i.type==="devices/update"||i.type==="positions/update"?n?(e.push(i),null):(r+=1,t(i)):t(i)},u0e=Bee({errors:Qve,devices:e0e,data:t0e,events:s0e,mission:i0e,session:o0e}),d0e=Lve({reducer:u0e,middleware:t=>t().concat(c0e)}),x0={black:"#000",white:"#fff"},Np={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},h0e={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},v_=h0e,ete={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},f0e={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},__=f0e,p0e={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},x_=p0e,gh={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},J5={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00"},m0e={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},vw=m0e,Ef={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},_w={white:x0.white,background:Ef[50],primary:ete[900],secondary:gh[800],positive:gh[500],medium:J5[700],negative:Np[500],neutral:Ef[500],geometry:"#3bb2d0"},g0e={0:"#F34C28",1:"#F39A28",2:"#1EC910",3:"#1012C9",4:"#C310C9",5:"#1FDBF1",6:"#F6FD04",7:"#808080"},hy={background:{default:_w.background},primary:{main:_w.primary},secondary:{main:_w.secondary,contrastText:_w.white},colors:_w,colors_devices:g0e};var Q5={exports:{}};Q5.exports=tte;Q5.exports.parse=tte;Q5.exports.stringify=nte;var pH=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,mH=new RegExp("^"+pH.source+"(\\s"+pH.source+"){1,}");function tte(t){var e=t.split(";"),n=e.pop(),r=(e.shift()||"").split("=").pop(),i=0;function o(T){var C=n.substring(i).match(T);return C?(i+=C[0].length,C[0]):null}function s(T){return T&&r.match(/\d+/)&&(T.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+r}}),T}function a(){o(/^\s*/)}function l(){a();for(var T=0,C=[],k=[C],O=C,D;D=o(/^(\()/)||o(/^(\))/)||o(/^(,)/)||o(mH);){if(D==="(")k.push(O),O=[],k[k.length-1].push(O),T++;else if(D===")"){if(O.length===0||(O=k.pop(),!O))return null;if(T--,T===0)break}else if(D===",")O=[],k[k.length-1].push(O);else if(!D.split(/\s/g).some(isNaN))Array.prototype.push.apply(O,D.split(/\s/g).map(parseFloat));else return null;a()}return T!==0?null:C}function d(){for(var T=[],C,k;k=o(mH)||o(/^(,)/);)k===","?(T.push(C),C=[]):k.split(/\s/g).some(isNaN)||(C||(C=[]),Array.prototype.push.apply(C,k.split(/\s/g).map(parseFloat))),a();if(C)T.push(C);else return null;return T.length?T:null}function f(){if(!o(/^(point(\sz)?)/i)||(a(),!o(/^(\()/)))return null;var T=d();return!T||(a(),!o(/^(\))/))?null:{type:"Point",coordinates:T[0]}}function p(){if(!o(/^(multipoint)/i))return null;a();var T=n.substring(n.indexOf("(")+1,n.length-1).replace(/\(/g,"").replace(/\)/g,"");n="MULTIPOINT ("+T+")";var C=l();return C?(a(),{type:"MultiPoint",coordinates:C}):null}function g(){if(!o(/^(multilinestring)/i))return null;a();var T=l();return T?(a(),{type:"MultiLineString",coordinates:T}):null}function v(){if(!o(/^(linestring(\sz)?)/i)||(a(),!o(/^(\()/)))return null;var T=d();return!T||!o(/^(\))/)?null:{type:"LineString",coordinates:T}}function x(){if(!o(/^(polygon(\sz)?)/i))return null;a();var T=l();return T?{type:"Polygon",coordinates:T}:null}function b(){if(!o(/^(multipolygon)/i))return null;a();var T=l();return T?{type:"MultiPolygon",coordinates:T}:null}function S(){var T=[],C;if(!o(/^(geometrycollection)/i)||(a(),!o(/^(\()/)))return null;for(;C=M();)T.push(C),a(),o(/^(,)/),a();return o(/^(\))/)?{type:"GeometryCollection",geometries:T}:null}function M(){return f()||v()||x()||p()||g()||b()||S()}return s(M())}function nte(t){t.type==="Feature"&&(t=t.geometry);function e(s){return s.join(" ")}function n(s){return s.map(e).join(", ")}function r(s){return s.map(n).map(o).join(", ")}function i(s){return s.map(r).map(o).join(", ")}function o(s){return"("+s+")"}switch(t.type){case"Point":return"POINT ("+e(t.coordinates)+")";case"LineString":return"LINESTRING ("+n(t.coordinates)+")";case"Polygon":return"POLYGON ("+r(t.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+n(t.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+i(t.coordinates)+")";case"MultiLineString":return"MULTILINESTRING ("+r(t.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+t.geometries.map(nte).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}}const iv=t=>new Promise(e=>{const n=new Image;n.onload=()=>e(n),n.src=t}),gD=(t,e)=>{const n=document.createElement("canvas");n.width=t.width*devicePixelRatio,n.height=t.height*devicePixelRatio,n.style.width=`${t.width}px`,n.style.height=`${t.height}px`;const r=n.getContext("2d");return r.save(),r.fillStyle=e,r.globalAlpha=1,r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="destination-atop",r.globalAlpha=1,r.drawImage(t,0,0,n.width,n.height),r.restore(),n},fg=(t,e,n,r,i)=>{const o=document.createElement("canvas");o.width=t.width*devicePixelRatio,o.height=t.height*devicePixelRatio,o.style.width=`${t.width}px`,o.style.height=`${t.height}px`;const s=o.getContext("2d");if(s.drawImage(t,0,0,o.width,o.height),e){r&&s.drawImage(gD(r,i),0,0,o.width,o.height);const a=.5,l=o.width*a,d=o.height*a;s.drawImage(gD(e,n),(o.width-l)/2,(o.height-d)/2,l,d)}else n&&s.drawImage(gD(t,n),0,0,o.width,o.height);return s.getImageData(0,0,o.width,o.height)},Th=t=>{var s;const e=new Set,{layers:n}=t.getStyle();(s=n==null?void 0:n.forEach)==null||s.call(n,a=>{var l,d,f;(f=(d=(l=a.layout)==null?void 0:l["text-font"])==null?void 0:d.forEach)==null||f.call(d,e.add,e)});const r=[...e],i=r.find(a=>a.includes("Regular"));if(i)return[i];const o=r.find(Boolean);return o?[o]:["Roboto Regular"]},y0e="data:image/svg+xml,%3csvg%20width='48px'%20height='48px'%20viewBox='0%200%2010%2010'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3cfilter%20id='shadow'%3e%3cfeDropShadow%20dx='0'%20dy='0.1'%20stdDeviation='0.3'%20flood-color='grey'/%3e%3c/filter%3e%3c/defs%3e%3ccircle%20cx='5'%20cy='50%25'%20r='4'%20style='fill:white;%20filter:url(%23shadow);'/%3e%3c/svg%3e",v0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='56'%20height='56'%20version='1.1'%20viewBox='0%200%2011.667%2011.667'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m%205.833%200.1%20L%204.2%201.79%20A%205.83%205.83%200,0,1%207.4,1.79%20Z%20'%20fill='%23283593'%20/%3e%3c/svg%3e",_0e="data:image/svg+xml,%3csvg%20width='48px'%20height='48px'%20viewBox='0%200%2010%2010'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='5'%20cy='50%25'%20r='4'%20stroke='black'%20stroke-width='0.5'/%3e%3c/svg%3e",IT="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24'%20height='24'%20fill='%23000000'%3e%3cpath%20d='M8,22h2l4.997-8H20c1.105,0,2-0.895,2-2s-0.895-2-2-2h-5.003L10,2H8l2.493,8H4.996L3.5,8H2l1,4l-1,4h1.5l1.496-2h5.497%20L8,22z'%20fill='%23000000'/%3e%3c/svg%3e",x0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='24'%20height='24'%20fill='%23000000'%3e%3cpath%20d='M%202%203%20L%202%205%20L%209%205%20L%209%203%20L%202%203%20z%20M%2011%203%20L%2011%206.2050781%20C%208.584%206.6840781%207.012375%207.956%206.359375%209%20L%204%209%20L%204%207%20L%202%207%20L%202%2013%20L%204%2013%20L%204%2011%20L%206%2011%20L%206%2013.300781%20C%206%2015.370781%207.8795313%2017%2010.269531%2017%20L%2013.810547%2017%20C%2016.170547%2017%2021.570703%2017%2021.970703%2013%20L%2017%2013%20C%2014.79%2013%2013%2011.21%2013%209%20L%2013%203%20L%2011%203%20z%20M%2015%203%20L%2015%205%20L%2022%205%20L%2022%203%20L%2015%203%20z%20M%2015%206.1699219%20L%2015%209%20C%2015%2010.1%2015.9%2011%2017%2011%20L%2021.740234%2011%20C%2020.940234%208.64%2018.28%206.7299219%2015%206.1699219%20z%20M%2021%2018%20C%2021%2018.552%2020.552%2019%2020%2019%20L%206%2019%20L%206%2021%20L%2020%2021%20C%2021.654%2021%2023%2019.654%2023%2018%20L%2021%2018%20z'%20fill='%23000000'/%3e%3c/svg%3e",b0e="/assets/drone1-C9CzjY_U.svg",Mv="/assets/drone2-DHZR_EoR.svg",w0e="/assets/drone3-Q_BmG4OH.svg",S0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='47'%20height='37'%20viewBox='0%200%2047%2037'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M23.5%200L46.4497%2036.75H0.550327L23.5%200Z'%20fill='%2300FF0A'/%3e%3c/svg%3e",M0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='10.550469mm'%20height='11.099902mm'%20viewBox='0%200%2010.550469%2011.099902'%20version='1.1'%20id='svg5'%20sodipodi:docname='PowerTower.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3csodipodi:namedview%20id='namedview29'%20pagecolor='%23ffffff'%20bordercolor='%23000000'%20borderopacity='0.25'%20inkscape:showpageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20inkscape:document-units='mm'%20showgrid='false'%20/%3e%3cdefs%20id='defs2'%20/%3e%3cg%20id='layer1'%20transform='matrix(1.2914054,0,0,1.2914054,-44.349104,-250.92541)'%20inkscape:export-filename='../8bf6bfef/g329812.svg'%20inkscape:export-xdpi='96'%20inkscape:export-ydpi='96'%3e%3cg%20id='g1611'%20transform='matrix(0.1732213,0,0,0.1732213,28.393016,160.64652)'%3e%3cpath%20style='fill:%23000000;stroke:%23999999;stroke-width:0.264583'%20d='m%2044.755491,243.21009%20c%200.0638,-0.70167%200.12758,-1.40335%200.19137,-2.10502'%20id='path245-8-0'%20/%3e%3cpath%20style='fill:%23000000;stroke-width:0.264583'%20d='m%2042.705671,243.89909%2015.24211,-49.59496%2014.9889,49.61983%20-14.94047,-4.79905%20z'%20id='path366-6-1'%20/%3e%3cpath%20style='fill:none;stroke:%23999999;stroke-width:1.5;stroke-dasharray:none;stroke-dashoffset:0'%20d='m%2065.090551,218.22825%20-14.21776,4.65545%2015.77463,5.18213%20-21.10264,6.73158'%20id='path1500-5-8'%20/%3e%3cpath%20style='fill:none;stroke:%23999999;stroke-width:1.5;stroke-dasharray:none;stroke-dashoffset:0'%20d='m%2050.587581,218.15902%2014.21776,4.65545%20-15.77463,5.18213%2021.10264,6.73158'%20id='path1500-5-6-0'%20/%3e%3cpath%20style='fill:%23000000;stroke:%23b3b3b3;stroke-width:2;stroke-dasharray:none;stroke-dashoffset:0'%20d='m%2037.095893,210.4801%2041.910248,0.11388'%20id='path368-6-4'%20/%3e%3ccircle%20style='fill:%2387decd;stroke:%23000000;stroke-width:0.495712;stroke-dasharray:none;stroke-dashoffset:0'%20id='path3174'%20cx='36.455219'%20cy='210.51549'%20r='1.8656268'%20/%3e%3ccircle%20style='fill:%235fd3bc;stroke:%23000000;stroke-width:0.495712;stroke-dasharray:none;stroke-dashoffset:0'%20id='path3174-8'%20cx='79.391953'%20cy='210.65347'%20r='1.8656268'%20/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",E0e="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20width='40'%20height='40'%20viewBox='0%200%2040%2040'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='4'%20y='4'%20width='32'%20height='32'%20fill='%235144E6'%20stroke='%23FF0A0A'%20stroke-width='8'/%3e%3c/svg%3e",dc="/assets/drone-svgrepo-BHqRZACo.svg",gH={0:"#F34C28",1:"#F39A28",2:"#1EC910",3:"#1012C9",4:"#C310C9",5:"#1FDBF1",6:"#F6FD04",7:"#808080"},g2={helicopter:x0e,plane:IT,drone:b0e,dji_M210_noetic:Mv,dji_M210_melodic:Mv,dji_M210_noetic_rtk:Mv,dji_M210_melodic_rtk:Mv,dji_M300:Mv,dji_M300_rtk:Mv,dji_M600:dc,px4:IT,catec:w0e,fuvex:IT,default:IT},T0e={helicopter:dc,plane:dc,drone:dc,dji_M210_noetic:dc,dji_M210_melodic:dc,dji_M210_noetic_rtk:dc,dji_M210_melodic_rtk:dc,dji_M300:dc,dji_M300_rtk:Mv,dji_M600:dc,px4:dc,catec:dc,fuvex:dc,default:dc},PP=t=>g2.hasOwnProperty(t)?t:"default",Rp={},C0e=async()=>{const t=await iv(y0e),e=await iv(_0e);Rp.background=await fg(t),Rp.item=await fg(await iv(S0e)),Rp.powerTower=await fg(await iv(M0e)),Rp.base=await fg(await iv(E0e)),Rp.direction=await fg(await iv(v0e)),Object.keys(hy.colors_devices).forEach(async n=>{Rp[`background-${n}`]=await fg(t,null,gH[n]),Rp[`mission-${n}`]=await fg(e,null,gH[n])}),await Promise.all(Object.keys(g2).map(async n=>{const r=[];["primary","positive","negative","neutral"].forEach(i=>{r.push(iv(g2[n]).then(o=>{Rp[`${n}-${i}`]=fg(t,o,hy.colors[i])}))}),await Promise.all(r)}))};function b0(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}const A0e=Object.freeze(Object.defineProperty({__proto__:null,default:b0},Symbol.toStringTag,{value:"Module"})),w0="$$material";function fe(){return fe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fe.apply(this,arguments)}function on(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function rte(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var P0e=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,I0e=rte(function(t){return P0e.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function k0e(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function R0e(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var O0e=function(){function t(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(R0e(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=k0e(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),ll="-ms-",IP="-moz-",Ci="-webkit-",ite="comm",e$="rule",t$="decl",L0e="@import",ote="@keyframes",D0e="@layer",N0e=Math.abs,Ak=String.fromCharCode,z0e=Object.assign;function F0e(t,e){return Oa(t,0)^45?(((e<<2^Oa(t,0))<<2^Oa(t,1))<<2^Oa(t,2))<<2^Oa(t,3):0}function ste(t){return t.trim()}function B0e(t,e){return(t=e.exec(t))?t[0]:t}function Ai(t,e,n){return t.replace(e,n)}function Yz(t,e){return t.indexOf(e)}function Oa(t,e){return t.charCodeAt(e)|0}function y2(t,e,n){return t.slice(e,n)}function pf(t){return t.length}function n$(t){return t.length}function kT(t,e){return e.push(t),t}function $0e(t,e){return t.map(e).join("")}var Pk=1,mb=1,ate=0,Ec=0,Es=0,a1="";function Ik(t,e,n,r,i,o,s){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:Pk,column:mb,length:s,return:""}}function xw(t,e){return z0e(Ik("",null,null,"",null,null,0),t,{length:-t.length},e)}function j0e(){return Es}function U0e(){return Es=Ec>0?Oa(a1,--Ec):0,mb--,Es===10&&(mb=1,Pk--),Es}function cu(){return Es=Ec<ate?Oa(a1,Ec++):0,mb++,Es===10&&(mb=1,Pk++),Es}function Tf(){return Oa(a1,Ec)}function MA(){return Ec}function GM(t,e){return y2(a1,t,e)}function v2(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function lte(t){return Pk=mb=1,ate=pf(a1=t),Ec=0,[]}function cte(t){return a1="",t}function EA(t){return ste(GM(Ec-1,Xz(t===91?t+2:t===40?t+1:t)))}function V0e(t){for(;(Es=Tf())&&Es<33;)cu();return v2(t)>2||v2(Es)>3?"":" "}function W0e(t,e){for(;--e&&cu()&&!(Es<48||Es>102||Es>57&&Es<65||Es>70&&Es<97););return GM(t,MA()+(e<6&&Tf()==32&&cu()==32))}function Xz(t){for(;cu();)switch(Es){case t:return Ec;case 34:case 39:t!==34&&t!==39&&Xz(Es);break;case 40:t===41&&Xz(t);break;case 92:cu();break}return Ec}function H0e(t,e){for(;cu()&&t+Es!==57;)if(t+Es===84&&Tf()===47)break;return"/*"+GM(e,Ec-1)+"*"+Ak(t===47?t:cu())}function G0e(t){for(;!v2(Tf());)cu();return GM(t,Ec)}function q0e(t){return cte(TA("",null,null,null,[""],t=lte(t),0,[0],t))}function TA(t,e,n,r,i,o,s,a,l){for(var d=0,f=0,p=s,g=0,v=0,x=0,b=1,S=1,M=1,T=0,C="",k=i,O=o,D=r,B=C;S;)switch(x=T,T=cu()){case 40:if(x!=108&&Oa(B,p-1)==58){Yz(B+=Ai(EA(T),"&","&\f"),"&\f")!=-1&&(M=-1);break}case 34:case 39:case 91:B+=EA(T);break;case 9:case 10:case 13:case 32:B+=V0e(x);break;case 92:B+=W0e(MA()-1,7);continue;case 47:switch(Tf()){case 42:case 47:kT(Y0e(H0e(cu(),MA()),e,n),l);break;default:B+="/"}break;case 123*b:a[d++]=pf(B)*M;case 125*b:case 59:case 0:switch(T){case 0:case 125:S=0;case 59+f:M==-1&&(B=Ai(B,/\f/g,"")),v>0&&pf(B)-p&&kT(v>32?vH(B+";",r,n,p-1):vH(Ai(B," ","")+";",r,n,p-2),l);break;case 59:B+=";";default:if(kT(D=yH(B,e,n,d,f,i,a,C,k=[],O=[],p),o),T===123)if(f===0)TA(B,e,D,D,k,o,p,a,O);else switch(g===99&&Oa(B,3)===110?100:g){case 100:case 108:case 109:case 115:TA(t,D,D,r&&kT(yH(t,D,D,0,0,i,a,C,i,k=[],p),O),i,O,p,a,r?k:O);break;default:TA(B,D,D,D,[""],O,0,a,O)}}d=f=v=0,b=M=1,C=B="",p=s;break;case 58:p=1+pf(B),v=x;default:if(b<1){if(T==123)--b;else if(T==125&&b++==0&&U0e()==125)continue}switch(B+=Ak(T),T*b){case 38:M=f>0?1:(B+="\f",-1);break;case 44:a[d++]=(pf(B)-1)*M,M=1;break;case 64:Tf()===45&&(B+=EA(cu())),g=Tf(),f=p=pf(C=B+=G0e(MA())),T++;break;case 45:x===45&&pf(B)==2&&(b=0)}}return o}function yH(t,e,n,r,i,o,s,a,l,d,f){for(var p=i-1,g=i===0?o:[""],v=n$(g),x=0,b=0,S=0;x<r;++x)for(var M=0,T=y2(t,p+1,p=N0e(b=s[x])),C=t;M<v;++M)(C=ste(b>0?g[M]+" "+T:Ai(T,/&\f/g,g[M])))&&(l[S++]=C);return Ik(t,e,n,i===0?e$:a,l,d,f)}function Y0e(t,e,n){return Ik(t,e,n,ite,Ak(j0e()),y2(t,2,-2),0)}function vH(t,e,n,r){return Ik(t,e,n,t$,y2(t,0,r),y2(t,r+1,-1),r)}function Gx(t,e){for(var n="",r=n$(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function X0e(t,e,n,r){switch(t.type){case D0e:if(t.children.length)break;case L0e:case t$:return t.return=t.return||t.value;case ite:return"";case ote:return t.return=t.value+"{"+Gx(t.children,r)+"}";case e$:t.value=t.props.join(",")}return pf(n=Gx(t.children,r))?t.return=t.value+"{"+n+"}":""}function K0e(t){var e=n$(t);return function(n,r,i,o){for(var s="",a=0;a<e;a++)s+=t[a](n,r,i,o)||"";return s}}function Z0e(t){return function(e){e.root||(e=e.return)&&t(e)}}var J0e=function(e,n,r){for(var i=0,o=0;i=o,o=Tf(),i===38&&o===12&&(n[r]=1),!v2(o);)cu();return GM(e,Ec)},Q0e=function(e,n){var r=-1,i=44;do switch(v2(i)){case 0:i===38&&Tf()===12&&(n[r]=1),e[r]+=J0e(Ec-1,n,r);break;case 2:e[r]+=EA(i);break;case 4:if(i===44){e[++r]=Tf()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=Ak(i)}while(i=cu());return e},e_e=function(e,n){return cte(Q0e(lte(e),n))},_H=new WeakMap,t_e=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!_H.get(r))&&!i){_H.set(e,!0);for(var o=[],s=e_e(n,o),a=r.props,l=0,d=0;l<s.length;l++)for(var f=0;f<a.length;f++,d++)e.props[d]=o[l]?s[l].replace(/&\f/g,a[f]):a[f]+" "+s[l]}}},n_e=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function ute(t,e){switch(F0e(t,e)){case 5103:return Ci+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ci+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Ci+t+IP+t+ll+t+t;case 6828:case 4268:return Ci+t+ll+t+t;case 6165:return Ci+t+ll+"flex-"+t+t;case 5187:return Ci+t+Ai(t,/(\w+).+(:[^]+)/,Ci+"box-$1$2"+ll+"flex-$1$2")+t;case 5443:return Ci+t+ll+"flex-item-"+Ai(t,/flex-|-self/,"")+t;case 4675:return Ci+t+ll+"flex-line-pack"+Ai(t,/align-content|flex-|-self/,"")+t;case 5548:return Ci+t+ll+Ai(t,"shrink","negative")+t;case 5292:return Ci+t+ll+Ai(t,"basis","preferred-size")+t;case 6060:return Ci+"box-"+Ai(t,"-grow","")+Ci+t+ll+Ai(t,"grow","positive")+t;case 4554:return Ci+Ai(t,/([^-])(transform)/g,"$1"+Ci+"$2")+t;case 6187:return Ai(Ai(Ai(t,/(zoom-|grab)/,Ci+"$1"),/(image-set)/,Ci+"$1"),t,"")+t;case 5495:case 3959:return Ai(t,/(image-set\([^]*)/,Ci+"$1$`$1");case 4968:return Ai(Ai(t,/(.+:)(flex-)?(.*)/,Ci+"box-pack:$3"+ll+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ci+t+t;case 4095:case 3583:case 4068:case 2532:return Ai(t,/(.+)-inline(.+)/,Ci+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(pf(t)-1-e>6)switch(Oa(t,e+1)){case 109:if(Oa(t,e+4)!==45)break;case 102:return Ai(t,/(.+:)(.+)-([^]+)/,"$1"+Ci+"$2-$3$1"+IP+(Oa(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Yz(t,"stretch")?ute(Ai(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Oa(t,e+1)!==115)break;case 6444:switch(Oa(t,pf(t)-3-(~Yz(t,"!important")&&10))){case 107:return Ai(t,":",":"+Ci)+t;case 101:return Ai(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ci+(Oa(t,14)===45?"inline-":"")+"box$3$1"+Ci+"$2$3$1"+ll+"$2box$3")+t}break;case 5936:switch(Oa(t,e+11)){case 114:return Ci+t+ll+Ai(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Ci+t+ll+Ai(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Ci+t+ll+Ai(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Ci+t+ll+t+t}return t}var r_e=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case t$:e.return=ute(e.value,e.length);break;case ote:return Gx([xw(e,{value:Ai(e.value,"@","@"+Ci)})],i);case e$:if(e.length)return $0e(e.props,function(o){switch(B0e(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Gx([xw(e,{props:[Ai(o,/:(read-\w+)/,":"+IP+"$1")]})],i);case"::placeholder":return Gx([xw(e,{props:[Ai(o,/:(plac\w+)/,":"+Ci+"input-$1")]}),xw(e,{props:[Ai(o,/:(plac\w+)/,":"+IP+"$1")]}),xw(e,{props:[Ai(o,/:(plac\w+)/,ll+"input-$1")]})],i)}return""})}},i_e=[r_e],dte=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(b){var S=b.getAttribute("data-emotion");S.indexOf(" ")!==-1&&(document.head.appendChild(b),b.setAttribute("data-s",""))})}var i=e.stylisPlugins||i_e,o={},s,a=[];s=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(b){for(var S=b.getAttribute("data-emotion").split(" "),M=1;M<S.length;M++)o[S[M]]=!0;a.push(b)});var l,d=[t_e,n_e];{var f,p=[X0e,Z0e(function(b){f.insert(b)})],g=K0e(d.concat(i,p)),v=function(S){return Gx(q0e(S),g)};l=function(S,M,T,C){f=T,v(S?S+"{"+M.styles+"}":M.styles),C&&(x.inserted[M.name]=!0)}}var x={key:n,sheet:new O0e({key:n,container:s,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:l};return x.sheet.hydrate(a),x},hte={exports:{}},Bi={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var da=typeof Symbol=="function"&&Symbol.for,r$=da?Symbol.for("react.element"):60103,i$=da?Symbol.for("react.portal"):60106,kk=da?Symbol.for("react.fragment"):60107,Rk=da?Symbol.for("react.strict_mode"):60108,Ok=da?Symbol.for("react.profiler"):60114,Lk=da?Symbol.for("react.provider"):60109,Dk=da?Symbol.for("react.context"):60110,o$=da?Symbol.for("react.async_mode"):60111,Nk=da?Symbol.for("react.concurrent_mode"):60111,zk=da?Symbol.for("react.forward_ref"):60112,Fk=da?Symbol.for("react.suspense"):60113,o_e=da?Symbol.for("react.suspense_list"):60120,Bk=da?Symbol.for("react.memo"):60115,$k=da?Symbol.for("react.lazy"):60116,s_e=da?Symbol.for("react.block"):60121,a_e=da?Symbol.for("react.fundamental"):60117,l_e=da?Symbol.for("react.responder"):60118,c_e=da?Symbol.for("react.scope"):60119;function wu(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case r$:switch(t=t.type,t){case o$:case Nk:case kk:case Ok:case Rk:case Fk:return t;default:switch(t=t&&t.$$typeof,t){case Dk:case zk:case $k:case Bk:case Lk:return t;default:return e}}case i$:return e}}}function fte(t){return wu(t)===Nk}Bi.AsyncMode=o$;Bi.ConcurrentMode=Nk;Bi.ContextConsumer=Dk;Bi.ContextProvider=Lk;Bi.Element=r$;Bi.ForwardRef=zk;Bi.Fragment=kk;Bi.Lazy=$k;Bi.Memo=Bk;Bi.Portal=i$;Bi.Profiler=Ok;Bi.StrictMode=Rk;Bi.Suspense=Fk;Bi.isAsyncMode=function(t){return fte(t)||wu(t)===o$};Bi.isConcurrentMode=fte;Bi.isContextConsumer=function(t){return wu(t)===Dk};Bi.isContextProvider=function(t){return wu(t)===Lk};Bi.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===r$};Bi.isForwardRef=function(t){return wu(t)===zk};Bi.isFragment=function(t){return wu(t)===kk};Bi.isLazy=function(t){return wu(t)===$k};Bi.isMemo=function(t){return wu(t)===Bk};Bi.isPortal=function(t){return wu(t)===i$};Bi.isProfiler=function(t){return wu(t)===Ok};Bi.isStrictMode=function(t){return wu(t)===Rk};Bi.isSuspense=function(t){return wu(t)===Fk};Bi.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===kk||t===Nk||t===Ok||t===Rk||t===Fk||t===o_e||typeof t=="object"&&t!==null&&(t.$$typeof===$k||t.$$typeof===Bk||t.$$typeof===Lk||t.$$typeof===Dk||t.$$typeof===zk||t.$$typeof===a_e||t.$$typeof===l_e||t.$$typeof===c_e||t.$$typeof===s_e)};Bi.typeOf=wu;hte.exports=Bi;var u_e=hte.exports,pte=u_e,d_e={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},h_e={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},mte={};mte[pte.ForwardRef]=d_e;mte[pte.Memo]=h_e;var f_e=!0;function p_e(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var gte=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||f_e===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},yte=function(e,n,r){gte(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function m_e(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var g_e={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},y_e=/[A-Z]|^ms/g,v_e=/_EMO_([^_]+?)_([^]*?)_EMO_/g,vte=function(e){return e.charCodeAt(1)===45},xH=function(e){return e!=null&&typeof e!="boolean"},yD=rte(function(t){return vte(t)?t:t.replace(y_e,"-$&").toLowerCase()}),bH=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(v_e,function(r,i,o){return mf={name:i,styles:o,next:mf},i})}return g_e[e]!==1&&!vte(e)&&typeof n=="number"&&n!==0?n+"px":n};function _2(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return mf={name:n.name,styles:n.styles,next:mf},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)mf={name:r.name,styles:r.styles,next:mf},r=r.next;var i=n.styles+";";return i}return __e(t,e,n)}case"function":{if(t!==void 0){var o=mf,s=n(t);return mf=o,_2(t,e,s)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function __e(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=_2(t,e,n[i])+";";else for(var o in n){var s=n[o];if(typeof s!="object")e!=null&&e[s]!==void 0?r+=o+"{"+e[s]+"}":xH(s)&&(r+=yD(o)+":"+bH(o,s)+";");else if(Array.isArray(s)&&typeof s[0]=="string"&&(e==null||e[s[0]]===void 0))for(var a=0;a<s.length;a++)xH(s[a])&&(r+=yD(o)+":"+bH(o,s[a])+";");else{var l=_2(t,e,s);switch(o){case"animation":case"animationName":{r+=yD(o)+":"+l+";";break}default:r+=o+"{"+l+"}"}}}return r}var wH=/label:\s*([^\s;\n{]+)\s*(;|$)/g,mf,s$=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,o="";mf=void 0;var s=e[0];s==null||s.raw===void 0?(i=!1,o+=_2(r,n,s)):o+=s[0];for(var a=1;a<e.length;a++)o+=_2(r,n,e[a]),i&&(o+=s[a]);wH.lastIndex=0;for(var l="",d;(d=wH.exec(o))!==null;)l+="-"+d[1];var f=m_e(o)+l;return{name:f,styles:o,next:mf}},x_e=function(e){return e()},_te=ob.useInsertionEffect?ob.useInsertionEffect:!1,b_e=_te||x_e,SH=_te||W.useLayoutEffect,xte=W.createContext(typeof HTMLElement<"u"?dte({key:"css"}):null),w_e=xte.Provider,bte=function(e){return W.forwardRef(function(n,r){var i=W.useContext(xte);return e(n,i,r)})},qM=W.createContext({}),vD={exports:{}},MH;function wte(){return MH||(MH=1,function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(this,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(vD)),vD.exports}wte();var S_e=bte(function(t,e){var n=t.styles,r=s$([n],void 0,W.useContext(qM)),i=W.useRef();return SH(function(){var o=e.key+"-global",s=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return e.sheet.tags.length&&(s.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",o),s.hydrate([l])),i.current=[s,a],function(){s.flush()}},[e]),SH(function(){var o=i.current,s=o[0],a=o[1];if(a){o[1]=!1;return}if(r.next!==void 0&&yte(e,r.next,!0),s.tags.length){var l=s.tags[s.tags.length-1].nextElementSibling;s.before=l,s.flush()}e.insert("",r,s,!1)},[e,r.name]),null});function YM(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return s$(e)}var D0=function(){var e=YM.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},M_e=I0e,E_e=function(e){return e!=="theme"},EH=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?M_e:E_e},TH=function(e,n,r){var i;if(n){var o=n.shouldForwardProp;i=e.__emotion_forwardProp&&o?function(s){return e.__emotion_forwardProp(s)&&o(s)}:o}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},T_e=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return gte(n,r,i),b_e(function(){return yte(n,r,i)}),null},C_e=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,o,s;n!==void 0&&(o=n.label,s=n.target);var a=TH(e,n,r),l=a||EH(i),d=!l("as");return function(){var f=arguments,p=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&p.push("label:"+o+";"),f[0]==null||f[0].raw===void 0)p.push.apply(p,f);else{p.push(f[0][0]);for(var g=f.length,v=1;v<g;v++)p.push(f[v],f[0][v])}var x=bte(function(b,S,M){var T=d&&b.as||i,C="",k=[],O=b;if(b.theme==null){O={};for(var D in b)O[D]=b[D];O.theme=W.useContext(qM)}typeof b.className=="string"?C=p_e(S.registered,k,b.className):b.className!=null&&(C=b.className+" ");var B=s$(p.concat(k),S.registered,O);C+=S.key+"-"+B.name,s!==void 0&&(C+=" "+s);var U=d&&a===void 0?EH(T):l,J={};for(var V in b)d&&V==="as"||U(V)&&(J[V]=b[V]);return J.className=C,J.ref=M,W.createElement(W.Fragment,null,W.createElement(T_e,{cache:S,serialized:B,isStringTag:typeof T=="string"}),W.createElement(T,J))});return x.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",x.defaultProps=e.defaultProps,x.__emotion_real=x,x.__emotion_base=i,x.__emotion_styles=p,x.__emotion_forwardProp=a,Object.defineProperty(x,"toString",{value:function(){return"."+s}}),x.withComponent=function(b,S){return t(b,fe({},n,S,{shouldForwardProp:TH(x,S,!0)})).apply(void 0,p)},x}},A_e=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Kz=C_e.bind();A_e.forEach(function(t){Kz[t]=Kz(t)});var Ste={exports:{}},P_e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",I_e=P_e,k_e=I_e;function Mte(){}function Ete(){}Ete.resetWarningCache=Mte;var R_e=function(){function t(r,i,o,s,a,l){if(l!==k_e){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Ete,resetWarningCache:Mte};return n.PropTypes=n,n};Ste.exports=R_e();var a$=Ste.exports;const zr=xi(a$);let Zz;typeof document=="object"&&(Zz=dte({key:"css",prepend:!0}));function Tte(t){const{injectFirst:e,children:n}=t;return e&&Zz?F.jsx(w_e,{value:Zz,children:n}):n}function O_e(t){return t==null||Object.keys(t).length===0}function Cte(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(O_e(i)?n:i):e;return F.jsx(S_e,{styles:r})}function l$(t,e){return Kz(t,e)}const Ate=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))},L_e=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:Cte,StyledEngineProvider:Tte,ThemeContext:qM,css:YM,default:l$,internal_processStyles:Ate,keyframes:D0},Symbol.toStringTag,{value:"Module"}));function zp(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Pte(t){if(!zp(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=Pte(t[n])}),e}function za(t,e,n={clone:!0}){const r=n.clone?fe({},t):t;return zp(t)&&zp(e)&&Object.keys(e).forEach(i=>{i!=="__proto__"&&(zp(e[i])&&i in t&&zp(t[i])?r[i]=za(t[i],e[i],n):n.clone?r[i]=zp(e[i])?Pte(e[i]):e[i]:r[i]=e[i])}),r}const D_e=Object.freeze(Object.defineProperty({__proto__:null,default:za,isPlainObject:zp},Symbol.toStringTag,{value:"Module"})),N_e=["values","unit","step"],z_e=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>fe({},n,{[r.key]:r.val}),{})};function Ite(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=on(t,N_e),o=z_e(e),s=Object.keys(o);function a(g){return`@media (min-width:${typeof e[g]=="number"?e[g]:g}${n})`}function l(g){return`@media (max-width:${(typeof e[g]=="number"?e[g]:g)-r/100}${n})`}function d(g,v){const x=s.indexOf(v);return`@media (min-width:${typeof e[g]=="number"?e[g]:g}${n}) and (max-width:${(x!==-1&&typeof e[s[x]]=="number"?e[s[x]]:v)-r/100}${n})`}function f(g){return s.indexOf(g)+1<s.length?d(g,s[s.indexOf(g)+1]):a(g)}function p(g){const v=s.indexOf(g);return v===0?a(s[1]):v===s.length-1?l(s[v]):d(g,s[s.indexOf(g)+1]).replace("@media","@media not all and")}return fe({keys:s,values:o,up:a,down:l,between:d,only:f,not:p,unit:n},i)}const F_e={borderRadius:4},B_e=F_e;function AS(t,e){return e?za(t,e,{clone:!1}):t}const c$={xs:0,sm:600,md:900,lg:1200,xl:1536},CH={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${c$[t]}px)`};function Tc(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const o=r.breakpoints||CH;return e.reduce((s,a,l)=>(s[o.up(o.keys[l])]=n(e[l]),s),{})}if(typeof e=="object"){const o=r.breakpoints||CH;return Object.keys(e).reduce((s,a)=>{if(Object.keys(o.values||c$).indexOf(a)!==-1){const l=o.up(a);s[l]=n(e[a],a)}else{const l=a;s[l]=e[l]}return s},{})}return n(e)}function kte(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const o=t.up(i);return r[o]={},r},{}))||{}}function Rte(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function $_e(t,...e){const n=kte(t),r=[n,...e].reduce((i,o)=>za(i,o),{});return Rte(Object.keys(n),r)}function j_e(t,e){if(typeof t!="object")return{};const n={},r=Object.keys(e);return Array.isArray(t)?r.forEach((i,o)=>{o<t.length&&(n[i]=!0)}):r.forEach(i=>{t[i]!=null&&(n[i]=!0)}),n}function r0({values:t,breakpoints:e,base:n}){const r=n||j_e(t,e),i=Object.keys(r);if(i.length===0)return t;let o;return i.reduce((s,a,l)=>(Array.isArray(t)?(s[a]=t[l]!=null?t[l]:t[o],o=l):typeof t=="object"?(s[a]=t[a]!=null?t[a]:t[o],o=a):s[a]=t,s),{})}function Jt(t){if(typeof t!="string")throw new Error(b0(7));return t.charAt(0).toUpperCase()+t.slice(1)}const U_e=Object.freeze(Object.defineProperty({__proto__:null,default:Jt},Symbol.toStringTag,{value:"Module"}));function gb(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function kP(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=gb(t,n)||r,e&&(i=e(i,r,t)),i}function ps(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,o=s=>{if(s[e]==null)return null;const a=s[e],l=s.theme,d=gb(l,r)||{};return Tc(s,a,p=>{let g=kP(d,i,p);return p===g&&typeof p=="string"&&(g=kP(d,i,`${e}${p==="default"?"":Jt(p)}`,p)),n===!1?g:{[n]:g}})};return o.propTypes={},o.filterProps=[e],o}function V_e(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const W_e={m:"margin",p:"padding"},H_e={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},AH={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},G_e=V_e(t=>{if(t.length>2)if(AH[t])t=AH[t];else return[t];const[e,n]=t.split(""),r=W_e[e],i=H_e[n]||"";return Array.isArray(i)?i.map(o=>r+o):[r+i]}),u$=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],d$=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...u$,...d$];function XM(t,e,n,r){var i;const o=(i=gb(t,e,!1))!=null?i:n;return typeof o=="number"?s=>typeof s=="string"?s:o*s:Array.isArray(o)?s=>typeof s=="string"?s:o[s]:typeof o=="function"?o:()=>{}}function h$(t){return XM(t,"spacing",8)}function S0(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function q_e(t,e){return n=>t.reduce((r,i)=>(r[i]=S0(e,n),r),{})}function Y_e(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=G_e(n),o=q_e(i,r),s=t[n];return Tc(t,s,o)}function Ote(t,e){const n=h$(t.theme);return Object.keys(t).map(r=>Y_e(t,e,r,n)).reduce(AS,{})}function Ho(t){return Ote(t,u$)}Ho.propTypes={};Ho.filterProps=u$;function Go(t){return Ote(t,d$)}Go.propTypes={};Go.filterProps=d$;function X_e(t=8){if(t.mui)return t;const e=h$({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(o=>{const s=e(o);return typeof s=="number"?`${s}px`:s}).join(" ");return n.mui=!0,n}function jk(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(o=>{r[o]=i}),r),{}),n=r=>Object.keys(r).reduce((i,o)=>e[o]?AS(i,e[o](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function od(t){return typeof t!="number"?t:`${t}px solid`}function Md(t,e){return ps({prop:t,themeKey:"borders",transform:e})}const K_e=Md("border",od),Z_e=Md("borderTop",od),J_e=Md("borderRight",od),Q_e=Md("borderBottom",od),exe=Md("borderLeft",od),txe=Md("borderColor"),nxe=Md("borderTopColor"),rxe=Md("borderRightColor"),ixe=Md("borderBottomColor"),oxe=Md("borderLeftColor"),sxe=Md("outline",od),axe=Md("outlineColor"),Uk=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=XM(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:S0(e,r)});return Tc(t,t.borderRadius,n)}return null};Uk.propTypes={};Uk.filterProps=["borderRadius"];jk(K_e,Z_e,J_e,Q_e,exe,txe,nxe,rxe,ixe,oxe,Uk,sxe,axe);const Vk=t=>{if(t.gap!==void 0&&t.gap!==null){const e=XM(t.theme,"spacing",8),n=r=>({gap:S0(e,r)});return Tc(t,t.gap,n)}return null};Vk.propTypes={};Vk.filterProps=["gap"];const Wk=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=XM(t.theme,"spacing",8),n=r=>({columnGap:S0(e,r)});return Tc(t,t.columnGap,n)}return null};Wk.propTypes={};Wk.filterProps=["columnGap"];const Hk=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=XM(t.theme,"spacing",8),n=r=>({rowGap:S0(e,r)});return Tc(t,t.rowGap,n)}return null};Hk.propTypes={};Hk.filterProps=["rowGap"];const lxe=ps({prop:"gridColumn"}),cxe=ps({prop:"gridRow"}),uxe=ps({prop:"gridAutoFlow"}),dxe=ps({prop:"gridAutoColumns"}),hxe=ps({prop:"gridAutoRows"}),fxe=ps({prop:"gridTemplateColumns"}),pxe=ps({prop:"gridTemplateRows"}),mxe=ps({prop:"gridTemplateAreas"}),gxe=ps({prop:"gridArea"});jk(Vk,Wk,Hk,lxe,cxe,uxe,dxe,hxe,fxe,pxe,mxe,gxe);function qx(t,e){return e==="grey"?e:t}const yxe=ps({prop:"color",themeKey:"palette",transform:qx}),vxe=ps({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:qx}),_xe=ps({prop:"backgroundColor",themeKey:"palette",transform:qx});jk(yxe,vxe,_xe);function tu(t){return t<=1&&t!==0?`${t*100}%`:t}const xxe=ps({prop:"width",transform:tu}),f$=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i;const o=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||c$[n];return o?((i=t.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${o}${t.theme.breakpoints.unit}`}:{maxWidth:o}:{maxWidth:tu(n)}};return Tc(t,t.maxWidth,e)}return null};f$.filterProps=["maxWidth"];const bxe=ps({prop:"minWidth",transform:tu}),wxe=ps({prop:"height",transform:tu}),Sxe=ps({prop:"maxHeight",transform:tu}),Mxe=ps({prop:"minHeight",transform:tu});ps({prop:"size",cssProperty:"width",transform:tu});ps({prop:"size",cssProperty:"height",transform:tu});const Exe=ps({prop:"boxSizing"});jk(xxe,f$,bxe,wxe,Sxe,Mxe,Exe);const Txe={border:{themeKey:"borders",transform:od},borderTop:{themeKey:"borders",transform:od},borderRight:{themeKey:"borders",transform:od},borderBottom:{themeKey:"borders",transform:od},borderLeft:{themeKey:"borders",transform:od},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:od},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Uk},color:{themeKey:"palette",transform:qx},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:qx},backgroundColor:{themeKey:"palette",transform:qx},p:{style:Go},pt:{style:Go},pr:{style:Go},pb:{style:Go},pl:{style:Go},px:{style:Go},py:{style:Go},padding:{style:Go},paddingTop:{style:Go},paddingRight:{style:Go},paddingBottom:{style:Go},paddingLeft:{style:Go},paddingX:{style:Go},paddingY:{style:Go},paddingInline:{style:Go},paddingInlineStart:{style:Go},paddingInlineEnd:{style:Go},paddingBlock:{style:Go},paddingBlockStart:{style:Go},paddingBlockEnd:{style:Go},m:{style:Ho},mt:{style:Ho},mr:{style:Ho},mb:{style:Ho},ml:{style:Ho},mx:{style:Ho},my:{style:Ho},margin:{style:Ho},marginTop:{style:Ho},marginRight:{style:Ho},marginBottom:{style:Ho},marginLeft:{style:Ho},marginX:{style:Ho},marginY:{style:Ho},marginInline:{style:Ho},marginInlineStart:{style:Ho},marginInlineEnd:{style:Ho},marginBlock:{style:Ho},marginBlockStart:{style:Ho},marginBlockEnd:{style:Ho},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Vk},rowGap:{style:Hk},columnGap:{style:Wk},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:tu},maxWidth:{style:f$},minWidth:{transform:tu},height:{transform:tu},maxHeight:{transform:tu},minHeight:{transform:tu},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},KM=Txe;function Cxe(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function Axe(t,e){return typeof t=="function"?t(e):t}function Lte(){function t(n,r,i,o){const s={[n]:r,theme:i},a=o[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:d,transform:f,style:p}=a;if(r==null)return null;if(d==="typography"&&r==="inherit")return{[n]:r};const g=gb(i,d)||{};return p?p(s):Tc(s,r,x=>{let b=kP(g,f,x);return x===b&&typeof x=="string"&&(b=kP(g,f,`${n}${x==="default"?"":Jt(x)}`,x)),l===!1?b:{[l]:b}})}function e(n){var r;const{sx:i,theme:o={}}=n||{};if(!i)return null;const s=(r=o.unstable_sxConfig)!=null?r:KM;function a(l){let d=l;if(typeof l=="function")d=l(o);else if(typeof l!="object")return l;if(!d)return null;const f=kte(o.breakpoints),p=Object.keys(f);let g=f;return Object.keys(d).forEach(v=>{const x=Axe(d[v],o);if(x!=null)if(typeof x=="object")if(s[v])g=AS(g,t(v,x,o,s));else{const b=Tc({theme:o},x,S=>({[v]:S}));Cxe(b,x)?g[v]=e({sx:x,theme:o}):g=AS(g,b)}else g=AS(g,t(v,x,o,s))}),Rte(p,g)}return Array.isArray(i)?i.map(a):a(i)}return e}const l1=Lte();l1.filterProps=["sx"];function Dte(t,e){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(t).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:n.palette.mode===t?e:{}}const Pxe=["breakpoints","palette","spacing","shape"];function c1(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:o={}}=t,s=on(t,Pxe),a=Ite(n),l=X_e(i);let d=za({breakpoints:a,direction:"ltr",components:{},palette:fe({mode:"light"},r),spacing:l,shape:fe({},B_e,o)},s);return d.applyStyles=Dte,d=e.reduce((f,p)=>za(f,p),d),d.unstable_sxConfig=fe({},KM,s==null?void 0:s.unstable_sxConfig),d.unstable_sx=function(p){return l1({sx:p,theme:this})},d}const Ixe=Object.freeze(Object.defineProperty({__proto__:null,default:c1,private_createBreakpoints:Ite,unstable_applyStyles:Dte},Symbol.toStringTag,{value:"Module"}));function kxe(t){return Object.keys(t).length===0}function Nte(t=null){const e=W.useContext(qM);return!e||kxe(e)?t:e}const Rxe=c1();function Gk(t=Rxe){return Nte(t)}function Oxe({styles:t,themeId:e,defaultTheme:n={}}){const r=Gk(n),i=typeof t=="function"?t(e&&r[e]||r):t;return F.jsx(Cte,{styles:i})}const Lxe=["sx"],Dxe=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:KM;return Object.keys(t).forEach(o=>{i[o]?r.systemProps[o]=t[o]:r.otherProps[o]=t[o]}),r};function ZM(t){const{sx:e}=t,n=on(t,Lxe),{systemProps:r,otherProps:i}=Dxe(n);let o;return Array.isArray(e)?o=[r,...e]:typeof e=="function"?o=(...s)=>{const a=e(...s);return zp(a)?fe({},r,a):r}:o=fe({},r,e),fe({},i,{sx:o})}const Nxe=Object.freeze(Object.defineProperty({__proto__:null,default:l1,extendSxProp:ZM,unstable_createStyleFunctionSx:Lte,unstable_defaultSxConfig:KM},Symbol.toStringTag,{value:"Module"})),PH=t=>t,zxe=()=>{let t=PH;return{configure(e){t=e},generate(e){return t(e)},reset(){t=PH}}},p$=zxe();function zte(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=zte(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function qt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=zte(t))&&(r&&(r+=" "),r+=e);return r}const Fxe=["className","component"];function Bxe(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,o=l$("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(l1);return W.forwardRef(function(l,d){const f=Gk(n),p=ZM(l),{className:g,component:v="div"}=p,x=on(p,Fxe);return F.jsx(o,fe({as:v,ref:d,className:qt(g,i?i(r):r),theme:e&&f[e]||f},x))})}const Fte={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function jn(t,e,n="Mui"){const r=Fte[e];return r?`${n}-${r}`:`${p$.generate(t)}-${e}`}function Un(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=jn(t,i,n)}),r}var Bte={exports:{}},$i={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m$=Symbol.for("react.element"),g$=Symbol.for("react.portal"),qk=Symbol.for("react.fragment"),Yk=Symbol.for("react.strict_mode"),Xk=Symbol.for("react.profiler"),Kk=Symbol.for("react.provider"),Zk=Symbol.for("react.context"),$xe=Symbol.for("react.server_context"),Jk=Symbol.for("react.forward_ref"),Qk=Symbol.for("react.suspense"),eR=Symbol.for("react.suspense_list"),tR=Symbol.for("react.memo"),nR=Symbol.for("react.lazy"),jxe=Symbol.for("react.offscreen"),$te;$te=Symbol.for("react.module.reference");function Ed(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case m$:switch(t=t.type,t){case qk:case Xk:case Yk:case Qk:case eR:return t;default:switch(t=t&&t.$$typeof,t){case $xe:case Zk:case Jk:case nR:case tR:case Kk:return t;default:return e}}case g$:return e}}}$i.ContextConsumer=Zk;$i.ContextProvider=Kk;$i.Element=m$;$i.ForwardRef=Jk;$i.Fragment=qk;$i.Lazy=nR;$i.Memo=tR;$i.Portal=g$;$i.Profiler=Xk;$i.StrictMode=Yk;$i.Suspense=Qk;$i.SuspenseList=eR;$i.isAsyncMode=function(){return!1};$i.isConcurrentMode=function(){return!1};$i.isContextConsumer=function(t){return Ed(t)===Zk};$i.isContextProvider=function(t){return Ed(t)===Kk};$i.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===m$};$i.isForwardRef=function(t){return Ed(t)===Jk};$i.isFragment=function(t){return Ed(t)===qk};$i.isLazy=function(t){return Ed(t)===nR};$i.isMemo=function(t){return Ed(t)===tR};$i.isPortal=function(t){return Ed(t)===g$};$i.isProfiler=function(t){return Ed(t)===Xk};$i.isStrictMode=function(t){return Ed(t)===Yk};$i.isSuspense=function(t){return Ed(t)===Qk};$i.isSuspenseList=function(t){return Ed(t)===eR};$i.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===qk||t===Xk||t===Yk||t===Qk||t===eR||t===jxe||typeof t=="object"&&t!==null&&(t.$$typeof===nR||t.$$typeof===tR||t.$$typeof===Kk||t.$$typeof===Zk||t.$$typeof===Jk||t.$$typeof===$te||t.getModuleId!==void 0)};$i.typeOf=Ed;Bte.exports=$i;var IH=Bte.exports;const Uxe=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function jte(t){const e=`${t}`.match(Uxe);return e&&e[1]||""}function Ute(t,e=""){return t.displayName||t.name||jte(t)||e}function kH(t,e,n){const r=Ute(e);return t.displayName||(r!==""?`${n}(${r})`:n)}function Vxe(t){if(t!=null){if(typeof t=="string")return t;if(typeof t=="function")return Ute(t,"Component");if(typeof t=="object")switch(t.$$typeof){case IH.ForwardRef:return kH(t,t.render,"ForwardRef");case IH.Memo:return kH(t,t.type,"memo");default:return}}}const Wxe=Object.freeze(Object.defineProperty({__proto__:null,default:Vxe,getFunctionName:jte},Symbol.toStringTag,{value:"Module"})),Hxe=["ownerState"],Gxe=["variants"],qxe=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Yxe(t){return Object.keys(t).length===0}function Xxe(t){return typeof t=="string"&&t.charCodeAt(0)>96}function _D(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const Kxe=c1(),Zxe=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function RT({defaultTheme:t,theme:e,themeId:n}){return Yxe(e)?t:e[n]||e}function Jxe(t){return t?(e,n)=>n[t]:null}function CA(t,e){let{ownerState:n}=e,r=on(e,Hxe);const i=typeof t=="function"?t(fe({ownerState:n},r)):t;if(Array.isArray(i))return i.flatMap(o=>CA(o,fe({ownerState:n},r)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:o=[]}=i;let a=on(i,Gxe);return o.forEach(l=>{let d=!0;typeof l.props=="function"?d=l.props(fe({ownerState:n},r,n)):Object.keys(l.props).forEach(f=>{(n==null?void 0:n[f])!==l.props[f]&&r[f]!==l.props[f]&&(d=!1)}),d&&(Array.isArray(a)||(a=[a]),a.push(typeof l.style=="function"?l.style(fe({ownerState:n},r,n)):l.style))}),a}return i}function Qxe(t={}){const{themeId:e,defaultTheme:n=Kxe,rootShouldForwardProp:r=_D,slotShouldForwardProp:i=_D}=t,o=s=>l1(fe({},s,{theme:RT(fe({},s,{defaultTheme:n,themeId:e}))}));return o.__mui_systemSx=!0,(s,a={})=>{Ate(s,O=>O.filter(D=>!(D!=null&&D.__mui_systemSx)));const{name:l,slot:d,skipVariantsResolver:f,skipSx:p,overridesResolver:g=Jxe(Zxe(d))}=a,v=on(a,qxe),x=f!==void 0?f:d&&d!=="Root"&&d!=="root"||!1,b=p||!1;let S,M=_D;d==="Root"||d==="root"?M=r:d?M=i:Xxe(s)&&(M=void 0);const T=l$(s,fe({shouldForwardProp:M,label:S},v)),C=O=>typeof O=="function"&&O.__emotion_real!==O||zp(O)?D=>CA(O,fe({},D,{theme:RT({theme:D.theme,defaultTheme:n,themeId:e})})):O,k=(O,...D)=>{let B=C(O);const U=D?D.map(C):[];l&&g&&U.push(X=>{const oe=RT(fe({},X,{defaultTheme:n,themeId:e}));if(!oe.components||!oe.components[l]||!oe.components[l].styleOverrides)return null;const pe=oe.components[l].styleOverrides,re={};return Object.entries(pe).forEach(([he,ue])=>{re[he]=CA(ue,fe({},X,{theme:oe}))}),g(X,re)}),l&&!x&&U.push(X=>{var oe;const pe=RT(fe({},X,{defaultTheme:n,themeId:e})),re=pe==null||(oe=pe.components)==null||(oe=oe[l])==null?void 0:oe.variants;return CA({variants:re},fe({},X,{theme:pe}))}),b||U.push(o);const J=U.length-D.length;if(Array.isArray(O)&&J>0){const X=new Array(J).fill("");B=[...O,...X],B.raw=[...O.raw,...X]}const V=T(B,...U);return s.muiName&&(V.muiName=s.muiName),V};return T.withConfig&&(k.withConfig=T.withConfig),k}}const Vte=Qxe();function y$(t,e){const n=fe({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=fe({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},o=e[r];n[r]={},!o||!Object.keys(o)?n[r]=i:!i||!Object.keys(i)?n[r]=o:(n[r]=fe({},o),Object.keys(i).forEach(s=>{n[r][s]=y$(i[s],o[s])}))}else n[r]===void 0&&(n[r]=t[r])}),n}function ebe(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:y$(e.components[n].defaultProps,r)}function v$({props:t,name:e,defaultTheme:n,themeId:r}){let i=Gk(n);return r&&(i=i[r]||i),ebe({theme:i,name:e,props:t})}const tbe=typeof window<"u"?W.useLayoutEffect:W.useEffect,mu=tbe;function nbe(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}const rbe=Object.freeze(Object.defineProperty({__proto__:null,default:nbe},Symbol.toStringTag,{value:"Module"}));function Jz(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function JM(t,e=166){let n;function r(...i){const o=()=>{t.apply(this,i)};clearTimeout(n),n=setTimeout(o,e)}return r.clear=()=>{clearTimeout(n)},r}function ibe(t,e){return()=>null}function AA(t,e){var n,r;return W.isValidElement(t)&&e.indexOf((n=t.type.muiName)!=null?n:(r=t.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function As(t){return t&&t.ownerDocument||document}function Lf(t){return As(t).defaultView||window}function obe(t,e){return()=>null}function RP(t,e){typeof t=="function"?t(e):t&&(t.current=e)}let RH=0;function sbe(t){const[e,n]=W.useState(t),r=t||e;return W.useEffect(()=>{e==null&&(RH+=1,n(`mui-${RH}`))},[e]),r}const OH=ob.useId;function rR(t){if(OH!==void 0){const e=OH();return t??e}return sbe(t)}function abe(t,e,n,r,i){return null}function yb({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=W.useRef(t!==void 0),[o,s]=W.useState(e),a=i?t:o,l=W.useCallback(d=>{i||s(d)},[]);return[a,l]}function jl(t){const e=W.useRef(t);return mu(()=>{e.current=t}),W.useRef((...n)=>(0,e.current)(...n)).current}function Ao(...t){return W.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{RP(n,e)})},t)}const LH={};function lbe(t,e){const n=W.useRef(LH);return n.current===LH&&(n.current=t(e)),n}const cbe=[];function ube(t){W.useEffect(t,cbe)}class QM{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new QM}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function jg(){const t=lbe(QM.create).current;return ube(t.disposeEffect),t}let iR=!0,Qz=!1;const dbe=new QM,hbe={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function fbe(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&hbe[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function pbe(t){t.metaKey||t.altKey||t.ctrlKey||(iR=!0)}function xD(){iR=!1}function mbe(){this.visibilityState==="hidden"&&Qz&&(iR=!0)}function gbe(t){t.addEventListener("keydown",pbe,!0),t.addEventListener("mousedown",xD,!0),t.addEventListener("pointerdown",xD,!0),t.addEventListener("touchstart",xD,!0),t.addEventListener("visibilitychange",mbe,!0)}function ybe(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return iR||fbe(e)}function oR(){const t=W.useCallback(i=>{i!=null&&gbe(i.ownerDocument)},[]),e=W.useRef(!1);function n(){return e.current?(Qz=!0,dbe.start(100,()=>{Qz=!1}),e.current=!1,!0):!1}function r(i){return ybe(i)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}function Wte(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}let b_;function Hte(){if(b_)return b_;const t=document.createElement("div"),e=document.createElement("div");return e.style.width="10px",e.style.height="1px",t.appendChild(e),t.dir="rtl",t.style.fontSize="14px",t.style.width="4px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.overflow="scroll",document.body.appendChild(t),b_="reverse",t.scrollLeft>0?b_="default":(t.scrollLeft=1,t.scrollLeft===0&&(b_="negative")),document.body.removeChild(t),b_}function vbe(t,e){const n=t.scrollLeft;if(e!=="rtl")return n;switch(Hte()){case"negative":return t.scrollWidth-t.clientWidth+n;case"reverse":return t.scrollWidth-t.clientWidth-n;default:return n}}const Gte=t=>{const e=W.useRef({});return W.useEffect(()=>{e.current=t}),e.current};function _be(t){return W.Children.toArray(t).filter(e=>W.isValidElement(e))}function Vn(t,e,n=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((o,s)=>{if(s){const a=e(s);a!==""&&o.push(a),n&&n[s]&&o.push(n[s])}return o},[]).join(" ")}),r}const xbe=W.createContext(null),qte=xbe;function _$(){return W.useContext(qte)}const bbe=typeof Symbol=="function"&&Symbol.for,Yte=bbe?Symbol.for("mui.nested"):"__THEME_NESTED__";function wbe(t,e){return typeof e=="function"?e(t):fe({},t,e)}function Sbe(t){const{children:e,theme:n}=t,r=_$(),i=W.useMemo(()=>{const o=r===null?n:wbe(r,n);return o!=null&&(o[Yte]=r!==null),o},[n,r]);return F.jsx(qte.Provider,{value:i,children:e})}const Mbe=["value"],Xte=W.createContext();function Ebe(t){let{value:e}=t,n=on(t,Mbe);return F.jsx(Xte.Provider,fe({value:e??!0},n))}const eE=()=>{const t=W.useContext(Xte);return t??!1},DH={};function NH(t,e,n,r=!1){return W.useMemo(()=>{const i=t&&e[t]||e;if(typeof n=="function"){const o=n(i),s=t?fe({},e,{[t]:o}):o;return r?()=>s:s}return t?fe({},e,{[t]:n}):fe({},e,n)},[t,e,n,r])}function Tbe(t){const{children:e,theme:n,themeId:r}=t,i=Nte(DH),o=_$()||DH,s=NH(r,i,n),a=NH(r,o,n,!0),l=s.direction==="rtl";return F.jsx(Sbe,{theme:a,children:F.jsx(qM.Provider,{value:s,children:F.jsx(Ebe,{value:l,children:e})})})}function x2(t){"@babel/helpers - typeof";return x2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x2(t)}function Cbe(t,e){if(x2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(x2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Abe(t){var e=Cbe(t,"string");return x2(e)=="symbol"?e:e+""}const Pbe=["className","component","disableGutters","fixed","maxWidth","classes"],Ibe=c1(),kbe=Vte("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${Jt(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),Rbe=t=>v$({props:t,name:"MuiContainer",defaultTheme:Ibe}),Obe=(t,e)=>{const n=l=>jn(e,l),{classes:r,fixed:i,disableGutters:o,maxWidth:s}=t,a={root:["root",s&&`maxWidth${Jt(String(s))}`,i&&"fixed",o&&"disableGutters"]};return Vn(a,n,r)};function Lbe(t={}){const{createStyledComponent:e=kbe,useThemeProps:n=Rbe,componentName:r="MuiContainer"}=t,i=e(({theme:s,ownerState:a})=>fe({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!a.disableGutters&&{paddingLeft:s.spacing(2),paddingRight:s.spacing(2),[s.breakpoints.up("sm")]:{paddingLeft:s.spacing(3),paddingRight:s.spacing(3)}}),({theme:s,ownerState:a})=>a.fixed&&Object.keys(s.breakpoints.values).reduce((l,d)=>{const f=d,p=s.breakpoints.values[f];return p!==0&&(l[s.breakpoints.up(f)]={maxWidth:`${p}${s.breakpoints.unit}`}),l},{}),({theme:s,ownerState:a})=>fe({},a.maxWidth==="xs"&&{[s.breakpoints.up("xs")]:{maxWidth:Math.max(s.breakpoints.values.xs,444)}},a.maxWidth&&a.maxWidth!=="xs"&&{[s.breakpoints.up(a.maxWidth)]:{maxWidth:`${s.breakpoints.values[a.maxWidth]}${s.breakpoints.unit}`}}));return W.forwardRef(function(a,l){const d=n(a),{className:f,component:p="div",disableGutters:g=!1,fixed:v=!1,maxWidth:x="lg"}=d,b=on(d,Pbe),S=fe({},d,{component:p,disableGutters:g,fixed:v,maxWidth:x}),M=Obe(S,r);return F.jsx(i,fe({as:p,ownerState:S,className:qt(M.root,f),ref:l},b))})}const Dbe=["component","direction","spacing","divider","children","className","useFlexGap"],Nbe=c1(),zbe=Vte("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root});function Fbe(t){return v$({props:t,name:"MuiStack",defaultTheme:Nbe})}function Bbe(t,e){const n=W.Children.toArray(t).filter(Boolean);return n.reduce((r,i,o)=>(r.push(i),o<n.length-1&&r.push(W.cloneElement(e,{key:`separator-${o}`})),r),[])}const $be=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],jbe=({ownerState:t,theme:e})=>{let n=fe({display:"flex",flexDirection:"column"},Tc({theme:e},r0({values:t.direction,breakpoints:e.breakpoints.values}),r=>({flexDirection:r})));if(t.spacing){const r=h$(e),i=Object.keys(e.breakpoints.values).reduce((l,d)=>((typeof t.spacing=="object"&&t.spacing[d]!=null||typeof t.direction=="object"&&t.direction[d]!=null)&&(l[d]=!0),l),{}),o=r0({values:t.direction,base:i}),s=r0({values:t.spacing,base:i});typeof o=="object"&&Object.keys(o).forEach((l,d,f)=>{if(!o[l]){const g=d>0?o[f[d-1]]:"column";o[l]=g}}),n=za(n,Tc({theme:e},s,(l,d)=>t.useFlexGap?{gap:S0(r,l)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${$be(d?o[d]:t.direction)}`]:S0(r,l)}}))}return n=$_e(e.breakpoints,n),n};function Ube(t={}){const{createStyledComponent:e=zbe,useThemeProps:n=Fbe,componentName:r="MuiStack"}=t,i=()=>Vn({root:["root"]},l=>jn(r,l),{}),o=e(jbe);return W.forwardRef(function(l,d){const f=n(l),p=ZM(f),{component:g="div",direction:v="column",spacing:x=0,divider:b,children:S,className:M,useFlexGap:T=!1}=p,C=on(p,Dbe),k={direction:v,spacing:x,useFlexGap:T},O=i();return F.jsx(o,fe({as:g,ownerState:k,ref:d,className:qt(O.root,M)},C,{children:b?Bbe(S,b):S}))})}function Vbe(t,e){return fe({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}var ms={},Kte={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Kte);var oi=Kte.exports;const Wbe=Bf(A0e),Hbe=Bf(rbe);var Zte=oi;Object.defineProperty(ms,"__esModule",{value:!0});var Yi=ms.alpha=tne;ms.blend=r1e;ms.colorChannel=void 0;var vb=ms.darken=b$;ms.decomposeColor=_d;var Gbe=ms.emphasize=n1e,qbe=ms.getContrastRatio=Jbe;ms.getLuminance=OP;ms.hexToRgb=Jte;ms.hslToRgb=ene;var _b=ms.lighten=w$;ms.private_safeAlpha=Qbe;ms.private_safeColorChannel=void 0;ms.private_safeDarken=e1e;ms.private_safeEmphasize=nne;ms.private_safeLighten=t1e;ms.recomposeColor=u1;ms.rgbToHex=Zbe;var zH=Zte(Wbe),Ybe=Zte(Hbe);function x$(t,e=0,n=1){return(0,Ybe.default)(t,e,n)}function Jte(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Xbe(t){const e=t.toString(16);return e.length===1?`0${e}`:e}function _d(t){if(t.type)return t;if(t.charAt(0)==="#")return _d(Jte(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error((0,zH.default)(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error((0,zH.default)(10,i))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:n,values:r,colorSpace:i}}const Qte=t=>{const e=_d(t);return e.values.slice(0,3).map((n,r)=>e.type.indexOf("hsl")!==-1&&r!==0?`${n}%`:n).join(" ")};ms.colorChannel=Qte;const Kbe=(t,e)=>{try{return Qte(t)}catch{return t}};ms.private_safeColorChannel=Kbe;function u1(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,o)=>o<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function Zbe(t){if(t.indexOf("#")===0)return t;const{values:e}=_d(t);return`#${e.map((n,r)=>Xbe(r===3?Math.round(255*n):n)).join("")}`}function ene(t){t=_d(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,o=r*Math.min(i,1-i),s=(d,f=(d+n/30)%12)=>i-o*Math.max(Math.min(f-3,9-f,1),-1);let a="rgb";const l=[Math.round(s(0)*255),Math.round(s(8)*255),Math.round(s(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),u1({type:a,values:l})}function OP(t){t=_d(t);let e=t.type==="hsl"||t.type==="hsla"?_d(ene(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Jbe(t,e){const n=OP(t),r=OP(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function tne(t,e){return t=_d(t),e=x$(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,u1(t)}function Qbe(t,e,n){try{return tne(t,e)}catch{return t}}function b$(t,e){if(t=_d(t),e=x$(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return u1(t)}function e1e(t,e,n){try{return b$(t,e)}catch{return t}}function w$(t,e){if(t=_d(t),e=x$(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return u1(t)}function t1e(t,e,n){try{return w$(t,e)}catch{return t}}function n1e(t,e=.15){return OP(t)>.5?b$(t,e):w$(t,e)}function nne(t,e,n){try{return nne(t,e)}catch{return t}}function r1e(t,e,n,r=1){const i=(l,d)=>Math.round((l**(1/r)*(1-n)+d**(1/r)*n)**r),o=_d(t),s=_d(e),a=[i(o.values[0],s.values[0]),i(o.values[1],s.values[1]),i(o.values[2],s.values[2])];return u1({type:"rgb",values:a})}const i1e=["mode","contrastThreshold","tonalOffset"],FH={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:x0.white,default:x0.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},bD={text:{primary:x0.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:x0.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function BH(t,e,n,r){const i=r.light||r,o=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=_b(t.main,i):e==="dark"&&(t.dark=vb(t.main,o)))}function o1e(t="light"){return t==="dark"?{main:__[200],light:__[50],dark:__[400]}:{main:__[700],light:__[400],dark:__[800]}}function s1e(t="light"){return t==="dark"?{main:v_[200],light:v_[50],dark:v_[400]}:{main:v_[500],light:v_[300],dark:v_[700]}}function a1e(t="light"){return t==="dark"?{main:Np[500],light:Np[300],dark:Np[700]}:{main:Np[700],light:Np[400],dark:Np[800]}}function l1e(t="light"){return t==="dark"?{main:x_[400],light:x_[300],dark:x_[700]}:{main:x_[700],light:x_[500],dark:x_[900]}}function c1e(t="light"){return t==="dark"?{main:gh[400],light:gh[300],dark:gh[700]}:{main:gh[800],light:gh[500],dark:gh[900]}}function u1e(t="light"){return t==="dark"?{main:vw[400],light:vw[300],dark:vw[700]}:{main:"#ed6c02",light:vw[500],dark:vw[900]}}function d1e(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=on(t,i1e),o=t.primary||o1e(e),s=t.secondary||s1e(e),a=t.error||a1e(e),l=t.info||l1e(e),d=t.success||c1e(e),f=t.warning||u1e(e);function p(b){return qbe(b,bD.text.primary)>=n?bD.text.primary:FH.text.primary}const g=({color:b,name:S,mainShade:M=500,lightShade:T=300,darkShade:C=700})=>{if(b=fe({},b),!b.main&&b[M]&&(b.main=b[M]),!b.hasOwnProperty("main"))throw new Error(b0(11,S?` (${S})`:"",M));if(typeof b.main!="string")throw new Error(b0(12,S?` (${S})`:"",JSON.stringify(b.main)));return BH(b,"light",T,r),BH(b,"dark",C,r),b.contrastText||(b.contrastText=p(b.main)),b},v={dark:bD,light:FH};return za(fe({common:fe({},x0),mode:e,primary:g({color:o,name:"primary"}),secondary:g({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:g({color:a,name:"error"}),warning:g({color:f,name:"warning"}),info:g({color:l,name:"info"}),success:g({color:d,name:"success"}),grey:Ef,contrastThreshold:n,getContrastText:p,augmentColor:g,tonalOffset:r},v[e]),i)}const h1e=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function f1e(t){return Math.round(t*1e5)/1e5}const $H={textTransform:"uppercase"},jH='"Roboto", "Helvetica", "Arial", sans-serif';function p1e(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=jH,fontSize:i=14,fontWeightLight:o=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:d=16,allVariants:f,pxToRem:p}=n,g=on(n,h1e),v=i/14,x=p||(M=>`${M/d*v}rem`),b=(M,T,C,k,O)=>fe({fontFamily:r,fontWeight:M,fontSize:x(T),lineHeight:C},r===jH?{letterSpacing:`${f1e(k/T)}em`}:{},O,f),S={h1:b(o,96,1.167,-1.5),h2:b(o,60,1.2,-.5),h3:b(s,48,1.167,0),h4:b(s,34,1.235,.25),h5:b(s,24,1.334,0),h6:b(a,20,1.6,.15),subtitle1:b(s,16,1.75,.15),subtitle2:b(a,14,1.57,.1),body1:b(s,16,1.5,.15),body2:b(s,14,1.43,.15),button:b(a,14,1.75,.4,$H),caption:b(s,12,1.66,.4),overline:b(s,12,2.66,1,$H),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return za(fe({htmlFontSize:d,pxToRem:x,fontFamily:r,fontSize:i,fontWeightLight:o,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:l},S),g,{clone:!1})}const m1e=.2,g1e=.14,y1e=.12;function So(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${m1e})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${g1e})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${y1e})`].join(",")}const v1e=["none",So(0,2,1,-1,0,1,1,0,0,1,3,0),So(0,3,1,-2,0,2,2,0,0,1,5,0),So(0,3,3,-2,0,3,4,0,0,1,8,0),So(0,2,4,-1,0,4,5,0,0,1,10,0),So(0,3,5,-1,0,5,8,0,0,1,14,0),So(0,3,5,-1,0,6,10,0,0,1,18,0),So(0,4,5,-2,0,7,10,1,0,2,16,1),So(0,5,5,-3,0,8,10,1,0,3,14,2),So(0,5,6,-3,0,9,12,1,0,3,16,2),So(0,6,6,-3,0,10,14,1,0,4,18,3),So(0,6,7,-4,0,11,15,1,0,4,20,3),So(0,7,8,-4,0,12,17,2,0,5,22,4),So(0,7,8,-4,0,13,19,2,0,5,24,4),So(0,7,9,-4,0,14,21,2,0,5,26,4),So(0,8,9,-5,0,15,22,2,0,6,28,5),So(0,8,10,-5,0,16,24,2,0,6,30,5),So(0,8,11,-5,0,17,26,2,0,6,32,5),So(0,9,11,-5,0,18,28,2,0,7,34,6),So(0,9,12,-6,0,19,29,2,0,7,36,6),So(0,10,13,-6,0,20,31,3,0,8,38,7),So(0,10,13,-6,0,21,33,3,0,8,40,7),So(0,10,14,-6,0,22,35,3,0,8,42,7),So(0,11,14,-7,0,23,36,3,0,9,44,8),So(0,11,15,-7,0,24,38,3,0,9,46,8)],_1e=["duration","easing","delay"],x1e={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},rne={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function UH(t){return`${Math.round(t)}ms`}function b1e(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function w1e(t){const e=fe({},x1e,t.easing),n=fe({},rne,t.duration);return fe({getAutoHeightDuration:b1e,create:(i=["all"],o={})=>{const{duration:s=n.standard,easing:a=e.easeInOut,delay:l=0}=o;return on(o,_1e),(Array.isArray(i)?i:[i]).map(d=>`${d} ${typeof s=="string"?s:UH(s)} ${a} ${typeof l=="string"?l:UH(l)}`).join(",")}},t,{easing:e,duration:n})}const S1e={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},M1e=S1e,E1e=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function S$(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:o={}}=t,s=on(t,E1e);if(t.vars)throw new Error(b0(18));const a=d1e(r),l=c1(t);let d=za(l,{mixins:Vbe(l.breakpoints,n),palette:a,shadows:v1e.slice(),typography:p1e(a,o),transitions:w1e(i),zIndex:fe({},M1e)});return d=za(d,s),d=e.reduce((f,p)=>za(f,p),d),d.unstable_sxConfig=fe({},KM,s==null?void 0:s.unstable_sxConfig),d.unstable_sx=function(p){return l1({sx:p,theme:this})},d}const T1e=S$(),sR=T1e;function wm(){const t=Gk(sR);return t[w0]||t}function er({props:t,name:e}){return v$({props:t,name:e,defaultTheme:sR,themeId:w0})}var tE={},wD={exports:{}},VH;function C1e(){return VH||(VH=1,function(t){function e(n,r){if(n==null)return{};var i={},o=Object.keys(n),s,a;for(a=0;a<o.length;a++)s=o[a],!(r.indexOf(s)>=0)&&(i[s]=n[s]);return i}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(wD)),wD.exports}const ine=Bf(L_e),A1e=Bf(D_e),P1e=Bf(U_e),I1e=Bf(Wxe),k1e=Bf(Ixe),R1e=Bf(Nxe);var d1=oi;Object.defineProperty(tE,"__esModule",{value:!0});var O1e=tE.default=G1e;tE.shouldForwardProp=PA;tE.systemDefaultTheme=void 0;var Qu=d1(wte()),eF=d1(C1e()),WH=$1e(ine),L1e=A1e;d1(P1e);d1(I1e);var D1e=d1(k1e),N1e=d1(R1e);const z1e=["ownerState"],F1e=["variants"],B1e=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function one(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(one=function(r){return r?n:e})(t)}function $1e(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=one(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}function j1e(t){return Object.keys(t).length===0}function U1e(t){return typeof t=="string"&&t.charCodeAt(0)>96}function PA(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const V1e=tE.systemDefaultTheme=(0,D1e.default)(),W1e=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function OT({defaultTheme:t,theme:e,themeId:n}){return j1e(e)?t:e[n]||e}function H1e(t){return t?(e,n)=>n[t]:null}function IA(t,e){let{ownerState:n}=e,r=(0,eF.default)(e,z1e);const i=typeof t=="function"?t((0,Qu.default)({ownerState:n},r)):t;if(Array.isArray(i))return i.flatMap(o=>IA(o,(0,Qu.default)({ownerState:n},r)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:o=[]}=i;let a=(0,eF.default)(i,F1e);return o.forEach(l=>{let d=!0;typeof l.props=="function"?d=l.props((0,Qu.default)({ownerState:n},r,n)):Object.keys(l.props).forEach(f=>{(n==null?void 0:n[f])!==l.props[f]&&r[f]!==l.props[f]&&(d=!1)}),d&&(Array.isArray(a)||(a=[a]),a.push(typeof l.style=="function"?l.style((0,Qu.default)({ownerState:n},r,n)):l.style))}),a}return i}function G1e(t={}){const{themeId:e,defaultTheme:n=V1e,rootShouldForwardProp:r=PA,slotShouldForwardProp:i=PA}=t,o=s=>(0,N1e.default)((0,Qu.default)({},s,{theme:OT((0,Qu.default)({},s,{defaultTheme:n,themeId:e}))}));return o.__mui_systemSx=!0,(s,a={})=>{(0,WH.internal_processStyles)(s,O=>O.filter(D=>!(D!=null&&D.__mui_systemSx)));const{name:l,slot:d,skipVariantsResolver:f,skipSx:p,overridesResolver:g=H1e(W1e(d))}=a,v=(0,eF.default)(a,B1e),x=f!==void 0?f:d&&d!=="Root"&&d!=="root"||!1,b=p||!1;let S,M=PA;d==="Root"||d==="root"?M=r:d?M=i:U1e(s)&&(M=void 0);const T=(0,WH.default)(s,(0,Qu.default)({shouldForwardProp:M,label:S},v)),C=O=>typeof O=="function"&&O.__emotion_real!==O||(0,L1e.isPlainObject)(O)?D=>IA(O,(0,Qu.default)({},D,{theme:OT({theme:D.theme,defaultTheme:n,themeId:e})})):O,k=(O,...D)=>{let B=C(O);const U=D?D.map(C):[];l&&g&&U.push(X=>{const oe=OT((0,Qu.default)({},X,{defaultTheme:n,themeId:e}));if(!oe.components||!oe.components[l]||!oe.components[l].styleOverrides)return null;const pe=oe.components[l].styleOverrides,re={};return Object.entries(pe).forEach(([he,ue])=>{re[he]=IA(ue,(0,Qu.default)({},X,{theme:oe}))}),g(X,re)}),l&&!x&&U.push(X=>{var oe;const pe=OT((0,Qu.default)({},X,{defaultTheme:n,themeId:e})),re=pe==null||(oe=pe.components)==null||(oe=oe[l])==null?void 0:oe.variants;return IA({variants:re},(0,Qu.default)({},X,{theme:pe}))}),b||U.push(o);const J=U.length-D.length;if(Array.isArray(O)&&J>0){const X=new Array(J).fill("");B=[...O,...X],B.raw=[...O.raw,...X]}const V=T(B,...U);return s.muiName&&(V.muiName=s.muiName),V};return T.withConfig&&(k.withConfig=T.withConfig),k}}function sne(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const q1e=t=>sne(t)&&t!=="classes",Xl=q1e,Qt=O1e({themeId:w0,defaultTheme:sR,rootShouldForwardProp:Xl}),Y1e=["theme"];function X1e(t){let{theme:e}=t,n=on(t,Y1e);const r=e[w0];return F.jsx(Tbe,fe({},n,{themeId:r?w0:void 0,theme:r||e}))}const HH=t=>{let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,(e/100).toFixed(2)};function K1e(t){return jn("MuiSvgIcon",t)}Un("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Z1e=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],J1e=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${Jt(e)}`,`fontSize${Jt(n)}`]};return Vn(i,K1e,r)},Q1e=Qt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${Jt(n.color)}`],e[`fontSize${Jt(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var n,r,i,o,s,a,l,d,f,p,g,v,x;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=t.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(i=t.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((o=t.typography)==null||(s=o.pxToRem)==null?void 0:s.call(o,20))||"1.25rem",medium:((a=t.typography)==null||(l=a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem",large:((d=t.typography)==null||(f=d.pxToRem)==null?void 0:f.call(d,35))||"2.1875rem"}[e.fontSize],color:(p=(g=(t.vars||t).palette)==null||(g=g[e.color])==null?void 0:g.main)!=null?p:{action:(v=(t.vars||t).palette)==null||(v=v.action)==null?void 0:v.active,disabled:(x=(t.vars||t).palette)==null||(x=x.action)==null?void 0:x.disabled,inherit:void 0}[e.color]}}),tF=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiSvgIcon"}),{children:i,className:o,color:s="inherit",component:a="svg",fontSize:l="medium",htmlColor:d,inheritViewBox:f=!1,titleAccess:p,viewBox:g="0 0 24 24"}=r,v=on(r,Z1e),x=W.isValidElement(i)&&i.type==="svg",b=fe({},r,{color:s,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:f,viewBox:g,hasSvgAsChild:x}),S={};f||(S.viewBox=g);const M=J1e(b);return F.jsxs(Q1e,fe({as:a,className:qt(M.root,o),focusable:"false",color:d,"aria-hidden":p?void 0:!0,role:p?"img":void 0,ref:n},S,v,x&&i.props,{ownerState:b,children:[x?i.props.children:i,p?F.jsx("title",{children:p}):null]}))});tF.muiName="SvgIcon";function Ba(t,e){function n(r,i){return F.jsx(tF,fe({"data-testid":`${e}Icon`,ref:i},r,{children:t}))}return n.muiName=tF.muiName,W.memo(W.forwardRef(n))}const ewe={configure:t=>{p$.configure(t)}},twe=Object.freeze(Object.defineProperty({__proto__:null,capitalize:Jt,createChainedFunction:Jz,createSvgIcon:Ba,debounce:JM,deprecatedPropType:ibe,isMuiElement:AA,ownerDocument:As,ownerWindow:Lf,requirePropFactory:obe,setRef:RP,unstable_ClassNameGenerator:ewe,unstable_useEnhancedEffect:mu,unstable_useId:rR,unsupportedProp:abe,useControlled:yb,useEventCallback:jl,useForkRef:Ao,useIsFocusVisible:oR},Symbol.toStringTag,{value:"Module"}));function N0(t){return er}function nF(t,e){return nF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},nF(t,e)}function nE(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,nF(t,e)}const GH={disabled:!1},LP=Ze.createContext(null);var nwe=function(e){return e.scrollTop},dS="unmounted",Ev="exited",Tv="entering",ox="entered",rF="exiting",Sm=function(t){nE(e,t);function e(r,i){var o;o=t.call(this,r,i)||this;var s=i,a=s&&!s.isMounting?r.enter:r.appear,l;return o.appearStatus=null,r.in?a?(l=Ev,o.appearStatus=Tv):l=ox:r.unmountOnExit||r.mountOnEnter?l=dS:l=Ev,o.state={status:l},o.nextCallback=null,o}e.getDerivedStateFromProps=function(i,o){var s=i.in;return s&&o.status===dS?{status:Ev}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var o=null;if(i!==this.props){var s=this.state.status;this.props.in?s!==Tv&&s!==ox&&(o=Tv):(s===Tv||s===ox)&&(o=rF)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,o,s,a;return o=s=a=i,i!=null&&typeof i!="number"&&(o=i.exit,s=i.enter,a=i.appear!==void 0?i.appear:s),{exit:o,enter:s,appear:a}},n.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===Tv){if(this.props.unmountOnExit||this.props.mountOnEnter){var s=this.props.nodeRef?this.props.nodeRef.current:CT.findDOMNode(this);s&&nwe(s)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ev&&this.setState({status:dS})},n.performEnter=function(i){var o=this,s=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[CT.findDOMNode(this),a],d=l[0],f=l[1],p=this.getTimeouts(),g=a?p.appear:p.enter;if(!i&&!s||GH.disabled){this.safeSetState({status:ox},function(){o.props.onEntered(d)});return}this.props.onEnter(d,f),this.safeSetState({status:Tv},function(){o.props.onEntering(d,f),o.onTransitionEnd(g,function(){o.safeSetState({status:ox},function(){o.props.onEntered(d,f)})})})},n.performExit=function(){var i=this,o=this.props.exit,s=this.getTimeouts(),a=this.props.nodeRef?void 0:CT.findDOMNode(this);if(!o||GH.disabled){this.safeSetState({status:Ev},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:rF},function(){i.props.onExiting(a),i.onTransitionEnd(s.exit,function(){i.safeSetState({status:Ev},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},n.setNextCallback=function(i){var o=this,s=!0;return this.nextCallback=function(a){s&&(s=!1,o.nextCallback=null,i(a))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},n.onTransitionEnd=function(i,o){this.setNextCallback(o);var s=this.props.nodeRef?this.props.nodeRef.current:CT.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!s||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],d=l[0],f=l[1];this.props.addEndListener(d,f)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===dS)return null;var o=this.props,s=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var a=on(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ze.createElement(LP.Provider,{value:null},typeof s=="function"?s(i,a):Ze.cloneElement(Ze.Children.only(s),a))},e}(Ze.Component);Sm.contextType=LP;Sm.propTypes={};function w_(){}Sm.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:w_,onEntering:w_,onEntered:w_,onExit:w_,onExiting:w_,onExited:w_};Sm.UNMOUNTED=dS;Sm.EXITED=Ev;Sm.ENTERING=Tv;Sm.ENTERED=ox;Sm.EXITING=rF;const M$=Sm;function b2(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E$(t,e){var n=function(o){return e&&W.isValidElement(o)?e(o):o},r=Object.create(null);return t&&W.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function rwe(t,e){t=t||{},e=e||{};function n(f){return f in e?e[f]:t[f]}var r=Object.create(null),i=[];for(var o in t)o in e?i.length&&(r[o]=i,i=[]):i.push(o);var s,a={};for(var l in e){if(r[l])for(s=0;s<r[l].length;s++){var d=r[l][s];a[r[l][s]]=n(d)}a[l]=n(l)}for(s=0;s<i.length;s++)a[i[s]]=n(i[s]);return a}function $v(t,e,n){return n[e]!=null?n[e]:t.props[e]}function iwe(t,e){return E$(t.children,function(n){return W.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:$v(n,"appear",t),enter:$v(n,"enter",t),exit:$v(n,"exit",t)})})}function owe(t,e,n){var r=E$(t.children),i=rwe(e,r);return Object.keys(i).forEach(function(o){var s=i[o];if(W.isValidElement(s)){var a=o in e,l=o in r,d=e[o],f=W.isValidElement(d)&&!d.props.in;l&&(!a||f)?i[o]=W.cloneElement(s,{onExited:n.bind(null,s),in:!0,exit:$v(s,"exit",t),enter:$v(s,"enter",t)}):!l&&a&&!f?i[o]=W.cloneElement(s,{in:!1}):l&&a&&W.isValidElement(d)&&(i[o]=W.cloneElement(s,{onExited:n.bind(null,s),in:d.props.in,exit:$v(s,"exit",t),enter:$v(s,"enter",t)}))}}),i}var swe=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},awe={component:"div",childFactory:function(e){return e}},T$=function(t){nE(e,t);function e(r,i){var o;o=t.call(this,r,i)||this;var s=o.handleExited.bind(b2(o));return o.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},o}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,o){var s=o.children,a=o.handleExited,l=o.firstRender;return{children:l?iwe(i,a):owe(i,s,a),firstRender:!1}},n.handleExited=function(i,o){var s=E$(this.props.children);i.key in s||(i.props.onExited&&i.props.onExited(o),this.mounted&&this.setState(function(a){var l=fe({},a.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,o=i.component,s=i.childFactory,a=on(i,["component","childFactory"]),l=this.state.contextValue,d=swe(this.state.children).map(s);return delete a.appear,delete a.enter,delete a.exit,o===null?Ze.createElement(LP.Provider,{value:l},d):Ze.createElement(LP.Provider,{value:l},Ze.createElement(o,a,d))},e}(Ze.Component);T$.propTypes={};T$.defaultProps=awe;const lwe=T$,ane=t=>t.scrollTop;function xb(t,e){var n,r;const{timeout:i,easing:o,style:s={}}=t;return{duration:(n=s.transitionDuration)!=null?n:typeof i=="number"?i:i[e.mode]||0,easing:(r=s.transitionTimingFunction)!=null?r:typeof o=="object"?o[e.mode]:o,delay:s.transitionDelay}}function cwe(t){return jn("MuiCollapse",t)}Un("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const uwe=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],dwe=t=>{const{orientation:e,classes:n}=t,r={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return Vn(r,cwe,n)},hwe=Qt("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.state==="entered"&&e.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&e.hidden]}})(({theme:t,ownerState:e})=>fe({height:0,overflow:"hidden",transition:t.transitions.create("height")},e.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},e.state==="entered"&&fe({height:"auto",overflow:"visible"},e.orientation==="horizontal"&&{width:"auto"}),e.state==="exited"&&!e.in&&e.collapsedSize==="0px"&&{visibility:"hidden"})),fwe=Qt("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,e)=>e.wrapper})(({ownerState:t})=>fe({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),pwe=Qt("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,e)=>e.wrapperInner})(({ownerState:t})=>fe({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),lne=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiCollapse"}),{addEndListener:i,children:o,className:s,collapsedSize:a="0px",component:l,easing:d,in:f,onEnter:p,onEntered:g,onEntering:v,onExit:x,onExited:b,onExiting:S,orientation:M="vertical",style:T,timeout:C=rne.standard,TransitionComponent:k=M$}=r,O=on(r,uwe),D=fe({},r,{orientation:M,collapsedSize:a}),B=dwe(D),U=wm(),J=jg(),V=W.useRef(null),X=W.useRef(),oe=typeof a=="number"?`${a}px`:a,pe=M==="horizontal",re=pe?"width":"height",he=W.useRef(null),ue=Ao(n,he),be=lt=>Rt=>{if(lt){const Lt=he.current;Rt===void 0?lt(Lt):lt(Lt,Rt)}},ie=()=>V.current?V.current[pe?"clientWidth":"clientHeight"]:0,ve=be((lt,Rt)=>{V.current&&pe&&(V.current.style.position="absolute"),lt.style[re]=oe,p&&p(lt,Rt)}),Ee=be((lt,Rt)=>{const Lt=ie();V.current&&pe&&(V.current.style.position="");const{duration:Fe,easing:at}=xb({style:T,timeout:C,easing:d},{mode:"enter"});if(C==="auto"){const nt=U.transitions.getAutoHeightDuration(Lt);lt.style.transitionDuration=`${nt}ms`,X.current=nt}else lt.style.transitionDuration=typeof Fe=="string"?Fe:`${Fe}ms`;lt.style[re]=`${Lt}px`,lt.style.transitionTimingFunction=at,v&&v(lt,Rt)}),Ne=be((lt,Rt)=>{lt.style[re]="auto",g&&g(lt,Rt)}),Ge=be(lt=>{lt.style[re]=`${ie()}px`,x&&x(lt)}),dt=be(b),Ue=be(lt=>{const Rt=ie(),{duration:Lt,easing:Fe}=xb({style:T,timeout:C,easing:d},{mode:"exit"});if(C==="auto"){const at=U.transitions.getAutoHeightDuration(Rt);lt.style.transitionDuration=`${at}ms`,X.current=at}else lt.style.transitionDuration=typeof Lt=="string"?Lt:`${Lt}ms`;lt.style[re]=oe,lt.style.transitionTimingFunction=Fe,S&&S(lt)}),st=lt=>{C==="auto"&&J.start(X.current||0,lt),i&&i(he.current,lt)};return F.jsx(k,fe({in:f,onEnter:ve,onEntered:Ne,onEntering:Ee,onExit:Ge,onExited:dt,onExiting:Ue,addEndListener:st,nodeRef:he,timeout:C==="auto"?null:C},O,{children:(lt,Rt)=>F.jsx(hwe,fe({as:l,className:qt(B.root,s,{entered:B.entered,exited:!f&&oe==="0px"&&B.hidden}[lt]),style:fe({[pe?"minWidth":"minHeight"]:oe},T),ref:ue},Rt,{ownerState:fe({},D,{state:lt}),children:F.jsx(fwe,{ownerState:fe({},D,{state:lt}),className:B.wrapper,ref:V,children:F.jsx(pwe,{ownerState:fe({},D,{state:lt}),className:B.wrapperInner,children:o})})}))}))});lne.muiSupportAuto=!0;const mwe=lne;function gwe(t){return jn("MuiPaper",t)}Un("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const ywe=["className","component","elevation","square","variant"],vwe=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,o={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return Vn(o,gwe,i)},_we=Qt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(({theme:t,ownerState:e})=>{var n;return fe({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!e.square&&{borderRadius:t.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.divider}`},e.variant==="elevation"&&fe({boxShadow:(t.vars||t).shadows[e.elevation]},!t.vars&&t.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Yi("#fff",HH(e.elevation))}, ${Yi("#fff",HH(e.elevation))})`},t.vars&&{backgroundImage:(n=t.vars.overlays)==null?void 0:n[e.elevation]}))}),xwe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiPaper"}),{className:i,component:o="div",elevation:s=1,square:a=!1,variant:l="elevation"}=r,d=on(r,ywe),f=fe({},r,{component:o,elevation:s,square:a,variant:l}),p=vwe(f);return F.jsx(_we,fe({as:o,ownerState:f,className:qt(p.root,i),ref:n},d))}),Gs=xwe,cne=W.createContext({});function DP(t){return typeof t=="string"}function wx(t,e,n){return t===void 0||DP(t)?e:fe({},e,{ownerState:fe({},e.ownerState,n)})}const bwe={disableDefaultClasses:!1},wwe=W.createContext(bwe);function Swe(t){const{disableDefaultClasses:e}=W.useContext(wwe);return n=>e?"":t(n)}function NP(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function une(t,e,n){return typeof t=="function"?t(e,n):t}function qH(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function dne(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=t;if(!e){const v=qt(n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),x=fe({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),b=fe({},n,i,r);return v.length>0&&(b.className=v),Object.keys(x).length>0&&(b.style=x),{props:b,internalRef:void 0}}const s=NP(fe({},i,r)),a=qH(r),l=qH(i),d=e(s),f=qt(d==null?void 0:d.className,n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),p=fe({},d==null?void 0:d.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),g=fe({},d,n,l,a);return f.length>0&&(g.className=f),Object.keys(p).length>0&&(g.style=p),{props:g,internalRef:d.ref}}const Mwe=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function Cc(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:o=!1}=t,s=on(t,Mwe),a=o?{}:une(r,i),{props:l,internalRef:d}=dne(fe({},s,{externalSlotProps:a})),f=Ao(d,a==null?void 0:a.ref,(e=t.additionalProps)==null?void 0:e.ref);return wx(n,fe({},l,{ref:f}),i)}const Ewe=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],Twe=["component","slots","slotProps"],Cwe=["component"];function zP(t,e){const{className:n,elementType:r,ownerState:i,externalForwardedProps:o,getSlotOwnerState:s,internalForwardedProps:a}=e,l=on(e,Ewe),{component:d,slots:f={[t]:void 0},slotProps:p={[t]:void 0}}=o,g=on(o,Twe),v=f[t]||r,x=une(p[t],i),b=dne(fe({className:n},l,{externalForwardedProps:t==="root"?g:void 0,externalSlotProps:x})),{props:{component:S},internalRef:M}=b,T=on(b.props,Cwe),C=Ao(M,x==null?void 0:x.ref,e.ref),k=s?s(T):{},O=fe({},i,k),D=t==="root"?S||d:S,B=wx(v,fe({},t==="root"&&!d&&!f[t]&&a,t!=="root"&&!f[t]&&a,T,D&&{as:D},{ref:C}),O);return Object.keys(k).forEach(U=>{delete B[U]}),[v,B]}function Awe(t){return jn("MuiAccordion",t)}const Pwe=Un("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),LT=Pwe,Iwe=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],kwe=N0(),Rwe=t=>{const{classes:e,square:n,expanded:r,disabled:i,disableGutters:o}=t;return Vn({root:["root",!n&&"rounded",r&&"expanded",i&&"disabled",!o&&"gutters"],region:["region"]},Awe,e)},Owe=Qt(Gs,{name:"MuiAccordion",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${LT.region}`]:e.region},e.root,!n.square&&e.rounded,!n.disableGutters&&e.gutters]}})(({theme:t})=>{const e={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],e),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],e)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${LT.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${LT.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}},({theme:t})=>({variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${LT.expanded}`]:{margin:"16px 0"}}}]})),Lwe=W.forwardRef(function(e,n){const r=kwe({props:e,name:"MuiAccordion"}),{children:i,className:o,defaultExpanded:s=!1,disabled:a=!1,disableGutters:l=!1,expanded:d,onChange:f,square:p=!1,slots:g={},slotProps:v={},TransitionComponent:x,TransitionProps:b}=r,S=on(r,Iwe),[M,T]=yb({controlled:d,default:s,name:"Accordion",state:"expanded"}),C=W.useCallback(pe=>{T(!M),f&&f(pe,!M)},[M,f,T]),[k,...O]=W.Children.toArray(i),D=W.useMemo(()=>({expanded:M,disabled:a,disableGutters:l,toggle:C}),[M,a,l,C]),B=fe({},r,{square:p,disabled:a,disableGutters:l,expanded:M}),U=Rwe(B),J=fe({transition:x},g),V=fe({transition:b},v),[X,oe]=zP("transition",{elementType:mwe,externalForwardedProps:{slots:J,slotProps:V},ownerState:B});return F.jsxs(Owe,fe({className:qt(U.root,o),ref:n,ownerState:B,square:p},S,{children:[F.jsx(cne.Provider,{value:D,children:k}),F.jsx(X,fe({in:M,timeout:"auto"},oe,{children:F.jsx("div",{"aria-labelledby":k.props.id,id:k.props["aria-controls"],role:"region",className:U.region,children:O})}))]}))}),pl=Lwe;function Dwe(t){return jn("MuiAccordionDetails",t)}Un("MuiAccordionDetails",["root"]);const Nwe=["className"],zwe=N0(),Fwe=t=>{const{classes:e}=t;return Vn({root:["root"]},Dwe,e)},Bwe=Qt("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({padding:t.spacing(1,2,2)})),$we=W.forwardRef(function(e,n){const r=zwe({props:e,name:"MuiAccordionDetails"}),{className:i}=r,o=on(r,Nwe),s=r,a=Fwe(s);return F.jsx(Bwe,fe({className:qt(a.root,i),ref:n,ownerState:s},o))}),ml=$we;function jwe(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:o,rippleSize:s,in:a,onExited:l,timeout:d}=t,[f,p]=W.useState(!1),g=qt(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),v={width:s,height:s,top:-(s/2)+o,left:-(s/2)+i},x=qt(n.child,f&&n.childLeaving,r&&n.childPulsate);return!a&&!f&&p(!0),W.useEffect(()=>{if(!a&&l!=null){const b=setTimeout(l,d);return()=>{clearTimeout(b)}}},[l,a,d]),F.jsx("span",{className:g,style:v,children:F.jsx("span",{className:x})})}const ed=Un("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Uwe=["center","classes","className"];let aR=t=>t,YH,XH,KH,ZH;const iF=550,Vwe=80,Wwe=D0(YH||(YH=aR`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),Hwe=D0(XH||(XH=aR`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),Gwe=D0(KH||(KH=aR`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),qwe=Qt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Ywe=Qt(jwe,{name:"MuiTouchRipple",slot:"Ripple"})(ZH||(ZH=aR`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),ed.rippleVisible,Wwe,iF,({theme:t})=>t.transitions.easing.easeInOut,ed.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,ed.child,ed.childLeaving,Hwe,iF,({theme:t})=>t.transitions.easing.easeInOut,ed.childPulsate,Gwe,({theme:t})=>t.transitions.easing.easeInOut),Xwe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:s}=r,a=on(r,Uwe),[l,d]=W.useState([]),f=W.useRef(0),p=W.useRef(null);W.useEffect(()=>{p.current&&(p.current(),p.current=null)},[l]);const g=W.useRef(!1),v=jg(),x=W.useRef(null),b=W.useRef(null),S=W.useCallback(k=>{const{pulsate:O,rippleX:D,rippleY:B,rippleSize:U,cb:J}=k;d(V=>[...V,F.jsx(Ywe,{classes:{ripple:qt(o.ripple,ed.ripple),rippleVisible:qt(o.rippleVisible,ed.rippleVisible),ripplePulsate:qt(o.ripplePulsate,ed.ripplePulsate),child:qt(o.child,ed.child),childLeaving:qt(o.childLeaving,ed.childLeaving),childPulsate:qt(o.childPulsate,ed.childPulsate)},timeout:iF,pulsate:O,rippleX:D,rippleY:B,rippleSize:U},f.current)]),f.current+=1,p.current=J},[o]),M=W.useCallback((k={},O={},D=()=>{})=>{const{pulsate:B=!1,center:U=i||O.pulsate,fakeElement:J=!1}=O;if((k==null?void 0:k.type)==="mousedown"&&g.current){g.current=!1;return}(k==null?void 0:k.type)==="touchstart"&&(g.current=!0);const V=J?null:b.current,X=V?V.getBoundingClientRect():{width:0,height:0,left:0,top:0};let oe,pe,re;if(U||k===void 0||k.clientX===0&&k.clientY===0||!k.clientX&&!k.touches)oe=Math.round(X.width/2),pe=Math.round(X.height/2);else{const{clientX:he,clientY:ue}=k.touches&&k.touches.length>0?k.touches[0]:k;oe=Math.round(he-X.left),pe=Math.round(ue-X.top)}if(U)re=Math.sqrt((2*X.width**2+X.height**2)/3),re%2===0&&(re+=1);else{const he=Math.max(Math.abs((V?V.clientWidth:0)-oe),oe)*2+2,ue=Math.max(Math.abs((V?V.clientHeight:0)-pe),pe)*2+2;re=Math.sqrt(he**2+ue**2)}k!=null&&k.touches?x.current===null&&(x.current=()=>{S({pulsate:B,rippleX:oe,rippleY:pe,rippleSize:re,cb:D})},v.start(Vwe,()=>{x.current&&(x.current(),x.current=null)})):S({pulsate:B,rippleX:oe,rippleY:pe,rippleSize:re,cb:D})},[i,S,v]),T=W.useCallback(()=>{M({},{pulsate:!0})},[M]),C=W.useCallback((k,O)=>{if(v.clear(),(k==null?void 0:k.type)==="touchend"&&x.current){x.current(),x.current=null,v.start(0,()=>{C(k,O)});return}x.current=null,d(D=>D.length>0?D.slice(1):D),p.current=O},[v]);return W.useImperativeHandle(n,()=>({pulsate:T,start:M,stop:C}),[T,M,C]),F.jsx(qwe,fe({className:qt(ed.root,o.root,s),ref:b},a,{children:F.jsx(lwe,{component:null,exit:!0,children:l})}))}),Kwe=Xwe;function Zwe(t){return jn("MuiButtonBase",t)}const Jwe=Un("MuiButtonBase",["root","disabled","focusVisible"]),Qwe=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],eSe=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,s=Vn({root:["root",e&&"disabled",n&&"focusVisible"]},Zwe,i);return n&&r&&(s.root+=` ${r}`),s},tSe=Qt("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Jwe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),nSe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:s,className:a,component:l="button",disabled:d=!1,disableRipple:f=!1,disableTouchRipple:p=!1,focusRipple:g=!1,LinkComponent:v="a",onBlur:x,onClick:b,onContextMenu:S,onDragLeave:M,onFocus:T,onFocusVisible:C,onKeyDown:k,onKeyUp:O,onMouseDown:D,onMouseLeave:B,onMouseUp:U,onTouchEnd:J,onTouchMove:V,onTouchStart:X,tabIndex:oe=0,TouchRippleProps:pe,touchRippleRef:re,type:he}=r,ue=on(r,Qwe),be=W.useRef(null),ie=W.useRef(null),ve=Ao(ie,re),{isFocusVisibleRef:Ee,onFocus:Ne,onBlur:Ge,ref:dt}=oR(),[Ue,st]=W.useState(!1);d&&Ue&&st(!1),W.useImperativeHandle(i,()=>({focusVisible:()=>{st(!0),be.current.focus()}}),[]);const[lt,Rt]=W.useState(!1);W.useEffect(()=>{Rt(!0)},[]);const Lt=lt&&!f&&!d;W.useEffect(()=>{Ue&&g&&!f&&lt&&ie.current.pulsate()},[f,g,Ue,lt]);function Fe(Je,Yt,xn=p){return jl(en=>(Yt&&Yt(en),!xn&&ie.current&&ie.current[Je](en),!0))}const at=Fe("start",D),nt=Fe("stop",S),ge=Fe("stop",M),tt=Fe("stop",U),rt=Fe("stop",Je=>{Ue&&Je.preventDefault(),B&&B(Je)}),vt=Fe("start",X),Tt=Fe("stop",J),We=Fe("stop",V),Vt=Fe("stop",Je=>{Ge(Je),Ee.current===!1&&st(!1),x&&x(Je)},!1),sn=jl(Je=>{be.current||(be.current=Je.currentTarget),Ne(Je),Ee.current===!0&&(st(!0),C&&C(Je)),T&&T(Je)}),Ut=()=>{const Je=be.current;return l&&l!=="button"&&!(Je.tagName==="A"&&Je.href)},Pe=W.useRef(!1),_e=jl(Je=>{g&&!Pe.current&&Ue&&ie.current&&Je.key===" "&&(Pe.current=!0,ie.current.stop(Je,()=>{ie.current.start(Je)})),Je.target===Je.currentTarget&&Ut()&&Je.key===" "&&Je.preventDefault(),k&&k(Je),Je.target===Je.currentTarget&&Ut()&&Je.key==="Enter"&&!d&&(Je.preventDefault(),b&&b(Je))}),Mt=jl(Je=>{g&&Je.key===" "&&ie.current&&Ue&&!Je.defaultPrevented&&(Pe.current=!1,ie.current.stop(Je,()=>{ie.current.pulsate(Je)})),O&&O(Je),b&&Je.target===Je.currentTarget&&Ut()&&Je.key===" "&&!Je.defaultPrevented&&b(Je)});let wt=l;wt==="button"&&(ue.href||ue.to)&&(wt=v);const Wt={};wt==="button"?(Wt.type=he===void 0?"button":he,Wt.disabled=d):(!ue.href&&!ue.to&&(Wt.role="button"),d&&(Wt["aria-disabled"]=d));const Bt=Ao(n,dt,be),Mn=fe({},r,{centerRipple:o,component:l,disabled:d,disableRipple:f,disableTouchRipple:p,focusRipple:g,tabIndex:oe,focusVisible:Ue}),an=eSe(Mn);return F.jsxs(tSe,fe({as:wt,className:qt(an.root,a),ownerState:Mn,onBlur:Vt,onClick:b,onContextMenu:nt,onFocus:sn,onKeyDown:_e,onKeyUp:Mt,onMouseDown:at,onMouseLeave:rt,onMouseUp:tt,onDragLeave:ge,onTouchEnd:Tt,onTouchMove:We,onTouchStart:vt,ref:Bt,tabIndex:d?-1:oe,type:he},Wt,ue,{children:[s,Lt?F.jsx(Kwe,fe({ref:ve,center:o},pe)):null]}))}),Mm=nSe;function rSe(t){return jn("MuiAccordionSummary",t)}const iSe=Un("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),Sx=iSe,oSe=["children","className","expandIcon","focusVisibleClassName","onClick"],sSe=N0(),aSe=t=>{const{classes:e,expanded:n,disabled:r,disableGutters:i}=t;return Vn({root:["root",n&&"expanded",r&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]},rSe,e)},lSe=Qt(Mm,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>{const e={duration:t.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],e),[`&.${Sx.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Sx.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${Sx.disabled})`]:{cursor:"pointer"},variants:[{props:n=>!n.disableGutters,style:{[`&.${Sx.expanded}`]:{minHeight:64}}}]}}),cSe=Qt("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(t,e)=>e.content})(({theme:t})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${Sx.expanded}`]:{margin:"20px 0"}}}]})),uSe=Qt("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(t,e)=>e.expandIconWrapper})(({theme:t})=>({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${Sx.expanded}`]:{transform:"rotate(180deg)"}})),dSe=W.forwardRef(function(e,n){const r=sSe({props:e,name:"MuiAccordionSummary"}),{children:i,className:o,expandIcon:s,focusVisibleClassName:a,onClick:l}=r,d=on(r,oSe),{disabled:f=!1,disableGutters:p,expanded:g,toggle:v}=W.useContext(cne),x=M=>{v&&v(M),l&&l(M)},b=fe({},r,{expanded:g,disabled:f,disableGutters:p}),S=aSe(b);return F.jsxs(lSe,fe({focusRipple:!1,disableRipple:!0,disabled:f,component:"div","aria-expanded":g,className:qt(S.root,o),focusVisibleClassName:qt(S.focusVisible,a),onClick:x,ref:n,ownerState:b},d,{children:[F.jsx(cSe,{className:S.content,ownerState:b,children:i}),s&&F.jsx(uSe,{className:S.expandIconWrapper,ownerState:b,children:s})]}))}),gl=dSe;function hSe(t){return jn("MuiAlert",t)}const fSe=Un("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),JH=fSe;function pSe(t){return jn("MuiIconButton",t)}const mSe=Un("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),gSe=["edge","children","className","color","disabled","disableFocusRipple","size"],ySe=t=>{const{classes:e,disabled:n,color:r,edge:i,size:o}=t,s={root:["root",n&&"disabled",r!=="default"&&`color${Jt(r)}`,i&&`edge${Jt(i)}`,`size${Jt(o)}`]};return Vn(s,pSe,e)},vSe=Qt(Mm,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${Jt(n.color)}`],n.edge&&e[`edge${Jt(n.edge)}`],e[`size${Jt(n.size)}`]]}})(({theme:t,ownerState:e})=>fe({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Yi(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:t,ownerState:e})=>{var n;const r=(n=(t.vars||t).palette)==null?void 0:n[e.color];return fe({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&fe({color:r==null?void 0:r.main},!e.disableRipple&&{"&:hover":fe({},r&&{backgroundColor:t.vars?`rgba(${r.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Yi(r.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:t.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${mSe.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),_Se=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiIconButton"}),{edge:i=!1,children:o,className:s,color:a="default",disabled:l=!1,disableFocusRipple:d=!1,size:f="medium"}=r,p=on(r,gSe),g=fe({},r,{edge:i,color:a,disabled:l,disableFocusRipple:d,size:f}),v=ySe(g);return F.jsx(vSe,fe({className:qt(v.root,s),centerRipple:!0,focusRipple:!d,disabled:l,ref:n},p,{ownerState:g,children:o}))}),br=_Se,xSe=Ba(F.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),bSe=Ba(F.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),wSe=Ba(F.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),SSe=Ba(F.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),MSe=Ba(F.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),ESe=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],TSe=N0(),CSe=t=>{const{variant:e,color:n,severity:r,classes:i}=t,o={root:["root",`color${Jt(n||r)}`,`${e}${Jt(n||r)}`,`${e}`],icon:["icon"],message:["message"],action:["action"]};return Vn(o,hSe,i)},ASe=Qt(Gs,{name:"MuiAlert",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${Jt(n.color||n.severity)}`]]}})(({theme:t})=>{const e=t.palette.mode==="light"?vb:_b,n=t.palette.mode==="light"?_b:vb;return fe({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(([,r])=>r.main&&r.light).map(([r])=>({props:{colorSeverity:r,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:e(t.palette[r].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${r}StandardBg`]:n(t.palette[r].light,.9),[`& .${JH.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}})),...Object.entries(t.palette).filter(([,r])=>r.main&&r.light).map(([r])=>({props:{colorSeverity:r,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${r}Color`]:e(t.palette[r].light,.6),border:`1px solid ${(t.vars||t).palette[r].light}`,[`& .${JH.icon}`]:t.vars?{color:t.vars.palette.Alert[`${r}IconColor`]}:{color:t.palette[r].main}}})),...Object.entries(t.palette).filter(([,r])=>r.main&&r.dark).map(([r])=>({props:{colorSeverity:r,variant:"filled"},style:fe({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert[`${r}FilledColor`],backgroundColor:t.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:t.palette.mode==="dark"?t.palette[r].dark:t.palette[r].main,color:t.palette.getContrastText(t.palette[r].main)})}))]})}),PSe=Qt("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(t,e)=>e.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),ISe=Qt("div",{name:"MuiAlert",slot:"Message",overridesResolver:(t,e)=>e.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),QH=Qt("div",{name:"MuiAlert",slot:"Action",overridesResolver:(t,e)=>e.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),e9={success:F.jsx(xSe,{fontSize:"inherit"}),warning:F.jsx(bSe,{fontSize:"inherit"}),error:F.jsx(wSe,{fontSize:"inherit"}),info:F.jsx(SSe,{fontSize:"inherit"})},kSe=W.forwardRef(function(e,n){const r=TSe({props:e,name:"MuiAlert"}),{action:i,children:o,className:s,closeText:a="Close",color:l,components:d={},componentsProps:f={},icon:p,iconMapping:g=e9,onClose:v,role:x="alert",severity:b="success",slotProps:S={},slots:M={},variant:T="standard"}=r,C=on(r,ESe),k=fe({},r,{color:l,severity:b,variant:T,colorSeverity:l||b}),O=CSe(k),D={slots:fe({closeButton:d.CloseButton,closeIcon:d.CloseIcon},M),slotProps:fe({},f,S)},[B,U]=zP("closeButton",{elementType:br,externalForwardedProps:D,ownerState:k}),[J,V]=zP("closeIcon",{elementType:MSe,externalForwardedProps:D,ownerState:k});return F.jsxs(ASe,fe({role:x,elevation:0,ownerState:k,className:qt(O.root,s),ref:n},C,{children:[p!==!1?F.jsx(PSe,{ownerState:k,className:O.icon,children:p||g[b]||e9[b]}):null,F.jsx(ISe,{ownerState:k,className:O.message,children:o}),i!=null?F.jsx(QH,{ownerState:k,className:O.action,children:i}):null,i==null&&v?F.jsx(QH,{ownerState:k,className:O.action,children:F.jsx(B,fe({size:"small","aria-label":a,title:a,color:"inherit",onClick:v},U,{children:F.jsx(J,fe({fontSize:"small"},V))}))}):null]}))}),RSe=kSe;function OSe(t){return jn("MuiTypography",t)}Un("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const LSe=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],DSe=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:s}=t,a={root:["root",o,t.align!=="inherit"&&`align${Jt(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return Vn(a,OSe,s)},NSe=Qt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${Jt(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>fe({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&t.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),t9={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},zSe={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},FSe=t=>zSe[t]||t,BSe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiTypography"}),i=FSe(r.color),o=ZM(fe({},r,{color:i})),{align:s="inherit",className:a,component:l,gutterBottom:d=!1,noWrap:f=!1,paragraph:p=!1,variant:g="body1",variantMapping:v=t9}=o,x=on(o,LSe),b=fe({},o,{align:s,color:i,className:a,component:l,gutterBottom:d,noWrap:f,paragraph:p,variant:g,variantMapping:v}),S=l||(p?"p":v[g]||t9[g])||"span",M=DSe(b);return F.jsx(NSe,fe({as:S,ref:n,ownerState:b,className:qt(M.root,a)},x))}),Bn=BSe;function $Se(t){return jn("MuiAppBar",t)}Un("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const jSe=["className","color","enableColorOnDark","position"],USe=t=>{const{color:e,position:n,classes:r}=t,i={root:["root",`color${Jt(e)}`,`position${Jt(n)}`]};return Vn(i,$Se,r)},DT=(t,e)=>t?`${t==null?void 0:t.replace(")","")}, ${e})`:e,VSe=Qt(Gs,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${Jt(n.position)}`],e[`color${Jt(n.color)}`]]}})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[900];return fe({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},e.position==="fixed"&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},e.position==="absolute"&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="sticky"&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="static"&&{position:"static"},e.position==="relative"&&{position:"relative"},!t.vars&&fe({},e.color==="default"&&{backgroundColor:n,color:t.palette.getContrastText(n)},e.color&&e.color!=="default"&&e.color!=="inherit"&&e.color!=="transparent"&&{backgroundColor:t.palette[e.color].main,color:t.palette[e.color].contrastText},e.color==="inherit"&&{color:"inherit"},t.palette.mode==="dark"&&!e.enableColorOnDark&&{backgroundColor:null,color:null},e.color==="transparent"&&fe({backgroundColor:"transparent",color:"inherit"},t.palette.mode==="dark"&&{backgroundImage:"none"})),t.vars&&fe({},e.color==="default"&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette.AppBar.defaultBg:DT(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":e.enableColorOnDark?t.vars.palette.text.primary:DT(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},e.color&&!e.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette[e.color].main:DT(t.vars.palette.AppBar.darkBg,t.vars.palette[e.color].main),"--AppBar-color":e.enableColorOnDark?t.vars.palette[e.color].contrastText:DT(t.vars.palette.AppBar.darkColor,t.vars.palette[e.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:e.color==="inherit"?"inherit":"var(--AppBar-color)"},e.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),WSe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiAppBar"}),{className:i,color:o="primary",enableColorOnDark:s=!1,position:a="fixed"}=r,l=on(r,jSe),d=fe({},r,{color:o,position:a,enableColorOnDark:s}),f=USe(d);return F.jsx(VSe,fe({square:!0,component:"header",ownerState:d,elevation:4,className:qt(f.root,i,a==="fixed"&&"mui-fixed"),ref:n},l))}),lR=WSe;function HSe(t){const{badgeContent:e,invisible:n=!1,max:r=99,showZero:i=!1}=t,o=Gte({badgeContent:e,max:r});let s=n;n===!1&&e===0&&!i&&(s=!0);const{badgeContent:a,max:l=r}=s?o:t,d=a&&Number(a)>l?`${l}+`:a;return{badgeContent:a,invisible:s,max:l,displayValue:d}}const hne="base";function GSe(t){return`${hne}--${t}`}function qSe(t,e){return`${hne}-${t}-${e}`}function fne(t,e){const n=Fte[e];return n?GSe(n):qSe(t,e)}function YSe(t,e){const n={};return e.forEach(r=>{n[r]=fne(t,r)}),n}function n9(t){return t.substring(2).toLowerCase()}function XSe(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}function KSe(t){const{children:e,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:i,touchEvent:o="onTouchEnd"}=t,s=W.useRef(!1),a=W.useRef(null),l=W.useRef(!1),d=W.useRef(!1);W.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const f=Ao(e.ref,a),p=jl(x=>{const b=d.current;d.current=!1;const S=As(a.current);if(!l.current||!a.current||"clientX"in x&&XSe(x,S))return;if(s.current){s.current=!1;return}let M;x.composedPath?M=x.composedPath().indexOf(a.current)>-1:M=!S.documentElement.contains(x.target)||a.current.contains(x.target),!M&&(n||!b)&&i(x)}),g=x=>b=>{d.current=!0;const S=e.props[x];S&&S(b)},v={ref:f};return o!==!1&&(v[o]=g(o)),W.useEffect(()=>{if(o!==!1){const x=n9(o),b=As(a.current),S=()=>{s.current=!0};return b.addEventListener(x,p),b.addEventListener("touchmove",S),()=>{b.removeEventListener(x,p),b.removeEventListener("touchmove",S)}}},[p,o]),r!==!1&&(v[r]=g(r)),W.useEffect(()=>{if(r!==!1){const x=n9(r),b=As(a.current);return b.addEventListener(x,p),()=>{b.removeEventListener(x,p)}}},[p,r]),F.jsx(W.Fragment,{children:W.cloneElement(e,v)})}const ZSe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function JSe(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function QSe(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function e2e(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||QSe(t))}function t2e(t){const e=[],n=[];return Array.from(t.querySelectorAll(ZSe)).forEach((r,i)=>{const o=JSe(r);o===-1||!e2e(r)||(o===0?e.push(r):n.push({documentOrder:i,tabIndex:o,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function n2e(){return!0}function r2e(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:o=t2e,isEnabled:s=n2e,open:a}=t,l=W.useRef(!1),d=W.useRef(null),f=W.useRef(null),p=W.useRef(null),g=W.useRef(null),v=W.useRef(!1),x=W.useRef(null),b=Ao(e.ref,x),S=W.useRef(null);W.useEffect(()=>{!a||!x.current||(v.current=!n)},[n,a]),W.useEffect(()=>{if(!a||!x.current)return;const C=As(x.current);return x.current.contains(C.activeElement)||(x.current.hasAttribute("tabIndex")||x.current.setAttribute("tabIndex","-1"),v.current&&x.current.focus()),()=>{i||(p.current&&p.current.focus&&(l.current=!0,p.current.focus()),p.current=null)}},[a]),W.useEffect(()=>{if(!a||!x.current)return;const C=As(x.current),k=B=>{S.current=B,!(r||!s()||B.key!=="Tab")&&C.activeElement===x.current&&B.shiftKey&&(l.current=!0,f.current&&f.current.focus())},O=()=>{const B=x.current;if(B===null)return;if(!C.hasFocus()||!s()||l.current){l.current=!1;return}if(B.contains(C.activeElement)||r&&C.activeElement!==d.current&&C.activeElement!==f.current)return;if(C.activeElement!==g.current)g.current=null;else if(g.current!==null)return;if(!v.current)return;let U=[];if((C.activeElement===d.current||C.activeElement===f.current)&&(U=o(x.current)),U.length>0){var J,V;const X=!!((J=S.current)!=null&&J.shiftKey&&((V=S.current)==null?void 0:V.key)==="Tab"),oe=U[0],pe=U[U.length-1];typeof oe!="string"&&typeof pe!="string"&&(X?pe.focus():oe.focus())}else B.focus()};C.addEventListener("focusin",O),C.addEventListener("keydown",k,!0);const D=setInterval(()=>{C.activeElement&&C.activeElement.tagName==="BODY"&&O()},50);return()=>{clearInterval(D),C.removeEventListener("focusin",O),C.removeEventListener("keydown",k,!0)}},[n,r,i,s,a,o]);const M=C=>{p.current===null&&(p.current=C.relatedTarget),v.current=!0,g.current=C.target;const k=e.props.onFocus;k&&k(C)},T=C=>{p.current===null&&(p.current=C.relatedTarget),v.current=!0};return F.jsxs(W.Fragment,{children:[F.jsx("div",{tabIndex:a?0:-1,onFocus:T,ref:d,"data-testid":"sentinelStart"}),W.cloneElement(e,{ref:b,onFocus:M}),F.jsx("div",{tabIndex:a?0:-1,onFocus:T,ref:f,"data-testid":"sentinelEnd"})]})}function i2e(t){return typeof t=="function"?t():t}const pne=W.forwardRef(function(e,n){const{children:r,container:i,disablePortal:o=!1}=e,[s,a]=W.useState(null),l=Ao(W.isValidElement(r)?r.ref:null,n);if(mu(()=>{o||a(i2e(i)||document.body)},[i,o]),mu(()=>{if(s&&!o)return RP(n,s),()=>{RP(n,null)}},[n,s,o]),o){if(W.isValidElement(r)){const d={ref:l};return W.cloneElement(r,d)}return F.jsx(W.Fragment,{children:r})}return F.jsx(W.Fragment,{children:s&&i1.createPortal(r,s)})});function o2e(t){const e=As(t);return e.body===t?Lf(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function PS(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function r9(t){return parseInt(Lf(t).getComputedStyle(t).paddingRight,10)||0}function s2e(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName)!==-1,r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function i9(t,e,n,r,i){const o=[e,n,...r];[].forEach.call(t.children,s=>{const a=o.indexOf(s)===-1,l=!s2e(s);a&&l&&PS(s,i)})}function SD(t,e){let n=-1;return t.some((r,i)=>e(r)?(n=i,!0):!1),n}function a2e(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(o2e(r)){const s=Wte(As(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${r9(r)+s}px`;const a=As(r).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${r9(l)+s}px`})}let o;if(r.parentNode instanceof DocumentFragment)o=As(r).body;else{const s=r.parentElement,a=Lf(r);o=(s==null?void 0:s.nodeName)==="HTML"&&a.getComputedStyle(s).overflowY==="scroll"?s:r}n.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{n.forEach(({value:o,el:s,property:a})=>{o?s.style.setProperty(a,o):s.style.removeProperty(a)})}}function l2e(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class c2e{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&PS(e.modalRef,!1);const i=l2e(n);i9(n,e.mount,e.modalRef,i,!0);const o=SD(this.containers,s=>s.container===n);return o!==-1?(this.containers[o].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:i}),r)}mount(e,n){const r=SD(this.containers,o=>o.modals.indexOf(e)!==-1),i=this.containers[r];i.restore||(i.restore=a2e(i,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=SD(this.containers,s=>s.modals.indexOf(e)!==-1),o=this.containers[i];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(r,1),o.modals.length===0)o.restore&&o.restore(),e.modalRef&&PS(e.modalRef,n),i9(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(i,1);else{const s=o.modals[o.modals.length-1];s.modalRef&&PS(s.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function u2e(t){return typeof t=="function"?t():t}function d2e(t){return t?t.props.hasOwnProperty("in"):!1}const h2e=new c2e;function f2e(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:i=h2e,closeAfterTransition:o=!1,onTransitionEnter:s,onTransitionExited:a,children:l,onClose:d,open:f,rootRef:p}=t,g=W.useRef({}),v=W.useRef(null),x=W.useRef(null),b=Ao(x,p),[S,M]=W.useState(!f),T=d2e(l);let C=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(C=!1);const k=()=>As(v.current),O=()=>(g.current.modalRef=x.current,g.current.mount=v.current,g.current),D=()=>{i.mount(O(),{disableScrollLock:r}),x.current&&(x.current.scrollTop=0)},B=jl(()=>{const ue=u2e(e)||k().body;i.add(O(),ue),x.current&&D()}),U=W.useCallback(()=>i.isTopModal(O()),[i]),J=jl(ue=>{v.current=ue,ue&&(f&&U()?D():x.current&&PS(x.current,C))}),V=W.useCallback(()=>{i.remove(O(),C)},[C,i]);W.useEffect(()=>()=>{V()},[V]),W.useEffect(()=>{f?B():(!T||!o)&&V()},[f,V,T,o,B]);const X=ue=>be=>{var ie;(ie=ue.onKeyDown)==null||ie.call(ue,be),!(be.key!=="Escape"||be.which===229||!U())&&(n||(be.stopPropagation(),d&&d(be,"escapeKeyDown")))},oe=ue=>be=>{var ie;(ie=ue.onClick)==null||ie.call(ue,be),be.target===be.currentTarget&&d&&d(be,"backdropClick")};return{getRootProps:(ue={})=>{const be=NP(t);delete be.onTransitionEnter,delete be.onTransitionExited;const ie=fe({},be,ue);return fe({role:"presentation"},ie,{onKeyDown:X(ie),ref:b})},getBackdropProps:(ue={})=>{const be=ue;return fe({"aria-hidden":!0},be,{onClick:oe(be),open:f})},getTransitionProps:()=>{const ue=()=>{M(!1),s&&s()},be=()=>{M(!0),a&&a(),o&&V()};return{onEnter:Jz(ue,l==null?void 0:l.props.onEnter),onExited:Jz(be,l==null?void 0:l.props.onExited)}},rootRef:b,portalRef:J,isTopModal:U,exited:S,hasTransition:T}}var Sc="top",xd="bottom",bd="right",Mc="left",C$="auto",rE=[Sc,xd,bd,Mc],bb="start",w2="end",p2e="clippingParents",mne="viewport",bw="popper",m2e="reference",o9=rE.reduce(function(t,e){return t.concat([e+"-"+bb,e+"-"+w2])},[]),gne=[].concat(rE,[C$]).reduce(function(t,e){return t.concat([e,e+"-"+bb,e+"-"+w2])},[]),g2e="beforeRead",y2e="read",v2e="afterRead",_2e="beforeMain",x2e="main",b2e="afterMain",w2e="beforeWrite",S2e="write",M2e="afterWrite",E2e=[g2e,y2e,v2e,_2e,x2e,b2e,w2e,S2e,M2e];function Df(t){return t?(t.nodeName||"").toLowerCase():null}function gu(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function M0(t){var e=gu(t).Element;return t instanceof e||t instanceof Element}function hd(t){var e=gu(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function A$(t){if(typeof ShadowRoot>"u")return!1;var e=gu(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function T2e(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},o=e.elements[n];!hd(o)||!Df(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function C2e(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},s=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=s.reduce(function(l,d){return l[d]="",l},{});!hd(i)||!Df(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}const A2e={name:"applyStyles",enabled:!0,phase:"write",fn:T2e,effect:C2e,requires:["computeStyles"]};function Cf(t){return t.split("-")[0]}var i0=Math.max,FP=Math.min,wb=Math.round;function oF(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function yne(){return!/^((?!chrome|android).)*safari/i.test(oF())}function Sb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&hd(t)&&(i=t.offsetWidth>0&&wb(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&wb(r.height)/t.offsetHeight||1);var s=M0(t)?gu(t):window,a=s.visualViewport,l=!yne()&&n,d=(r.left+(l&&a?a.offsetLeft:0))/i,f=(r.top+(l&&a?a.offsetTop:0))/o,p=r.width/i,g=r.height/o;return{width:p,height:g,top:f,right:d+p,bottom:f+g,left:d,x:d,y:f}}function P$(t){var e=Sb(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function vne(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&A$(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function dm(t){return gu(t).getComputedStyle(t)}function P2e(t){return["table","td","th"].indexOf(Df(t))>=0}function My(t){return((M0(t)?t.ownerDocument:t.document)||window.document).documentElement}function cR(t){return Df(t)==="html"?t:t.assignedSlot||t.parentNode||(A$(t)?t.host:null)||My(t)}function s9(t){return!hd(t)||dm(t).position==="fixed"?null:t.offsetParent}function I2e(t){var e=/firefox/i.test(oF()),n=/Trident/i.test(oF());if(n&&hd(t)){var r=dm(t);if(r.position==="fixed")return null}var i=cR(t);for(A$(i)&&(i=i.host);hd(i)&&["html","body"].indexOf(Df(i))<0;){var o=dm(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function iE(t){for(var e=gu(t),n=s9(t);n&&P2e(n)&&dm(n).position==="static";)n=s9(n);return n&&(Df(n)==="html"||Df(n)==="body"&&dm(n).position==="static")?e:n||I2e(t)||e}function I$(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function IS(t,e,n){return i0(t,FP(e,n))}function k2e(t,e,n){var r=IS(t,e,n);return r>n?n:r}function _ne(){return{top:0,right:0,bottom:0,left:0}}function xne(t){return Object.assign({},_ne(),t)}function bne(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var R2e=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,xne(typeof e!="number"?e:bne(e,rE))};function O2e(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=Cf(n.placement),l=I$(a),d=[Mc,bd].indexOf(a)>=0,f=d?"height":"width";if(!(!o||!s)){var p=R2e(i.padding,n),g=P$(o),v=l==="y"?Sc:Mc,x=l==="y"?xd:bd,b=n.rects.reference[f]+n.rects.reference[l]-s[l]-n.rects.popper[f],S=s[l]-n.rects.reference[l],M=iE(o),T=M?l==="y"?M.clientHeight||0:M.clientWidth||0:0,C=b/2-S/2,k=p[v],O=T-g[f]-p[x],D=T/2-g[f]/2+C,B=IS(k,D,O),U=l;n.modifiersData[r]=(e={},e[U]=B,e.centerOffset=B-D,e)}}function L2e(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||vne(e.elements.popper,i)&&(e.elements.arrow=i))}const D2e={name:"arrow",enabled:!0,phase:"main",fn:O2e,effect:L2e,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Mb(t){return t.split("-")[1]}var N2e={top:"auto",right:"auto",bottom:"auto",left:"auto"};function z2e(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:wb(n*i)/i||0,y:wb(r*i)/i||0}}function a9(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,s=t.offsets,a=t.position,l=t.gpuAcceleration,d=t.adaptive,f=t.roundOffsets,p=t.isFixed,g=s.x,v=g===void 0?0:g,x=s.y,b=x===void 0?0:x,S=typeof f=="function"?f({x:v,y:b}):{x:v,y:b};v=S.x,b=S.y;var M=s.hasOwnProperty("x"),T=s.hasOwnProperty("y"),C=Mc,k=Sc,O=window;if(d){var D=iE(n),B="clientHeight",U="clientWidth";if(D===gu(n)&&(D=My(n),dm(D).position!=="static"&&a==="absolute"&&(B="scrollHeight",U="scrollWidth")),D=D,i===Sc||(i===Mc||i===bd)&&o===w2){k=xd;var J=p&&D===O&&O.visualViewport?O.visualViewport.height:D[B];b-=J-r.height,b*=l?1:-1}if(i===Mc||(i===Sc||i===xd)&&o===w2){C=bd;var V=p&&D===O&&O.visualViewport?O.visualViewport.width:D[U];v-=V-r.width,v*=l?1:-1}}var X=Object.assign({position:a},d&&N2e),oe=f===!0?z2e({x:v,y:b},gu(n)):{x:v,y:b};if(v=oe.x,b=oe.y,l){var pe;return Object.assign({},X,(pe={},pe[k]=T?"0":"",pe[C]=M?"0":"",pe.transform=(O.devicePixelRatio||1)<=1?"translate("+v+"px, "+b+"px)":"translate3d("+v+"px, "+b+"px, 0)",pe))}return Object.assign({},X,(e={},e[k]=T?b+"px":"",e[C]=M?v+"px":"",e.transform="",e))}function F2e(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,s=o===void 0?!0:o,a=n.roundOffsets,l=a===void 0?!0:a,d={placement:Cf(e.placement),variation:Mb(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,a9(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,a9(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const B2e={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:F2e,data:{}};var NT={passive:!0};function $2e(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,a=s===void 0?!0:s,l=gu(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&d.forEach(function(f){f.addEventListener("scroll",n.update,NT)}),a&&l.addEventListener("resize",n.update,NT),function(){o&&d.forEach(function(f){f.removeEventListener("scroll",n.update,NT)}),a&&l.removeEventListener("resize",n.update,NT)}}const j2e={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:$2e,data:{}};var U2e={left:"right",right:"left",bottom:"top",top:"bottom"};function kA(t){return t.replace(/left|right|bottom|top/g,function(e){return U2e[e]})}var V2e={start:"end",end:"start"};function l9(t){return t.replace(/start|end/g,function(e){return V2e[e]})}function k$(t){var e=gu(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function R$(t){return Sb(My(t)).left+k$(t).scrollLeft}function W2e(t,e){var n=gu(t),r=My(t),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var d=yne();(d||!d&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+R$(t),y:l}}function H2e(t){var e,n=My(t),r=k$(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=i0(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=i0(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+R$(t),l=-r.scrollTop;return dm(i||n).direction==="rtl"&&(a+=i0(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function O$(t){var e=dm(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function wne(t){return["html","body","#document"].indexOf(Df(t))>=0?t.ownerDocument.body:hd(t)&&O$(t)?t:wne(cR(t))}function kS(t,e){var n;e===void 0&&(e=[]);var r=wne(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=gu(r),s=i?[o].concat(o.visualViewport||[],O$(r)?r:[]):r,a=e.concat(s);return i?a:a.concat(kS(cR(s)))}function sF(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function G2e(t,e){var n=Sb(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function c9(t,e,n){return e===mne?sF(W2e(t,n)):M0(e)?G2e(e,n):sF(H2e(My(t)))}function q2e(t){var e=kS(cR(t)),n=["absolute","fixed"].indexOf(dm(t).position)>=0,r=n&&hd(t)?iE(t):t;return M0(r)?e.filter(function(i){return M0(i)&&vne(i,r)&&Df(i)!=="body"}):[]}function Y2e(t,e,n,r){var i=e==="clippingParents"?q2e(t):[].concat(e),o=[].concat(i,[n]),s=o[0],a=o.reduce(function(l,d){var f=c9(t,d,r);return l.top=i0(f.top,l.top),l.right=FP(f.right,l.right),l.bottom=FP(f.bottom,l.bottom),l.left=i0(f.left,l.left),l},c9(t,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Sne(t){var e=t.reference,n=t.element,r=t.placement,i=r?Cf(r):null,o=r?Mb(r):null,s=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case Sc:l={x:s,y:e.y-n.height};break;case xd:l={x:s,y:e.y+e.height};break;case bd:l={x:e.x+e.width,y:a};break;case Mc:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var d=i?I$(i):null;if(d!=null){var f=d==="y"?"height":"width";switch(o){case bb:l[d]=l[d]-(e[f]/2-n[f]/2);break;case w2:l[d]=l[d]+(e[f]/2-n[f]/2);break}}return l}function S2(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,o=n.strategy,s=o===void 0?t.strategy:o,a=n.boundary,l=a===void 0?p2e:a,d=n.rootBoundary,f=d===void 0?mne:d,p=n.elementContext,g=p===void 0?bw:p,v=n.altBoundary,x=v===void 0?!1:v,b=n.padding,S=b===void 0?0:b,M=xne(typeof S!="number"?S:bne(S,rE)),T=g===bw?m2e:bw,C=t.rects.popper,k=t.elements[x?T:g],O=Y2e(M0(k)?k:k.contextElement||My(t.elements.popper),l,f,s),D=Sb(t.elements.reference),B=Sne({reference:D,element:C,strategy:"absolute",placement:i}),U=sF(Object.assign({},C,B)),J=g===bw?U:D,V={top:O.top-J.top+M.top,bottom:J.bottom-O.bottom+M.bottom,left:O.left-J.left+M.left,right:J.right-O.right+M.right},X=t.modifiersData.offset;if(g===bw&&X){var oe=X[i];Object.keys(V).forEach(function(pe){var re=[bd,xd].indexOf(pe)>=0?1:-1,he=[Sc,xd].indexOf(pe)>=0?"y":"x";V[pe]+=oe[he]*re})}return V}function X2e(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,d=l===void 0?gne:l,f=Mb(r),p=f?a?o9:o9.filter(function(x){return Mb(x)===f}):rE,g=p.filter(function(x){return d.indexOf(x)>=0});g.length===0&&(g=p);var v=g.reduce(function(x,b){return x[b]=S2(t,{placement:b,boundary:i,rootBoundary:o,padding:s})[Cf(b)],x},{});return Object.keys(v).sort(function(x,b){return v[x]-v[b]})}function K2e(t){if(Cf(t)===C$)return[];var e=kA(t);return[l9(t),e,l9(e)]}function Z2e(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!0:s,l=n.fallbackPlacements,d=n.padding,f=n.boundary,p=n.rootBoundary,g=n.altBoundary,v=n.flipVariations,x=v===void 0?!0:v,b=n.allowedAutoPlacements,S=e.options.placement,M=Cf(S),T=M===S,C=l||(T||!x?[kA(S)]:K2e(S)),k=[S].concat(C).reduce(function(Ue,st){return Ue.concat(Cf(st)===C$?X2e(e,{placement:st,boundary:f,rootBoundary:p,padding:d,flipVariations:x,allowedAutoPlacements:b}):st)},[]),O=e.rects.reference,D=e.rects.popper,B=new Map,U=!0,J=k[0],V=0;V<k.length;V++){var X=k[V],oe=Cf(X),pe=Mb(X)===bb,re=[Sc,xd].indexOf(oe)>=0,he=re?"width":"height",ue=S2(e,{placement:X,boundary:f,rootBoundary:p,altBoundary:g,padding:d}),be=re?pe?bd:Mc:pe?xd:Sc;O[he]>D[he]&&(be=kA(be));var ie=kA(be),ve=[];if(o&&ve.push(ue[oe]<=0),a&&ve.push(ue[be]<=0,ue[ie]<=0),ve.every(function(Ue){return Ue})){J=X,U=!1;break}B.set(X,ve)}if(U)for(var Ee=x?3:1,Ne=function(st){var lt=k.find(function(Rt){var Lt=B.get(Rt);if(Lt)return Lt.slice(0,st).every(function(Fe){return Fe})});if(lt)return J=lt,"break"},Ge=Ee;Ge>0;Ge--){var dt=Ne(Ge);if(dt==="break")break}e.placement!==J&&(e.modifiersData[r]._skip=!0,e.placement=J,e.reset=!0)}}const J2e={name:"flip",enabled:!0,phase:"main",fn:Z2e,requiresIfExists:["offset"],data:{_skip:!1}};function u9(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function d9(t){return[Sc,bd,xd,Mc].some(function(e){return t[e]>=0})}function Q2e(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=S2(e,{elementContext:"reference"}),a=S2(e,{altBoundary:!0}),l=u9(s,r),d=u9(a,i,o),f=d9(l),p=d9(d);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:d,isReferenceHidden:f,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":p})}const eMe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Q2e};function tMe(t,e,n){var r=Cf(t),i=[Mc,Sc].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[Mc,bd].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function nMe(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=i===void 0?[0,0]:i,s=gne.reduce(function(f,p){return f[p]=tMe(p,e.rects,o),f},{}),a=s[e.placement],l=a.x,d=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=d),e.modifiersData[r]=s}const rMe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:nMe};function iMe(t){var e=t.state,n=t.name;e.modifiersData[n]=Sne({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const oMe={name:"popperOffsets",enabled:!0,phase:"read",fn:iMe,data:{}};function sMe(t){return t==="x"?"y":"x"}function aMe(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!1:s,l=n.boundary,d=n.rootBoundary,f=n.altBoundary,p=n.padding,g=n.tether,v=g===void 0?!0:g,x=n.tetherOffset,b=x===void 0?0:x,S=S2(e,{boundary:l,rootBoundary:d,padding:p,altBoundary:f}),M=Cf(e.placement),T=Mb(e.placement),C=!T,k=I$(M),O=sMe(k),D=e.modifiersData.popperOffsets,B=e.rects.reference,U=e.rects.popper,J=typeof b=="function"?b(Object.assign({},e.rects,{placement:e.placement})):b,V=typeof J=="number"?{mainAxis:J,altAxis:J}:Object.assign({mainAxis:0,altAxis:0},J),X=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,oe={x:0,y:0};if(D){if(o){var pe,re=k==="y"?Sc:Mc,he=k==="y"?xd:bd,ue=k==="y"?"height":"width",be=D[k],ie=be+S[re],ve=be-S[he],Ee=v?-U[ue]/2:0,Ne=T===bb?B[ue]:U[ue],Ge=T===bb?-U[ue]:-B[ue],dt=e.elements.arrow,Ue=v&&dt?P$(dt):{width:0,height:0},st=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:_ne(),lt=st[re],Rt=st[he],Lt=IS(0,B[ue],Ue[ue]),Fe=C?B[ue]/2-Ee-Lt-lt-V.mainAxis:Ne-Lt-lt-V.mainAxis,at=C?-B[ue]/2+Ee+Lt+Rt+V.mainAxis:Ge+Lt+Rt+V.mainAxis,nt=e.elements.arrow&&iE(e.elements.arrow),ge=nt?k==="y"?nt.clientTop||0:nt.clientLeft||0:0,tt=(pe=X==null?void 0:X[k])!=null?pe:0,rt=be+Fe-tt-ge,vt=be+at-tt,Tt=IS(v?FP(ie,rt):ie,be,v?i0(ve,vt):ve);D[k]=Tt,oe[k]=Tt-be}if(a){var We,Vt=k==="x"?Sc:Mc,sn=k==="x"?xd:bd,Ut=D[O],Pe=O==="y"?"height":"width",_e=Ut+S[Vt],Mt=Ut-S[sn],wt=[Sc,Mc].indexOf(M)!==-1,Wt=(We=X==null?void 0:X[O])!=null?We:0,Bt=wt?_e:Ut-B[Pe]-U[Pe]-Wt+V.altAxis,Mn=wt?Ut+B[Pe]+U[Pe]-Wt-V.altAxis:Mt,an=v&&wt?k2e(Bt,Ut,Mn):IS(v?Bt:_e,Ut,v?Mn:Mt);D[O]=an,oe[O]=an-Ut}e.modifiersData[r]=oe}}const lMe={name:"preventOverflow",enabled:!0,phase:"main",fn:aMe,requiresIfExists:["offset"]};function cMe(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function uMe(t){return t===gu(t)||!hd(t)?k$(t):cMe(t)}function dMe(t){var e=t.getBoundingClientRect(),n=wb(e.width)/t.offsetWidth||1,r=wb(e.height)/t.offsetHeight||1;return n!==1||r!==1}function hMe(t,e,n){n===void 0&&(n=!1);var r=hd(e),i=hd(e)&&dMe(e),o=My(e),s=Sb(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Df(e)!=="body"||O$(o))&&(a=uMe(e)),hd(e)?(l=Sb(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=R$(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function fMe(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function i(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||i(o)}),r}function pMe(t){var e=fMe(t);return E2e.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function mMe(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function gMe(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var h9={placement:"bottom",modifiers:[],strategy:"absolute"};function f9(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function yMe(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,o=i===void 0?h9:i;return function(a,l,d){d===void 0&&(d=o);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},h9,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},p=[],g=!1,v={state:f,setOptions:function(M){var T=typeof M=="function"?M(f.options):M;b(),f.options=Object.assign({},o,f.options,T),f.scrollParents={reference:M0(a)?kS(a):a.contextElement?kS(a.contextElement):[],popper:kS(l)};var C=pMe(gMe([].concat(r,f.options.modifiers)));return f.orderedModifiers=C.filter(function(k){return k.enabled}),x(),v.update()},forceUpdate:function(){if(!g){var M=f.elements,T=M.reference,C=M.popper;if(f9(T,C)){f.rects={reference:hMe(T,iE(C),f.options.strategy==="fixed"),popper:P$(C)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(V){return f.modifiersData[V.name]=Object.assign({},V.data)});for(var k=0;k<f.orderedModifiers.length;k++){if(f.reset===!0){f.reset=!1,k=-1;continue}var O=f.orderedModifiers[k],D=O.fn,B=O.options,U=B===void 0?{}:B,J=O.name;typeof D=="function"&&(f=D({state:f,options:U,name:J,instance:v})||f)}}}},update:mMe(function(){return new Promise(function(S){v.forceUpdate(),S(f)})}),destroy:function(){b(),g=!0}};if(!f9(a,l))return v;v.setOptions(d).then(function(S){!g&&d.onFirstUpdate&&d.onFirstUpdate(S)});function x(){f.orderedModifiers.forEach(function(S){var M=S.name,T=S.options,C=T===void 0?{}:T,k=S.effect;if(typeof k=="function"){var O=k({state:f,name:M,instance:v,options:C}),D=function(){};p.push(O||D)}})}function b(){p.forEach(function(S){return S()}),p=[]}return v}}var vMe=[j2e,oMe,B2e,A2e,rMe,J2e,lMe,D2e,eMe],_Me=yMe({defaultModifiers:vMe});const Mne="Popper";function xMe(t){return fne(Mne,t)}YSe(Mne,["root"]);const bMe=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],wMe=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function SMe(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function aF(t){return typeof t=="function"?t():t}function MMe(t){return t.nodeType!==void 0}const EMe=()=>Vn({root:["root"]},Swe(xMe)),TMe={},CMe=W.forwardRef(function(e,n){var r;const{anchorEl:i,children:o,direction:s,disablePortal:a,modifiers:l,open:d,placement:f,popperOptions:p,popperRef:g,slotProps:v={},slots:x={},TransitionProps:b}=e,S=on(e,bMe),M=W.useRef(null),T=Ao(M,n),C=W.useRef(null),k=Ao(C,g),O=W.useRef(k);mu(()=>{O.current=k},[k]),W.useImperativeHandle(g,()=>C.current,[]);const D=SMe(f,s),[B,U]=W.useState(D),[J,V]=W.useState(aF(i));W.useEffect(()=>{C.current&&C.current.forceUpdate()}),W.useEffect(()=>{i&&V(aF(i))},[i]),mu(()=>{if(!J||!d)return;const he=ie=>{U(ie.placement)};let ue=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:ie})=>{he(ie)}}];l!=null&&(ue=ue.concat(l)),p&&p.modifiers!=null&&(ue=ue.concat(p.modifiers));const be=_Me(J,M.current,fe({placement:D},p,{modifiers:ue}));return O.current(be),()=>{be.destroy(),O.current(null)}},[J,a,l,d,p,D]);const X={placement:B};b!==null&&(X.TransitionProps=b);const oe=EMe(),pe=(r=x.root)!=null?r:"div",re=Cc({elementType:pe,externalSlotProps:v.root,externalForwardedProps:S,additionalProps:{role:"tooltip",ref:T},ownerState:e,className:oe.root});return F.jsx(pe,fe({},re,{children:typeof o=="function"?o(X):o}))}),AMe=W.forwardRef(function(e,n){const{anchorEl:r,children:i,container:o,direction:s="ltr",disablePortal:a=!1,keepMounted:l=!1,modifiers:d,open:f,placement:p="bottom",popperOptions:g=TMe,popperRef:v,style:x,transition:b=!1,slotProps:S={},slots:M={}}=e,T=on(e,wMe),[C,k]=W.useState(!0),O=()=>{k(!1)},D=()=>{k(!0)};if(!l&&!f&&(!b||C))return null;let B;if(o)B=o;else if(r){const V=aF(r);B=V&&MMe(V)?As(V).body:As(null).body}const U=!f&&l&&(!b||C)?"none":void 0,J=b?{in:f,onEnter:O,onExited:D}:void 0;return F.jsx(pne,{disablePortal:a,container:B,children:F.jsx(CMe,fe({anchorEl:r,direction:s,disablePortal:a,modifiers:d,ref:n,open:b?!C:f,placement:p,popperOptions:g,popperRef:v,slotProps:S,slots:M},T,{style:fe({position:"fixed",top:0,left:0,display:U},x),TransitionProps:J,children:i}))})});function PMe(t={}){const{autoHideDuration:e=null,disableWindowBlurListener:n=!1,onClose:r,open:i,resumeHideDuration:o}=t,s=jg();W.useEffect(()=>{if(!i)return;function M(T){T.defaultPrevented||(T.key==="Escape"||T.key==="Esc")&&(r==null||r(T,"escapeKeyDown"))}return document.addEventListener("keydown",M),()=>{document.removeEventListener("keydown",M)}},[i,r]);const a=jl((M,T)=>{r==null||r(M,T)}),l=jl(M=>{!r||M==null||s.start(M,()=>{a(null,"timeout")})});W.useEffect(()=>(i&&l(e),s.clear),[i,e,l,s]);const d=M=>{r==null||r(M,"clickaway")},f=s.clear,p=W.useCallback(()=>{e!=null&&l(o??e*.5)},[e,o,l]),g=M=>T=>{const C=M.onBlur;C==null||C(T),p()},v=M=>T=>{const C=M.onFocus;C==null||C(T),f()},x=M=>T=>{const C=M.onMouseEnter;C==null||C(T),f()},b=M=>T=>{const C=M.onMouseLeave;C==null||C(T),p()};return W.useEffect(()=>{if(!n&&i)return window.addEventListener("focus",p),window.addEventListener("blur",f),()=>{window.removeEventListener("focus",p),window.removeEventListener("blur",f)}},[n,i,p,f]),{getRootProps:(M={})=>{const T=fe({},NP(t),NP(M));return fe({role:"presentation"},M,T,{onBlur:g(T),onFocus:v(T),onMouseEnter:x(T),onMouseLeave:b(T)})},onClickAway:d}}const IMe=["onChange","maxRows","minRows","style","value"];function zT(t){return parseInt(t,10)||0}const kMe={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function RMe(t){return t==null||Object.keys(t).length===0||t.outerHeightStyle===0&&!t.overflowing}const OMe=W.forwardRef(function(e,n){const{onChange:r,maxRows:i,minRows:o=1,style:s,value:a}=e,l=on(e,IMe),{current:d}=W.useRef(a!=null),f=W.useRef(null),p=Ao(n,f),g=W.useRef(null),v=W.useCallback(()=>{const S=f.current,T=Lf(S).getComputedStyle(S);if(T.width==="0px")return{outerHeightStyle:0,overflowing:!1};const C=g.current;C.style.width=T.width,C.value=S.value||e.placeholder||"x",C.value.slice(-1)===`
`&&(C.value+=" ");const k=T.boxSizing,O=zT(T.paddingBottom)+zT(T.paddingTop),D=zT(T.borderBottomWidth)+zT(T.borderTopWidth),B=C.scrollHeight;C.value="x";const U=C.scrollHeight;let J=B;o&&(J=Math.max(Number(o)*U,J)),i&&(J=Math.min(Number(i)*U,J)),J=Math.max(J,U);const V=J+(k==="border-box"?O+D:0),X=Math.abs(J-B)<=1;return{outerHeightStyle:V,overflowing:X}},[i,o,e.placeholder]),x=W.useCallback(()=>{const S=v();if(RMe(S))return;const M=f.current;M.style.height=`${S.outerHeightStyle}px`,M.style.overflow=S.overflowing?"hidden":""},[v]);mu(()=>{const S=()=>{x()};let M;const T=JM(S),C=f.current,k=Lf(C);k.addEventListener("resize",T);let O;return typeof ResizeObserver<"u"&&(O=new ResizeObserver(S),O.observe(C)),()=>{T.clear(),cancelAnimationFrame(M),k.removeEventListener("resize",T),O&&O.disconnect()}},[v,x]),mu(()=>{x()});const b=S=>{d||x(),r&&r(S)};return F.jsxs(W.Fragment,{children:[F.jsx("textarea",fe({value:a,onChange:b,ref:p,rows:o,style:s},l)),F.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:g,tabIndex:-1,style:fe({},kMe.shadow,s,{paddingTop:0,paddingBottom:0})})]})});var L$={};Object.defineProperty(L$,"__esModule",{value:!0});var Ene=L$.default=void 0,LMe=NMe(W),DMe=ine;function Tne(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Tne=function(r){return r?n:e})(t)}function NMe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=Tne(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}function zMe(t){return Object.keys(t).length===0}function FMe(t=null){const e=LMe.useContext(DMe.ThemeContext);return!e||zMe(e)?t:e}Ene=L$.default=FMe;const BMe=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],$Me=Qt(AMe,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),jMe=W.forwardRef(function(e,n){var r;const i=Ene(),o=er({props:e,name:"MuiPopper"}),{anchorEl:s,component:a,components:l,componentsProps:d,container:f,disablePortal:p,keepMounted:g,modifiers:v,open:x,placement:b,popperOptions:S,popperRef:M,transition:T,slots:C,slotProps:k}=o,O=on(o,BMe),D=(r=C==null?void 0:C.root)!=null?r:l==null?void 0:l.Root,B=fe({anchorEl:s,container:f,disablePortal:p,keepMounted:g,modifiers:v,open:x,placement:b,popperOptions:S,popperRef:M,transition:T},O);return F.jsx($Me,fe({as:a,direction:i==null?void 0:i.direction,slots:{root:D},slotProps:k??d},B,{ref:n}))}),Cne=jMe;function Ey({props:t,states:e,muiFormControl:n}){return e.reduce((r,i)=>(r[i]=t[i],n&&typeof t[i]>"u"&&(r[i]=n[i]),r),{})}const UMe=W.createContext(void 0),uR=UMe;function $f(){return W.useContext(uR)}function Ane(t){return F.jsx(Oxe,fe({},t,{defaultTheme:sR,themeId:w0}))}function p9(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function BP(t,e=!1){return t&&(p9(t.value)&&t.value!==""||e&&p9(t.defaultValue)&&t.defaultValue!=="")}function VMe(t){return t.startAdornment}function WMe(t){return jn("MuiInputBase",t)}const HMe=Un("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Eb=HMe,GMe=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],dR=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${Jt(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},hR=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},qMe=t=>{const{classes:e,color:n,disabled:r,error:i,endAdornment:o,focused:s,formControl:a,fullWidth:l,hiddenLabel:d,multiline:f,readOnly:p,size:g,startAdornment:v,type:x}=t,b={root:["root",`color${Jt(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",s&&"focused",a&&"formControl",g&&g!=="medium"&&`size${Jt(g)}`,f&&"multiline",v&&"adornedStart",o&&"adornedEnd",d&&"hiddenLabel",p&&"readOnly"],input:["input",r&&"disabled",x==="search"&&"inputTypeSearch",f&&"inputMultiline",g==="small"&&"inputSizeSmall",d&&"inputHiddenLabel",v&&"inputAdornedStart",o&&"inputAdornedEnd",p&&"readOnly"]};return Vn(b,WMe,e)},fR=Qt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:dR})(({theme:t,ownerState:e})=>fe({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Eb.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},e.multiline&&fe({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),pR=Qt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:hR})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light",r=fe({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),i={opacity:"0 !important"},o=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return fe({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Eb.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},[`&.${Eb.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),YMe=F.jsx(Ane,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),XMe=W.forwardRef(function(e,n){var r;const i=er({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:s,autoFocus:a,className:l,components:d={},componentsProps:f={},defaultValue:p,disabled:g,disableInjectingGlobalStyles:v,endAdornment:x,fullWidth:b=!1,id:S,inputComponent:M="input",inputProps:T={},inputRef:C,maxRows:k,minRows:O,multiline:D=!1,name:B,onBlur:U,onChange:J,onClick:V,onFocus:X,onKeyDown:oe,onKeyUp:pe,placeholder:re,readOnly:he,renderSuffix:ue,rows:be,slotProps:ie={},slots:ve={},startAdornment:Ee,type:Ne="text",value:Ge}=i,dt=on(i,GMe),Ue=T.value!=null?T.value:Ge,{current:st}=W.useRef(Ue!=null),lt=W.useRef(),Rt=W.useCallback(an=>{},[]),Lt=Ao(lt,C,T.ref,Rt),[Fe,at]=W.useState(!1),nt=$f(),ge=Ey({props:i,muiFormControl:nt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ge.focused=nt?nt.focused:Fe,W.useEffect(()=>{!nt&&g&&Fe&&(at(!1),U&&U())},[nt,g,Fe,U]);const tt=nt&&nt.onFilled,rt=nt&&nt.onEmpty,vt=W.useCallback(an=>{BP(an)?tt&&tt():rt&&rt()},[tt,rt]);mu(()=>{st&&vt({value:Ue})},[Ue,vt,st]);const Tt=an=>{if(ge.disabled){an.stopPropagation();return}X&&X(an),T.onFocus&&T.onFocus(an),nt&&nt.onFocus?nt.onFocus(an):at(!0)},We=an=>{U&&U(an),T.onBlur&&T.onBlur(an),nt&&nt.onBlur?nt.onBlur(an):at(!1)},Vt=(an,...Je)=>{if(!st){const Yt=an.target||lt.current;if(Yt==null)throw new Error(b0(1));vt({value:Yt.value})}T.onChange&&T.onChange(an,...Je),J&&J(an,...Je)};W.useEffect(()=>{vt(lt.current)},[]);const sn=an=>{lt.current&&an.currentTarget===an.target&&lt.current.focus(),V&&V(an)};let Ut=M,Pe=T;D&&Ut==="input"&&(be?Pe=fe({type:void 0,minRows:be,maxRows:be},Pe):Pe=fe({type:void 0,maxRows:k,minRows:O},Pe),Ut=OMe);const _e=an=>{vt(an.animationName==="mui-auto-fill-cancel"?lt.current:{value:"x"})};W.useEffect(()=>{nt&&nt.setAdornedStart(!!Ee)},[nt,Ee]);const Mt=fe({},i,{color:ge.color||"primary",disabled:ge.disabled,endAdornment:x,error:ge.error,focused:ge.focused,formControl:nt,fullWidth:b,hiddenLabel:ge.hiddenLabel,multiline:D,size:ge.size,startAdornment:Ee,type:Ne}),wt=qMe(Mt),Wt=ve.root||d.Root||fR,Bt=ie.root||f.root||{},Mn=ve.input||d.Input||pR;return Pe=fe({},Pe,(r=ie.input)!=null?r:f.input),F.jsxs(W.Fragment,{children:[!v&&YMe,F.jsxs(Wt,fe({},Bt,!DP(Wt)&&{ownerState:fe({},Mt,Bt.ownerState)},{ref:n,onClick:sn},dt,{className:qt(wt.root,Bt.className,l,he&&"MuiInputBase-readOnly"),children:[Ee,F.jsx(uR.Provider,{value:null,children:F.jsx(Mn,fe({ownerState:Mt,"aria-invalid":ge.error,"aria-describedby":o,autoComplete:s,autoFocus:a,defaultValue:p,disabled:ge.disabled,id:S,onAnimationStart:_e,name:B,placeholder:re,readOnly:he,required:ge.required,rows:be,value:Ue,onKeyDown:oe,onKeyUp:pe,type:Ne},Pe,!DP(Mn)&&{as:Ut,ownerState:fe({},Mt,Pe.ownerState)},{ref:Lt,className:qt(wt.input,Pe.className,he&&"MuiInputBase-readOnly"),onBlur:We,onChange:Vt,onFocus:Tt}))}),x,ue?ue(fe({},ge,{startAdornment:Ee})):null]}))]})}),D$=XMe;function KMe(t){return jn("MuiInput",t)}const ZMe=fe({},Eb,Un("MuiInput",["root","underline","input"])),ww=ZMe;function JMe(t){return jn("MuiOutlinedInput",t)}const QMe=fe({},Eb,Un("MuiOutlinedInput",["root","notchedOutline","input"])),pg=QMe;function eEe(t){return jn("MuiFilledInput",t)}const tEe=fe({},Eb,Un("MuiFilledInput",["root","underline","input"])),ov=tEe,nEe=Ba(F.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),rEe=Ba(F.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function iEe(t){return jn("MuiAvatar",t)}Un("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const oEe=["alt","children","className","component","slots","slotProps","imgProps","sizes","src","srcSet","variant"],sEe=N0(),aEe=t=>{const{classes:e,variant:n,colorDefault:r}=t;return Vn({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},iEe,e)},lEe=Qt("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],n.colorDefault&&e.colorDefault]}})(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:fe({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:fe({backgroundColor:t.palette.grey[400]},t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})))}]})),cEe=Qt("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(t,e)=>e.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),uEe=Qt(rEe,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(t,e)=>e.fallback})({width:"75%",height:"75%"});function dEe({crossOrigin:t,referrerPolicy:e,src:n,srcSet:r}){const[i,o]=W.useState(!1);return W.useEffect(()=>{if(!n&&!r)return;o(!1);let s=!0;const a=new Image;return a.onload=()=>{s&&o("loaded")},a.onerror=()=>{s&&o("error")},a.crossOrigin=t,a.referrerPolicy=e,a.src=n,r&&(a.srcset=r),()=>{s=!1}},[t,e,n,r]),i}const hEe=W.forwardRef(function(e,n){const r=sEe({props:e,name:"MuiAvatar"}),{alt:i,children:o,className:s,component:a="div",slots:l={},slotProps:d={},imgProps:f,sizes:p,src:g,srcSet:v,variant:x="circular"}=r,b=on(r,oEe);let S=null;const M=dEe(fe({},f,{src:g,srcSet:v})),T=g||v,C=T&&M!=="error",k=fe({},r,{colorDefault:!C,component:a,variant:x}),O=aEe(k),[D,B]=zP("img",{className:O.img,elementType:cEe,externalForwardedProps:{slots:l,slotProps:{img:fe({},f,d.img)}},additionalProps:{alt:i,src:g,srcSet:v,sizes:p},ownerState:k});return C?S=F.jsx(D,fe({},B)):o||o===0?S=o:T&&i?S=i[0]:S=F.jsx(uEe,{ownerState:k,className:O.fallback}),F.jsx(lEe,fe({as:a,ownerState:k,className:qt(O.root,s),ref:n},b,{children:S}))}),fEe=hEe,pEe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],mEe={entering:{opacity:1},entered:{opacity:1}},gEe=W.forwardRef(function(e,n){const r=wm(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:s=!0,children:a,easing:l,in:d,onEnter:f,onEntered:p,onEntering:g,onExit:v,onExited:x,onExiting:b,style:S,timeout:M=i,TransitionComponent:T=M$}=e,C=on(e,pEe),k=W.useRef(null),O=Ao(k,a.ref,n),D=re=>he=>{if(re){const ue=k.current;he===void 0?re(ue):re(ue,he)}},B=D(g),U=D((re,he)=>{ane(re);const ue=xb({style:S,timeout:M,easing:l},{mode:"enter"});re.style.webkitTransition=r.transitions.create("opacity",ue),re.style.transition=r.transitions.create("opacity",ue),f&&f(re,he)}),J=D(p),V=D(b),X=D(re=>{const he=xb({style:S,timeout:M,easing:l},{mode:"exit"});re.style.webkitTransition=r.transitions.create("opacity",he),re.style.transition=r.transitions.create("opacity",he),v&&v(re)}),oe=D(x),pe=re=>{o&&o(k.current,re)};return F.jsx(T,fe({appear:s,in:d,nodeRef:k,onEnter:U,onEntered:J,onEntering:B,onExit:X,onExited:oe,onExiting:V,addEndListener:pe,timeout:M},C,{children:(re,he)=>W.cloneElement(a,fe({style:fe({opacity:0,visibility:re==="exited"&&!d?"hidden":void 0},mEe[re],S,a.props.style),ref:O},he))}))}),Pne=gEe;function yEe(t){return jn("MuiBackdrop",t)}Un("MuiBackdrop",["root","invisible"]);const vEe=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],_Ee=t=>{const{classes:e,invisible:n}=t;return Vn({root:["root",n&&"invisible"]},yEe,e)},xEe=Qt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})(({ownerState:t})=>fe({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})),bEe=W.forwardRef(function(e,n){var r,i,o;const s=er({props:e,name:"MuiBackdrop"}),{children:a,className:l,component:d="div",components:f={},componentsProps:p={},invisible:g=!1,open:v,slotProps:x={},slots:b={},TransitionComponent:S=Pne,transitionDuration:M}=s,T=on(s,vEe),C=fe({},s,{component:d,invisible:g}),k=_Ee(C),O=(r=x.root)!=null?r:p.root;return F.jsx(S,fe({in:v,timeout:M},T,{children:F.jsx(xEe,fe({"aria-hidden":!0},O,{as:(i=(o=b.root)!=null?o:f.Root)!=null?i:d,className:qt(k.root,l,O==null?void 0:O.className),ownerState:fe({},C,O==null?void 0:O.ownerState),classes:k,ref:n,children:a}))}))}),wEe=bEe;function SEe(t){return jn("MuiBadge",t)}const MEe=Un("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),mg=MEe,EEe=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],MD=10,ED=4,TEe=N0(),CEe=t=>{const{color:e,anchorOrigin:n,invisible:r,overlap:i,variant:o,classes:s={}}=t,a={root:["root"],badge:["badge",o,r&&"invisible",`anchorOrigin${Jt(n.vertical)}${Jt(n.horizontal)}`,`anchorOrigin${Jt(n.vertical)}${Jt(n.horizontal)}${Jt(i)}`,`overlap${Jt(i)}`,e!=="default"&&`color${Jt(e)}`]};return Vn(a,SEe,s)},AEe=Qt("span",{name:"MuiBadge",slot:"Root",overridesResolver:(t,e)=>e.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),PEe=Qt("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.badge,e[n.variant],e[`anchorOrigin${Jt(n.anchorOrigin.vertical)}${Jt(n.anchorOrigin.horizontal)}${Jt(n.overlap)}`],n.color!=="default"&&e[`color${Jt(n.color)}`],n.invisible&&e.invisible]}})(({theme:t})=>{var e;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:MD*2,lineHeight:1,padding:"0 6px",height:MD*2,borderRadius:MD,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.keys(((e=t.vars)!=null?e:t).palette).filter(n=>{var r,i;return((r=t.vars)!=null?r:t).palette[n].main&&((i=t.vars)!=null?i:t).palette[n].contrastText}).map(n=>({props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main,color:(t.vars||t).palette[n].contrastText}})),{props:{variant:"dot"},style:{borderRadius:ED,height:ED*2,minWidth:ED*2,padding:0}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${mg.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${mg.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${mg.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${mg.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${mg.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${mg.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${mg.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${mg.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]}}),IEe=W.forwardRef(function(e,n){var r,i,o,s,a,l;const d=TEe({props:e,name:"MuiBadge"}),{anchorOrigin:f={vertical:"top",horizontal:"right"},className:p,component:g,components:v={},componentsProps:x={},children:b,overlap:S="rectangular",color:M="default",invisible:T=!1,max:C=99,badgeContent:k,slots:O,slotProps:D,showZero:B=!1,variant:U="standard"}=d,J=on(d,EEe),{badgeContent:V,invisible:X,max:oe,displayValue:pe}=HSe({max:C,invisible:T,badgeContent:k,showZero:B}),re=Gte({anchorOrigin:f,color:M,overlap:S,variant:U,badgeContent:k}),he=X||V==null&&U!=="dot",{color:ue=M,overlap:be=S,anchorOrigin:ie=f,variant:ve=U}=he?re:d,Ee=ve!=="dot"?pe:void 0,Ne=fe({},d,{badgeContent:V,invisible:he,max:oe,displayValue:Ee,showZero:B,anchorOrigin:ie,color:ue,overlap:be,variant:ve}),Ge=CEe(Ne),dt=(r=(i=O==null?void 0:O.root)!=null?i:v.Root)!=null?r:AEe,Ue=(o=(s=O==null?void 0:O.badge)!=null?s:v.Badge)!=null?o:PEe,st=(a=D==null?void 0:D.root)!=null?a:x.root,lt=(l=D==null?void 0:D.badge)!=null?l:x.badge,Rt=Cc({elementType:dt,externalSlotProps:st,externalForwardedProps:J,additionalProps:{ref:n,as:g},ownerState:Ne,className:qt(st==null?void 0:st.className,Ge.root,p)}),Lt=Cc({elementType:Ue,externalSlotProps:lt,ownerState:Ne,className:qt(Ge.badge,lt==null?void 0:lt.className)});return F.jsxs(dt,fe({},Rt,{children:[b,F.jsx(Ue,fe({},Lt,{children:Ee}))]}))}),kEe=IEe;function REe(t){return jn("MuiBottomNavigation",t)}Un("MuiBottomNavigation",["root"]);const OEe=["children","className","component","onChange","showLabels","value"],LEe=t=>{const{classes:e}=t;return Vn({root:["root"]},REe,e)},DEe=Qt("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({display:"flex",justifyContent:"center",height:56,backgroundColor:(t.vars||t).palette.background.paper})),NEe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiBottomNavigation"}),{children:i,className:o,component:s="div",onChange:a,showLabels:l=!1,value:d}=r,f=on(r,OEe),p=fe({},r,{component:s,showLabels:l}),g=LEe(p);return F.jsx(DEe,fe({as:s,className:qt(g.root,o),ref:n,ownerState:p},f,{children:W.Children.map(i,(v,x)=>{if(!W.isValidElement(v))return null;const b=v.props.value===void 0?x:v.props.value;return W.cloneElement(v,{selected:b===d,showLabel:v.props.showLabel!==void 0?v.props.showLabel:l,value:b,onChange:a})})}))}),zEe=NEe;function FEe(t){return jn("MuiBottomNavigationAction",t)}const Ine=Un("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),BEe=["className","icon","label","onChange","onClick","selected","showLabel","value"],$Ee=t=>{const{classes:e,showLabel:n,selected:r}=t;return Vn({root:["root",!n&&!r&&"iconOnly",r&&"selected"],label:["label",!n&&!r&&"iconOnly",r&&"selected"]},FEe,e)},jEe=Qt(Mm,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.showLabel&&!n.selected&&e.iconOnly]}})(({theme:t,ownerState:e})=>fe({transition:t.transitions.create(["color","padding-top"],{duration:t.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(t.vars||t).palette.text.secondary,flexDirection:"column",flex:"1"},!e.showLabel&&!e.selected&&{paddingTop:14},!e.showLabel&&!e.selected&&!e.label&&{paddingTop:0},{[`&.${Ine.selected}`]:{color:(t.vars||t).palette.primary.main}})),UEe=Qt("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:(t,e)=>e.label})(({theme:t,ownerState:e})=>fe({fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s"},!e.showLabel&&!e.selected&&{opacity:0,transitionDelay:"0s"},{[`&.${Ine.selected}`]:{fontSize:t.typography.pxToRem(14)}})),VEe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiBottomNavigationAction"}),{className:i,icon:o,label:s,onChange:a,onClick:l,value:d}=r,f=on(r,BEe),p=r,g=$Ee(p),v=x=>{a&&a(x,d),l&&l(x)};return F.jsxs(jEe,fe({ref:n,className:qt(g.root,i),focusRipple:!0,onClick:v,ownerState:p},f,{children:[o,F.jsx(UEe,{className:g.label,ownerState:p,children:s})]}))}),FT=VEe,WEe=Un("MuiBox",["root"]),HEe=WEe,GEe=S$(),qEe=Bxe({themeId:w0,defaultTheme:GEe,defaultClassName:HEe.root,generateClassName:p$.generate}),hs=qEe;function YEe(t){return jn("MuiButton",t)}const XEe=Un("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),BT=XEe,KEe=W.createContext({}),kne=KEe,ZEe=W.createContext(void 0),Rne=ZEe,JEe=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],QEe=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:o,classes:s}=t,a={root:["root",o,`${o}${Jt(e)}`,`size${Jt(i)}`,`${o}Size${Jt(i)}`,`color${Jt(e)}`,n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${Jt(i)}`],endIcon:["icon","endIcon",`iconSize${Jt(i)}`]},l=Vn(a,YEe,s);return fe({},s,l)},One=t=>fe({},t.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},t.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},t.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),eTe=Qt(Mm,{shouldForwardProp:t=>Xl(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${Jt(n.color)}`],e[`size${Jt(n.size)}`],e[`${n.variant}Size${Jt(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})(({theme:t,ownerState:e})=>{var n,r;const i=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],o=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return fe({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":fe({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:Yi(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Yi(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(t.vars||t).palette[e.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Yi(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:o,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}),"&:active":fe({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${BT.focusVisible}`]:fe({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${BT.disabled}`]:fe({color:(t.vars||t).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${Yi(t.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:t.vars?t.vars.palette.text.primary:(n=(r=t.palette).getContrastText)==null?void 0:n.call(r,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:i,boxShadow:(t.vars||t).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:t})=>t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${BT.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${BT.disabled}`]:{boxShadow:"none"}}),tTe=Qt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e[`iconSize${Jt(n.size)}`]]}})(({ownerState:t})=>fe({display:"inherit",marginRight:8,marginLeft:-4},t.size==="small"&&{marginLeft:-2},One(t))),nTe=Qt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e[`iconSize${Jt(n.size)}`]]}})(({ownerState:t})=>fe({display:"inherit",marginRight:-4,marginLeft:8},t.size==="small"&&{marginRight:-2},One(t))),rTe=W.forwardRef(function(e,n){const r=W.useContext(kne),i=W.useContext(Rne),o=y$(r,e),s=er({props:o,name:"MuiButton"}),{children:a,color:l="primary",component:d="button",className:f,disabled:p=!1,disableElevation:g=!1,disableFocusRipple:v=!1,endIcon:x,focusVisibleClassName:b,fullWidth:S=!1,size:M="medium",startIcon:T,type:C,variant:k="text"}=s,O=on(s,JEe),D=fe({},s,{color:l,component:d,disabled:p,disableElevation:g,disableFocusRipple:v,fullWidth:S,size:M,type:C,variant:k}),B=QEe(D),U=T&&F.jsx(tTe,{className:B.startIcon,ownerState:D,children:T}),J=x&&F.jsx(nTe,{className:B.endIcon,ownerState:D,children:x}),V=i||"";return F.jsxs(eTe,fe({ownerState:D,className:qt(r.className,B.root,f,V),component:d,disabled:p,focusRipple:!v,focusVisibleClassName:qt(B.focusVisible,b),ref:n,type:C},O,{classes:B,children:[U,a,J]}))}),jr=rTe;function iTe(t){return jn("MuiButtonGroup",t)}const Ra=Un("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),oTe=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],sTe=(t,e)=>{const{ownerState:n}=t;return[{[`& .${Ra.grouped}`]:e.grouped},{[`& .${Ra.grouped}`]:e[`grouped${Jt(n.orientation)}`]},{[`& .${Ra.grouped}`]:e[`grouped${Jt(n.variant)}`]},{[`& .${Ra.grouped}`]:e[`grouped${Jt(n.variant)}${Jt(n.orientation)}`]},{[`& .${Ra.grouped}`]:e[`grouped${Jt(n.variant)}${Jt(n.color)}`]},{[`& .${Ra.firstButton}`]:e.firstButton},{[`& .${Ra.lastButton}`]:e.lastButton},{[`& .${Ra.middleButton}`]:e.middleButton},e.root,e[n.variant],n.disableElevation===!0&&e.disableElevation,n.fullWidth&&e.fullWidth,n.orientation==="vertical"&&e.vertical]},aTe=t=>{const{classes:e,color:n,disabled:r,disableElevation:i,fullWidth:o,orientation:s,variant:a}=t,l={root:["root",a,s==="vertical"&&"vertical",o&&"fullWidth",i&&"disableElevation"],grouped:["grouped",`grouped${Jt(s)}`,`grouped${Jt(a)}`,`grouped${Jt(a)}${Jt(s)}`,`grouped${Jt(a)}${Jt(n)}`,r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return Vn(l,iTe,e)},lTe=Qt("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:sTe})(({theme:t,ownerState:e})=>fe({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[2]},e.disableElevation&&{boxShadow:"none"},e.fullWidth&&{width:"100%"},e.orientation==="vertical"&&{flexDirection:"column"},{[`& .${Ra.grouped}`]:fe({minWidth:40,"&:hover":fe({},e.variant==="contained"&&{boxShadow:"none"})},e.variant==="contained"&&{boxShadow:"none"}),[`& .${Ra.firstButton},& .${Ra.middleButton}`]:fe({},e.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},e.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},e.variant==="text"&&e.orientation==="horizontal"&&{borderRight:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Ra.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="text"&&e.orientation==="vertical"&&{borderBottom:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Ra.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="text"&&e.color!=="inherit"&&{borderColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:Yi(t.palette[e.color].main,.5)},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"transparent"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"transparent"},e.variant==="contained"&&e.orientation==="horizontal"&&{borderRight:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${Ra.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="contained"&&e.orientation==="vertical"&&{borderBottom:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${Ra.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="contained"&&e.color!=="inherit"&&{borderColor:(t.vars||t).palette[e.color].dark},{"&:hover":fe({},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"currentColor"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${Ra.lastButton},& .${Ra.middleButton}`]:fe({},e.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},e.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},e.variant==="outlined"&&e.orientation==="horizontal"&&{marginLeft:-1},e.variant==="outlined"&&e.orientation==="vertical"&&{marginTop:-1})})),cTe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiButtonGroup"}),{children:i,className:o,color:s="primary",component:a="div",disabled:l=!1,disableElevation:d=!1,disableFocusRipple:f=!1,disableRipple:p=!1,fullWidth:g=!1,orientation:v="horizontal",size:x="medium",variant:b="outlined"}=r,S=on(r,oTe),M=fe({},r,{color:s,component:a,disabled:l,disableElevation:d,disableFocusRipple:f,disableRipple:p,fullWidth:g,orientation:v,size:x,variant:b}),T=aTe(M),C=W.useMemo(()=>({className:T.grouped,color:s,disabled:l,disableElevation:d,disableFocusRipple:f,disableRipple:p,fullWidth:g,size:x,variant:b}),[s,l,d,f,p,g,x,b,T.grouped]),k=_be(i),O=k.length,D=B=>{const U=B===0,J=B===O-1;return U&&J?"":U?T.firstButton:J?T.lastButton:T.middleButton};return F.jsx(lTe,fe({as:a,role:"group",className:qt(T.root,o),ref:n,ownerState:M},S,{children:F.jsx(kne.Provider,{value:C,children:k.map((B,U)=>F.jsx(Rne.Provider,{value:D(U),children:B},U))})}))}),uTe=cTe;function dTe(t){return jn("MuiCard",t)}Un("MuiCard",["root"]);const hTe=["className","raised"],fTe=t=>{const{classes:e}=t;return Vn({root:["root"]},dTe,e)},pTe=Qt(Gs,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),mTe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiCard"}),{className:i,raised:o=!1}=r,s=on(r,hTe),a=fe({},r,{raised:o}),l=fTe(a);return F.jsx(pTe,fe({className:qt(l.root,i),elevation:o?8:void 0,ref:n,ownerState:a},s))}),jf=mTe;function gTe(t){return jn("MuiCardActions",t)}Un("MuiCardActions",["root","spacing"]);const yTe=["disableSpacing","className"],vTe=t=>{const{classes:e,disableSpacing:n}=t;return Vn({root:["root",!n&&"spacing"]},gTe,e)},_Te=Qt("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})(({ownerState:t})=>fe({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),xTe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:o}=r,s=on(r,yTe),a=fe({},r,{disableSpacing:i}),l=vTe(a);return F.jsx(_Te,fe({className:qt(l.root,o),ownerState:a,ref:n},s))}),Lne=xTe;function bTe(t){return jn("MuiCardContent",t)}Un("MuiCardContent",["root"]);const wTe=["className","component"],STe=t=>{const{classes:e}=t;return Vn({root:["root"]},bTe,e)},MTe=Qt("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),ETe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiCardContent"}),{className:i,component:o="div"}=r,s=on(r,wTe),a=fe({},r,{component:o}),l=STe(a);return F.jsx(MTe,fe({as:o,className:qt(l.root,i),ownerState:a,ref:n},s))}),N$=ETe;function TTe(t){return jn("MuiCardMedia",t)}Un("MuiCardMedia",["root","media","img"]);const CTe=["children","className","component","image","src","style"],ATe=t=>{const{classes:e,isMediaComponent:n,isImageComponent:r}=t;return Vn({root:["root",n&&"media",r&&"img"]},TTe,e)},PTe=Qt("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{isMediaComponent:r,isImageComponent:i}=n;return[e.root,r&&e.media,i&&e.img]}})(({ownerState:t})=>fe({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},t.isMediaComponent&&{width:"100%"},t.isImageComponent&&{objectFit:"cover"})),ITe=["video","audio","picture","iframe","img"],kTe=["picture","img"],RTe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiCardMedia"}),{children:i,className:o,component:s="div",image:a,src:l,style:d}=r,f=on(r,CTe),p=ITe.indexOf(s)!==-1,g=!p&&a?fe({backgroundImage:`url("${a}")`},d):d,v=fe({},r,{component:s,isMediaComponent:p,isImageComponent:kTe.indexOf(s)!==-1}),x=ATe(v);return F.jsx(PTe,fe({className:qt(x.root,o),as:s,role:!p&&a?"img":void 0,ref:n,style:g,ownerState:v,src:p?a||l:void 0},f,{children:i}))}),OTe=RTe;function LTe(t){return jn("PrivateSwitchBase",t)}Un("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const DTe=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],NTe=t=>{const{classes:e,checked:n,disabled:r,edge:i}=t,o={root:["root",n&&"checked",r&&"disabled",i&&`edge${Jt(i)}`],input:["input"]};return Vn(o,LTe,e)},zTe=Qt(Mm)(({ownerState:t})=>fe({padding:9,borderRadius:"50%"},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12})),FTe=Qt("input",{shouldForwardProp:Xl})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),BTe=W.forwardRef(function(e,n){const{autoFocus:r,checked:i,checkedIcon:o,className:s,defaultChecked:a,disabled:l,disableFocusRipple:d=!1,edge:f=!1,icon:p,id:g,inputProps:v,inputRef:x,name:b,onBlur:S,onChange:M,onFocus:T,readOnly:C,required:k=!1,tabIndex:O,type:D,value:B}=e,U=on(e,DTe),[J,V]=yb({controlled:i,default:!!a,name:"SwitchBase",state:"checked"}),X=$f(),oe=ve=>{T&&T(ve),X&&X.onFocus&&X.onFocus(ve)},pe=ve=>{S&&S(ve),X&&X.onBlur&&X.onBlur(ve)},re=ve=>{if(ve.nativeEvent.defaultPrevented)return;const Ee=ve.target.checked;V(Ee),M&&M(ve,Ee)};let he=l;X&&typeof he>"u"&&(he=X.disabled);const ue=D==="checkbox"||D==="radio",be=fe({},e,{checked:J,disabled:he,disableFocusRipple:d,edge:f}),ie=NTe(be);return F.jsxs(zTe,fe({component:"span",className:qt(ie.root,s),centerRipple:!0,focusRipple:!d,disabled:he,tabIndex:null,role:void 0,onFocus:oe,onBlur:pe,ownerState:be,ref:n},U,{children:[F.jsx(FTe,fe({autoFocus:r,checked:i,defaultChecked:a,className:ie.input,disabled:he,id:ue?g:void 0,name:b,onChange:re,readOnly:C,ref:x,required:k,ownerState:be,tabIndex:O,type:D},D==="checkbox"&&B===void 0?{}:{value:B},v)),J?o:p]}))}),Dne=BTe,$Te=Ba(F.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),jTe=Ba(F.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),UTe=Ba(F.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function VTe(t){return jn("MuiCheckbox",t)}const WTe=Un("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),TD=WTe,HTe=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],GTe=t=>{const{classes:e,indeterminate:n,color:r,size:i}=t,o={root:["root",n&&"indeterminate",`color${Jt(r)}`,`size${Jt(i)}`]},s=Vn(o,VTe,e);return fe({},e,s)},qTe=Qt(Dne,{shouldForwardProp:t=>Xl(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.indeterminate&&e.indeterminate,e[`size${Jt(n.size)}`],n.color!=="default"&&e[`color${Jt(n.color)}`]]}})(({theme:t,ownerState:e})=>fe({color:(t.vars||t).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${e.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Yi(e.color==="default"?t.palette.action.active:t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${TD.checked}, &.${TD.indeterminate}`]:{color:(t.vars||t).palette[e.color].main},[`&.${TD.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),YTe=F.jsx(jTe,{}),XTe=F.jsx($Te,{}),KTe=F.jsx(UTe,{}),ZTe=W.forwardRef(function(e,n){var r,i;const o=er({props:e,name:"MuiCheckbox"}),{checkedIcon:s=YTe,color:a="primary",icon:l=XTe,indeterminate:d=!1,indeterminateIcon:f=KTe,inputProps:p,size:g="medium",className:v}=o,x=on(o,HTe),b=d?f:l,S=d?f:s,M=fe({},o,{color:a,indeterminate:d,size:g}),T=GTe(M);return F.jsx(qTe,fe({type:"checkbox",inputProps:fe({"data-indeterminate":d},p),icon:W.cloneElement(b,{fontSize:(r=b.props.fontSize)!=null?r:g}),checkedIcon:W.cloneElement(S,{fontSize:(i=S.props.fontSize)!=null?i:g}),ownerState:M,ref:n,className:qt(T.root,v)},x,{classes:T}))}),m9=ZTe,JTe=Lbe({createStyledComponent:Qt("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${Jt(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),useThemeProps:t=>er({props:t,name:"MuiContainer"})}),oE=JTe,QTe=(t,e)=>fe({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},e&&!t.vars&&{colorScheme:t.palette.mode}),eCe=t=>fe({color:(t.vars||t).palette.text.primary},t.typography.body1,{backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}}),tCe=(t,e=!1)=>{var n;const r={};e&&t.colorSchemes&&Object.entries(t.colorSchemes).forEach(([s,a])=>{var l;r[t.getColorSchemeSelector(s).replace(/\s*&/,"")]={colorScheme:(l=a.palette)==null?void 0:l.mode}});let i=fe({html:QTe(t,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:fe({margin:0},eCe(t),{"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}})},r);const o=(n=t.components)==null||(n=n.MuiCssBaseline)==null?void 0:n.styleOverrides;return o&&(i=[i,o]),i};function nCe(t){const e=er({props:t,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=e;return F.jsxs(W.Fragment,{children:[F.jsx(Ane,{styles:i=>tCe(i,r)}),n]})}function rCe(t){return jn("MuiModal",t)}Un("MuiModal",["root","hidden","backdrop"]);const iCe=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],oCe=t=>{const{open:e,exited:n,classes:r}=t;return Vn({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},rCe,r)},sCe=Qt("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(({theme:t,ownerState:e})=>fe({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),aCe=Qt(wEe,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),lCe=W.forwardRef(function(e,n){var r,i,o,s,a,l;const d=er({name:"MuiModal",props:e}),{BackdropComponent:f=aCe,BackdropProps:p,className:g,closeAfterTransition:v=!1,children:x,container:b,component:S,components:M={},componentsProps:T={},disableAutoFocus:C=!1,disableEnforceFocus:k=!1,disableEscapeKeyDown:O=!1,disablePortal:D=!1,disableRestoreFocus:B=!1,disableScrollLock:U=!1,hideBackdrop:J=!1,keepMounted:V=!1,onBackdropClick:X,open:oe,slotProps:pe,slots:re}=d,he=on(d,iCe),ue=fe({},d,{closeAfterTransition:v,disableAutoFocus:C,disableEnforceFocus:k,disableEscapeKeyDown:O,disablePortal:D,disableRestoreFocus:B,disableScrollLock:U,hideBackdrop:J,keepMounted:V}),{getRootProps:be,getBackdropProps:ie,getTransitionProps:ve,portalRef:Ee,isTopModal:Ne,exited:Ge,hasTransition:dt}=f2e(fe({},ue,{rootRef:n})),Ue=fe({},ue,{exited:Ge}),st=oCe(Ue),lt={};if(x.props.tabIndex===void 0&&(lt.tabIndex="-1"),dt){const{onEnter:tt,onExited:rt}=ve();lt.onEnter=tt,lt.onExited=rt}const Rt=(r=(i=re==null?void 0:re.root)!=null?i:M.Root)!=null?r:sCe,Lt=(o=(s=re==null?void 0:re.backdrop)!=null?s:M.Backdrop)!=null?o:f,Fe=(a=pe==null?void 0:pe.root)!=null?a:T.root,at=(l=pe==null?void 0:pe.backdrop)!=null?l:T.backdrop,nt=Cc({elementType:Rt,externalSlotProps:Fe,externalForwardedProps:he,getSlotProps:be,additionalProps:{ref:n,as:S},ownerState:Ue,className:qt(g,Fe==null?void 0:Fe.className,st==null?void 0:st.root,!Ue.open&&Ue.exited&&(st==null?void 0:st.hidden))}),ge=Cc({elementType:Lt,externalSlotProps:at,additionalProps:p,getSlotProps:tt=>ie(fe({},tt,{onClick:rt=>{X&&X(rt),tt!=null&&tt.onClick&&tt.onClick(rt)}})),className:qt(at==null?void 0:at.className,p==null?void 0:p.className,st==null?void 0:st.backdrop),ownerState:Ue});return!V&&!oe&&(!dt||Ge)?null:F.jsx(pne,{ref:Ee,container:b,disablePortal:D,children:F.jsxs(Rt,fe({},nt,{children:[!J&&f?F.jsx(Lt,fe({},ge)):null,F.jsx(r2e,{disableEnforceFocus:k,disableAutoFocus:C,disableRestoreFocus:B,isEnabled:Ne,open:oe,children:W.cloneElement(x,lt)})]}))})}),cCe=lCe;function uCe(t){return jn("MuiDivider",t)}const dCe=Un("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),g9=dCe,hCe=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],fCe=t=>{const{absolute:e,children:n,classes:r,flexItem:i,light:o,orientation:s,textAlign:a,variant:l}=t;return Vn({root:["root",e&&"absolute",l,o&&"light",s==="vertical"&&"vertical",i&&"flexItem",n&&"withChildren",n&&s==="vertical"&&"withChildrenVertical",a==="right"&&s!=="vertical"&&"textAlignRight",a==="left"&&s!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",s==="vertical"&&"wrapperVertical"]},uCe,r)},pCe=Qt("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.absolute&&e.absolute,e[n.variant],n.light&&e.light,n.orientation==="vertical"&&e.vertical,n.flexItem&&e.flexItem,n.children&&e.withChildren,n.children&&n.orientation==="vertical"&&e.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&e.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&e.textAlignLeft]}})(({theme:t,ownerState:e})=>fe({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},e.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},e.light&&{borderColor:t.vars?`rgba(${t.vars.palette.dividerChannel} / 0.08)`:Yi(t.palette.divider,.08)},e.variant==="inset"&&{marginLeft:72},e.variant==="middle"&&e.orientation==="horizontal"&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},e.variant==="middle"&&e.orientation==="vertical"&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},e.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},e.flexItem&&{alignSelf:"stretch",height:"auto"}),({ownerState:t})=>fe({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}}),({theme:t,ownerState:e})=>fe({},e.children&&e.orientation!=="vertical"&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`}}),({theme:t,ownerState:e})=>fe({},e.children&&e.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`}}),({ownerState:t})=>fe({},t.textAlign==="right"&&t.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},t.textAlign==="left"&&t.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),mCe=Qt("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.wrapper,n.orientation==="vertical"&&e.wrapperVertical]}})(({theme:t,ownerState:e})=>fe({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`},e.orientation==="vertical"&&{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`})),Nne=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiDivider"}),{absolute:i=!1,children:o,className:s,component:a=o?"div":"hr",flexItem:l=!1,light:d=!1,orientation:f="horizontal",role:p=a!=="hr"?"separator":void 0,textAlign:g="center",variant:v="fullWidth"}=r,x=on(r,hCe),b=fe({},r,{absolute:i,component:a,flexItem:l,light:d,orientation:f,role:p,textAlign:g,variant:v}),S=fCe(b);return F.jsx(pCe,fe({as:a,className:qt(S.root,s),role:p,ref:n,ownerState:b},x,{children:o?F.jsx(mCe,{className:S.wrapper,ownerState:b,children:o}):null}))});Nne.muiSkipListHighlight=!0;const Tb=Nne,gCe=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],yCe=t=>{const{classes:e,disableUnderline:n}=t,i=Vn({root:["root",!n&&"underline"],input:["input"]},eEe,e);return fe({},e,i)},vCe=Qt(fR,{shouldForwardProp:t=>Xl(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...dR(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{var n;const r=t.palette.mode==="light",i=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return fe({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:o,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:o}},[`&.${ov.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:o},[`&.${ov.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n=(t.vars||t).palette[e.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${ov.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${ov.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${ov.disabled}, .${ov.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${ov.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&fe({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9}))}),_Ce=Qt(pR,{name:"MuiFilledInput",slot:"Input",overridesResolver:hR})(({theme:t,ownerState:e})=>fe({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),zne=W.forwardRef(function(e,n){var r,i,o,s;const a=er({props:e,name:"MuiFilledInput"}),{components:l={},componentsProps:d,fullWidth:f=!1,inputComponent:p="input",multiline:g=!1,slotProps:v,slots:x={},type:b="text"}=a,S=on(a,gCe),M=fe({},a,{fullWidth:f,inputComponent:p,multiline:g,type:b}),T=yCe(a),C={root:{ownerState:M},input:{ownerState:M}},k=v??d?za(C,v??d):C,O=(r=(i=x.root)!=null?i:l.Root)!=null?r:vCe,D=(o=(s=x.input)!=null?s:l.Input)!=null?o:_Ce;return F.jsx(D$,fe({slots:{root:O,input:D},componentsProps:k,fullWidth:f,inputComponent:p,multiline:g,ref:n,type:b},S,{classes:T}))});zne.muiName="Input";const Fne=zne;function xCe(t){return jn("MuiFormControl",t)}Un("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const bCe=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],wCe=t=>{const{classes:e,margin:n,fullWidth:r}=t,i={root:["root",n!=="none"&&`margin${Jt(n)}`,r&&"fullWidth"]};return Vn(i,xCe,e)},SCe=Qt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:t},e)=>fe({},e.root,e[`margin${Jt(t.margin)}`],t.fullWidth&&e.fullWidth)})(({ownerState:t})=>fe({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},t.margin==="normal"&&{marginTop:16,marginBottom:8},t.margin==="dense"&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})),MCe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiFormControl"}),{children:i,className:o,color:s="primary",component:a="div",disabled:l=!1,error:d=!1,focused:f,fullWidth:p=!1,hiddenLabel:g=!1,margin:v="none",required:x=!1,size:b="medium",variant:S="outlined"}=r,M=on(r,bCe),T=fe({},r,{color:s,component:a,disabled:l,error:d,fullWidth:p,hiddenLabel:g,margin:v,required:x,size:b,variant:S}),C=wCe(T),[k,O]=W.useState(()=>{let pe=!1;return i&&W.Children.forEach(i,re=>{if(!AA(re,["Input","Select"]))return;const he=AA(re,["Select"])?re.props.input:re;he&&VMe(he.props)&&(pe=!0)}),pe}),[D,B]=W.useState(()=>{let pe=!1;return i&&W.Children.forEach(i,re=>{AA(re,["Input","Select"])&&(BP(re.props,!0)||BP(re.props.inputProps,!0))&&(pe=!0)}),pe}),[U,J]=W.useState(!1);l&&U&&J(!1);const V=f!==void 0&&!l?f:U;let X;const oe=W.useMemo(()=>({adornedStart:k,setAdornedStart:O,color:s,disabled:l,error:d,filled:D,focused:V,fullWidth:p,hiddenLabel:g,size:b,onBlur:()=>{J(!1)},onEmpty:()=>{B(!1)},onFilled:()=>{B(!0)},onFocus:()=>{J(!0)},registerEffect:X,required:x,variant:S}),[k,s,l,d,D,V,p,g,X,x,b,S]);return F.jsx(uR.Provider,{value:oe,children:F.jsx(SCe,fe({as:a,ownerState:T,className:qt(C.root,o),ref:n},M,{children:i}))})}),sE=MCe,ECe=Ube({createStyledComponent:Qt("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root}),useThemeProps:t=>er({props:t,name:"MuiStack"})}),TCe=ECe;function CCe(t){return jn("MuiFormControlLabel",t)}const ACe=Un("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),hS=ACe,PCe=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],ICe=t=>{const{classes:e,disabled:n,labelPlacement:r,error:i,required:o}=t,s={root:["root",n&&"disabled",`labelPlacement${Jt(r)}`,i&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return Vn(s,CCe,e)},kCe=Qt("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${hS.label}`]:e.label},e.root,e[`labelPlacement${Jt(n.labelPlacement)}`]]}})(({theme:t,ownerState:e})=>fe({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${hS.disabled}`]:{cursor:"default"}},e.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},e.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},e.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${hS.label}`]:{[`&.${hS.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})),RCe=Qt("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(({theme:t})=>({[`&.${hS.error}`]:{color:(t.vars||t).palette.error.main}})),OCe=W.forwardRef(function(e,n){var r,i;const o=er({props:e,name:"MuiFormControlLabel"}),{className:s,componentsProps:a={},control:l,disabled:d,disableTypography:f,label:p,labelPlacement:g="end",required:v,slotProps:x={}}=o,b=on(o,PCe),S=$f(),M=(r=d??l.props.disabled)!=null?r:S==null?void 0:S.disabled,T=v??l.props.required,C={disabled:M,required:T};["checked","name","onChange","value","inputRef"].forEach(J=>{typeof l.props[J]>"u"&&typeof o[J]<"u"&&(C[J]=o[J])});const k=Ey({props:o,muiFormControl:S,states:["error"]}),O=fe({},o,{disabled:M,labelPlacement:g,required:T,error:k.error}),D=ICe(O),B=(i=x.typography)!=null?i:a.typography;let U=p;return U!=null&&U.type!==Bn&&!f&&(U=F.jsx(Bn,fe({component:"span"},B,{className:qt(D.label,B==null?void 0:B.className),children:U}))),F.jsxs(kCe,fe({className:qt(D.root,s),ownerState:O,ref:n},b,{children:[W.cloneElement(l,C),T?F.jsxs(TCe,{display:"block",children:[U,F.jsxs(RCe,{ownerState:O,"aria-hidden":!0,className:D.asterisk,children:["","*"]})]}):U]}))}),y9=OCe;function LCe(t){return jn("MuiFormGroup",t)}Un("MuiFormGroup",["root","row","error"]);const DCe=["className","row"],NCe=t=>{const{classes:e,row:n,error:r}=t;return Vn({root:["root",n&&"row",r&&"error"]},LCe,e)},zCe=Qt("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.row&&e.row]}})(({ownerState:t})=>fe({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})),FCe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiFormGroup"}),{className:i,row:o=!1}=r,s=on(r,DCe),a=$f(),l=Ey({props:r,muiFormControl:a,states:["error"]}),d=fe({},r,{row:o,error:l.error}),f=NCe(d);return F.jsx(zCe,fe({className:qt(f.root,i),ownerState:d,ref:n},s))}),BCe=FCe;function $Ce(t){return jn("MuiFormHelperText",t)}const jCe=Un("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),v9=jCe;var _9;const UCe=["children","className","component","disabled","error","filled","focused","margin","required","variant"],VCe=t=>{const{classes:e,contained:n,size:r,disabled:i,error:o,filled:s,focused:a,required:l}=t,d={root:["root",i&&"disabled",o&&"error",r&&`size${Jt(r)}`,n&&"contained",a&&"focused",s&&"filled",l&&"required"]};return Vn(d,$Ce,e)},WCe=Qt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${Jt(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(({theme:t,ownerState:e})=>fe({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${v9.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${v9.error}`]:{color:(t.vars||t).palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),HCe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiFormHelperText"}),{children:i,className:o,component:s="p"}=r,a=on(r,UCe),l=$f(),d=Ey({props:r,muiFormControl:l,states:["variant","size","disabled","error","filled","focused","required"]}),f=fe({},r,{component:s,contained:d.variant==="filled"||d.variant==="outlined",variant:d.variant,size:d.size,disabled:d.disabled,error:d.error,filled:d.filled,focused:d.focused,required:d.required}),p=VCe(f);return F.jsx(WCe,fe({as:s,ownerState:f,className:qt(p.root,o),ref:n},a,{children:i===" "?_9||(_9=F.jsx("span",{className:"notranslate",children:""})):i}))}),GCe=HCe;function qCe(t){return jn("MuiFormLabel",t)}const YCe=Un("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),RS=YCe,XCe=["children","className","color","component","disabled","error","filled","focused","required"],KCe=t=>{const{classes:e,color:n,focused:r,disabled:i,error:o,filled:s,required:a}=t,l={root:["root",`color${Jt(n)}`,i&&"disabled",o&&"error",s&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]};return Vn(l,qCe,e)},ZCe=Qt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:t},e)=>fe({},e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled)})(({theme:t,ownerState:e})=>fe({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${RS.focused}`]:{color:(t.vars||t).palette[e.color].main},[`&.${RS.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${RS.error}`]:{color:(t.vars||t).palette.error.main}})),JCe=Qt("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(({theme:t})=>({[`&.${RS.error}`]:{color:(t.vars||t).palette.error.main}})),QCe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiFormLabel"}),{children:i,className:o,component:s="label"}=r,a=on(r,XCe),l=$f(),d=Ey({props:r,muiFormControl:l,states:["color","required","focused","disabled","error","filled"]}),f=fe({},r,{color:d.color||"primary",component:s,disabled:d.disabled,error:d.error,filled:d.filled,focused:d.focused,required:d.required}),p=KCe(f);return F.jsxs(ZCe,fe({as:s,ownerState:f,className:qt(p.root,o),ref:n},a,{children:[i,d.required&&F.jsxs(JCe,{ownerState:f,"aria-hidden":!0,className:p.asterisk,children:["","*"]})]}))}),eAe=QCe,tAe=W.createContext(),x9=tAe;function nAe(t){return jn("MuiGrid",t)}const rAe=[0,1,2,3,4,5,6,7,8,9,10],iAe=["column-reverse","column","row-reverse","row"],oAe=["nowrap","wrap-reverse","wrap"],Sw=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],M2=Un("MuiGrid",["root","container","item","zeroMinWidth",...rAe.map(t=>`spacing-xs-${t}`),...iAe.map(t=>`direction-xs-${t}`),...oAe.map(t=>`wrap-xs-${t}`),...Sw.map(t=>`grid-xs-${t}`),...Sw.map(t=>`grid-sm-${t}`),...Sw.map(t=>`grid-md-${t}`),...Sw.map(t=>`grid-lg-${t}`),...Sw.map(t=>`grid-xl-${t}`)]),sAe=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function Yx(t){const e=parseFloat(t);return`${e}${String(t).replace(String(e),"")||"px"}`}function aAe({theme:t,ownerState:e}){let n;return t.breakpoints.keys.reduce((r,i)=>{let o={};if(e[i]&&(n=e[i]),!n)return r;if(n===!0)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const s=r0({values:e.columns,breakpoints:t.breakpoints.values}),a=typeof s=="object"?s[i]:s;if(a==null)return r;const l=`${Math.round(n/a*1e8)/1e6}%`;let d={};if(e.container&&e.item&&e.columnSpacing!==0){const f=t.spacing(e.columnSpacing);if(f!=="0px"){const p=`calc(${l} + ${Yx(f)})`;d={flexBasis:p,maxWidth:p}}}o=fe({flexBasis:l,flexGrow:0,maxWidth:l},d)}return t.breakpoints.values[i]===0?Object.assign(r,o):r[t.breakpoints.up(i)]=o,r},{})}function lAe({theme:t,ownerState:e}){const n=r0({values:e.direction,breakpoints:t.breakpoints.values});return Tc({theme:t},n,r=>{const i={flexDirection:r};return r.indexOf("column")===0&&(i[`& > .${M2.item}`]={maxWidth:"none"}),i})}function Bne({breakpoints:t,values:e}){let n="";Object.keys(e).forEach(i=>{n===""&&e[i]!==0&&(n=i)});const r=Object.keys(t).sort((i,o)=>t[i]-t[o]);return r.slice(0,r.indexOf(n))}function cAe({theme:t,ownerState:e}){const{container:n,rowSpacing:r}=e;let i={};if(n&&r!==0){const o=r0({values:r,breakpoints:t.breakpoints.values});let s;typeof o=="object"&&(s=Bne({breakpoints:t.breakpoints.values,values:o})),i=Tc({theme:t},o,(a,l)=>{var d;const f=t.spacing(a);return f!=="0px"?{marginTop:`-${Yx(f)}`,[`& > .${M2.item}`]:{paddingTop:Yx(f)}}:(d=s)!=null&&d.includes(l)?{}:{marginTop:0,[`& > .${M2.item}`]:{paddingTop:0}}})}return i}function uAe({theme:t,ownerState:e}){const{container:n,columnSpacing:r}=e;let i={};if(n&&r!==0){const o=r0({values:r,breakpoints:t.breakpoints.values});let s;typeof o=="object"&&(s=Bne({breakpoints:t.breakpoints.values,values:o})),i=Tc({theme:t},o,(a,l)=>{var d;const f=t.spacing(a);return f!=="0px"?{width:`calc(100% + ${Yx(f)})`,marginLeft:`-${Yx(f)}`,[`& > .${M2.item}`]:{paddingLeft:Yx(f)}}:(d=s)!=null&&d.includes(l)?{}:{width:"100%",marginLeft:0,[`& > .${M2.item}`]:{paddingLeft:0}}})}return i}function dAe(t,e,n={}){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[n[`spacing-xs-${String(t)}`]];const r=[];return e.forEach(i=>{const o=t[i];Number(o)>0&&r.push(n[`spacing-${i}-${String(o)}`])}),r}const hAe=Qt("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{container:r,direction:i,item:o,spacing:s,wrap:a,zeroMinWidth:l,breakpoints:d}=n;let f=[];r&&(f=dAe(s,d,e));const p=[];return d.forEach(g=>{const v=n[g];v&&p.push(e[`grid-${g}-${String(v)}`])}),[e.root,r&&e.container,o&&e.item,l&&e.zeroMinWidth,...f,i!=="row"&&e[`direction-xs-${String(i)}`],a!=="wrap"&&e[`wrap-xs-${String(a)}`],...p]}})(({ownerState:t})=>fe({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},t.wrap!=="wrap"&&{flexWrap:t.wrap}),lAe,cAe,uAe,aAe);function fAe(t,e){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[`spacing-xs-${String(t)}`];const n=[];return e.forEach(r=>{const i=t[r];if(Number(i)>0){const o=`spacing-${r}-${String(i)}`;n.push(o)}}),n}const pAe=t=>{const{classes:e,container:n,direction:r,item:i,spacing:o,wrap:s,zeroMinWidth:a,breakpoints:l}=t;let d=[];n&&(d=fAe(o,l));const f=[];l.forEach(g=>{const v=t[g];v&&f.push(`grid-${g}-${String(v)}`)});const p={root:["root",n&&"container",i&&"item",a&&"zeroMinWidth",...d,r!=="row"&&`direction-xs-${String(r)}`,s!=="wrap"&&`wrap-xs-${String(s)}`,...f]};return Vn(p,nAe,e)},mAe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiGrid"}),{breakpoints:i}=wm(),o=ZM(r),{className:s,columns:a,columnSpacing:l,component:d="div",container:f=!1,direction:p="row",item:g=!1,rowSpacing:v,spacing:x=0,wrap:b="wrap",zeroMinWidth:S=!1}=o,M=on(o,sAe),T=v||x,C=l||x,k=W.useContext(x9),O=f?a||12:k,D={},B=fe({},M);i.keys.forEach(V=>{M[V]!=null&&(D[V]=M[V],delete B[V])});const U=fe({},o,{columns:O,container:f,direction:p,item:g,rowSpacing:T,columnSpacing:C,wrap:b,zeroMinWidth:S,spacing:x},D,{breakpoints:i.keys}),J=pAe(U);return F.jsx(x9.Provider,{value:O,children:F.jsx(hAe,fe({ownerState:U,className:qt(J.root,s),as:d,ref:n},B))})}),b9=mAe,gAe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function lF(t){return`scale(${t}, ${t**2})`}const yAe={entering:{opacity:1,transform:lF(1)},entered:{opacity:1,transform:"none"}},CD=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),$ne=W.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:o,easing:s,in:a,onEnter:l,onEntered:d,onEntering:f,onExit:p,onExited:g,onExiting:v,style:x,timeout:b="auto",TransitionComponent:S=M$}=e,M=on(e,gAe),T=jg(),C=W.useRef(),k=wm(),O=W.useRef(null),D=Ao(O,o.ref,n),B=he=>ue=>{if(he){const be=O.current;ue===void 0?he(be):he(be,ue)}},U=B(f),J=B((he,ue)=>{ane(he);const{duration:be,delay:ie,easing:ve}=xb({style:x,timeout:b,easing:s},{mode:"enter"});let Ee;b==="auto"?(Ee=k.transitions.getAutoHeightDuration(he.clientHeight),C.current=Ee):Ee=be,he.style.transition=[k.transitions.create("opacity",{duration:Ee,delay:ie}),k.transitions.create("transform",{duration:CD?Ee:Ee*.666,delay:ie,easing:ve})].join(","),l&&l(he,ue)}),V=B(d),X=B(v),oe=B(he=>{const{duration:ue,delay:be,easing:ie}=xb({style:x,timeout:b,easing:s},{mode:"exit"});let ve;b==="auto"?(ve=k.transitions.getAutoHeightDuration(he.clientHeight),C.current=ve):ve=ue,he.style.transition=[k.transitions.create("opacity",{duration:ve,delay:be}),k.transitions.create("transform",{duration:CD?ve:ve*.666,delay:CD?be:be||ve*.333,easing:ie})].join(","),he.style.opacity=0,he.style.transform=lF(.75),p&&p(he)}),pe=B(g),re=he=>{b==="auto"&&T.start(C.current||0,he),r&&r(O.current,he)};return F.jsx(S,fe({appear:i,in:a,nodeRef:O,onEnter:J,onEntered:V,onEntering:U,onExit:oe,onExited:pe,onExiting:X,addEndListener:re,timeout:b==="auto"?null:b},M,{children:(he,ue)=>W.cloneElement(o,fe({style:fe({opacity:0,transform:lF(.75),visibility:he==="exited"&&!a?"hidden":void 0},yAe[he],x,o.props.style),ref:D},ue))}))});$ne.muiSupportAuto=!0;const $P=$ne,vAe=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],_Ae=t=>{const{classes:e,disableUnderline:n}=t,i=Vn({root:["root",!n&&"underline"],input:["input"]},KMe,e);return fe({},e,i)},xAe=Qt(fR,{shouldForwardProp:t=>Xl(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...dR(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{let r=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),fe({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${ww.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${ww.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${ww.disabled}, .${ww.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${ww.disabled}:before`]:{borderBottomStyle:"dotted"}})}),bAe=Qt(pR,{name:"MuiInput",slot:"Input",overridesResolver:hR})({}),jne=W.forwardRef(function(e,n){var r,i,o,s;const a=er({props:e,name:"MuiInput"}),{disableUnderline:l,components:d={},componentsProps:f,fullWidth:p=!1,inputComponent:g="input",multiline:v=!1,slotProps:x,slots:b={},type:S="text"}=a,M=on(a,vAe),T=_Ae(a),k={root:{ownerState:{disableUnderline:l}}},O=x??f?za(x??f,k):k,D=(r=(i=b.root)!=null?i:d.Root)!=null?r:xAe,B=(o=(s=b.input)!=null?s:d.Input)!=null?o:bAe;return F.jsx(D$,fe({slots:{root:D,input:B},slotProps:O,fullWidth:p,inputComponent:g,multiline:v,ref:n,type:S},M,{classes:T}))});jne.muiName="Input";const Une=jne;function wAe(t){return jn("MuiInputAdornment",t)}const SAe=Un("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),w9=SAe;var S9;const MAe=["children","className","component","disablePointerEvents","disableTypography","position","variant"],EAe=(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${Jt(n.position)}`],n.disablePointerEvents===!0&&e.disablePointerEvents,e[n.variant]]},TAe=t=>{const{classes:e,disablePointerEvents:n,hiddenLabel:r,position:i,size:o,variant:s}=t,a={root:["root",n&&"disablePointerEvents",i&&`position${Jt(i)}`,s,r&&"hiddenLabel",o&&`size${Jt(o)}`]};return Vn(a,wAe,e)},CAe=Qt("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:EAe})(({theme:t,ownerState:e})=>fe({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},e.variant==="filled"&&{[`&.${w9.positionStart}&:not(.${w9.hiddenLabel})`]:{marginTop:16}},e.position==="start"&&{marginRight:8},e.position==="end"&&{marginLeft:8},e.disablePointerEvents===!0&&{pointerEvents:"none"})),AAe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiInputAdornment"}),{children:i,className:o,component:s="div",disablePointerEvents:a=!1,disableTypography:l=!1,position:d,variant:f}=r,p=on(r,MAe),g=$f()||{};let v=f;f&&g.variant,g&&!v&&(v=g.variant);const x=fe({},r,{hiddenLabel:g.hiddenLabel,size:g.size,disablePointerEvents:a,position:d,variant:v}),b=TAe(x);return F.jsx(uR.Provider,{value:null,children:F.jsx(CAe,fe({as:s,ownerState:x,className:qt(b.root,o),ref:n},p,{children:typeof i=="string"&&!l?F.jsx(Bn,{color:"text.secondary",children:i}):F.jsxs(W.Fragment,{children:[d==="start"?S9||(S9=F.jsx("span",{className:"notranslate",children:""})):null,i]})}))})}),PAe=AAe;function IAe(t){return jn("MuiInputLabel",t)}Un("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const kAe=["disableAnimation","margin","shrink","variant","className"],RAe=t=>{const{classes:e,formControl:n,size:r,shrink:i,disableAnimation:o,variant:s,required:a}=t,l={root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&r!=="normal"&&`size${Jt(r)}`,s],asterisk:[a&&"asterisk"]},d=Vn(l,IAe,e);return fe({},e,d)},OAe=Qt(eAe,{shouldForwardProp:t=>Xl(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${RS.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(({theme:t,ownerState:e})=>fe({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},e.variant==="filled"&&fe({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&fe({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&fe({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),LAe=W.forwardRef(function(e,n){const r=er({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,shrink:o,className:s}=r,a=on(r,kAe),l=$f();let d=o;typeof d>"u"&&l&&(d=l.filled||l.focused||l.adornedStart);const f=Ey({props:r,muiFormControl:l,states:["size","variant","required","focused"]}),p=fe({},r,{disableAnimation:i,formControl:l,shrink:d,size:f.size,variant:f.variant,required:f.required,focused:f.focused}),g=RAe(p);return F.jsx(OAe,fe({"data-shrink":d,ownerState:p,ref:n,className:qt(g.root,s)},a,{classes:g}))}),aE=LAe;function DAe(t){return jn("MuiLinearProgress",t)}Un("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const NAe=["className","color","value","valueBuffer","variant"];let h1=t=>t,M9,E9,T9,C9,A9,P9;const cF=4,zAe=D0(M9||(M9=h1`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),FAe=D0(E9||(E9=h1`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),BAe=D0(T9||(T9=h1`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),$Ae=t=>{const{classes:e,variant:n,color:r}=t,i={root:["root",`color${Jt(r)}`,n],dashed:["dashed",`dashedColor${Jt(r)}`],bar1:["bar",`barColor${Jt(r)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar",n!=="buffer"&&`barColor${Jt(r)}`,n==="buffer"&&`color${Jt(r)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return Vn(i,DAe,e)},z$=(t,e)=>e==="inherit"?"currentColor":t.vars?t.vars.palette.LinearProgress[`${e}Bg`]:t.palette.mode==="light"?_b(t.palette[e].main,.62):vb(t.palette[e].main,.5),jAe=Qt("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${Jt(n.color)}`],e[n.variant]]}})(({ownerState:t,theme:e})=>fe({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:z$(e,t.color)},t.color==="inherit"&&t.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},t.variant==="buffer"&&{backgroundColor:"transparent"},t.variant==="query"&&{transform:"rotate(180deg)"})),UAe=Qt("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.dashed,e[`dashedColor${Jt(n.color)}`]]}})(({ownerState:t,theme:e})=>{const n=z$(e,t.color);return fe({position:"absolute",marginTop:0,height:"100%",width:"100%"},t.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},YM(C9||(C9=h1`
    animation: ${0} 3s infinite linear;
  `),BAe)),VAe=Qt("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e[`barColor${Jt(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar1Indeterminate,n.variant==="determinate"&&e.bar1Determinate,n.variant==="buffer"&&e.bar1Buffer]}})(({ownerState:t,theme:e})=>fe({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:t.color==="inherit"?"currentColor":(e.vars||e).palette[t.color].main},t.variant==="determinate"&&{transition:`transform .${cF}s linear`},t.variant==="buffer"&&{zIndex:1,transition:`transform .${cF}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&YM(A9||(A9=h1`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),zAe)),WAe=Qt("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e[`barColor${Jt(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar2Indeterminate,n.variant==="buffer"&&e.bar2Buffer]}})(({ownerState:t,theme:e})=>fe({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},t.variant!=="buffer"&&{backgroundColor:t.color==="inherit"?"currentColor":(e.vars||e).palette[t.color].main},t.color==="inherit"&&{opacity:.3},t.variant==="buffer"&&{backgroundColor:z$(e,t.color),transition:`transform .${cF}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&YM(P9||(P9=h1`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),FAe)),HAe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiLinearProgress"}),{className:i,color:o="primary",value:s,valueBuffer:a,variant:l="indeterminate"}=r,d=on(r,NAe),f=fe({},r,{color:o,variant:l}),p=$Ae(f),g=eE(),v={},x={bar1:{},bar2:{}};if((l==="determinate"||l==="buffer")&&s!==void 0){v["aria-valuenow"]=Math.round(s),v["aria-valuemin"]=0,v["aria-valuemax"]=100;let b=s-100;g&&(b=-b),x.bar1.transform=`translateX(${b}%)`}if(l==="buffer"&&a!==void 0){let b=(a||0)-100;g&&(b=-b),x.bar2.transform=`translateX(${b}%)`}return F.jsxs(jAe,fe({className:qt(p.root,i),ownerState:f,role:"progressbar"},v,{ref:n},d,{children:[l==="buffer"?F.jsx(UAe,{className:p.dashed,ownerState:f}):null,F.jsx(VAe,{className:p.bar1,ownerState:f,style:x.bar1}),l==="determinate"?null:F.jsx(WAe,{className:p.bar2,ownerState:f,style:x.bar2})]}))}),GAe=HAe;function qAe(t){return jn("MuiLink",t)}const YAe=Un("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),XAe=YAe,Vne={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},KAe=t=>Vne[t]||t,ZAe=({theme:t,ownerState:e})=>{const n=KAe(e.color),r=gb(t,`palette.${n}`,!1)||e.color,i=gb(t,`palette.${n}Channel`);return"vars"in t&&i?`rgba(${i} / 0.4)`:Yi(r,.4)},JAe=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],QAe=t=>{const{classes:e,component:n,focusVisible:r,underline:i}=t,o={root:["root",`underline${Jt(i)}`,n==="button"&&"button",r&&"focusVisible"]};return Vn(o,qAe,e)},ePe=Qt(Bn,{name:"MuiLink",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`underline${Jt(n.underline)}`],n.component==="button"&&e.button]}})(({theme:t,ownerState:e})=>fe({},e.underline==="none"&&{textDecoration:"none"},e.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},e.underline==="always"&&fe({textDecoration:"underline"},e.color!=="inherit"&&{textDecorationColor:ZAe({theme:t,ownerState:e})},{"&:hover":{textDecorationColor:"inherit"}}),e.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${XAe.focusVisible}`]:{outline:"auto"}})),tPe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiLink"}),{className:i,color:o="primary",component:s="a",onBlur:a,onFocus:l,TypographyClasses:d,underline:f="always",variant:p="inherit",sx:g}=r,v=on(r,JAe),{isFocusVisibleRef:x,onBlur:b,onFocus:S,ref:M}=oR(),[T,C]=W.useState(!1),k=Ao(n,M),O=J=>{b(J),x.current===!1&&C(!1),a&&a(J)},D=J=>{S(J),x.current===!0&&C(!0),l&&l(J)},B=fe({},r,{color:o,component:s,focusVisible:T,underline:f,variant:p}),U=QAe(B);return F.jsx(ePe,fe({color:o,className:qt(U.root,i),classes:d,component:s,onBlur:O,onFocus:D,ref:k,ownerState:B,variant:p,sx:[...Object.keys(Vne).includes(o)?[]:[{color:o}],...Array.isArray(g)?g:[g]]},v))}),nPe=tPe,rPe=W.createContext({}),E0=rPe;function iPe(t){return jn("MuiList",t)}Un("MuiList",["root","padding","dense","subheader"]);const oPe=["children","className","component","dense","disablePadding","subheader"],sPe=t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return Vn({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},iPe,e)},aPe=Qt("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})(({ownerState:t})=>fe({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})),lPe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiList"}),{children:i,className:o,component:s="ul",dense:a=!1,disablePadding:l=!1,subheader:d}=r,f=on(r,oPe),p=W.useMemo(()=>({dense:a}),[a]),g=fe({},r,{component:s,dense:a,disablePadding:l}),v=sPe(g);return F.jsx(E0.Provider,{value:p,children:F.jsxs(aPe,fe({as:s,className:qt(v.root,o),ref:n,ownerState:g},f,{children:[d,i]}))})}),cPe=lPe;function uPe(t){return jn("MuiListItemButton",t)}const dPe=Un("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),Mw=dPe,hPe=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],fPe=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters]},pPe=t=>{const{alignItems:e,classes:n,dense:r,disabled:i,disableGutters:o,divider:s,selected:a}=t,d=Vn({root:["root",r&&"dense",!o&&"gutters",s&&"divider",i&&"disabled",e==="flex-start"&&"alignItemsFlexStart",a&&"selected"]},uPe,n);return fe({},n,d)},mPe=Qt(Mm,{shouldForwardProp:t=>Xl(t)||t==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:fPe})(({theme:t,ownerState:e})=>fe({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Mw.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Yi(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${Mw.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Yi(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${Mw.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Yi(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Yi(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${Mw.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Mw.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},e.alignItems==="flex-start"&&{alignItems:"flex-start"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.dense&&{paddingTop:4,paddingBottom:4})),gPe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:o=!1,component:s="div",children:a,dense:l=!1,disableGutters:d=!1,divider:f=!1,focusVisibleClassName:p,selected:g=!1,className:v}=r,x=on(r,hPe),b=W.useContext(E0),S=W.useMemo(()=>({dense:l||b.dense||!1,alignItems:i,disableGutters:d}),[i,b.dense,l,d]),M=W.useRef(null);mu(()=>{o&&M.current&&M.current.focus()},[o]);const T=fe({},r,{alignItems:i,dense:S.dense,disableGutters:d,divider:f,selected:g}),C=pPe(T),k=Ao(M,n);return F.jsx(E0.Provider,{value:S,children:F.jsx(mPe,fe({ref:k,href:x.href||x.to,component:(x.href||x.to)&&s==="div"?"button":s,focusVisibleClassName:qt(C.focusVisible,p),ownerState:T,className:qt(C.root,v)},x,{classes:C,children:a}))})}),yPe=gPe;function vPe(t){return jn("MuiListItemAvatar",t)}Un("MuiListItemAvatar",["root","alignItemsFlexStart"]);const _Pe=["className"],xPe=t=>{const{alignItems:e,classes:n}=t;return Vn({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},vPe,n)},bPe=Qt("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(({ownerState:t})=>fe({minWidth:56,flexShrink:0},t.alignItems==="flex-start"&&{marginTop:8})),wPe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiListItemAvatar"}),{className:i}=r,o=on(r,_Pe),s=W.useContext(E0),a=fe({},r,{alignItems:s.alignItems}),l=xPe(a);return F.jsx(bPe,fe({className:qt(l.root,i),ownerState:a,ref:n},o))}),SPe=wPe,MPe=Un("MuiListItemIcon",["root","alignItemsFlexStart"]),I9=MPe;function EPe(t){return jn("MuiListItemText",t)}const TPe=Un("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),jP=TPe,CPe=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],APe=t=>{const{classes:e,inset:n,primary:r,secondary:i,dense:o}=t;return Vn({root:["root",n&&"inset",o&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},EPe,e)},PPe=Qt("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${jP.primary}`]:e.primary},{[`& .${jP.secondary}`]:e.secondary},e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})(({ownerState:t})=>fe({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})),IPe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiListItemText"}),{children:i,className:o,disableTypography:s=!1,inset:a=!1,primary:l,primaryTypographyProps:d,secondary:f,secondaryTypographyProps:p}=r,g=on(r,CPe),{dense:v}=W.useContext(E0);let x=l??i,b=f;const S=fe({},r,{disableTypography:s,inset:a,primary:!!x,secondary:!!b,dense:v}),M=APe(S);return x!=null&&x.type!==Bn&&!s&&(x=F.jsx(Bn,fe({variant:v?"body2":"body1",className:M.primary,component:d!=null&&d.variant?void 0:"span",display:"block"},d,{children:x}))),b!=null&&b.type!==Bn&&!s&&(b=F.jsx(Bn,fe({variant:"body2",className:M.secondary,color:"text.secondary",display:"block"},p,{children:b}))),F.jsxs(PPe,fe({className:qt(M.root,o),ownerState:S,ref:n},g,{children:[x,b]}))}),kPe=IPe,RPe=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function AD(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function k9(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function Wne(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.indexOf(e.keys.join(""))===0}function Ew(t,e,n,r,i,o){let s=!1,a=i(t,e,e?n:!1);for(;a;){if(a===t.firstChild){if(s)return!1;s=!0}const l=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!Wne(a,o)||l)a=i(t,a,n);else return a.focus(),!0}return!1}const OPe=W.forwardRef(function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:o=!1,children:s,className:a,disabledItemsFocusable:l=!1,disableListWrap:d=!1,onKeyDown:f,variant:p="selectedMenu"}=e,g=on(e,RPe),v=W.useRef(null),x=W.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});mu(()=>{i&&v.current.focus()},[i]),W.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(C,{direction:k})=>{const O=!v.current.style.width;if(C.clientHeight<v.current.clientHeight&&O){const D=`${Wte(As(C))}px`;v.current.style[k==="rtl"?"paddingLeft":"paddingRight"]=D,v.current.style.width=`calc(100% + ${D})`}return v.current}}),[]);const b=C=>{const k=v.current,O=C.key,D=As(k).activeElement;if(O==="ArrowDown")C.preventDefault(),Ew(k,D,d,l,AD);else if(O==="ArrowUp")C.preventDefault(),Ew(k,D,d,l,k9);else if(O==="Home")C.preventDefault(),Ew(k,null,d,l,AD);else if(O==="End")C.preventDefault(),Ew(k,null,d,l,k9);else if(O.length===1){const B=x.current,U=O.toLowerCase(),J=performance.now();B.keys.length>0&&(J-B.lastTime>500?(B.keys=[],B.repeating=!0,B.previousKeyMatched=!0):B.repeating&&U!==B.keys[0]&&(B.repeating=!1)),B.lastTime=J,B.keys.push(U);const V=D&&!B.repeating&&Wne(D,B);B.previousKeyMatched&&(V||Ew(k,D,!1,l,AD,B))?C.preventDefault():B.previousKeyMatched=!1}f&&f(C)},S=Ao(v,n);let M=-1;W.Children.forEach(s,(C,k)=>{if(!W.isValidElement(C)){M===k&&(M+=1,M>=s.length&&(M=-1));return}C.props.disabled||(p==="selectedMenu"&&C.props.selected||M===-1)&&(M=k),M===k&&(C.props.disabled||C.props.muiSkipListHighlight||C.type.muiSkipListHighlight)&&(M+=1,M>=s.length&&(M=-1))});const T=W.Children.map(s,(C,k)=>{if(k===M){const O={};return o&&(O.autoFocus=!0),C.props.tabIndex===void 0&&p==="selectedMenu"&&(O.tabIndex=0),W.cloneElement(C,O)}return C});return F.jsx(cPe,fe({role:"menu",ref:S,className:a,onKeyDown:b,tabIndex:i?0:-1},g,{children:T}))}),LPe=OPe;function DPe(t){return jn("MuiPopover",t)}Un("MuiPopover",["root","paper"]);const NPe=["onEntering"],zPe=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],FPe=["slotProps"];function R9(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function O9(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function L9(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function PD(t){return typeof t=="function"?t():t}const BPe=t=>{const{classes:e}=t;return Vn({root:["root"],paper:["paper"]},DPe,e)},$Pe=Qt(cCe,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Hne=Qt(Gs,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),jPe=W.forwardRef(function(e,n){var r,i,o;const s=er({props:e,name:"MuiPopover"}),{action:a,anchorEl:l,anchorOrigin:d={vertical:"top",horizontal:"left"},anchorPosition:f,anchorReference:p="anchorEl",children:g,className:v,container:x,elevation:b=8,marginThreshold:S=16,open:M,PaperProps:T={},slots:C,slotProps:k,transformOrigin:O={vertical:"top",horizontal:"left"},TransitionComponent:D=$P,transitionDuration:B="auto",TransitionProps:{onEntering:U}={},disableScrollLock:J=!1}=s,V=on(s.TransitionProps,NPe),X=on(s,zPe),oe=(r=k==null?void 0:k.paper)!=null?r:T,pe=W.useRef(),re=Ao(pe,oe.ref),he=fe({},s,{anchorOrigin:d,anchorReference:p,elevation:b,marginThreshold:S,externalPaperSlotProps:oe,transformOrigin:O,TransitionComponent:D,transitionDuration:B,TransitionProps:V}),ue=BPe(he),be=W.useCallback(()=>{if(p==="anchorPosition")return f;const tt=PD(l),vt=(tt&&tt.nodeType===1?tt:As(pe.current).body).getBoundingClientRect();return{top:vt.top+R9(vt,d.vertical),left:vt.left+O9(vt,d.horizontal)}},[l,d.horizontal,d.vertical,f,p]),ie=W.useCallback(tt=>({vertical:R9(tt,O.vertical),horizontal:O9(tt,O.horizontal)}),[O.horizontal,O.vertical]),ve=W.useCallback(tt=>{const rt={width:tt.offsetWidth,height:tt.offsetHeight},vt=ie(rt);if(p==="none")return{top:null,left:null,transformOrigin:L9(vt)};const Tt=be();let We=Tt.top-vt.vertical,Vt=Tt.left-vt.horizontal;const sn=We+rt.height,Ut=Vt+rt.width,Pe=Lf(PD(l)),_e=Pe.innerHeight-S,Mt=Pe.innerWidth-S;if(S!==null&&We<S){const wt=We-S;We-=wt,vt.vertical+=wt}else if(S!==null&&sn>_e){const wt=sn-_e;We-=wt,vt.vertical+=wt}if(S!==null&&Vt<S){const wt=Vt-S;Vt-=wt,vt.horizontal+=wt}else if(Ut>Mt){const wt=Ut-Mt;Vt-=wt,vt.horizontal+=wt}return{top:`${Math.round(We)}px`,left:`${Math.round(Vt)}px`,transformOrigin:L9(vt)}},[l,p,be,ie,S]),[Ee,Ne]=W.useState(M),Ge=W.useCallback(()=>{const tt=pe.current;if(!tt)return;const rt=ve(tt);rt.top!==null&&(tt.style.top=rt.top),rt.left!==null&&(tt.style.left=rt.left),tt.style.transformOrigin=rt.transformOrigin,Ne(!0)},[ve]);W.useEffect(()=>(J&&window.addEventListener("scroll",Ge),()=>window.removeEventListener("scroll",Ge)),[l,J,Ge]);const dt=(tt,rt)=>{U&&U(tt,rt),Ge()},Ue=()=>{Ne(!1)};W.useEffect(()=>{M&&Ge()}),W.useImperativeHandle(a,()=>M?{updatePosition:()=>{Ge()}}:null,[M,Ge]),W.useEffect(()=>{if(!M)return;const tt=JM(()=>{Ge()}),rt=Lf(l);return rt.addEventListener("resize",tt),()=>{tt.clear(),rt.removeEventListener("resize",tt)}},[l,M,Ge]);let st=B;B==="auto"&&!D.muiSupportAuto&&(st=void 0);const lt=x||(l?As(PD(l)).body:void 0),Rt=(i=C==null?void 0:C.root)!=null?i:$Pe,Lt=(o=C==null?void 0:C.paper)!=null?o:Hne,Fe=Cc({elementType:Lt,externalSlotProps:fe({},oe,{style:Ee?oe.style:fe({},oe.style,{opacity:0})}),additionalProps:{elevation:b,ref:re},ownerState:he,className:qt(ue.paper,oe==null?void 0:oe.className)}),at=Cc({elementType:Rt,externalSlotProps:(k==null?void 0:k.root)||{},externalForwardedProps:X,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:lt,open:M},ownerState:he,className:qt(ue.root,v)}),{slotProps:nt}=at,ge=on(at,FPe);return F.jsx(Rt,fe({},ge,!DP(Rt)&&{slotProps:nt,disableScrollLock:J},{children:F.jsx(D,fe({appear:!0,in:M,onEntering:dt,onExited:Ue,timeout:st},V,{children:F.jsx(Lt,fe({},Fe,{children:g}))}))}))}),UPe=jPe;function VPe(t){return jn("MuiMenu",t)}Un("MuiMenu",["root","paper","list"]);const WPe=["onEntering"],HPe=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],GPe={vertical:"top",horizontal:"right"},qPe={vertical:"top",horizontal:"left"},YPe=t=>{const{classes:e}=t;return Vn({root:["root"],paper:["paper"],list:["list"]},VPe,e)},XPe=Qt(UPe,{shouldForwardProp:t=>Xl(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),KPe=Qt(Hne,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),ZPe=Qt(LPe,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),JPe=W.forwardRef(function(e,n){var r,i;const o=er({props:e,name:"MuiMenu"}),{autoFocus:s=!0,children:a,className:l,disableAutoFocusItem:d=!1,MenuListProps:f={},onClose:p,open:g,PaperProps:v={},PopoverClasses:x,transitionDuration:b="auto",TransitionProps:{onEntering:S}={},variant:M="selectedMenu",slots:T={},slotProps:C={}}=o,k=on(o.TransitionProps,WPe),O=on(o,HPe),D=eE(),B=fe({},o,{autoFocus:s,disableAutoFocusItem:d,MenuListProps:f,onEntering:S,PaperProps:v,transitionDuration:b,TransitionProps:k,variant:M}),U=YPe(B),J=s&&!d&&g,V=W.useRef(null),X=(ie,ve)=>{V.current&&V.current.adjustStyleForScrollbar(ie,{direction:D?"rtl":"ltr"}),S&&S(ie,ve)},oe=ie=>{ie.key==="Tab"&&(ie.preventDefault(),p&&p(ie,"tabKeyDown"))};let pe=-1;W.Children.map(a,(ie,ve)=>{W.isValidElement(ie)&&(ie.props.disabled||(M==="selectedMenu"&&ie.props.selected||pe===-1)&&(pe=ve))});const re=(r=T.paper)!=null?r:KPe,he=(i=C.paper)!=null?i:v,ue=Cc({elementType:T.root,externalSlotProps:C.root,ownerState:B,className:[U.root,l]}),be=Cc({elementType:re,externalSlotProps:he,ownerState:B,className:U.paper});return F.jsx(XPe,fe({onClose:p,anchorOrigin:{vertical:"bottom",horizontal:D?"right":"left"},transformOrigin:D?GPe:qPe,slots:{paper:re,root:T.root},slotProps:{root:ue,paper:be},open:g,ref:n,transitionDuration:b,TransitionProps:fe({onEntering:X},k),ownerState:B},O,{classes:x,children:F.jsx(ZPe,fe({onKeyDown:oe,actions:V,autoFocus:s&&(pe===-1||d),autoFocusItem:J,variant:M},f,{className:qt(U.list,f.className),children:a}))}))}),F$=JPe;function QPe(t){return jn("MuiMenuItem",t)}const eIe=Un("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Tw=eIe,tIe=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],nIe=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},rIe=t=>{const{disabled:e,dense:n,divider:r,disableGutters:i,selected:o,classes:s}=t,l=Vn({root:["root",n&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},QPe,s);return fe({},s,l)},iIe=Qt(Mm,{shouldForwardProp:t=>Xl(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:nIe})(({theme:t,ownerState:e})=>fe({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Tw.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Yi(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${Tw.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Yi(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${Tw.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Yi(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Yi(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${Tw.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Tw.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${g9.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${g9.inset}`]:{marginLeft:52},[`& .${jP.root}`]:{marginTop:0,marginBottom:0},[`& .${jP.inset}`]:{paddingLeft:36},[`& .${I9.root}`]:{minWidth:36}},!e.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},e.dense&&fe({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${I9.root} svg`]:{fontSize:"1.25rem"}}))),oIe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:s=!1,divider:a=!1,disableGutters:l=!1,focusVisibleClassName:d,role:f="menuitem",tabIndex:p,className:g}=r,v=on(r,tIe),x=W.useContext(E0),b=W.useMemo(()=>({dense:s||x.dense||!1,disableGutters:l}),[x.dense,s,l]),S=W.useRef(null);mu(()=>{i&&S.current&&S.current.focus()},[i]);const M=fe({},r,{dense:b.dense,divider:a,disableGutters:l}),T=rIe(r),C=Ao(S,n);let k;return r.disabled||(k=p!==void 0?p:-1),F.jsx(E0.Provider,{value:b,children:F.jsx(iIe,fe({ref:C,role:f,tabIndex:k,component:o,focusVisibleClassName:qt(T.focusVisible,d),className:qt(T.root,g)},v,{ownerState:M,classes:T}))})}),au=oIe;function sIe(t){return jn("MuiNativeSelect",t)}const aIe=Un("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),B$=aIe,lIe=["className","disabled","error","IconComponent","inputRef","variant"],cIe=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:o,error:s}=t,a={select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon",`icon${Jt(n)}`,o&&"iconOpen",r&&"disabled"]};return Vn(a,sIe,e)},Gne=({ownerState:t,theme:e})=>fe({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":fe({},e.vars?{backgroundColor:`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${B$.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},t.variant==="filled"&&{"&&&":{paddingRight:32}},t.variant==="outlined"&&{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}),uIe=Qt("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Xl,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${B$.multiple}`]:e.multiple}]}})(Gne),qne=({ownerState:t,theme:e})=>fe({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${B$.disabled}`]:{color:(e.vars||e).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},t.variant==="filled"&&{right:7},t.variant==="outlined"&&{right:7}),dIe=Qt("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${Jt(n.variant)}`],n.open&&e.iconOpen]}})(qne),hIe=W.forwardRef(function(e,n){const{className:r,disabled:i,error:o,IconComponent:s,inputRef:a,variant:l="standard"}=e,d=on(e,lIe),f=fe({},e,{disabled:i,variant:l,error:o}),p=cIe(f);return F.jsxs(W.Fragment,{children:[F.jsx(uIe,fe({ownerState:f,className:qt(p.select,r),disabled:i,ref:a||n},d)),e.multiple?null:F.jsx(dIe,{as:s,ownerState:f,className:p.icon})]})}),fIe=hIe;var D9;const pIe=["children","classes","className","label","notched"],mIe=Qt("fieldset",{shouldForwardProp:Xl})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),gIe=Qt("legend",{shouldForwardProp:Xl})(({ownerState:t,theme:e})=>fe({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},t.withLabel&&fe({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function yIe(t){const{className:e,label:n,notched:r}=t,i=on(t,pIe),o=n!=null&&n!=="",s=fe({},t,{notched:r,withLabel:o});return F.jsx(mIe,fe({"aria-hidden":!0,className:e,ownerState:s},i,{children:F.jsx(gIe,{ownerState:s,children:o?F.jsx("span",{children:n}):D9||(D9=F.jsx("span",{className:"notranslate",children:""}))})}))}const vIe=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],_Ie=t=>{const{classes:e}=t,r=Vn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},JMe,e);return fe({},e,r)},xIe=Qt(fR,{shouldForwardProp:t=>Xl(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:dR})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return fe({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${pg.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${pg.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${pg.focused} .${pg.notchedOutline}`]:{borderColor:(t.vars||t).palette[e.color].main,borderWidth:2},[`&.${pg.error} .${pg.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${pg.disabled} .${pg.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&fe({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),bIe=Qt(yIe,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),wIe=Qt(pR,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:hR})(({theme:t,ownerState:e})=>fe({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),Yne=W.forwardRef(function(e,n){var r,i,o,s,a;const l=er({props:e,name:"MuiOutlinedInput"}),{components:d={},fullWidth:f=!1,inputComponent:p="input",label:g,multiline:v=!1,notched:x,slots:b={},type:S="text"}=l,M=on(l,vIe),T=_Ie(l),C=$f(),k=Ey({props:l,muiFormControl:C,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),O=fe({},l,{color:k.color||"primary",disabled:k.disabled,error:k.error,focused:k.focused,formControl:C,fullWidth:f,hiddenLabel:k.hiddenLabel,multiline:v,size:k.size,type:S}),D=(r=(i=b.root)!=null?i:d.Root)!=null?r:xIe,B=(o=(s=b.input)!=null?s:d.Input)!=null?o:wIe;return F.jsx(D$,fe({slots:{root:D,input:B},renderSuffix:U=>F.jsx(bIe,{ownerState:O,className:T.notchedOutline,label:g!=null&&g!==""&&k.required?a||(a=F.jsxs(W.Fragment,{children:[g,"","*"]})):g,notched:typeof x<"u"?x:!!(U.startAdornment||U.filled||U.focused)}),fullWidth:f,inputComponent:p,multiline:v,ref:n,type:S},M,{classes:fe({},T,{notchedOutline:null})}))});Yne.muiName="Input";const $$=Yne;function SIe(t){return jn("MuiSelect",t)}const Cw=Un("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var N9;const MIe=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],EIe=Qt("div",{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${Cw.select}`]:e.select},{[`&.${Cw.select}`]:e[n.variant]},{[`&.${Cw.error}`]:e.error},{[`&.${Cw.multiple}`]:e.multiple}]}})(Gne,{[`&.${Cw.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),TIe=Qt("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${Jt(n.variant)}`],n.open&&e.iconOpen]}})(qne),CIe=Qt("input",{shouldForwardProp:t=>sne(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function z9(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function AIe(t){return t==null||typeof t=="string"&&!t.trim()}const PIe=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:o,error:s}=t,a={select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon",`icon${Jt(n)}`,o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return Vn(a,SIe,e)},IIe=W.forwardRef(function(e,n){var r;const{"aria-describedby":i,"aria-label":o,autoFocus:s,autoWidth:a,children:l,className:d,defaultOpen:f,defaultValue:p,disabled:g,displayEmpty:v,error:x=!1,IconComponent:b,inputRef:S,labelId:M,MenuProps:T={},multiple:C,name:k,onBlur:O,onChange:D,onClose:B,onFocus:U,onOpen:J,open:V,readOnly:X,renderValue:oe,SelectDisplayProps:pe={},tabIndex:re,value:he,variant:ue="standard"}=e,be=on(e,MIe),[ie,ve]=yb({controlled:he,default:p,name:"Select"}),[Ee,Ne]=yb({controlled:V,default:f,name:"Select"}),Ge=W.useRef(null),dt=W.useRef(null),[Ue,st]=W.useState(null),{current:lt}=W.useRef(V!=null),[Rt,Lt]=W.useState(),Fe=Ao(n,S),at=W.useCallback(un=>{dt.current=un,un&&st(un)},[]),nt=Ue==null?void 0:Ue.parentNode;W.useImperativeHandle(Fe,()=>({focus:()=>{dt.current.focus()},node:Ge.current,value:ie}),[ie]),W.useEffect(()=>{f&&Ee&&Ue&&!lt&&(Lt(a?null:nt.clientWidth),dt.current.focus())},[Ue,a]),W.useEffect(()=>{s&&dt.current.focus()},[s]),W.useEffect(()=>{if(!M)return;const un=As(dt.current).getElementById(M);if(un){const St=()=>{getSelection().isCollapsed&&dt.current.focus()};return un.addEventListener("click",St),()=>{un.removeEventListener("click",St)}}},[M]);const ge=(un,St)=>{un?J&&J(St):B&&B(St),lt||(Lt(a?null:nt.clientWidth),Ne(un))},tt=un=>{un.button===0&&(un.preventDefault(),dt.current.focus(),ge(!0,un))},rt=un=>{ge(!1,un)},vt=W.Children.toArray(l),Tt=un=>{const St=vt.find(gt=>gt.props.value===un.target.value);St!==void 0&&(ve(St.props.value),D&&D(un,St))},We=un=>St=>{let gt;if(St.currentTarget.hasAttribute("tabindex")){if(C){gt=Array.isArray(ie)?ie.slice():[];const Ae=ie.indexOf(un.props.value);Ae===-1?gt.push(un.props.value):gt.splice(Ae,1)}else gt=un.props.value;if(un.props.onClick&&un.props.onClick(St),ie!==gt&&(ve(gt),D)){const Ae=St.nativeEvent||St,ft=new Ae.constructor(Ae.type,Ae);Object.defineProperty(ft,"target",{writable:!0,value:{value:gt,name:k}}),D(ft,un)}C||ge(!1,St)}},Vt=un=>{X||[" ","ArrowUp","ArrowDown","Enter"].indexOf(un.key)!==-1&&(un.preventDefault(),ge(!0,un))},sn=Ue!==null&&Ee,Ut=un=>{!sn&&O&&(Object.defineProperty(un,"target",{writable:!0,value:{value:ie,name:k}}),O(un))};delete be["aria-invalid"];let Pe,_e;const Mt=[];let wt=!1;(BP({value:ie})||v)&&(oe?Pe=oe(ie):wt=!0);const Wt=vt.map(un=>{if(!W.isValidElement(un))return null;let St;if(C){if(!Array.isArray(ie))throw new Error(b0(2));St=ie.some(gt=>z9(gt,un.props.value)),St&&wt&&Mt.push(un.props.children)}else St=z9(ie,un.props.value),St&&wt&&(_e=un.props.children);return W.cloneElement(un,{"aria-selected":St?"true":"false",onClick:We(un),onKeyUp:gt=>{gt.key===" "&&gt.preventDefault(),un.props.onKeyUp&&un.props.onKeyUp(gt)},role:"option",selected:St,value:void 0,"data-value":un.props.value})});wt&&(C?Mt.length===0?Pe=null:Pe=Mt.reduce((un,St,gt)=>(un.push(St),gt<Mt.length-1&&un.push(", "),un),[]):Pe=_e);let Bt=Rt;!a&&lt&&Ue&&(Bt=nt.clientWidth);let Mn;typeof re<"u"?Mn=re:Mn=g?null:0;const an=pe.id||(k?`mui-component-select-${k}`:void 0),Je=fe({},e,{variant:ue,value:ie,open:sn,error:x}),Yt=PIe(Je),xn=fe({},T.PaperProps,(r=T.slotProps)==null?void 0:r.paper),en=rR();return F.jsxs(W.Fragment,{children:[F.jsx(EIe,fe({ref:at,tabIndex:Mn,role:"combobox","aria-controls":en,"aria-disabled":g?"true":void 0,"aria-expanded":sn?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[M,an].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:Vt,onMouseDown:g||X?null:tt,onBlur:Ut,onFocus:U},pe,{ownerState:Je,className:qt(pe.className,Yt.select,d),id:an,children:AIe(Pe)?N9||(N9=F.jsx("span",{className:"notranslate",children:""})):Pe})),F.jsx(CIe,fe({"aria-invalid":x,value:Array.isArray(ie)?ie.join(","):ie,name:k,ref:Ge,"aria-hidden":!0,onChange:Tt,tabIndex:-1,disabled:g,className:Yt.nativeInput,autoFocus:s,ownerState:Je},be)),F.jsx(TIe,{as:b,className:Yt.icon,ownerState:Je}),F.jsx(F$,fe({id:`menu-${k||""}`,anchorEl:nt,open:sn,onClose:rt,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},T,{MenuListProps:fe({"aria-labelledby":M,role:"listbox","aria-multiselectable":C?"true":void 0,disableListWrap:!0,id:en},T.MenuListProps),slotProps:fe({},T.slotProps,{paper:fe({},xn,{style:fe({minWidth:Bt},xn!=null?xn.style:null)})}),children:Wt}))]})}),kIe=IIe,RIe=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],OIe=["root"],LIe=t=>{const{classes:e}=t;return e},j$={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>Xl(t)&&t!=="variant",slot:"Root"},DIe=Qt(Une,j$)(""),NIe=Qt($$,j$)(""),zIe=Qt(Fne,j$)(""),Xne=W.forwardRef(function(e,n){const r=er({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:o,classes:s={},className:a,defaultOpen:l=!1,displayEmpty:d=!1,IconComponent:f=nEe,id:p,input:g,inputProps:v,label:x,labelId:b,MenuProps:S,multiple:M=!1,native:T=!1,onClose:C,onOpen:k,open:O,renderValue:D,SelectDisplayProps:B,variant:U="outlined"}=r,J=on(r,RIe),V=T?fIe:kIe,X=$f(),oe=Ey({props:r,muiFormControl:X,states:["variant","error"]}),pe=oe.variant||U,re=fe({},r,{variant:pe,classes:s}),he=LIe(re),ue=on(he,OIe),be=g||{standard:F.jsx(DIe,{ownerState:re}),outlined:F.jsx(NIe,{label:x,ownerState:re}),filled:F.jsx(zIe,{ownerState:re})}[pe],ie=Ao(n,be.ref);return F.jsx(W.Fragment,{children:W.cloneElement(be,fe({inputComponent:V,inputProps:fe({children:o,error:oe.error,IconComponent:f,variant:pe,type:void 0,multiple:M},T?{id:p}:{autoWidth:i,defaultOpen:l,displayEmpty:d,labelId:b,MenuProps:S,onClose:C,onOpen:k,open:O,renderValue:D,SelectDisplayProps:fe({id:p},B)},v,{classes:v?za(ue,v.classes):ue},g?g.props.inputProps:{})},(M&&T||d)&&pe==="outlined"?{notched:!0}:{},{ref:ie,className:qt(be.props.className,a,he.root)},!g&&{variant:pe},J))})});Xne.muiName="Select";const lE=Xne;function FIe(t){return jn("MuiSnackbarContent",t)}Un("MuiSnackbarContent",["root","message","action"]);const BIe=["action","className","message","role"],$Ie=t=>{const{classes:e}=t;return Vn({root:["root"],action:["action"],message:["message"]},FIe,e)},jIe=Qt(Gs,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>{const e=t.palette.mode==="light"?.8:.98,n=Gbe(t.palette.background.default,e);return fe({},t.typography.body2,{color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(n),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),UIe=Qt("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(t,e)=>e.message})({padding:"8px 0"}),VIe=Qt("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(t,e)=>e.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),WIe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiSnackbarContent"}),{action:i,className:o,message:s,role:a="alert"}=r,l=on(r,BIe),d=r,f=$Ie(d);return F.jsxs(jIe,fe({role:a,square:!0,elevation:6,className:qt(f.root,o),ownerState:d,ref:n},l,{children:[F.jsx(UIe,{className:f.message,ownerState:d,children:s}),i?F.jsx(VIe,{className:f.action,ownerState:d,children:i}):null]}))}),HIe=WIe;function GIe(t){return jn("MuiSnackbar",t)}Un("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const qIe=["onEnter","onExited"],YIe=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],XIe=t=>{const{classes:e,anchorOrigin:n}=t,r={root:["root",`anchorOrigin${Jt(n.vertical)}${Jt(n.horizontal)}`]};return Vn(r,GIe,e)},F9=Qt("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`anchorOrigin${Jt(n.anchorOrigin.vertical)}${Jt(n.anchorOrigin.horizontal)}`]]}})(({theme:t,ownerState:e})=>{const n={left:"50%",right:"auto",transform:"translateX(-50%)"};return fe({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},e.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},e.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},e.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:fe({},e.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},e.anchorOrigin.horizontal==="center"&&n,e.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},e.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),KIe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiSnackbar"}),i=wm(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:s,anchorOrigin:{vertical:a,horizontal:l}={vertical:"bottom",horizontal:"left"},autoHideDuration:d=null,children:f,className:p,ClickAwayListenerProps:g,ContentProps:v,disableWindowBlurListener:x=!1,message:b,open:S,TransitionComponent:M=$P,transitionDuration:T=o,TransitionProps:{onEnter:C,onExited:k}={}}=r,O=on(r.TransitionProps,qIe),D=on(r,YIe),B=fe({},r,{anchorOrigin:{vertical:a,horizontal:l},autoHideDuration:d,disableWindowBlurListener:x,TransitionComponent:M,transitionDuration:T}),U=XIe(B),{getRootProps:J,onClickAway:V}=PMe(fe({},B)),[X,oe]=W.useState(!0),pe=Cc({elementType:F9,getSlotProps:J,externalForwardedProps:D,ownerState:B,additionalProps:{ref:n},className:[U.root,p]}),re=ue=>{oe(!0),k&&k(ue)},he=(ue,be)=>{oe(!1),C&&C(ue,be)};return!S&&X?null:F.jsx(KSe,fe({onClickAway:V},g,{children:F.jsx(F9,fe({},pe,{children:F.jsx(M,fe({appear:!0,in:S,timeout:T,direction:a==="top"?"down":"up",onEnter:he,onExited:re},O,{children:f||F.jsx(HIe,fe({message:b,action:s},v))}))}))}))}),ZIe=KIe;function JIe(t){return jn("MuiTooltip",t)}const QIe=Un("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),Ug=QIe,eke=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function tke(t){return Math.round(t*1e5)/1e5}const nke=t=>{const{classes:e,disableInteractive:n,arrow:r,touch:i,placement:o}=t,s={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${Jt(o.split("-")[0])}`],arrow:["arrow"]};return Vn(s,JIe,e)},rke=Qt(Cne,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})(({theme:t,ownerState:e,open:n})=>fe({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!e.disableInteractive&&{pointerEvents:"auto"},!n&&{pointerEvents:"none"},e.arrow&&{[`&[data-popper-placement*="bottom"] .${Ug.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Ug.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Ug.arrow}`]:fe({},e.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${Ug.arrow}`]:fe({},e.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),ike=Qt("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e[`tooltipPlacement${Jt(n.placement.split("-")[0])}`]]}})(({theme:t,ownerState:e})=>fe({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:Yi(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},e.arrow&&{position:"relative",margin:0},e.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${tke(16/14)}em`,fontWeight:t.typography.fontWeightRegular},{[`.${Ug.popper}[data-popper-placement*="left"] &`]:fe({transformOrigin:"right center"},e.isRtl?fe({marginLeft:"14px"},e.touch&&{marginLeft:"24px"}):fe({marginRight:"14px"},e.touch&&{marginRight:"24px"})),[`.${Ug.popper}[data-popper-placement*="right"] &`]:fe({transformOrigin:"left center"},e.isRtl?fe({marginRight:"14px"},e.touch&&{marginRight:"24px"}):fe({marginLeft:"14px"},e.touch&&{marginLeft:"24px"})),[`.${Ug.popper}[data-popper-placement*="top"] &`]:fe({transformOrigin:"center bottom",marginBottom:"14px"},e.touch&&{marginBottom:"24px"}),[`.${Ug.popper}[data-popper-placement*="bottom"] &`]:fe({transformOrigin:"center top",marginTop:"14px"},e.touch&&{marginTop:"24px"})})),oke=Qt("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(t,e)=>e.arrow})(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:Yi(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let $T=!1;const B9=new QM;let Aw={x:0,y:0};function jT(t,e){return(n,...r)=>{e&&e(n,...r),t(n,...r)}}const ske=W.forwardRef(function(e,n){var r,i,o,s,a,l,d,f,p,g,v,x,b,S,M,T,C,k,O;const D=er({props:e,name:"MuiTooltip"}),{arrow:B=!1,children:U,components:J={},componentsProps:V={},describeChild:X=!1,disableFocusListener:oe=!1,disableHoverListener:pe=!1,disableInteractive:re=!1,disableTouchListener:he=!1,enterDelay:ue=100,enterNextDelay:be=0,enterTouchDelay:ie=700,followCursor:ve=!1,id:Ee,leaveDelay:Ne=0,leaveTouchDelay:Ge=1500,onClose:dt,onOpen:Ue,open:st,placement:lt="bottom",PopperComponent:Rt,PopperProps:Lt={},slotProps:Fe={},slots:at={},title:nt,TransitionComponent:ge=$P,TransitionProps:tt}=D,rt=on(D,eke),vt=W.isValidElement(U)?U:F.jsx("span",{children:U}),Tt=wm(),We=eE(),[Vt,sn]=W.useState(),[Ut,Pe]=W.useState(null),_e=W.useRef(!1),Mt=re||ve,wt=jg(),Wt=jg(),Bt=jg(),Mn=jg(),[an,Je]=yb({controlled:st,default:!1,name:"Tooltip",state:"open"});let Yt=an;const xn=rR(Ee),en=W.useRef(),un=jl(()=>{en.current!==void 0&&(document.body.style.WebkitUserSelect=en.current,en.current=void 0),Mn.clear()});W.useEffect(()=>un,[un]);const St=mt=>{B9.clear(),$T=!0,Je(!0),Ue&&!Yt&&Ue(mt)},gt=jl(mt=>{B9.start(800+Ne,()=>{$T=!1}),Je(!1),dt&&Yt&&dt(mt),wt.start(Tt.transitions.duration.shortest,()=>{_e.current=!1})}),Ae=mt=>{_e.current&&mt.type!=="touchstart"||(Vt&&Vt.removeAttribute("title"),Wt.clear(),Bt.clear(),ue||$T&&be?Wt.start($T?be:ue,()=>{St(mt)}):St(mt))},ft=mt=>{Wt.clear(),Bt.start(Ne,()=>{gt(mt)})},{isFocusVisibleRef:Ie,onBlur:it,onFocus:tn,ref:Xe}=oR(),[,xe]=W.useState(!1),ee=mt=>{it(mt),Ie.current===!1&&(xe(!1),ft(mt))},se=mt=>{Vt||sn(mt.currentTarget),tn(mt),Ie.current===!0&&(xe(!0),Ae(mt))},me=mt=>{_e.current=!0;const xt=vt.props;xt.onTouchStart&&xt.onTouchStart(mt)},Ce=mt=>{me(mt),Bt.clear(),wt.clear(),un(),en.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Mn.start(ie,()=>{document.body.style.WebkitUserSelect=en.current,Ae(mt)})},qe=mt=>{vt.props.onTouchEnd&&vt.props.onTouchEnd(mt),un(),Bt.start(Ge,()=>{gt(mt)})};W.useEffect(()=>{if(!Yt)return;function mt(xt){(xt.key==="Escape"||xt.key==="Esc")&&gt(xt)}return document.addEventListener("keydown",mt),()=>{document.removeEventListener("keydown",mt)}},[gt,Yt]);const Ye=Ao(vt.ref,Xe,sn,n);!nt&&nt!==0&&(Yt=!1);const et=W.useRef(),je=mt=>{const xt=vt.props;xt.onMouseMove&&xt.onMouseMove(mt),Aw={x:mt.clientX,y:mt.clientY},et.current&&et.current.update()},ot={},Dt=typeof nt=="string";X?(ot.title=!Yt&&Dt&&!pe?nt:null,ot["aria-describedby"]=Yt?xn:null):(ot["aria-label"]=Dt?nt:null,ot["aria-labelledby"]=Yt&&!Dt?xn:null);const It=fe({},ot,rt,vt.props,{className:qt(rt.className,vt.props.className),onTouchStart:me,ref:Ye},ve?{onMouseMove:je}:{}),Nt={};he||(It.onTouchStart=Ce,It.onTouchEnd=qe),pe||(It.onMouseOver=jT(Ae,It.onMouseOver),It.onMouseLeave=jT(ft,It.onMouseLeave),Mt||(Nt.onMouseOver=Ae,Nt.onMouseLeave=ft)),oe||(It.onFocus=jT(se,It.onFocus),It.onBlur=jT(ee,It.onBlur),Mt||(Nt.onFocus=se,Nt.onBlur=ee));const En=W.useMemo(()=>{var mt;let xt=[{name:"arrow",enabled:!!Ut,options:{element:Ut,padding:4}}];return(mt=Lt.popperOptions)!=null&&mt.modifiers&&(xt=xt.concat(Lt.popperOptions.modifiers)),fe({},Lt.popperOptions,{modifiers:xt})},[Ut,Lt]),Nn=fe({},D,{isRtl:We,arrow:B,disableInteractive:Mt,placement:lt,PopperComponentProp:Rt,touch:_e.current}),zn=nke(Nn),yr=(r=(i=at.popper)!=null?i:J.Popper)!=null?r:rke,tr=(o=(s=(a=at.transition)!=null?a:J.Transition)!=null?s:ge)!=null?o:$P,Qr=(l=(d=at.tooltip)!=null?d:J.Tooltip)!=null?l:ike,Ur=(f=(p=at.arrow)!=null?p:J.Arrow)!=null?f:oke,Oi=wx(yr,fe({},Lt,(g=Fe.popper)!=null?g:V.popper,{className:qt(zn.popper,Lt==null?void 0:Lt.className,(v=(x=Fe.popper)!=null?x:V.popper)==null?void 0:v.className)}),Nn),Te=wx(tr,fe({},tt,(b=Fe.transition)!=null?b:V.transition),Nn),pt=wx(Qr,fe({},(S=Fe.tooltip)!=null?S:V.tooltip,{className:qt(zn.tooltip,(M=(T=Fe.tooltip)!=null?T:V.tooltip)==null?void 0:M.className)}),Nn),At=wx(Ur,fe({},(C=Fe.arrow)!=null?C:V.arrow,{className:qt(zn.arrow,(k=(O=Fe.arrow)!=null?O:V.arrow)==null?void 0:k.className)}),Nn);return F.jsxs(W.Fragment,{children:[W.cloneElement(vt,It),F.jsx(yr,fe({as:Rt??Cne,placement:lt,anchorEl:ve?{getBoundingClientRect:()=>({top:Aw.y,left:Aw.x,right:Aw.x,bottom:Aw.y,width:0,height:0})}:Vt,popperRef:et,open:Vt?Yt:!1,id:xn,transition:!0},Nt,Oi,{popperOptions:En,children:({TransitionProps:mt})=>F.jsx(tr,fe({timeout:Tt.transitions.duration.shorter},mt,Te,{children:F.jsxs(Qr,fe({},pt,{children:[nt,B?F.jsx(Ur,fe({},At,{ref:Pe})):null]}))}))}))]})}),Dg=ske;function ake(t){return jn("MuiSwitch",t)}const Dl=Un("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),lke=["className","color","edge","size","sx"],cke=N0(),uke=t=>{const{classes:e,edge:n,size:r,color:i,checked:o,disabled:s}=t,a={root:["root",n&&`edge${Jt(n)}`,`size${Jt(r)}`],switchBase:["switchBase",`color${Jt(i)}`,o&&"checked",s&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=Vn(a,ake,e);return fe({},e,l)},dke=Qt("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.edge&&e[`edge${Jt(n.edge)}`],e[`size${Jt(n.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${Dl.thumb}`]:{width:16,height:16},[`& .${Dl.switchBase}`]:{padding:4,[`&.${Dl.checked}`]:{transform:"translateX(16px)"}}}}]}),hke=Qt(Dne,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.switchBase,{[`& .${Dl.input}`]:e.input},n.color!=="default"&&e[`color${Jt(n.color)}`]]}})(({theme:t})=>({position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${t.palette.mode==="light"?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${Dl.checked}`]:{transform:"translateX(20px)"},[`&.${Dl.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${Dl.checked} + .${Dl.track}`]:{opacity:.5},[`&.${Dl.disabled} + .${Dl.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:`${t.palette.mode==="light"?.12:.2}`},[`& .${Dl.input}`]:{left:"-100%",width:"300%"}}),({theme:t})=>({"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Yi(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(([,e])=>e.main&&e.light).map(([e])=>({props:{color:e},style:{[`&.${Dl.checked}`]:{color:(t.vars||t).palette[e].main,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[e].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Yi(t.palette[e].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Dl.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${e}DisabledColor`]:`${t.palette.mode==="light"?_b(t.palette[e].main,.62):vb(t.palette[e].main,.55)}`}},[`&.${Dl.checked} + .${Dl.track}`]:{backgroundColor:(t.vars||t).palette[e].main}}}))]})),fke=Qt("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(t,e)=>e.track})(({theme:t})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${t.palette.mode==="light"?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:`${t.palette.mode==="light"?.38:.3}`})),pke=Qt("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(t,e)=>e.thumb})(({theme:t})=>({boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),mke=W.forwardRef(function(e,n){const r=cke({props:e,name:"MuiSwitch"}),{className:i,color:o="primary",edge:s=!1,size:a="medium",sx:l}=r,d=on(r,lke),f=fe({},r,{color:o,edge:s,size:a}),p=uke(f),g=F.jsx(pke,{className:p.thumb,ownerState:f});return F.jsxs(dke,{className:qt(p.root,i),sx:l,ownerState:f,children:[F.jsx(hke,fe({type:"checkbox",icon:g,checkedIcon:g,ref:n,ownerState:f},d,{classes:fe({},p,{root:p.switchBase})})),F.jsx(fke,{className:p.track,ownerState:f})]})}),Kne=mke;function gke(t){return jn("MuiTab",t)}const yke=Un("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),sv=yke,vke=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],_ke=t=>{const{classes:e,textColor:n,fullWidth:r,wrapped:i,icon:o,label:s,selected:a,disabled:l}=t,d={root:["root",o&&s&&"labelIcon",`textColor${Jt(n)}`,r&&"fullWidth",i&&"wrapped",a&&"selected",l&&"disabled"],iconWrapper:["iconWrapper"]};return Vn(d,gke,e)},xke=Qt(Mm,{name:"MuiTab",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.label&&n.icon&&e.labelIcon,e[`textColor${Jt(n.textColor)}`],n.fullWidth&&e.fullWidth,n.wrapped&&e.wrapped]}})(({theme:t,ownerState:e})=>fe({},t.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},e.label&&{flexDirection:e.iconPosition==="top"||e.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},e.icon&&e.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${sv.iconWrapper}`]:fe({},e.iconPosition==="top"&&{marginBottom:6},e.iconPosition==="bottom"&&{marginTop:6},e.iconPosition==="start"&&{marginRight:t.spacing(1)},e.iconPosition==="end"&&{marginLeft:t.spacing(1)})},e.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${sv.selected}`]:{opacity:1},[`&.${sv.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.textColor==="primary"&&{color:(t.vars||t).palette.text.secondary,[`&.${sv.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${sv.disabled}`]:{color:(t.vars||t).palette.text.disabled}},e.textColor==="secondary"&&{color:(t.vars||t).palette.text.secondary,[`&.${sv.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${sv.disabled}`]:{color:(t.vars||t).palette.text.disabled}},e.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},e.wrapped&&{fontSize:t.typography.pxToRem(12)})),bke=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiTab"}),{className:i,disabled:o=!1,disableFocusRipple:s=!1,fullWidth:a,icon:l,iconPosition:d="top",indicator:f,label:p,onChange:g,onClick:v,onFocus:x,selected:b,selectionFollowsFocus:S,textColor:M="inherit",value:T,wrapped:C=!1}=r,k=on(r,vke),O=fe({},r,{disabled:o,disableFocusRipple:s,selected:b,icon:!!l,iconPosition:d,label:!!p,fullWidth:a,textColor:M,wrapped:C}),D=_ke(O),B=l&&p&&W.isValidElement(l)?W.cloneElement(l,{className:qt(D.iconWrapper,l.props.className)}):l,U=V=>{!b&&g&&g(V,T),v&&v(V)},J=V=>{S&&!b&&g&&g(V,T),x&&x(V)};return F.jsxs(xke,fe({focusRipple:!s,className:qt(D.root,i),ref:n,role:"tab","aria-selected":b,disabled:o,onClick:U,onFocus:J,ownerState:O,tabIndex:b?0:-1},k,{children:[d==="top"||d==="start"?F.jsxs(W.Fragment,{children:[B,p]}):F.jsxs(W.Fragment,{children:[p,B]}),f]}))}),jv=bke,wke=W.createContext(),Zne=wke;function Ske(t){return jn("MuiTable",t)}Un("MuiTable",["root","stickyHeader"]);const Mke=["className","component","padding","size","stickyHeader"],Eke=t=>{const{classes:e,stickyHeader:n}=t;return Vn({root:["root",n&&"stickyHeader"]},Ske,e)},Tke=Qt("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.stickyHeader&&e.stickyHeader]}})(({theme:t,ownerState:e})=>fe({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":fe({},t.typography.body2,{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},e.stickyHeader&&{borderCollapse:"separate"})),$9="table",Cke=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiTable"}),{className:i,component:o=$9,padding:s="normal",size:a="medium",stickyHeader:l=!1}=r,d=on(r,Mke),f=fe({},r,{component:o,padding:s,size:a,stickyHeader:l}),p=Eke(f),g=W.useMemo(()=>({padding:s,size:a,stickyHeader:l}),[s,a,l]);return F.jsx(Zne.Provider,{value:g,children:F.jsx(Tke,fe({as:o,role:o===$9?null:"table",ref:n,className:qt(p.root,i),ownerState:f},d))})}),U$=Cke,Ake=W.createContext(),mR=Ake;function Pke(t){return jn("MuiTableBody",t)}Un("MuiTableBody",["root"]);const Ike=["className","component"],kke=t=>{const{classes:e}=t;return Vn({root:["root"]},Pke,e)},Rke=Qt("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"table-row-group"}),Oke={variant:"body"},j9="tbody",Lke=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiTableBody"}),{className:i,component:o=j9}=r,s=on(r,Ike),a=fe({},r,{component:o}),l=kke(a);return F.jsx(mR.Provider,{value:Oke,children:F.jsx(Rke,fe({className:qt(l.root,i),as:o,ref:n,role:o===j9?null:"rowgroup",ownerState:a},s))})}),V$=Lke;function Dke(t){return jn("MuiTableCell",t)}const Nke=Un("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),zke=Nke,Fke=["align","className","component","padding","scope","size","sortDirection","variant"],Bke=t=>{const{classes:e,variant:n,align:r,padding:i,size:o,stickyHeader:s}=t,a={root:["root",n,s&&"stickyHeader",r!=="inherit"&&`align${Jt(r)}`,i!=="normal"&&`padding${Jt(i)}`,`size${Jt(o)}`]};return Vn(a,Dke,e)},$ke=Qt("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`size${Jt(n.size)}`],n.padding!=="normal"&&e[`padding${Jt(n.padding)}`],n.align!=="inherit"&&e[`align${Jt(n.align)}`],n.stickyHeader&&e.stickyHeader]}})(({theme:t,ownerState:e})=>fe({},t.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?_b(Yi(t.palette.divider,1),.88):vb(Yi(t.palette.divider,1),.68)}`,textAlign:"left",padding:16},e.variant==="head"&&{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium},e.variant==="body"&&{color:(t.vars||t).palette.text.primary},e.variant==="footer"&&{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)},e.size==="small"&&{padding:"6px 16px",[`&.${zke.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},e.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},e.padding==="none"&&{padding:0},e.align==="left"&&{textAlign:"left"},e.align==="center"&&{textAlign:"center"},e.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},e.align==="justify"&&{textAlign:"justify"},e.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default})),jke=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiTableCell"}),{align:i="inherit",className:o,component:s,padding:a,scope:l,size:d,sortDirection:f,variant:p}=r,g=on(r,Fke),v=W.useContext(Zne),x=W.useContext(mR),b=x&&x.variant==="head";let S;s?S=s:S=b?"th":"td";let M=l;S==="td"?M=void 0:!M&&b&&(M="col");const T=p||x&&x.variant,C=fe({},r,{align:i,component:S,padding:a||(v&&v.padding?v.padding:"normal"),size:d||(v&&v.size?v.size:"medium"),sortDirection:f,stickyHeader:T==="head"&&v&&v.stickyHeader,variant:T}),k=Bke(C);let O=null;return f&&(O=f==="asc"?"ascending":"descending"),F.jsx($ke,fe({as:S,ref:n,className:qt(k.root,o),"aria-sort":O,scope:M,ownerState:C},g))}),mc=jke;function Uke(t){return jn("MuiTableHead",t)}Un("MuiTableHead",["root"]);const Vke=["className","component"],Wke=t=>{const{classes:e}=t;return Vn({root:["root"]},Uke,e)},Hke=Qt("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"table-header-group"}),Gke={variant:"head"},U9="thead",qke=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiTableHead"}),{className:i,component:o=U9}=r,s=on(r,Vke),a=fe({},r,{component:o}),l=Wke(a);return F.jsx(mR.Provider,{value:Gke,children:F.jsx(Hke,fe({as:o,className:qt(l.root,i),ref:n,role:o===U9?null:"rowgroup",ownerState:a},s))})}),Jne=qke;function Yke(t){return jn("MuiToolbar",t)}Un("MuiToolbar",["root","gutters","regular","dense"]);const Xke=["className","component","disableGutters","variant"],Kke=t=>{const{classes:e,disableGutters:n,variant:r}=t;return Vn({root:["root",!n&&"gutters",r]},Yke,e)},Zke=Qt("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})(({theme:t,ownerState:e})=>fe({position:"relative",display:"flex",alignItems:"center"},!e.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},e.variant==="dense"&&{minHeight:48}),({theme:t,ownerState:e})=>e.variant==="regular"&&t.mixins.toolbar),Jke=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiToolbar"}),{className:i,component:o="div",disableGutters:s=!1,variant:a="regular"}=r,l=on(r,Xke),d=fe({},r,{component:o,disableGutters:s,variant:a}),f=Kke(d);return F.jsx(Zke,fe({as:o,className:qt(f.root,i),ref:n,ownerState:d},l))}),z0=Jke,Qke=Ba(F.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),eRe=Ba(F.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function tRe(t){return jn("MuiTableRow",t)}const nRe=Un("MuiTableRow",["root","selected","hover","head","footer"]),V9=nRe,rRe=["className","component","hover","selected"],iRe=t=>{const{classes:e,selected:n,hover:r,head:i,footer:o}=t;return Vn({root:["root",n&&"selected",r&&"hover",i&&"head",o&&"footer"]},tRe,e)},oRe=Qt("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.head&&e.head,n.footer&&e.footer]}})(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${V9.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${V9.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Yi(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Yi(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}})),W9="tr",sRe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiTableRow"}),{className:i,component:o=W9,hover:s=!1,selected:a=!1}=r,l=on(r,rRe),d=W.useContext(mR),f=fe({},r,{component:o,hover:s,selected:a,head:d&&d.variant==="head",footer:d&&d.variant==="footer"}),p=iRe(f);return F.jsx(oRe,fe({as:o,ref:n,className:qt(p.root,i),role:o===W9?null:"row",ownerState:f},l))}),Xx=sRe;function aRe(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2}function lRe(t,e,n,r={},i=()=>{}){const{ease:o=aRe,duration:s=300}=r;let a=null;const l=e[t];let d=!1;const f=()=>{d=!0},p=g=>{if(d){i(new Error("Animation cancelled"));return}a===null&&(a=g);const v=Math.min(1,(g-a)/s);if(e[t]=o(v)*(n-l)+l,v>=1){requestAnimationFrame(()=>{i(null)});return}requestAnimationFrame(p)};return l===n?(i(new Error("Element already at target position")),f):(requestAnimationFrame(p),f)}const cRe=["onChange"],uRe={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function dRe(t){const{onChange:e}=t,n=on(t,cRe),r=W.useRef(),i=W.useRef(null),o=()=>{r.current=i.current.offsetHeight-i.current.clientHeight};return mu(()=>{const s=JM(()=>{const l=r.current;o(),l!==r.current&&e(r.current)}),a=Lf(i.current);return a.addEventListener("resize",s),()=>{s.clear(),a.removeEventListener("resize",s)}},[e]),W.useEffect(()=>{o(),e(r.current)},[e]),F.jsx("div",fe({style:uRe,ref:i},n))}function hRe(t){return jn("MuiTabScrollButton",t)}const fRe=Un("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),pRe=fRe,mRe=["className","slots","slotProps","direction","orientation","disabled"],gRe=t=>{const{classes:e,orientation:n,disabled:r}=t;return Vn({root:["root",n,r&&"disabled"]},hRe,e)},yRe=Qt(Mm,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.orientation&&e[n.orientation]]}})(({ownerState:t})=>fe({width:40,flexShrink:0,opacity:.8,[`&.${pRe.disabled}`]:{opacity:0}},t.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${t.isRtl?-90:90}deg)`}})),vRe=W.forwardRef(function(e,n){var r,i;const o=er({props:e,name:"MuiTabScrollButton"}),{className:s,slots:a={},slotProps:l={},direction:d}=o,f=on(o,mRe),p=eE(),g=fe({isRtl:p},o),v=gRe(g),x=(r=a.StartScrollButtonIcon)!=null?r:Qke,b=(i=a.EndScrollButtonIcon)!=null?i:eRe,S=Cc({elementType:x,externalSlotProps:l.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:g}),M=Cc({elementType:b,externalSlotProps:l.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:g});return F.jsx(yRe,fe({component:"div",className:qt(v.root,s),ref:n,role:null,ownerState:g,tabIndex:null},f,{children:d==="left"?F.jsx(x,fe({},S)):F.jsx(b,fe({},M))}))}),_Re=vRe;function xRe(t){return jn("MuiTabs",t)}const bRe=Un("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),ID=bRe,wRe=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],H9=(t,e)=>t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t.firstChild,G9=(t,e)=>t===e?t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t.lastChild,UT=(t,e,n)=>{let r=!1,i=n(t,e);for(;i;){if(i===t.firstChild){if(r)return;r=!0}const o=i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||o)i=n(t,i);else{i.focus();return}}},SRe=t=>{const{vertical:e,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:o,centered:s,scrollButtonsHideMobile:a,classes:l}=t;return Vn({root:["root",e&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",o&&"scrollableY"],flexContainer:["flexContainer",e&&"flexContainerVertical",s&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",a&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},xRe,l)},MRe=Qt("div",{name:"MuiTabs",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${ID.scrollButtons}`]:e.scrollButtons},{[`& .${ID.scrollButtons}`]:n.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,n.vertical&&e.vertical]}})(({ownerState:t,theme:e})=>fe({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},t.vertical&&{flexDirection:"column"},t.scrollButtonsHideMobile&&{[`& .${ID.scrollButtons}`]:{[e.breakpoints.down("sm")]:{display:"none"}}})),ERe=Qt("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.scroller,n.fixed&&e.fixed,n.hideScrollbar&&e.hideScrollbar,n.scrollableX&&e.scrollableX,n.scrollableY&&e.scrollableY]}})(({ownerState:t})=>fe({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},t.fixed&&{overflowX:"hidden",width:"100%"},t.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},t.scrollableX&&{overflowX:"auto",overflowY:"hidden"},t.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),TRe=Qt("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.flexContainer,n.vertical&&e.flexContainerVertical,n.centered&&e.centered]}})(({ownerState:t})=>fe({display:"flex"},t.vertical&&{flexDirection:"column"},t.centered&&{justifyContent:"center"})),CRe=Qt("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(t,e)=>e.indicator})(({ownerState:t,theme:e})=>fe({position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create()},t.indicatorColor==="primary"&&{backgroundColor:(e.vars||e).palette.primary.main},t.indicatorColor==="secondary"&&{backgroundColor:(e.vars||e).palette.secondary.main},t.vertical&&{height:"100%",width:2,right:0})),ARe=Qt(dRe)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),q9={},PRe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiTabs"}),i=wm(),o=eE(),{"aria-label":s,"aria-labelledby":a,action:l,centered:d=!1,children:f,className:p,component:g="div",allowScrollButtonsMobile:v=!1,indicatorColor:x="primary",onChange:b,orientation:S="horizontal",ScrollButtonComponent:M=_Re,scrollButtons:T="auto",selectionFollowsFocus:C,slots:k={},slotProps:O={},TabIndicatorProps:D={},TabScrollButtonProps:B={},textColor:U="primary",value:J,variant:V="standard",visibleScrollbar:X=!1}=r,oe=on(r,wRe),pe=V==="scrollable",re=S==="vertical",he=re?"scrollTop":"scrollLeft",ue=re?"top":"left",be=re?"bottom":"right",ie=re?"clientHeight":"clientWidth",ve=re?"height":"width",Ee=fe({},r,{component:g,allowScrollButtonsMobile:v,indicatorColor:x,orientation:S,vertical:re,scrollButtons:T,textColor:U,variant:V,visibleScrollbar:X,fixed:!pe,hideScrollbar:pe&&!X,scrollableX:pe&&!re,scrollableY:pe&&re,centered:d&&!pe,scrollButtonsHideMobile:!v}),Ne=SRe(Ee),Ge=Cc({elementType:k.StartScrollButtonIcon,externalSlotProps:O.startScrollButtonIcon,ownerState:Ee}),dt=Cc({elementType:k.EndScrollButtonIcon,externalSlotProps:O.endScrollButtonIcon,ownerState:Ee}),[Ue,st]=W.useState(!1),[lt,Rt]=W.useState(q9),[Lt,Fe]=W.useState(!1),[at,nt]=W.useState(!1),[ge,tt]=W.useState(!1),[rt,vt]=W.useState({overflow:"hidden",scrollbarWidth:0}),Tt=new Map,We=W.useRef(null),Vt=W.useRef(null),sn=()=>{const gt=We.current;let Ae;if(gt){const Ie=gt.getBoundingClientRect();Ae={clientWidth:gt.clientWidth,scrollLeft:gt.scrollLeft,scrollTop:gt.scrollTop,scrollLeftNormalized:vbe(gt,o?"rtl":"ltr"),scrollWidth:gt.scrollWidth,top:Ie.top,bottom:Ie.bottom,left:Ie.left,right:Ie.right}}let ft;if(gt&&J!==!1){const Ie=Vt.current.children;if(Ie.length>0){const it=Ie[Tt.get(J)];ft=it?it.getBoundingClientRect():null}}return{tabsMeta:Ae,tabMeta:ft}},Ut=jl(()=>{const{tabsMeta:gt,tabMeta:Ae}=sn();let ft=0,Ie;if(re)Ie="top",Ae&&gt&&(ft=Ae.top-gt.top+gt.scrollTop);else if(Ie=o?"right":"left",Ae&&gt){const tn=o?gt.scrollLeftNormalized+gt.clientWidth-gt.scrollWidth:gt.scrollLeft;ft=(o?-1:1)*(Ae[Ie]-gt[Ie]+tn)}const it={[Ie]:ft,[ve]:Ae?Ae[ve]:0};if(isNaN(lt[Ie])||isNaN(lt[ve]))Rt(it);else{const tn=Math.abs(lt[Ie]-it[Ie]),Xe=Math.abs(lt[ve]-it[ve]);(tn>=1||Xe>=1)&&Rt(it)}}),Pe=(gt,{animation:Ae=!0}={})=>{Ae?lRe(he,We.current,gt,{duration:i.transitions.duration.standard}):We.current[he]=gt},_e=gt=>{let Ae=We.current[he];re?Ae+=gt:(Ae+=gt*(o?-1:1),Ae*=o&&Hte()==="reverse"?-1:1),Pe(Ae)},Mt=()=>{const gt=We.current[ie];let Ae=0;const ft=Array.from(Vt.current.children);for(let Ie=0;Ie<ft.length;Ie+=1){const it=ft[Ie];if(Ae+it[ie]>gt){Ie===0&&(Ae=gt);break}Ae+=it[ie]}return Ae},wt=()=>{_e(-1*Mt())},Wt=()=>{_e(Mt())},Bt=W.useCallback(gt=>{vt({overflow:null,scrollbarWidth:gt})},[]),Mn=()=>{const gt={};gt.scrollbarSizeListener=pe?F.jsx(ARe,{onChange:Bt,className:qt(Ne.scrollableX,Ne.hideScrollbar)}):null;const ft=pe&&(T==="auto"&&(Lt||at)||T===!0);return gt.scrollButtonStart=ft?F.jsx(M,fe({slots:{StartScrollButtonIcon:k.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:Ge},orientation:S,direction:o?"right":"left",onClick:wt,disabled:!Lt},B,{className:qt(Ne.scrollButtons,B.className)})):null,gt.scrollButtonEnd=ft?F.jsx(M,fe({slots:{EndScrollButtonIcon:k.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:dt},orientation:S,direction:o?"left":"right",onClick:Wt,disabled:!at},B,{className:qt(Ne.scrollButtons,B.className)})):null,gt},an=jl(gt=>{const{tabsMeta:Ae,tabMeta:ft}=sn();if(!(!ft||!Ae)){if(ft[ue]<Ae[ue]){const Ie=Ae[he]+(ft[ue]-Ae[ue]);Pe(Ie,{animation:gt})}else if(ft[be]>Ae[be]){const Ie=Ae[he]+(ft[be]-Ae[be]);Pe(Ie,{animation:gt})}}}),Je=jl(()=>{pe&&T!==!1&&tt(!ge)});W.useEffect(()=>{const gt=JM(()=>{We.current&&Ut()});let Ae;const ft=tn=>{tn.forEach(Xe=>{Xe.removedNodes.forEach(xe=>{var ee;(ee=Ae)==null||ee.unobserve(xe)}),Xe.addedNodes.forEach(xe=>{var ee;(ee=Ae)==null||ee.observe(xe)})}),gt(),Je()},Ie=Lf(We.current);Ie.addEventListener("resize",gt);let it;return typeof ResizeObserver<"u"&&(Ae=new ResizeObserver(gt),Array.from(Vt.current.children).forEach(tn=>{Ae.observe(tn)})),typeof MutationObserver<"u"&&(it=new MutationObserver(ft),it.observe(Vt.current,{childList:!0})),()=>{var tn,Xe;gt.clear(),Ie.removeEventListener("resize",gt),(tn=it)==null||tn.disconnect(),(Xe=Ae)==null||Xe.disconnect()}},[Ut,Je]),W.useEffect(()=>{const gt=Array.from(Vt.current.children),Ae=gt.length;if(typeof IntersectionObserver<"u"&&Ae>0&&pe&&T!==!1){const ft=gt[0],Ie=gt[Ae-1],it={root:We.current,threshold:.99},tn=se=>{Fe(!se[0].isIntersecting)},Xe=new IntersectionObserver(tn,it);Xe.observe(ft);const xe=se=>{nt(!se[0].isIntersecting)},ee=new IntersectionObserver(xe,it);return ee.observe(Ie),()=>{Xe.disconnect(),ee.disconnect()}}},[pe,T,ge,f==null?void 0:f.length]),W.useEffect(()=>{st(!0)},[]),W.useEffect(()=>{Ut()}),W.useEffect(()=>{an(q9!==lt)},[an,lt]),W.useImperativeHandle(l,()=>({updateIndicator:Ut,updateScrollButtons:Je}),[Ut,Je]);const Yt=F.jsx(CRe,fe({},D,{className:qt(Ne.indicator,D.className),ownerState:Ee,style:fe({},lt,D.style)}));let xn=0;const en=W.Children.map(f,gt=>{if(!W.isValidElement(gt))return null;const Ae=gt.props.value===void 0?xn:gt.props.value;Tt.set(Ae,xn);const ft=Ae===J;return xn+=1,W.cloneElement(gt,fe({fullWidth:V==="fullWidth",indicator:ft&&!Ue&&Yt,selected:ft,selectionFollowsFocus:C,onChange:b,textColor:U,value:Ae},xn===1&&J===!1&&!gt.props.tabIndex?{tabIndex:0}:{}))}),un=gt=>{const Ae=Vt.current,ft=As(Ae).activeElement;if(ft.getAttribute("role")!=="tab")return;let it=S==="horizontal"?"ArrowLeft":"ArrowUp",tn=S==="horizontal"?"ArrowRight":"ArrowDown";switch(S==="horizontal"&&o&&(it="ArrowRight",tn="ArrowLeft"),gt.key){case it:gt.preventDefault(),UT(Ae,ft,G9);break;case tn:gt.preventDefault(),UT(Ae,ft,H9);break;case"Home":gt.preventDefault(),UT(Ae,null,H9);break;case"End":gt.preventDefault(),UT(Ae,null,G9);break}},St=Mn();return F.jsxs(MRe,fe({className:qt(Ne.root,p),ownerState:Ee,ref:n,as:g},oe,{children:[St.scrollButtonStart,St.scrollbarSizeListener,F.jsxs(ERe,{className:Ne.scroller,ownerState:Ee,style:{overflow:rt.overflow,[re?`margin${o?"Left":"Right"}`:"marginBottom"]:X?void 0:-rt.scrollbarWidth},ref:We,children:[F.jsx(TRe,{"aria-label":s,"aria-labelledby":a,"aria-orientation":S==="vertical"?"vertical":null,className:Ne.flexContainer,ownerState:Ee,onKeyDown:un,ref:Vt,role:"tablist",children:en}),Ue&&Yt]}),St.scrollButtonEnd]}))}),Qne=PRe;function IRe(t){return jn("MuiTextField",t)}Un("MuiTextField",["root"]);const kRe=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],RRe={standard:Une,filled:Fne,outlined:$$},ORe=t=>{const{classes:e}=t;return Vn({root:["root"]},IRe,e)},LRe=Qt(sE,{name:"MuiTextField",slot:"Root",overridesResolver:(t,e)=>e.root})({}),DRe=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:o=!1,children:s,className:a,color:l="primary",defaultValue:d,disabled:f=!1,error:p=!1,FormHelperTextProps:g,fullWidth:v=!1,helperText:x,id:b,InputLabelProps:S,inputProps:M,InputProps:T,inputRef:C,label:k,maxRows:O,minRows:D,multiline:B=!1,name:U,onBlur:J,onChange:V,onFocus:X,placeholder:oe,required:pe=!1,rows:re,select:he=!1,SelectProps:ue,type:be,value:ie,variant:ve="outlined"}=r,Ee=on(r,kRe),Ne=fe({},r,{autoFocus:o,color:l,disabled:f,error:p,fullWidth:v,multiline:B,required:pe,select:he,variant:ve}),Ge=ORe(Ne),dt={};ve==="outlined"&&(S&&typeof S.shrink<"u"&&(dt.notched=S.shrink),dt.label=k),he&&((!ue||!ue.native)&&(dt.id=void 0),dt["aria-describedby"]=void 0);const Ue=rR(b),st=x&&Ue?`${Ue}-helper-text`:void 0,lt=k&&Ue?`${Ue}-label`:void 0,Rt=RRe[ve],Lt=F.jsx(Rt,fe({"aria-describedby":st,autoComplete:i,autoFocus:o,defaultValue:d,fullWidth:v,multiline:B,name:U,rows:re,maxRows:O,minRows:D,type:be,value:ie,id:Ue,inputRef:C,onBlur:J,onChange:V,onFocus:X,placeholder:oe,inputProps:M},dt,T));return F.jsxs(LRe,fe({className:qt(Ge.root,a),disabled:f,error:p,fullWidth:v,ref:n,required:pe,color:l,variant:ve,ownerState:Ne},Ee,{children:[k!=null&&k!==""&&F.jsx(aE,fe({htmlFor:Ue,id:lt},S,{children:k})),he?F.jsx(lE,fe({"aria-describedby":st,id:Ue,labelId:lt,value:ie,input:Lt},ue,{children:s})):Lt,x&&F.jsx(GCe,fe({id:st},g,{children:x}))]}))}),gi=DRe,f1=(t,e)=>{const n=Yl(),r=W.useRef();W.useEffect(()=>(t().then(i=>r.current=i).catch(i=>n(Qee.push(i.message))),()=>{const i=r.current;i&&i()}),[...e,n])},ere=t=>{const e=Yl();return(...n)=>{t(...n).catch(r=>e(Qee.push(r.message)))}};var Y9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cE=(typeof window>"u"?"undefined":Y9(window))==="object"&&(typeof document>"u"?"undefined":Y9(document))==="object"&&document.nodeType===9;function X9(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Abe(r.key),r)}}function tre(t,e,n){return e&&X9(t.prototype,e),n&&X9(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var NRe={}.constructor;function uF(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(uF);if(t.constructor!==NRe)return t;var e={};for(var n in t)e[n]=uF(t[n]);return e}function W$(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,i=uF(e),o=r.plugins.onCreateRule(t,i,n);return o||(t[0],null)}var K9=function(e,n){for(var r="",i=0;i<e.length&&e[i]!=="!important";i++)r&&(r+=n),r+=e[i];return r},o0=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=K9(e[r]," ");else n=K9(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function p1(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function Pw(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function E2(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var i=n,o=i.indent,s=o===void 0?0:o,a=e.fallbacks;n.format===!1&&(s=-1/0);var l=p1(n),d=l.linebreak,f=l.space;if(t&&s++,a)if(Array.isArray(a))for(var p=0;p<a.length;p++){var g=a[p];for(var v in g){var x=g[v];x!=null&&(r&&(r+=d),r+=Pw(v+":"+f+o0(x)+";",s))}}else for(var b in a){var S=a[b];S!=null&&(r&&(r+=d),r+=Pw(b+":"+f+o0(S)+";",s))}for(var M in e){var T=e[M];T!=null&&M!=="fallbacks"&&(r&&(r+=d),r+=Pw(M+":"+f+o0(T)+";",s))}return!r&&!n.allowEmpty||!t?r:(s--,r&&(r=""+d+r+d),Pw(""+t+f+"{"+r,s)+Pw("}",s))}var zRe=/([[\].#*$><+~=|^:(),"'`\s])/g,Z9=typeof CSS<"u"&&CSS.escape,H$=function(t){return Z9?Z9(t):t.replace(zRe,"\\$1")},nre=function(){function t(n,r,i){this.type="style",this.isProcessed=!1;var o=i.sheet,s=i.Renderer;this.key=n,this.options=i,this.style=r,o?this.renderer=o.renderer:s&&(this.renderer=new s)}var e=t.prototype;return e.prop=function(r,i,o){if(i===void 0)return this.style[r];var s=o?o.force:!1;if(!s&&this.style[r]===i)return this;var a=i;(!o||o.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(i,r,this));var l=a==null||a===!1,d=r in this.style;if(l&&!d&&!s)return this;var f=l&&d;if(f?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return f?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var p=this.options.sheet;return p&&p.attached,this},t}(),dF=function(t){nE(e,t);function e(r,i,o){var s;s=t.call(this,r,i,o)||this;var a=o.selector,l=o.scoped,d=o.sheet,f=o.generateId;return a?s.selectorText=a:l!==!1&&(s.id=f(b2(b2(s)),d),s.selectorText="."+H$(s.id)),s}var n=e.prototype;return n.applyTo=function(i){var o=this.renderer;if(o){var s=this.toJSON();for(var a in s)o.setProperty(i,a,s[a])}return this},n.toJSON=function(){var i={};for(var o in this.style){var s=this.style[o];typeof s!="object"?i[o]=s:Array.isArray(s)&&(i[o]=o0(s))}return i},n.toString=function(i){var o=this.options.sheet,s=o?o.options.link:!1,a=s?fe({},i,{allowEmpty:!0}):i;return E2(this.selectorText,this.style,a)},tre(e,[{key:"selector",set:function(i){if(i!==this.selectorText){this.selectorText=i;var o=this.renderer,s=this.renderable;if(!(!s||!o)){var a=o.setSelector(s,i);a||o.replaceRule(s,this)}}},get:function(){return this.selectorText}}]),e}(nre),FRe={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new dF(e,n,r)}},kD={indent:1,children:!0},BRe=/@([\w-]+)/,$Re=function(){function t(n,r,i){this.type="conditional",this.isProcessed=!1,this.key=n;var o=n.match(BRe);this.at=o?o[1]:"unknown",this.query=i.name||"@"+this.at,this.options=i,this.rules=new gR(fe({},i,{parent:this}));for(var s in r)this.rules.add(s,r[s]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,i,o){var s=this.rules.add(r,i,o);return s?(this.options.jss.plugins.onProcessRule(s),s):null},e.replaceRule=function(r,i,o){var s=this.rules.replace(r,i,o);return s&&this.options.jss.plugins.onProcessRule(s),s},e.toString=function(r){r===void 0&&(r=kD);var i=p1(r),o=i.linebreak;if(r.indent==null&&(r.indent=kD.indent),r.children==null&&(r.children=kD.children),r.children===!1)return this.query+" {}";var s=this.rules.toString(r);return s?this.query+" {"+o+s+o+"}":""},t}(),jRe=/@container|@media|@supports\s+/,URe={onCreateRule:function(e,n,r){return jRe.test(e)?new $Re(e,n,r):null}},RD={indent:1,children:!0},VRe=/@keyframes\s+([\w-]+)/,hF=function(){function t(n,r,i){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var o=n.match(VRe);o&&o[1]?this.name=o[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=i;var s=i.scoped,a=i.sheet,l=i.generateId;this.id=s===!1?this.name:H$(l(this,a)),this.rules=new gR(fe({},i,{parent:this}));for(var d in r)this.rules.add(d,r[d],fe({},i,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=RD);var i=p1(r),o=i.linebreak;if(r.indent==null&&(r.indent=RD.indent),r.children==null&&(r.children=RD.children),r.children===!1)return this.at+" "+this.id+" {}";var s=this.rules.toString(r);return s&&(s=""+o+s+o),this.at+" "+this.id+" {"+s+"}"},t}(),WRe=/@keyframes\s+/,HRe=/\$([\w-]+)/g,fF=function(e,n){return typeof e=="string"?e.replace(HRe,function(r,i){return i in n?n[i]:r}):e},J9=function(e,n,r){var i=e[n],o=fF(i,r);o!==i&&(e[n]=o)},GRe={onCreateRule:function(e,n,r){return typeof e=="string"&&WRe.test(e)?new hF(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&J9(e,"animation-name",r.keyframes),"animation"in e&&J9(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var i=r.options.sheet;if(!i)return e;switch(n){case"animation":return fF(e,i.keyframes);case"animation-name":return fF(e,i.keyframes);default:return e}}},qRe=function(t){nE(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(i){var o=this.options.sheet,s=o?o.options.link:!1,a=s?fe({},i,{allowEmpty:!0}):i;return E2(this.key,this.style,a)},e}(nre),YRe={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new qRe(e,n,r):null}},XRe=function(){function t(n,r,i){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=i}var e=t.prototype;return e.toString=function(r){var i=p1(r),o=i.linebreak;if(Array.isArray(this.style)){for(var s="",a=0;a<this.style.length;a++)s+=E2(this.at,this.style[a]),this.style[a+1]&&(s+=o);return s}return E2(this.at,this.style,r)},t}(),KRe=/@font-face/,ZRe={onCreateRule:function(e,n,r){return KRe.test(e)?new XRe(e,n,r):null}},JRe=function(){function t(n,r,i){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=i}var e=t.prototype;return e.toString=function(r){return E2(this.key,this.style,r)},t}(),QRe={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new JRe(e,n,r):null}},eOe=function(){function t(n,r,i){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=i}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var i="",o=0;o<this.value.length;o++)i+=this.key+" "+this.value[o]+";",this.value[o+1]&&(i+=`
`);return i}return this.key+" "+this.value+";"},t}(),tOe={"@charset":!0,"@import":!0,"@namespace":!0},nOe={onCreateRule:function(e,n,r){return e in tOe?new eOe(e,n,r):null}},Q9=[FRe,URe,GRe,YRe,ZRe,QRe,nOe],rOe={process:!0},eG={force:!0,process:!0},gR=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,i,o){var s=this.options,a=s.parent,l=s.sheet,d=s.jss,f=s.Renderer,p=s.generateId,g=s.scoped,v=fe({classes:this.classes,parent:a,sheet:l,jss:d,Renderer:f,generateId:p,scoped:g,name:r,keyframes:this.keyframes,selector:void 0},o),x=r;r in this.raw&&(x=r+"-d"+this.counter++),this.raw[x]=i,x in this.classes&&(v.selector="."+H$(this.classes[x]));var b=W$(x,i,v);if(!b)return null;this.register(b);var S=v.index===void 0?this.index.length:v.index;return this.index.splice(S,0,b),b},e.replace=function(r,i,o){var s=this.get(r),a=this.index.indexOf(s);s&&this.remove(s);var l=o;return a!==-1&&(l=fe({},o,{index:a})),this.add(r,i,l)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof dF?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof hF&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof dF?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof hF&&delete this.keyframes[r.name]},e.update=function(){var r,i,o;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],o=arguments.length<=2?void 0:arguments[2]):(i=arguments.length<=0?void 0:arguments[0],o=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),i,o);else for(var s=0;s<this.index.length;s++)this.updateOne(this.index[s],i,o)},e.updateOne=function(r,i,o){o===void 0&&(o=rOe);var s=this.options,a=s.jss.plugins,l=s.sheet;if(r.rules instanceof t){r.rules.update(i,o);return}var d=r.style;if(a.onUpdate(i,r,l,o),o.process&&d&&d!==r.style){a.onProcessStyle(r.style,r,l);for(var f in r.style){var p=r.style[f],g=d[f];p!==g&&r.prop(f,p,eG)}for(var v in d){var x=r.style[v],b=d[v];x==null&&x!==b&&r.prop(v,null,eG)}}},e.toString=function(r){for(var i="",o=this.options.sheet,s=o?o.options.link:!1,a=p1(r),l=a.linebreak,d=0;d<this.index.length;d++){var f=this.index[d],p=f.toString(r);!p&&!s||(i&&(i+=l),i+=p)}return i},t}(),rre=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=fe({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new gR(this.options);for(var i in n)this.rules.add(i,n[i]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,i,o){var s=this.queue;this.attached&&!s&&(this.queue=[]);var a=this.rules.add(r,i,o);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(s?s.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,i,o){var s=this.rules.get(r);if(!s)return this.addRule(r,i,o);var a=this.rules.replace(r,i,o);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?s.renderable&&this.renderer.replaceRule(s.renderable,a):this.renderer.deleteRule(s)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,i){var o=[];for(var s in r){var a=this.addRule(s,r[s],i);a&&o.push(a)}return o},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var i=typeof r=="object"?r:this.rules.get(r);return!i||this.attached&&!i.renderable?!1:(this.rules.remove(i),this.attached&&i.renderable&&this.renderer?this.renderer.deleteRule(i.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,i,o){return this.rules.updateOne(r,i,o),this},e.toString=function(r){return this.rules.toString(r)},t}(),iOe=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,i,o){for(var s=0;s<this.registry.onCreateRule.length;s++){var a=this.registry.onCreateRule[s](r,i,o);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var i=r.options.sheet,o=0;o<this.registry.onProcessRule.length;o++)this.registry.onProcessRule[o](r,i);r.style&&this.onProcessStyle(r.style,r,i),r.isProcessed=!0}},e.onProcessStyle=function(r,i,o){for(var s=0;s<this.registry.onProcessStyle.length;s++)i.style=this.registry.onProcessStyle[s](i.style,i,o)},e.onProcessSheet=function(r){for(var i=0;i<this.registry.onProcessSheet.length;i++)this.registry.onProcessSheet[i](r)},e.onUpdate=function(r,i,o,s){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,i,o,s)},e.onChangeValue=function(r,i,o){for(var s=r,a=0;a<this.registry.onChangeValue.length;a++)s=this.registry.onChangeValue[a](s,i,o);return s},e.use=function(r,i){i===void 0&&(i={queue:"external"});var o=this.plugins[i.queue];o.indexOf(r)===-1&&(o.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(s,a){for(var l in a)l in s&&s[l].push(a[l]);return s},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),oOe=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var i=this.registry,o=r.options.index;if(i.indexOf(r)===-1){if(i.length===0||o>=this.index){i.push(r);return}for(var s=0;s<i.length;s++)if(i[s].options.index>o){i.splice(s,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var i=this.registry.indexOf(r);this.registry.splice(i,1)},e.toString=function(r){for(var i=r===void 0?{}:r,o=i.attached,s=on(i,["attached"]),a=p1(s),l=a.linebreak,d="",f=0;f<this.registry.length;f++){var p=this.registry[f];o!=null&&p.attached!==o||(d&&(d+=l),d+=p.toString(s))}return d},tre(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),OS=new oOe,pF=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),mF="2f1acc6c3a606b082e5eef5e54414ffb";pF[mF]==null&&(pF[mF]=0);var tG=pF[mF]++,nG=function(e){e===void 0&&(e={});var n=0,r=function(o,s){n+=1;var a="",l="";return s&&(s.options.classNamePrefix&&(l=s.options.classNamePrefix),s.options.jss.id!=null&&(a=String(s.options.jss.id))),e.minify?""+(l||"c")+tG+a+n:l+o.key+"-"+tG+(a?"-"+a:"")+"-"+n};return r},ire=function(e){var n;return function(){return n||(n=e()),n}},sOe=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},aOe=function(e,n,r){try{var i=r;if(Array.isArray(r)&&(i=o0(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,i);else{var o=i?i.indexOf("!important"):-1,s=o>-1?i.substr(0,o-1):i;e.style.setProperty(n,s,o>-1?"important":"")}}catch{return!1}return!0},lOe=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},cOe=function(e,n){return e.selectorText=n,e.selectorText===n},ore=ire(function(){return document.querySelector("head")});function uOe(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function dOe(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function hOe(t){for(var e=ore(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function fOe(t){var e=OS.registry;if(e.length>0){var n=uOe(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=dOe(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var i=hOe(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}function pOe(t,e){var n=e.insertionPoint,r=fOe(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var i=n,o=i.parentNode;o&&o.insertBefore(t,i.nextSibling);return}ore().appendChild(t)}var mOe=ire(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),rG=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},iG=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},gOe=function(){var e=document.createElement("style");return e.textContent=`
`,e},yOe=function(){function t(n){this.getPropertyValue=sOe,this.setProperty=aOe,this.removeProperty=lOe,this.setSelector=cOe,this.hasInsertedRules=!1,this.cssRules=[],n&&OS.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},i=r.media,o=r.meta,s=r.element;this.element=s||gOe(),this.element.setAttribute("data-jss",""),i&&this.element.setAttribute("media",i),o&&this.element.setAttribute("data-meta",o);var a=mOe();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){pOe(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,i){for(var o=0;o<r.index.length;o++)this.insertRule(r.index[o],o,i)},e.insertRule=function(r,i,o){if(o===void 0&&(o=this.element.sheet),r.rules){var s=r,a=o;if(r.type==="conditional"||r.type==="keyframes"){var l=iG(o,i);if(a=rG(o,s.toString({children:!1}),l),a===!1)return!1;this.refCssRule(r,l,a)}return this.insertRules(s.rules,a),a}var d=r.toString();if(!d)return!1;var f=iG(o,i),p=rG(o,d,f);return p===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,f,p),p)},e.refCssRule=function(r,i,o){r.renderable=o,r.options.parent instanceof rre&&this.cssRules.splice(i,0,o)},e.deleteRule=function(r){var i=this.element.sheet,o=this.indexOf(r);return o===-1?!1:(i.deleteRule(o),this.cssRules.splice(o,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,i){var o=this.indexOf(r);return o===-1?!1:(this.element.sheet.deleteRule(o),this.cssRules.splice(o,1),this.insertRule(i,o))},e.getRules=function(){return this.element.sheet.cssRules},t}(),vOe=0,_Oe=function(){function t(n){this.id=vOe++,this.version="10.10.0",this.plugins=new iOe,this.options={id:{minify:!1},createGenerateId:nG,Renderer:cE?yOe:null,plugins:[]},this.generateId=nG({minify:!1});for(var r=0;r<Q9.length;r++)this.plugins.use(Q9[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=fe({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,i){i===void 0&&(i={});var o=i,s=o.index;typeof s!="number"&&(s=OS.index===0?0:OS.index+1);var a=new rre(r,fe({},i,{jss:this,generateId:i.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:s}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),OS.remove(r),this},e.createRule=function(r,i,o){if(i===void 0&&(i={}),o===void 0&&(o={}),typeof r=="object")return this.createRule(void 0,r,i);var s=fe({},o,{name:r,jss:this,Renderer:this.options.Renderer});s.generateId||(s.generateId=this.generateId),s.classes||(s.classes={}),s.keyframes||(s.keyframes={});var a=W$(r,i,s);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return o.forEach(function(a){r.plugins.use(a)}),this},t}(),sre=function(e){return new _Oe(e)},G$=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function are(t){var e=null;for(var n in t){var r=t[n],i=typeof r;if(i==="function")e||(e={}),e[n]=r;else if(i==="object"&&r!==null&&!Array.isArray(r)){var o=are(r);o&&(e||(e={}),e[n]=o)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */sre();function lre(t={}){const{baseClasses:e,newClasses:n,Component:r}=t;if(!n)return e;const i=fe({},e);return Object.keys(n).forEach(o=>{n[o]&&(i[o]=`${e[o]} ${n[o]}`)}),i}const xOe={set:(t,e,n,r)=>{let i=t.get(e);i||(i=new Map,t.set(e,i)),i.set(n,r)},get:(t,e,n)=>{const r=t.get(e);return r?r.get(n):void 0},delete:(t,e,n)=>{t.get(e).delete(n)}},Mx=xOe;function cre(){var t;const e=_$();return(t=e==null?void 0:e.$$material)!=null?t:e}const bOe=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];function wOe(t={}){const{disableGlobal:e=!1,productionPrefix:n="jss",seed:r=""}=t,i=r===""?"":`${r}-`;let o=0;const s=()=>(o+=1,o);return(a,l)=>{const d=l.options.name;if(d&&d.indexOf("Mui")===0&&!l.options.link&&!e){if(bOe.indexOf(a.key)!==-1)return`Mui-${a.key}`;const f=`${i}${d}-${a.key}`;return!l.options.theme[Yte]||r!==""?f:`${f}-${s()}`}return`${i}${n}${s()}`}}var ure=Date.now(),OD="fnValues"+ure,LD="fnStyle"+ ++ure,SOe=function(){return{onCreateRule:function(n,r,i){if(typeof r!="function")return null;var o=W$(n,{},i);return o[LD]=r,o},onProcessStyle:function(n,r){if(OD in r||LD in r)return n;var i={};for(var o in n){var s=n[o];typeof s=="function"&&(delete n[o],i[o]=s)}return r[OD]=i,n},onUpdate:function(n,r,i,o){var s=r,a=s[LD];a&&(s.style=a(n)||{});var l=s[OD];if(l)for(var d in l)s.prop(d,l[d](n),o)}}},ty="@global",gF="@global ",MOe=function(){function t(n,r,i){this.type="global",this.at=ty,this.isProcessed=!1,this.key=n,this.options=i,this.rules=new gR(fe({},i,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,i,o){var s=this.rules.add(r,i,o);return s&&this.options.jss.plugins.onProcessRule(s),s},e.replaceRule=function(r,i,o){var s=this.rules.replace(r,i,o);return s&&this.options.jss.plugins.onProcessRule(s),s},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),EOe=function(){function t(n,r,i){this.type="global",this.at=ty,this.isProcessed=!1,this.key=n,this.options=i;var o=n.substr(gF.length);this.rule=i.jss.createRule(o,r,fe({},i,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),TOe=/\s*,\s*/g;function dre(t,e){for(var n=t.split(TOe),r="",i=0;i<n.length;i++)r+=e+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}function COe(t,e){var n=t.options,r=t.style,i=r?r[ty]:null;if(i){for(var o in i)e.addRule(o,i[o],fe({},n,{selector:dre(o,t.selector)}));delete r[ty]}}function AOe(t,e){var n=t.options,r=t.style;for(var i in r)if(!(i[0]!=="@"||i.substr(0,ty.length)!==ty)){var o=dre(i.substr(ty.length),t.selector);e.addRule(o,r[i],fe({},n,{selector:o})),delete r[i]}}function POe(){function t(n,r,i){if(!n)return null;if(n===ty)return new MOe(n,r,i);if(n[0]==="@"&&n.substr(0,gF.length)===gF)return new EOe(n,r,i);var o=i.parent;return o&&(o.type==="global"||o.options.parent&&o.options.parent.type==="global")&&(i.scoped=!1),!i.selector&&i.scoped===!1&&(i.selector=n),null}function e(n,r){n.type!=="style"||!r||(COe(n,r),AOe(n,r))}return{onCreateRule:t,onProcessRule:e}}var oG=/\s*,\s*/g,IOe=/&/g,kOe=/\$([\w-]+)/g;function ROe(){function t(i,o){return function(s,a){var l=i.getRule(a)||o&&o.getRule(a);return l?l.selector:a}}function e(i,o){for(var s=o.split(oG),a=i.split(oG),l="",d=0;d<s.length;d++)for(var f=s[d],p=0;p<a.length;p++){var g=a[p];l&&(l+=", "),l+=g.indexOf("&")!==-1?g.replace(IOe,f):f+" "+g}return l}function n(i,o,s){if(s)return fe({},s,{index:s.index+1});var a=i.options.nestingLevel;a=a===void 0?1:a+1;var l=fe({},i.options,{nestingLevel:a,index:o.indexOf(i)+1});return delete l.name,l}function r(i,o,s){if(o.type!=="style")return i;var a=o,l=a.options.parent,d,f;for(var p in i){var g=p.indexOf("&")!==-1,v=p[0]==="@";if(!(!g&&!v)){if(d=n(a,l,d),g){var x=e(p,a.selector);f||(f=t(l,s)),x=x.replace(kOe,f);var b=a.key+"-"+p;"replaceRule"in l?l.replaceRule(b,i[p],fe({},d,{selector:x})):l.addRule(b,i[p],fe({},d,{selector:x}))}else v&&l.addRule(p,{},d).addRule(a.key,i[p],{selector:a.selector});delete i[p]}}return i}return{onProcessStyle:r}}var OOe=/[A-Z]/g,LOe=/^ms-/,DD={};function DOe(t){return"-"+t.toLowerCase()}function hre(t){if(DD.hasOwnProperty(t))return DD[t];var e=t.replace(OOe,DOe);return DD[t]=LOe.test(e)?"-"+e:e}function UP(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:hre(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(UP):e.fallbacks=UP(t.fallbacks)),e}function NOe(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=UP(n[r]);return n}return UP(n)}function e(n,r,i){if(r.indexOf("--")===0)return n;var o=hre(r);return r===o?n:(i.prop(o,n),null)}return{onProcessStyle:t,onChangeValue:e}}var Xt=G$&&CSS?CSS.px:"px",VT=G$&&CSS?CSS.ms:"ms",S_=G$&&CSS?CSS.percent:"%",zOe={"animation-delay":VT,"animation-duration":VT,"background-position":Xt,"background-position-x":Xt,"background-position-y":Xt,"background-size":Xt,border:Xt,"border-bottom":Xt,"border-bottom-left-radius":Xt,"border-bottom-right-radius":Xt,"border-bottom-width":Xt,"border-left":Xt,"border-left-width":Xt,"border-radius":Xt,"border-right":Xt,"border-right-width":Xt,"border-top":Xt,"border-top-left-radius":Xt,"border-top-right-radius":Xt,"border-top-width":Xt,"border-width":Xt,"border-block":Xt,"border-block-end":Xt,"border-block-end-width":Xt,"border-block-start":Xt,"border-block-start-width":Xt,"border-block-width":Xt,"border-inline":Xt,"border-inline-end":Xt,"border-inline-end-width":Xt,"border-inline-start":Xt,"border-inline-start-width":Xt,"border-inline-width":Xt,"border-start-start-radius":Xt,"border-start-end-radius":Xt,"border-end-start-radius":Xt,"border-end-end-radius":Xt,margin:Xt,"margin-bottom":Xt,"margin-left":Xt,"margin-right":Xt,"margin-top":Xt,"margin-block":Xt,"margin-block-end":Xt,"margin-block-start":Xt,"margin-inline":Xt,"margin-inline-end":Xt,"margin-inline-start":Xt,padding:Xt,"padding-bottom":Xt,"padding-left":Xt,"padding-right":Xt,"padding-top":Xt,"padding-block":Xt,"padding-block-end":Xt,"padding-block-start":Xt,"padding-inline":Xt,"padding-inline-end":Xt,"padding-inline-start":Xt,"mask-position-x":Xt,"mask-position-y":Xt,"mask-size":Xt,height:Xt,width:Xt,"min-height":Xt,"max-height":Xt,"min-width":Xt,"max-width":Xt,bottom:Xt,left:Xt,top:Xt,right:Xt,inset:Xt,"inset-block":Xt,"inset-block-end":Xt,"inset-block-start":Xt,"inset-inline":Xt,"inset-inline-end":Xt,"inset-inline-start":Xt,"box-shadow":Xt,"text-shadow":Xt,"column-gap":Xt,"column-rule":Xt,"column-rule-width":Xt,"column-width":Xt,"font-size":Xt,"font-size-delta":Xt,"letter-spacing":Xt,"text-decoration-thickness":Xt,"text-indent":Xt,"text-stroke":Xt,"text-stroke-width":Xt,"word-spacing":Xt,motion:Xt,"motion-offset":Xt,outline:Xt,"outline-offset":Xt,"outline-width":Xt,perspective:Xt,"perspective-origin-x":S_,"perspective-origin-y":S_,"transform-origin":S_,"transform-origin-x":S_,"transform-origin-y":S_,"transform-origin-z":S_,"transition-delay":VT,"transition-duration":VT,"vertical-align":Xt,"flex-basis":Xt,"shape-margin":Xt,size:Xt,gap:Xt,grid:Xt,"grid-gap":Xt,"row-gap":Xt,"grid-row-gap":Xt,"grid-column-gap":Xt,"grid-template-rows":Xt,"grid-template-columns":Xt,"grid-auto-rows":Xt,"grid-auto-columns":Xt,"box-shadow-x":Xt,"box-shadow-y":Xt,"box-shadow-blur":Xt,"box-shadow-spread":Xt,"font-line-height":Xt,"text-shadow-x":Xt,"text-shadow-y":Xt,"text-shadow-blur":Xt};function fre(t){var e=/(-[a-z])/g,n=function(s){return s[1].toUpperCase()},r={};for(var i in t)r[i]=t[i],r[i.replace(e,n)]=t[i];return r}var FOe=fre(zOe);function LS(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=LS(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var i in e)e[i]=LS(i,e[i],n);else for(var o in e)e[o]=LS(t+"-"+o,e[o],n);else if(typeof e=="number"&&isNaN(e)===!1){var s=n[t]||FOe[t];return s&&!(e===0&&s===Xt)?typeof s=="function"?s(e).toString():""+e+s:e.toString()}return e}function BOe(t){t===void 0&&(t={});var e=fre(t);function n(i,o){if(o.type!=="style")return i;for(var s in i)i[s]=LS(s,i[s],e);return i}function r(i,o){return LS(o,i,e)}return{onProcessStyle:n,onChangeValue:r}}function yF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $Oe(t){if(Array.isArray(t))return yF(t)}function jOe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function UOe(t,e){if(t){if(typeof t=="string")return yF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yF(t,e)}}function VOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WOe(t){return $Oe(t)||jOe(t)||UOe(t)||VOe()}var fS="",vF="",pre="",mre="",HOe=cE&&"ontouchstart"in document.documentElement;if(cE){var ND={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},GOe=document.createElement("p"),zD=GOe.style,qOe="Transform";for(var FD in ND)if(FD+qOe in zD){fS=FD,vF=ND[FD];break}fS==="Webkit"&&"msHyphens"in zD&&(fS="ms",vF=ND.ms,mre="edge"),fS==="Webkit"&&"-apple-trailing-word"in zD&&(pre="apple")}var Or={js:fS,css:vF,vendor:pre,browser:mre,isTouch:HOe};function YOe(t){return t[1]==="-"||Or.js==="ms"?t:"@"+Or.css+"keyframes"+t.substr(10)}var XOe={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:Or.js==="ms"?"-webkit-"+e:Or.css+e}},KOe={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:Or.js==="Webkit"?Or.css+"print-"+e:e}},ZOe=/[-\s]+(.)?/g;function JOe(t,e){return e?e.toUpperCase():""}function q$(t){return t.replace(ZOe,JOe)}function fy(t){return q$("-"+t)}var QOe={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(Or.js==="Webkit"){var r="mask-image";if(q$(r)in n)return e;if(Or.js+fy(r)in n)return Or.css+e}return e}},eLe={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:Or.vendor==="apple"&&!Or.isTouch?Or.css+e:e}},tLe={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:Or.css+e}},nLe={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:Or.css+e}},rLe={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:Or.js==="Webkit"||Or.js==="ms"&&Or.browser!=="edge"?Or.css+e:e}},iLe={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:Or.js==="Moz"||Or.js==="ms"||Or.vendor==="apple"?Or.css+e:e}},oLe={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(Or.js==="Webkit"){var r="WebkitColumn"+fy(e);return r in n?Or.css+"column-"+e:!1}if(Or.js==="Moz"){var i="page"+fy(e);return i in n?"page-"+e:!1}return!1}},sLe={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(Or.js==="Moz")return e;var r=e.replace("-inline","");return Or.js+fy(r)in n?Or.css+r:!1}},aLe={supportedProperty:function(e,n){return q$(e)in n?e:!1}},lLe={supportedProperty:function(e,n){var r=fy(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:Or.js+r in n?Or.css+e:Or.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},cLe={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:Or.js==="ms"?""+Or.css+e:e}},uLe={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:Or.js==="ms"?Or.css+"scroll-chaining":e}},dLe={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},hLe={supportedProperty:function(e,n){var r=dLe[e];return r&&Or.js+fy(r)in n?Or.css+r:!1}},gre={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},fLe=Object.keys(gre),pLe=function(e){return Or.css+e},mLe={supportedProperty:function(e,n,r){var i=r.multiple;if(fLe.indexOf(e)>-1){var o=gre[e];if(!Array.isArray(o))return Or.js+fy(o)in n?Or.css+o:!1;if(!i)return!1;for(var s=0;s<o.length;s++)if(!(Or.js+fy(o[0])in n))return!1;return o.map(pLe)}return!1}},yre=[XOe,KOe,QOe,eLe,tLe,nLe,rLe,iLe,oLe,sLe,aLe,lLe,cLe,uLe,hLe,mLe],sG=yre.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),gLe=yre.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,WOe(e.noPrefill)),t},[]),pS,Ov={};if(cE){pS=document.createElement("p");var BD=window.getComputedStyle(document.documentElement,"");for(var $D in BD)isNaN($D)||(Ov[BD[$D]]=BD[$D]);gLe.forEach(function(t){return delete Ov[t]})}function _F(t,e){if(e===void 0&&(e={}),!pS)return t;if(Ov[t]!=null)return Ov[t];(t==="transition"||t==="transform")&&(e[t]=t in pS.style);for(var n=0;n<sG.length&&(Ov[t]=sG[n](t,pS.style,e),!Ov[t]);n++);try{pS.style[t]=""}catch{return!1}return Ov[t]}var M_={},yLe={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},vLe=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Ag;function _Le(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?_F(e):", "+_F(n);return r||e||n}cE&&(Ag=document.createElement("p"));function aG(t,e){var n=e;if(!Ag||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(M_[r]!=null)return M_[r];try{Ag.style[t]=n}catch{return M_[r]=!1,!1}if(yLe[t])n=n.replace(vLe,_Le);else if(Ag.style[t]===""&&(n=Or.css+n,n==="-ms-flex"&&(Ag.style[t]="-ms-flexbox"),Ag.style[t]=n,Ag.style[t]===""))return M_[r]=!1,!1;return Ag.style[t]="",M_[r]=n,M_[r]}function xLe(){function t(i){if(i.type==="keyframes"){var o=i;o.at=YOe(o.at)}}function e(i){for(var o in i){var s=i[o];if(o==="fallbacks"&&Array.isArray(s)){i[o]=s.map(e);continue}var a=!1,l=_F(o);l&&l!==o&&(a=!0);var d=!1,f=aG(l,o0(s));f&&f!==s&&(d=!0),(a||d)&&(a&&delete i[o],i[l||o]=f||s)}return i}function n(i,o){return o.type!=="style"?i:e(i)}function r(i,o){return aG(o,o0(i))||i}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function bLe(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var i={},o=Object.keys(n).sort(t),s=0;s<o.length;s++)i[o[s]]=n[o[s]];return i}}}function wLe(){return{plugins:[SOe(),POe(),ROe(),NOe(),BOe(),typeof window>"u"?null:xLe(),bLe()]}}const SLe=sre(wLe()),MLe=wOe(),ELe=new Map,TLe={disableGeneration:!1,generateClassName:MLe,jss:SLe,sheetsCache:null,sheetsManager:ELe,sheetsRegistry:null},CLe=W.createContext(TLe);let lG=-1e9;function ALe(){return lG+=1,lG}const PLe=["variant"];function cG(t){return t.length===0}function ILe(t){const{variant:e}=t,n=on(t,PLe);let r=e||"";return Object.keys(n).sort().forEach(i=>{i==="color"?r+=cG(r)?t[i]:Jt(t[i]):r+=`${cG(r)?i:Jt(i)}${Jt(t[i].toString())}`}),r}const kLe={},RLe=kLe;function OLe(t){const e=typeof t=="function";return{create:(n,r)=>{let i;try{i=e?t(n):t}catch(l){throw l}if(!r||!n.components||!n.components[r]||!n.components[r].styleOverrides&&!n.components[r].variants)return i;const o=n.components[r].styleOverrides||{},s=n.components[r].variants||[],a=fe({},i);return Object.keys(o).forEach(l=>{a[l]=za(a[l]||{},o[l])}),s.forEach(l=>{const d=ILe(l.props);a[d]=za(a[d]||{},l.style)}),a},options:{}}}const LLe=["name","classNamePrefix","Component","defaultTheme"];function DLe({state:t,stylesOptions:e},n,r){if(e.disableGeneration)return n||{};t.cacheClasses||(t.cacheClasses={value:null,lastProp:null,lastJSS:{}});let i=!1;return t.classes!==t.cacheClasses.lastJSS&&(t.cacheClasses.lastJSS=t.classes,i=!0),n!==t.cacheClasses.lastProp&&(t.cacheClasses.lastProp=n,i=!0),i&&(t.cacheClasses.value=lre({baseClasses:t.cacheClasses.lastJSS,newClasses:n,Component:r})),t.cacheClasses.value}function NLe({state:t,theme:e,stylesOptions:n,stylesCreator:r,name:i},o){if(n.disableGeneration)return;let s=Mx.get(n.sheetsManager,r,e);s||(s={refs:0,staticSheet:null,dynamicStyles:null},Mx.set(n.sheetsManager,r,e,s));const a=fe({},r.options,n,{theme:e,flip:typeof n.flip=="boolean"?n.flip:e.direction==="rtl"});a.generateId=a.serverGenerateClassName||a.generateClassName;const l=n.sheetsRegistry;if(s.refs===0){let d;n.sheetsCache&&(d=Mx.get(n.sheetsCache,r,e));const f=r.create(e,i);d||(d=n.jss.createStyleSheet(f,fe({link:!1},a)),d.attach(),n.sheetsCache&&Mx.set(n.sheetsCache,r,e,d)),l&&l.add(d),s.staticSheet=d,s.dynamicStyles=are(f)}if(s.dynamicStyles){const d=n.jss.createStyleSheet(s.dynamicStyles,fe({link:!0},a));d.update(o),d.attach(),t.dynamicSheet=d,t.classes=lre({baseClasses:s.staticSheet.classes,newClasses:d.classes}),l&&l.add(d)}else t.classes=s.staticSheet.classes;s.refs+=1}function zLe({state:t},e){t.dynamicSheet&&t.dynamicSheet.update(e)}function FLe({state:t,theme:e,stylesOptions:n,stylesCreator:r}){if(n.disableGeneration)return;const i=Mx.get(n.sheetsManager,r,e);i.refs-=1;const o=n.sheetsRegistry;i.refs===0&&(Mx.delete(n.sheetsManager,r,e),n.jss.removeStyleSheet(i.staticSheet),o&&o.remove(i.staticSheet)),t.dynamicSheet&&(n.jss.removeStyleSheet(t.dynamicSheet),o&&o.remove(t.dynamicSheet))}function BLe(t,e){const n=W.useRef([]);let r;const i=W.useMemo(()=>({}),e);n.current!==i&&(n.current=i,r=t()),W.useEffect(()=>()=>{r&&r()},[i])}function si(t,e={}){const{name:n,classNamePrefix:r,Component:i,defaultTheme:o=RLe}=e,s=on(e,LLe),a=OLe(t),l=n||r||"makeStyles";return a.options={index:ALe(),name:n,meta:l,classNamePrefix:l},(f={})=>{const p=cre()||o,g=fe({},W.useContext(CLe),s),v=W.useRef(),x=W.useRef();return BLe(()=>{const S={name:n,state:{},stylesCreator:a,stylesOptions:g,theme:p};return NLe(S,f),x.current=!1,v.current=S,()=>{FLe(S)}},[p,a]),W.useEffect(()=>{x.current&&zLe(v.current,f),x.current=!0}),DLe(v.current,f.classes,i)}}const $Le="/assets/alarm-DM0YUa2r.mp3";function vre(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=vre(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function F0(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=vre(t))&&(r&&(r+=" "),r+=e);return r}let jLe={data:""},ULe=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||jLe,VLe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,WLe=/\/\*[^]*?\*\/|  +/g,uG=/\n+/g,Lv=(t,e)=>{let n="",r="",i="";for(let o in t){let s=t[o];o[0]=="@"?o[1]=="i"?n=o+" "+s+";":r+=o[1]=="f"?Lv(s,o):o+"{"+Lv(s,o[1]=="k"?"":e)+"}":typeof s=="object"?r+=Lv(s,e?e.replace(/([^,])+/g,a=>o.replace(/(^:.*)|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):o):s!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Lv.p?Lv.p(o,s):o+":"+s+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Sp={},_re=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+_re(t[n]);return e}return t},HLe=(t,e,n,r,i)=>{let o=_re(t),s=Sp[o]||(Sp[o]=(l=>{let d=0,f=11;for(;d<l.length;)f=101*f+l.charCodeAt(d++)>>>0;return"go"+f})(o));if(!Sp[s]){let l=o!==t?t:(d=>{let f,p,g=[{}];for(;f=VLe.exec(d.replace(WLe,""));)f[4]?g.shift():f[3]?(p=f[3].replace(uG," ").trim(),g.unshift(g[0][p]=g[0][p]||{})):g[0][f[1]]=f[2].replace(uG," ").trim();return g[0]})(t);Sp[s]=Lv(i?{["@keyframes "+s]:l}:l,n?"":"."+s)}let a=n&&Sp.g?Sp.g:null;return n&&(Sp.g=Sp[s]),((l,d,f,p)=>{p?d.data=d.data.replace(p,l):d.data.indexOf(l)===-1&&(d.data=f?l+d.data:d.data+l)})(Sp[s],e,r,a),s},GLe=(t,e,n)=>t.reduce((r,i,o)=>{let s=e[o];if(s&&s.call){let a=s(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;s=l?"."+l:a&&typeof a=="object"?a.props?"":Lv(a,""):a===!1?"":a}return r+i+(s??"")},"");function Y$(t){let e=this||{},n=t.call?t(e.p):t;return HLe(n.unshift?n.raw?GLe(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,ULe(e.target),e.g,e.o,e.k)}Y$.bind({g:1});Y$.bind({k:1});function dG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xre(t,e,n){return e&&dG(t.prototype,e),n&&dG(t,n),t}function Gi(){return Gi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gi.apply(this,arguments)}function bre(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function uE(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function hG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var fG=function(){return""},qLe=Ze.createContext({enqueueSnackbar:fG,closeSnackbar:fG}),Cv={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},pG=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},X$=function(e){return""+pG(e.vertical)+pG(e.horizontal)},WT=function(e){return!!e||e===0},HT="unmounted",E_="exited",T_="entering",Iw="entered",mG="exiting",K$=function(t){bre(e,t);function e(r){var i;i=t.call(this,r)||this;var o=r.appear,s;return i.appearStatus=null,r.in?o?(s=E_,i.appearStatus=T_):s=Iw:r.unmountOnExit||r.mountOnEnter?s=HT:s=E_,i.state={status:s},i.nextCallback=null,i}e.getDerivedStateFromProps=function(i,o){var s=i.in;return s&&o.status===HT?{status:E_}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var o=null;if(i!==this.props){var s=this.state.status;this.props.in?s!==T_&&s!==Iw&&(o=T_):(s===T_||s===Iw)&&(o=mG)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,o=i,s=i;return i!=null&&typeof i!="number"&&typeof i!="string"&&(s=i.exit,o=i.enter),{exit:s,enter:o}},n.updateStatus=function(i,o){i===void 0&&(i=!1),o!==null?(this.cancelNextCallback(),o===T_?this.performEnter(i):this.performExit()):this.props.unmountOnExit&&this.state.status===E_&&this.setState({status:HT})},n.performEnter=function(i){var o=this,s=this.props.enter,a=i,l=this.getTimeouts();if(!i&&!s){this.safeSetState({status:Iw},function(){o.props.onEntered&&o.props.onEntered(o.node,a)});return}this.props.onEnter&&this.props.onEnter(this.node,a),this.safeSetState({status:T_},function(){o.props.onEntering&&o.props.onEntering(o.node,a),o.onTransitionEnd(l.enter,function(){o.safeSetState({status:Iw},function(){o.props.onEntered&&o.props.onEntered(o.node,a)})})})},n.performExit=function(){var i=this,o=this.props.exit,s=this.getTimeouts();if(!o){this.safeSetState({status:E_},function(){i.props.onExited&&i.props.onExited(i.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:mG},function(){i.props.onExiting&&i.props.onExiting(i.node),i.onTransitionEnd(s.exit,function(){i.safeSetState({status:E_},function(){i.props.onExited&&i.props.onExited(i.node)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},n.setNextCallback=function(i){var o=this,s=!0;return this.nextCallback=function(){s&&(s=!1,o.nextCallback=null,i())},this.nextCallback.cancel=function(){s=!1},this.nextCallback},n.onTransitionEnd=function(i,o){this.setNextCallback(o);var s=i==null&&!this.props.addEndListener;if(!this.node||s){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===HT)return null;var o=this.props,s=o.children,a=uE(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return s(i,a)},xre(e,[{key:"node",get:function(){var i,o=(i=this.props.nodeRef)===null||i===void 0?void 0:i.current;if(!o)throw new Error("notistack - Custom snackbar is not refForwarding");return o}}]),e}(Ze.Component);function C_(){}K$.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:C_,onEntering:C_,onEntered:C_,onExit:C_,onExiting:C_,onExited:C_};function gG(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function xF(t,e){return W.useMemo(function(){return t==null&&e==null?null:function(n){gG(t,n),gG(e,n)}},[t,e])}function VP(t){var e=t.timeout,n=t.style,r=n===void 0?{}:n,i=t.mode;return{duration:typeof e=="object"?e[i]||0:e,easing:r.transitionTimingFunction,delay:r.transitionDelay}}var bF={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},wre=function(e){e.scrollTop=e.scrollTop},yG=function(e){return Math.round(e)+"ms"};function Ex(t,e){t===void 0&&(t=["all"]);var n=e||{},r=n.duration,i=r===void 0?300:r,o=n.easing,s=o===void 0?bF.easeInOut:o,a=n.delay,l=a===void 0?0:a,d=Array.isArray(t)?t:[t];return d.map(function(f){var p=typeof i=="string"?i:yG(i),g=typeof l=="string"?l:yG(l);return f+" "+p+" "+s+" "+g}).join(",")}function YLe(t){return t&&t.ownerDocument||document}function Sre(t){var e=YLe(t);return e.defaultView||window}function XLe(t,e){e===void 0&&(e=166);var n;function r(){for(var i=this,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];var l=function(){t.apply(i,s)};clearTimeout(n),n=setTimeout(l,e)}return r.clear=function(){clearTimeout(n)},r}function KLe(t,e){var n=e.getBoundingClientRect(),r=Sre(e),i;if(e.fakeTransform)i=e.fakeTransform;else{var o=r.getComputedStyle(e);i=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("transform")}var s=0,a=0;if(i&&i!=="none"&&typeof i=="string"){var l=i.split("(")[1].split(")")[0].split(",");s=parseInt(l[4],10),a=parseInt(l[5],10)}switch(t){case"left":return"translateX("+(r.innerWidth+s-n.left)+"px)";case"right":return"translateX(-"+(n.left+n.width-s)+"px)";case"up":return"translateY("+(r.innerHeight+a-n.top)+"px)";default:return"translateY(-"+(n.top+n.height-a)+"px)"}}function GT(t,e){if(e){var n=KLe(t,e);n&&(e.style.webkitTransform=n,e.style.transform=n)}}var Mre=W.forwardRef(function(t,e){var n=t.children,r=t.direction,i=r===void 0?"down":r,o=t.in,s=t.style,a=t.timeout,l=a===void 0?0:a,d=t.onEnter,f=t.onEntered,p=t.onExit,g=t.onExited,v=uE(t,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),x=W.useRef(null),b=xF(n.ref,x),S=xF(b,e),M=function(B,U){GT(i,B),wre(B),d&&d(B,U)},T=function(B){var U=(s==null?void 0:s.transitionTimingFunction)||bF.easeOut,J=VP({timeout:l,mode:"enter",style:Gi({},s,{transitionTimingFunction:U})});B.style.webkitTransition=Ex("-webkit-transform",J),B.style.transition=Ex("transform",J),B.style.webkitTransform="none",B.style.transform="none"},C=function(B){var U=(s==null?void 0:s.transitionTimingFunction)||bF.sharp,J=VP({timeout:l,mode:"exit",style:Gi({},s,{transitionTimingFunction:U})});B.style.webkitTransition=Ex("-webkit-transform",J),B.style.transition=Ex("transform",J),GT(i,B),p&&p(B)},k=function(B){B.style.webkitTransition="",B.style.transition="",g&&g(B)},O=W.useCallback(function(){x.current&&GT(i,x.current)},[i]);return W.useEffect(function(){if(!(o||i==="down"||i==="right")){var D=XLe(function(){x.current&&GT(i,x.current)}),B=Sre(x.current);return B.addEventListener("resize",D),function(){D.clear(),B.removeEventListener("resize",D)}}},[i,o]),W.useEffect(function(){o||O()},[o,O]),W.createElement(K$,Object.assign({appear:!0,nodeRef:x,onEnter:M,onEntered:f,onEntering:T,onExit:C,onExited:k,in:o,timeout:l},v),function(D,B){return W.cloneElement(n,Gi({ref:S,style:Gi({visibility:D==="exited"&&!o?"hidden":void 0},s,{},n.props.style)},B))})});Mre.displayName="Slide";var yR=function(e){return Ze.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},e))},ZLe=function(){return Ze.createElement(yR,null,Ze.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},JLe=function(){return Ze.createElement(yR,null,Ze.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},QLe=function(){return Ze.createElement(yR,null,Ze.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},eDe=function(){return Ze.createElement(yR,null,Ze.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},tDe={default:void 0,success:Ze.createElement(ZLe,null),warning:Ze.createElement(JLe,null),error:Ze.createElement(QLe,null),info:Ze.createElement(eDe,null)},s0={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:tDe,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:Mre,transitionDuration:{enter:225,exit:195}},nDe=function(e,n){var r=function(o){return typeof o=="number"||o===null};return r(e)?e:r(n)?n:s0.autoHideDuration},rDe=function(e,n){var r=function(o,s){return s.some(function(a){return typeof o===a})};return r(e,["string","number"])?e:r(e,["object"])?Gi({},s0.transitionDuration,{},r(n,["object"])&&n,{},e):r(n,["string","number"])?n:r(n,["object"])?Gi({},s0.transitionDuration,{},n):s0.transitionDuration},iDe=function(e,n){return function(r,i){return i===void 0&&(i=!1),i?Gi({},s0[r],{},n[r],{},e[r]):r==="autoHideDuration"?nDe(e.autoHideDuration,n.autoHideDuration):r==="transitionDuration"?rDe(e.transitionDuration,n.transitionDuration):e[r]||n[r]||s0[r]}};function dE(t){return Object.entries(t).reduce(function(e,n){var r,i=n[0],o=n[1];return Gi({},e,(r={},r[i]=Y$(o),r))},{})}var Cb={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(e){return"notistack-MuiContent-"+e}},vG=dE({root:{height:0},entered:{height:"auto"}}),jD="0px",UD=175,Ere=W.forwardRef(function(t,e){var n=t.children,r=t.in,i=t.onExited,o=W.useRef(null),s=W.useRef(null),a=xF(e,s),l=function(){return o.current?o.current.clientHeight:0},d=function(b){b.style.height=jD},f=function(b){var S=l(),M=VP({timeout:UD,mode:"enter"}),T=M.duration,C=M.easing;b.style.transitionDuration=typeof T=="string"?T:T+"ms",b.style.height=S+"px",b.style.transitionTimingFunction=C||""},p=function(b){b.style.height="auto"},g=function(b){b.style.height=l()+"px"},v=function(b){wre(b);var S=VP({timeout:UD,mode:"exit"}),M=S.duration,T=S.easing;b.style.transitionDuration=typeof M=="string"?M:M+"ms",b.style.height=jD,b.style.transitionTimingFunction=T||""};return W.createElement(K$,{in:r,unmountOnExit:!0,onEnter:d,onEntered:p,onEntering:f,onExit:g,onExited:i,onExiting:v,nodeRef:s,timeout:UD},function(x,b){return W.createElement("div",Object.assign({ref:a,className:F0(vG.root,x==="entered"&&vG.entered),style:Gi({pointerEvents:"all",overflow:"hidden",minHeight:jD,transition:Ex("height")},x==="entered"&&{overflow:"visible"},{},x==="exited"&&!r&&{visibility:"hidden"})},b),W.createElement("div",{ref:o,className:Cb.CollapseWrapper,style:{display:"flex",width:"100%"}},n))})});Ere.displayName="Collapse";var _G={right:"left",left:"right",bottom:"up",top:"down"},oDe=function(e){return e.horizontal!=="center"?_G[e.horizontal]:_G[e.vertical]},sDe=function(e){return"anchorOrigin"+X$(e)},aDe=function(e){e===void 0&&(e={});var n={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(e).filter(function(r){return!n[r]}).reduce(function(r,i){var o;return Gi({},r,(o={},o[i]=e[i],o))},{})},lDe=function(){};function DS(t,e){return t.reduce(function(n,r){return r==null?n:function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];var l=[].concat(s);e&&l.indexOf(e)===-1&&l.push(e),n.apply(this,l),r.apply(this,l)}},lDe)}var cDe=typeof window<"u"?W.useLayoutEffect:W.useEffect;function xG(t){var e=W.useRef(t);return cDe(function(){e.current=t}),W.useCallback(function(){return e.current.apply(void 0,arguments)},[])}var Tre=W.forwardRef(function(t,e){var n=t.children,r=t.className,i=t.autoHideDuration,o=t.disableWindowBlurListener,s=o===void 0?!1:o,a=t.onClose,l=t.id,d=t.open,f=t.SnackbarProps,p=f===void 0?{}:f,g=W.useRef(),v=xG(function(){a&&a.apply(void 0,arguments)}),x=xG(function(C){!a||C==null||(g.current&&clearTimeout(g.current),g.current=setTimeout(function(){v(null,"timeout",l)},C))});W.useEffect(function(){return d&&x(i),function(){g.current&&clearTimeout(g.current)}},[d,i,x]);var b=function(){g.current&&clearTimeout(g.current)},S=W.useCallback(function(){i!=null&&x(i*.5)},[i,x]),M=function(k){p.onMouseEnter&&p.onMouseEnter(k),b()},T=function(k){p.onMouseLeave&&p.onMouseLeave(k),S()};return W.useEffect(function(){if(!s&&d)return window.addEventListener("focus",S),window.addEventListener("blur",b),function(){window.removeEventListener("focus",S),window.removeEventListener("blur",b)}},[s,S,d]),W.createElement("div",Object.assign({ref:e},p,{className:F0(Cb.Snackbar,r),onMouseEnter:M,onMouseLeave:T}),n)});Tre.displayName="Snackbar";var VD,uDe=dE({root:(VD={display:"flex",flexWrap:"wrap",flexGrow:1},VD[Cv.upSm]={flexGrow:"initial",minWidth:"288px"},VD)}),Cre=W.forwardRef(function(t,e){var n=t.className,r=uE(t,["className"]);return Ze.createElement("div",Object.assign({ref:e,className:F0(uDe.root,n)},r))});Cre.displayName="SnackbarContent";var kw=dE({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),bG="notistack-snackbar",Are=W.forwardRef(function(t,e){var n=t.id,r=t.message,i=t.action,o=t.iconVariant,s=t.variant,a=t.hideIconVariant,l=t.style,d=t.className,f=o[s],p=i;return typeof p=="function"&&(p=p(n)),Ze.createElement(Cre,{ref:e,role:"alert","aria-describedby":bG,style:l,className:F0(Cb.MuiContent,Cb.MuiContentVariant(s),kw.root,kw[s],d,!a&&f&&kw.lessPadding)},Ze.createElement("div",{id:bG,className:kw.message},a?null:f,r),p&&Ze.createElement("div",{className:kw.action},p))});Are.displayName="MaterialDesignContent";var dDe=W.memo(Are),hDe=dE({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),fDe=function(e){var n=W.useRef(),r=W.useState(!0),i=r[0],o=r[1],s=DS([e.snack.onClose,e.onClose]),a=function(){e.snack.requestClose&&s(null,"instructed",e.snack.id)},l=W.useCallback(function(){n.current=setTimeout(function(){o(function(J){return!J})},125)},[]);W.useEffect(function(){return function(){n.current&&clearTimeout(n.current)}},[]);var d=e.snack,f=e.classes,p=e.Component,g=p===void 0?dDe:p,v=W.useMemo(function(){return aDe(f)},[f]),x=d.open,b=d.SnackbarProps,S=d.TransitionComponent,M=d.TransitionProps,T=d.transitionDuration,C=d.disableWindowBlurListener,k=d.content,O=uE(d,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),D=Gi({direction:oDe(O.anchorOrigin),timeout:T},M),B=k;typeof B=="function"&&(B=B(O.id,O.message));var U=["onEnter","onEntered","onExit","onExited"].reduce(function(J,V){var X;return Gi({},J,(X={},X[V]=DS([e.snack[V],e[V]],O.id),X))},{});return Ze.createElement(Ere,{in:i,onExited:U.onExited},Ze.createElement(Tre,{open:x,id:O.id,disableWindowBlurListener:C,autoHideDuration:O.autoHideDuration,className:F0(hDe.wrappedRoot,v.root,v[sDe(O.anchorOrigin)]),SnackbarProps:b,onClose:s},Ze.createElement(S,Object.assign({},D,{appear:!0,in:x,onExit:U.onExit,onExited:l,onEnter:U.onEnter,onEntered:DS([U.onEntered,a],O.id)}),B||Ze.createElement(g,Object.assign({},O)))))},Rw,WD,qT,YT,HD,Mp={view:{default:20,dense:4},snackbar:{default:6,dense:2}},wG="."+Cb.CollapseWrapper,GD=16,XT=dE({root:(Rw={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:Ex(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},Rw[wG]={padding:Mp.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},Rw.maxWidth="calc(100% - "+Mp.view.default*2+"px)",Rw[Cv.downXs]={width:"100%",maxWidth:"calc(100% - "+GD*2+"px)"},Rw),rootDense:(WD={},WD[wG]={padding:Mp.snackbar.dense+"px 0px"},WD),top:{top:Mp.view.default-Mp.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:Mp.view.default-Mp.snackbar.default+"px",flexDirection:"column-reverse"},left:(qT={left:Mp.view.default+"px"},qT[Cv.upSm]={alignItems:"flex-start"},qT[Cv.downXs]={left:GD+"px"},qT),right:(YT={right:Mp.view.default+"px"},YT[Cv.upSm]={alignItems:"flex-end"},YT[Cv.downXs]={right:GD+"px"},YT),center:(HD={left:"50%",transform:"translateX(-50%)"},HD[Cv.upSm]={alignItems:"center"},HD)}),pDe=function(e){var n=e.classes,r=n===void 0?{}:n,i=e.anchorOrigin,o=e.dense,s=e.children,a=F0(Cb.SnackbarContainer,XT[i.vertical],XT[i.horizontal],XT.root,r.containerRoot,r["containerAnchorOrigin"+X$(i)],o&&XT.rootDense);return Ze.createElement("div",{className:a},s)},mDe=W.memo(pDe),SG=function(e){var n=typeof e=="string"||W.isValidElement(e);return!n},Pre,gDe=function(t){bre(e,t);function e(r){var i;return i=t.call(this,r)||this,i.enqueueSnackbar=function(o,s){if(s===void 0&&(s={}),o==null)throw new Error("enqueueSnackbar called with invalid argument");var a=SG(o)?o:s,l=SG(o)?o.message:o,d=a.key,f=a.preventDuplicate,p=uE(a,["key","preventDuplicate"]),g=WT(d),v=g?d:new Date().getTime()+Math.random(),x=iDe(p,i.props),b=Gi({id:v},p,{message:l,open:!0,entered:!1,requestClose:!1,persist:x("persist"),action:x("action"),content:x("content"),variant:x("variant"),anchorOrigin:x("anchorOrigin"),disableWindowBlurListener:x("disableWindowBlurListener"),autoHideDuration:x("autoHideDuration"),hideIconVariant:x("hideIconVariant"),TransitionComponent:x("TransitionComponent"),transitionDuration:x("transitionDuration"),TransitionProps:x("TransitionProps",!0),iconVariant:x("iconVariant",!0),style:x("style",!0),SnackbarProps:x("SnackbarProps",!0),className:F0(i.props.className,p.className)});return b.persist&&(b.autoHideDuration=void 0),i.setState(function(S){if(f===void 0&&i.props.preventDuplicate||f){var M=function(O){return g?O.id===v:O.message===l},T=S.queue.findIndex(M)>-1,C=S.snacks.findIndex(M)>-1;if(T||C)return S}return i.handleDisplaySnack(Gi({},S,{queue:[].concat(S.queue,[b])}))}),v},i.handleDisplaySnack=function(o){var s=o.snacks;return s.length>=i.maxSnack?i.handleDismissOldest(o):i.processQueue(o)},i.processQueue=function(o){var s=o.queue,a=o.snacks;return s.length>0?Gi({},o,{snacks:[].concat(a,[s[0]]),queue:s.slice(1,s.length)}):o},i.handleDismissOldest=function(o){if(o.snacks.some(function(f){return!f.open||f.requestClose}))return o;var s=!1,a=!1,l=o.snacks.reduce(function(f,p){return f+(p.open&&p.persist?1:0)},0);l===i.maxSnack&&(a=!0);var d=o.snacks.map(function(f){return!s&&(!f.persist||a)?(s=!0,f.entered?(f.onClose&&f.onClose(null,"maxsnack",f.id),i.props.onClose&&i.props.onClose(null,"maxsnack",f.id),Gi({},f,{open:!1})):Gi({},f,{requestClose:!0})):Gi({},f)});return Gi({},o,{snacks:d})},i.handleEnteredSnack=function(o,s,a){if(!WT(a))throw new Error("handleEnteredSnack Cannot be called with undefined key");i.setState(function(l){var d=l.snacks;return{snacks:d.map(function(f){return f.id===a?Gi({},f,{entered:!0}):Gi({},f)})}})},i.handleCloseSnack=function(o,s,a){i.props.onClose&&i.props.onClose(o,s,a);var l=a===void 0;i.setState(function(d){var f=d.snacks,p=d.queue;return{snacks:f.map(function(g){return!l&&g.id!==a?Gi({},g):g.entered?Gi({},g,{open:!1}):Gi({},g,{requestClose:!0})}),queue:p.filter(function(g){return g.id!==a})}})},i.closeSnackbar=function(o){var s=i.state.snacks.find(function(a){return a.id===o});WT(o)&&s&&s.onClose&&s.onClose(null,"instructed",o),i.handleCloseSnack(null,"instructed",o)},i.handleExitedSnack=function(o,s){if(!WT(s))throw new Error("handleExitedSnack Cannot be called with undefined key");i.setState(function(a){var l=i.processQueue(Gi({},a,{snacks:a.snacks.filter(function(d){return d.id!==s})}));return l.queue.length===0?l:i.handleDismissOldest(l)})},Pre=i.enqueueSnackbar,i.closeSnackbar,i.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:i.enqueueSnackbar.bind(hG(i)),closeSnackbar:i.closeSnackbar.bind(hG(i))}},i}var n=e.prototype;return n.render=function(){var i=this,o=this.state.contextValue,s=this.props,a=s.domRoot,l=s.children,d=s.dense,f=d===void 0?!1:d,p=s.Components,g=p===void 0?{}:p,v=s.classes,x=this.state.snacks.reduce(function(S,M){var T,C=X$(M.anchorOrigin),k=S[C]||[];return Gi({},S,(T={},T[C]=[].concat(k,[M]),T))},{}),b=Object.keys(x).map(function(S){var M=x[S],T=M[0];return Ze.createElement(mDe,{key:S,dense:f,anchorOrigin:T.anchorOrigin,classes:v},M.map(function(C){return Ze.createElement(fDe,{key:C.id,snack:C,classes:v,Component:g[C.variant],onClose:i.handleCloseSnack,onEnter:i.props.onEnter,onExit:i.props.onExit,onExited:DS([i.handleExitedSnack,i.props.onExited],C.id),onEntered:DS([i.handleEnteredSnack,i.props.onEntered],C.id)})}))});return Ze.createElement(qLe.Provider,{value:o},l,a?i1.createPortal(b,a):b)},xre(e,[{key:"maxSnack",get:function(){return this.props.maxSnack||s0.maxSnack}}]),e}(W.Component);const MG=4e3,yDe=()=>{const t=Yl();pr(d=>d.devices.items);const e=W.useRef(),[n,r]=W.useState(!0),[i,o]=W.useState([]),[s,a]=W.useState([]),l=()=>{const d=window.location.protocol==="https:"?"wss:":"ws:",f=new WebSocket(`${d}//${window.location.host}/api/socket`);console.log(`${d}//${window.location.host}/api/socket`),e.current=f,console.log("funcion web socket"),f.onopen=()=>{t(mh.updateSocket(!0)),console.log("funcion web socket open")},f.onclose=async p=>{if(console.log("funcion web socket close"),t(mh.updateSocket(!1)),p.code!==MG){try{const g=await fetch("/api/devices");g.ok&&t(eu.update(await g.json()));const v=await fetch("/api/positions");v.ok&&t(mD.updatePositions(await v.json())),g.status===401||v.status}catch{}setTimeout(()=>l(),6e4)}},f.onmessage=p=>{const g=JSON.parse(p.data);g.devices&&(g.devices.length>0?t(eu.update(g.devices)):t(eu.clear())),g.positions&&t(mD.updatePositions(g.positions)),g.camera&&t(mD.updateCamera(g.camera)),g.server&&(g.server.rosState==="connect"?t(mh.updateServerROS(!0)):t(mh.updateServerROS(!1))),g.mission&&(console.log("data mission"),console.log(g.mission),t(_f.updateMission(g.mission))),g.events&&(console.log("add data events -------"),t(a0e.add(g.events)),o(g.events),console.log(g.events)),g.markers&&(console.log("add markers"),t(mh.updateMarker(g.markers))),g.planning&&(console.log("add planning "),t(mh.updatePlanning(g.planning)))}};return f1(async()=>{if(n){r(!1);const d=await fetch("/api/devices",{method:"GET"});if(d.ok)t(eu.refresh(await d.json()));else throw Error(await d.text());return console.log("primera conexion --s"),l(),()=>{const f=e.current;f&&f.close(MG)}}else return null},[]),W.useEffect(()=>{console.log("set notifications"),console.log(i);let d=[];i.map(f=>{let p=!0;s.map(g=>{g.id==f.id&&(p=!1)}),p&&d.push({id:f.id,type:f.type,message:f.attributes.message,show:!0})}),console.log("aux console log"),console.log(d),d.length>0&&a(d),d.forEach(f=>{f.type==="error"&&new Audio($Le).play()})},[i]),W.useEffect(()=>{console.log("notifications"),s.map(d=>{Pre(d.message,{variant:d.type,autoHideDuration:3e3,persist:!1,onClose:()=>o(i.filter(f=>f.id!==d.id))})})},[s]),F.jsx(F.Fragment,{children:F.jsx(gDe,{preventDuplicate:!0,maxSnack:6,autoHideDuration:5e3,anchorOrigin:{vertical:"bottom",horizontal:"right"}})})},vDe=qye()(yDe),_De=si(()=>({page:{flexGrow:1,overflow:"auto"},menu:{zIndex:4}})),xDe=()=>{const t=_De();return wm(),F.jsxs(F.Fragment,{children:[F.jsx(vDe,{}),F.jsx("div",{className:t.page,children:F.jsx(Vge,{})})]})},bDe=()=>{const{search:t}=Sk();return W.useMemo(()=>new URLSearchParams(t),[t])};var Ire={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.1.2/LICENSE.txt
 */(function(t,e){(function(n,r){t.exports=r()})(cx,function(){var n={},r={};function i(s,a,l){if(r[s]=l,s==="index"){var d="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",f={};return r.shared(f),r.index(n,f),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([d],{type:"text/javascript"}))),n}}i("shared",["exports"],function(s){function a(h,c,m,_){return new(m||(m=Promise))(function(I,N){function z(Z){try{Y(_.next(Z))}catch(ne){N(ne)}}function j(Z){try{Y(_.throw(Z))}catch(ne){N(ne)}}function Y(Z){var ne;Z.done?I(Z.value):(ne=Z.value,ne instanceof m?ne:new m(function(ae){ae(ne)})).then(z,j)}Y((_=_.apply(h,c||[])).next())})}function l(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}typeof SuppressedError=="function"&&SuppressedError;var d=f;function f(h,c){this.x=h,this.y=c}f.prototype={clone:function(){return new f(this.x,this.y)},add:function(h){return this.clone()._add(h)},sub:function(h){return this.clone()._sub(h)},multByPoint:function(h){return this.clone()._multByPoint(h)},divByPoint:function(h){return this.clone()._divByPoint(h)},mult:function(h){return this.clone()._mult(h)},div:function(h){return this.clone()._div(h)},rotate:function(h){return this.clone()._rotate(h)},rotateAround:function(h,c){return this.clone()._rotateAround(h,c)},matMult:function(h){return this.clone()._matMult(h)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(h){return this.x===h.x&&this.y===h.y},dist:function(h){return Math.sqrt(this.distSqr(h))},distSqr:function(h){var c=h.x-this.x,m=h.y-this.y;return c*c+m*m},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(h){return Math.atan2(this.y-h.y,this.x-h.x)},angleWith:function(h){return this.angleWithSep(h.x,h.y)},angleWithSep:function(h,c){return Math.atan2(this.x*c-this.y*h,this.x*h+this.y*c)},_matMult:function(h){var c=h[2]*this.x+h[3]*this.y;return this.x=h[0]*this.x+h[1]*this.y,this.y=c,this},_add:function(h){return this.x+=h.x,this.y+=h.y,this},_sub:function(h){return this.x-=h.x,this.y-=h.y,this},_mult:function(h){return this.x*=h,this.y*=h,this},_div:function(h){return this.x/=h,this.y/=h,this},_multByPoint:function(h){return this.x*=h.x,this.y*=h.y,this},_divByPoint:function(h){return this.x/=h.x,this.y/=h.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var h=this.y;return this.y=this.x,this.x=-h,this},_rotate:function(h){var c=Math.cos(h),m=Math.sin(h),_=m*this.x+c*this.y;return this.x=c*this.x-m*this.y,this.y=_,this},_rotateAround:function(h,c){var m=Math.cos(h),_=Math.sin(h),I=c.y+_*(this.x-c.x)+m*(this.y-c.y);return this.x=c.x+m*(this.x-c.x)-_*(this.y-c.y),this.y=I,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},f.convert=function(h){return h instanceof f?h:Array.isArray(h)?new f(h[0],h[1]):h};var p=l(d),g=v;function v(h,c,m,_){this.cx=3*h,this.bx=3*(m-h)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(_-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=h,this.p1y=c,this.p2x=m,this.p2y=_}v.prototype={sampleCurveX:function(h){return((this.ax*h+this.bx)*h+this.cx)*h},sampleCurveY:function(h){return((this.ay*h+this.by)*h+this.cy)*h},sampleCurveDerivativeX:function(h){return(3*this.ax*h+2*this.bx)*h+this.cx},solveCurveX:function(h,c){if(c===void 0&&(c=1e-6),h<0)return 0;if(h>1)return 1;for(var m=h,_=0;_<8;_++){var I=this.sampleCurveX(m)-h;if(Math.abs(I)<c)return m;var N=this.sampleCurveDerivativeX(m);if(Math.abs(N)<1e-6)break;m-=I/N}var z=0,j=1;for(m=h,_=0;_<20&&(I=this.sampleCurveX(m),!(Math.abs(I-h)<c));_++)h>I?z=m:j=m,m=.5*(j-z)+z;return m},solve:function(h,c){return this.sampleCurveY(this.solveCurveX(h,c))}};var x=l(g);let b,S;function M(){return b==null&&(b=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),b}function T(){if(S==null&&(S=!1,M())){const c=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(c){for(let _=0;_<5*5;_++){const I=4*_;c.fillStyle=`rgb(${I},${I+1},${I+2})`,c.fillRect(_%5,Math.floor(_/5),1,1)}const m=c.getImageData(0,0,5,5).data;for(let _=0;_<5*5*4;_++)if(_%4!=3&&m[_]!==_){S=!0;break}}}return S||!1}function C(h,c,m,_){const I=new x(h,c,m,_);return function(N){return I.solve(N)}}const k=C(.25,.1,.25,1);function O(h,c,m){return Math.min(m,Math.max(c,h))}function D(h,c,m){const _=m-c,I=((h-c)%_+_)%_+c;return I===c?m:I}function B(h,...c){for(const m of c)for(const _ in m)h[_]=m[_];return h}let U=1;function J(h,c,m){const _={};for(const I in h)_[I]=c.call(m||this,h[I],I,h);return _}function V(h,c,m){const _={};for(const I in h)c.call(m||this,h[I],I,h)&&(_[I]=h[I]);return _}function X(h){return Array.isArray(h)?h.map(X):typeof h=="object"&&h?J(h,X):h}const oe={};function pe(h){oe[h]||(typeof console<"u"&&console.warn(h),oe[h]=!0)}function re(h,c,m){return(m.y-h.y)*(c.x-h.x)>(c.y-h.y)*(m.x-h.x)}function he(h){let c=0;for(let m,_,I=0,N=h.length,z=N-1;I<N;z=I++)m=h[I],_=h[z],c+=(_.x-m.x)*(m.y+_.y);return c}function ue(h){return typeof WorkerGlobalScope<"u"&&h!==void 0&&h instanceof WorkerGlobalScope}let be=null;function ie(h){return typeof ImageBitmap<"u"&&h instanceof ImageBitmap}const ve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ee(h,c,m,_,I){return a(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const N=new VideoFrame(h,{timestamp:0});try{const z=N==null?void 0:N.format;if(!z||!z.startsWith("BGR")&&!z.startsWith("RGB"))throw new Error(`Unrecognized format ${z}`);const j=z.startsWith("BGR"),Y=new Uint8ClampedArray(_*I*4);if(yield N.copyTo(Y,function(Z,ne,ae,ye,we){const Me=4*Math.max(-ne,0),Re=(Math.max(0,ae)-ae)*ye*4+Me,$e=4*ye,Ke=Math.max(0,ne),_t=Math.max(0,ae);return{rect:{x:Ke,y:_t,width:Math.min(Z.width,ne+ye)-Ke,height:Math.min(Z.height,ae+we)-_t},layout:[{offset:Re,stride:$e}]}}(h,c,m,_,I)),j)for(let Z=0;Z<Y.length;Z+=4){const ne=Y[Z];Y[Z]=Y[Z+2],Y[Z+2]=ne}return Y}finally{N.close()}})}let Ne,Ge;const dt="AbortError";function Ue(){return new Error(dt)}const st={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function lt(h){return st.REGISTERED_PROTOCOLS[h.substring(0,h.indexOf("://"))]}const Rt="global-dispatcher";class Lt extends Error{constructor(c,m,_,I){super(`AJAXError: ${m} (${c}): ${_}`),this.status=c,this.statusText=m,this.url=_,this.body=I}}const Fe=()=>ue(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,at=function(h,c){if(/:\/\//.test(h.url)&&!/^https?:|^file:/.test(h.url)){const _=lt(h.url);if(_)return _(h,c);if(ue(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"getResource",data:h,targetMapId:Rt},c)}if(!(/^file:/.test(m=h.url)||/^file:/.test(Fe())&&!/^\w+:/.test(m))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(_,I){return a(this,void 0,void 0,function*(){const N=new Request(_.url,{method:_.method||"GET",body:_.body,credentials:_.credentials,headers:_.headers,cache:_.cache,referrer:Fe(),signal:I.signal});_.type==="json"&&N.headers.set("Accept","application/json");const z=yield fetch(N);if(!z.ok){const Z=yield z.blob();throw new Lt(z.status,z.statusText,_.url,Z)}let j;j=_.type==="arrayBuffer"||_.type==="image"?z.arrayBuffer():_.type==="json"?z.json():z.text();const Y=yield j;if(I.signal.aborted)throw Ue();return{data:Y,cacheControl:z.headers.get("Cache-Control"),expires:z.headers.get("Expires")}})}(h,c);if(ue(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"getResource",data:h,mustQueue:!0,targetMapId:Rt},c)}var m;return function(_,I){return new Promise((N,z)=>{const j=new XMLHttpRequest;j.open(_.method||"GET",_.url,!0),_.type!=="arrayBuffer"&&_.type!=="image"||(j.responseType="arraybuffer");for(const Y in _.headers)j.setRequestHeader(Y,_.headers[Y]);_.type==="json"&&(j.responseType="text",j.setRequestHeader("Accept","application/json")),j.withCredentials=_.credentials==="include",j.onerror=()=>{z(new Error(j.statusText))},j.onload=()=>{if(!I.signal.aborted)if((j.status>=200&&j.status<300||j.status===0)&&j.response!==null){let Y=j.response;if(_.type==="json")try{Y=JSON.parse(j.response)}catch(Z){return void z(Z)}N({data:Y,cacheControl:j.getResponseHeader("Cache-Control"),expires:j.getResponseHeader("Expires")})}else{const Y=new Blob([j.response],{type:j.getResponseHeader("Content-Type")});z(new Lt(j.status,j.statusText,_.url,Y))}},I.signal.addEventListener("abort",()=>{j.abort(),z(Ue())}),j.send(_.body)})}(h,c)};function nt(h){if(!h||h.indexOf("://")<=0||h.indexOf("data:image/")===0||h.indexOf("blob:")===0)return!0;const c=new URL(h),m=window.location;return c.protocol===m.protocol&&c.host===m.host}function ge(h,c,m){m[h]&&m[h].indexOf(c)!==-1||(m[h]=m[h]||[],m[h].push(c))}function tt(h,c,m){if(m&&m[h]){const _=m[h].indexOf(c);_!==-1&&m[h].splice(_,1)}}class rt{constructor(c,m={}){B(this,m),this.type=c}}class vt extends rt{constructor(c,m={}){super("error",B({error:c},m))}}class Tt{on(c,m){return this._listeners=this._listeners||{},ge(c,m,this._listeners),this}off(c,m){return tt(c,m,this._listeners),tt(c,m,this._oneTimeListeners),this}once(c,m){return m?(this._oneTimeListeners=this._oneTimeListeners||{},ge(c,m,this._oneTimeListeners),this):new Promise(_=>this.once(c,_))}fire(c,m){typeof c=="string"&&(c=new rt(c,m||{}));const _=c.type;if(this.listens(_)){c.target=this;const I=this._listeners&&this._listeners[_]?this._listeners[_].slice():[];for(const j of I)j.call(this,c);const N=this._oneTimeListeners&&this._oneTimeListeners[_]?this._oneTimeListeners[_].slice():[];for(const j of N)tt(_,j,this._oneTimeListeners),j.call(this,c);const z=this._eventedParent;z&&(B(c,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),z.fire(c))}else c instanceof vt&&console.error(c.error);return this}listens(c){return this._listeners&&this._listeners[c]&&this._listeners[c].length>0||this._oneTimeListeners&&this._oneTimeListeners[c]&&this._oneTimeListeners[c].length>0||this._eventedParent&&this._eventedParent.listens(c)}setEventedParent(c,m){return this._eventedParent=c,this._eventedParentData=m,this}}var We={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Vt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function sn(h,c){const m={};for(const _ in h)_!=="ref"&&(m[_]=h[_]);return Vt.forEach(_=>{_ in c&&(m[_]=c[_])}),m}function Ut(h,c){if(Array.isArray(h)){if(!Array.isArray(c)||h.length!==c.length)return!1;for(let m=0;m<h.length;m++)if(!Ut(h[m],c[m]))return!1;return!0}if(typeof h=="object"&&h!==null&&c!==null){if(typeof c!="object"||Object.keys(h).length!==Object.keys(c).length)return!1;for(const m in h)if(!Ut(h[m],c[m]))return!1;return!0}return h===c}function Pe(h,c){h.push(c)}function _e(h,c,m){Pe(m,{command:"addSource",args:[h,c[h]]})}function Mt(h,c,m){Pe(c,{command:"removeSource",args:[h]}),m[h]=!0}function wt(h,c,m,_){Mt(h,m,_),_e(h,c,m)}function Wt(h,c,m){let _;for(_ in h[m])if(Object.prototype.hasOwnProperty.call(h[m],_)&&_!=="data"&&!Ut(h[m][_],c[m][_]))return!1;for(_ in c[m])if(Object.prototype.hasOwnProperty.call(c[m],_)&&_!=="data"&&!Ut(h[m][_],c[m][_]))return!1;return!0}function Bt(h,c,m,_,I,N){h=h||{},c=c||{};for(const z in h)Object.prototype.hasOwnProperty.call(h,z)&&(Ut(h[z],c[z])||m.push({command:N,args:[_,z,c[z],I]}));for(const z in c)Object.prototype.hasOwnProperty.call(c,z)&&!Object.prototype.hasOwnProperty.call(h,z)&&(Ut(h[z],c[z])||m.push({command:N,args:[_,z,c[z],I]}))}function Mn(h){return h.id}function an(h,c){return h[c.id]=c,h}class Je{constructor(c,m,_,I){this.message=(c?`${c}: `:"")+_,I&&(this.identifier=I),m!=null&&m.__line__&&(this.line=m.__line__)}}function Yt(h,...c){for(const m of c)for(const _ in m)h[_]=m[_];return h}class xn extends Error{constructor(c,m){super(m),this.message=m,this.key=c}}class en{constructor(c,m=[]){this.parent=c,this.bindings={};for(const[_,I]of m)this.bindings[_]=I}concat(c){return new en(this,c)}get(c){if(this.bindings[c])return this.bindings[c];if(this.parent)return this.parent.get(c);throw new Error(`${c} not found in scope.`)}has(c){return!!this.bindings[c]||!!this.parent&&this.parent.has(c)}}const un={kind:"null"},St={kind:"number"},gt={kind:"string"},Ae={kind:"boolean"},ft={kind:"color"},Ie={kind:"object"},it={kind:"value"},tn={kind:"collator"},Xe={kind:"formatted"},xe={kind:"padding"},ee={kind:"resolvedImage"},se={kind:"variableAnchorOffsetCollection"};function me(h,c){return{kind:"array",itemType:h,N:c}}function Ce(h){if(h.kind==="array"){const c=Ce(h.itemType);return typeof h.N=="number"?`array<${c}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${c}>`}return h.kind}const qe=[un,St,gt,Ae,ft,Xe,Ie,me(it),xe,ee,se];function Ye(h,c){if(c.kind==="error")return null;if(h.kind==="array"){if(c.kind==="array"&&(c.N===0&&c.itemType.kind==="value"||!Ye(h.itemType,c.itemType))&&(typeof h.N!="number"||h.N===c.N))return null}else{if(h.kind===c.kind)return null;if(h.kind==="value"){for(const m of qe)if(!Ye(m,c))return null}}return`Expected ${Ce(h)} but found ${Ce(c)} instead.`}function et(h,c){return c.some(m=>m.kind===h.kind)}function je(h,c){return c.some(m=>m==="null"?h===null:m==="array"?Array.isArray(h):m==="object"?h&&!Array.isArray(h)&&typeof h=="object":m===typeof h)}function ot(h,c){return h.kind==="array"&&c.kind==="array"?h.itemType.kind===c.itemType.kind&&typeof h.N=="number":h.kind===c.kind}const Dt=.96422,It=.82521,Nt=4/29,En=6/29,Nn=3*En*En,zn=En*En*En,yr=Math.PI/180,tr=180/Math.PI;function Qr(h){return(h%=360)<0&&(h+=360),h}function Ur([h,c,m,_]){let I,N;const z=Te((.2225045*(h=Oi(h))+.7168786*(c=Oi(c))+.0606169*(m=Oi(m)))/1);h===c&&c===m?I=N=z:(I=Te((.4360747*h+.3850649*c+.1430804*m)/Dt),N=Te((.0139322*h+.0971045*c+.7141733*m)/It));const j=116*z-16;return[j<0?0:j,500*(I-z),200*(z-N),_]}function Oi(h){return h<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function Te(h){return h>zn?Math.pow(h,1/3):h/Nn+Nt}function pt([h,c,m,_]){let I=(h+16)/116,N=isNaN(c)?I:I+c/500,z=isNaN(m)?I:I-m/200;return I=1*mt(I),N=Dt*mt(N),z=It*mt(z),[At(3.1338561*N-1.6168667*I-.4906146*z),At(-.9787684*N+1.9161415*I+.033454*z),At(.0719453*N-.2289914*I+1.4052427*z),_]}function At(h){return(h=h<=.00304?12.92*h:1.055*Math.pow(h,1/2.4)-.055)<0?0:h>1?1:h}function mt(h){return h>En?h*h*h:Nn*(h-Nt)}function xt(h){return parseInt(h.padEnd(2,h),16)/255}function gn(h,c){return In(c?h/100:h,0,1)}function In(h,c,m){return Math.min(Math.max(c,h),m)}function ir(h){return!h.some(Number.isNaN)}const lr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Tn{constructor(c,m,_,I=1,N=!0){this.r=c,this.g=m,this.b=_,this.a=I,N||(this.r*=I,this.g*=I,this.b*=I,I||this.overwriteGetter("rgb",[c,m,_,I]))}static parse(c){if(c instanceof Tn)return c;if(typeof c!="string")return;const m=function(_){if((_=_.toLowerCase().trim())==="transparent")return[0,0,0,0];const I=lr[_];if(I){const[z,j,Y]=I;return[z/255,j/255,Y/255,1]}if(_.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(_)){const z=_.length<6?1:2;let j=1;return[xt(_.slice(j,j+=z)),xt(_.slice(j,j+=z)),xt(_.slice(j,j+=z)),xt(_.slice(j,j+z)||"ff")]}if(_.startsWith("rgb")){const z=_.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(z){const[j,Y,Z,ne,ae,ye,we,Me,Re,$e,Ke,_t]=z,Qe=[ne||" ",we||" ",$e].join("");if(Qe==="  "||Qe==="  /"||Qe===",,"||Qe===",,,"){const ut=[Z,ye,Re].join(""),Ft=ut==="%%%"?100:ut===""?255:0;if(Ft){const Ht=[In(+Y/Ft,0,1),In(+ae/Ft,0,1),In(+Me/Ft,0,1),Ke?gn(+Ke,_t):1];if(ir(Ht))return Ht}}return}}const N=_.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(N){const[z,j,Y,Z,ne,ae,ye,we,Me]=N,Re=[Y||" ",ne||" ",ye].join("");if(Re==="  "||Re==="  /"||Re===",,"||Re===",,,"){const $e=[+j,In(+Z,0,100),In(+ae,0,100),we?gn(+we,Me):1];if(ir($e))return function([Ke,_t,Qe,ut]){function Ft(Ht){const _n=(Ht+Ke/30)%12,Ln=_t*Math.min(Qe,1-Qe);return Qe-Ln*Math.max(-1,Math.min(_n-3,9-_n,1))}return Ke=Qr(Ke),_t/=100,Qe/=100,[Ft(0),Ft(8),Ft(4),ut]}($e)}}}(c);return m?new Tn(...m,!1):void 0}get rgb(){const{r:c,g:m,b:_,a:I}=this,N=I||1/0;return this.overwriteGetter("rgb",[c/N,m/N,_/N,I])}get hcl(){return this.overwriteGetter("hcl",function(c){const[m,_,I,N]=Ur(c),z=Math.sqrt(_*_+I*I);return[Math.round(1e4*z)?Qr(Math.atan2(I,_)*tr):NaN,z,m,N]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ur(this.rgb))}overwriteGetter(c,m){return Object.defineProperty(this,c,{value:m}),m}toString(){const[c,m,_,I]=this.rgb;return`rgba(${[c,m,_].map(N=>Math.round(255*N)).join(",")},${I})`}}Tn.black=new Tn(0,0,0,1),Tn.white=new Tn(1,1,1,1),Tn.transparent=new Tn(0,0,0,0),Tn.red=new Tn(1,0,0,1);class cr{constructor(c,m,_){this.sensitivity=c?m?"variant":"case":m?"accent":"base",this.locale=_,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(c,m){return this.collator.compare(c,m)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class hr{constructor(c,m,_,I,N){this.text=c,this.image=m,this.scale=_,this.fontStack=I,this.textColor=N}}class $r{constructor(c){this.sections=c}static fromString(c){return new $r([new hr(c,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(c=>c.text.length!==0||c.image&&c.image.name.length!==0)}static factory(c){return c instanceof $r?c:$r.fromString(c)}toString(){return this.sections.length===0?"":this.sections.map(c=>c.text).join("")}}class li{constructor(c){this.values=c.slice()}static parse(c){if(c instanceof li)return c;if(typeof c=="number")return new li([c,c,c,c]);if(Array.isArray(c)&&!(c.length<1||c.length>4)){for(const m of c)if(typeof m!="number")return;switch(c.length){case 1:c=[c[0],c[0],c[0],c[0]];break;case 2:c=[c[0],c[1],c[0],c[1]];break;case 3:c=[c[0],c[1],c[2],c[1]]}return new li(c)}}toString(){return JSON.stringify(this.values)}}const Pi=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Vr{constructor(c){this.values=c.slice()}static parse(c){if(c instanceof Vr)return c;if(Array.isArray(c)&&!(c.length<1)&&c.length%2==0){for(let m=0;m<c.length;m+=2){const _=c[m],I=c[m+1];if(typeof _!="string"||!Pi.has(_)||!Array.isArray(I)||I.length!==2||typeof I[0]!="number"||typeof I[1]!="number")return}return new Vr(c)}}toString(){return JSON.stringify(this.values)}}class qn{constructor(c){this.name=c.name,this.available=c.available}toString(){return this.name}static fromString(c){return c?new qn({name:c,available:!1}):null}}function Rn(h,c,m,_){return typeof h=="number"&&h>=0&&h<=255&&typeof c=="number"&&c>=0&&c<=255&&typeof m=="number"&&m>=0&&m<=255?_===void 0||typeof _=="number"&&_>=0&&_<=1?null:`Invalid rgba value [${[h,c,m,_].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof _=="number"?[h,c,m,_]:[h,c,m]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Io(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof Tn||h instanceof cr||h instanceof $r||h instanceof li||h instanceof Vr||h instanceof qn)return!0;if(Array.isArray(h)){for(const c of h)if(!Io(c))return!1;return!0}if(typeof h=="object"){for(const c in h)if(!Io(h[c]))return!1;return!0}return!1}function Yn(h){if(h===null)return un;if(typeof h=="string")return gt;if(typeof h=="boolean")return Ae;if(typeof h=="number")return St;if(h instanceof Tn)return ft;if(h instanceof cr)return tn;if(h instanceof $r)return Xe;if(h instanceof li)return xe;if(h instanceof Vr)return se;if(h instanceof qn)return ee;if(Array.isArray(h)){const c=h.length;let m;for(const _ of h){const I=Yn(_);if(m){if(m===I)continue;m=it;break}m=I}return me(m||it,c)}return Ie}function Ii(h){const c=typeof h;return h===null?"":c==="string"||c==="number"||c==="boolean"?String(h):h instanceof Tn||h instanceof $r||h instanceof li||h instanceof Vr||h instanceof qn?h.toString():JSON.stringify(h)}class gs{constructor(c,m){this.type=c,this.value=m}static parse(c,m){if(c.length!==2)return m.error(`'literal' expression requires exactly one argument, but found ${c.length-1} instead.`);if(!Io(c[1]))return m.error("invalid value");const _=c[1];let I=Yn(_);const N=m.expectedType;return I.kind!=="array"||I.N!==0||!N||N.kind!=="array"||typeof N.N=="number"&&N.N!==0||(I=N),new gs(I,_)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Wr{constructor(c){this.name="ExpressionEvaluationError",this.message=c}toJSON(){return this.message}}const Ui={string:gt,number:St,boolean:Ae,object:Ie};class ei{constructor(c,m){this.type=c,this.args=m}static parse(c,m){if(c.length<2)return m.error("Expected at least one argument.");let _,I=1;const N=c[0];if(N==="array"){let j,Y;if(c.length>2){const Z=c[1];if(typeof Z!="string"||!(Z in Ui)||Z==="object")return m.error('The item type argument of "array" must be one of string, number, boolean',1);j=Ui[Z],I++}else j=it;if(c.length>3){if(c[2]!==null&&(typeof c[2]!="number"||c[2]<0||c[2]!==Math.floor(c[2])))return m.error('The length argument to "array" must be a positive integer literal',2);Y=c[2],I++}_=me(j,Y)}else{if(!Ui[N])throw new Error(`Types doesn't contain name = ${N}`);_=Ui[N]}const z=[];for(;I<c.length;I++){const j=m.parse(c[I],I,it);if(!j)return null;z.push(j)}return new ei(_,z)}evaluate(c){for(let m=0;m<this.args.length;m++){const _=this.args[m].evaluate(c);if(!Ye(this.type,Yn(_)))return _;if(m===this.args.length-1)throw new Wr(`Expected value to be of type ${Ce(this.type)}, but found ${Ce(Yn(_))} instead.`)}throw new Error}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const pa={"to-boolean":Ae,"to-color":ft,"to-number":St,"to-string":gt};class Is{constructor(c,m){this.type=c,this.args=m}static parse(c,m){if(c.length<2)return m.error("Expected at least one argument.");const _=c[0];if(!pa[_])throw new Error(`Can't parse ${_} as it is not part of the known types`);if((_==="to-boolean"||_==="to-string")&&c.length!==2)return m.error("Expected one argument.");const I=pa[_],N=[];for(let z=1;z<c.length;z++){const j=m.parse(c[z],z,it);if(!j)return null;N.push(j)}return new Is(I,N)}evaluate(c){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(c);case"color":{let m,_;for(const I of this.args){if(m=I.evaluate(c),_=null,m instanceof Tn)return m;if(typeof m=="string"){const N=c.parseColor(m);if(N)return N}else if(Array.isArray(m)&&(_=m.length<3||m.length>4?`Invalid rbga value ${JSON.stringify(m)}: expected an array containing either three or four numeric values.`:Rn(m[0],m[1],m[2],m[3]),!_))return new Tn(m[0]/255,m[1]/255,m[2]/255,m[3])}throw new Wr(_||`Could not parse color from value '${typeof m=="string"?m:JSON.stringify(m)}'`)}case"padding":{let m;for(const _ of this.args){m=_.evaluate(c);const I=li.parse(m);if(I)return I}throw new Wr(`Could not parse padding from value '${typeof m=="string"?m:JSON.stringify(m)}'`)}case"variableAnchorOffsetCollection":{let m;for(const _ of this.args){m=_.evaluate(c);const I=Vr.parse(m);if(I)return I}throw new Wr(`Could not parse variableAnchorOffsetCollection from value '${typeof m=="string"?m:JSON.stringify(m)}'`)}case"number":{let m=null;for(const _ of this.args){if(m=_.evaluate(c),m===null)return 0;const I=Number(m);if(!isNaN(I))return I}throw new Wr(`Could not convert ${JSON.stringify(m)} to number.`)}case"formatted":return $r.fromString(Ii(this.args[0].evaluate(c)));case"resolvedImage":return qn.fromString(Ii(this.args[0].evaluate(c)));default:return Ii(this.args[0].evaluate(c))}}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const ko=["Unknown","Point","LineString","Polygon"];class bl{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ko[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(c){let m=this._parseColorCache[c];return m||(m=this._parseColorCache[c]=Tn.parse(c)),m}}class vr{constructor(c,m,_=[],I,N=new en,z=[]){this.registry=c,this.path=_,this.key=_.map(j=>`[${j}]`).join(""),this.scope=N,this.errors=z,this.expectedType=I,this._isConstant=m}parse(c,m,_,I,N={}){return m?this.concat(m,_,I)._parse(c,N):this._parse(c,N)}_parse(c,m){function _(I,N,z){return z==="assert"?new ei(N,[I]):z==="coerce"?new Is(N,[I]):I}if(c!==null&&typeof c!="string"&&typeof c!="boolean"&&typeof c!="number"||(c=["literal",c]),Array.isArray(c)){if(c.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const I=c[0];if(typeof I!="string")return this.error(`Expression name must be a string, but found ${typeof I} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const N=this.registry[I];if(N){let z=N.parse(c,this);if(!z)return null;if(this.expectedType){const j=this.expectedType,Y=z.type;if(j.kind!=="string"&&j.kind!=="number"&&j.kind!=="boolean"&&j.kind!=="object"&&j.kind!=="array"||Y.kind!=="value")if(j.kind!=="color"&&j.kind!=="formatted"&&j.kind!=="resolvedImage"||Y.kind!=="value"&&Y.kind!=="string")if(j.kind!=="padding"||Y.kind!=="value"&&Y.kind!=="number"&&Y.kind!=="array")if(j.kind!=="variableAnchorOffsetCollection"||Y.kind!=="value"&&Y.kind!=="array"){if(this.checkSubtype(j,Y))return null}else z=_(z,j,m.typeAnnotation||"coerce");else z=_(z,j,m.typeAnnotation||"coerce");else z=_(z,j,m.typeAnnotation||"coerce");else z=_(z,j,m.typeAnnotation||"assert")}if(!(z instanceof gs)&&z.type.kind!=="resolvedImage"&&this._isConstant(z)){const j=new bl;try{z=new gs(z.type,z.evaluate(j))}catch(Y){return this.error(Y.message),null}}return z}return this.error(`Unknown expression "${I}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(c===void 0?"'undefined' value invalid. Use null instead.":typeof c=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof c} instead.`)}concat(c,m,_){const I=typeof c=="number"?this.path.concat(c):this.path,N=_?this.scope.concat(_):this.scope;return new vr(this.registry,this._isConstant,I,m||null,N,this.errors)}error(c,...m){const _=`${this.key}${m.map(I=>`[${I}]`).join("")}`;this.errors.push(new xn(_,c))}checkSubtype(c,m){const _=Ye(c,m);return _&&this.error(_),_}}class Pd{constructor(c,m,_){this.type=tn,this.locale=_,this.caseSensitive=c,this.diacriticSensitive=m}static parse(c,m){if(c.length!==2)return m.error("Expected one argument.");const _=c[1];if(typeof _!="object"||Array.isArray(_))return m.error("Collator options argument must be an object.");const I=m.parse(_["case-sensitive"]!==void 0&&_["case-sensitive"],1,Ae);if(!I)return null;const N=m.parse(_["diacritic-sensitive"]!==void 0&&_["diacritic-sensitive"],1,Ae);if(!N)return null;let z=null;return _.locale&&(z=m.parse(_.locale,1,gt),!z)?null:new Pd(I,N,z)}evaluate(c){return new cr(this.caseSensitive.evaluate(c),this.diacriticSensitive.evaluate(c),this.locale?this.locale.evaluate(c):null)}eachChild(c){c(this.caseSensitive),c(this.diacriticSensitive),this.locale&&c(this.locale)}outputDefined(){return!1}}const Zl=8192;function zy(h,c){h[0]=Math.min(h[0],c[0]),h[1]=Math.min(h[1],c[1]),h[2]=Math.max(h[2],c[0]),h[3]=Math.max(h[3],c[1])}function Eu(h,c){return!(h[0]<=c[0]||h[2]>=c[2]||h[1]<=c[1]||h[3]>=c[3])}function Yf(h,c){const m=(180+h[0])/360,_=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,I=Math.pow(2,c.z);return[Math.round(m*I*Zl),Math.round(_*I*Zl)]}function Xf(h,c,m){const _=h[0]-c[0],I=h[1]-c[1],N=h[0]-m[0],z=h[1]-m[1];return _*z-N*I==0&&_*N<=0&&I*z<=0}function Id(h,c){let m=!1;for(let z=0,j=c.length;z<j;z++){const Y=c[z];for(let Z=0,ne=Y.length;Z<ne-1;Z++){if(Xf(h,Y[Z],Y[Z+1]))return!1;(I=Y[Z])[1]>(_=h)[1]!=(N=Y[Z+1])[1]>_[1]&&_[0]<(N[0]-I[0])*(_[1]-I[1])/(N[1]-I[1])+I[0]&&(m=!m)}}var _,I,N;return m}function Y0(h,c){for(let m=0;m<c.length;m++)if(Id(h,c[m]))return!0;return!1}function X0(h,c,m,_){const I=_[0]-m[0],N=_[1]-m[1],z=(h[0]-m[0])*N-I*(h[1]-m[1]),j=(c[0]-m[0])*N-I*(c[1]-m[1]);return z>0&&j<0||z<0&&j>0}function Fy(h,c,m){for(const Z of m)for(let ne=0;ne<Z.length-1;++ne)if((j=[(z=Z[ne+1])[0]-(N=Z[ne])[0],z[1]-N[1]])[0]*(Y=[(I=c)[0]-(_=h)[0],I[1]-_[1]])[1]-j[1]*Y[0]!=0&&X0(_,I,N,z)&&X0(N,z,_,I))return!0;var _,I,N,z,j,Y;return!1}function km(h,c){for(let m=0;m<h.length;++m)if(!Id(h[m],c))return!1;for(let m=0;m<h.length-1;++m)if(Fy(h[m],h[m+1],c))return!1;return!0}function Kf(h,c){for(let m=0;m<c.length;m++)if(km(h,c[m]))return!0;return!1}function Rm(h,c,m){const _=[];for(let I=0;I<h.length;I++){const N=[];for(let z=0;z<h[I].length;z++){const j=Yf(h[I][z],m);zy(c,j),N.push(j)}_.push(N)}return _}function Zf(h,c,m){const _=[];for(let I=0;I<h.length;I++){const N=Rm(h[I],c,m);_.push(N)}return _}function Hr(h,c,m,_){if(h[0]<m[0]||h[0]>m[2]){const I=.5*_;let N=h[0]-m[0]>I?-_:m[0]-h[0]>I?_:0;N===0&&(N=h[0]-m[2]>I?-_:m[2]-h[0]>I?_:0),h[0]+=N}zy(c,h)}function By(h,c,m,_){const I=Math.pow(2,_.z)*Zl,N=[_.x*Zl,_.y*Zl],z=[];for(const j of h)for(const Y of j){const Z=[Y.x+N[0],Y.y+N[1]];Hr(Z,c,m,I),z.push(Z)}return z}function Fh(h,c,m,_){const I=Math.pow(2,_.z)*Zl,N=[_.x*Zl,_.y*Zl],z=[];for(const Y of h){const Z=[];for(const ne of Y){const ae=[ne.x+N[0],ne.y+N[1]];zy(c,ae),Z.push(ae)}z.push(Z)}if(c[2]-c[0]<=I/2){(j=c)[0]=j[1]=1/0,j[2]=j[3]=-1/0;for(const Y of z)for(const Z of Y)Hr(Z,c,m,I)}var j;return z}class Tu{constructor(c,m){this.type=Ae,this.geojson=c,this.geometries=m}static parse(c,m){if(c.length!==2)return m.error(`'within' expression requires exactly one argument, but found ${c.length-1} instead.`);if(Io(c[1])){const _=c[1];if(_.type==="FeatureCollection"){const I=[];for(const N of _.features){const{type:z,coordinates:j}=N.geometry;z==="Polygon"&&I.push(j),z==="MultiPolygon"&&I.push(...j)}if(I.length)return new Tu(_,{type:"MultiPolygon",coordinates:I})}else if(_.type==="Feature"){const I=_.geometry.type;if(I==="Polygon"||I==="MultiPolygon")return new Tu(_,_.geometry)}else if(_.type==="Polygon"||_.type==="MultiPolygon")return new Tu(_,_)}return m.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(c){if(c.geometry()!=null&&c.canonicalID()!=null){if(c.geometryType()==="Point")return function(m,_){const I=[1/0,1/0,-1/0,-1/0],N=[1/0,1/0,-1/0,-1/0],z=m.canonicalID();if(_.type==="Polygon"){const j=Rm(_.coordinates,N,z),Y=By(m.geometry(),I,N,z);if(!Eu(I,N))return!1;for(const Z of Y)if(!Id(Z,j))return!1}if(_.type==="MultiPolygon"){const j=Zf(_.coordinates,N,z),Y=By(m.geometry(),I,N,z);if(!Eu(I,N))return!1;for(const Z of Y)if(!Y0(Z,j))return!1}return!0}(c,this.geometries);if(c.geometryType()==="LineString")return function(m,_){const I=[1/0,1/0,-1/0,-1/0],N=[1/0,1/0,-1/0,-1/0],z=m.canonicalID();if(_.type==="Polygon"){const j=Rm(_.coordinates,N,z),Y=Fh(m.geometry(),I,N,z);if(!Eu(I,N))return!1;for(const Z of Y)if(!km(Z,j))return!1}if(_.type==="MultiPolygon"){const j=Zf(_.coordinates,N,z),Y=Fh(m.geometry(),I,N,z);if(!Eu(I,N))return!1;for(const Z of Y)if(!Kf(Z,j))return!1}return!0}(c,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Om{constructor(c,m){this.type=m.type,this.name=c,this.boundExpression=m}static parse(c,m){if(c.length!==2||typeof c[1]!="string")return m.error("'var' expression requires exactly one string literal argument.");const _=c[1];return m.scope.has(_)?new Om(_,m.scope.get(_)):m.error(`Unknown variable "${_}". Make sure "${_}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(c){return this.boundExpression.evaluate(c)}eachChild(){}outputDefined(){return!1}}class ja{constructor(c,m,_,I){this.name=c,this.type=m,this._evaluate=_,this.args=I}evaluate(c){return this._evaluate(c,this.args)}eachChild(c){this.args.forEach(c)}outputDefined(){return!1}static parse(c,m){const _=c[0],I=ja.definitions[_];if(!I)return m.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0);const N=Array.isArray(I)?I[0]:I.type,z=Array.isArray(I)?[[I[1],I[2]]]:I.overloads,j=z.filter(([Z])=>!Array.isArray(Z)||Z.length===c.length-1);let Y=null;for(const[Z,ne]of j){Y=new vr(m.registry,ro,m.path,null,m.scope);const ae=[];let ye=!1;for(let we=1;we<c.length;we++){const Me=c[we],Re=Array.isArray(Z)?Z[we-1]:Z.type,$e=Y.parse(Me,1+ae.length,Re);if(!$e){ye=!0;break}ae.push($e)}if(!ye)if(Array.isArray(Z)&&Z.length!==ae.length)Y.error(`Expected ${Z.length} arguments, but found ${ae.length} instead.`);else{for(let we=0;we<ae.length;we++){const Me=Array.isArray(Z)?Z[we]:Z.type,Re=ae[we];Y.concat(we+1).checkSubtype(Me,Re.type)}if(Y.errors.length===0)return new ja(_,N,ne,ae)}}if(j.length===1)m.errors.push(...Y.errors);else{const Z=(j.length?j:z).map(([ae])=>{return ye=ae,Array.isArray(ye)?`(${ye.map(Ce).join(", ")})`:`(${Ce(ye.type)}...)`;var ye}).join(" | "),ne=[];for(let ae=1;ae<c.length;ae++){const ye=m.parse(c[ae],1+ne.length);if(!ye)return null;ne.push(Ce(ye.type))}m.error(`Expected arguments of type ${Z}, but found (${ne.join(", ")}) instead.`)}return null}static register(c,m){ja.definitions=m;for(const _ in m)c[_]=ja}}function ro(h){if(h instanceof Om)return ro(h.boundExpression);if(h instanceof ja&&h.name==="error"||h instanceof Pd||h instanceof Tu)return!1;const c=h instanceof Is||h instanceof ei;let m=!0;return h.eachChild(_=>{m=c?m&&ro(_):m&&_ instanceof gs}),!!m&&kd(h)&&Bh(h,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function kd(h){if(h instanceof ja&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof Tu)return!1;let c=!0;return h.eachChild(m=>{c&&!kd(m)&&(c=!1)}),c}function Jf(h){if(h instanceof ja&&h.name==="feature-state")return!1;let c=!0;return h.eachChild(m=>{c&&!Jf(m)&&(c=!1)}),c}function Bh(h,c){if(h instanceof ja&&c.indexOf(h.name)>=0)return!1;let m=!0;return h.eachChild(_=>{m&&!Bh(_,c)&&(m=!1)}),m}function Qf(h,c){const m=h.length-1;let _,I,N=0,z=m,j=0;for(;N<=z;)if(j=Math.floor((N+z)/2),_=h[j],I=h[j+1],_<=c){if(j===m||c<I)return j;N=j+1}else{if(!(_>c))throw new Wr("Input is not a number.");z=j-1}return 0}class Ic{constructor(c,m,_){this.type=c,this.input=m,this.labels=[],this.outputs=[];for(const[I,N]of _)this.labels.push(I),this.outputs.push(N)}static parse(c,m){if(c.length-1<4)return m.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return m.error("Expected an even number of arguments.");const _=m.parse(c[1],1,St);if(!_)return null;const I=[];let N=null;m.expectedType&&m.expectedType.kind!=="value"&&(N=m.expectedType);for(let z=1;z<c.length;z+=2){const j=z===1?-1/0:c[z],Y=c[z+1],Z=z,ne=z+1;if(typeof j!="number")return m.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(I.length&&I[I.length-1][0]>=j)return m.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Z);const ae=m.parse(Y,ne,N);if(!ae)return null;N=N||ae.type,I.push([j,ae])}return new Ic(N,_,I)}evaluate(c){const m=this.labels,_=this.outputs;if(m.length===1)return _[0].evaluate(c);const I=this.input.evaluate(c);if(I<=m[0])return _[0].evaluate(c);const N=m.length;return I>=m[N-1]?_[N-1].evaluate(c):_[Qf(m,I)].evaluate(c)}eachChild(c){c(this.input);for(const m of this.outputs)c(m)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function Jl(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var H1=K0;function K0(h,c,m,_){this.cx=3*h,this.bx=3*(m-h)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(_-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=h,this.p1y=c,this.p2x=m,this.p2y=_}K0.prototype={sampleCurveX:function(h){return((this.ax*h+this.bx)*h+this.cx)*h},sampleCurveY:function(h){return((this.ay*h+this.by)*h+this.cy)*h},sampleCurveDerivativeX:function(h){return(3*this.ax*h+2*this.bx)*h+this.cx},solveCurveX:function(h,c){if(c===void 0&&(c=1e-6),h<0)return 0;if(h>1)return 1;for(var m=h,_=0;_<8;_++){var I=this.sampleCurveX(m)-h;if(Math.abs(I)<c)return m;var N=this.sampleCurveDerivativeX(m);if(Math.abs(N)<1e-6)break;m-=I/N}var z=0,j=1;for(m=h,_=0;_<20&&(I=this.sampleCurveX(m),!(Math.abs(I-h)<c));_++)h>I?z=m:j=m,m=.5*(j-z)+z;return m},solve:function(h,c){return this.sampleCurveY(this.solveCurveX(h,c))}};var Ql=Jl(H1);function ks(h,c,m){return h+m*(c-h)}function Rd(h,c,m){return h.map((_,I)=>ks(_,c[I],m))}const Rs={number:ks,color:function(h,c,m,_="rgb"){switch(_){case"rgb":{const[I,N,z,j]=Rd(h.rgb,c.rgb,m);return new Tn(I,N,z,j,!1)}case"hcl":{const[I,N,z,j]=h.hcl,[Y,Z,ne,ae]=c.hcl;let ye,we;if(isNaN(I)||isNaN(Y))isNaN(I)?isNaN(Y)?ye=NaN:(ye=Y,z!==1&&z!==0||(we=Z)):(ye=I,ne!==1&&ne!==0||(we=N));else{let _t=Y-I;Y>I&&_t>180?_t-=360:Y<I&&I-Y>180&&(_t+=360),ye=I+m*_t}const[Me,Re,$e,Ke]=function([_t,Qe,ut,Ft]){return _t=isNaN(_t)?0:_t*yr,pt([ut,Math.cos(_t)*Qe,Math.sin(_t)*Qe,Ft])}([ye,we??ks(N,Z,m),ks(z,ne,m),ks(j,ae,m)]);return new Tn(Me,Re,$e,Ke,!1)}case"lab":{const[I,N,z,j]=pt(Rd(h.lab,c.lab,m));return new Tn(I,N,z,j,!1)}}},array:Rd,padding:function(h,c,m){return new li(Rd(h.values,c.values,m))},variableAnchorOffsetCollection:function(h,c,m){const _=h.values,I=c.values;if(_.length!==I.length)throw new Wr(`Cannot interpolate values of different length. from: ${h.toString()}, to: ${c.toString()}`);const N=[];for(let z=0;z<_.length;z+=2){if(_[z]!==I[z])throw new Wr(`Cannot interpolate values containing mismatched anchors. from[${z}]: ${_[z]}, to[${z}]: ${I[z]}`);N.push(_[z]);const[j,Y]=_[z+1],[Z,ne]=I[z+1];N.push([ks(j,Z,m),ks(Y,ne,m)])}return new Vr(N)}};class ys{constructor(c,m,_,I,N){this.type=c,this.operator=m,this.interpolation=_,this.input=I,this.labels=[],this.outputs=[];for(const[z,j]of N)this.labels.push(z),this.outputs.push(j)}static interpolationFactor(c,m,_,I){let N=0;if(c.name==="exponential")N=$h(m,c.base,_,I);else if(c.name==="linear")N=$h(m,1,_,I);else if(c.name==="cubic-bezier"){const z=c.controlPoints;N=new Ql(z[0],z[1],z[2],z[3]).solve($h(m,1,_,I))}return N}static parse(c,m){let[_,I,N,...z]=c;if(!Array.isArray(I)||I.length===0)return m.error("Expected an interpolation type expression.",1);if(I[0]==="linear")I={name:"linear"};else if(I[0]==="exponential"){const Z=I[1];if(typeof Z!="number")return m.error("Exponential interpolation requires a numeric base.",1,1);I={name:"exponential",base:Z}}else{if(I[0]!=="cubic-bezier")return m.error(`Unknown interpolation type ${String(I[0])}`,1,0);{const Z=I.slice(1);if(Z.length!==4||Z.some(ne=>typeof ne!="number"||ne<0||ne>1))return m.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);I={name:"cubic-bezier",controlPoints:Z}}}if(c.length-1<4)return m.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return m.error("Expected an even number of arguments.");if(N=m.parse(N,2,St),!N)return null;const j=[];let Y=null;_==="interpolate-hcl"||_==="interpolate-lab"?Y=ft:m.expectedType&&m.expectedType.kind!=="value"&&(Y=m.expectedType);for(let Z=0;Z<z.length;Z+=2){const ne=z[Z],ae=z[Z+1],ye=Z+3,we=Z+4;if(typeof ne!="number")return m.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ye);if(j.length&&j[j.length-1][0]>=ne)return m.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ye);const Me=m.parse(ae,we,Y);if(!Me)return null;Y=Y||Me.type,j.push([ne,Me])}return ot(Y,St)||ot(Y,ft)||ot(Y,xe)||ot(Y,se)||ot(Y,me(St))?new ys(Y,_,I,N,j):m.error(`Type ${Ce(Y)} is not interpolatable.`)}evaluate(c){const m=this.labels,_=this.outputs;if(m.length===1)return _[0].evaluate(c);const I=this.input.evaluate(c);if(I<=m[0])return _[0].evaluate(c);const N=m.length;if(I>=m[N-1])return _[N-1].evaluate(c);const z=Qf(m,I),j=ys.interpolationFactor(this.interpolation,I,m[z],m[z+1]),Y=_[z].evaluate(c),Z=_[z+1].evaluate(c);switch(this.operator){case"interpolate":return Rs[this.type.kind](Y,Z,j);case"interpolate-hcl":return Rs.color(Y,Z,j,"hcl");case"interpolate-lab":return Rs.color(Y,Z,j,"lab")}}eachChild(c){c(this.input);for(const m of this.outputs)c(m)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function $h(h,c,m,_){const I=_-m,N=h-m;return I===0?0:c===1?N/I:(Math.pow(c,N)-1)/(Math.pow(c,I)-1)}class _r{constructor(c,m){this.type=c,this.args=m}static parse(c,m){if(c.length<2)return m.error("Expectected at least one argument.");let _=null;const I=m.expectedType;I&&I.kind!=="value"&&(_=I);const N=[];for(const j of c.slice(1)){const Y=m.parse(j,1+N.length,_,void 0,{typeAnnotation:"omit"});if(!Y)return null;_=_||Y.type,N.push(Y)}if(!_)throw new Error("No output type");const z=I&&N.some(j=>Ye(I,j.type));return new _r(z?it:_,N)}evaluate(c){let m,_=null,I=0;for(const N of this.args)if(I++,_=N.evaluate(c),_&&_ instanceof qn&&!_.available&&(m||(m=_.name),_=null,I===this.args.length&&(_=m)),_!==null)break;return _}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}class Lm{constructor(c,m){this.type=m.type,this.bindings=[].concat(c),this.result=m}evaluate(c){return this.result.evaluate(c)}eachChild(c){for(const m of this.bindings)c(m[1]);c(this.result)}static parse(c,m){if(c.length<4)return m.error(`Expected at least 3 arguments, but found ${c.length-1} instead.`);const _=[];for(let N=1;N<c.length-1;N+=2){const z=c[N];if(typeof z!="string")return m.error(`Expected string, but found ${typeof z} instead.`,N);if(/[^a-zA-Z0-9_]/.test(z))return m.error("Variable names must contain only alphanumeric characters or '_'.",N);const j=m.parse(c[N+1],N+1);if(!j)return null;_.push([z,j])}const I=m.parse(c[c.length-1],c.length-1,m.expectedType,_);return I?new Lm(_,I):null}outputDefined(){return this.result.outputDefined()}}class jh{constructor(c,m,_){this.type=c,this.index=m,this.input=_}static parse(c,m){if(c.length!==3)return m.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const _=m.parse(c[1],1,St),I=m.parse(c[2],2,me(m.expectedType||it));return _&&I?new jh(I.type.itemType,_,I):null}evaluate(c){const m=this.index.evaluate(c),_=this.input.evaluate(c);if(m<0)throw new Wr(`Array index out of bounds: ${m} < 0.`);if(m>=_.length)throw new Wr(`Array index out of bounds: ${m} > ${_.length-1}.`);if(m!==Math.floor(m))throw new Wr(`Array index must be an integer, but found ${m} instead.`);return _[m]}eachChild(c){c(this.index),c(this.input)}outputDefined(){return!1}}class $y{constructor(c,m){this.type=Ae,this.needle=c,this.haystack=m}static parse(c,m){if(c.length!==3)return m.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const _=m.parse(c[1],1,it),I=m.parse(c[2],2,it);return _&&I?et(_.type,[Ae,gt,St,un,it])?new $y(_,I):m.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(_.type)} instead`):null}evaluate(c){const m=this.needle.evaluate(c),_=this.haystack.evaluate(c);if(!_)return!1;if(!je(m,["boolean","string","number","null"]))throw new Wr(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(Yn(m))} instead.`);if(!je(_,["string","array"]))throw new Wr(`Expected second argument to be of type array or string, but found ${Ce(Yn(_))} instead.`);return _.indexOf(m)>=0}eachChild(c){c(this.needle),c(this.haystack)}outputDefined(){return!0}}class Ks{constructor(c,m,_){this.type=St,this.needle=c,this.haystack=m,this.fromIndex=_}static parse(c,m){if(c.length<=2||c.length>=5)return m.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const _=m.parse(c[1],1,it),I=m.parse(c[2],2,it);if(!_||!I)return null;if(!et(_.type,[Ae,gt,St,un,it]))return m.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(_.type)} instead`);if(c.length===4){const N=m.parse(c[3],3,St);return N?new Ks(_,I,N):null}return new Ks(_,I)}evaluate(c){const m=this.needle.evaluate(c),_=this.haystack.evaluate(c);if(!je(m,["boolean","string","number","null"]))throw new Wr(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(Yn(m))} instead.`);if(!je(_,["string","array"]))throw new Wr(`Expected second argument to be of type array or string, but found ${Ce(Yn(_))} instead.`);if(this.fromIndex){const I=this.fromIndex.evaluate(c);return _.indexOf(m,I)}return _.indexOf(m)}eachChild(c){c(this.needle),c(this.haystack),this.fromIndex&&c(this.fromIndex)}outputDefined(){return!1}}class Uh{constructor(c,m,_,I,N,z){this.inputType=c,this.type=m,this.input=_,this.cases=I,this.outputs=N,this.otherwise=z}static parse(c,m){if(c.length<5)return m.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if(c.length%2!=1)return m.error("Expected an even number of arguments.");let _,I;m.expectedType&&m.expectedType.kind!=="value"&&(I=m.expectedType);const N={},z=[];for(let Z=2;Z<c.length-1;Z+=2){let ne=c[Z];const ae=c[Z+1];Array.isArray(ne)||(ne=[ne]);const ye=m.concat(Z);if(ne.length===0)return ye.error("Expected at least one branch label.");for(const Me of ne){if(typeof Me!="number"&&typeof Me!="string")return ye.error("Branch labels must be numbers or strings.");if(typeof Me=="number"&&Math.abs(Me)>Number.MAX_SAFE_INTEGER)return ye.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Me=="number"&&Math.floor(Me)!==Me)return ye.error("Numeric branch labels must be integer values.");if(_){if(ye.checkSubtype(_,Yn(Me)))return null}else _=Yn(Me);if(N[String(Me)]!==void 0)return ye.error("Branch labels must be unique.");N[String(Me)]=z.length}const we=m.parse(ae,Z,I);if(!we)return null;I=I||we.type,z.push(we)}const j=m.parse(c[1],1,it);if(!j)return null;const Y=m.parse(c[c.length-1],c.length-1,I);return Y?j.type.kind!=="value"&&m.concat(1).checkSubtype(_,j.type)?null:new Uh(_,I,j,N,z,Y):null}evaluate(c){const m=this.input.evaluate(c);return(Yn(m)===this.inputType&&this.outputs[this.cases[m]]||this.otherwise).evaluate(c)}eachChild(c){c(this.input),this.outputs.forEach(c),c(this.otherwise)}outputDefined(){return this.outputs.every(c=>c.outputDefined())&&this.otherwise.outputDefined()}}class Vh{constructor(c,m,_){this.type=c,this.branches=m,this.otherwise=_}static parse(c,m){if(c.length<4)return m.error(`Expected at least 3 arguments, but found only ${c.length-1}.`);if(c.length%2!=0)return m.error("Expected an odd number of arguments.");let _;m.expectedType&&m.expectedType.kind!=="value"&&(_=m.expectedType);const I=[];for(let z=1;z<c.length-1;z+=2){const j=m.parse(c[z],z,Ae);if(!j)return null;const Y=m.parse(c[z+1],z+1,_);if(!Y)return null;I.push([j,Y]),_=_||Y.type}const N=m.parse(c[c.length-1],c.length-1,_);if(!N)return null;if(!_)throw new Error("Can't infer output type");return new Vh(_,I,N)}evaluate(c){for(const[m,_]of this.branches)if(m.evaluate(c))return _.evaluate(c);return this.otherwise.evaluate(c)}eachChild(c){for(const[m,_]of this.branches)c(m),c(_);c(this.otherwise)}outputDefined(){return this.branches.every(([c,m])=>m.outputDefined())&&this.otherwise.outputDefined()}}class kc{constructor(c,m,_,I){this.type=c,this.input=m,this.beginIndex=_,this.endIndex=I}static parse(c,m){if(c.length<=2||c.length>=5)return m.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const _=m.parse(c[1],1,it),I=m.parse(c[2],2,St);if(!_||!I)return null;if(!et(_.type,[me(it),gt,it]))return m.error(`Expected first argument to be of type array or string, but found ${Ce(_.type)} instead`);if(c.length===4){const N=m.parse(c[3],3,St);return N?new kc(_.type,_,I,N):null}return new kc(_.type,_,I)}evaluate(c){const m=this.input.evaluate(c),_=this.beginIndex.evaluate(c);if(!je(m,["string","array"]))throw new Wr(`Expected first argument to be of type array or string, but found ${Ce(Yn(m))} instead.`);if(this.endIndex){const I=this.endIndex.evaluate(c);return m.slice(_,I)}return m.slice(_)}eachChild(c){c(this.input),c(this.beginIndex),this.endIndex&&c(this.endIndex)}outputDefined(){return!1}}function Dm(h,c){return h==="=="||h==="!="?c.kind==="boolean"||c.kind==="string"||c.kind==="number"||c.kind==="null"||c.kind==="value":c.kind==="string"||c.kind==="number"||c.kind==="value"}function Nm(h,c,m,_){return _.compare(c,m)===0}function Od(h,c,m){const _=h!=="=="&&h!=="!=";return class kre{constructor(N,z,j){this.type=Ae,this.lhs=N,this.rhs=z,this.collator=j,this.hasUntypedArgument=N.type.kind==="value"||z.type.kind==="value"}static parse(N,z){if(N.length!==3&&N.length!==4)return z.error("Expected two or three arguments.");const j=N[0];let Y=z.parse(N[1],1,it);if(!Y)return null;if(!Dm(j,Y.type))return z.concat(1).error(`"${j}" comparisons are not supported for type '${Ce(Y.type)}'.`);let Z=z.parse(N[2],2,it);if(!Z)return null;if(!Dm(j,Z.type))return z.concat(2).error(`"${j}" comparisons are not supported for type '${Ce(Z.type)}'.`);if(Y.type.kind!==Z.type.kind&&Y.type.kind!=="value"&&Z.type.kind!=="value")return z.error(`Cannot compare types '${Ce(Y.type)}' and '${Ce(Z.type)}'.`);_&&(Y.type.kind==="value"&&Z.type.kind!=="value"?Y=new ei(Z.type,[Y]):Y.type.kind!=="value"&&Z.type.kind==="value"&&(Z=new ei(Y.type,[Z])));let ne=null;if(N.length===4){if(Y.type.kind!=="string"&&Z.type.kind!=="string"&&Y.type.kind!=="value"&&Z.type.kind!=="value")return z.error("Cannot use collator to compare non-string types.");if(ne=z.parse(N[3],3,tn),!ne)return null}return new kre(Y,Z,ne)}evaluate(N){const z=this.lhs.evaluate(N),j=this.rhs.evaluate(N);if(_&&this.hasUntypedArgument){const Y=Yn(z),Z=Yn(j);if(Y.kind!==Z.kind||Y.kind!=="string"&&Y.kind!=="number")throw new Wr(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${Y.kind}, ${Z.kind}) instead.`)}if(this.collator&&!_&&this.hasUntypedArgument){const Y=Yn(z),Z=Yn(j);if(Y.kind!=="string"||Z.kind!=="string")return c(N,z,j)}return this.collator?m(N,z,j,this.collator.evaluate(N)):c(N,z,j)}eachChild(N){N(this.lhs),N(this.rhs),this.collator&&N(this.collator)}outputDefined(){return!0}}}const jy=Od("==",function(h,c,m){return c===m},Nm),Uy=Od("!=",function(h,c,m){return c!==m},function(h,c,m,_){return!Nm(0,c,m,_)}),Wh=Od("<",function(h,c,m){return c<m},function(h,c,m,_){return _.compare(c,m)<0}),Ua=Od(">",function(h,c,m){return c>m},function(h,c,m,_){return _.compare(c,m)>0}),ec=Od("<=",function(h,c,m){return c<=m},function(h,c,m,_){return _.compare(c,m)<=0}),Cu=Od(">=",function(h,c,m){return c>=m},function(h,c,m,_){return _.compare(c,m)>=0});class ep{constructor(c,m,_,I,N){this.type=gt,this.number=c,this.locale=m,this.currency=_,this.minFractionDigits=I,this.maxFractionDigits=N}static parse(c,m){if(c.length!==3)return m.error("Expected two arguments.");const _=m.parse(c[1],1,St);if(!_)return null;const I=c[2];if(typeof I!="object"||Array.isArray(I))return m.error("NumberFormat options argument must be an object.");let N=null;if(I.locale&&(N=m.parse(I.locale,1,gt),!N))return null;let z=null;if(I.currency&&(z=m.parse(I.currency,1,gt),!z))return null;let j=null;if(I["min-fraction-digits"]&&(j=m.parse(I["min-fraction-digits"],1,St),!j))return null;let Y=null;return I["max-fraction-digits"]&&(Y=m.parse(I["max-fraction-digits"],1,St),!Y)?null:new ep(_,N,z,j,Y)}evaluate(c){return new Intl.NumberFormat(this.locale?this.locale.evaluate(c):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(c):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(c):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(c):void 0}).format(this.number.evaluate(c))}eachChild(c){c(this.number),this.locale&&c(this.locale),this.currency&&c(this.currency),this.minFractionDigits&&c(this.minFractionDigits),this.maxFractionDigits&&c(this.maxFractionDigits)}outputDefined(){return!1}}class tp{constructor(c){this.type=Xe,this.sections=c}static parse(c,m){if(c.length<2)return m.error("Expected at least one argument.");const _=c[1];if(!Array.isArray(_)&&typeof _=="object")return m.error("First argument must be an image or text section.");const I=[];let N=!1;for(let z=1;z<=c.length-1;++z){const j=c[z];if(N&&typeof j=="object"&&!Array.isArray(j)){N=!1;let Y=null;if(j["font-scale"]&&(Y=m.parse(j["font-scale"],1,St),!Y))return null;let Z=null;if(j["text-font"]&&(Z=m.parse(j["text-font"],1,me(gt)),!Z))return null;let ne=null;if(j["text-color"]&&(ne=m.parse(j["text-color"],1,ft),!ne))return null;const ae=I[I.length-1];ae.scale=Y,ae.font=Z,ae.textColor=ne}else{const Y=m.parse(c[z],1,it);if(!Y)return null;const Z=Y.type.kind;if(Z!=="string"&&Z!=="value"&&Z!=="null"&&Z!=="resolvedImage")return m.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");N=!0,I.push({content:Y,scale:null,font:null,textColor:null})}}return new tp(I)}evaluate(c){return new $r(this.sections.map(m=>{const _=m.content.evaluate(c);return Yn(_)===ee?new hr("",_,null,null,null):new hr(Ii(_),null,m.scale?m.scale.evaluate(c):null,m.font?m.font.evaluate(c).join(","):null,m.textColor?m.textColor.evaluate(c):null)}))}eachChild(c){for(const m of this.sections)c(m.content),m.scale&&c(m.scale),m.font&&c(m.font),m.textColor&&c(m.textColor)}outputDefined(){return!1}}class wl{constructor(c){this.type=ee,this.input=c}static parse(c,m){if(c.length!==2)return m.error("Expected two arguments.");const _=m.parse(c[1],1,gt);return _?new wl(_):m.error("No image name provided.")}evaluate(c){const m=this.input.evaluate(c),_=qn.fromString(m);return _&&c.availableImages&&(_.available=c.availableImages.indexOf(m)>-1),_}eachChild(c){c(this.input)}outputDefined(){return!1}}class tc{constructor(c){this.type=St,this.input=c}static parse(c,m){if(c.length!==2)return m.error(`Expected 1 argument, but found ${c.length-1} instead.`);const _=m.parse(c[1],1);return _?_.type.kind!=="array"&&_.type.kind!=="string"&&_.type.kind!=="value"?m.error(`Expected argument of type string or array, but found ${Ce(_.type)} instead.`):new tc(_):null}evaluate(c){const m=this.input.evaluate(c);if(typeof m=="string"||Array.isArray(m))return m.length;throw new Wr(`Expected value to be of type string or array, but found ${Ce(Yn(m))} instead.`)}eachChild(c){c(this.input)}outputDefined(){return!1}}const Rc={"==":jy,"!=":Uy,">":Ua,"<":Wh,">=":Cu,"<=":ec,array:ei,at:jh,boolean:ei,case:Vh,coalesce:_r,collator:Pd,format:tp,image:wl,in:$y,"index-of":Ks,interpolate:ys,"interpolate-hcl":ys,"interpolate-lab":ys,length:tc,let:Lm,literal:gs,match:Uh,number:ei,"number-format":ep,object:ei,slice:kc,step:Ic,string:ei,"to-boolean":Is,"to-color":Is,"to-number":Is,"to-string":Is,var:Om,within:Tu};function Vy(h,[c,m,_,I]){c=c.evaluate(h),m=m.evaluate(h),_=_.evaluate(h);const N=I?I.evaluate(h):1,z=Rn(c,m,_,N);if(z)throw new Wr(z);return new Tn(c/255,m/255,_/255,N,!1)}function np(h,c){return h in c}function zm(h,c){const m=c[h];return m===void 0?null:m}function Au(h){return{type:h}}function Fm(h){return{result:"success",value:h}}function Oc(h){return{result:"error",value:h}}function Ld(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function Wy(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function Bm(h){return!!h.expression&&h.expression.interpolated}function Br(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function Sl(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)}function Hh(h){return h}function rp(h,c){const m=c.type==="color",_=h.stops&&typeof h.stops[0][0]=="object",I=_||!(_||h.property!==void 0),N=h.type||(Bm(c)?"exponential":"interval");if(m||c.type==="padding"){const ne=m?Tn.parse:li.parse;(h=Yt({},h)).stops&&(h.stops=h.stops.map(ae=>[ae[0],ne(ae[1])])),h.default=ne(h.default?h.default:c.default)}if(h.colorSpace&&(z=h.colorSpace)!=="rgb"&&z!=="hcl"&&z!=="lab")throw new Error(`Unknown color space: "${h.colorSpace}"`);var z;let j,Y,Z;if(N==="exponential")j=Iu;else if(N==="interval")j=Yr;else if(N==="categorical"){j=Va,Y=Object.create(null);for(const ne of h.stops)Y[ne[0]]=ne[1];Z=typeof h.stops[0][0]}else{if(N!=="identity")throw new Error(`Unknown function type "${N}"`);j=gr}if(_){const ne={},ae=[];for(let Me=0;Me<h.stops.length;Me++){const Re=h.stops[Me],$e=Re[0].zoom;ne[$e]===void 0&&(ne[$e]={zoom:$e,type:h.type,property:h.property,default:h.default,stops:[]},ae.push($e)),ne[$e].stops.push([Re[0].value,Re[1]])}const ye=[];for(const Me of ae)ye.push([ne[Me].zoom,rp(ne[Me],c)]);const we={name:"linear"};return{kind:"composite",interpolationType:we,interpolationFactor:ys.interpolationFactor.bind(void 0,we),zoomStops:ye.map(Me=>Me[0]),evaluate:({zoom:Me},Re)=>Iu({stops:ye,base:h.base},c,Me).evaluate(Me,Re)}}if(I){const ne=N==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:ne,interpolationFactor:ys.interpolationFactor.bind(void 0,ne),zoomStops:h.stops.map(ae=>ae[0]),evaluate:({zoom:ae})=>j(h,c,ae,Y,Z)}}return{kind:"source",evaluate(ne,ae){const ye=ae&&ae.properties?ae.properties[h.property]:void 0;return ye===void 0?Pu(h.default,c.default):j(h,c,ye,Y,Z)}}}function Pu(h,c,m){return h!==void 0?h:c!==void 0?c:m!==void 0?m:void 0}function Va(h,c,m,_,I){return Pu(typeof m===I?_[m]:void 0,h.default,c.default)}function Yr(h,c,m){if(Br(m)!=="number")return Pu(h.default,c.default);const _=h.stops.length;if(_===1||m<=h.stops[0][0])return h.stops[0][1];if(m>=h.stops[_-1][0])return h.stops[_-1][1];const I=Qf(h.stops.map(N=>N[0]),m);return h.stops[I][1]}function Iu(h,c,m){const _=h.base!==void 0?h.base:1;if(Br(m)!=="number")return Pu(h.default,c.default);const I=h.stops.length;if(I===1||m<=h.stops[0][0])return h.stops[0][1];if(m>=h.stops[I-1][0])return h.stops[I-1][1];const N=Qf(h.stops.map(ne=>ne[0]),m),z=function(ne,ae,ye,we){const Me=we-ye,Re=ne-ye;return Me===0?0:ae===1?Re/Me:(Math.pow(ae,Re)-1)/(Math.pow(ae,Me)-1)}(m,_,h.stops[N][0],h.stops[N+1][0]),j=h.stops[N][1],Y=h.stops[N+1][1],Z=Rs[c.type]||Hh;return typeof j.evaluate=="function"?{evaluate(...ne){const ae=j.evaluate.apply(void 0,ne),ye=Y.evaluate.apply(void 0,ne);if(ae!==void 0&&ye!==void 0)return Z(ae,ye,z,h.colorSpace)}}:Z(j,Y,z,h.colorSpace)}function gr(h,c,m){switch(c.type){case"color":m=Tn.parse(m);break;case"formatted":m=$r.fromString(m.toString());break;case"resolvedImage":m=qn.fromString(m.toString());break;case"padding":m=li.parse(m);break;default:Br(m)===c.type||c.type==="enum"&&c.values[m]||(m=void 0)}return Pu(m,h.default,c.default)}ja.register(Rc,{error:[{kind:"error"},[gt],(h,[c])=>{throw new Wr(c.evaluate(h))}],typeof:[gt,[it],(h,[c])=>Ce(Yn(c.evaluate(h)))],"to-rgba":[me(St,4),[ft],(h,[c])=>{const[m,_,I,N]=c.evaluate(h).rgb;return[255*m,255*_,255*I,N]}],rgb:[ft,[St,St,St],Vy],rgba:[ft,[St,St,St,St],Vy],has:{type:Ae,overloads:[[[gt],(h,[c])=>np(c.evaluate(h),h.properties())],[[gt,Ie],(h,[c,m])=>np(c.evaluate(h),m.evaluate(h))]]},get:{type:it,overloads:[[[gt],(h,[c])=>zm(c.evaluate(h),h.properties())],[[gt,Ie],(h,[c,m])=>zm(c.evaluate(h),m.evaluate(h))]]},"feature-state":[it,[gt],(h,[c])=>zm(c.evaluate(h),h.featureState||{})],properties:[Ie,[],h=>h.properties()],"geometry-type":[gt,[],h=>h.geometryType()],id:[it,[],h=>h.id()],zoom:[St,[],h=>h.globals.zoom],"heatmap-density":[St,[],h=>h.globals.heatmapDensity||0],"line-progress":[St,[],h=>h.globals.lineProgress||0],accumulated:[it,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[St,Au(St),(h,c)=>{let m=0;for(const _ of c)m+=_.evaluate(h);return m}],"*":[St,Au(St),(h,c)=>{let m=1;for(const _ of c)m*=_.evaluate(h);return m}],"-":{type:St,overloads:[[[St,St],(h,[c,m])=>c.evaluate(h)-m.evaluate(h)],[[St],(h,[c])=>-c.evaluate(h)]]},"/":[St,[St,St],(h,[c,m])=>c.evaluate(h)/m.evaluate(h)],"%":[St,[St,St],(h,[c,m])=>c.evaluate(h)%m.evaluate(h)],ln2:[St,[],()=>Math.LN2],pi:[St,[],()=>Math.PI],e:[St,[],()=>Math.E],"^":[St,[St,St],(h,[c,m])=>Math.pow(c.evaluate(h),m.evaluate(h))],sqrt:[St,[St],(h,[c])=>Math.sqrt(c.evaluate(h))],log10:[St,[St],(h,[c])=>Math.log(c.evaluate(h))/Math.LN10],ln:[St,[St],(h,[c])=>Math.log(c.evaluate(h))],log2:[St,[St],(h,[c])=>Math.log(c.evaluate(h))/Math.LN2],sin:[St,[St],(h,[c])=>Math.sin(c.evaluate(h))],cos:[St,[St],(h,[c])=>Math.cos(c.evaluate(h))],tan:[St,[St],(h,[c])=>Math.tan(c.evaluate(h))],asin:[St,[St],(h,[c])=>Math.asin(c.evaluate(h))],acos:[St,[St],(h,[c])=>Math.acos(c.evaluate(h))],atan:[St,[St],(h,[c])=>Math.atan(c.evaluate(h))],min:[St,Au(St),(h,c)=>Math.min(...c.map(m=>m.evaluate(h)))],max:[St,Au(St),(h,c)=>Math.max(...c.map(m=>m.evaluate(h)))],abs:[St,[St],(h,[c])=>Math.abs(c.evaluate(h))],round:[St,[St],(h,[c])=>{const m=c.evaluate(h);return m<0?-Math.round(-m):Math.round(m)}],floor:[St,[St],(h,[c])=>Math.floor(c.evaluate(h))],ceil:[St,[St],(h,[c])=>Math.ceil(c.evaluate(h))],"filter-==":[Ae,[gt,it],(h,[c,m])=>h.properties()[c.value]===m.value],"filter-id-==":[Ae,[it],(h,[c])=>h.id()===c.value],"filter-type-==":[Ae,[gt],(h,[c])=>h.geometryType()===c.value],"filter-<":[Ae,[gt,it],(h,[c,m])=>{const _=h.properties()[c.value],I=m.value;return typeof _==typeof I&&_<I}],"filter-id-<":[Ae,[it],(h,[c])=>{const m=h.id(),_=c.value;return typeof m==typeof _&&m<_}],"filter->":[Ae,[gt,it],(h,[c,m])=>{const _=h.properties()[c.value],I=m.value;return typeof _==typeof I&&_>I}],"filter-id->":[Ae,[it],(h,[c])=>{const m=h.id(),_=c.value;return typeof m==typeof _&&m>_}],"filter-<=":[Ae,[gt,it],(h,[c,m])=>{const _=h.properties()[c.value],I=m.value;return typeof _==typeof I&&_<=I}],"filter-id-<=":[Ae,[it],(h,[c])=>{const m=h.id(),_=c.value;return typeof m==typeof _&&m<=_}],"filter->=":[Ae,[gt,it],(h,[c,m])=>{const _=h.properties()[c.value],I=m.value;return typeof _==typeof I&&_>=I}],"filter-id->=":[Ae,[it],(h,[c])=>{const m=h.id(),_=c.value;return typeof m==typeof _&&m>=_}],"filter-has":[Ae,[it],(h,[c])=>c.value in h.properties()],"filter-has-id":[Ae,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[Ae,[me(gt)],(h,[c])=>c.value.indexOf(h.geometryType())>=0],"filter-id-in":[Ae,[me(it)],(h,[c])=>c.value.indexOf(h.id())>=0],"filter-in-small":[Ae,[gt,me(it)],(h,[c,m])=>m.value.indexOf(h.properties()[c.value])>=0],"filter-in-large":[Ae,[gt,me(it)],(h,[c,m])=>function(_,I,N,z){for(;N<=z;){const j=N+z>>1;if(I[j]===_)return!0;I[j]>_?z=j-1:N=j+1}return!1}(h.properties()[c.value],m.value,0,m.value.length-1)],all:{type:Ae,overloads:[[[Ae,Ae],(h,[c,m])=>c.evaluate(h)&&m.evaluate(h)],[Au(Ae),(h,c)=>{for(const m of c)if(!m.evaluate(h))return!1;return!0}]]},any:{type:Ae,overloads:[[[Ae,Ae],(h,[c,m])=>c.evaluate(h)||m.evaluate(h)],[Au(Ae),(h,c)=>{for(const m of c)if(m.evaluate(h))return!0;return!1}]]},"!":[Ae,[Ae],(h,[c])=>!c.evaluate(h)],"is-supported-script":[Ae,[gt],(h,[c])=>{const m=h.globals&&h.globals.isSupportedScript;return!m||m(c.evaluate(h))}],upcase:[gt,[gt],(h,[c])=>c.evaluate(h).toUpperCase()],downcase:[gt,[gt],(h,[c])=>c.evaluate(h).toLowerCase()],concat:[gt,Au(it),(h,c)=>c.map(m=>Ii(m.evaluate(h))).join("")],"resolved-locale":[gt,[tn],(h,[c])=>c.evaluate(h).resolvedLocale()]});class ma{constructor(c,m){var _;this.expression=c,this._warningHistory={},this._evaluator=new bl,this._defaultValue=m?(_=m).type==="color"&&Sl(_.default)?new Tn(0,0,0,0):_.type==="color"?Tn.parse(_.default)||null:_.type==="padding"?li.parse(_.default)||null:_.type==="variableAnchorOffsetCollection"?Vr.parse(_.default)||null:_.default===void 0?null:_.default:null,this._enumValues=m&&m.type==="enum"?m.values:null}evaluateWithoutErrorHandling(c,m,_,I,N,z){return this._evaluator.globals=c,this._evaluator.feature=m,this._evaluator.featureState=_,this._evaluator.canonical=I,this._evaluator.availableImages=N||null,this._evaluator.formattedSection=z,this.expression.evaluate(this._evaluator)}evaluate(c,m,_,I,N,z){this._evaluator.globals=c,this._evaluator.feature=m||null,this._evaluator.featureState=_||null,this._evaluator.canonical=I,this._evaluator.availableImages=N||null,this._evaluator.formattedSection=z||null;try{const j=this.expression.evaluate(this._evaluator);if(j==null||typeof j=="number"&&j!=j)return this._defaultValue;if(this._enumValues&&!(j in this._enumValues))throw new Wr(`Expected value to be one of ${Object.keys(this._enumValues).map(Y=>JSON.stringify(Y)).join(", ")}, but found ${JSON.stringify(j)} instead.`);return j}catch(j){return this._warningHistory[j.message]||(this._warningHistory[j.message]=!0,typeof console<"u"&&console.warn(j.message)),this._defaultValue}}}function Gr(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in Rc}function ci(h,c){const m=new vr(Rc,ro,[],c?function(I){const N={color:ft,string:gt,number:St,enum:gt,boolean:Ae,formatted:Xe,padding:xe,resolvedImage:ee,variableAnchorOffsetCollection:se};return I.type==="array"?me(N[I.value]||it,I.length):N[I.type]}(c):void 0),_=m.parse(h,void 0,void 0,void 0,c&&c.type==="string"?{typeAnnotation:"coerce"}:void 0);return _?Fm(new ma(_,c)):Oc(m.errors)}class ku{constructor(c,m){this.kind=c,this._styleExpression=m,this.isStateDependent=c!=="constant"&&!Jf(m.expression)}evaluateWithoutErrorHandling(c,m,_,I,N,z){return this._styleExpression.evaluateWithoutErrorHandling(c,m,_,I,N,z)}evaluate(c,m,_,I,N,z){return this._styleExpression.evaluate(c,m,_,I,N,z)}}class Gh{constructor(c,m,_,I){this.kind=c,this.zoomStops=_,this._styleExpression=m,this.isStateDependent=c!=="camera"&&!Jf(m.expression),this.interpolationType=I}evaluateWithoutErrorHandling(c,m,_,I,N,z){return this._styleExpression.evaluateWithoutErrorHandling(c,m,_,I,N,z)}evaluate(c,m,_,I,N,z){return this._styleExpression.evaluate(c,m,_,I,N,z)}interpolationFactor(c,m,_){return this.interpolationType?ys.interpolationFactor(this.interpolationType,c,m,_):0}}function Zs(h,c){const m=ci(h,c);if(m.result==="error")return m;const _=m.value.expression,I=kd(_);if(!I&&!Ld(c))return Oc([new xn("","data expressions not supported")]);const N=Bh(_,["zoom"]);if(!N&&!Wy(c))return Oc([new xn("","zoom expressions not supported")]);const z=Si(_);return z||N?z instanceof xn?Oc([z]):z instanceof ys&&!Bm(c)?Oc([new xn("",'"interpolate" expressions cannot be used with this property')]):Fm(z?new Gh(I?"camera":"composite",m.value,z.labels,z instanceof ys?z.interpolation:void 0):new ku(I?"constant":"source",m.value)):Oc([new xn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class vs{constructor(c,m){this._parameters=c,this._specification=m,Yt(this,rp(this._parameters,this._specification))}static deserialize(c){return new vs(c._parameters,c._specification)}static serialize(c){return{_parameters:c._parameters,_specification:c._specification}}}function Si(h){let c=null;if(h instanceof Lm)c=Si(h.result);else if(h instanceof _r){for(const m of h.args)if(c=Si(m),c)break}else(h instanceof Ic||h instanceof ys)&&h.input instanceof ja&&h.input.name==="zoom"&&(c=h);return c instanceof xn||h.eachChild(m=>{const _=Si(m);_ instanceof xn?c=_:!c&&_?c=new xn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):c&&_&&c!==_&&(c=new xn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),c}function Dd(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const c of h.slice(1))if(!Dd(c)&&typeof c!="boolean")return!1;return!0;default:return!0}}const Wa={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ip(h){if(h==null)return{filter:()=>!0,needGeometry:!1};Dd(h)||(h=Ru(h));const c=ci(h,Wa);if(c.result==="error")throw new Error(c.value.map(m=>`${m.key}: ${m.message}`).join(", "));return{filter:(m,_,I)=>c.value.evaluate(m,_,{},I),needGeometry:op(h)}}function Hy(h,c){return h<c?-1:h>c?1:0}function op(h){if(!Array.isArray(h))return!1;if(h[0]==="within")return!0;for(let c=1;c<h.length;c++)if(op(h[c]))return!0;return!1}function Ru(h){if(!h)return!0;const c=h[0];return h.length<=1?c!=="any":c==="=="?$m(h[1],h[2],"=="):c==="!="?Yh($m(h[1],h[2],"==")):c==="<"||c===">"||c==="<="||c===">="?$m(h[1],h[2],c):c==="any"?(m=h.slice(1),["any"].concat(m.map(Ru))):c==="all"?["all"].concat(h.slice(1).map(Ru)):c==="none"?["all"].concat(h.slice(1).map(Ru).map(Yh)):c==="in"?qh(h[1],h.slice(2)):c==="!in"?Yh(qh(h[1],h.slice(2))):c==="has"?Nd(h[1]):c==="!has"?Yh(Nd(h[1])):c!=="within"||h;var m}function $m(h,c,m){switch(h){case"$type":return[`filter-type-${m}`,c];case"$id":return[`filter-id-${m}`,c];default:return[`filter-${m}`,h,c]}}function qh(h,c){if(c.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",c]];case"$id":return["filter-id-in",["literal",c]];default:return c.length>200&&!c.some(m=>typeof m!=typeof c[0])?["filter-in-large",h,["literal",c.sort(Hy)]]:["filter-in-small",h,["literal",c]]}}function Nd(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function Yh(h){return["!",h]}function zd(h){const c=typeof h;if(c==="number"||c==="boolean"||c==="string"||h==null)return JSON.stringify(h);if(Array.isArray(h)){let I="[";for(const N of h)I+=`${zd(N)},`;return`${I}]`}const m=Object.keys(h).sort();let _="{";for(let I=0;I<m.length;I++)_+=`${JSON.stringify(m[I])}:${zd(h[m[I]])},`;return`${_}}`}function jm(h){let c="";for(const m of Vt)c+=`/${zd(h[m])}`;return c}function Gy(h){const c=h.value;return c?[new Je(h.key,c,"constants have been deprecated as of v8")]:[]}function Zi(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function ga(h){if(Array.isArray(h))return h.map(ga);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const c={};for(const m in h)c[m]=ga(h[m]);return c}return Zi(h)}function Js(h){const c=h.key,m=h.value,_=h.valueSpec||{},I=h.objectElementValidators||{},N=h.style,z=h.styleSpec,j=h.validateSpec;let Y=[];const Z=Br(m);if(Z!=="object")return[new Je(c,m,`object expected, ${Z} found`)];for(const ne in m){const ae=ne.split(".")[0],ye=_[ae]||_["*"];let we;if(I[ae])we=I[ae];else if(_[ae])we=j;else if(I["*"])we=I["*"];else{if(!_["*"]){Y.push(new Je(c,m[ne],`unknown property "${ne}"`));continue}we=j}Y=Y.concat(we({key:(c&&`${c}.`)+ne,value:m[ne],valueSpec:ye,style:N,styleSpec:z,object:m,objectKey:ne,validateSpec:j},m))}for(const ne in _)I[ne]||_[ne].required&&_[ne].default===void 0&&m[ne]===void 0&&Y.push(new Je(c,m,`missing required property "${ne}"`));return Y}function nc(h){const c=h.value,m=h.valueSpec,_=h.style,I=h.styleSpec,N=h.key,z=h.arrayElementValidator||h.validateSpec;if(Br(c)!=="array")return[new Je(N,c,`array expected, ${Br(c)} found`)];if(m.length&&c.length!==m.length)return[new Je(N,c,`array length ${m.length} expected, length ${c.length} found`)];if(m["min-length"]&&c.length<m["min-length"])return[new Je(N,c,`array length at least ${m["min-length"]} expected, length ${c.length} found`)];let j={type:m.value,values:m.values};I.$version<7&&(j.function=m.function),Br(m.value)==="object"&&(j=m.value);let Y=[];for(let Z=0;Z<c.length;Z++)Y=Y.concat(z({array:c,arrayIndex:Z,value:c[Z],valueSpec:j,validateSpec:h.validateSpec,style:_,styleSpec:I,key:`${N}[${Z}]`}));return Y}function Qs(h){const c=h.key,m=h.value,_=h.valueSpec;let I=Br(m);return I==="number"&&m!=m&&(I="NaN"),I!=="number"?[new Je(c,m,`number expected, ${I} found`)]:"minimum"in _&&m<_.minimum?[new Je(c,m,`${m} is less than the minimum value ${_.minimum}`)]:"maximum"in _&&m>_.maximum?[new Je(c,m,`${m} is greater than the maximum value ${_.maximum}`)]:[]}function Fd(h){const c=h.valueSpec,m=Zi(h.value.type);let _,I,N,z={};const j=m!=="categorical"&&h.value.property===void 0,Y=!j,Z=Br(h.value.stops)==="array"&&Br(h.value.stops[0])==="array"&&Br(h.value.stops[0][0])==="object",ne=Js({key:h.key,value:h.value,valueSpec:h.styleSpec.function,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(we){if(m==="identity")return[new Je(we.key,we.value,'identity function may not have a "stops" property')];let Me=[];const Re=we.value;return Me=Me.concat(nc({key:we.key,value:Re,valueSpec:we.valueSpec,validateSpec:we.validateSpec,style:we.style,styleSpec:we.styleSpec,arrayElementValidator:ae})),Br(Re)==="array"&&Re.length===0&&Me.push(new Je(we.key,Re,"array must have at least one stop")),Me},default:function(we){return we.validateSpec({key:we.key,value:we.value,valueSpec:c,validateSpec:we.validateSpec,style:we.style,styleSpec:we.styleSpec})}}});return m==="identity"&&j&&ne.push(new Je(h.key,h.value,'missing required property "property"')),m==="identity"||h.value.stops||ne.push(new Je(h.key,h.value,'missing required property "stops"')),m==="exponential"&&h.valueSpec.expression&&!Bm(h.valueSpec)&&ne.push(new Je(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(Y&&!Ld(h.valueSpec)?ne.push(new Je(h.key,h.value,"property functions not supported")):j&&!Wy(h.valueSpec)&&ne.push(new Je(h.key,h.value,"zoom functions not supported"))),m!=="categorical"&&!Z||h.value.property!==void 0||ne.push(new Je(h.key,h.value,'"property" property is required')),ne;function ae(we){let Me=[];const Re=we.value,$e=we.key;if(Br(Re)!=="array")return[new Je($e,Re,`array expected, ${Br(Re)} found`)];if(Re.length!==2)return[new Je($e,Re,`array length 2 expected, length ${Re.length} found`)];if(Z){if(Br(Re[0])!=="object")return[new Je($e,Re,`object expected, ${Br(Re[0])} found`)];if(Re[0].zoom===void 0)return[new Je($e,Re,"object stop key must have zoom")];if(Re[0].value===void 0)return[new Je($e,Re,"object stop key must have value")];if(N&&N>Zi(Re[0].zoom))return[new Je($e,Re[0].zoom,"stop zoom values must appear in ascending order")];Zi(Re[0].zoom)!==N&&(N=Zi(Re[0].zoom),I=void 0,z={}),Me=Me.concat(Js({key:`${$e}[0]`,value:Re[0],valueSpec:{zoom:{}},validateSpec:we.validateSpec,style:we.style,styleSpec:we.styleSpec,objectElementValidators:{zoom:Qs,value:ye}}))}else Me=Me.concat(ye({key:`${$e}[0]`,value:Re[0],valueSpec:{},validateSpec:we.validateSpec,style:we.style,styleSpec:we.styleSpec},Re));return Gr(ga(Re[1]))?Me.concat([new Je(`${$e}[1]`,Re[1],"expressions are not allowed in function stops.")]):Me.concat(we.validateSpec({key:`${$e}[1]`,value:Re[1],valueSpec:c,validateSpec:we.validateSpec,style:we.style,styleSpec:we.styleSpec}))}function ye(we,Me){const Re=Br(we.value),$e=Zi(we.value),Ke=we.value!==null?we.value:Me;if(_){if(Re!==_)return[new Je(we.key,Ke,`${Re} stop domain type must match previous stop domain type ${_}`)]}else _=Re;if(Re!=="number"&&Re!=="string"&&Re!=="boolean")return[new Je(we.key,Ke,"stop domain value must be a number, string, or boolean")];if(Re!=="number"&&m!=="categorical"){let _t=`number expected, ${Re} found`;return Ld(c)&&m===void 0&&(_t+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Je(we.key,Ke,_t)]}return m!=="categorical"||Re!=="number"||isFinite($e)&&Math.floor($e)===$e?m!=="categorical"&&Re==="number"&&I!==void 0&&$e<I?[new Je(we.key,Ke,"stop domain values must appear in ascending order")]:(I=$e,m==="categorical"&&$e in z?[new Je(we.key,Ke,"stop domain values must be unique")]:(z[$e]=!0,[])):[new Je(we.key,Ke,`integer expected, found ${$e}`)]}}function Ml(h){const c=(h.expressionContext==="property"?Zs:ci)(ga(h.value),h.valueSpec);if(c.result==="error")return c.value.map(_=>new Je(`${h.key}${_.key}`,h.value,_.message));const m=c.value.expression||c.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!m.outputDefined())return[new Je(h.key,h.value,`Invalid data expression for "${h.propertyKey}". Output values must be contained as literals within the expression.`)];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!Jf(m))return[new Je(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!Jf(m))return[new Je(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!Bh(m,["zoom","feature-state"]))return[new Je(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!kd(m))return[new Je(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function _s(h){const c=h.key,m=h.value,_=h.valueSpec,I=[];return Array.isArray(_.values)?_.values.indexOf(Zi(m))===-1&&I.push(new Je(c,m,`expected one of [${_.values.join(", ")}], ${JSON.stringify(m)} found`)):Object.keys(_.values).indexOf(Zi(m))===-1&&I.push(new Je(c,m,`expected one of [${Object.keys(_.values).join(", ")}], ${JSON.stringify(m)} found`)),I}function Ou(h){return Dd(ga(h.value))?Ml(Yt({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):rc(h)}function rc(h){const c=h.value,m=h.key;if(Br(c)!=="array")return[new Je(m,c,`array expected, ${Br(c)} found`)];const _=h.styleSpec;let I,N=[];if(c.length<1)return[new Je(m,c,"filter array must have at least 1 element")];switch(N=N.concat(_s({key:`${m}[0]`,value:c[0],valueSpec:_.filter_operator,style:h.style,styleSpec:h.styleSpec})),Zi(c[0])){case"<":case"<=":case">":case">=":c.length>=2&&Zi(c[1])==="$type"&&N.push(new Je(m,c,`"$type" cannot be use with operator "${c[0]}"`));case"==":case"!=":c.length!==3&&N.push(new Je(m,c,`filter array for operator "${c[0]}" must have 3 elements`));case"in":case"!in":c.length>=2&&(I=Br(c[1]),I!=="string"&&N.push(new Je(`${m}[1]`,c[1],`string expected, ${I} found`)));for(let z=2;z<c.length;z++)I=Br(c[z]),Zi(c[1])==="$type"?N=N.concat(_s({key:`${m}[${z}]`,value:c[z],valueSpec:_.geometry_type,style:h.style,styleSpec:h.styleSpec})):I!=="string"&&I!=="number"&&I!=="boolean"&&N.push(new Je(`${m}[${z}]`,c[z],`string, number, or boolean expected, ${I} found`));break;case"any":case"all":case"none":for(let z=1;z<c.length;z++)N=N.concat(rc({key:`${m}[${z}]`,value:c[z],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":I=Br(c[1]),c.length!==2?N.push(new Je(m,c,`filter array for "${c[0]}" operator must have 2 elements`)):I!=="string"&&N.push(new Je(`${m}[1]`,c[1],`string expected, ${I} found`));break;case"within":I=Br(c[1]),c.length!==2?N.push(new Je(m,c,`filter array for "${c[0]}" operator must have 2 elements`)):I!=="object"&&N.push(new Je(`${m}[1]`,c[1],`object expected, ${I} found`))}return N}function Um(h,c){const m=h.key,_=h.validateSpec,I=h.style,N=h.styleSpec,z=h.value,j=h.objectKey,Y=N[`${c}_${h.layerType}`];if(!Y)return[];const Z=j.match(/^(.*)-transition$/);if(c==="paint"&&Z&&Y[Z[1]]&&Y[Z[1]].transition)return _({key:m,value:z,valueSpec:N.transition,style:I,styleSpec:N});const ne=h.valueSpec||Y[j];if(!ne)return[new Je(m,z,`unknown property "${j}"`)];let ae;if(Br(z)==="string"&&Ld(ne)&&!ne.tokens&&(ae=/^{([^}]+)}$/.exec(z)))return[new Je(m,z,`"${j}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ae[1])} }\`.`)];const ye=[];return h.layerType==="symbol"&&(j==="text-field"&&I&&!I.glyphs&&ye.push(new Je(m,z,'use of "text-field" requires a style "glyphs" property')),j==="text-font"&&Sl(ga(z))&&Zi(z.type)==="identity"&&ye.push(new Je(m,z,'"text-font" does not support identity functions'))),ye.concat(_({key:h.key,value:z,valueSpec:ne,style:I,styleSpec:N,expressionContext:"property",propertyType:c,propertyKey:j}))}function Xh(h){return Um(h,"paint")}function Li(h){return Um(h,"layout")}function Kh(h){let c=[];const m=h.value,_=h.key,I=h.style,N=h.styleSpec;m.type||m.ref||c.push(new Je(_,m,'either "type" or "ref" is required'));let z=Zi(m.type);const j=Zi(m.ref);if(m.id){const Y=Zi(m.id);for(let Z=0;Z<h.arrayIndex;Z++){const ne=I.layers[Z];Zi(ne.id)===Y&&c.push(new Je(_,m.id,`duplicate layer id "${m.id}", previously used at line ${ne.id.__line__}`))}}if("ref"in m){let Y;["type","source","source-layer","filter","layout"].forEach(Z=>{Z in m&&c.push(new Je(_,m[Z],`"${Z}" is prohibited for ref layers`))}),I.layers.forEach(Z=>{Zi(Z.id)===j&&(Y=Z)}),Y?Y.ref?c.push(new Je(_,m.ref,"ref cannot reference another ref layer")):z=Zi(Y.type):c.push(new Je(_,m.ref,`ref layer "${j}" not found`))}else if(z!=="background")if(m.source){const Y=I.sources&&I.sources[m.source],Z=Y&&Zi(Y.type);Y?Z==="vector"&&z==="raster"?c.push(new Je(_,m.source,`layer "${m.id}" requires a raster source`)):Z!=="raster-dem"&&z==="hillshade"?c.push(new Je(_,m.source,`layer "${m.id}" requires a raster-dem source`)):Z==="raster"&&z!=="raster"?c.push(new Je(_,m.source,`layer "${m.id}" requires a vector source`)):Z!=="vector"||m["source-layer"]?Z==="raster-dem"&&z!=="hillshade"?c.push(new Je(_,m.source,"raster-dem source can only be used with layer type 'hillshade'.")):z!=="line"||!m.paint||!m.paint["line-gradient"]||Z==="geojson"&&Y.lineMetrics||c.push(new Je(_,m,`layer "${m.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):c.push(new Je(_,m,`layer "${m.id}" must specify a "source-layer"`)):c.push(new Je(_,m.source,`source "${m.source}" not found`))}else c.push(new Je(_,m,'missing required property "source"'));return c=c.concat(Js({key:_,value:m,valueSpec:N.layer,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{"*":()=>[],type:()=>h.validateSpec({key:`${_}.type`,value:m.type,valueSpec:N.layer.type,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,object:m,objectKey:"type"}),filter:Ou,layout:Y=>Js({layer:m,key:Y.key,value:Y.value,style:Y.style,styleSpec:Y.styleSpec,validateSpec:Y.validateSpec,objectElementValidators:{"*":Z=>Li(Yt({layerType:z},Z))}}),paint:Y=>Js({layer:m,key:Y.key,value:Y.value,style:Y.style,styleSpec:Y.styleSpec,validateSpec:Y.validateSpec,objectElementValidators:{"*":Z=>Xh(Yt({layerType:z},Z))}})}})),c}function Ha(h){const c=h.value,m=h.key,_=Br(c);return _!=="string"?[new Je(m,c,`string expected, ${_} found`)]:[]}const Vm={promoteId:function({key:h,value:c}){if(Br(c)==="string")return Ha({key:h,value:c});{const m=[];for(const _ in c)m.push(...Ha({key:`${h}.${_}`,value:c[_]}));return m}}};function sp(h){const c=h.value,m=h.key,_=h.styleSpec,I=h.style,N=h.validateSpec;if(!c.type)return[new Je(m,c,'"type" is required')];const z=Zi(c.type);let j;switch(z){case"vector":case"raster":return j=Js({key:m,value:c,valueSpec:_[`source_${z.replace("-","_")}`],style:h.style,styleSpec:_,objectElementValidators:Vm,validateSpec:N}),j;case"raster-dem":return j=function(Y){var Z;const ne=(Z=Y.sourceName)!==null&&Z!==void 0?Z:"",ae=Y.value,ye=Y.styleSpec,we=ye.source_raster_dem,Me=Y.style;let Re=[];const $e=Br(ae);if(ae===void 0)return Re;if($e!=="object")return Re.push(new Je("source_raster_dem",ae,`object expected, ${$e} found`)),Re;const Ke=Zi(ae.encoding)==="custom",_t=["redFactor","greenFactor","blueFactor","baseShift"],Qe=Y.value.encoding?`"${Y.value.encoding}"`:"Default";for(const ut in ae)!Ke&&_t.includes(ut)?Re.push(new Je(ut,ae[ut],`In "${ne}": "${ut}" is only valid when "encoding" is set to "custom". ${Qe} encoding found`)):we[ut]?Re=Re.concat(Y.validateSpec({key:ut,value:ae[ut],valueSpec:we[ut],validateSpec:Y.validateSpec,style:Me,styleSpec:ye})):Re.push(new Je(ut,ae[ut],`unknown property "${ut}"`));return Re}({sourceName:m,value:c,style:h.style,styleSpec:_,validateSpec:N}),j;case"geojson":if(j=Js({key:m,value:c,valueSpec:_.source_geojson,style:I,styleSpec:_,validateSpec:N,objectElementValidators:Vm}),c.cluster)for(const Y in c.clusterProperties){const[Z,ne]=c.clusterProperties[Y],ae=typeof Z=="string"?[Z,["accumulated"],["get",Y]]:Z;j.push(...Ml({key:`${m}.${Y}.map`,value:ne,validateSpec:N,expressionContext:"cluster-map"})),j.push(...Ml({key:`${m}.${Y}.reduce`,value:ae,validateSpec:N,expressionContext:"cluster-reduce"}))}return j;case"video":return Js({key:m,value:c,valueSpec:_.source_video,style:I,validateSpec:N,styleSpec:_});case"image":return Js({key:m,value:c,valueSpec:_.source_image,style:I,validateSpec:N,styleSpec:_});case"canvas":return[new Je(m,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return _s({key:`${m}.type`,value:c.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:I,validateSpec:N,styleSpec:_})}}function ya(h){const c=h.value,m=h.styleSpec,_=m.light,I=h.style;let N=[];const z=Br(c);if(c===void 0)return N;if(z!=="object")return N=N.concat([new Je("light",c,`object expected, ${z} found`)]),N;for(const j in c){const Y=j.match(/^(.*)-transition$/);N=N.concat(Y&&_[Y[1]]&&_[Y[1]].transition?h.validateSpec({key:j,value:c[j],valueSpec:m.transition,validateSpec:h.validateSpec,style:I,styleSpec:m}):_[j]?h.validateSpec({key:j,value:c[j],valueSpec:_[j],validateSpec:h.validateSpec,style:I,styleSpec:m}):[new Je(j,c[j],`unknown property "${j}"`)])}return N}function Bd(h){const c=h.value,m=h.styleSpec,_=m.sky,I=h.style,N=Br(c);if(c===void 0)return[];if(N!=="object")return[new Je("sky",c,`object expected, ${N} found`)];let z=[];for(const j in c)z=z.concat(_[j]?uo({key:j,value:c[j],valueSpec:_[j],style:I,styleSpec:m}):[new Je(j,c[j],`unknown property "${j}"`)]);return z}function Ji(h){const c=h.value,m=h.styleSpec,_=m.terrain,I=h.style;let N=[];const z=Br(c);if(c===void 0)return N;if(z!=="object")return N=N.concat([new Je("terrain",c,`object expected, ${z} found`)]),N;for(const j in c)N=N.concat(_[j]?h.validateSpec({key:j,value:c[j],valueSpec:_[j],validateSpec:h.validateSpec,style:I,styleSpec:m}):[new Je(j,c[j],`unknown property "${j}"`)]);return N}function xo(h){let c=[];const m=h.value,_=h.key;if(Array.isArray(m)){const I=[],N=[];for(const z in m)m[z].id&&I.includes(m[z].id)&&c.push(new Je(_,m,`all the sprites' ids must be unique, but ${m[z].id} is duplicated`)),I.push(m[z].id),m[z].url&&N.includes(m[z].url)&&c.push(new Je(_,m,`all the sprites' URLs must be unique, but ${m[z].url} is duplicated`)),N.push(m[z].url),c=c.concat(Js({key:`${_}[${z}]`,value:m[z],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:h.validateSpec}));return c}return Ha({key:_,value:m})}const io={"*":()=>[],array:nc,boolean:function(h){const c=h.value,m=h.key,_=Br(c);return _!=="boolean"?[new Je(m,c,`boolean expected, ${_} found`)]:[]},number:Qs,color:function(h){const c=h.key,m=h.value,_=Br(m);return _!=="string"?[new Je(c,m,`color expected, ${_} found`)]:Tn.parse(String(m))?[]:[new Je(c,m,`color expected, "${m}" found`)]},constants:Gy,enum:_s,filter:Ou,function:Fd,layer:Kh,object:Js,source:sp,light:ya,sky:Bd,terrain:Ji,string:Ha,formatted:function(h){return Ha(h).length===0?[]:Ml(h)},resolvedImage:function(h){return Ha(h).length===0?[]:Ml(h)},padding:function(h){const c=h.key,m=h.value;if(Br(m)==="array"){if(m.length<1||m.length>4)return[new Je(c,m,`padding requires 1 to 4 values; ${m.length} values found`)];const _={type:"number"};let I=[];for(let N=0;N<m.length;N++)I=I.concat(h.validateSpec({key:`${c}[${N}]`,value:m[N],validateSpec:h.validateSpec,valueSpec:_}));return I}return Qs({key:c,value:m,valueSpec:{}})},variableAnchorOffsetCollection:function(h){const c=h.key,m=h.value,_=Br(m),I=h.styleSpec;if(_!=="array"||m.length<1||m.length%2!=0)return[new Je(c,m,"variableAnchorOffsetCollection requires a non-empty array of even length")];let N=[];for(let z=0;z<m.length;z+=2)N=N.concat(_s({key:`${c}[${z}]`,value:m[z],valueSpec:I.layout_symbol["text-anchor"]})),N=N.concat(nc({key:`${c}[${z+1}]`,value:m[z+1],valueSpec:{length:2,value:"number"},validateSpec:h.validateSpec,style:h.style,styleSpec:I}));return N},sprite:xo};function uo(h){const c=h.value,m=h.valueSpec,_=h.styleSpec;return h.validateSpec=uo,m.expression&&Sl(Zi(c))?Fd(h):m.expression&&Gr(ga(c))?Ml(h):m.type&&io[m.type]?io[m.type](h):Js(Yt({},h,{valueSpec:m.type?_[m.type]:m}))}function ic(h){const c=h.value,m=h.key,_=Ha(h);return _.length||(c.indexOf("{fontstack}")===-1&&_.push(new Je(m,c,'"glyphs" url must include a "{fontstack}" token')),c.indexOf("{range}")===-1&&_.push(new Je(m,c,'"glyphs" url must include a "{range}" token'))),_}function xs(h,c=We){let m=[];return m=m.concat(uo({key:"",value:h,valueSpec:c.$root,styleSpec:c,style:h,validateSpec:uo,objectElementValidators:{glyphs:ic,"*":()=>[]}})),h.constants&&(m=m.concat(Gy({key:"constants",value:h.constants,style:h,styleSpec:c,validateSpec:uo}))),Zo(m)}function oc(h){return function(c){return h({...c,validateSpec:uo})}}function Zo(h){return[].concat(h).sort((c,m)=>c.line-m.line)}function bs(h){return function(...c){return Zo(h.apply(this,c))}}xs.source=bs(oc(sp)),xs.sprite=bs(oc(xo)),xs.glyphs=bs(oc(ic)),xs.light=bs(oc(ya)),xs.sky=bs(oc(Bd)),xs.terrain=bs(oc(Ji)),xs.layer=bs(oc(Kh)),xs.filter=bs(oc(Ou)),xs.paintProperty=bs(oc(Xh)),xs.layoutProperty=bs(oc(Li));const Lu=xs,ap=Lu.light,Lc=Lu.paintProperty,Ga=Lu.layoutProperty;function Du(h,c){let m=!1;if(c&&c.length)for(const _ of c)h.fire(new vt(new Error(_.message))),m=!0;return m}class qa{constructor(c,m,_){const I=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;const z=new Int32Array(this.arrayBuffer);c=z[0],this.d=(m=z[1])+2*(_=z[2]);for(let Y=0;Y<this.d*this.d;Y++){const Z=z[3+Y],ne=z[3+Y+1];I.push(Z===ne?null:z.subarray(Z,ne))}const j=z[3+I.length+1];this.keys=z.subarray(z[3+I.length],j),this.bboxes=z.subarray(j),this.insert=this._insertReadonly}else{this.d=m+2*_;for(let z=0;z<this.d*this.d;z++)I.push([]);this.keys=[],this.bboxes=[]}this.n=m,this.extent=c,this.padding=_,this.scale=m/c,this.uid=0;const N=_/m*c;this.min=-N,this.max=c+N}insert(c,m,_,I,N){this._forEachCell(m,_,I,N,this._insertCell,this.uid++,void 0,void 0),this.keys.push(c),this.bboxes.push(m),this.bboxes.push(_),this.bboxes.push(I),this.bboxes.push(N)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(c,m,_,I,N,z){this.cells[N].push(z)}query(c,m,_,I,N){const z=this.min,j=this.max;if(c<=z&&m<=z&&j<=_&&j<=I&&!N)return Array.prototype.slice.call(this.keys);{const Y=[];return this._forEachCell(c,m,_,I,this._queryCell,Y,{},N),Y}}_queryCell(c,m,_,I,N,z,j,Y){const Z=this.cells[N];if(Z!==null){const ne=this.keys,ae=this.bboxes;for(let ye=0;ye<Z.length;ye++){const we=Z[ye];if(j[we]===void 0){const Me=4*we;(Y?Y(ae[Me+0],ae[Me+1],ae[Me+2],ae[Me+3]):c<=ae[Me+2]&&m<=ae[Me+3]&&_>=ae[Me+0]&&I>=ae[Me+1])?(j[we]=!0,z.push(ne[we])):j[we]=!1}}}}_forEachCell(c,m,_,I,N,z,j,Y){const Z=this._convertToCellCoord(c),ne=this._convertToCellCoord(m),ae=this._convertToCellCoord(_),ye=this._convertToCellCoord(I);for(let we=Z;we<=ae;we++)for(let Me=ne;Me<=ye;Me++){const Re=this.d*Me+we;if((!Y||Y(this._convertFromCellCoord(we),this._convertFromCellCoord(Me),this._convertFromCellCoord(we+1),this._convertFromCellCoord(Me+1)))&&N.call(this,c,m,_,I,Re,z,j,Y))return}}_convertFromCellCoord(c){return(c-this.padding)/this.scale}_convertToCellCoord(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const c=this.cells,m=3+this.cells.length+1+1;let _=0;for(let z=0;z<this.cells.length;z++)_+=this.cells[z].length;const I=new Int32Array(m+_+this.keys.length+this.bboxes.length);I[0]=this.extent,I[1]=this.n,I[2]=this.padding;let N=m;for(let z=0;z<c.length;z++){const j=c[z];I[3+z]=N,I.set(j,N),N+=j.length}return I[3+c.length]=N,I.set(this.keys,N),N+=this.keys.length,I[3+c.length+1]=N,I.set(this.bboxes,N),N+=this.bboxes.length,I.buffer}static serialize(c,m){const _=c.toArrayBuffer();return m&&m.push(_),{buffer:_}}static deserialize(c){return new qa(c.buffer)}}const El={};function wn(h,c,m={}){if(El[h])throw new Error(`${h} is already registered.`);Object.defineProperty(c,"_classRegistryKey",{value:h,writeable:!1}),El[h]={klass:c,omit:m.omit||[],shallow:m.shallow||[]}}wn("Object",Object),wn("TransferableGridIndex",qa),wn("Color",Tn),wn("Error",Error),wn("AJAXError",Lt),wn("ResolvedImage",qn),wn("StylePropertyFunction",vs),wn("StyleExpression",ma,{omit:["_evaluator"]}),wn("ZoomDependentExpression",Gh),wn("ZoomConstantExpression",ku),wn("CompoundExpression",ja,{omit:["_evaluate"]});for(const h in Rc)Rc[h]._classRegistryKey||wn(`Expression_${h}`,Rc[h]);function Wm(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function Nu(h,c){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||h instanceof Error)return h;if(Wm(h)||ie(h))return c&&c.push(h),h;if(ArrayBuffer.isView(h)){const m=h;return c&&c.push(m.buffer),m}if(h instanceof ImageData)return c&&c.push(h.data.buffer),h;if(Array.isArray(h)){const m=[];for(const _ of h)m.push(Nu(_,c));return m}if(typeof h=="object"){const m=h.constructor,_=m._classRegistryKey;if(!_)throw new Error(`can't serialize object of unregistered class ${m.name}`);if(!El[_])throw new Error(`${_} is not registered.`);const I=m.serialize?m.serialize(h,c):{};if(m.serialize){if(c&&I===c[c.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const N in h){if(!h.hasOwnProperty(N)||El[_].omit.indexOf(N)>=0)continue;const z=h[N];I[N]=El[_].shallow.indexOf(N)>=0?z:Nu(z,c)}h instanceof Error&&(I.message=h.message)}if(I.$name)throw new Error("$name property is reserved for worker serialization logic.");return _!=="Object"&&(I.$name=_),I}throw new Error("can't serialize object of type "+typeof h)}function $d(h){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||h instanceof Error||Wm(h)||ie(h)||ArrayBuffer.isView(h)||h instanceof ImageData)return h;if(Array.isArray(h))return h.map($d);if(typeof h=="object"){const c=h.$name||"Object";if(!El[c])throw new Error(`can't deserialize unregistered class ${c}`);const{klass:m}=El[c];if(!m)throw new Error(`can't deserialize unregistered class ${c}`);if(m.deserialize)return m.deserialize(h);const _=Object.create(m.prototype);for(const I of Object.keys(h)){if(I==="$name")continue;const N=h[I];_[I]=El[c].shallow.indexOf(I)>=0?N:$d(N)}return _}throw new Error("can't deserialize object of type "+typeof h)}class Hm{constructor(){this.first=!0}update(c,m){const _=Math.floor(c);return this.first?(this.first=!1,this.lastIntegerZoom=_,this.lastIntegerZoomTime=0,this.lastZoom=c,this.lastFloorZoom=_,!0):(this.lastFloorZoom>_?(this.lastIntegerZoom=_+1,this.lastIntegerZoomTime=m):this.lastFloorZoom<_&&(this.lastIntegerZoom=_,this.lastIntegerZoomTime=m),c!==this.lastZoom&&(this.lastZoom=c,this.lastFloorZoom=_,!0))}}const yn={"Latin-1 Supplement":h=>h>=128&&h<=255,Arabic:h=>h>=1536&&h<=1791,"Arabic Supplement":h=>h>=1872&&h<=1919,"Arabic Extended-A":h=>h>=2208&&h<=2303,"Hangul Jamo":h=>h>=4352&&h<=4607,"Unified Canadian Aboriginal Syllabics":h=>h>=5120&&h<=5759,Khmer:h=>h>=6016&&h<=6143,"Unified Canadian Aboriginal Syllabics Extended":h=>h>=6320&&h<=6399,"General Punctuation":h=>h>=8192&&h<=8303,"Letterlike Symbols":h=>h>=8448&&h<=8527,"Number Forms":h=>h>=8528&&h<=8591,"Miscellaneous Technical":h=>h>=8960&&h<=9215,"Control Pictures":h=>h>=9216&&h<=9279,"Optical Character Recognition":h=>h>=9280&&h<=9311,"Enclosed Alphanumerics":h=>h>=9312&&h<=9471,"Geometric Shapes":h=>h>=9632&&h<=9727,"Miscellaneous Symbols":h=>h>=9728&&h<=9983,"Miscellaneous Symbols and Arrows":h=>h>=11008&&h<=11263,"CJK Radicals Supplement":h=>h>=11904&&h<=12031,"Kangxi Radicals":h=>h>=12032&&h<=12255,"Ideographic Description Characters":h=>h>=12272&&h<=12287,"CJK Symbols and Punctuation":h=>h>=12288&&h<=12351,Hiragana:h=>h>=12352&&h<=12447,Katakana:h=>h>=12448&&h<=12543,Bopomofo:h=>h>=12544&&h<=12591,"Hangul Compatibility Jamo":h=>h>=12592&&h<=12687,Kanbun:h=>h>=12688&&h<=12703,"Bopomofo Extended":h=>h>=12704&&h<=12735,"CJK Strokes":h=>h>=12736&&h<=12783,"Katakana Phonetic Extensions":h=>h>=12784&&h<=12799,"Enclosed CJK Letters and Months":h=>h>=12800&&h<=13055,"CJK Compatibility":h=>h>=13056&&h<=13311,"CJK Unified Ideographs Extension A":h=>h>=13312&&h<=19903,"Yijing Hexagram Symbols":h=>h>=19904&&h<=19967,"CJK Unified Ideographs":h=>h>=19968&&h<=40959,"Yi Syllables":h=>h>=40960&&h<=42127,"Yi Radicals":h=>h>=42128&&h<=42191,"Hangul Jamo Extended-A":h=>h>=43360&&h<=43391,"Hangul Syllables":h=>h>=44032&&h<=55215,"Hangul Jamo Extended-B":h=>h>=55216&&h<=55295,"Private Use Area":h=>h>=57344&&h<=63743,"CJK Compatibility Ideographs":h=>h>=63744&&h<=64255,"Arabic Presentation Forms-A":h=>h>=64336&&h<=65023,"Vertical Forms":h=>h>=65040&&h<=65055,"CJK Compatibility Forms":h=>h>=65072&&h<=65103,"Small Form Variants":h=>h>=65104&&h<=65135,"Arabic Presentation Forms-B":h=>h>=65136&&h<=65279,"Halfwidth and Fullwidth Forms":h=>h>=65280&&h<=65519};function jd(h){for(const c of h)if(Ud(c.charCodeAt(0)))return!0;return!1}function zu(h){for(const c of h)if(!qy(c.charCodeAt(0)))return!1;return!0}function qy(h){return!(yn.Arabic(h)||yn["Arabic Supplement"](h)||yn["Arabic Extended-A"](h)||yn["Arabic Presentation Forms-A"](h)||yn["Arabic Presentation Forms-B"](h))}function Ud(h){return!(h!==746&&h!==747&&(h<4352||!(yn["Bopomofo Extended"](h)||yn.Bopomofo(h)||yn["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||yn["CJK Compatibility Ideographs"](h)||yn["CJK Compatibility"](h)||yn["CJK Radicals Supplement"](h)||yn["CJK Strokes"](h)||!(!yn["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||yn["CJK Unified Ideographs Extension A"](h)||yn["CJK Unified Ideographs"](h)||yn["Enclosed CJK Letters and Months"](h)||yn["Hangul Compatibility Jamo"](h)||yn["Hangul Jamo Extended-A"](h)||yn["Hangul Jamo Extended-B"](h)||yn["Hangul Jamo"](h)||yn["Hangul Syllables"](h)||yn.Hiragana(h)||yn["Ideographic Description Characters"](h)||yn.Kanbun(h)||yn["Kangxi Radicals"](h)||yn["Katakana Phonetic Extensions"](h)||yn.Katakana(h)&&h!==12540||!(!yn["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!yn["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||yn["Unified Canadian Aboriginal Syllabics"](h)||yn["Unified Canadian Aboriginal Syllabics Extended"](h)||yn["Vertical Forms"](h)||yn["Yijing Hexagram Symbols"](h)||yn["Yi Syllables"](h)||yn["Yi Radicals"](h))))}function Zh(h){return!(Ud(h)||function(c){return!!(yn["Latin-1 Supplement"](c)&&(c===167||c===169||c===174||c===177||c===188||c===189||c===190||c===215||c===247)||yn["General Punctuation"](c)&&(c===8214||c===8224||c===8225||c===8240||c===8241||c===8251||c===8252||c===8258||c===8263||c===8264||c===8265||c===8273)||yn["Letterlike Symbols"](c)||yn["Number Forms"](c)||yn["Miscellaneous Technical"](c)&&(c>=8960&&c<=8967||c>=8972&&c<=8991||c>=8996&&c<=9e3||c===9003||c>=9085&&c<=9114||c>=9150&&c<=9165||c===9167||c>=9169&&c<=9179||c>=9186&&c<=9215)||yn["Control Pictures"](c)&&c!==9251||yn["Optical Character Recognition"](c)||yn["Enclosed Alphanumerics"](c)||yn["Geometric Shapes"](c)||yn["Miscellaneous Symbols"](c)&&!(c>=9754&&c<=9759)||yn["Miscellaneous Symbols and Arrows"](c)&&(c>=11026&&c<=11055||c>=11088&&c<=11097||c>=11192&&c<=11243)||yn["CJK Symbols and Punctuation"](c)||yn.Katakana(c)||yn["Private Use Area"](c)||yn["CJK Compatibility Forms"](c)||yn["Small Form Variants"](c)||yn["Halfwidth and Fullwidth Forms"](c)||c===8734||c===8756||c===8757||c>=9984&&c<=10087||c>=10102&&c<=10131||c===65532||c===65533)}(h))}function lp(h){return h>=1424&&h<=2303||yn["Arabic Presentation Forms-A"](h)||yn["Arabic Presentation Forms-B"](h)}function Vd(h,c){return!(!c&&lp(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||yn.Khmer(h))}function Yy(h){for(const c of h)if(lp(c.charCodeAt(0)))return!0;return!1}const Fu=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(h){this.pluginStatus=h.pluginStatus,this.pluginURL=h.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(h){this.applyArabicShaping=h.applyArabicShaping,this.processBidirectionalText=h.processBidirectionalText,this.processStyledBidirectionalText=h.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Mi{constructor(c,m){this.zoom=c,m?(this.now=m.now,this.fadeDuration=m.fadeDuration,this.zoomHistory=m.zoomHistory,this.transition=m.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Hm,this.transition={})}isSupportedScript(c){return function(m,_){for(const I of m)if(!Vd(I.charCodeAt(0),_))return!1;return!0}(c,Fu.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const c=this.zoom,m=c-Math.floor(c),_=this.crossFadingFactor();return c>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:m+(1-m)*_}:{fromScale:.5,toScale:1,t:1-(1-_)*m}}}class cp{constructor(c,m){this.property=c,this.value=m,this.expression=function(_,I){if(Sl(_))return new vs(_,I);if(Gr(_)){const N=Zs(_,I);if(N.result==="error")throw new Error(N.value.map(z=>`${z.key}: ${z.message}`).join(", "));return N.value}{let N=_;return I.type==="color"&&typeof _=="string"?N=Tn.parse(_):I.type!=="padding"||typeof _!="number"&&!Array.isArray(_)?I.type==="variableAnchorOffsetCollection"&&Array.isArray(_)&&(N=Vr.parse(_)):N=li.parse(_),{kind:"constant",evaluate:()=>N}}}(m===void 0?c.specification.default:m,c.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(c,m,_){return this.property.possiblyEvaluate(this,c,m,_)}}class Jh{constructor(c){this.property=c,this.value=new cp(c,void 0)}transitioned(c,m){return new qm(this.property,this.value,m,B({},c.transition,this.transition),c.now)}untransitioned(){return new qm(this.property,this.value,null,{},0)}}class Gm{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitionablePropertyValues)}getValue(c){return X(this._values[c].value.value)}setValue(c,m){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new Jh(this._values[c].property)),this._values[c].value=new cp(this._values[c].property,m===null?void 0:X(m))}getTransition(c){return X(this._values[c].transition)}setTransition(c,m){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new Jh(this._values[c].property)),this._values[c].transition=X(m)||void 0}serialize(){const c={};for(const m of Object.keys(this._values)){const _=this.getValue(m);_!==void 0&&(c[m]=_);const I=this.getTransition(m);I!==void 0&&(c[`${m}-transition`]=I)}return c}transitioned(c,m){const _=new Z0(this._properties);for(const I of Object.keys(this._values))_._values[I]=this._values[I].transitioned(c,m._values[I]);return _}untransitioned(){const c=new Z0(this._properties);for(const m of Object.keys(this._values))c._values[m]=this._values[m].untransitioned();return c}}class qm{constructor(c,m,_,I,N){this.property=c,this.value=m,this.begin=N+I.delay||0,this.end=this.begin+I.duration||0,c.specification.transition&&(I.delay||I.duration)&&(this.prior=_)}possiblyEvaluate(c,m,_){const I=c.now||0,N=this.value.possiblyEvaluate(c,m,_),z=this.prior;if(z){if(I>this.end)return this.prior=null,N;if(this.value.isDataDriven())return this.prior=null,N;if(I<this.begin)return z.possiblyEvaluate(c,m,_);{const j=(I-this.begin)/(this.end-this.begin);return this.property.interpolate(z.possiblyEvaluate(c,m,_),N,function(Y){if(Y<=0)return 0;if(Y>=1)return 1;const Z=Y*Y,ne=Z*Y;return 4*(Y<.5?ne:3*(Y-Z)+ne-.75)}(j))}}return N}}class Z0{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitioningPropertyValues)}possiblyEvaluate(c,m,_){const I=new up(this._properties);for(const N of Object.keys(this._values))I._values[N]=this._values[N].possiblyEvaluate(c,m,_);return I}hasTransition(){for(const c of Object.keys(this._values))if(this._values[c].prior)return!0;return!1}}class J0{constructor(c){this._properties=c,this._values=Object.create(c.defaultPropertyValues)}hasValue(c){return this._values[c].value!==void 0}getValue(c){return X(this._values[c].value)}setValue(c,m){this._values[c]=new cp(this._values[c].property,m===null?void 0:X(m))}serialize(){const c={};for(const m of Object.keys(this._values)){const _=this.getValue(m);_!==void 0&&(c[m]=_)}return c}possiblyEvaluate(c,m,_){const I=new up(this._properties);for(const N of Object.keys(this._values))I._values[N]=this._values[N].possiblyEvaluate(c,m,_);return I}}class Tl{constructor(c,m,_){this.property=c,this.value=m,this.parameters=_}isConstant(){return this.value.kind==="constant"}constantOr(c){return this.value.kind==="constant"?this.value.value:c}evaluate(c,m,_,I){return this.property.evaluate(this.value,this.parameters,c,m,_,I)}}class up{constructor(c){this._properties=c,this._values=Object.create(c.defaultPossiblyEvaluatedValues)}get(c){return this._values[c]}}class On{constructor(c){this.specification=c}possiblyEvaluate(c,m){if(c.isDataDriven())throw new Error("Value should not be data driven");return c.expression.evaluate(m)}interpolate(c,m,_){const I=Rs[this.specification.type];return I?I(c,m,_):c}}class Xn{constructor(c,m){this.specification=c,this.overrides=m}possiblyEvaluate(c,m,_,I){return new Tl(this,c.expression.kind==="constant"||c.expression.kind==="camera"?{kind:"constant",value:c.expression.evaluate(m,null,{},_,I)}:c.expression,m)}interpolate(c,m,_){if(c.value.kind!=="constant"||m.value.kind!=="constant")return c;if(c.value.value===void 0||m.value.value===void 0)return new Tl(this,{kind:"constant",value:void 0},c.parameters);const I=Rs[this.specification.type];if(I){const N=I(c.value.value,m.value.value,_);return new Tl(this,{kind:"constant",value:N},c.parameters)}return c}evaluate(c,m,_,I,N,z){return c.kind==="constant"?c.value:c.evaluate(m,_,I,N,z)}}class Bu extends Xn{possiblyEvaluate(c,m,_,I){if(c.value===void 0)return new Tl(this,{kind:"constant",value:void 0},m);if(c.expression.kind==="constant"){const N=c.expression.evaluate(m,null,{},_,I),z=c.property.specification.type==="resolvedImage"&&typeof N!="string"?N.name:N,j=this._calculate(z,z,z,m);return new Tl(this,{kind:"constant",value:j},m)}if(c.expression.kind==="camera"){const N=this._calculate(c.expression.evaluate({zoom:m.zoom-1}),c.expression.evaluate({zoom:m.zoom}),c.expression.evaluate({zoom:m.zoom+1}),m);return new Tl(this,{kind:"constant",value:N},m)}return new Tl(this,c.expression,m)}evaluate(c,m,_,I,N,z){if(c.kind==="source"){const j=c.evaluate(m,_,I,N,z);return this._calculate(j,j,j,m)}return c.kind==="composite"?this._calculate(c.evaluate({zoom:Math.floor(m.zoom)-1},_,I),c.evaluate({zoom:Math.floor(m.zoom)},_,I),c.evaluate({zoom:Math.floor(m.zoom)+1},_,I),m):c.value}_calculate(c,m,_,I){return I.zoom>I.zoomHistory.lastIntegerZoom?{from:c,to:m}:{from:_,to:m}}interpolate(c){return c}}class Ym{constructor(c){this.specification=c}possiblyEvaluate(c,m,_,I){if(c.value!==void 0){if(c.expression.kind==="constant"){const N=c.expression.evaluate(m,null,{},_,I);return this._calculate(N,N,N,m)}return this._calculate(c.expression.evaluate(new Mi(Math.floor(m.zoom-1),m)),c.expression.evaluate(new Mi(Math.floor(m.zoom),m)),c.expression.evaluate(new Mi(Math.floor(m.zoom+1),m)),m)}}_calculate(c,m,_,I){return I.zoom>I.zoomHistory.lastIntegerZoom?{from:c,to:m}:{from:_,to:m}}interpolate(c){return c}}class $u{constructor(c){this.specification=c}possiblyEvaluate(c,m,_,I){return!!c.expression.evaluate(m,null,{},_,I)}interpolate(){return!1}}class ea{constructor(c){this.properties=c,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const m in c){const _=c[m];_.specification.overridable&&this.overridableProperties.push(m);const I=this.defaultPropertyValues[m]=new cp(_,void 0),N=this.defaultTransitionablePropertyValues[m]=new Jh(_);this.defaultTransitioningPropertyValues[m]=N.untransitioned(),this.defaultPossiblyEvaluatedValues[m]=I.possiblyEvaluate({})}}}wn("DataDrivenProperty",Xn),wn("DataConstantProperty",On),wn("CrossFadedDataDrivenProperty",Bu),wn("CrossFadedProperty",Ym),wn("ColorRampProperty",$u);const Q0="-transition";class Cl extends Tt{constructor(c,m){if(super(),this.id=c.id,this.type=c.type,this._featureFilter={filter:()=>!0,needGeometry:!1},c.type!=="custom"&&(this.metadata=c.metadata,this.minzoom=c.minzoom,this.maxzoom=c.maxzoom,c.type!=="background"&&(this.source=c.source,this.sourceLayer=c["source-layer"],this.filter=c.filter),m.layout&&(this._unevaluatedLayout=new J0(m.layout)),m.paint)){this._transitionablePaint=new Gm(m.paint);for(const _ in c.paint)this.setPaintProperty(_,c.paint[_],{validate:!1});for(const _ in c.layout)this.setLayoutProperty(_,c.layout[_],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new up(m.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(c){return c==="visibility"?this.visibility:this._unevaluatedLayout.getValue(c)}setLayoutProperty(c,m,_={}){m!=null&&this._validate(Ga,`layers.${this.id}.layout.${c}`,c,m,_)||(c!=="visibility"?this._unevaluatedLayout.setValue(c,m):this.visibility=m)}getPaintProperty(c){return c.endsWith(Q0)?this._transitionablePaint.getTransition(c.slice(0,-11)):this._transitionablePaint.getValue(c)}setPaintProperty(c,m,_={}){if(m!=null&&this._validate(Lc,`layers.${this.id}.paint.${c}`,c,m,_))return!1;if(c.endsWith(Q0))return this._transitionablePaint.setTransition(c.slice(0,-11),m||void 0),!1;{const I=this._transitionablePaint._values[c],N=I.property.specification["property-type"]==="cross-faded-data-driven",z=I.value.isDataDriven(),j=I.value;this._transitionablePaint.setValue(c,m),this._handleSpecialPaintPropertyUpdate(c);const Y=this._transitionablePaint._values[c].value;return Y.isDataDriven()||z||N||this._handleOverridablePaintPropertyUpdate(c,j,Y)}}_handleSpecialPaintPropertyUpdate(c){}_handleOverridablePaintPropertyUpdate(c,m,_){return!1}isHidden(c){return!!(this.minzoom&&c<this.minzoom)||!!(this.maxzoom&&c>=this.maxzoom)||this.visibility==="none"}updateTransitions(c){this._transitioningPaint=this._transitionablePaint.transitioned(c,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(c,m){c.getCrossfadeParameters&&(this._crossfadeParameters=c.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(c,void 0,m)),this.paint=this._transitioningPaint.possiblyEvaluate(c,void 0,m)}serialize(){const c={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(c.layout=c.layout||{},c.layout.visibility=this.visibility),V(c,(m,_)=>!(m===void 0||_==="layout"&&!Object.keys(m).length||_==="paint"&&!Object.keys(m).length))}_validate(c,m,_,I,N={}){return(!N||N.validate!==!1)&&Du(this,c.call(Lu,{key:m,layerType:this.type,objectKey:_,value:I,styleSpec:We,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const c in this.paint._values){const m=this.paint.get(c);if(m instanceof Tl&&Ld(m.property.specification)&&(m.value.kind==="source"||m.value.kind==="composite")&&m.value.isStateDependent)return!0}return!1}}const Xm={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ju{constructor(c,m){this._structArray=c,this._pos1=m*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Qi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(c,m){return c._trim(),m&&(c.isTransferred=!0,m.push(c.arrayBuffer)),{length:c.length,arrayBuffer:c.arrayBuffer}}static deserialize(c){const m=Object.create(this.prototype);return m.arrayBuffer=c.arrayBuffer,m.length=c.length,m.capacity=c.arrayBuffer.byteLength/m.bytesPerElement,m._refreshViews(),m}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(c){this.reserve(c),this.length=c}reserve(c){if(c>this.capacity){this.capacity=Math.max(c,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const m=this.uint8;this._refreshViews(),m&&this.uint8.set(m)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function oo(h,c=1){let m=0,_=0;return{members:h.map(I=>{const N=Xm[I.type].BYTES_PER_ELEMENT,z=m=Xy(m,Math.max(c,N)),j=I.components||1;return _=Math.max(_,N),m+=N*j,{name:I.name,type:I.type,components:j,offset:z}}),size:Xy(m,Math.max(_,c)),alignment:c}}function Xy(h,c){return Math.ceil(h/c)*c}class Qh extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m){const _=this.length;return this.resize(_+1),this.emplace(_,c,m)}emplace(c,m,_){const I=2*c;return this.int16[I+0]=m,this.int16[I+1]=_,c}}Qh.prototype.bytesPerElement=4,wn("StructArrayLayout2i4",Qh);class dp extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,_){const I=this.length;return this.resize(I+1),this.emplace(I,c,m,_)}emplace(c,m,_,I){const N=3*c;return this.int16[N+0]=m,this.int16[N+1]=_,this.int16[N+2]=I,c}}dp.prototype.bytesPerElement=6,wn("StructArrayLayout3i6",dp);class Dc extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,_,I){const N=this.length;return this.resize(N+1),this.emplace(N,c,m,_,I)}emplace(c,m,_,I,N){const z=4*c;return this.int16[z+0]=m,this.int16[z+1]=_,this.int16[z+2]=I,this.int16[z+3]=N,c}}Dc.prototype.bytesPerElement=8,wn("StructArrayLayout4i8",Dc);class Ya extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,_,I,N,z){const j=this.length;return this.resize(j+1),this.emplace(j,c,m,_,I,N,z)}emplace(c,m,_,I,N,z,j){const Y=6*c;return this.int16[Y+0]=m,this.int16[Y+1]=_,this.int16[Y+2]=I,this.int16[Y+3]=N,this.int16[Y+4]=z,this.int16[Y+5]=j,c}}Ya.prototype.bytesPerElement=12,wn("StructArrayLayout2i4i12",Ya);class Km extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,_,I,N,z){const j=this.length;return this.resize(j+1),this.emplace(j,c,m,_,I,N,z)}emplace(c,m,_,I,N,z,j){const Y=4*c,Z=8*c;return this.int16[Y+0]=m,this.int16[Y+1]=_,this.uint8[Z+4]=I,this.uint8[Z+5]=N,this.uint8[Z+6]=z,this.uint8[Z+7]=j,c}}Km.prototype.bytesPerElement=8,wn("StructArrayLayout2i4ub8",Km);class Nc extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m){const _=this.length;return this.resize(_+1),this.emplace(_,c,m)}emplace(c,m,_){const I=2*c;return this.float32[I+0]=m,this.float32[I+1]=_,c}}Nc.prototype.bytesPerElement=8,wn("StructArrayLayout2f8",Nc);class Wd extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m,_,I,N,z,j,Y,Z,ne){const ae=this.length;return this.resize(ae+1),this.emplace(ae,c,m,_,I,N,z,j,Y,Z,ne)}emplace(c,m,_,I,N,z,j,Y,Z,ne,ae){const ye=10*c;return this.uint16[ye+0]=m,this.uint16[ye+1]=_,this.uint16[ye+2]=I,this.uint16[ye+3]=N,this.uint16[ye+4]=z,this.uint16[ye+5]=j,this.uint16[ye+6]=Y,this.uint16[ye+7]=Z,this.uint16[ye+8]=ne,this.uint16[ye+9]=ae,c}}Wd.prototype.bytesPerElement=20,wn("StructArrayLayout10ui20",Wd);class Hd extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m,_,I,N,z,j,Y,Z,ne,ae,ye){const we=this.length;return this.resize(we+1),this.emplace(we,c,m,_,I,N,z,j,Y,Z,ne,ae,ye)}emplace(c,m,_,I,N,z,j,Y,Z,ne,ae,ye,we){const Me=12*c;return this.int16[Me+0]=m,this.int16[Me+1]=_,this.int16[Me+2]=I,this.int16[Me+3]=N,this.uint16[Me+4]=z,this.uint16[Me+5]=j,this.uint16[Me+6]=Y,this.uint16[Me+7]=Z,this.int16[Me+8]=ne,this.int16[Me+9]=ae,this.int16[Me+10]=ye,this.int16[Me+11]=we,c}}Hd.prototype.bytesPerElement=24,wn("StructArrayLayout4i4ui4i24",Hd);class ef extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,_){const I=this.length;return this.resize(I+1),this.emplace(I,c,m,_)}emplace(c,m,_,I){const N=3*c;return this.float32[N+0]=m,this.float32[N+1]=_,this.float32[N+2]=I,c}}ef.prototype.bytesPerElement=12,wn("StructArrayLayout3f12",ef);class Zm extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(c){const m=this.length;return this.resize(m+1),this.emplace(m,c)}emplace(c,m){return this.uint32[1*c+0]=m,c}}Zm.prototype.bytesPerElement=4,wn("StructArrayLayout1ul4",Zm);class va extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m,_,I,N,z,j,Y,Z){const ne=this.length;return this.resize(ne+1),this.emplace(ne,c,m,_,I,N,z,j,Y,Z)}emplace(c,m,_,I,N,z,j,Y,Z,ne){const ae=10*c,ye=5*c;return this.int16[ae+0]=m,this.int16[ae+1]=_,this.int16[ae+2]=I,this.int16[ae+3]=N,this.int16[ae+4]=z,this.int16[ae+5]=j,this.uint32[ye+3]=Y,this.uint16[ae+8]=Z,this.uint16[ae+9]=ne,c}}va.prototype.bytesPerElement=20,wn("StructArrayLayout6i1ul2ui20",va);class Ro extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,_,I,N,z){const j=this.length;return this.resize(j+1),this.emplace(j,c,m,_,I,N,z)}emplace(c,m,_,I,N,z,j){const Y=6*c;return this.int16[Y+0]=m,this.int16[Y+1]=_,this.int16[Y+2]=I,this.int16[Y+3]=N,this.int16[Y+4]=z,this.int16[Y+5]=j,c}}Ro.prototype.bytesPerElement=12,wn("StructArrayLayout2i2i2i12",Ro);class hp extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,_,I,N){const z=this.length;return this.resize(z+1),this.emplace(z,c,m,_,I,N)}emplace(c,m,_,I,N,z){const j=4*c,Y=8*c;return this.float32[j+0]=m,this.float32[j+1]=_,this.float32[j+2]=I,this.int16[Y+6]=N,this.int16[Y+7]=z,c}}hp.prototype.bytesPerElement=16,wn("StructArrayLayout2f1f2i16",hp);class Jm extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,_,I){const N=this.length;return this.resize(N+1),this.emplace(N,c,m,_,I)}emplace(c,m,_,I,N){const z=12*c,j=3*c;return this.uint8[z+0]=m,this.uint8[z+1]=_,this.float32[j+1]=I,this.float32[j+2]=N,c}}Jm.prototype.bytesPerElement=12,wn("StructArrayLayout2ub2f12",Jm);class $o extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m,_){const I=this.length;return this.resize(I+1),this.emplace(I,c,m,_)}emplace(c,m,_,I){const N=3*c;return this.uint16[N+0]=m,this.uint16[N+1]=_,this.uint16[N+2]=I,c}}$o.prototype.bytesPerElement=6,wn("StructArrayLayout3ui6",$o);class Jo extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,_,I,N,z,j,Y,Z,ne,ae,ye,we,Me,Re,$e,Ke){const _t=this.length;return this.resize(_t+1),this.emplace(_t,c,m,_,I,N,z,j,Y,Z,ne,ae,ye,we,Me,Re,$e,Ke)}emplace(c,m,_,I,N,z,j,Y,Z,ne,ae,ye,we,Me,Re,$e,Ke,_t){const Qe=24*c,ut=12*c,Ft=48*c;return this.int16[Qe+0]=m,this.int16[Qe+1]=_,this.uint16[Qe+2]=I,this.uint16[Qe+3]=N,this.uint32[ut+2]=z,this.uint32[ut+3]=j,this.uint32[ut+4]=Y,this.uint16[Qe+10]=Z,this.uint16[Qe+11]=ne,this.uint16[Qe+12]=ae,this.float32[ut+7]=ye,this.float32[ut+8]=we,this.uint8[Ft+36]=Me,this.uint8[Ft+37]=Re,this.uint8[Ft+38]=$e,this.uint32[ut+10]=Ke,this.int16[Qe+22]=_t,c}}Jo.prototype.bytesPerElement=48,wn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Jo);class Gd extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,_,I,N,z,j,Y,Z,ne,ae,ye,we,Me,Re,$e,Ke,_t,Qe,ut,Ft,Ht,_n,Ln,vn,mn,ln,An){const hn=this.length;return this.resize(hn+1),this.emplace(hn,c,m,_,I,N,z,j,Y,Z,ne,ae,ye,we,Me,Re,$e,Ke,_t,Qe,ut,Ft,Ht,_n,Ln,vn,mn,ln,An)}emplace(c,m,_,I,N,z,j,Y,Z,ne,ae,ye,we,Me,Re,$e,Ke,_t,Qe,ut,Ft,Ht,_n,Ln,vn,mn,ln,An,hn){const rn=32*c,Kn=16*c;return this.int16[rn+0]=m,this.int16[rn+1]=_,this.int16[rn+2]=I,this.int16[rn+3]=N,this.int16[rn+4]=z,this.int16[rn+5]=j,this.int16[rn+6]=Y,this.int16[rn+7]=Z,this.uint16[rn+8]=ne,this.uint16[rn+9]=ae,this.uint16[rn+10]=ye,this.uint16[rn+11]=we,this.uint16[rn+12]=Me,this.uint16[rn+13]=Re,this.uint16[rn+14]=$e,this.uint16[rn+15]=Ke,this.uint16[rn+16]=_t,this.uint16[rn+17]=Qe,this.uint16[rn+18]=ut,this.uint16[rn+19]=Ft,this.uint16[rn+20]=Ht,this.uint16[rn+21]=_n,this.uint16[rn+22]=Ln,this.uint32[Kn+12]=vn,this.float32[Kn+13]=mn,this.float32[Kn+14]=ln,this.uint16[rn+30]=An,this.uint16[rn+31]=hn,c}}Gd.prototype.bytesPerElement=64,wn("StructArrayLayout8i15ui1ul2f2ui64",Gd);class zc extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c){const m=this.length;return this.resize(m+1),this.emplace(m,c)}emplace(c,m){return this.float32[1*c+0]=m,c}}zc.prototype.bytesPerElement=4,wn("StructArrayLayout1f4",zc);class Qm extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,_){const I=this.length;return this.resize(I+1),this.emplace(I,c,m,_)}emplace(c,m,_,I){const N=3*c;return this.uint16[6*c+0]=m,this.float32[N+1]=_,this.float32[N+2]=I,c}}Qm.prototype.bytesPerElement=12,wn("StructArrayLayout1ui2f12",Qm);class fp extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m,_){const I=this.length;return this.resize(I+1),this.emplace(I,c,m,_)}emplace(c,m,_,I){const N=4*c;return this.uint32[2*c+0]=m,this.uint16[N+2]=_,this.uint16[N+3]=I,c}}fp.prototype.bytesPerElement=8,wn("StructArrayLayout1ul2ui8",fp);class Uu extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m){const _=this.length;return this.resize(_+1),this.emplace(_,c,m)}emplace(c,m,_){const I=2*c;return this.uint16[I+0]=m,this.uint16[I+1]=_,c}}Uu.prototype.bytesPerElement=4,wn("StructArrayLayout2ui4",Uu);class pp extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c){const m=this.length;return this.resize(m+1),this.emplace(m,c)}emplace(c,m){return this.uint16[1*c+0]=m,c}}pp.prototype.bytesPerElement=2,wn("StructArrayLayout1ui2",pp);class eg extends Qi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,_,I){const N=this.length;return this.resize(N+1),this.emplace(N,c,m,_,I)}emplace(c,m,_,I,N){const z=4*c;return this.float32[z+0]=m,this.float32[z+1]=_,this.float32[z+2]=I,this.float32[z+3]=N,c}}eg.prototype.bytesPerElement=16,wn("StructArrayLayout4f16",eg);class mp extends ju{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new p(this.anchorPointX,this.anchorPointY)}}mp.prototype.size=20;class Ky extends va{get(c){return new mp(this,c)}}wn("CollisionBoxArray",Ky);class R extends ju{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(c){this._structArray.uint8[this._pos1+37]=c}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(c){this._structArray.uint8[this._pos1+38]=c}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(c){this._structArray.uint32[this._pos4+10]=c}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}R.prototype.size=48;class u extends Jo{get(c){return new R(this,c)}}wn("PlacedSymbolArray",u);class y extends ju{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(c){this._structArray.uint32[this._pos4+12]=c}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}y.prototype.size=64;class A extends Gd{get(c){return new y(this,c)}}wn("SymbolInstanceArray",A);class P extends zc{getoffsetX(c){return this.float32[1*c+0]}}wn("GlyphOffsetArray",P);class L extends dp{getx(c){return this.int16[3*c+0]}gety(c){return this.int16[3*c+1]}gettileUnitDistanceFromAnchor(c){return this.int16[3*c+2]}}wn("SymbolLineVertexArray",L);class H extends ju{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}H.prototype.size=12;class q extends Qm{get(c){return new H(this,c)}}wn("TextAnchorOffsetArray",q);class K extends ju{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}K.prototype.size=8;class te extends fp{get(c){return new K(this,c)}}wn("FeatureIndexArray",te);class le extends Qh{}class de extends Qh{}class Se extends Qh{}class ze extends Ya{}class De extends Km{}class Be extends Nc{}class ke extends Wd{}class Le extends Hd{}class Et extends ef{}class He extends Zm{}class ct extends Ro{}class Pt extends Jm{}class Ct extends $o{}class Ot extends Uu{}const Zt=oo([{name:"a_pos",components:2,type:"Int16"}],4),{members:Gt}=Zt;class Kt{constructor(c=[]){this.segments=c}prepareSegment(c,m,_,I){let N=this.segments[this.segments.length-1];return c>Kt.MAX_VERTEX_ARRAY_LENGTH&&pe(`Max vertices per segment is ${Kt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${c}`),(!N||N.vertexLength+c>Kt.MAX_VERTEX_ARRAY_LENGTH||N.sortKey!==I)&&(N={vertexOffset:m.length,primitiveOffset:_.length,vertexLength:0,primitiveLength:0},I!==void 0&&(N.sortKey=I),this.segments.push(N)),N}get(){return this.segments}destroy(){for(const c of this.segments)for(const m in c.vaos)c.vaos[m].destroy()}static simpleSegment(c,m,_,I){return new Kt([{vertexOffset:c,primitiveOffset:m,vertexLength:_,primitiveLength:I,vaos:{},sortKey:0}])}}function bn(h,c){return 256*(h=O(Math.floor(h),0,255))+O(Math.floor(c),0,255)}Kt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,wn("SegmentVector",Kt);const sr=oo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var cn={exports:{}},Zn={exports:{}};Zn.exports=function(h,c){var m,_,I,N,z,j,Y,Z;for(_=h.length-(m=3&h.length),I=c,z=3432918353,j=461845907,Z=0;Z<_;)Y=255&h.charCodeAt(Z)|(255&h.charCodeAt(++Z))<<8|(255&h.charCodeAt(++Z))<<16|(255&h.charCodeAt(++Z))<<24,++Z,I=27492+(65535&(N=5*(65535&(I=(I^=Y=(65535&(Y=(Y=(65535&Y)*z+(((Y>>>16)*z&65535)<<16)&4294967295)<<15|Y>>>17))*j+(((Y>>>16)*j&65535)<<16)&4294967295)<<13|I>>>19))+((5*(I>>>16)&65535)<<16)&4294967295))+((58964+(N>>>16)&65535)<<16);switch(Y=0,m){case 3:Y^=(255&h.charCodeAt(Z+2))<<16;case 2:Y^=(255&h.charCodeAt(Z+1))<<8;case 1:I^=Y=(65535&(Y=(Y=(65535&(Y^=255&h.charCodeAt(Z)))*z+(((Y>>>16)*z&65535)<<16)&4294967295)<<15|Y>>>17))*j+(((Y>>>16)*j&65535)<<16)&4294967295}return I^=h.length,I=2246822507*(65535&(I^=I>>>16))+((2246822507*(I>>>16)&65535)<<16)&4294967295,I=3266489909*(65535&(I^=I>>>13))+((3266489909*(I>>>16)&65535)<<16)&4294967295,(I^=I>>>16)>>>0};var ur=Zn.exports,Mr={exports:{}};Mr.exports=function(h,c){for(var m,_=h.length,I=c^_,N=0;_>=4;)m=1540483477*(65535&(m=255&h.charCodeAt(N)|(255&h.charCodeAt(++N))<<8|(255&h.charCodeAt(++N))<<16|(255&h.charCodeAt(++N))<<24))+((1540483477*(m>>>16)&65535)<<16),I=1540483477*(65535&I)+((1540483477*(I>>>16)&65535)<<16)^(m=1540483477*(65535&(m^=m>>>24))+((1540483477*(m>>>16)&65535)<<16)),_-=4,++N;switch(_){case 3:I^=(255&h.charCodeAt(N+2))<<16;case 2:I^=(255&h.charCodeAt(N+1))<<8;case 1:I=1540483477*(65535&(I^=255&h.charCodeAt(N)))+((1540483477*(I>>>16)&65535)<<16)}return I=1540483477*(65535&(I^=I>>>13))+((1540483477*(I>>>16)&65535)<<16),(I^=I>>>15)>>>0};var rr=ur,fr=Mr.exports;cn.exports=rr,cn.exports.murmur3=rr,cn.exports.murmur2=fr;var dr=l(cn.exports);class Vi{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(c,m,_,I){this.ids.push(fi(c)),this.positions.push(m,_,I)}getPositions(c){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const m=fi(c);let _=0,I=this.ids.length-1;for(;_<I;){const z=_+I>>1;this.ids[z]>=m?I=z:_=z+1}const N=[];for(;this.ids[_]===m;)N.push({index:this.positions[3*_],start:this.positions[3*_+1],end:this.positions[3*_+2]}),_++;return N}static serialize(c,m){const _=new Float64Array(c.ids),I=new Uint32Array(c.positions);return Os(_,I,0,_.length-1),m&&m.push(_.buffer,I.buffer),{ids:_,positions:I}}static deserialize(c){const m=new Vi;return m.ids=c.ids,m.positions=c.positions,m.indexed=!0,m}}function fi(h){const c=+h;return!isNaN(c)&&c<=Number.MAX_SAFE_INTEGER?c:dr(String(h))}function Os(h,c,m,_){for(;m<_;){const I=h[m+_>>1];let N=m-1,z=_+1;for(;;){do N++;while(h[N]<I);do z--;while(h[z]>I);if(N>=z)break;ho(h,N,z),ho(c,3*N,3*z),ho(c,3*N+1,3*z+1),ho(c,3*N+2,3*z+2)}z-m<_-z?(Os(h,c,m,z),m=z+1):(Os(h,c,z+1,_),_=z)}}function ho(h,c,m){const _=h[c];h[c]=h[m],h[m]=_}wn("FeaturePositionMap",Vi);class pi{constructor(c,m){this.gl=c.gl,this.location=m}}class Qo extends pi{constructor(c,m){super(c,m),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))}}class ta extends pi{constructor(c,m){super(c,m),this.current=[0,0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3]))}}class _a extends pi{constructor(c,m){super(c,m),this.current=Tn.transparent}set(c){c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a))}}const sc=new Float32Array(16);function ac(h){return[bn(255*h.r,255*h.g),bn(255*h.b,255*h.a)]}class xa{constructor(c,m,_){this.value=c,this.uniformNames=m.map(I=>`u_${I}`),this.type=_}setUniform(c,m,_){c.set(_.constantOr(this.value))}getBinding(c,m,_){return this.type==="color"?new _a(c,m):new Qo(c,m)}}class Ls{constructor(c,m){this.uniformNames=m.map(_=>`u_${_}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(c,m){this.pixelRatioFrom=m.pixelRatio,this.pixelRatioTo=c.pixelRatio,this.patternFrom=m.tlbr,this.patternTo=c.tlbr}setUniform(c,m,_,I){const N=I==="u_pattern_to"?this.patternTo:I==="u_pattern_from"?this.patternFrom:I==="u_pixel_ratio_to"?this.pixelRatioTo:I==="u_pixel_ratio_from"?this.pixelRatioFrom:null;N&&c.set(N)}getBinding(c,m,_){return _.substr(0,9)==="u_pattern"?new ta(c,m):new Qo(c,m)}}class Di{constructor(c,m,_,I){this.expression=c,this.type=_,this.maxValue=0,this.paintVertexAttributes=m.map(N=>({name:`a_${N}`,type:"Float32",components:_==="color"?2:1,offset:0})),this.paintVertexArray=new I}populatePaintArray(c,m,_,I,N){const z=this.paintVertexArray.length,j=this.expression.evaluate(new Mi(0),m,{},I,[],N);this.paintVertexArray.resize(c),this._setPaintValue(z,c,j)}updatePaintArray(c,m,_,I){const N=this.expression.evaluate({zoom:0},_,I);this._setPaintValue(c,m,N)}_setPaintValue(c,m,_){if(this.type==="color"){const I=ac(_);for(let N=c;N<m;N++)this.paintVertexArray.emplace(N,I[0],I[1])}else{for(let I=c;I<m;I++)this.paintVertexArray.emplace(I,_);this.maxValue=Math.max(this.maxValue,Math.abs(_))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class mi{constructor(c,m,_,I,N,z){this.expression=c,this.uniformNames=m.map(j=>`u_${j}_t`),this.type=_,this.useIntegerZoom=I,this.zoom=N,this.maxValue=0,this.paintVertexAttributes=m.map(j=>({name:`a_${j}`,type:"Float32",components:_==="color"?4:2,offset:0})),this.paintVertexArray=new z}populatePaintArray(c,m,_,I,N){const z=this.expression.evaluate(new Mi(this.zoom),m,{},I,[],N),j=this.expression.evaluate(new Mi(this.zoom+1),m,{},I,[],N),Y=this.paintVertexArray.length;this.paintVertexArray.resize(c),this._setPaintValue(Y,c,z,j)}updatePaintArray(c,m,_,I){const N=this.expression.evaluate({zoom:this.zoom},_,I),z=this.expression.evaluate({zoom:this.zoom+1},_,I);this._setPaintValue(c,m,N,z)}_setPaintValue(c,m,_,I){if(this.type==="color"){const N=ac(_),z=ac(I);for(let j=c;j<m;j++)this.paintVertexArray.emplace(j,N[0],N[1],z[0],z[1])}else{for(let N=c;N<m;N++)this.paintVertexArray.emplace(N,_,I);this.maxValue=Math.max(this.maxValue,Math.abs(_),Math.abs(I))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(c,m){const _=this.useIntegerZoom?Math.floor(m.zoom):m.zoom,I=O(this.expression.interpolationFactor(_,this.zoom,this.zoom+1),0,1);c.set(I)}getBinding(c,m,_){return new Qo(c,m)}}class Wi{constructor(c,m,_,I,N,z){this.expression=c,this.type=m,this.useIntegerZoom=_,this.zoom=I,this.layerId=z,this.zoomInPaintVertexArray=new N,this.zoomOutPaintVertexArray=new N}populatePaintArray(c,m,_){const I=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(c),this.zoomOutPaintVertexArray.resize(c),this._setPaintValues(I,c,m.patterns&&m.patterns[this.layerId],_)}updatePaintArray(c,m,_,I,N){this._setPaintValues(c,m,_.patterns&&_.patterns[this.layerId],N)}_setPaintValues(c,m,_,I){if(!I||!_)return;const{min:N,mid:z,max:j}=_,Y=I[N],Z=I[z],ne=I[j];if(Y&&Z&&ne)for(let ae=c;ae<m;ae++)this.zoomInPaintVertexArray.emplace(ae,Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],Y.tl[0],Y.tl[1],Y.br[0],Y.br[1],Z.pixelRatio,Y.pixelRatio),this.zoomOutPaintVertexArray.emplace(ae,Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],Z.pixelRatio,ne.pixelRatio)}upload(c){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=c.createVertexBuffer(this.zoomInPaintVertexArray,sr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=c.createVertexBuffer(this.zoomOutPaintVertexArray,sr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class qd{constructor(c,m,_){this.binders={},this._buffers=[];const I=[];for(const N in c.paint._values){if(!_(N))continue;const z=c.paint.get(N);if(!(z instanceof Tl&&Ld(z.property.specification)))continue;const j=jo(N,c.type),Y=z.value,Z=z.property.specification.type,ne=z.property.useIntegerZoom,ae=z.property.specification["property-type"],ye=ae==="cross-faded"||ae==="cross-faded-data-driven";if(Y.kind==="constant")this.binders[N]=ye?new Ls(Y.value,j):new xa(Y.value,j,Z),I.push(`/u_${N}`);else if(Y.kind==="source"||ye){const we=ws(N,Z,"source");this.binders[N]=ye?new Wi(Y,Z,ne,m,we,c.id):new Di(Y,j,Z,we),I.push(`/a_${N}`)}else{const we=ws(N,Z,"composite");this.binders[N]=new mi(Y,j,Z,ne,m,we),I.push(`/z_${N}`)}}this.cacheKey=I.sort().join("")}getMaxValue(c){const m=this.binders[c];return m instanceof Di||m instanceof mi?m.maxValue:0}populatePaintArrays(c,m,_,I,N){for(const z in this.binders){const j=this.binders[z];(j instanceof Di||j instanceof mi||j instanceof Wi)&&j.populatePaintArray(c,m,_,I,N)}}setConstantPatternPositions(c,m){for(const _ in this.binders){const I=this.binders[_];I instanceof Ls&&I.setConstantPatternPositions(c,m)}}updatePaintArrays(c,m,_,I,N){let z=!1;for(const j in c){const Y=m.getPositions(j);for(const Z of Y){const ne=_.feature(Z.index);for(const ae in this.binders){const ye=this.binders[ae];if((ye instanceof Di||ye instanceof mi||ye instanceof Wi)&&ye.expression.isStateDependent===!0){const we=I.paint.get(ae);ye.expression=we.value,ye.updatePaintArray(Z.start,Z.end,ne,c[j],N),z=!0}}}}return z}defines(){const c=[];for(const m in this.binders){const _=this.binders[m];(_ instanceof xa||_ instanceof Ls)&&c.push(..._.uniformNames.map(I=>`#define HAS_UNIFORM_${I}`))}return c}getBinderAttributes(){const c=[];for(const m in this.binders){const _=this.binders[m];if(_ instanceof Di||_ instanceof mi)for(let I=0;I<_.paintVertexAttributes.length;I++)c.push(_.paintVertexAttributes[I].name);else if(_ instanceof Wi)for(let I=0;I<sr.members.length;I++)c.push(sr.members[I].name)}return c}getBinderUniforms(){const c=[];for(const m in this.binders){const _=this.binders[m];if(_ instanceof xa||_ instanceof Ls||_ instanceof mi)for(const I of _.uniformNames)c.push(I)}return c}getPaintVertexBuffers(){return this._buffers}getUniforms(c,m){const _=[];for(const I in this.binders){const N=this.binders[I];if(N instanceof xa||N instanceof Ls||N instanceof mi){for(const z of N.uniformNames)if(m[z]){const j=N.getBinding(c,m[z],z);_.push({name:z,property:I,binding:j})}}}return _}setUniforms(c,m,_,I){for(const{name:N,property:z,binding:j}of m)this.binders[z].setUniform(j,I,_.get(z),N)}updatePaintBuffers(c){this._buffers=[];for(const m in this.binders){const _=this.binders[m];if(c&&_ instanceof Wi){const I=c.fromScale===2?_.zoomInPaintVertexBuffer:_.zoomOutPaintVertexBuffer;I&&this._buffers.push(I)}else(_ instanceof Di||_ instanceof mi)&&_.paintVertexBuffer&&this._buffers.push(_.paintVertexBuffer)}}upload(c){for(const m in this.binders){const _=this.binders[m];(_ instanceof Di||_ instanceof mi||_ instanceof Wi)&&_.upload(c)}this.updatePaintBuffers()}destroy(){for(const c in this.binders){const m=this.binders[c];(m instanceof Di||m instanceof mi||m instanceof Wi)&&m.destroy()}}}class Ei{constructor(c,m,_=()=>!0){this.programConfigurations={};for(const I of c)this.programConfigurations[I.id]=new qd(I,m,_);this.needsUpload=!1,this._featureMap=new Vi,this._bufferOffset=0}populatePaintArrays(c,m,_,I,N,z){for(const j in this.programConfigurations)this.programConfigurations[j].populatePaintArrays(c,m,I,N,z);m.id!==void 0&&this._featureMap.add(m.id,_,this._bufferOffset,c),this._bufferOffset=c,this.needsUpload=!0}updatePaintArrays(c,m,_,I){for(const N of _)this.needsUpload=this.programConfigurations[N.id].updatePaintArrays(c,this._featureMap,m,N,I)||this.needsUpload}get(c){return this.programConfigurations[c]}upload(c){if(this.needsUpload){for(const m in this.programConfigurations)this.programConfigurations[m].upload(c);this.needsUpload=!1}}destroy(){for(const c in this.programConfigurations)this.programConfigurations[c].destroy()}}function jo(h,c){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(`${c}-`,"").replace(/-/g,"_")]}function ws(h,c,m){const _={color:{source:Nc,composite:eg},number:{source:zc,composite:Nc}},I=function(N){return{"line-pattern":{source:ke,composite:ke},"fill-pattern":{source:ke,composite:ke},"fill-extrusion-pattern":{source:ke,composite:ke}}[N]}(h);return I&&I[m]||_[c][m]}wn("ConstantBinder",xa),wn("CrossFadedConstantBinder",Ls),wn("SourceExpressionBinder",Di),wn("CrossFadedCompositeBinder",Wi),wn("CompositeExpressionBinder",mi),wn("ProgramConfiguration",qd,{omit:["_buffers"]}),wn("ProgramConfigurationSet",Ei);const Sr=8192,eo=Math.pow(2,14)-1,Cr=-eo-1;function ki(h){const c=Sr/h.extent,m=h.loadGeometry();for(let _=0;_<m.length;_++){const I=m[_];for(let N=0;N<I.length;N++){const z=I[N],j=Math.round(z.x*c),Y=Math.round(z.y*c);z.x=O(j,Cr,eo),z.y=O(Y,Cr,eo),(j<z.x||j>z.x+1||Y<z.y||Y>z.y+1)&&pe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return m}function Ri(h,c){return{type:h.type,id:h.id,properties:h.properties,geometry:c?ki(h):[]}}function bo(h,c,m,_,I){h.emplaceBack(2*c+(_+1)/2,2*m+(I+1)/2)}class Ds{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(m=>m.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new de,this.indexArray=new Ct,this.segments=new Kt,this.programConfigurations=new Ei(c.layers,c.zoom),this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(c,m,_){const I=this.layers[0],N=[];let z=null,j=!1;I.type==="circle"&&(z=I.layout.get("circle-sort-key"),j=!z.isConstant());for(const{feature:Y,id:Z,index:ne,sourceLayerIndex:ae}of c){const ye=this.layers[0]._featureFilter.needGeometry,we=Ri(Y,ye);if(!this.layers[0]._featureFilter.filter(new Mi(this.zoom),we,_))continue;const Me=j?z.evaluate(we,{},_):void 0,Re={id:Z,properties:Y.properties,type:Y.type,sourceLayerIndex:ae,index:ne,geometry:ye?we.geometry:ki(Y),patterns:{},sortKey:Me};N.push(Re)}j&&N.sort((Y,Z)=>Y.sortKey-Z.sortKey);for(const Y of N){const{geometry:Z,index:ne,sourceLayerIndex:ae}=Y,ye=c[ne].feature;this.addFeature(Y,Z,ne,_),m.featureIndex.insert(ye,Z,ne,ae,this.index)}}update(c,m,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,m,this.stateDependentLayers,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Gt),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(c,m,_,I){for(const N of m)for(const z of N){const j=z.x,Y=z.y;if(j<0||j>=Sr||Y<0||Y>=Sr)continue;const Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,c.sortKey),ne=Z.vertexLength;bo(this.layoutVertexArray,j,Y,-1,-1),bo(this.layoutVertexArray,j,Y,1,-1),bo(this.layoutVertexArray,j,Y,1,1),bo(this.layoutVertexArray,j,Y,-1,1),this.indexArray.emplaceBack(ne,ne+1,ne+2),this.indexArray.emplaceBack(ne,ne+3,ne+2),Z.vertexLength+=4,Z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,_,{},I)}}function Xa(h,c){for(let m=0;m<h.length;m++)if(tf(c,h[m]))return!0;for(let m=0;m<c.length;m++)if(tf(h,c[m]))return!0;return!!Vu(h,c)}function wo(h,c,m){return!!tf(h,c)||!!Fc(c,h,m)}function Yd(h,c){if(h.length===1)return e_(c,h[0]);for(let m=0;m<c.length;m++){const _=c[m];for(let I=0;I<_.length;I++)if(tf(h,_[I]))return!0}for(let m=0;m<h.length;m++)if(e_(c,h[m]))return!0;for(let m=0;m<c.length;m++)if(Vu(h,c[m]))return!0;return!1}function Xd(h,c,m){if(h.length>1){if(Vu(h,c))return!0;for(let _=0;_<c.length;_++)if(Fc(c[_],h,m))return!0}for(let _=0;_<h.length;_++)if(Fc(h[_],c,m))return!0;return!1}function Vu(h,c){if(h.length===0||c.length===0)return!1;for(let m=0;m<h.length-1;m++){const _=h[m],I=h[m+1];for(let N=0;N<c.length-1;N++)if(tg(_,I,c[N],c[N+1]))return!0}return!1}function tg(h,c,m,_){return re(h,m,_)!==re(c,m,_)&&re(h,c,m)!==re(h,c,_)}function Fc(h,c,m){const _=m*m;if(c.length===1)return h.distSqr(c[0])<_;for(let I=1;I<c.length;I++)if(ba(h,c[I-1],c[I])<_)return!0;return!1}function ba(h,c,m){const _=c.distSqr(m);if(_===0)return h.distSqr(c);const I=((h.x-c.x)*(m.x-c.x)+(h.y-c.y)*(m.y-c.y))/_;return h.distSqr(I<0?c:I>1?m:m.sub(c)._mult(I)._add(c))}function e_(h,c){let m,_,I,N=!1;for(let z=0;z<h.length;z++){m=h[z];for(let j=0,Y=m.length-1;j<m.length;Y=j++)_=m[j],I=m[Y],_.y>c.y!=I.y>c.y&&c.x<(I.x-_.x)*(c.y-_.y)/(I.y-_.y)+_.x&&(N=!N)}return N}function tf(h,c){let m=!1;for(let _=0,I=h.length-1;_<h.length;I=_++){const N=h[_],z=h[I];N.y>c.y!=z.y>c.y&&c.x<(z.x-N.x)*(c.y-N.y)/(z.y-N.y)+N.x&&(m=!m)}return m}function ng(h,c,m){const _=m[0],I=m[2];if(h.x<_.x&&c.x<_.x||h.x>I.x&&c.x>I.x||h.y<_.y&&c.y<_.y||h.y>I.y&&c.y>I.y)return!1;const N=re(h,c,m[0]);return N!==re(h,c,m[1])||N!==re(h,c,m[2])||N!==re(h,c,m[3])}function nf(h,c,m){const _=c.paint.get(h).value;return _.kind==="constant"?_.value:m.programConfigurations.get(c.id).getMaxValue(h)}function rg(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function Bc(h,c,m,_,I){if(!c[0]&&!c[1])return h;const N=p.convert(c)._mult(I);m==="viewport"&&N._rotate(-_);const z=[];for(let j=0;j<h.length;j++)z.push(h[j].sub(N));return z}let Zy,Kd;wn("CircleBucket",Ds,{omit:["layers"]});var t_={get paint(){return Kd=Kd||new ea({"circle-radius":new Xn(We.paint_circle["circle-radius"]),"circle-color":new Xn(We.paint_circle["circle-color"]),"circle-blur":new Xn(We.paint_circle["circle-blur"]),"circle-opacity":new Xn(We.paint_circle["circle-opacity"]),"circle-translate":new On(We.paint_circle["circle-translate"]),"circle-translate-anchor":new On(We.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new On(We.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new On(We.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Xn(We.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Xn(We.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Xn(We.paint_circle["circle-stroke-opacity"])})},get layout(){return Zy=Zy||new ea({"circle-sort-key":new Xn(We.layout_circle["circle-sort-key"])})}},Uo=1e-6,rf=typeof Float32Array<"u"?Float32Array:Array;function ig(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Jy(h,c,m){var _=c[0],I=c[1],N=c[2],z=c[3],j=c[4],Y=c[5],Z=c[6],ne=c[7],ae=c[8],ye=c[9],we=c[10],Me=c[11],Re=c[12],$e=c[13],Ke=c[14],_t=c[15],Qe=m[0],ut=m[1],Ft=m[2],Ht=m[3];return h[0]=Qe*_+ut*j+Ft*ae+Ht*Re,h[1]=Qe*I+ut*Y+Ft*ye+Ht*$e,h[2]=Qe*N+ut*Z+Ft*we+Ht*Ke,h[3]=Qe*z+ut*ne+Ft*Me+Ht*_t,h[4]=(Qe=m[4])*_+(ut=m[5])*j+(Ft=m[6])*ae+(Ht=m[7])*Re,h[5]=Qe*I+ut*Y+Ft*ye+Ht*$e,h[6]=Qe*N+ut*Z+Ft*we+Ht*Ke,h[7]=Qe*z+ut*ne+Ft*Me+Ht*_t,h[8]=(Qe=m[8])*_+(ut=m[9])*j+(Ft=m[10])*ae+(Ht=m[11])*Re,h[9]=Qe*I+ut*Y+Ft*ye+Ht*$e,h[10]=Qe*N+ut*Z+Ft*we+Ht*Ke,h[11]=Qe*z+ut*ne+Ft*Me+Ht*_t,h[12]=(Qe=m[12])*_+(ut=m[13])*j+(Ft=m[14])*ae+(Ht=m[15])*Re,h[13]=Qe*I+ut*Y+Ft*ye+Ht*$e,h[14]=Qe*N+ut*Z+Ft*we+Ht*Ke,h[15]=Qe*z+ut*ne+Ft*Me+Ht*_t,h}Math.hypot||(Math.hypot=function(){for(var h=0,c=arguments.length;c--;)h+=arguments[c]*arguments[c];return Math.sqrt(h)});var es,of=Jy;function wa(h,c,m){var _=c[0],I=c[1],N=c[2],z=c[3];return h[0]=m[0]*_+m[4]*I+m[8]*N+m[12]*z,h[1]=m[1]*_+m[5]*I+m[9]*N+m[13]*z,h[2]=m[2]*_+m[6]*I+m[10]*N+m[14]*z,h[3]=m[3]*_+m[7]*I+m[11]*N+m[15]*z,h}es=new rf(4),rf!=Float32Array&&(es[0]=0,es[1]=0,es[2]=0,es[3]=0);class n_ extends Cl{constructor(c){super(c,t_)}createBucket(c){return new Ds(c)}queryRadius(c){const m=c;return nf("circle-radius",this,m)+nf("circle-stroke-width",this,m)+rg(this.paint.get("circle-translate"))}queryIntersectsFeature(c,m,_,I,N,z,j,Y){const Z=Bc(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),z.angle,j),ne=this.paint.get("circle-radius").evaluate(m,_)+this.paint.get("circle-stroke-width").evaluate(m,_),ae=this.paint.get("circle-pitch-alignment")==="map",ye=ae?Z:function(Me,Re){return Me.map($e=>Sa($e,Re))}(Z,Y),we=ae?ne*j:ne;for(const Me of I)for(const Re of Me){const $e=ae?Re:Sa(Re,Y);let Ke=we;const _t=wa([],[Re.x,Re.y,0,1],Y);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ke*=_t[3]/z.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ke*=z.cameraToCenterDistance/_t[3]),wo(ye,$e,Ke))return!0}return!1}}function Sa(h,c){const m=wa([],[h.x,h.y,0,1],c);return new p(m[0]/m[3],m[1]/m[3])}class G1 extends Ds{}let r_;wn("HeatmapBucket",G1,{omit:["layers"]});var q1={get paint(){return r_=r_||new ea({"heatmap-radius":new Xn(We.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Xn(We.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new On(We.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $u(We.paint_heatmap["heatmap-color"]),"heatmap-opacity":new On(We.paint_heatmap["heatmap-opacity"])})}};function Y1(h,{width:c,height:m},_,I){if(I){if(I instanceof Uint8ClampedArray)I=new Uint8Array(I.buffer);else if(I.length!==c*m*_)throw new RangeError(`mismatched image size. expected: ${I.length} but got: ${c*m*_}`)}else I=new Uint8Array(c*m*_);return h.width=c,h.height=m,h.data=I,h}function Zd(h,{width:c,height:m},_){if(c===h.width&&m===h.height)return;const I=Y1({},{width:c,height:m},_);i_(h,I,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,c),height:Math.min(h.height,m)},_),h.width=c,h.height=m,h.data=I.data}function i_(h,c,m,_,I,N){if(I.width===0||I.height===0)return c;if(I.width>h.width||I.height>h.height||m.x>h.width-I.width||m.y>h.height-I.height)throw new RangeError("out of range source coordinates for image copy");if(I.width>c.width||I.height>c.height||_.x>c.width-I.width||_.y>c.height-I.height)throw new RangeError("out of range destination coordinates for image copy");const z=h.data,j=c.data;if(z===j)throw new Error("srcData equals dstData, so image is already copied");for(let Y=0;Y<I.height;Y++){const Z=((m.y+Y)*h.width+m.x)*N,ne=((_.y+Y)*c.width+_.x)*N;for(let ae=0;ae<I.width*N;ae++)j[ne+ae]=z[Z+ae]}return c}class og{constructor(c,m){Y1(this,c,1,m)}resize(c){Zd(this,c,1)}clone(){return new og({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,m,_,I,N){i_(c,m,_,I,N,1)}}class Ma{constructor(c,m){Y1(this,c,4,m)}resize(c){Zd(this,c,4)}replace(c,m){m?this.data.set(c):this.data=c instanceof Uint8ClampedArray?new Uint8Array(c.buffer):c}clone(){return new Ma({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,m,_,I,N){i_(c,m,_,I,N,4)}}function sf(h){const c={},m=h.resolution||256,_=h.clips?h.clips.length:1,I=h.image||new Ma({width:m,height:_});if(Math.log(m)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${m}`);const N=(z,j,Y)=>{c[h.evaluationKey]=Y;const Z=h.expression.evaluate(c);I.data[z+j+0]=Math.floor(255*Z.r/Z.a),I.data[z+j+1]=Math.floor(255*Z.g/Z.a),I.data[z+j+2]=Math.floor(255*Z.b/Z.a),I.data[z+j+3]=Math.floor(255*Z.a)};if(h.clips)for(let z=0,j=0;z<_;++z,j+=4*m)for(let Y=0,Z=0;Y<m;Y++,Z+=4){const ne=Y/(m-1),{start:ae,end:ye}=h.clips[z];N(j,Z,ae*(1-ne)+ye*ne)}else for(let z=0,j=0;z<m;z++,j+=4)N(0,j,z/(m-1));return I}wn("AlphaImage",og),wn("RGBAImage",Ma);class HE extends Cl{createBucket(c){return new G1(c)}constructor(c){super(c,q1),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=sf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let X1;var K1={get paint(){return X1=X1||new ea({"hillshade-illumination-direction":new On(We.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new On(We.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new On(We.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new On(We.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new On(We.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new On(We.paint_hillshade["hillshade-accent-color"])})}};class o_ extends Cl{constructor(c){super(c,K1)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const sL=oo([{name:"a_pos",components:2,type:"Int16"}],4),{members:aL}=sL;var s_={exports:{}};function Qy(h,c,m){m=m||2;var _,I,N,z,j,Y,Z,ne=c&&c.length,ae=ne?c[0]*m:h.length,ye=af(h,0,ae,m,!0),we=[];if(!ye||ye.next===ye.prev)return we;if(ne&&(ye=function(Re,$e,Ke,_t){var Qe,ut,Ft,Ht=[];for(Qe=0,ut=$e.length;Qe<ut;Qe++)(Ft=af(Re,$e[Qe]*_t,Qe<ut-1?$e[Qe+1]*_t:Re.length,_t,!1))===Ft.next&&(Ft.steiner=!0),Ht.push(dL(Ft));for(Ht.sort(cL),Qe=0;Qe<Ht.length;Qe++)Ke=uL(Ht[Qe],Ke);return Ke}(h,c,ye,m)),h.length>80*m){_=N=h[0],I=z=h[1];for(var Me=m;Me<ae;Me+=m)(j=h[Me])<_&&(_=j),(Y=h[Me+1])<I&&(I=Y),j>N&&(N=j),Y>z&&(z=Y);Z=(Z=Math.max(N-_,z-I))!==0?32767/Z:0}return $c(ye,we,m,_,I,Z,0),we}function af(h,c,m,_,I){var N,z;if(I===u_(h,c,m,_)>0)for(N=c;N<m;N+=_)z=XE(N,h[N],h[N+1],z);else for(N=m-_;N>=c;N-=_)z=XE(N,h[N],h[N+1],z);return z&&jc(z,z.next)&&(sg(z),z=z.next),z}function gp(h,c){if(!h)return h;c||(c=h);var m,_=h;do if(m=!1,_.steiner||!jc(_,_.next)&&fo(_.prev,_,_.next)!==0)_=_.next;else{if(sg(_),(_=c=_.prev)===_.next)break;m=!0}while(m||_!==c);return c}function $c(h,c,m,_,I,N,z){if(h){!z&&N&&function(ne,ae,ye,we){var Me=ne;do Me.z===0&&(Me.z=a_(Me.x,Me.y,ae,ye,we)),Me.prevZ=Me.prev,Me.nextZ=Me.next,Me=Me.next;while(Me!==ne);Me.prevZ.nextZ=null,Me.prevZ=null,function(Re){var $e,Ke,_t,Qe,ut,Ft,Ht,_n,Ln=1;do{for(Ke=Re,Re=null,ut=null,Ft=0;Ke;){for(Ft++,_t=Ke,Ht=0,$e=0;$e<Ln&&(Ht++,_t=_t.nextZ);$e++);for(_n=Ln;Ht>0||_n>0&&_t;)Ht!==0&&(_n===0||!_t||Ke.z<=_t.z)?(Qe=Ke,Ke=Ke.nextZ,Ht--):(Qe=_t,_t=_t.nextZ,_n--),ut?ut.nextZ=Qe:Re=Qe,Qe.prevZ=ut,ut=Qe;Ke=_t}ut.nextZ=null,Ln*=2}while(Ft>1)}(Me)}(h,_,I,N);for(var j,Y,Z=h;h.prev!==h.next;)if(j=h.prev,Y=h.next,N?Ka(h,_,I,N):GE(h))c.push(j.i/m|0),c.push(h.i/m|0),c.push(Y.i/m|0),sg(h),h=Y.next,Z=Y.next;else if((h=Y)===Z){z?z===1?$c(h=lL(gp(h),c,m),c,m,_,I,N,2):z===2&&qE(h,c,m,_,I,N):$c(gp(h),c,m,_,I,N,1);break}}}function GE(h){var c=h.prev,m=h,_=h.next;if(fo(c,m,_)>=0)return!1;for(var I=c.x,N=m.x,z=_.x,j=c.y,Y=m.y,Z=_.y,ne=I<N?I<z?I:z:N<z?N:z,ae=j<Y?j<Z?j:Z:Y<Z?Y:Z,ye=I>N?I>z?I:z:N>z?N:z,we=j>Y?j>Z?j:Z:Y>Z?Y:Z,Me=_.next;Me!==c;){if(Me.x>=ne&&Me.x<=ye&&Me.y>=ae&&Me.y<=we&&Ns(I,j,N,Y,z,Z,Me.x,Me.y)&&fo(Me.prev,Me,Me.next)>=0)return!1;Me=Me.next}return!0}function Ka(h,c,m,_){var I=h.prev,N=h,z=h.next;if(fo(I,N,z)>=0)return!1;for(var j=I.x,Y=N.x,Z=z.x,ne=I.y,ae=N.y,ye=z.y,we=j<Y?j<Z?j:Z:Y<Z?Y:Z,Me=ne<ae?ne<ye?ne:ye:ae<ye?ae:ye,Re=j>Y?j>Z?j:Z:Y>Z?Y:Z,$e=ne>ae?ne>ye?ne:ye:ae>ye?ae:ye,Ke=a_(we,Me,c,m,_),_t=a_(Re,$e,c,m,_),Qe=h.prevZ,ut=h.nextZ;Qe&&Qe.z>=Ke&&ut&&ut.z<=_t;){if(Qe.x>=we&&Qe.x<=Re&&Qe.y>=Me&&Qe.y<=$e&&Qe!==I&&Qe!==z&&Ns(j,ne,Y,ae,Z,ye,Qe.x,Qe.y)&&fo(Qe.prev,Qe,Qe.next)>=0||(Qe=Qe.prevZ,ut.x>=we&&ut.x<=Re&&ut.y>=Me&&ut.y<=$e&&ut!==I&&ut!==z&&Ns(j,ne,Y,ae,Z,ye,ut.x,ut.y)&&fo(ut.prev,ut,ut.next)>=0))return!1;ut=ut.nextZ}for(;Qe&&Qe.z>=Ke;){if(Qe.x>=we&&Qe.x<=Re&&Qe.y>=Me&&Qe.y<=$e&&Qe!==I&&Qe!==z&&Ns(j,ne,Y,ae,Z,ye,Qe.x,Qe.y)&&fo(Qe.prev,Qe,Qe.next)>=0)return!1;Qe=Qe.prevZ}for(;ut&&ut.z<=_t;){if(ut.x>=we&&ut.x<=Re&&ut.y>=Me&&ut.y<=$e&&ut!==I&&ut!==z&&Ns(j,ne,Y,ae,Z,ye,ut.x,ut.y)&&fo(ut.prev,ut,ut.next)>=0)return!1;ut=ut.nextZ}return!0}function lL(h,c,m){var _=h;do{var I=_.prev,N=_.next.next;!jc(I,N)&&ev(I,_,_.next,N)&&vp(I,N)&&vp(N,I)&&(c.push(I.i/m|0),c.push(_.i/m|0),c.push(N.i/m|0),sg(_),sg(_.next),_=h=N),_=_.next}while(_!==h);return gp(_)}function qE(h,c,m,_,I,N){var z=h;do{for(var j=z.next.next;j!==z.prev;){if(z.i!==j.i&&Z1(z,j)){var Y=l_(z,j);return z=gp(z,z.next),Y=gp(Y,Y.next),$c(z,c,m,_,I,N,0),void $c(Y,c,m,_,I,N,0)}j=j.next}z=z.next}while(z!==h)}function cL(h,c){return h.x-c.x}function uL(h,c){var m=function(I,N){var z,j=N,Y=I.x,Z=I.y,ne=-1/0;do{if(Z<=j.y&&Z>=j.next.y&&j.next.y!==j.y){var ae=j.x+(Z-j.y)*(j.next.x-j.x)/(j.next.y-j.y);if(ae<=Y&&ae>ne&&(ne=ae,z=j.x<j.next.x?j:j.next,ae===Y))return z}j=j.next}while(j!==N);if(!z)return null;var ye,we=z,Me=z.x,Re=z.y,$e=1/0;j=z;do Y>=j.x&&j.x>=Me&&Y!==j.x&&Ns(Z<Re?Y:ne,Z,Me,Re,Z<Re?ne:Y,Z,j.x,j.y)&&(ye=Math.abs(Z-j.y)/(Y-j.x),vp(j,I)&&(ye<$e||ye===$e&&(j.x>z.x||j.x===z.x&&YE(z,j)))&&(z=j,$e=ye)),j=j.next;while(j!==we);return z}(h,c);if(!m)return c;var _=l_(m,h);return gp(_,_.next),gp(m,m.next)}function YE(h,c){return fo(h.prev,h,c.prev)<0&&fo(c.next,h,h.next)<0}function a_(h,c,m,_,I){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-m)*I|0)|h<<8))|h<<4))|h<<2))|h<<1))|(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-_)*I|0)|c<<8))|c<<4))|c<<2))|c<<1))<<1}function dL(h){var c=h,m=h;do(c.x<m.x||c.x===m.x&&c.y<m.y)&&(m=c),c=c.next;while(c!==h);return m}function Ns(h,c,m,_,I,N,z,j){return(I-z)*(c-j)>=(h-z)*(N-j)&&(h-z)*(_-j)>=(m-z)*(c-j)&&(m-z)*(N-j)>=(I-z)*(_-j)}function Z1(h,c){return h.next.i!==c.i&&h.prev.i!==c.i&&!function(m,_){var I=m;do{if(I.i!==m.i&&I.next.i!==m.i&&I.i!==_.i&&I.next.i!==_.i&&ev(I,I.next,m,_))return!0;I=I.next}while(I!==m);return!1}(h,c)&&(vp(h,c)&&vp(c,h)&&function(m,_){var I=m,N=!1,z=(m.x+_.x)/2,j=(m.y+_.y)/2;do I.y>j!=I.next.y>j&&I.next.y!==I.y&&z<(I.next.x-I.x)*(j-I.y)/(I.next.y-I.y)+I.x&&(N=!N),I=I.next;while(I!==m);return N}(h,c)&&(fo(h.prev,h,c.prev)||fo(h,c.prev,c))||jc(h,c)&&fo(h.prev,h,h.next)>0&&fo(c.prev,c,c.next)>0)}function fo(h,c,m){return(c.y-h.y)*(m.x-c.x)-(c.x-h.x)*(m.y-c.y)}function jc(h,c){return h.x===c.x&&h.y===c.y}function ev(h,c,m,_){var I=yp(fo(h,c,m)),N=yp(fo(h,c,_)),z=yp(fo(m,_,h)),j=yp(fo(m,_,c));return I!==N&&z!==j||!(I!==0||!Wu(h,m,c))||!(N!==0||!Wu(h,_,c))||!(z!==0||!Wu(m,h,_))||!(j!==0||!Wu(m,c,_))}function Wu(h,c,m){return c.x<=Math.max(h.x,m.x)&&c.x>=Math.min(h.x,m.x)&&c.y<=Math.max(h.y,m.y)&&c.y>=Math.min(h.y,m.y)}function yp(h){return h>0?1:h<0?-1:0}function vp(h,c){return fo(h.prev,h,h.next)<0?fo(h,c,h.next)>=0&&fo(h,h.prev,c)>=0:fo(h,c,h.prev)<0||fo(h,h.next,c)<0}function l_(h,c){var m=new c_(h.i,h.x,h.y),_=new c_(c.i,c.x,c.y),I=h.next,N=c.prev;return h.next=c,c.prev=h,m.next=I,I.prev=m,_.next=m,m.prev=_,N.next=_,_.prev=N,_}function XE(h,c,m,_){var I=new c_(h,c,m);return _?(I.next=_.next,I.prev=_,_.next.prev=I,_.next=I):(I.prev=I,I.next=I),I}function sg(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function c_(h,c,m){this.i=h,this.x=c,this.y=m,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function u_(h,c,m,_){for(var I=0,N=c,z=m-_;N<m;N+=_)I+=(h[z]-h[N])*(h[N+1]+h[z+1]),z=N;return I}s_.exports=Qy,s_.exports.default=Qy,Qy.deviation=function(h,c,m,_){var I=c&&c.length,N=Math.abs(u_(h,0,I?c[0]*m:h.length,m));if(I)for(var z=0,j=c.length;z<j;z++)N-=Math.abs(u_(h,c[z]*m,z<j-1?c[z+1]*m:h.length,m));var Y=0;for(z=0;z<_.length;z+=3){var Z=_[z]*m,ne=_[z+1]*m,ae=_[z+2]*m;Y+=Math.abs((h[Z]-h[ae])*(h[ne+1]-h[Z+1])-(h[Z]-h[ne])*(h[ae+1]-h[Z+1]))}return N===0&&Y===0?0:Math.abs((Y-N)/N)},Qy.flatten=function(h){for(var c=h[0][0].length,m={vertices:[],holes:[],dimensions:c},_=0,I=0;I<h.length;I++){for(var N=0;N<h[I].length;N++)for(var z=0;z<c;z++)m.vertices.push(h[I][N][z]);I>0&&m.holes.push(_+=h[I-1].length)}return m};var J1=l(s_.exports);function Q1(h,c,m,_,I){KE(h,c,m||0,_||h.length-1,I||w)}function KE(h,c,m,_,I){for(;_>m;){if(_-m>600){var N=_-m+1,z=c-m+1,j=Math.log(N),Y=.5*Math.exp(2*j/3),Z=.5*Math.sqrt(j*Y*(N-Y)/N)*(z-N/2<0?-1:1);KE(h,c,Math.max(m,Math.floor(c-z*Y/N+Z)),Math.min(_,Math.floor(c+(N-z)*Y/N+Z)),I)}var ne=h[c],ae=m,ye=_;for(tv(h,m,c),I(h[_],ne)>0&&tv(h,m,_);ae<ye;){for(tv(h,ae,ye),ae++,ye--;I(h[ae],ne)<0;)ae++;for(;I(h[ye],ne)>0;)ye--}I(h[m],ne)===0?tv(h,m,ye):tv(h,++ye,_),ye<=c&&(m=ye+1),c<=ye&&(_=ye-1)}}function tv(h,c,m){var _=h[c];h[c]=h[m],h[m]=_}function w(h,c){return h<c?-1:h>c?1:0}function E(h,c){const m=h.length;if(m<=1)return[h];const _=[];let I,N;for(let z=0;z<m;z++){const j=he(h[z]);j!==0&&(h[z].area=Math.abs(j),N===void 0&&(N=j<0),N===j<0?(I&&_.push(I),I=[h[z]]):I.push(h[z]))}if(I&&_.push(I),c>1)for(let z=0;z<_.length;z++)_[z].length<=c||(Q1(_[z],c,1,_[z].length-1,$),_[z]=_[z].slice(0,c));return _}function $(h,c){return c.area-h.area}function G(h,c,m){const _=m.patternDependencies;let I=!1;for(const N of c){const z=N.paint.get(`${h}-pattern`);z.isConstant()||(I=!0);const j=z.constantOr(null);j&&(I=!0,_[j.to]=!0,_[j.from]=!0)}return I}function Q(h,c,m,_,I){const N=I.patternDependencies;for(const z of c){const j=z.paint.get(`${h}-pattern`).value;if(j.kind!=="constant"){let Y=j.evaluate({zoom:_-1},m,{},I.availableImages),Z=j.evaluate({zoom:_},m,{},I.availableImages),ne=j.evaluate({zoom:_+1},m,{},I.availableImages);Y=Y&&Y.name?Y.name:Y,Z=Z&&Z.name?Z.name:Z,ne=ne&&ne.name?ne.name:ne,N[Y]=!0,N[Z]=!0,N[ne]=!0,m.patterns[z.id]={min:Y,mid:Z,max:ne}}}return m}class ce{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(m=>m.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Se,this.indexArray=new Ct,this.indexArray2=new Ot,this.programConfigurations=new Ei(c.layers,c.zoom),this.segments=new Kt,this.segments2=new Kt,this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(c,m,_){this.hasPattern=G("fill",this.layers,m);const I=this.layers[0].layout.get("fill-sort-key"),N=!I.isConstant(),z=[];for(const{feature:j,id:Y,index:Z,sourceLayerIndex:ne}of c){const ae=this.layers[0]._featureFilter.needGeometry,ye=Ri(j,ae);if(!this.layers[0]._featureFilter.filter(new Mi(this.zoom),ye,_))continue;const we=N?I.evaluate(ye,{},_,m.availableImages):void 0,Me={id:Y,properties:j.properties,type:j.type,sourceLayerIndex:ne,index:Z,geometry:ae?ye.geometry:ki(j),patterns:{},sortKey:we};z.push(Me)}N&&z.sort((j,Y)=>j.sortKey-Y.sortKey);for(const j of z){const{geometry:Y,index:Z,sourceLayerIndex:ne}=j;if(this.hasPattern){const ae=Q("fill",this.layers,j,this.zoom,m);this.patternFeatures.push(ae)}else this.addFeature(j,Y,Z,_,{});m.featureIndex.insert(c[Z].feature,Y,Z,ne,this.index)}}update(c,m,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,m,this.stateDependentLayers,_)}addFeatures(c,m,_){for(const I of this.patternFeatures)this.addFeature(I,I.geometry,I.index,m,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,aL),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.indexBuffer2=c.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(c,m,_,I,N){for(const z of E(m,500)){let j=0;for(const we of z)j+=we.length;const Y=this.segments.prepareSegment(j,this.layoutVertexArray,this.indexArray),Z=Y.vertexLength,ne=[],ae=[];for(const we of z){if(we.length===0)continue;we!==z[0]&&ae.push(ne.length/2);const Me=this.segments2.prepareSegment(we.length,this.layoutVertexArray,this.indexArray2),Re=Me.vertexLength;this.layoutVertexArray.emplaceBack(we[0].x,we[0].y),this.indexArray2.emplaceBack(Re+we.length-1,Re),ne.push(we[0].x),ne.push(we[0].y);for(let $e=1;$e<we.length;$e++)this.layoutVertexArray.emplaceBack(we[$e].x,we[$e].y),this.indexArray2.emplaceBack(Re+$e-1,Re+$e),ne.push(we[$e].x),ne.push(we[$e].y);Me.vertexLength+=we.length,Me.primitiveLength+=we.length}const ye=J1(ne,ae);for(let we=0;we<ye.length;we+=3)this.indexArray.emplaceBack(Z+ye[we],Z+ye[we+1],Z+ye[we+2]);Y.vertexLength+=j,Y.primitiveLength+=ye.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,_,N,I)}}let Ve,yt;wn("FillBucket",ce,{omit:["layers","patternFeatures"]});var jt={get paint(){return yt=yt||new ea({"fill-antialias":new On(We.paint_fill["fill-antialias"]),"fill-opacity":new Xn(We.paint_fill["fill-opacity"]),"fill-color":new Xn(We.paint_fill["fill-color"]),"fill-outline-color":new Xn(We.paint_fill["fill-outline-color"]),"fill-translate":new On(We.paint_fill["fill-translate"]),"fill-translate-anchor":new On(We.paint_fill["fill-translate-anchor"]),"fill-pattern":new Bu(We.paint_fill["fill-pattern"])})},get layout(){return Ve=Ve||new ea({"fill-sort-key":new Xn(We.layout_fill["fill-sort-key"])})}};class pn extends Cl{constructor(c){super(c,jt)}recalculate(c,m){super.recalculate(c,m);const _=this.paint._values["fill-outline-color"];_.value.kind==="constant"&&_.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new ce(c)}queryRadius(){return rg(this.paint.get("fill-translate"))}queryIntersectsFeature(c,m,_,I,N,z,j){return Yd(Bc(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),z.angle,j),I)}isTileClipped(){return!0}}const $n=oo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Er=oo([{name:"a_centroid",components:2,type:"Int16"}],4),{members:ar}=$n;var Xr={},nr=d,zs=Fs;function Fs(h,c,m,_,I){this.properties={},this.extent=m,this.type=0,this._pbf=h,this._geometry=-1,this._keys=_,this._values=I,h.readFields(kt,this,c)}function kt(h,c,m){h==1?c.id=m.readVarint():h==2?function(_,I){for(var N=_.readVarint()+_.pos;_.pos<N;){var z=I._keys[_.readVarint()],j=I._values[_.readVarint()];I.properties[z]=j}}(m,c):h==3?c.type=m.readVarint():h==4&&(c._geometry=m.pos)}function bt(h){for(var c,m,_=0,I=0,N=h.length,z=N-1;I<N;z=I++)_+=((m=h[z]).x-(c=h[I]).x)*(c.y+m.y);return _}Fs.types=["Unknown","Point","LineString","Polygon"],Fs.prototype.loadGeometry=function(){var h=this._pbf;h.pos=this._geometry;for(var c,m=h.readVarint()+h.pos,_=1,I=0,N=0,z=0,j=[];h.pos<m;){if(I<=0){var Y=h.readVarint();_=7&Y,I=Y>>3}if(I--,_===1||_===2)N+=h.readSVarint(),z+=h.readSVarint(),_===1&&(c&&j.push(c),c=[]),c.push(new nr(N,z));else{if(_!==7)throw new Error("unknown command "+_);c&&c.push(c[0].clone())}}return c&&j.push(c),j},Fs.prototype.bbox=function(){var h=this._pbf;h.pos=this._geometry;for(var c=h.readVarint()+h.pos,m=1,_=0,I=0,N=0,z=1/0,j=-1/0,Y=1/0,Z=-1/0;h.pos<c;){if(_<=0){var ne=h.readVarint();m=7&ne,_=ne>>3}if(_--,m===1||m===2)(I+=h.readSVarint())<z&&(z=I),I>j&&(j=I),(N+=h.readSVarint())<Y&&(Y=N),N>Z&&(Z=N);else if(m!==7)throw new Error("unknown command "+m)}return[z,Y,j,Z]},Fs.prototype.toGeoJSON=function(h,c,m){var _,I,N=this.extent*Math.pow(2,m),z=this.extent*h,j=this.extent*c,Y=this.loadGeometry(),Z=Fs.types[this.type];function ne(we){for(var Me=0;Me<we.length;Me++){var Re=we[Me];we[Me]=[360*(Re.x+z)/N-180,360/Math.PI*Math.atan(Math.exp((180-360*(Re.y+j)/N)*Math.PI/180))-90]}}switch(this.type){case 1:var ae=[];for(_=0;_<Y.length;_++)ae[_]=Y[_][0];ne(Y=ae);break;case 2:for(_=0;_<Y.length;_++)ne(Y[_]);break;case 3:for(Y=function(we){var Me=we.length;if(Me<=1)return[we];for(var Re,$e,Ke=[],_t=0;_t<Me;_t++){var Qe=bt(we[_t]);Qe!==0&&($e===void 0&&($e=Qe<0),$e===Qe<0?(Re&&Ke.push(Re),Re=[we[_t]]):Re.push(we[_t]))}return Re&&Ke.push(Re),Ke}(Y),_=0;_<Y.length;_++)for(I=0;I<Y[_].length;I++)ne(Y[_][I])}Y.length===1?Y=Y[0]:Z="Multi"+Z;var ye={type:"Feature",geometry:{type:Z,coordinates:Y},properties:this.properties};return"id"in this&&(ye.id=this.id),ye};var zt=zs,Pn=Jn;function Jn(h,c){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(Pr,this,c),this.length=this._features.length}function Pr(h,c,m){h===15?c.version=m.readVarint():h===1?c.name=m.readString():h===5?c.extent=m.readVarint():h===2?c._features.push(m.pos):h===3?c._keys.push(m.readString()):h===4&&c._values.push(function(_){for(var I=null,N=_.readVarint()+_.pos;_.pos<N;){var z=_.readVarint()>>3;I=z===1?_.readString():z===2?_.readFloat():z===3?_.readDouble():z===4?_.readVarint64():z===5?_.readVarint():z===6?_.readSVarint():z===7?_.readBoolean():null}return I}(m))}Jn.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[h];var c=this._pbf.readVarint()+this._pbf.pos;return new zt(this._pbf,c,this.extent,this._keys,this._values)};var Tr=Pn;function ii(h,c,m){if(h===3){var _=new Tr(m,m.readVarint()+m.pos);_.length&&(c[_.name]=_)}}Xr.VectorTile=function(h,c){this.layers=h.readFields(ii,{},c)},Xr.VectorTileFeature=zs,Xr.VectorTileLayer=Pn;const Ss=Xr.VectorTileFeature.types,Kr=Math.pow(2,13);function lc(h,c,m,_,I,N,z,j){h.emplaceBack(c,m,2*Math.floor(_*Kr)+z,I*Kr*2,N*Kr*2,Math.round(j))}class ew{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(m=>m.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new ze,this.centroidVertexArray=new le,this.indexArray=new Ct,this.programConfigurations=new Ei(c.layers,c.zoom),this.segments=new Kt,this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(c,m,_){this.features=[],this.hasPattern=G("fill-extrusion",this.layers,m);for(const{feature:I,id:N,index:z,sourceLayerIndex:j}of c){const Y=this.layers[0]._featureFilter.needGeometry,Z=Ri(I,Y);if(!this.layers[0]._featureFilter.filter(new Mi(this.zoom),Z,_))continue;const ne={id:N,sourceLayerIndex:j,index:z,geometry:Y?Z.geometry:ki(I),properties:I.properties,type:I.type,patterns:{}};this.hasPattern?this.features.push(Q("fill-extrusion",this.layers,ne,this.zoom,m)):this.addFeature(ne,ne.geometry,z,_,{}),m.featureIndex.insert(I,ne.geometry,z,j,this.index,!0)}}addFeatures(c,m,_){for(const I of this.features){const{geometry:N}=I;this.addFeature(I,N,I.index,m,_)}}update(c,m,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,m,this.stateDependentLayers,_)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,ar),this.centroidVertexBuffer=c.createVertexBuffer(this.centroidVertexArray,Er.members,!0),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(c,m,_,I,N){const z={x:0,y:0,vertexCount:0};for(const j of E(m,500)){let Y=0;for(const Me of j)Y+=Me.length;let Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Me of j){if(Me.length===0||vhe(Me))continue;let Re=0;for(let $e=0;$e<Me.length;$e++){const Ke=Me[$e];if($e>=1){const _t=Me[$e-1];if(!yhe(Ke,_t)){Z.vertexLength+4>Kt.MAX_VERTEX_ARRAY_LENGTH&&(Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Qe=Ke.sub(_t)._perp()._unit(),ut=_t.dist(Ke);Re+ut>32768&&(Re=0),lc(this.layoutVertexArray,Ke.x,Ke.y,Qe.x,Qe.y,0,0,Re),lc(this.layoutVertexArray,Ke.x,Ke.y,Qe.x,Qe.y,0,1,Re),z.x+=2*Ke.x,z.y+=2*Ke.y,z.vertexCount+=2,Re+=ut,lc(this.layoutVertexArray,_t.x,_t.y,Qe.x,Qe.y,0,0,Re),lc(this.layoutVertexArray,_t.x,_t.y,Qe.x,Qe.y,0,1,Re),z.x+=2*_t.x,z.y+=2*_t.y,z.vertexCount+=2;const Ft=Z.vertexLength;this.indexArray.emplaceBack(Ft,Ft+2,Ft+1),this.indexArray.emplaceBack(Ft+1,Ft+2,Ft+3),Z.vertexLength+=4,Z.primitiveLength+=2}}}}if(Z.vertexLength+Y>Kt.MAX_VERTEX_ARRAY_LENGTH&&(Z=this.segments.prepareSegment(Y,this.layoutVertexArray,this.indexArray)),Ss[c.type]!=="Polygon")continue;const ne=[],ae=[],ye=Z.vertexLength;for(const Me of j)if(Me.length!==0){Me!==j[0]&&ae.push(ne.length/2);for(let Re=0;Re<Me.length;Re++){const $e=Me[Re];lc(this.layoutVertexArray,$e.x,$e.y,0,0,1,1,0),z.x+=$e.x,z.y+=$e.y,z.vertexCount+=1,ne.push($e.x),ne.push($e.y)}}const we=J1(ne,ae);for(let Me=0;Me<we.length;Me+=3)this.indexArray.emplaceBack(ye+we[Me],ye+we[Me+2],ye+we[Me+1]);Z.primitiveLength+=we.length/3,Z.vertexLength+=Y}for(let j=0;j<z.vertexCount;j++)this.centroidVertexArray.emplaceBack(Math.floor(z.x/z.vertexCount),Math.floor(z.y/z.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,_,N,I)}}function yhe(h,c){return h.x===c.x&&(h.x<0||h.x>Sr)||h.y===c.y&&(h.y<0||h.y>Sr)}function vhe(h){return h.every(c=>c.x<0)||h.every(c=>c.x>Sr)||h.every(c=>c.y<0)||h.every(c=>c.y>Sr)}let E8;wn("FillExtrusionBucket",ew,{omit:["layers","features"]});var _he={get paint(){return E8=E8||new ea({"fill-extrusion-opacity":new On(We["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Xn(We["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new On(We["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new On(We["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Bu(We["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Xn(We["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Xn(We["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new On(We["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class xhe extends Cl{constructor(c){super(c,_he)}createBucket(c){return new ew(c)}queryRadius(){return rg(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(c,m,_,I,N,z,j,Y){const Z=Bc(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),z.angle,j),ne=this.paint.get("fill-extrusion-height").evaluate(m,_),ae=this.paint.get("fill-extrusion-base").evaluate(m,_),ye=function(Me,Re,$e,Ke){const _t=[];for(const Qe of Me){const ut=[Qe.x,Qe.y,0,1];wa(ut,ut,Re),_t.push(new p(ut[0]/ut[3],ut[1]/ut[3]))}return _t}(Z,Y),we=function(Me,Re,$e,Ke){const _t=[],Qe=[],ut=Ke[8]*Re,Ft=Ke[9]*Re,Ht=Ke[10]*Re,_n=Ke[11]*Re,Ln=Ke[8]*$e,vn=Ke[9]*$e,mn=Ke[10]*$e,ln=Ke[11]*$e;for(const An of Me){const hn=[],rn=[];for(const Kn of An){const Fn=Kn.x,Ar=Kn.y,Hi=Ke[0]*Fn+Ke[4]*Ar+Ke[12],to=Ke[1]*Fn+Ke[5]*Ar+Ke[13],ns=Ke[2]*Fn+Ke[6]*Ar+Ke[14],cc=Ke[3]*Fn+Ke[7]*Ar+Ke[15],Za=ns+Ht,Vo=cc+_n,Bs=Hi+Ln,ra=to+vn,Ja=ns+mn,Qa=cc+ln,rs=new p((Hi+ut)/Vo,(to+Ft)/Vo);rs.z=Za/Vo,hn.push(rs);const is=new p(Bs/Qa,ra/Qa);is.z=Ja/Qa,rn.push(is)}_t.push(hn),Qe.push(rn)}return[_t,Qe]}(I,ae,ne,Y);return function(Me,Re,$e){let Ke=1/0;Yd($e,Re)&&(Ke=T8($e,Re[0]));for(let _t=0;_t<Re.length;_t++){const Qe=Re[_t],ut=Me[_t];for(let Ft=0;Ft<Qe.length-1;Ft++){const Ht=Qe[Ft],_n=[Ht,Qe[Ft+1],ut[Ft+1],ut[Ft],Ht];Xa($e,_n)&&(Ke=Math.min(Ke,T8($e,_n)))}}return Ke!==1/0&&Ke}(we[0],we[1],ye)}}function tw(h,c){return h.x*c.x+h.y*c.y}function T8(h,c){if(h.length===1){let m=0;const _=c[m++];let I;for(;!I||_.equals(I);)if(I=c[m++],!I)return 1/0;for(;m<c.length;m++){const N=c[m],z=h[0],j=I.sub(_),Y=N.sub(_),Z=z.sub(_),ne=tw(j,j),ae=tw(j,Y),ye=tw(Y,Y),we=tw(Z,j),Me=tw(Z,Y),Re=ne*ye-ae*ae,$e=(ye*we-ae*Me)/Re,Ke=(ne*Me-ae*we)/Re,_t=_.z*(1-$e-Ke)+I.z*$e+N.z*Ke;if(isFinite(_t))return _t}return 1/0}{let m=1/0;for(const _ of c)m=Math.min(m,_.z);return m}}const bhe=oo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:whe}=bhe,She=oo([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Mhe}=She,Ehe=Xr.VectorTileFeature.types,The=Math.cos(Math.PI/180*37.5),C8=Math.pow(2,14)/.5;class hL{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(m=>m.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(m=>{this.gradients[m.id]={}}),this.layoutVertexArray=new De,this.layoutVertexArray2=new Be,this.indexArray=new Ct,this.programConfigurations=new Ei(c.layers,c.zoom),this.segments=new Kt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id)}populate(c,m,_){this.hasPattern=G("line",this.layers,m);const I=this.layers[0].layout.get("line-sort-key"),N=!I.isConstant(),z=[];for(const{feature:j,id:Y,index:Z,sourceLayerIndex:ne}of c){const ae=this.layers[0]._featureFilter.needGeometry,ye=Ri(j,ae);if(!this.layers[0]._featureFilter.filter(new Mi(this.zoom),ye,_))continue;const we=N?I.evaluate(ye,{},_):void 0,Me={id:Y,properties:j.properties,type:j.type,sourceLayerIndex:ne,index:Z,geometry:ae?ye.geometry:ki(j),patterns:{},sortKey:we};z.push(Me)}N&&z.sort((j,Y)=>j.sortKey-Y.sortKey);for(const j of z){const{geometry:Y,index:Z,sourceLayerIndex:ne}=j;if(this.hasPattern){const ae=Q("line",this.layers,j,this.zoom,m);this.patternFeatures.push(ae)}else this.addFeature(j,Y,Z,_,{});m.featureIndex.insert(c[Z].feature,Y,Z,ne,this.index)}}update(c,m,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,m,this.stateDependentLayers,_)}addFeatures(c,m,_){for(const I of this.patternFeatures)this.addFeature(I,I.geometry,I.index,m,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=c.createVertexBuffer(this.layoutVertexArray2,Mhe)),this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,whe),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(c){if(c.properties&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_end"))return{start:+c.properties.mapbox_clip_start,end:+c.properties.mapbox_clip_end}}addFeature(c,m,_,I,N){const z=this.layers[0].layout,j=z.get("line-join").evaluate(c,{}),Y=z.get("line-cap"),Z=z.get("line-miter-limit"),ne=z.get("line-round-limit");this.lineClips=this.lineFeatureClips(c);for(const ae of m)this.addLine(ae,c,j,Y,Z,ne);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,_,N,I)}addLine(c,m,_,I,N,z){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ke=0;Ke<c.length-1;Ke++)this.totalDistance+=c[Ke].dist(c[Ke+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const j=Ehe[m.type]==="Polygon";let Y=c.length;for(;Y>=2&&c[Y-1].equals(c[Y-2]);)Y--;let Z=0;for(;Z<Y-1&&c[Z].equals(c[Z+1]);)Z++;if(Y<(j?3:2))return;_==="bevel"&&(N=1.05);const ne=this.overscaling<=16?15*Sr/(512*this.overscaling):0,ae=this.segments.prepareSegment(10*Y,this.layoutVertexArray,this.indexArray);let ye,we,Me,Re,$e;this.e1=this.e2=-1,j&&(ye=c[Y-2],$e=c[Z].sub(ye)._unit()._perp());for(let Ke=Z;Ke<Y;Ke++){if(Me=Ke===Y-1?j?c[Z+1]:void 0:c[Ke+1],Me&&c[Ke].equals(Me))continue;$e&&(Re=$e),ye&&(we=ye),ye=c[Ke],$e=Me?Me.sub(ye)._unit()._perp():Re,Re=Re||$e;let _t=Re.add($e);_t.x===0&&_t.y===0||_t._unit();const Qe=Re.x*$e.x+Re.y*$e.y,ut=_t.x*$e.x+_t.y*$e.y,Ft=ut!==0?1/ut:1/0,Ht=2*Math.sqrt(2-2*ut),_n=ut<The&&we&&Me,Ln=Re.x*$e.y-Re.y*$e.x>0;if(_n&&Ke>Z){const ln=ye.dist(we);if(ln>2*ne){const An=ye.sub(ye.sub(we)._mult(ne/ln)._round());this.updateDistance(we,An),this.addCurrentVertex(An,Re,0,0,ae),we=An}}const vn=we&&Me;let mn=vn?_:j?"butt":I;if(vn&&mn==="round"&&(Ft<z?mn="miter":Ft<=2&&(mn="fakeround")),mn==="miter"&&Ft>N&&(mn="bevel"),mn==="bevel"&&(Ft>2&&(mn="flipbevel"),Ft<N&&(mn="miter")),we&&this.updateDistance(we,ye),mn==="miter")_t._mult(Ft),this.addCurrentVertex(ye,_t,0,0,ae);else if(mn==="flipbevel"){if(Ft>100)_t=$e.mult(-1);else{const ln=Ft*Re.add($e).mag()/Re.sub($e).mag();_t._perp()._mult(ln*(Ln?-1:1))}this.addCurrentVertex(ye,_t,0,0,ae),this.addCurrentVertex(ye,_t.mult(-1),0,0,ae)}else if(mn==="bevel"||mn==="fakeround"){const ln=-Math.sqrt(Ft*Ft-1),An=Ln?ln:0,hn=Ln?0:ln;if(we&&this.addCurrentVertex(ye,Re,An,hn,ae),mn==="fakeround"){const rn=Math.round(180*Ht/Math.PI/20);for(let Kn=1;Kn<rn;Kn++){let Fn=Kn/rn;if(Fn!==.5){const Hi=Fn-.5;Fn+=Fn*Hi*(Fn-1)*((1.0904+Qe*(Qe*(3.55645-1.43519*Qe)-3.2452))*Hi*Hi+(.848013+Qe*(.215638*Qe-1.06021)))}const Ar=$e.sub(Re)._mult(Fn)._add(Re)._unit()._mult(Ln?-1:1);this.addHalfVertex(ye,Ar.x,Ar.y,!1,Ln,0,ae)}}Me&&this.addCurrentVertex(ye,$e,-An,-hn,ae)}else if(mn==="butt")this.addCurrentVertex(ye,_t,0,0,ae);else if(mn==="square"){const ln=we?1:-1;this.addCurrentVertex(ye,_t,ln,ln,ae)}else mn==="round"&&(we&&(this.addCurrentVertex(ye,Re,0,0,ae),this.addCurrentVertex(ye,Re,1,1,ae,!0)),Me&&(this.addCurrentVertex(ye,$e,-1,-1,ae,!0),this.addCurrentVertex(ye,$e,0,0,ae)));if(_n&&Ke<Y-1){const ln=ye.dist(Me);if(ln>2*ne){const An=ye.add(Me.sub(ye)._mult(ne/ln)._round());this.updateDistance(ye,An),this.addCurrentVertex(An,$e,0,0,ae),ye=An}}}}addCurrentVertex(c,m,_,I,N,z=!1){const j=m.y*I-m.x,Y=-m.y-m.x*I;this.addHalfVertex(c,m.x+m.y*_,m.y-m.x*_,z,!1,_,N),this.addHalfVertex(c,j,Y,z,!0,-I,N),this.distance>C8/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(c,m,_,I,N,z))}addHalfVertex({x:c,y:m},_,I,N,z,j,Y){const Z=.5*(this.lineClips?this.scaledDistance*(C8-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((c<<1)+(N?1:0),(m<<1)+(z?1:0),Math.round(63*_)+128,Math.round(63*I)+128,1+(j===0?0:j<0?-1:1)|(63&Z)<<2,Z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ne=Y.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ne),Y.primitiveLength++),z?this.e2=ne:this.e1=ne}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(c,m){this.distance+=c.dist(m),this.updateScaledDistance()}}let A8,P8;wn("LineBucket",hL,{omit:["layers","patternFeatures"]});var I8={get paint(){return P8=P8||new ea({"line-opacity":new Xn(We.paint_line["line-opacity"]),"line-color":new Xn(We.paint_line["line-color"]),"line-translate":new On(We.paint_line["line-translate"]),"line-translate-anchor":new On(We.paint_line["line-translate-anchor"]),"line-width":new Xn(We.paint_line["line-width"]),"line-gap-width":new Xn(We.paint_line["line-gap-width"]),"line-offset":new Xn(We.paint_line["line-offset"]),"line-blur":new Xn(We.paint_line["line-blur"]),"line-dasharray":new Ym(We.paint_line["line-dasharray"]),"line-pattern":new Bu(We.paint_line["line-pattern"]),"line-gradient":new $u(We.paint_line["line-gradient"])})},get layout(){return A8=A8||new ea({"line-cap":new On(We.layout_line["line-cap"]),"line-join":new Xn(We.layout_line["line-join"]),"line-miter-limit":new On(We.layout_line["line-miter-limit"]),"line-round-limit":new On(We.layout_line["line-round-limit"]),"line-sort-key":new Xn(We.layout_line["line-sort-key"])})}};class Che extends Xn{possiblyEvaluate(c,m){return m=new Mi(Math.floor(m.zoom),{now:m.now,fadeDuration:m.fadeDuration,zoomHistory:m.zoomHistory,transition:m.transition}),super.possiblyEvaluate(c,m)}evaluate(c,m,_,I){return m=B({},m,{zoom:Math.floor(m.zoom)}),super.evaluate(c,m,_,I)}}let ZE;class Ahe extends Cl{constructor(c){super(c,I8),this.gradientVersion=0,ZE||(ZE=new Che(I8.paint.properties["line-width"].specification),ZE.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(c){if(c==="line-gradient"){const m=this.gradientExpression();this.stepInterpolant=!!function(_){return _._styleExpression!==void 0}(m)&&m._styleExpression.expression instanceof Ic,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(c,m){super.recalculate(c,m),this.paint._values["line-floorwidth"]=ZE.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new hL(c)}queryRadius(c){const m=c,_=k8(nf("line-width",this,m),nf("line-gap-width",this,m)),I=nf("line-offset",this,m);return _/2+Math.abs(I)+rg(this.paint.get("line-translate"))}queryIntersectsFeature(c,m,_,I,N,z,j){const Y=Bc(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),z.angle,j),Z=j/2*k8(this.paint.get("line-width").evaluate(m,_),this.paint.get("line-gap-width").evaluate(m,_)),ne=this.paint.get("line-offset").evaluate(m,_);return ne&&(I=function(ae,ye){const we=[];for(let Me=0;Me<ae.length;Me++){const Re=ae[Me],$e=[];for(let Ke=0;Ke<Re.length;Ke++){const _t=Re[Ke-1],Qe=Re[Ke],ut=Re[Ke+1],Ft=Ke===0?new p(0,0):Qe.sub(_t)._unit()._perp(),Ht=Ke===Re.length-1?new p(0,0):ut.sub(Qe)._unit()._perp(),_n=Ft._add(Ht)._unit(),Ln=_n.x*Ht.x+_n.y*Ht.y;Ln!==0&&_n._mult(1/Ln),$e.push(_n._mult(ye)._add(Qe))}we.push($e)}return we}(I,ne*j)),function(ae,ye,we){for(let Me=0;Me<ye.length;Me++){const Re=ye[Me];if(ae.length>=3){for(let $e=0;$e<Re.length;$e++)if(tf(ae,Re[$e]))return!0}if(Xd(ae,Re,we))return!0}return!1}(Y,I,Z)}isTileClipped(){return!0}}function k8(h,c){return c>0?c+2*h:h}const Phe=oo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Ihe=oo([{name:"a_projected_pos",components:3,type:"Float32"}],4);oo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const khe=oo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);oo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const R8=oo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Rhe=oo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Ohe(h,c,m){return h.sections.forEach(_=>{_.text=function(I,N,z){const j=N.layout.get("text-transform").evaluate(z,{});return j==="uppercase"?I=I.toLocaleUpperCase():j==="lowercase"&&(I=I.toLocaleLowerCase()),Fu.applyArabicShaping&&(I=Fu.applyArabicShaping(I)),I}(_.text,c,m)}),h}oo([{name:"triangle",components:3,type:"Uint16"}]),oo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),oo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),oo([{type:"Float32",name:"offsetX"}]),oo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),oo([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const nw={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var ts=24,O8=Ti,L8=function(h,c,m,_,I){var N,z,j=8*I-_-1,Y=(1<<j)-1,Z=Y>>1,ne=-7,ae=m?I-1:0,ye=m?-1:1,we=h[c+ae];for(ae+=ye,N=we&(1<<-ne)-1,we>>=-ne,ne+=j;ne>0;N=256*N+h[c+ae],ae+=ye,ne-=8);for(z=N&(1<<-ne)-1,N>>=-ne,ne+=_;ne>0;z=256*z+h[c+ae],ae+=ye,ne-=8);if(N===0)N=1-Z;else{if(N===Y)return z?NaN:1/0*(we?-1:1);z+=Math.pow(2,_),N-=Z}return(we?-1:1)*z*Math.pow(2,N-_)},D8=function(h,c,m,_,I,N){var z,j,Y,Z=8*N-I-1,ne=(1<<Z)-1,ae=ne>>1,ye=I===23?Math.pow(2,-24)-Math.pow(2,-77):0,we=_?0:N-1,Me=_?1:-1,Re=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(j=isNaN(c)?1:0,z=ne):(z=Math.floor(Math.log(c)/Math.LN2),c*(Y=Math.pow(2,-z))<1&&(z--,Y*=2),(c+=z+ae>=1?ye/Y:ye*Math.pow(2,1-ae))*Y>=2&&(z++,Y/=2),z+ae>=ne?(j=0,z=ne):z+ae>=1?(j=(c*Y-1)*Math.pow(2,I),z+=ae):(j=c*Math.pow(2,ae-1)*Math.pow(2,I),z=0));I>=8;h[m+we]=255&j,we+=Me,j/=256,I-=8);for(z=z<<I|j,Z+=I;Z>0;h[m+we]=255&z,we+=Me,z/=256,Z-=8);h[m+we-Me]|=128*Re};function Ti(h){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(h)?h:new Uint8Array(h||0),this.pos=0,this.type=0,this.length=this.buf.length}Ti.Varint=0,Ti.Fixed64=1,Ti.Bytes=2,Ti.Fixed32=5;var fL=4294967296,N8=1/fL,z8=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function _p(h){return h.type===Ti.Bytes?h.readVarint()+h.pos:h.pos+1}function d_(h,c,m){return m?4294967296*c+(h>>>0):4294967296*(c>>>0)+(h>>>0)}function F8(h,c,m){var _=c<=16383?1:c<=2097151?2:c<=268435455?3:Math.floor(Math.log(c)/(7*Math.LN2));m.realloc(_);for(var I=m.pos-1;I>=h;I--)m.buf[I+_]=m.buf[I]}function Lhe(h,c){for(var m=0;m<h.length;m++)c.writeVarint(h[m])}function Dhe(h,c){for(var m=0;m<h.length;m++)c.writeSVarint(h[m])}function Nhe(h,c){for(var m=0;m<h.length;m++)c.writeFloat(h[m])}function zhe(h,c){for(var m=0;m<h.length;m++)c.writeDouble(h[m])}function Fhe(h,c){for(var m=0;m<h.length;m++)c.writeBoolean(h[m])}function Bhe(h,c){for(var m=0;m<h.length;m++)c.writeFixed32(h[m])}function $he(h,c){for(var m=0;m<h.length;m++)c.writeSFixed32(h[m])}function jhe(h,c){for(var m=0;m<h.length;m++)c.writeFixed64(h[m])}function Uhe(h,c){for(var m=0;m<h.length;m++)c.writeSFixed64(h[m])}function JE(h,c){return(h[c]|h[c+1]<<8|h[c+2]<<16)+16777216*h[c+3]}function h_(h,c,m){h[m]=c,h[m+1]=c>>>8,h[m+2]=c>>>16,h[m+3]=c>>>24}function B8(h,c){return(h[c]|h[c+1]<<8|h[c+2]<<16)+(h[c+3]<<24)}Ti.prototype={destroy:function(){this.buf=null},readFields:function(h,c,m){for(m=m||this.length;this.pos<m;){var _=this.readVarint(),I=_>>3,N=this.pos;this.type=7&_,h(I,c,this),this.pos===N&&this.skip(_)}return c},readMessage:function(h,c){return this.readFields(h,c,this.readVarint()+this.pos)},readFixed32:function(){var h=JE(this.buf,this.pos);return this.pos+=4,h},readSFixed32:function(){var h=B8(this.buf,this.pos);return this.pos+=4,h},readFixed64:function(){var h=JE(this.buf,this.pos)+JE(this.buf,this.pos+4)*fL;return this.pos+=8,h},readSFixed64:function(){var h=JE(this.buf,this.pos)+B8(this.buf,this.pos+4)*fL;return this.pos+=8,h},readFloat:function(){var h=L8(this.buf,this.pos,!0,23,4);return this.pos+=4,h},readDouble:function(){var h=L8(this.buf,this.pos,!0,52,8);return this.pos+=8,h},readVarint:function(h){var c,m,_=this.buf;return c=127&(m=_[this.pos++]),m<128?c:(c|=(127&(m=_[this.pos++]))<<7,m<128?c:(c|=(127&(m=_[this.pos++]))<<14,m<128?c:(c|=(127&(m=_[this.pos++]))<<21,m<128?c:function(I,N,z){var j,Y,Z=z.buf;if(j=(112&(Y=Z[z.pos++]))>>4,Y<128||(j|=(127&(Y=Z[z.pos++]))<<3,Y<128)||(j|=(127&(Y=Z[z.pos++]))<<10,Y<128)||(j|=(127&(Y=Z[z.pos++]))<<17,Y<128)||(j|=(127&(Y=Z[z.pos++]))<<24,Y<128)||(j|=(1&(Y=Z[z.pos++]))<<31,Y<128))return d_(I,j,N);throw new Error("Expected varint not more than 10 bytes")}(c|=(15&(m=_[this.pos]))<<28,h,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var h=this.readVarint();return h%2==1?(h+1)/-2:h/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var h=this.readVarint()+this.pos,c=this.pos;return this.pos=h,h-c>=12&&z8?function(m,_,I){return z8.decode(m.subarray(_,I))}(this.buf,c,h):function(m,_,I){for(var N="",z=_;z<I;){var j,Y,Z,ne=m[z],ae=null,ye=ne>239?4:ne>223?3:ne>191?2:1;if(z+ye>I)break;ye===1?ne<128&&(ae=ne):ye===2?(192&(j=m[z+1]))==128&&(ae=(31&ne)<<6|63&j)<=127&&(ae=null):ye===3?(Y=m[z+2],(192&(j=m[z+1]))==128&&(192&Y)==128&&((ae=(15&ne)<<12|(63&j)<<6|63&Y)<=2047||ae>=55296&&ae<=57343)&&(ae=null)):ye===4&&(Y=m[z+2],Z=m[z+3],(192&(j=m[z+1]))==128&&(192&Y)==128&&(192&Z)==128&&((ae=(15&ne)<<18|(63&j)<<12|(63&Y)<<6|63&Z)<=65535||ae>=1114112)&&(ae=null)),ae===null?(ae=65533,ye=1):ae>65535&&(ae-=65536,N+=String.fromCharCode(ae>>>10&1023|55296),ae=56320|1023&ae),N+=String.fromCharCode(ae),z+=ye}return N}(this.buf,c,h)},readBytes:function(){var h=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,h);return this.pos=h,c},readPackedVarint:function(h,c){if(this.type!==Ti.Bytes)return h.push(this.readVarint(c));var m=_p(this);for(h=h||[];this.pos<m;)h.push(this.readVarint(c));return h},readPackedSVarint:function(h){if(this.type!==Ti.Bytes)return h.push(this.readSVarint());var c=_p(this);for(h=h||[];this.pos<c;)h.push(this.readSVarint());return h},readPackedBoolean:function(h){if(this.type!==Ti.Bytes)return h.push(this.readBoolean());var c=_p(this);for(h=h||[];this.pos<c;)h.push(this.readBoolean());return h},readPackedFloat:function(h){if(this.type!==Ti.Bytes)return h.push(this.readFloat());var c=_p(this);for(h=h||[];this.pos<c;)h.push(this.readFloat());return h},readPackedDouble:function(h){if(this.type!==Ti.Bytes)return h.push(this.readDouble());var c=_p(this);for(h=h||[];this.pos<c;)h.push(this.readDouble());return h},readPackedFixed32:function(h){if(this.type!==Ti.Bytes)return h.push(this.readFixed32());var c=_p(this);for(h=h||[];this.pos<c;)h.push(this.readFixed32());return h},readPackedSFixed32:function(h){if(this.type!==Ti.Bytes)return h.push(this.readSFixed32());var c=_p(this);for(h=h||[];this.pos<c;)h.push(this.readSFixed32());return h},readPackedFixed64:function(h){if(this.type!==Ti.Bytes)return h.push(this.readFixed64());var c=_p(this);for(h=h||[];this.pos<c;)h.push(this.readFixed64());return h},readPackedSFixed64:function(h){if(this.type!==Ti.Bytes)return h.push(this.readSFixed64());var c=_p(this);for(h=h||[];this.pos<c;)h.push(this.readSFixed64());return h},skip:function(h){var c=7&h;if(c===Ti.Varint)for(;this.buf[this.pos++]>127;);else if(c===Ti.Bytes)this.pos=this.readVarint()+this.pos;else if(c===Ti.Fixed32)this.pos+=4;else{if(c!==Ti.Fixed64)throw new Error("Unimplemented type: "+c);this.pos+=8}},writeTag:function(h,c){this.writeVarint(h<<3|c)},realloc:function(h){for(var c=this.length||16;c<this.pos+h;)c*=2;if(c!==this.length){var m=new Uint8Array(c);m.set(this.buf),this.buf=m,this.length=c}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(h){this.realloc(4),h_(this.buf,h,this.pos),this.pos+=4},writeSFixed32:function(h){this.realloc(4),h_(this.buf,h,this.pos),this.pos+=4},writeFixed64:function(h){this.realloc(8),h_(this.buf,-1&h,this.pos),h_(this.buf,Math.floor(h*N8),this.pos+4),this.pos+=8},writeSFixed64:function(h){this.realloc(8),h_(this.buf,-1&h,this.pos),h_(this.buf,Math.floor(h*N8),this.pos+4),this.pos+=8},writeVarint:function(h){(h=+h||0)>268435455||h<0?function(c,m){var _,I;if(c>=0?(_=c%4294967296|0,I=c/4294967296|0):(I=~(-c/4294967296),4294967295^(_=~(-c%4294967296))?_=_+1|0:(_=0,I=I+1|0)),c>=18446744073709552e3||c<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");m.realloc(10),function(N,z,j){j.buf[j.pos++]=127&N|128,N>>>=7,j.buf[j.pos++]=127&N|128,N>>>=7,j.buf[j.pos++]=127&N|128,N>>>=7,j.buf[j.pos++]=127&N|128,j.buf[j.pos]=127&(N>>>=7)}(_,0,m),function(N,z){var j=(7&N)<<4;z.buf[z.pos++]|=j|((N>>>=3)?128:0),N&&(z.buf[z.pos++]=127&N|((N>>>=7)?128:0),N&&(z.buf[z.pos++]=127&N|((N>>>=7)?128:0),N&&(z.buf[z.pos++]=127&N|((N>>>=7)?128:0),N&&(z.buf[z.pos++]=127&N|((N>>>=7)?128:0),N&&(z.buf[z.pos++]=127&N)))))}(I,m)}(h,this):(this.realloc(4),this.buf[this.pos++]=127&h|(h>127?128:0),h<=127||(this.buf[this.pos++]=127&(h>>>=7)|(h>127?128:0),h<=127||(this.buf[this.pos++]=127&(h>>>=7)|(h>127?128:0),h<=127||(this.buf[this.pos++]=h>>>7&127))))},writeSVarint:function(h){this.writeVarint(h<0?2*-h-1:2*h)},writeBoolean:function(h){this.writeVarint(!!h)},writeString:function(h){h=String(h),this.realloc(4*h.length),this.pos++;var c=this.pos;this.pos=function(_,I,N){for(var z,j,Y=0;Y<I.length;Y++){if((z=I.charCodeAt(Y))>55295&&z<57344){if(!j){z>56319||Y+1===I.length?(_[N++]=239,_[N++]=191,_[N++]=189):j=z;continue}if(z<56320){_[N++]=239,_[N++]=191,_[N++]=189,j=z;continue}z=j-55296<<10|z-56320|65536,j=null}else j&&(_[N++]=239,_[N++]=191,_[N++]=189,j=null);z<128?_[N++]=z:(z<2048?_[N++]=z>>6|192:(z<65536?_[N++]=z>>12|224:(_[N++]=z>>18|240,_[N++]=z>>12&63|128),_[N++]=z>>6&63|128),_[N++]=63&z|128)}return N}(this.buf,h,this.pos);var m=this.pos-c;m>=128&&F8(c,m,this),this.pos=c-1,this.writeVarint(m),this.pos+=m},writeFloat:function(h){this.realloc(4),D8(this.buf,h,this.pos,!0,23,4),this.pos+=4},writeDouble:function(h){this.realloc(8),D8(this.buf,h,this.pos,!0,52,8),this.pos+=8},writeBytes:function(h){var c=h.length;this.writeVarint(c),this.realloc(c);for(var m=0;m<c;m++)this.buf[this.pos++]=h[m]},writeRawMessage:function(h,c){this.pos++;var m=this.pos;h(c,this);var _=this.pos-m;_>=128&&F8(m,_,this),this.pos=m-1,this.writeVarint(_),this.pos+=_},writeMessage:function(h,c,m){this.writeTag(h,Ti.Bytes),this.writeRawMessage(c,m)},writePackedVarint:function(h,c){c.length&&this.writeMessage(h,Lhe,c)},writePackedSVarint:function(h,c){c.length&&this.writeMessage(h,Dhe,c)},writePackedBoolean:function(h,c){c.length&&this.writeMessage(h,Fhe,c)},writePackedFloat:function(h,c){c.length&&this.writeMessage(h,Nhe,c)},writePackedDouble:function(h,c){c.length&&this.writeMessage(h,zhe,c)},writePackedFixed32:function(h,c){c.length&&this.writeMessage(h,Bhe,c)},writePackedSFixed32:function(h,c){c.length&&this.writeMessage(h,$he,c)},writePackedFixed64:function(h,c){c.length&&this.writeMessage(h,jhe,c)},writePackedSFixed64:function(h,c){c.length&&this.writeMessage(h,Uhe,c)},writeBytesField:function(h,c){this.writeTag(h,Ti.Bytes),this.writeBytes(c)},writeFixed32Field:function(h,c){this.writeTag(h,Ti.Fixed32),this.writeFixed32(c)},writeSFixed32Field:function(h,c){this.writeTag(h,Ti.Fixed32),this.writeSFixed32(c)},writeFixed64Field:function(h,c){this.writeTag(h,Ti.Fixed64),this.writeFixed64(c)},writeSFixed64Field:function(h,c){this.writeTag(h,Ti.Fixed64),this.writeSFixed64(c)},writeVarintField:function(h,c){this.writeTag(h,Ti.Varint),this.writeVarint(c)},writeSVarintField:function(h,c){this.writeTag(h,Ti.Varint),this.writeSVarint(c)},writeStringField:function(h,c){this.writeTag(h,Ti.Bytes),this.writeString(c)},writeFloatField:function(h,c){this.writeTag(h,Ti.Fixed32),this.writeFloat(c)},writeDoubleField:function(h,c){this.writeTag(h,Ti.Fixed64),this.writeDouble(c)},writeBooleanField:function(h,c){this.writeVarintField(h,!!c)}};var pL=l(O8);const mL=3;function Vhe(h,c,m){h===1&&m.readMessage(Whe,c)}function Whe(h,c,m){if(h===3){const{id:_,bitmap:I,width:N,height:z,left:j,top:Y,advance:Z}=m.readMessage(Hhe,{});c.push({id:_,bitmap:new og({width:N+2*mL,height:z+2*mL},I),metrics:{width:N,height:z,left:j,top:Y,advance:Z}})}}function Hhe(h,c,m){h===1?c.id=m.readVarint():h===2?c.bitmap=m.readBytes():h===3?c.width=m.readVarint():h===4?c.height=m.readVarint():h===5?c.left=m.readSVarint():h===6?c.top=m.readSVarint():h===7&&(c.advance=m.readVarint())}const $8=mL;function j8(h){let c=0,m=0;for(const z of h)c+=z.w*z.h,m=Math.max(m,z.w);h.sort((z,j)=>j.h-z.h);const _=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(c/.95)),m),h:1/0}];let I=0,N=0;for(const z of h)for(let j=_.length-1;j>=0;j--){const Y=_[j];if(!(z.w>Y.w||z.h>Y.h)){if(z.x=Y.x,z.y=Y.y,N=Math.max(N,z.y+z.h),I=Math.max(I,z.x+z.w),z.w===Y.w&&z.h===Y.h){const Z=_.pop();j<_.length&&(_[j]=Z)}else z.h===Y.h?(Y.x+=z.w,Y.w-=z.w):z.w===Y.w?(Y.y+=z.h,Y.h-=z.h):(_.push({x:Y.x+z.w,y:Y.y,w:Y.w-z.w,h:z.h}),Y.y+=z.h,Y.h-=z.h);break}}return{w:I,h:N,fill:c/(I*N)||0}}const Al=1;class gL{constructor(c,{pixelRatio:m,version:_,stretchX:I,stretchY:N,content:z}){this.paddedRect=c,this.pixelRatio=m,this.stretchX=I,this.stretchY=N,this.content=z,this.version=_}get tl(){return[this.paddedRect.x+Al,this.paddedRect.y+Al]}get br(){return[this.paddedRect.x+this.paddedRect.w-Al,this.paddedRect.y+this.paddedRect.h-Al]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Al)/this.pixelRatio,(this.paddedRect.h-2*Al)/this.pixelRatio]}}class U8{constructor(c,m){const _={},I={};this.haveRenderCallbacks=[];const N=[];this.addImages(c,_,N),this.addImages(m,I,N);const{w:z,h:j}=j8(N),Y=new Ma({width:z||1,height:j||1});for(const Z in c){const ne=c[Z],ae=_[Z].paddedRect;Ma.copy(ne.data,Y,{x:0,y:0},{x:ae.x+Al,y:ae.y+Al},ne.data)}for(const Z in m){const ne=m[Z],ae=I[Z].paddedRect,ye=ae.x+Al,we=ae.y+Al,Me=ne.data.width,Re=ne.data.height;Ma.copy(ne.data,Y,{x:0,y:0},{x:ye,y:we},ne.data),Ma.copy(ne.data,Y,{x:0,y:Re-1},{x:ye,y:we-1},{width:Me,height:1}),Ma.copy(ne.data,Y,{x:0,y:0},{x:ye,y:we+Re},{width:Me,height:1}),Ma.copy(ne.data,Y,{x:Me-1,y:0},{x:ye-1,y:we},{width:1,height:Re}),Ma.copy(ne.data,Y,{x:0,y:0},{x:ye+Me,y:we},{width:1,height:Re})}this.image=Y,this.iconPositions=_,this.patternPositions=I}addImages(c,m,_){for(const I in c){const N=c[I],z={x:0,y:0,w:N.data.width+2*Al,h:N.data.height+2*Al};_.push(z),m[I]=new gL(z,N),N.hasRenderCallback&&this.haveRenderCallbacks.push(I)}}patchUpdatedImages(c,m){c.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const _ in c.updatedImages)this.patchUpdatedImage(this.iconPositions[_],c.getImage(_),m),this.patchUpdatedImage(this.patternPositions[_],c.getImage(_),m)}patchUpdatedImage(c,m,_){if(!c||!m||c.version===m.version)return;c.version=m.version;const[I,N]=c.tl;_.update(m.data,void 0,{x:I,y:N})}}var ag;wn("ImagePosition",gL),wn("ImageAtlas",U8),s.ah=void 0,(ag=s.ah||(s.ah={}))[ag.none=0]="none",ag[ag.horizontal=1]="horizontal",ag[ag.vertical=2]="vertical",ag[ag.horizontalOnly=3]="horizontalOnly";const rw=-17;class iw{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(c,m){const _=new iw;return _.scale=c||1,_.fontStack=m,_}static forImage(c){const m=new iw;return m.imageName=c,m}}class f_{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(c,m){const _=new f_;for(let I=0;I<c.sections.length;I++){const N=c.sections[I];N.image?_.addImageSection(N):_.addTextSection(N,m)}return _}length(){return this.text.length}getSection(c){return this.sections[this.sectionIndex[c]]}getSectionIndex(c){return this.sectionIndex[c]}getCharCode(c){return this.text.charCodeAt(c)}verticalizePunctuation(){this.text=function(c){let m="";for(let _=0;_<c.length;_++){const I=c.charCodeAt(_+1)||null,N=c.charCodeAt(_-1)||null;m+=I&&Zh(I)&&!nw[c[_+1]]||N&&Zh(N)&&!nw[c[_-1]]||!nw[c[_]]?c[_]:nw[c[_]]}return m}(this.text)}trim(){let c=0;for(let _=0;_<this.text.length&&eT[this.text.charCodeAt(_)];_++)c++;let m=this.text.length;for(let _=this.text.length-1;_>=0&&_>=c&&eT[this.text.charCodeAt(_)];_--)m--;this.text=this.text.substring(c,m),this.sectionIndex=this.sectionIndex.slice(c,m)}substring(c,m){const _=new f_;return _.text=this.text.substring(c,m),_.sectionIndex=this.sectionIndex.slice(c,m),_.sections=this.sections,_}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((c,m)=>Math.max(c,this.sections[m].scale),0)}addTextSection(c,m){this.text+=c.text,this.sections.push(iw.forText(c.scale,c.fontStack||m));const _=this.sections.length-1;for(let I=0;I<c.text.length;++I)this.sectionIndex.push(_)}addImageSection(c){const m=c.image?c.image.name:"";if(m.length===0)return void pe("Can't add FormattedSection with an empty image.");const _=this.getNextImageSectionCharCode();_?(this.text+=String.fromCharCode(_),this.sections.push(iw.forImage(m)),this.sectionIndex.push(this.sections.length-1)):pe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function QE(h,c,m,_,I,N,z,j,Y,Z,ne,ae,ye,we,Me,Re){const $e=f_.fromFeature(h,I);let Ke;ae===s.ah.vertical&&$e.verticalizePunctuation();const{processBidirectionalText:_t,processStyledBidirectionalText:Qe}=Fu;if(_t&&$e.sections.length===1){Ke=[];const Ht=_t($e.toString(),yL($e,Z,N,c,_,we,Me));for(const _n of Ht){const Ln=new f_;Ln.text=_n,Ln.sections=$e.sections;for(let vn=0;vn<_n.length;vn++)Ln.sectionIndex.push(0);Ke.push(Ln)}}else if(Qe){Ke=[];const Ht=Qe($e.text,$e.sectionIndex,yL($e,Z,N,c,_,we,Me));for(const _n of Ht){const Ln=new f_;Ln.text=_n[0],Ln.sectionIndex=_n[1],Ln.sections=$e.sections,Ke.push(Ln)}}else Ke=function(Ht,_n){const Ln=[],vn=Ht.text;let mn=0;for(const ln of _n)Ln.push(Ht.substring(mn,ln)),mn=ln;return mn<vn.length&&Ln.push(Ht.substring(mn,vn.length)),Ln}($e,yL($e,Z,N,c,_,we,Me));const ut=[],Ft={positionedLines:ut,text:$e.toString(),top:ne[1],bottom:ne[1],left:ne[0],right:ne[0],writingMode:ae,iconsInText:!1,verticalizable:!1};return function(Ht,_n,Ln,vn,mn,ln,An,hn,rn,Kn,Fn,Ar){let Hi=0,to=rw,ns=0,cc=0;const Za=hn==="right"?1:hn==="left"?0:.5;let Vo=0;for(const rs of mn){rs.trim();const is=rs.getMaxScale(),Ea=(is-1)*ts,el={positionedGlyphs:[],lineOffset:0};Ht.positionedLines[Vo]=el;const Ta=el.positionedGlyphs;let Pl=0;if(!rs.length()){to+=ln,++Vo;continue}for(let os=0;os<rs.length();os++){const Dr=rs.getSection(os),Ca=rs.getSectionIndex(os),ia=rs.getCharCode(os);let ss=0,Hu=null,Jd=null,Qd=null,xp=ts;const Gu=!(rn===s.ah.horizontal||!Fn&&!Ud(ia)||Fn&&(eT[ia]||(Bs=ia,yn.Arabic(Bs)||yn["Arabic Supplement"](Bs)||yn["Arabic Extended-A"](Bs)||yn["Arabic Presentation Forms-A"](Bs)||yn["Arabic Presentation Forms-B"](Bs))));if(Dr.imageName){const Vc=vn[Dr.imageName];if(!Vc)continue;Qd=Dr.imageName,Ht.iconsInText=Ht.iconsInText||!0,Jd=Vc.paddedRect;const kl=Vc.displaySize;Dr.scale=Dr.scale*ts/Ar,Hu={width:kl[0],height:kl[1],left:Al,top:-$8,advance:Gu?kl[1]:kl[0]},ss=Ea+(ts-kl[1]*Dr.scale),xp=Hu.advance;const bp=Gu?kl[0]*Dr.scale-ts*is:kl[1]*Dr.scale-ts*is;bp>0&&bp>Pl&&(Pl=bp)}else{const Vc=Ln[Dr.fontStack],kl=Vc&&Vc[ia];if(kl&&kl.rect)Jd=kl.rect,Hu=kl.metrics;else{const bp=_n[Dr.fontStack],cw=bp&&bp[ia];if(!cw)continue;Hu=cw.metrics}ss=(is-Dr.scale)*ts}Gu?(Ht.verticalizable=!0,Ta.push({glyph:ia,imageName:Qd,x:Hi,y:to+ss,vertical:Gu,scale:Dr.scale,fontStack:Dr.fontStack,sectionIndex:Ca,metrics:Hu,rect:Jd}),Hi+=xp*Dr.scale+Kn):(Ta.push({glyph:ia,imageName:Qd,x:Hi,y:to+ss,vertical:Gu,scale:Dr.scale,fontStack:Dr.fontStack,sectionIndex:Ca,metrics:Hu,rect:Jd}),Hi+=Hu.advance*Dr.scale+Kn)}Ta.length!==0&&(ns=Math.max(Hi-Kn,ns),Yhe(Ta,0,Ta.length-1,Za,Pl)),Hi=0;const Il=ln*is+Pl;el.lineOffset=Math.max(Pl,Ea),to+=Il,cc=Math.max(Il,cc),++Vo}var Bs;const ra=to-rw,{horizontalAlign:Ja,verticalAlign:Qa}=vL(An);(function(rs,is,Ea,el,Ta,Pl,Il,os,Dr){const Ca=(is-Ea)*Ta;let ia=0;ia=Pl!==Il?-os*el-rw:(-el*Dr+.5)*Il;for(const ss of rs)for(const Hu of ss.positionedGlyphs)Hu.x+=Ca,Hu.y+=ia})(Ht.positionedLines,Za,Ja,Qa,ns,cc,ln,ra,mn.length),Ht.top+=-Qa*ra,Ht.bottom=Ht.top+ra,Ht.left+=-Ja*ns,Ht.right=Ht.left+ns}(Ft,c,m,_,Ke,z,j,Y,ae,Z,ye,Re),!function(Ht){for(const _n of Ht)if(_n.positionedGlyphs.length!==0)return!1;return!0}(ut)&&Ft}const eT={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ghe={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function V8(h,c,m,_,I,N){if(c.imageName){const z=_[c.imageName];return z?z.displaySize[0]*c.scale*ts/N+I:0}{const z=m[c.fontStack],j=z&&z[h];return j?j.metrics.advance*c.scale+I:0}}function W8(h,c,m,_){const I=Math.pow(h-c,2);return _?h<c?I/2:2*I:I+Math.abs(m)*m}function qhe(h,c,m){let _=0;return h===10&&(_-=1e4),m&&(_+=150),h!==40&&h!==65288||(_+=50),c!==41&&c!==65289||(_+=50),_}function H8(h,c,m,_,I,N){let z=null,j=W8(c,m,I,N);for(const Y of _){const Z=W8(c-Y.x,m,I,N)+Y.badness;Z<=j&&(z=Y,j=Z)}return{index:h,x:c,priorBreak:z,badness:j}}function G8(h){return h?G8(h.priorBreak).concat(h.index):[]}function yL(h,c,m,_,I,N,z){if(N!=="point")return[];if(!h)return[];const j=[],Y=function(ye,we,Me,Re,$e,Ke){let _t=0;for(let Qe=0;Qe<ye.length();Qe++){const ut=ye.getSection(Qe);_t+=V8(ye.getCharCode(Qe),ut,Re,$e,we,Ke)}return _t/Math.max(1,Math.ceil(_t/Me))}(h,c,m,_,I,z),Z=h.text.indexOf("")>=0;let ne=0;for(let ye=0;ye<h.length();ye++){const we=h.getSection(ye),Me=h.getCharCode(ye);if(eT[Me]||(ne+=V8(Me,we,_,I,c,z)),ye<h.length()-1){const Re=!((ae=Me)<11904||!(yn["Bopomofo Extended"](ae)||yn.Bopomofo(ae)||yn["CJK Compatibility Forms"](ae)||yn["CJK Compatibility Ideographs"](ae)||yn["CJK Compatibility"](ae)||yn["CJK Radicals Supplement"](ae)||yn["CJK Strokes"](ae)||yn["CJK Symbols and Punctuation"](ae)||yn["CJK Unified Ideographs Extension A"](ae)||yn["CJK Unified Ideographs"](ae)||yn["Enclosed CJK Letters and Months"](ae)||yn["Halfwidth and Fullwidth Forms"](ae)||yn.Hiragana(ae)||yn["Ideographic Description Characters"](ae)||yn["Kangxi Radicals"](ae)||yn["Katakana Phonetic Extensions"](ae)||yn.Katakana(ae)||yn["Vertical Forms"](ae)||yn["Yi Radicals"](ae)||yn["Yi Syllables"](ae)));(Ghe[Me]||Re||we.imageName)&&j.push(H8(ye+1,ne,Y,j,qhe(Me,h.getCharCode(ye+1),Re&&Z),!1))}}var ae;return G8(H8(h.length(),ne,Y,j,0,!0))}function vL(h){let c=.5,m=.5;switch(h){case"right":case"top-right":case"bottom-right":c=1;break;case"left":case"top-left":case"bottom-left":c=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":m=1;break;case"top":case"top-right":case"top-left":m=0}return{horizontalAlign:c,verticalAlign:m}}function Yhe(h,c,m,_,I){if(!_&&!I)return;const N=h[m],z=(h[m].x+N.metrics.advance*N.scale)*_;for(let j=c;j<=m;j++)h[j].x-=z,h[j].y+=I}function Xhe(h,c,m){const{horizontalAlign:_,verticalAlign:I}=vL(m),N=c[0]-h.displaySize[0]*_,z=c[1]-h.displaySize[1]*I;return{image:h,top:z,bottom:z+h.displaySize[1],left:N,right:N+h.displaySize[0]}}function q8(h,c,m,_,I,N){const z=h.image;let j;if(z.content){const $e=z.content,Ke=z.pixelRatio||1;j=[$e[0]/Ke,$e[1]/Ke,z.displaySize[0]-$e[2]/Ke,z.displaySize[1]-$e[3]/Ke]}const Y=c.left*N,Z=c.right*N;let ne,ae,ye,we;m==="width"||m==="both"?(we=I[0]+Y-_[3],ae=I[0]+Z+_[1]):(we=I[0]+(Y+Z-z.displaySize[0])/2,ae=we+z.displaySize[0]);const Me=c.top*N,Re=c.bottom*N;return m==="height"||m==="both"?(ne=I[1]+Me-_[0],ye=I[1]+Re+_[2]):(ne=I[1]+(Me+Re-z.displaySize[1])/2,ye=ne+z.displaySize[1]),{image:z,top:ne,right:ae,bottom:ye,left:we,collisionPadding:j}}const ow=255,lf=128,lg=ow*lf;function Y8(h,c){const{expression:m}=c;if(m.kind==="constant")return{kind:"constant",layoutSize:m.evaluate(new Mi(h+1))};if(m.kind==="source")return{kind:"source"};{const{zoomStops:_,interpolationType:I}=m;let N=0;for(;N<_.length&&_[N]<=h;)N++;N=Math.max(0,N-1);let z=N;for(;z<_.length&&_[z]<h+1;)z++;z=Math.min(_.length-1,z);const j=_[N],Y=_[z];return m.kind==="composite"?{kind:"composite",minZoom:j,maxZoom:Y,interpolationType:I}:{kind:"camera",minZoom:j,maxZoom:Y,minSize:m.evaluate(new Mi(j)),maxSize:m.evaluate(new Mi(Y)),interpolationType:I}}}function _L(h,c,m){let _="never";const I=h.get(c);return I?_=I:h.get(m)&&(_="always"),_}const Khe=Xr.VectorTileFeature.types,Zhe=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function tT(h,c,m,_,I,N,z,j,Y,Z,ne,ae,ye){const we=j?Math.min(lg,Math.round(j[0])):0,Me=j?Math.min(lg,Math.round(j[1])):0;h.emplaceBack(c,m,Math.round(32*_),Math.round(32*I),N,z,(we<<1)+(Y?1:0),Me,16*Z,16*ne,256*ae,256*ye)}function xL(h,c,m){h.emplaceBack(c.x,c.y,m),h.emplaceBack(c.x,c.y,m),h.emplaceBack(c.x,c.y,m),h.emplaceBack(c.x,c.y,m)}function Jhe(h){for(const c of h.sections)if(Yy(c.text))return!0;return!1}class bL{constructor(c){this.layoutVertexArray=new Le,this.indexArray=new Ct,this.programConfigurations=c,this.segments=new Kt,this.dynamicLayoutVertexArray=new Et,this.opacityVertexArray=new He,this.hasVisibleVertices=!1,this.placedSymbolArray=new u}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(c,m,_,I){this.isEmpty()||(_&&(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Phe.members),this.indexBuffer=c.createIndexBuffer(this.indexArray,m),this.dynamicLayoutVertexBuffer=c.createVertexBuffer(this.dynamicLayoutVertexArray,Ihe.members,!0),this.opacityVertexBuffer=c.createVertexBuffer(this.opacityVertexArray,Zhe,!0),this.opacityVertexBuffer.itemSize=1),(_||I)&&this.programConfigurations.upload(c))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}wn("SymbolBuffers",bL);class wL{constructor(c,m,_){this.layoutVertexArray=new c,this.layoutAttributes=m,this.indexArray=new _,this.segments=new Kt,this.collisionVertexArray=new Pt}upload(c){this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=c.createVertexBuffer(this.collisionVertexArray,khe.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}wn("CollisionBuffers",wL);class p_{constructor(c){this.collisionBoxArray=c.collisionBoxArray,this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(z=>z.id),this.index=c.index,this.pixelRatio=c.pixelRatio,this.sourceLayerIndex=c.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ig([]),this.placementViewportMatrix=ig([]);const m=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Y8(this.zoom,m["text-size"]),this.iconSizeData=Y8(this.zoom,m["icon-size"]);const _=this.layers[0].layout,I=_.get("symbol-sort-key"),N=_.get("symbol-z-order");this.canOverlap=_L(_,"text-overlap","text-allow-overlap")!=="never"||_L(_,"icon-overlap","icon-allow-overlap")!=="never"||_.get("text-ignore-placement")||_.get("icon-ignore-placement"),this.sortFeaturesByKey=N!=="viewport-y"&&!I.isConstant(),this.sortFeaturesByY=(N==="viewport-y"||N==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,_.get("symbol-placement")==="point"&&(this.writingModes=_.get("text-writing-mode").map(z=>s.ah[z])),this.stateDependentLayerIds=this.layers.filter(z=>z.isStateDependent()).map(z=>z.id),this.sourceID=c.sourceID}createArrays(){this.text=new bL(new Ei(this.layers,this.zoom,c=>/^text/.test(c))),this.icon=new bL(new Ei(this.layers,this.zoom,c=>/^icon/.test(c))),this.glyphOffsetArray=new P,this.lineVertexArray=new L,this.symbolInstances=new A,this.textAnchorOffsets=new q}calculateGlyphDependencies(c,m,_,I,N){for(let z=0;z<c.length;z++)if(m[c.charCodeAt(z)]=!0,(_||I)&&N){const j=nw[c.charAt(z)];j&&(m[j.charCodeAt(0)]=!0)}}populate(c,m,_){const I=this.layers[0],N=I.layout,z=N.get("text-font"),j=N.get("text-field"),Y=N.get("icon-image"),Z=(j.value.kind!=="constant"||j.value.value instanceof $r&&!j.value.value.isEmpty()||j.value.value.toString().length>0)&&(z.value.kind!=="constant"||z.value.value.length>0),ne=Y.value.kind!=="constant"||!!Y.value.value||Object.keys(Y.parameters).length>0,ae=N.get("symbol-sort-key");if(this.features=[],!Z&&!ne)return;const ye=m.iconDependencies,we=m.glyphDependencies,Me=m.availableImages,Re=new Mi(this.zoom);for(const{feature:$e,id:Ke,index:_t,sourceLayerIndex:Qe}of c){const ut=I._featureFilter.needGeometry,Ft=Ri($e,ut);if(!I._featureFilter.filter(Re,Ft,_))continue;let Ht,_n;if(ut||(Ft.geometry=ki($e)),Z){const vn=I.getValueAndResolveTokens("text-field",Ft,_,Me),mn=$r.factory(vn),ln=this.hasRTLText=this.hasRTLText||Jhe(mn);(!ln||Fu.getRTLTextPluginStatus()==="unavailable"||ln&&Fu.isParsed())&&(Ht=Ohe(mn,I,Ft))}if(ne){const vn=I.getValueAndResolveTokens("icon-image",Ft,_,Me);_n=vn instanceof qn?vn:qn.fromString(vn)}if(!Ht&&!_n)continue;const Ln=this.sortFeaturesByKey?ae.evaluate(Ft,{},_):void 0;if(this.features.push({id:Ke,text:Ht,icon:_n,index:_t,sourceLayerIndex:Qe,geometry:Ft.geometry,properties:$e.properties,type:Khe[$e.type],sortKey:Ln}),_n&&(ye[_n.name]=!0),Ht){const vn=z.evaluate(Ft,{},_).join(","),mn=N.get("text-rotation-alignment")!=="viewport"&&N.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(s.ah.vertical)>=0;for(const ln of Ht.sections)if(ln.image)ye[ln.image.name]=!0;else{const An=jd(Ht.toString()),hn=ln.fontStack||vn,rn=we[hn]=we[hn]||{};this.calculateGlyphDependencies(ln.text,rn,mn,this.allowVerticalPlacement,An)}}}N.get("symbol-placement")==="line"&&(this.features=function($e){const Ke={},_t={},Qe=[];let ut=0;function Ft(vn){Qe.push($e[vn]),ut++}function Ht(vn,mn,ln){const An=_t[vn];return delete _t[vn],_t[mn]=An,Qe[An].geometry[0].pop(),Qe[An].geometry[0]=Qe[An].geometry[0].concat(ln[0]),An}function _n(vn,mn,ln){const An=Ke[mn];return delete Ke[mn],Ke[vn]=An,Qe[An].geometry[0].shift(),Qe[An].geometry[0]=ln[0].concat(Qe[An].geometry[0]),An}function Ln(vn,mn,ln){const An=ln?mn[0][mn[0].length-1]:mn[0][0];return`${vn}:${An.x}:${An.y}`}for(let vn=0;vn<$e.length;vn++){const mn=$e[vn],ln=mn.geometry,An=mn.text?mn.text.toString():null;if(!An){Ft(vn);continue}const hn=Ln(An,ln),rn=Ln(An,ln,!0);if(hn in _t&&rn in Ke&&_t[hn]!==Ke[rn]){const Kn=_n(hn,rn,ln),Fn=Ht(hn,rn,Qe[Kn].geometry);delete Ke[hn],delete _t[rn],_t[Ln(An,Qe[Fn].geometry,!0)]=Fn,Qe[Kn].geometry=null}else hn in _t?Ht(hn,rn,ln):rn in Ke?_n(hn,rn,ln):(Ft(vn),Ke[hn]=ut-1,_t[rn]=ut-1)}return Qe.filter(vn=>vn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort(($e,Ke)=>$e.sortKey-Ke.sortKey)}update(c,m,_){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(c,m,this.layers,_),this.icon.programConfigurations.updatePaintArrays(c,m,this.layers,_))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(c){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(c),this.iconCollisionBox.upload(c)),this.text.upload(c,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(c,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(c,m){const _=this.lineVertexArray.length;if(c.segment!==void 0){let I=c.dist(m[c.segment+1]),N=c.dist(m[c.segment]);const z={};for(let j=c.segment+1;j<m.length;j++)z[j]={x:m[j].x,y:m[j].y,tileUnitDistanceFromAnchor:I},j<m.length-1&&(I+=m[j+1].dist(m[j]));for(let j=c.segment||0;j>=0;j--)z[j]={x:m[j].x,y:m[j].y,tileUnitDistanceFromAnchor:N},j>0&&(N+=m[j-1].dist(m[j]));for(let j=0;j<m.length;j++){const Y=z[j];this.lineVertexArray.emplaceBack(Y.x,Y.y,Y.tileUnitDistanceFromAnchor)}}return{lineStartIndex:_,lineLength:this.lineVertexArray.length-_}}addSymbols(c,m,_,I,N,z,j,Y,Z,ne,ae,ye){const we=c.indexArray,Me=c.layoutVertexArray,Re=c.segments.prepareSegment(4*m.length,Me,we,this.canOverlap?z.sortKey:void 0),$e=this.glyphOffsetArray.length,Ke=Re.vertexLength,_t=this.allowVerticalPlacement&&j===s.ah.vertical?Math.PI/2:0,Qe=z.text&&z.text.sections;for(let ut=0;ut<m.length;ut++){const{tl:Ft,tr:Ht,bl:_n,br:Ln,tex:vn,pixelOffsetTL:mn,pixelOffsetBR:ln,minFontScaleX:An,minFontScaleY:hn,glyphOffset:rn,isSDF:Kn,sectionIndex:Fn}=m[ut],Ar=Re.vertexLength,Hi=rn[1];tT(Me,Y.x,Y.y,Ft.x,Hi+Ft.y,vn.x,vn.y,_,Kn,mn.x,mn.y,An,hn),tT(Me,Y.x,Y.y,Ht.x,Hi+Ht.y,vn.x+vn.w,vn.y,_,Kn,ln.x,mn.y,An,hn),tT(Me,Y.x,Y.y,_n.x,Hi+_n.y,vn.x,vn.y+vn.h,_,Kn,mn.x,ln.y,An,hn),tT(Me,Y.x,Y.y,Ln.x,Hi+Ln.y,vn.x+vn.w,vn.y+vn.h,_,Kn,ln.x,ln.y,An,hn),xL(c.dynamicLayoutVertexArray,Y,_t),we.emplaceBack(Ar,Ar+1,Ar+2),we.emplaceBack(Ar+1,Ar+2,Ar+3),Re.vertexLength+=4,Re.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(rn[0]),ut!==m.length-1&&Fn===m[ut+1].sectionIndex||c.programConfigurations.populatePaintArrays(Me.length,z,z.index,{},ye,Qe&&Qe[Fn])}c.placedSymbolArray.emplaceBack(Y.x,Y.y,$e,this.glyphOffsetArray.length-$e,Ke,Z,ne,Y.segment,_?_[0]:0,_?_[1]:0,I[0],I[1],j,0,!1,0,ae)}_addCollisionDebugVertex(c,m,_,I,N,z){return m.emplaceBack(0,0),c.emplaceBack(_.x,_.y,I,N,Math.round(z.x),Math.round(z.y))}addCollisionDebugVertices(c,m,_,I,N,z,j){const Y=N.segments.prepareSegment(4,N.layoutVertexArray,N.indexArray),Z=Y.vertexLength,ne=N.layoutVertexArray,ae=N.collisionVertexArray,ye=j.anchorX,we=j.anchorY;this._addCollisionDebugVertex(ne,ae,z,ye,we,new p(c,m)),this._addCollisionDebugVertex(ne,ae,z,ye,we,new p(_,m)),this._addCollisionDebugVertex(ne,ae,z,ye,we,new p(_,I)),this._addCollisionDebugVertex(ne,ae,z,ye,we,new p(c,I)),Y.vertexLength+=4;const Me=N.indexArray;Me.emplaceBack(Z,Z+1),Me.emplaceBack(Z+1,Z+2),Me.emplaceBack(Z+2,Z+3),Me.emplaceBack(Z+3,Z),Y.primitiveLength+=4}addDebugCollisionBoxes(c,m,_,I){for(let N=c;N<m;N++){const z=this.collisionBoxArray.get(N);this.addCollisionDebugVertices(z.x1,z.y1,z.x2,z.y2,I?this.textCollisionBox:this.iconCollisionBox,z.anchorPoint,_)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new wL(ct,R8.members,Ot),this.iconCollisionBox=new wL(ct,R8.members,Ot);for(let c=0;c<this.symbolInstances.length;c++){const m=this.symbolInstances.get(c);this.addDebugCollisionBoxes(m.textBoxStartIndex,m.textBoxEndIndex,m,!0),this.addDebugCollisionBoxes(m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m,!0),this.addDebugCollisionBoxes(m.iconBoxStartIndex,m.iconBoxEndIndex,m,!1),this.addDebugCollisionBoxes(m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex,m,!1)}}_deserializeCollisionBoxesForSymbol(c,m,_,I,N,z,j,Y,Z){const ne={};for(let ae=m;ae<_;ae++){const ye=c.get(ae);ne.textBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},ne.textFeatureIndex=ye.featureIndex;break}for(let ae=I;ae<N;ae++){const ye=c.get(ae);ne.verticalTextBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},ne.verticalTextFeatureIndex=ye.featureIndex;break}for(let ae=z;ae<j;ae++){const ye=c.get(ae);ne.iconBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},ne.iconFeatureIndex=ye.featureIndex;break}for(let ae=Y;ae<Z;ae++){const ye=c.get(ae);ne.verticalIconBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},ne.verticalIconFeatureIndex=ye.featureIndex;break}return ne}deserializeCollisionBoxes(c){this.collisionArrays=[];for(let m=0;m<this.symbolInstances.length;m++){const _=this.symbolInstances.get(m);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(c,_.textBoxStartIndex,_.textBoxEndIndex,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_.iconBoxStartIndex,_.iconBoxEndIndex,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(c,m){const _=c.placedSymbolArray.get(m),I=_.vertexStartIndex+4*_.numGlyphs;for(let N=_.vertexStartIndex;N<I;N+=4)c.indexArray.emplaceBack(N,N+1,N+2),c.indexArray.emplaceBack(N+1,N+2,N+3)}getSortedSymbolIndexes(c){if(this.sortedAngle===c&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const m=Math.sin(c),_=Math.cos(c),I=[],N=[],z=[];for(let j=0;j<this.symbolInstances.length;++j){z.push(j);const Y=this.symbolInstances.get(j);I.push(0|Math.round(m*Y.anchorX+_*Y.anchorY)),N.push(Y.featureIndex)}return z.sort((j,Y)=>I[j]-I[Y]||N[Y]-N[j]),z}addToSortKeyRanges(c,m){const _=this.sortKeyRanges[this.sortKeyRanges.length-1];_&&_.sortKey===m?_.symbolInstanceEnd=c+1:this.sortKeyRanges.push({sortKey:m,symbolInstanceStart:c,symbolInstanceEnd:c+1})}sortFeatures(c){if(this.sortFeaturesByY&&this.sortedAngle!==c&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(c),this.sortedAngle=c,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const m of this.symbolInstanceIndexes){const _=this.symbolInstances.get(m);this.featureSortOrder.push(_.featureIndex),[_.rightJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.leftJustifiedTextSymbolIndex].forEach((I,N,z)=>{I>=0&&z.indexOf(I)===N&&this.addIndicesForPlacedSymbol(this.text,I)}),_.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,_.verticalPlacedTextSymbolIndex),_.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_.placedIconSymbolIndex),_.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let X8,K8;wn("SymbolBucket",p_,{omit:["layers","collisionBoxArray","features","compareText"]}),p_.MAX_GLYPHS=65535,p_.addDynamicAttributes=xL;var SL={get paint(){return K8=K8||new ea({"icon-opacity":new Xn(We.paint_symbol["icon-opacity"]),"icon-color":new Xn(We.paint_symbol["icon-color"]),"icon-halo-color":new Xn(We.paint_symbol["icon-halo-color"]),"icon-halo-width":new Xn(We.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Xn(We.paint_symbol["icon-halo-blur"]),"icon-translate":new On(We.paint_symbol["icon-translate"]),"icon-translate-anchor":new On(We.paint_symbol["icon-translate-anchor"]),"text-opacity":new Xn(We.paint_symbol["text-opacity"]),"text-color":new Xn(We.paint_symbol["text-color"],{runtimeType:ft,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new Xn(We.paint_symbol["text-halo-color"]),"text-halo-width":new Xn(We.paint_symbol["text-halo-width"]),"text-halo-blur":new Xn(We.paint_symbol["text-halo-blur"]),"text-translate":new On(We.paint_symbol["text-translate"]),"text-translate-anchor":new On(We.paint_symbol["text-translate-anchor"])})},get layout(){return X8=X8||new ea({"symbol-placement":new On(We.layout_symbol["symbol-placement"]),"symbol-spacing":new On(We.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new On(We.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Xn(We.layout_symbol["symbol-sort-key"]),"symbol-z-order":new On(We.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new On(We.layout_symbol["icon-allow-overlap"]),"icon-overlap":new On(We.layout_symbol["icon-overlap"]),"icon-ignore-placement":new On(We.layout_symbol["icon-ignore-placement"]),"icon-optional":new On(We.layout_symbol["icon-optional"]),"icon-rotation-alignment":new On(We.layout_symbol["icon-rotation-alignment"]),"icon-size":new Xn(We.layout_symbol["icon-size"]),"icon-text-fit":new On(We.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new On(We.layout_symbol["icon-text-fit-padding"]),"icon-image":new Xn(We.layout_symbol["icon-image"]),"icon-rotate":new Xn(We.layout_symbol["icon-rotate"]),"icon-padding":new Xn(We.layout_symbol["icon-padding"]),"icon-keep-upright":new On(We.layout_symbol["icon-keep-upright"]),"icon-offset":new Xn(We.layout_symbol["icon-offset"]),"icon-anchor":new Xn(We.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new On(We.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new On(We.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new On(We.layout_symbol["text-rotation-alignment"]),"text-field":new Xn(We.layout_symbol["text-field"]),"text-font":new Xn(We.layout_symbol["text-font"]),"text-size":new Xn(We.layout_symbol["text-size"]),"text-max-width":new Xn(We.layout_symbol["text-max-width"]),"text-line-height":new On(We.layout_symbol["text-line-height"]),"text-letter-spacing":new Xn(We.layout_symbol["text-letter-spacing"]),"text-justify":new Xn(We.layout_symbol["text-justify"]),"text-radial-offset":new Xn(We.layout_symbol["text-radial-offset"]),"text-variable-anchor":new On(We.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Xn(We.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Xn(We.layout_symbol["text-anchor"]),"text-max-angle":new On(We.layout_symbol["text-max-angle"]),"text-writing-mode":new On(We.layout_symbol["text-writing-mode"]),"text-rotate":new Xn(We.layout_symbol["text-rotate"]),"text-padding":new On(We.layout_symbol["text-padding"]),"text-keep-upright":new On(We.layout_symbol["text-keep-upright"]),"text-transform":new Xn(We.layout_symbol["text-transform"]),"text-offset":new Xn(We.layout_symbol["text-offset"]),"text-allow-overlap":new On(We.layout_symbol["text-allow-overlap"]),"text-overlap":new On(We.layout_symbol["text-overlap"]),"text-ignore-placement":new On(We.layout_symbol["text-ignore-placement"]),"text-optional":new On(We.layout_symbol["text-optional"])})}};class Z8{constructor(c){if(c.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=c.property.overrides?c.property.overrides.runtimeType:un,this.defaultValue=c}evaluate(c){if(c.formattedSection){const m=this.defaultValue.property.overrides;if(m&&m.hasOverride(c.formattedSection))return m.getOverride(c.formattedSection)}return c.feature&&c.featureState?this.defaultValue.evaluate(c.feature,c.featureState):this.defaultValue.property.specification.default}eachChild(c){this.defaultValue.isConstant()||c(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}wn("FormatSectionOverride",Z8,{omit:["defaultValue"]});class nT extends Cl{constructor(c){super(c,SL)}recalculate(c,m){if(super.recalculate(c,m),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const _=this.layout.get("text-writing-mode");if(_){const I=[];for(const N of _)I.indexOf(N)<0&&I.push(N);this.layout._values["text-writing-mode"]=I}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(c,m,_,I){const N=this.layout.get(c).evaluate(m,{},_,I),z=this._unevaluatedLayout._values[c];return z.isDataDriven()||Gr(z.value)||!N?N:function(j,Y){return Y.replace(/{([^{}]+)}/g,(Z,ne)=>j&&ne in j?String(j[ne]):"")}(m.properties,N)}createBucket(c){return new p_(c)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const c of SL.paint.overridableProperties){if(!nT.hasPaintOverride(this.layout,c))continue;const m=this.paint.get(c),_=new Z8(m),I=new ma(_,m.property.specification);let N=null;N=m.value.kind==="constant"||m.value.kind==="source"?new ku("source",I):new Gh("composite",I,m.value.zoomStops),this.paint._values[c]=new Tl(m.property,N,m.parameters)}}_handleOverridablePaintPropertyUpdate(c,m,_){return!(!this.layout||m.isDataDriven()||_.isDataDriven())&&nT.hasPaintOverride(this.layout,c)}static hasPaintOverride(c,m){const _=c.get("text-field"),I=SL.paint.properties[m];let N=!1;const z=j=>{for(const Y of j)if(I.overrides&&I.overrides.hasOverride(Y))return void(N=!0)};if(_.value.kind==="constant"&&_.value.value instanceof $r)z(_.value.value.sections);else if(_.value.kind==="source"){const j=Z=>{N||(Z instanceof gs&&Yn(Z.value)===Xe?z(Z.value.sections):Z instanceof tp?z(Z.sections):Z.eachChild(j))},Y=_.value;Y._styleExpression&&j(Y._styleExpression.expression)}return N}}let J8;var Qhe={get paint(){return J8=J8||new ea({"background-color":new On(We.paint_background["background-color"]),"background-pattern":new Ym(We.paint_background["background-pattern"]),"background-opacity":new On(We.paint_background["background-opacity"])})}};class efe extends Cl{constructor(c){super(c,Qhe)}}let Q8;var tfe={get paint(){return Q8=Q8||new ea({"raster-opacity":new On(We.paint_raster["raster-opacity"]),"raster-hue-rotate":new On(We.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new On(We.paint_raster["raster-brightness-min"]),"raster-brightness-max":new On(We.paint_raster["raster-brightness-max"]),"raster-saturation":new On(We.paint_raster["raster-saturation"]),"raster-contrast":new On(We.paint_raster["raster-contrast"]),"raster-resampling":new On(We.paint_raster["raster-resampling"]),"raster-fade-duration":new On(We.paint_raster["raster-fade-duration"])})}};class nfe extends Cl{constructor(c){super(c,tfe)}}class rfe extends Cl{constructor(c){super(c,{}),this.onAdd=m=>{this.implementation.onAdd&&this.implementation.onAdd(m,m.painter.context.gl)},this.onRemove=m=>{this.implementation.onRemove&&this.implementation.onRemove(m,m.painter.context.gl)},this.implementation=c}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class ife{constructor(c){this._methodToThrottle=c,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const ML=63710088e-1;class cg{constructor(c,m){if(isNaN(c)||isNaN(m))throw new Error(`Invalid LngLat object: (${c}, ${m})`);if(this.lng=+c,this.lat=+m,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new cg(D(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(c){const m=Math.PI/180,_=this.lat*m,I=c.lat*m,N=Math.sin(_)*Math.sin(I)+Math.cos(_)*Math.cos(I)*Math.cos((c.lng-this.lng)*m);return ML*Math.acos(Math.min(N,1))}static convert(c){if(c instanceof cg)return c;if(Array.isArray(c)&&(c.length===2||c.length===3))return new cg(Number(c[0]),Number(c[1]));if(!Array.isArray(c)&&typeof c=="object"&&c!==null)return new cg(Number("lng"in c?c.lng:c.lon),Number(c.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const eV=2*Math.PI*ML;function tV(h){return eV*Math.cos(h*Math.PI/180)}function nV(h){return(180+h)/360}function rV(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function iV(h,c){return h/tV(c)}function EL(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}class rT{constructor(c,m,_=0){this.x=+c,this.y=+m,this.z=+_}static fromLngLat(c,m=0){const _=cg.convert(c);return new rT(nV(_.lng),rV(_.lat),iV(m,_.lat))}toLngLat(){return new cg(360*this.x-180,EL(this.y))}toAltitude(){return this.z*tV(EL(this.y))}meterInMercatorCoordinateUnits(){return 1/eV*(c=EL(this.y),1/Math.cos(c*Math.PI/180));var c}}function oV(h,c,m){var _=2*Math.PI*6378137/256/Math.pow(2,m);return[h*_-2*Math.PI*6378137/2,c*_-2*Math.PI*6378137/2]}class TL{constructor(c,m,_){if(c<0||c>25||_<0||_>=Math.pow(2,c)||m<0||m>=Math.pow(2,c))throw new Error(`x=${m}, y=${_}, z=${c} outside of bounds. 0<=x<${Math.pow(2,c)}, 0<=y<${Math.pow(2,c)} 0<=z<=25 `);this.z=c,this.x=m,this.y=_,this.key=sw(0,c,c,m,_)}equals(c){return this.z===c.z&&this.x===c.x&&this.y===c.y}url(c,m,_){const I=(z=this.y,j=this.z,Y=oV(256*(N=this.x),256*(z=Math.pow(2,j)-z-1),j),Z=oV(256*(N+1),256*(z+1),j),Y[0]+","+Y[1]+","+Z[0]+","+Z[1]);var N,z,j,Y,Z;const ne=function(ae,ye,we){let Me,Re="";for(let $e=ae;$e>0;$e--)Me=1<<$e-1,Re+=(ye&Me?1:0)+(we&Me?2:0);return Re}(this.z,this.x,this.y);return c[(this.x+this.y)%c.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(_==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,m>1?"@2x":"").replace(/{quadkey}/g,ne).replace(/{bbox-epsg-3857}/g,I)}isChildOf(c){const m=this.z-c.z;return m>0&&c.x===this.x>>m&&c.y===this.y>>m}getTilePoint(c){const m=Math.pow(2,this.z);return new p((c.x*m-this.x)*Sr,(c.y*m-this.y)*Sr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class sV{constructor(c,m){this.wrap=c,this.canonical=m,this.key=sw(c,m.z,m.z,m.x,m.y)}}class Uc{constructor(c,m,_,I,N){if(c<_)throw new Error(`overscaledZ should be >= z; overscaledZ = ${c}; z = ${_}`);this.overscaledZ=c,this.wrap=m,this.canonical=new TL(_,+I,+N),this.key=sw(m,c,_,I,N)}clone(){return new Uc(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(c){return this.overscaledZ===c.overscaledZ&&this.wrap===c.wrap&&this.canonical.equals(c.canonical)}scaledTo(c){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-c;return c>this.canonical.z?new Uc(c,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Uc(c,this.wrap,c,this.canonical.x>>m,this.canonical.y>>m)}calculateScaledKey(c,m){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const _=this.canonical.z-c;return c>this.canonical.z?sw(this.wrap*+m,c,this.canonical.z,this.canonical.x,this.canonical.y):sw(this.wrap*+m,c,c,this.canonical.x>>_,this.canonical.y>>_)}isChildOf(c){if(c.wrap!==this.wrap)return!1;const m=this.canonical.z-c.canonical.z;return c.overscaledZ===0||c.overscaledZ<this.overscaledZ&&c.canonical.x===this.canonical.x>>m&&c.canonical.y===this.canonical.y>>m}children(c){if(this.overscaledZ>=c)return[new Uc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const m=this.canonical.z+1,_=2*this.canonical.x,I=2*this.canonical.y;return[new Uc(m,this.wrap,m,_,I),new Uc(m,this.wrap,m,_+1,I),new Uc(m,this.wrap,m,_,I+1),new Uc(m,this.wrap,m,_+1,I+1)]}isLessThan(c){return this.wrap<c.wrap||!(this.wrap>c.wrap)&&(this.overscaledZ<c.overscaledZ||!(this.overscaledZ>c.overscaledZ)&&(this.canonical.x<c.canonical.x||!(this.canonical.x>c.canonical.x)&&this.canonical.y<c.canonical.y))}wrapped(){return new Uc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(c){return new Uc(this.overscaledZ,c,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new sV(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(c){return this.canonical.getTilePoint(new rT(c.x-this.wrap,c.y))}}function sw(h,c,m,_,I){(h*=2)<0&&(h=-1*h-1);const N=1<<m;return(N*N*h+N*I+_).toString(36)+m.toString(36)+c.toString(36)}wn("CanonicalTileID",TL),wn("OverscaledTileID",Uc,{omit:["posMatrix"]});class aV{constructor(c,m,_,I=1,N=1,z=1,j=0){if(this.uid=c,m.height!==m.width)throw new RangeError("DEM tiles must be square");if(_&&!["mapbox","terrarium","custom"].includes(_))return void pe(`"${_}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=m.height;const Y=this.dim=m.height-2;switch(this.data=new Uint32Array(m.data.buffer),_){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=I,this.greenFactor=N,this.blueFactor=z,this.baseShift=j;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let Z=0;Z<Y;Z++)this.data[this._idx(-1,Z)]=this.data[this._idx(0,Z)],this.data[this._idx(Y,Z)]=this.data[this._idx(Y-1,Z)],this.data[this._idx(Z,-1)]=this.data[this._idx(Z,0)],this.data[this._idx(Z,Y)]=this.data[this._idx(Z,Y-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(Y,-1)]=this.data[this._idx(Y-1,0)],this.data[this._idx(-1,Y)]=this.data[this._idx(0,Y-1)],this.data[this._idx(Y,Y)]=this.data[this._idx(Y-1,Y-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let Z=0;Z<Y;Z++)for(let ne=0;ne<Y;ne++){const ae=this.get(Z,ne);ae>this.max&&(this.max=ae),ae<this.min&&(this.min=ae)}}get(c,m){const _=new Uint8Array(this.data.buffer),I=4*this._idx(c,m);return this.unpack(_[I],_[I+1],_[I+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(c,m){if(c<-1||c>=this.dim+1||m<-1||m>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(m+1)*this.stride+(c+1)}unpack(c,m,_){return c*this.redFactor+m*this.greenFactor+_*this.blueFactor-this.baseShift}getPixels(){return new Ma({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(c,m,_){if(this.dim!==c.dim)throw new Error("dem dimension mismatch");let I=m*this.dim,N=m*this.dim+this.dim,z=_*this.dim,j=_*this.dim+this.dim;switch(m){case-1:I=N-1;break;case 1:N=I+1}switch(_){case-1:z=j-1;break;case 1:j=z+1}const Y=-m*this.dim,Z=-_*this.dim;for(let ne=z;ne<j;ne++)for(let ae=I;ae<N;ae++)this.data[this._idx(ae,ne)]=c.data[this._idx(ae+Y,ne+Z)]}}wn("DEMData",aV);class lV{constructor(c){this._stringToNumber={},this._numberToString=[];for(let m=0;m<c.length;m++){const _=c[m];this._stringToNumber[_]=m,this._numberToString[m]=_}}encode(c){return this._stringToNumber[c]}decode(c){if(c>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${c} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[c]}}class cV{constructor(c,m,_,I,N){this.type="Feature",this._vectorTileFeature=c,c._z=m,c._x=_,c._y=I,this.properties=c.properties,this.id=N}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(c){this._geometry=c}toJSON(){const c={geometry:this.geometry};for(const m in this)m!=="_geometry"&&m!=="_vectorTileFeature"&&(c[m]=this[m]);return c}}class uV{constructor(c,m){this.tileID=c,this.x=c.canonical.x,this.y=c.canonical.y,this.z=c.canonical.z,this.grid=new qa(Sr,16,0),this.grid3D=new qa(Sr,16,0),this.featureIndexArray=new te,this.promoteId=m}insert(c,m,_,I,N,z){const j=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(_,I,N);const Y=z?this.grid3D:this.grid;for(let Z=0;Z<m.length;Z++){const ne=m[Z],ae=[1/0,1/0,-1/0,-1/0];for(let ye=0;ye<ne.length;ye++){const we=ne[ye];ae[0]=Math.min(ae[0],we.x),ae[1]=Math.min(ae[1],we.y),ae[2]=Math.max(ae[2],we.x),ae[3]=Math.max(ae[3],we.y)}ae[0]<Sr&&ae[1]<Sr&&ae[2]>=0&&ae[3]>=0&&Y.insert(j,ae[0],ae[1],ae[2],ae[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Xr.VectorTile(new pL(this.rawTileData)).layers,this.sourceLayerCoder=new lV(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(c,m,_,I){this.loadVTLayers();const N=c.params||{},z=Sr/c.tileSize/c.scale,j=ip(N.filter),Y=c.queryGeometry,Z=c.queryPadding*z,ne=hV(Y),ae=this.grid.query(ne.minX-Z,ne.minY-Z,ne.maxX+Z,ne.maxY+Z),ye=hV(c.cameraQueryGeometry),we=this.grid3D.query(ye.minX-Z,ye.minY-Z,ye.maxX+Z,ye.maxY+Z,($e,Ke,_t,Qe)=>function(ut,Ft,Ht,_n,Ln){for(const mn of ut)if(Ft<=mn.x&&Ht<=mn.y&&_n>=mn.x&&Ln>=mn.y)return!0;const vn=[new p(Ft,Ht),new p(Ft,Ln),new p(_n,Ln),new p(_n,Ht)];if(ut.length>2){for(const mn of vn)if(tf(ut,mn))return!0}for(let mn=0;mn<ut.length-1;mn++)if(ng(ut[mn],ut[mn+1],vn))return!0;return!1}(c.cameraQueryGeometry,$e-Z,Ke-Z,_t+Z,Qe+Z));for(const $e of we)ae.push($e);ae.sort(ofe);const Me={};let Re;for(let $e=0;$e<ae.length;$e++){const Ke=ae[$e];if(Ke===Re)continue;Re=Ke;const _t=this.featureIndexArray.get(Ke);let Qe=null;this.loadMatchingFeature(Me,_t.bucketIndex,_t.sourceLayerIndex,_t.featureIndex,j,N.layers,N.availableImages,m,_,I,(ut,Ft,Ht)=>(Qe||(Qe=ki(ut)),Ft.queryIntersectsFeature(Y,ut,Ht,Qe,this.z,c.transform,z,c.pixelPosMatrix)))}return Me}loadMatchingFeature(c,m,_,I,N,z,j,Y,Z,ne,ae){const ye=this.bucketLayerIDs[m];if(z&&!function($e,Ke){for(let _t=0;_t<$e.length;_t++)if(Ke.indexOf($e[_t])>=0)return!0;return!1}(z,ye))return;const we=this.sourceLayerCoder.decode(_),Me=this.vtLayers[we].feature(I);if(N.needGeometry){const $e=Ri(Me,!0);if(!N.filter(new Mi(this.tileID.overscaledZ),$e,this.tileID.canonical))return}else if(!N.filter(new Mi(this.tileID.overscaledZ),Me))return;const Re=this.getId(Me,we);for(let $e=0;$e<ye.length;$e++){const Ke=ye[$e];if(z&&z.indexOf(Ke)<0)continue;const _t=Y[Ke];if(!_t)continue;let Qe={};Re&&ne&&(Qe=ne.getState(_t.sourceLayer||"_geojsonTileLayer",Re));const ut=B({},Z[Ke]);ut.paint=dV(ut.paint,_t.paint,Me,Qe,j),ut.layout=dV(ut.layout,_t.layout,Me,Qe,j);const Ft=!ae||ae(Me,_t,Qe);if(!Ft)continue;const Ht=new cV(Me,this.z,this.x,this.y,Re);Ht.layer=ut;let _n=c[Ke];_n===void 0&&(_n=c[Ke]=[]),_n.push({featureIndex:I,feature:Ht,intersectionZ:Ft})}}lookupSymbolFeatures(c,m,_,I,N,z,j,Y){const Z={};this.loadVTLayers();const ne=ip(N);for(const ae of c)this.loadMatchingFeature(Z,_,I,ae,ne,z,j,Y,m);return Z}hasLayer(c){for(const m of this.bucketLayerIDs)for(const _ of m)if(c===_)return!0;return!1}getId(c,m){let _=c.id;return this.promoteId&&(_=c.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[m]],typeof _=="boolean"&&(_=Number(_))),_}}function dV(h,c,m,_,I){return J(h,(N,z)=>{const j=c instanceof up?c.get(z):null;return j&&j.evaluate?j.evaluate(m,_,I):j})}function hV(h){let c=1/0,m=1/0,_=-1/0,I=-1/0;for(const N of h)c=Math.min(c,N.x),m=Math.min(m,N.y),_=Math.max(_,N.x),I=Math.max(I,N.y);return{minX:c,minY:m,maxX:_,maxY:I}}function ofe(h,c){return c-h}function fV(h,c,m,_,I){const N=[];for(let z=0;z<h.length;z++){const j=h[z];let Y;for(let Z=0;Z<j.length-1;Z++){let ne=j[Z],ae=j[Z+1];ne.x<c&&ae.x<c||(ne.x<c?ne=new p(c,ne.y+(c-ne.x)/(ae.x-ne.x)*(ae.y-ne.y))._round():ae.x<c&&(ae=new p(c,ne.y+(c-ne.x)/(ae.x-ne.x)*(ae.y-ne.y))._round()),ne.y<m&&ae.y<m||(ne.y<m?ne=new p(ne.x+(m-ne.y)/(ae.y-ne.y)*(ae.x-ne.x),m)._round():ae.y<m&&(ae=new p(ne.x+(m-ne.y)/(ae.y-ne.y)*(ae.x-ne.x),m)._round()),ne.x>=_&&ae.x>=_||(ne.x>=_?ne=new p(_,ne.y+(_-ne.x)/(ae.x-ne.x)*(ae.y-ne.y))._round():ae.x>=_&&(ae=new p(_,ne.y+(_-ne.x)/(ae.x-ne.x)*(ae.y-ne.y))._round()),ne.y>=I&&ae.y>=I||(ne.y>=I?ne=new p(ne.x+(I-ne.y)/(ae.y-ne.y)*(ae.x-ne.x),I)._round():ae.y>=I&&(ae=new p(ne.x+(I-ne.y)/(ae.y-ne.y)*(ae.x-ne.x),I)._round()),Y&&ne.equals(Y[Y.length-1])||(Y=[ne],N.push(Y)),Y.push(ae)))))}}return N}wn("FeatureIndex",uV,{omit:["rawTileData","sourceLayerCoder"]});class ug extends p{constructor(c,m,_,I){super(c,m),this.angle=_,I!==void 0&&(this.segment=I)}clone(){return new ug(this.x,this.y,this.angle,this.segment)}}function pV(h,c,m,_,I){if(c.segment===void 0||m===0)return!0;let N=c,z=c.segment+1,j=0;for(;j>-m/2;){if(z--,z<0)return!1;j-=h[z].dist(N),N=h[z]}j+=h[z].dist(h[z+1]),z++;const Y=[];let Z=0;for(;j<m/2;){const ne=h[z],ae=h[z+1];if(!ae)return!1;let ye=h[z-1].angleTo(ne)-ne.angleTo(ae);for(ye=Math.abs((ye+3*Math.PI)%(2*Math.PI)-Math.PI),Y.push({distance:j,angleDelta:ye}),Z+=ye;j-Y[0].distance>_;)Z-=Y.shift().angleDelta;if(Z>I)return!1;z++,j+=ne.dist(ae)}return!0}function mV(h){let c=0;for(let m=0;m<h.length-1;m++)c+=h[m].dist(h[m+1]);return c}function gV(h,c,m){return h?.6*c*m:0}function yV(h,c){return Math.max(h?h.right-h.left:0,c?c.right-c.left:0)}function sfe(h,c,m,_,I,N){const z=gV(m,I,N),j=yV(m,_)*N;let Y=0;const Z=mV(h)/2;for(let ne=0;ne<h.length-1;ne++){const ae=h[ne],ye=h[ne+1],we=ae.dist(ye);if(Y+we>Z){const Me=(Z-Y)/we,Re=Rs.number(ae.x,ye.x,Me),$e=Rs.number(ae.y,ye.y,Me),Ke=new ug(Re,$e,ye.angleTo(ae),ne);return Ke._round(),!z||pV(h,Ke,j,z,c)?Ke:void 0}Y+=we}}function afe(h,c,m,_,I,N,z,j,Y){const Z=gV(_,N,z),ne=yV(_,I),ae=ne*z,ye=h[0].x===0||h[0].x===Y||h[0].y===0||h[0].y===Y;return c-ae<c/4&&(c=ae+c/4),vV(h,ye?c/2*j%c:(ne/2+2*N)*z*j%c,c,Z,m,ae,ye,!1,Y)}function vV(h,c,m,_,I,N,z,j,Y){const Z=N/2,ne=mV(h);let ae=0,ye=c-m,we=[];for(let Me=0;Me<h.length-1;Me++){const Re=h[Me],$e=h[Me+1],Ke=Re.dist($e),_t=$e.angleTo(Re);for(;ye+m<ae+Ke;){ye+=m;const Qe=(ye-ae)/Ke,ut=Rs.number(Re.x,$e.x,Qe),Ft=Rs.number(Re.y,$e.y,Qe);if(ut>=0&&ut<Y&&Ft>=0&&Ft<Y&&ye-Z>=0&&ye+Z<=ne){const Ht=new ug(ut,Ft,_t,Me);Ht._round(),_&&!pV(h,Ht,N,_,I)||we.push(Ht)}}ae+=Ke}return j||we.length||z||(we=vV(h,ae/2,m,_,I,N,z,!0,Y)),we}wn("Anchor",ug);const m_=Al;function _V(h,c,m,_){const I=[],N=h.image,z=N.pixelRatio,j=N.paddedRect.w-2*m_,Y=N.paddedRect.h-2*m_,Z=h.right-h.left,ne=h.bottom-h.top,ae=N.stretchX||[[0,j]],ye=N.stretchY||[[0,Y]],we=(ln,An)=>ln+An[1]-An[0],Me=ae.reduce(we,0),Re=ye.reduce(we,0),$e=j-Me,Ke=Y-Re;let _t=0,Qe=Me,ut=0,Ft=Re,Ht=0,_n=$e,Ln=0,vn=Ke;if(N.content&&_){const ln=N.content;_t=iT(ae,0,ln[0]),ut=iT(ye,0,ln[1]),Qe=iT(ae,ln[0],ln[2]),Ft=iT(ye,ln[1],ln[3]),Ht=ln[0]-_t,Ln=ln[1]-ut,_n=ln[2]-ln[0]-Qe,vn=ln[3]-ln[1]-Ft}const mn=(ln,An,hn,rn)=>{const Kn=oT(ln.stretch-_t,Qe,Z,h.left),Fn=sT(ln.fixed-Ht,_n,ln.stretch,Me),Ar=oT(An.stretch-ut,Ft,ne,h.top),Hi=sT(An.fixed-Ln,vn,An.stretch,Re),to=oT(hn.stretch-_t,Qe,Z,h.left),ns=sT(hn.fixed-Ht,_n,hn.stretch,Me),cc=oT(rn.stretch-ut,Ft,ne,h.top),Za=sT(rn.fixed-Ln,vn,rn.stretch,Re),Vo=new p(Kn,Ar),Bs=new p(to,Ar),ra=new p(to,cc),Ja=new p(Kn,cc),Qa=new p(Fn/z,Hi/z),rs=new p(ns/z,Za/z),is=c*Math.PI/180;if(is){const Ta=Math.sin(is),Pl=Math.cos(is),Il=[Pl,-Ta,Ta,Pl];Vo._matMult(Il),Bs._matMult(Il),Ja._matMult(Il),ra._matMult(Il)}const Ea=ln.stretch+ln.fixed,el=An.stretch+An.fixed;return{tl:Vo,tr:Bs,bl:Ja,br:ra,tex:{x:N.paddedRect.x+m_+Ea,y:N.paddedRect.y+m_+el,w:hn.stretch+hn.fixed-Ea,h:rn.stretch+rn.fixed-el},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Qa,pixelOffsetBR:rs,minFontScaleX:_n/z/Z,minFontScaleY:vn/z/ne,isSDF:m}};if(_&&(N.stretchX||N.stretchY)){const ln=xV(ae,$e,Me),An=xV(ye,Ke,Re);for(let hn=0;hn<ln.length-1;hn++){const rn=ln[hn],Kn=ln[hn+1];for(let Fn=0;Fn<An.length-1;Fn++)I.push(mn(rn,An[Fn],Kn,An[Fn+1]))}}else I.push(mn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:j+1},{fixed:0,stretch:Y+1}));return I}function iT(h,c,m){let _=0;for(const I of h)_+=Math.max(c,Math.min(m,I[1]))-Math.max(c,Math.min(m,I[0]));return _}function xV(h,c,m){const _=[{fixed:-m_,stretch:0}];for(const[I,N]of h){const z=_[_.length-1];_.push({fixed:I-z.stretch,stretch:z.stretch}),_.push({fixed:I-z.stretch,stretch:z.stretch+(N-I)})}return _.push({fixed:c+m_,stretch:m}),_}function oT(h,c,m,_){return h/c*m+_}function sT(h,c,m,_){return h-c*m/_}class aT{constructor(c,m,_,I,N,z,j,Y,Z,ne){if(this.boxStartIndex=c.length,Z){let ae=z.top,ye=z.bottom;const we=z.collisionPadding;we&&(ae-=we[1],ye+=we[3]);let Me=ye-ae;Me>0&&(Me=Math.max(10,Me),this.circleDiameter=Me)}else{let ae=z.top*j-Y[0],ye=z.bottom*j+Y[2],we=z.left*j-Y[3],Me=z.right*j+Y[1];const Re=z.collisionPadding;if(Re&&(we-=Re[0]*j,ae-=Re[1]*j,Me+=Re[2]*j,ye+=Re[3]*j),ne){const $e=new p(we,ae),Ke=new p(Me,ae),_t=new p(we,ye),Qe=new p(Me,ye),ut=ne*Math.PI/180;$e._rotate(ut),Ke._rotate(ut),_t._rotate(ut),Qe._rotate(ut),we=Math.min($e.x,Ke.x,_t.x,Qe.x),Me=Math.max($e.x,Ke.x,_t.x,Qe.x),ae=Math.min($e.y,Ke.y,_t.y,Qe.y),ye=Math.max($e.y,Ke.y,_t.y,Qe.y)}c.emplaceBack(m.x,m.y,we,ae,Me,ye,_,I,N)}this.boxEndIndex=c.length}}class lfe{constructor(c=[],m=cfe){if(this.data=c,this.length=this.data.length,this.compare=m,this.length>0)for(let _=(this.length>>1)-1;_>=0;_--)this._down(_)}push(c){this.data.push(c),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const c=this.data[0],m=this.data.pop();return this.length--,this.length>0&&(this.data[0]=m,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:m,compare:_}=this,I=m[c];for(;c>0;){const N=c-1>>1,z=m[N];if(_(I,z)>=0)break;m[c]=z,c=N}m[c]=I}_down(c){const{data:m,compare:_}=this,I=this.length>>1,N=m[c];for(;c<I;){let z=1+(c<<1),j=m[z];const Y=z+1;if(Y<this.length&&_(m[Y],j)<0&&(z=Y,j=m[Y]),_(j,N)>=0)break;m[c]=j,c=z}m[c]=N}}function cfe(h,c){return h<c?-1:h>c?1:0}function ufe(h,c=1,m=!1){let _=1/0,I=1/0,N=-1/0,z=-1/0;const j=h[0];for(let we=0;we<j.length;we++){const Me=j[we];(!we||Me.x<_)&&(_=Me.x),(!we||Me.y<I)&&(I=Me.y),(!we||Me.x>N)&&(N=Me.x),(!we||Me.y>z)&&(z=Me.y)}const Y=Math.min(N-_,z-I);let Z=Y/2;const ne=new lfe([],dfe);if(Y===0)return new p(_,I);for(let we=_;we<N;we+=Y)for(let Me=I;Me<z;Me+=Y)ne.push(new g_(we+Z,Me+Z,Z,h));let ae=function(we){let Me=0,Re=0,$e=0;const Ke=we[0];for(let _t=0,Qe=Ke.length,ut=Qe-1;_t<Qe;ut=_t++){const Ft=Ke[_t],Ht=Ke[ut],_n=Ft.x*Ht.y-Ht.x*Ft.y;Re+=(Ft.x+Ht.x)*_n,$e+=(Ft.y+Ht.y)*_n,Me+=3*_n}return new g_(Re/Me,$e/Me,0,we)}(h),ye=ne.length;for(;ne.length;){const we=ne.pop();(we.d>ae.d||!ae.d)&&(ae=we,m&&console.log("found best %d after %d probes",Math.round(1e4*we.d)/1e4,ye)),we.max-ae.d<=c||(Z=we.h/2,ne.push(new g_(we.p.x-Z,we.p.y-Z,Z,h)),ne.push(new g_(we.p.x+Z,we.p.y-Z,Z,h)),ne.push(new g_(we.p.x-Z,we.p.y+Z,Z,h)),ne.push(new g_(we.p.x+Z,we.p.y+Z,Z,h)),ye+=4)}return m&&(console.log(`num probes: ${ye}`),console.log(`best distance: ${ae.d}`)),ae.p}function dfe(h,c){return c.max-h.max}function g_(h,c,m,_){this.p=new p(h,c),this.h=m,this.d=function(I,N){let z=!1,j=1/0;for(let Y=0;Y<N.length;Y++){const Z=N[Y];for(let ne=0,ae=Z.length,ye=ae-1;ne<ae;ye=ne++){const we=Z[ne],Me=Z[ye];we.y>I.y!=Me.y>I.y&&I.x<(Me.x-we.x)*(I.y-we.y)/(Me.y-we.y)+we.x&&(z=!z),j=Math.min(j,ba(I,we,Me))}}return(z?1:-1)*Math.sqrt(j)}(this.p,_),this.max=this.d+this.h*Math.SQRT2}var na;s.ap=void 0,(na=s.ap||(s.ap={}))[na.center=1]="center",na[na.left=2]="left",na[na.right=3]="right",na[na.top=4]="top",na[na.bottom=5]="bottom",na[na["top-left"]=6]="top-left",na[na["top-right"]=7]="top-right",na[na["bottom-left"]=8]="bottom-left",na[na["bottom-right"]=9]="bottom-right";const dg=7,CL=Number.POSITIVE_INFINITY;function bV(h,c){return c[1]!==CL?function(m,_,I){let N=0,z=0;switch(_=Math.abs(_),I=Math.abs(I),m){case"top-right":case"top-left":case"top":z=I-dg;break;case"bottom-right":case"bottom-left":case"bottom":z=-I+dg}switch(m){case"top-right":case"bottom-right":case"right":N=-_;break;case"top-left":case"bottom-left":case"left":N=_}return[N,z]}(h,c[0],c[1]):function(m,_){let I=0,N=0;_<0&&(_=0);const z=_/Math.SQRT2;switch(m){case"top-right":case"top-left":N=z-dg;break;case"bottom-right":case"bottom-left":N=-z+dg;break;case"bottom":N=-_+dg;break;case"top":N=_-dg}switch(m){case"top-right":case"bottom-right":I=-z;break;case"top-left":case"bottom-left":I=z;break;case"left":I=_;break;case"right":I=-_}return[I,N]}(h,c[0])}function wV(h,c,m){var _;const I=h.layout,N=(_=I.get("text-variable-anchor-offset"))===null||_===void 0?void 0:_.evaluate(c,{},m);if(N){const j=N.values,Y=[];for(let Z=0;Z<j.length;Z+=2){const ne=Y[Z]=j[Z],ae=j[Z+1].map(ye=>ye*ts);ne.startsWith("top")?ae[1]-=dg:ne.startsWith("bottom")&&(ae[1]+=dg),Y[Z+1]=ae}return new Vr(Y)}const z=I.get("text-variable-anchor");if(z){let j;j=h._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[I.get("text-radial-offset").evaluate(c,{},m)*ts,CL]:I.get("text-offset").evaluate(c,{},m).map(Z=>Z*ts);const Y=[];for(const Z of z)Y.push(Z,bV(Z,j));return new Vr(Y)}return null}function AL(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function hfe(h,c,m,_,I,N,z,j,Y,Z,ne){let ae=N.textMaxSize.evaluate(c,{});ae===void 0&&(ae=z);const ye=h.layers[0].layout,we=ye.get("icon-offset").evaluate(c,{},ne),Me=MV(m.horizontal),Re=z/24,$e=h.tilePixelRatio*Re,Ke=h.tilePixelRatio*ae/24,_t=h.tilePixelRatio*j,Qe=h.tilePixelRatio*ye.get("symbol-spacing"),ut=ye.get("text-padding")*h.tilePixelRatio,Ft=function(rn,Kn,Fn,Ar=1){const Hi=rn.get("icon-padding").evaluate(Kn,{},Fn),to=Hi&&Hi.values;return[to[0]*Ar,to[1]*Ar,to[2]*Ar,to[3]*Ar]}(ye,c,ne,h.tilePixelRatio),Ht=ye.get("text-max-angle")/180*Math.PI,_n=ye.get("text-rotation-alignment")!=="viewport"&&ye.get("symbol-placement")!=="point",Ln=ye.get("icon-rotation-alignment")==="map"&&ye.get("symbol-placement")!=="point",vn=ye.get("symbol-placement"),mn=Qe/2,ln=ye.get("icon-text-fit");let An;_&&ln!=="none"&&(h.allowVerticalPlacement&&m.vertical&&(An=q8(_,m.vertical,ln,ye.get("icon-text-fit-padding"),we,Re)),Me&&(_=q8(_,Me,ln,ye.get("icon-text-fit-padding"),we,Re)));const hn=(rn,Kn)=>{Kn.x<0||Kn.x>=Sr||Kn.y<0||Kn.y>=Sr||function(Fn,Ar,Hi,to,ns,cc,Za,Vo,Bs,ra,Ja,Qa,rs,is,Ea,el,Ta,Pl,Il,os,Dr,Ca,ia,ss,Hu){const Jd=Fn.addToLineVertexArray(Ar,Hi);let Qd,xp,Gu,Vc,kl=0,bp=0,cw=0,AV=0,NL=-1,zL=-1;const wp={};let PV=dr("");if(Fn.allowVerticalPlacement&&to.vertical){const Aa=Vo.layout.get("text-rotate").evaluate(Dr,{},ss)+90;Gu=new aT(Bs,Ar,ra,Ja,Qa,to.vertical,rs,is,Ea,Aa),Za&&(Vc=new aT(Bs,Ar,ra,Ja,Qa,Za,Ta,Pl,Ea,Aa))}if(ns){const Aa=Vo.layout.get("icon-rotate").evaluate(Dr,{}),Wc=Vo.layout.get("icon-text-fit")!=="none",nv=_V(ns,Aa,ia,Wc),th=Za?_V(Za,Aa,ia,Wc):void 0;xp=new aT(Bs,Ar,ra,Ja,Qa,ns,Ta,Pl,!1,Aa),kl=4*nv.length;const rv=Fn.iconSizeData;let cf=null;rv.kind==="source"?(cf=[lf*Vo.layout.get("icon-size").evaluate(Dr,{})],cf[0]>lg&&pe(`${Fn.layerIds[0]}: Value for "icon-size" is >= ${ow}. Reduce your "icon-size".`)):rv.kind==="composite"&&(cf=[lf*Ca.compositeIconSizes[0].evaluate(Dr,{},ss),lf*Ca.compositeIconSizes[1].evaluate(Dr,{},ss)],(cf[0]>lg||cf[1]>lg)&&pe(`${Fn.layerIds[0]}: Value for "icon-size" is >= ${ow}. Reduce your "icon-size".`)),Fn.addSymbols(Fn.icon,nv,cf,os,Il,Dr,s.ah.none,Ar,Jd.lineStartIndex,Jd.lineLength,-1,ss),NL=Fn.icon.placedSymbolArray.length-1,th&&(bp=4*th.length,Fn.addSymbols(Fn.icon,th,cf,os,Il,Dr,s.ah.vertical,Ar,Jd.lineStartIndex,Jd.lineLength,-1,ss),zL=Fn.icon.placedSymbolArray.length-1)}const IV=Object.keys(to.horizontal);for(const Aa of IV){const Wc=to.horizontal[Aa];if(!Qd){PV=dr(Wc.text);const th=Vo.layout.get("text-rotate").evaluate(Dr,{},ss);Qd=new aT(Bs,Ar,ra,Ja,Qa,Wc,rs,is,Ea,th)}const nv=Wc.positionedLines.length===1;if(cw+=SV(Fn,Ar,Wc,cc,Vo,Ea,Dr,el,Jd,to.vertical?s.ah.horizontal:s.ah.horizontalOnly,nv?IV:[Aa],wp,NL,Ca,ss),nv)break}to.vertical&&(AV+=SV(Fn,Ar,to.vertical,cc,Vo,Ea,Dr,el,Jd,s.ah.vertical,["vertical"],wp,zL,Ca,ss));const mfe=Qd?Qd.boxStartIndex:Fn.collisionBoxArray.length,gfe=Qd?Qd.boxEndIndex:Fn.collisionBoxArray.length,yfe=Gu?Gu.boxStartIndex:Fn.collisionBoxArray.length,vfe=Gu?Gu.boxEndIndex:Fn.collisionBoxArray.length,_fe=xp?xp.boxStartIndex:Fn.collisionBoxArray.length,xfe=xp?xp.boxEndIndex:Fn.collisionBoxArray.length,bfe=Vc?Vc.boxStartIndex:Fn.collisionBoxArray.length,wfe=Vc?Vc.boxEndIndex:Fn.collisionBoxArray.length;let eh=-1;const cT=(Aa,Wc)=>Aa&&Aa.circleDiameter?Math.max(Aa.circleDiameter,Wc):Wc;eh=cT(Qd,eh),eh=cT(Gu,eh),eh=cT(xp,eh),eh=cT(Vc,eh);const kV=eh>-1?1:0;kV&&(eh*=Hu/ts),Fn.glyphOffsetArray.length>=p_.MAX_GLYPHS&&pe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Dr.sortKey!==void 0&&Fn.addToSortKeyRanges(Fn.symbolInstances.length,Dr.sortKey);const Sfe=wV(Vo,Dr,ss),[Mfe,Efe]=function(Aa,Wc){const nv=Aa.length,th=Wc==null?void 0:Wc.values;if((th==null?void 0:th.length)>0)for(let rv=0;rv<th.length;rv+=2){const cf=th[rv+1];Aa.emplaceBack(s.ap[th[rv]],cf[0],cf[1])}return[nv,Aa.length]}(Fn.textAnchorOffsets,Sfe);Fn.symbolInstances.emplaceBack(Ar.x,Ar.y,wp.right>=0?wp.right:-1,wp.center>=0?wp.center:-1,wp.left>=0?wp.left:-1,wp.vertical||-1,NL,zL,PV,mfe,gfe,yfe,vfe,_fe,xfe,bfe,wfe,ra,cw,AV,kl,bp,kV,0,rs,eh,Mfe,Efe)}(h,Kn,rn,m,_,I,An,h.layers[0],h.collisionBoxArray,c.index,c.sourceLayerIndex,h.index,$e,[ut,ut,ut,ut],_n,Y,_t,Ft,Ln,we,c,N,Z,ne,z)};if(vn==="line")for(const rn of fV(c.geometry,0,0,Sr,Sr)){const Kn=afe(rn,Qe,Ht,m.vertical||Me,_,24,Ke,h.overscaling,Sr);for(const Fn of Kn)Me&&ffe(h,Me.text,mn,Fn)||hn(rn,Fn)}else if(vn==="line-center"){for(const rn of c.geometry)if(rn.length>1){const Kn=sfe(rn,Ht,m.vertical||Me,_,24,Ke);Kn&&hn(rn,Kn)}}else if(c.type==="Polygon")for(const rn of E(c.geometry,0)){const Kn=ufe(rn,16);hn(rn[0],new ug(Kn.x,Kn.y,0))}else if(c.type==="LineString")for(const rn of c.geometry)hn(rn,new ug(rn[0].x,rn[0].y,0));else if(c.type==="Point")for(const rn of c.geometry)for(const Kn of rn)hn([Kn],new ug(Kn.x,Kn.y,0))}function SV(h,c,m,_,I,N,z,j,Y,Z,ne,ae,ye,we,Me){const Re=function(_t,Qe,ut,Ft,Ht,_n,Ln,vn){const mn=Ft.layout.get("text-rotate").evaluate(_n,{})*Math.PI/180,ln=[];for(const An of Qe.positionedLines)for(const hn of An.positionedGlyphs){if(!hn.rect)continue;const rn=hn.rect||{};let Kn=$8+1,Fn=!0,Ar=1,Hi=0;const to=(Ht||vn)&&hn.vertical,ns=hn.metrics.advance*hn.scale/2;if(vn&&Qe.verticalizable&&(Hi=An.lineOffset/2-(hn.imageName?-(ts-hn.metrics.width*hn.scale)/2:(hn.scale-1)*ts)),hn.imageName){const os=Ln[hn.imageName];Fn=os.sdf,Ar=os.pixelRatio,Kn=Al/Ar}const cc=Ht?[hn.x+ns,hn.y]:[0,0];let Za=Ht?[0,0]:[hn.x+ns+ut[0],hn.y+ut[1]-Hi],Vo=[0,0];to&&(Vo=Za,Za=[0,0]);const Bs=hn.metrics.isDoubleResolution?2:1,ra=(hn.metrics.left-Kn)*hn.scale-ns+Za[0],Ja=(-hn.metrics.top-Kn)*hn.scale+Za[1],Qa=ra+rn.w/Bs*hn.scale/Ar,rs=Ja+rn.h/Bs*hn.scale/Ar,is=new p(ra,Ja),Ea=new p(Qa,Ja),el=new p(ra,rs),Ta=new p(Qa,rs);if(to){const os=new p(-ns,ns-rw),Dr=-Math.PI/2,Ca=ts/2-ns,ia=new p(5-rw-Ca,-(hn.imageName?Ca:0)),ss=new p(...Vo);is._rotateAround(Dr,os)._add(ia)._add(ss),Ea._rotateAround(Dr,os)._add(ia)._add(ss),el._rotateAround(Dr,os)._add(ia)._add(ss),Ta._rotateAround(Dr,os)._add(ia)._add(ss)}if(mn){const os=Math.sin(mn),Dr=Math.cos(mn),Ca=[Dr,-os,os,Dr];is._matMult(Ca),Ea._matMult(Ca),el._matMult(Ca),Ta._matMult(Ca)}const Pl=new p(0,0),Il=new p(0,0);ln.push({tl:is,tr:Ea,bl:el,br:Ta,tex:rn,writingMode:Qe.writingMode,glyphOffset:cc,sectionIndex:hn.sectionIndex,isSDF:Fn,pixelOffsetTL:Pl,pixelOffsetBR:Il,minFontScaleX:0,minFontScaleY:0})}return ln}(0,m,j,I,N,z,_,h.allowVerticalPlacement),$e=h.textSizeData;let Ke=null;$e.kind==="source"?(Ke=[lf*I.layout.get("text-size").evaluate(z,{})],Ke[0]>lg&&pe(`${h.layerIds[0]}: Value for "text-size" is >= ${ow}. Reduce your "text-size".`)):$e.kind==="composite"&&(Ke=[lf*we.compositeTextSizes[0].evaluate(z,{},Me),lf*we.compositeTextSizes[1].evaluate(z,{},Me)],(Ke[0]>lg||Ke[1]>lg)&&pe(`${h.layerIds[0]}: Value for "text-size" is >= ${ow}. Reduce your "text-size".`)),h.addSymbols(h.text,Re,Ke,j,N,z,Z,c,Y.lineStartIndex,Y.lineLength,ye,Me);for(const _t of ne)ae[_t]=h.text.placedSymbolArray.length-1;return 4*Re.length}function MV(h){for(const c in h)return h[c];return null}function ffe(h,c,m,_){const I=h.compareText;if(c in I){const N=I[c];for(let z=N.length-1;z>=0;z--)if(_.dist(N[z])<m)return!0}else I[c]=[];return I[c].push(_),!1}const EV=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class PL{static from(c){if(!(c instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[m,_]=new Uint8Array(c,0,2);if(m!==219)throw new Error("Data does not appear to be in a KDBush format.");const I=_>>4;if(I!==1)throw new Error(`Got v${I} data when expected v1.`);const N=EV[15&_];if(!N)throw new Error("Unrecognized array type.");const[z]=new Uint16Array(c,2,1),[j]=new Uint32Array(c,4,1);return new PL(j,z,N,c)}constructor(c,m=64,_=Float64Array,I){if(isNaN(c)||c<0)throw new Error(`Unpexpected numItems value: ${c}.`);this.numItems=+c,this.nodeSize=Math.min(Math.max(+m,2),65535),this.ArrayType=_,this.IndexArrayType=c<65536?Uint16Array:Uint32Array;const N=EV.indexOf(this.ArrayType),z=2*c*this.ArrayType.BYTES_PER_ELEMENT,j=c*this.IndexArrayType.BYTES_PER_ELEMENT,Y=(8-j%8)%8;if(N<0)throw new Error(`Unexpected typed array class: ${_}.`);I&&I instanceof ArrayBuffer?(this.data=I,this.ids=new this.IndexArrayType(this.data,8,c),this.coords=new this.ArrayType(this.data,8+j+Y,2*c),this._pos=2*c,this._finished=!0):(this.data=new ArrayBuffer(8+z+j+Y),this.ids=new this.IndexArrayType(this.data,8,c),this.coords=new this.ArrayType(this.data,8+j+Y,2*c),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+N]),new Uint16Array(this.data,2,1)[0]=m,new Uint32Array(this.data,4,1)[0]=c)}add(c,m){const _=this._pos>>1;return this.ids[_]=_,this.coords[this._pos++]=c,this.coords[this._pos++]=m,_}finish(){const c=this._pos>>1;if(c!==this.numItems)throw new Error(`Added ${c} items when expected ${this.numItems}.`);return IL(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(c,m,_,I){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:N,coords:z,nodeSize:j}=this,Y=[0,N.length-1,0],Z=[];for(;Y.length;){const ne=Y.pop()||0,ae=Y.pop()||0,ye=Y.pop()||0;if(ae-ye<=j){for(let $e=ye;$e<=ae;$e++){const Ke=z[2*$e],_t=z[2*$e+1];Ke>=c&&Ke<=_&&_t>=m&&_t<=I&&Z.push(N[$e])}continue}const we=ye+ae>>1,Me=z[2*we],Re=z[2*we+1];Me>=c&&Me<=_&&Re>=m&&Re<=I&&Z.push(N[we]),(ne===0?c<=Me:m<=Re)&&(Y.push(ye),Y.push(we-1),Y.push(1-ne)),(ne===0?_>=Me:I>=Re)&&(Y.push(we+1),Y.push(ae),Y.push(1-ne))}return Z}within(c,m,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:I,coords:N,nodeSize:z}=this,j=[0,I.length-1,0],Y=[],Z=_*_;for(;j.length;){const ne=j.pop()||0,ae=j.pop()||0,ye=j.pop()||0;if(ae-ye<=z){for(let $e=ye;$e<=ae;$e++)CV(N[2*$e],N[2*$e+1],c,m)<=Z&&Y.push(I[$e]);continue}const we=ye+ae>>1,Me=N[2*we],Re=N[2*we+1];CV(Me,Re,c,m)<=Z&&Y.push(I[we]),(ne===0?c-_<=Me:m-_<=Re)&&(j.push(ye),j.push(we-1),j.push(1-ne)),(ne===0?c+_>=Me:m+_>=Re)&&(j.push(we+1),j.push(ae),j.push(1-ne))}return Y}}function IL(h,c,m,_,I,N){if(I-_<=m)return;const z=_+I>>1;TV(h,c,z,_,I,N),IL(h,c,m,_,z-1,1-N),IL(h,c,m,z+1,I,1-N)}function TV(h,c,m,_,I,N){for(;I>_;){if(I-_>600){const Z=I-_+1,ne=m-_+1,ae=Math.log(Z),ye=.5*Math.exp(2*ae/3),we=.5*Math.sqrt(ae*ye*(Z-ye)/Z)*(ne-Z/2<0?-1:1);TV(h,c,m,Math.max(_,Math.floor(m-ne*ye/Z+we)),Math.min(I,Math.floor(m+(Z-ne)*ye/Z+we)),N)}const z=c[2*m+N];let j=_,Y=I;for(aw(h,c,_,m),c[2*I+N]>z&&aw(h,c,_,I);j<Y;){for(aw(h,c,j,Y),j++,Y--;c[2*j+N]<z;)j++;for(;c[2*Y+N]>z;)Y--}c[2*_+N]===z?aw(h,c,_,Y):(Y++,aw(h,c,Y,I)),Y<=m&&(_=Y+1),m<=Y&&(I=Y-1)}}function aw(h,c,m,_){kL(h,m,_),kL(c,2*m,2*_),kL(c,2*m+1,2*_+1)}function kL(h,c,m){const _=h[c];h[c]=h[m],h[m]=_}function CV(h,c,m,_){const I=h-m,N=c-_;return I*I+N*N}var RL;s.bd=void 0,(RL=s.bd||(s.bd={})).create="create",RL.load="load",RL.fullLoad="fullLoad";let lT=null,lw=[];const OL=1e3/60,LL="loadTime",DL="fullLoadTime",pfe={mark(h){performance.mark(h)},frame(h){const c=h;lT!=null&&lw.push(c-lT),lT=c},clearMetrics(){lT=null,lw=[],performance.clearMeasures(LL),performance.clearMeasures(DL);for(const h in s.bd)performance.clearMarks(s.bd[h])},getPerformanceMetrics(){performance.measure(LL,s.bd.create,s.bd.load),performance.measure(DL,s.bd.create,s.bd.fullLoad);const h=performance.getEntriesByName(LL)[0].duration,c=performance.getEntriesByName(DL)[0].duration,m=lw.length,_=1/(lw.reduce((N,z)=>N+z,0)/m/1e3),I=lw.filter(N=>N>OL).reduce((N,z)=>N+(z-OL)/OL,0);return{loadTime:h,fullLoadTime:c,fps:_,percentDroppedFrames:I/(m+I)*100,totalFrames:m}}};s.$=Kt,s.A=rf,s.B=function(h){if(be==null){const c=h.navigator?h.navigator.userAgent:null;be=!!h.safari||!(!c||!(/\b(iPad|iPhone|iPod)\b/.test(c)||c.match("Safari")&&!c.match("Chrome")))}return be},s.C=class{constructor(h,c){this.target=h,this.mapId=c,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new ife(()=>this.process()),this.subscription=function(m,_,I,N){return m.addEventListener(_,I,!1),{unsubscribe:()=>{m.removeEventListener(_,I,!1)}}}(this.target,"message",m=>this.receive(m)),this.globalScope=ue(self)?h:window}registerMessageHandler(h,c){this.messageHandlers[h]=c}sendAsync(h,c){return new Promise((m,_)=>{const I=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[I]={resolve:m,reject:_},c&&c.signal.addEventListener("abort",()=>{delete this.resolveRejects[I];const j={id:I,type:"<cancel>",origin:location.origin,targetMapId:h.targetMapId,sourceMapId:this.mapId};this.target.postMessage(j)},{once:!0});const N=[],z=Object.assign(Object.assign({},h),{id:I,sourceMapId:this.mapId,origin:location.origin,data:Nu(h.data,N)});this.target.postMessage(z,{transfer:N})})}receive(h){const c=h.data,m=c.id;if(!(c.origin!=="file://"&&location.origin!=="file://"&&c.origin!==location.origin||c.targetMapId&&this.mapId!==c.targetMapId)){if(c.type==="<cancel>"){delete this.tasks[m];const _=this.abortControllers[m];return delete this.abortControllers[m],void(_&&_.abort())}if(ue(self)||c.mustQueue)return this.tasks[m]=c,this.taskQueue.push(m),void this.invoker.trigger();this.processTask(m,c)}}process(){if(this.taskQueue.length===0)return;const h=this.taskQueue.shift(),c=this.tasks[h];delete this.tasks[h],this.taskQueue.length>0&&this.invoker.trigger(),c&&this.processTask(h,c)}processTask(h,c){return a(this,void 0,void 0,function*(){if(c.type==="<response>"){const I=this.resolveRejects[h];return delete this.resolveRejects[h],I?void(c.error?I.reject($d(c.error)):I.resolve($d(c.data))):void 0}if(!this.messageHandlers[c.type])return void this.completeTask(h,new Error(`Could not find a registered handler for ${c.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const m=$d(c.data),_=new AbortController;this.abortControllers[h]=_;try{const I=yield this.messageHandlers[c.type](c.sourceMapId,m,_);this.completeTask(h,null,I)}catch(I){this.completeTask(h,I)}})}completeTask(h,c,m){const _=[];delete this.abortControllers[h];const I={id:h,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:c?Nu(c):null,data:Nu(m,_)};this.target.postMessage(I,{transfer:_})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},s.D=On,s.E=Tt,s.F=function(){var h=new rf(16);return rf!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},s.G=Rt,s.H=function(h,c,m){var _,I,N,z,j,Y,Z,ne,ae,ye,we,Me,Re=m[0],$e=m[1],Ke=m[2];return c===h?(h[12]=c[0]*Re+c[4]*$e+c[8]*Ke+c[12],h[13]=c[1]*Re+c[5]*$e+c[9]*Ke+c[13],h[14]=c[2]*Re+c[6]*$e+c[10]*Ke+c[14],h[15]=c[3]*Re+c[7]*$e+c[11]*Ke+c[15]):(I=c[1],N=c[2],z=c[3],j=c[4],Y=c[5],Z=c[6],ne=c[7],ae=c[8],ye=c[9],we=c[10],Me=c[11],h[0]=_=c[0],h[1]=I,h[2]=N,h[3]=z,h[4]=j,h[5]=Y,h[6]=Z,h[7]=ne,h[8]=ae,h[9]=ye,h[10]=we,h[11]=Me,h[12]=_*Re+j*$e+ae*Ke+c[12],h[13]=I*Re+Y*$e+ye*Ke+c[13],h[14]=N*Re+Z*$e+we*Ke+c[14],h[15]=z*Re+ne*$e+Me*Ke+c[15]),h},s.I=gL,s.J=function(h,c,m){var _=m[0],I=m[1],N=m[2];return h[0]=c[0]*_,h[1]=c[1]*_,h[2]=c[2]*_,h[3]=c[3]*_,h[4]=c[4]*I,h[5]=c[5]*I,h[6]=c[6]*I,h[7]=c[7]*I,h[8]=c[8]*N,h[9]=c[9]*N,h[10]=c[10]*N,h[11]=c[11]*N,h[12]=c[12],h[13]=c[13],h[14]=c[14],h[15]=c[15],h},s.K=Jy,s.L=function(h,c){const m={};for(let _=0;_<c.length;_++){const I=c[_];I in h&&(m[I]=h[I])}return m},s.M=cg,s.N=nV,s.O=rV,s.P=p,s.Q=Uc,s.R=Ma,s.S=M,s.T=Gm,s.U=T,s.V=Ee,s.W=Sr,s.X=oo,s.Y=rT,s.Z=class extends Dc{},s._=a,s.a=st,s.a$=function(h,c,m){return h[0]=c[0]*m[0],h[1]=c[1]*m[1],h[2]=c[2]*m[2],h[3]=c[3]*m[3],h},s.a0=TL,s.a1=Je,s.a2=h=>{const c=window.document.createElement("video");return c.muted=!0,new Promise(m=>{c.onloadstart=()=>{m(c)};for(const _ of h){const I=window.document.createElement("source");nt(_)||(c.crossOrigin="Anonymous"),I.src=_,c.appendChild(I)}})},s.a3=function(){return U++},s.a4=Ky,s.a5=p_,s.a6=ip,s.a7=Ri,s.a8=Mi,s.a9=cV,s.aA=X,s.aB=function(h,c){if(!h)return[{command:"setStyle",args:[c]}];let m=[];try{if(!Ut(h.version,c.version))return[{command:"setStyle",args:[c]}];Ut(h.center,c.center)||m.push({command:"setCenter",args:[c.center]}),Ut(h.zoom,c.zoom)||m.push({command:"setZoom",args:[c.zoom]}),Ut(h.bearing,c.bearing)||m.push({command:"setBearing",args:[c.bearing]}),Ut(h.pitch,c.pitch)||m.push({command:"setPitch",args:[c.pitch]}),Ut(h.sprite,c.sprite)||m.push({command:"setSprite",args:[c.sprite]}),Ut(h.glyphs,c.glyphs)||m.push({command:"setGlyphs",args:[c.glyphs]}),Ut(h.transition,c.transition)||m.push({command:"setTransition",args:[c.transition]}),Ut(h.light,c.light)||m.push({command:"setLight",args:[c.light]}),Ut(h.terrain,c.terrain)||m.push({command:"setTerrain",args:[c.terrain]}),Ut(h.sky,c.sky)||m.push({command:"setSky",args:[c.sky]});const _={},I=[];(function(z,j,Y,Z){let ne;for(ne in j=j||{},z=z||{})Object.prototype.hasOwnProperty.call(z,ne)&&(Object.prototype.hasOwnProperty.call(j,ne)||Mt(ne,Y,Z));for(ne in j)Object.prototype.hasOwnProperty.call(j,ne)&&(Object.prototype.hasOwnProperty.call(z,ne)?Ut(z[ne],j[ne])||(z[ne].type==="geojson"&&j[ne].type==="geojson"&&Wt(z,j,ne)?Pe(Y,{command:"setGeoJSONSourceData",args:[ne,j[ne].data]}):wt(ne,j,Y,Z)):_e(ne,j,Y))})(h.sources,c.sources,I,_);const N=[];h.layers&&h.layers.forEach(z=>{"source"in z&&_[z.source]?m.push({command:"removeLayer",args:[z.id]}):N.push(z)}),m=m.concat(I),function(z,j,Y){j=j||[];const Z=(z=z||[]).map(Mn),ne=j.map(Mn),ae=z.reduce(an,{}),ye=j.reduce(an,{}),we=Z.slice(),Me=Object.create(null);let Re,$e,Ke,_t,Qe;for(let ut=0,Ft=0;ut<Z.length;ut++)Re=Z[ut],Object.prototype.hasOwnProperty.call(ye,Re)?Ft++:(Pe(Y,{command:"removeLayer",args:[Re]}),we.splice(we.indexOf(Re,Ft),1));for(let ut=0,Ft=0;ut<ne.length;ut++)Re=ne[ne.length-1-ut],we[we.length-1-ut]!==Re&&(Object.prototype.hasOwnProperty.call(ae,Re)?(Pe(Y,{command:"removeLayer",args:[Re]}),we.splice(we.lastIndexOf(Re,we.length-Ft),1)):Ft++,_t=we[we.length-ut],Pe(Y,{command:"addLayer",args:[ye[Re],_t]}),we.splice(we.length-ut,0,Re),Me[Re]=!0);for(let ut=0;ut<ne.length;ut++)if(Re=ne[ut],$e=ae[Re],Ke=ye[Re],!Me[Re]&&!Ut($e,Ke))if(Ut($e.source,Ke.source)&&Ut($e["source-layer"],Ke["source-layer"])&&Ut($e.type,Ke.type)){for(Qe in Bt($e.layout,Ke.layout,Y,Re,null,"setLayoutProperty"),Bt($e.paint,Ke.paint,Y,Re,null,"setPaintProperty"),Ut($e.filter,Ke.filter)||Pe(Y,{command:"setFilter",args:[Re,Ke.filter]}),Ut($e.minzoom,Ke.minzoom)&&Ut($e.maxzoom,Ke.maxzoom)||Pe(Y,{command:"setLayerZoomRange",args:[Re,Ke.minzoom,Ke.maxzoom]}),$e)Object.prototype.hasOwnProperty.call($e,Qe)&&Qe!=="layout"&&Qe!=="paint"&&Qe!=="filter"&&Qe!=="metadata"&&Qe!=="minzoom"&&Qe!=="maxzoom"&&(Qe.indexOf("paint.")===0?Bt($e[Qe],Ke[Qe],Y,Re,Qe.slice(6),"setPaintProperty"):Ut($e[Qe],Ke[Qe])||Pe(Y,{command:"setLayerProperty",args:[Re,Qe,Ke[Qe]]}));for(Qe in Ke)Object.prototype.hasOwnProperty.call(Ke,Qe)&&!Object.prototype.hasOwnProperty.call($e,Qe)&&Qe!=="layout"&&Qe!=="paint"&&Qe!=="filter"&&Qe!=="metadata"&&Qe!=="minzoom"&&Qe!=="maxzoom"&&(Qe.indexOf("paint.")===0?Bt($e[Qe],Ke[Qe],Y,Re,Qe.slice(6),"setPaintProperty"):Ut($e[Qe],Ke[Qe])||Pe(Y,{command:"setLayerProperty",args:[Re,Qe,Ke[Qe]]}))}else Pe(Y,{command:"removeLayer",args:[Re]}),_t=we[we.lastIndexOf(Re)+1],Pe(Y,{command:"addLayer",args:[Ke,_t]})}(N,c.layers,m)}catch(_){console.warn("Unable to compute style diff:",_),m=[{command:"setStyle",args:[c]}]}return m},s.aC=function(h){const c=[],m=h.id;return m===void 0&&c.push({message:`layers.${m}: missing required property "id"`}),h.render===void 0&&c.push({message:`layers.${m}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&c.push({message:`layers.${m}: property "renderingMode" must be either "2d" or "3d"`}),c},s.aD=function h(c,m){if(Array.isArray(c)){if(!Array.isArray(m)||c.length!==m.length)return!1;for(let _=0;_<c.length;_++)if(!h(c[_],m[_]))return!1;return!0}if(typeof c=="object"&&c!==null&&m!==null){if(typeof m!="object"||Object.keys(c).length!==Object.keys(m).length)return!1;for(const _ in c)if(!h(c[_],m[_]))return!1;return!0}return c===m},s.aE=J,s.aF=V,s.aG=class extends pi{constructor(h,c){super(h,c),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},s.aH=Qo,s.aI=class extends pi{constructor(h,c){super(h,c),this.current=sc}set(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let c=1;c<16;c++)if(h[c]!==this.current[c]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}},s.aJ=ta,s.aK=class extends pi{constructor(h,c){super(h,c),this.current=[0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))}},s.aL=class extends pi{constructor(h,c){super(h,c),this.current=[0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))}},s.aM=_a,s.aN=function(h,c,m,_,I,N,z){var j=1/(c-m),Y=1/(_-I),Z=1/(N-z);return h[0]=-2*j,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*Y,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*Z,h[11]=0,h[12]=(c+m)*j,h[13]=(I+_)*Y,h[14]=(z+N)*Z,h[15]=1,h},s.aO=Tn,s.aP=of,s.aQ=class extends hp{},s.aR=Rhe,s.aS=class extends $o{},s.aT=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},s.aU=sf,s.aV=le,s.aW=class extends pp{},s.aX=Ct,s.aY=function(h,c){return h[0]===c[0]&&h[1]===c[1]&&h[2]===c[2]&&h[3]===c[3]&&h[4]===c[4]&&h[5]===c[5]&&h[6]===c[6]&&h[7]===c[7]&&h[8]===c[8]&&h[9]===c[9]&&h[10]===c[10]&&h[11]===c[11]&&h[12]===c[12]&&h[13]===c[13]&&h[14]===c[14]&&h[15]===c[15]},s.aZ=function(h,c){var m=h[0],_=h[1],I=h[2],N=h[3],z=h[4],j=h[5],Y=h[6],Z=h[7],ne=h[8],ae=h[9],ye=h[10],we=h[11],Me=h[12],Re=h[13],$e=h[14],Ke=h[15],_t=c[0],Qe=c[1],ut=c[2],Ft=c[3],Ht=c[4],_n=c[5],Ln=c[6],vn=c[7],mn=c[8],ln=c[9],An=c[10],hn=c[11],rn=c[12],Kn=c[13],Fn=c[14],Ar=c[15];return Math.abs(m-_t)<=Uo*Math.max(1,Math.abs(m),Math.abs(_t))&&Math.abs(_-Qe)<=Uo*Math.max(1,Math.abs(_),Math.abs(Qe))&&Math.abs(I-ut)<=Uo*Math.max(1,Math.abs(I),Math.abs(ut))&&Math.abs(N-Ft)<=Uo*Math.max(1,Math.abs(N),Math.abs(Ft))&&Math.abs(z-Ht)<=Uo*Math.max(1,Math.abs(z),Math.abs(Ht))&&Math.abs(j-_n)<=Uo*Math.max(1,Math.abs(j),Math.abs(_n))&&Math.abs(Y-Ln)<=Uo*Math.max(1,Math.abs(Y),Math.abs(Ln))&&Math.abs(Z-vn)<=Uo*Math.max(1,Math.abs(Z),Math.abs(vn))&&Math.abs(ne-mn)<=Uo*Math.max(1,Math.abs(ne),Math.abs(mn))&&Math.abs(ae-ln)<=Uo*Math.max(1,Math.abs(ae),Math.abs(ln))&&Math.abs(ye-An)<=Uo*Math.max(1,Math.abs(ye),Math.abs(An))&&Math.abs(we-hn)<=Uo*Math.max(1,Math.abs(we),Math.abs(hn))&&Math.abs(Me-rn)<=Uo*Math.max(1,Math.abs(Me),Math.abs(rn))&&Math.abs(Re-Kn)<=Uo*Math.max(1,Math.abs(Re),Math.abs(Kn))&&Math.abs($e-Fn)<=Uo*Math.max(1,Math.abs($e),Math.abs(Fn))&&Math.abs(Ke-Ar)<=Uo*Math.max(1,Math.abs(Ke),Math.abs(Ar))},s.a_=function(h,c){return h[0]=c[0],h[1]=c[1],h[2]=c[2],h[3]=c[3],h[4]=c[4],h[5]=c[5],h[6]=c[6],h[7]=c[7],h[8]=c[8],h[9]=c[9],h[10]=c[10],h[11]=c[11],h[12]=c[12],h[13]=c[13],h[14]=c[14],h[15]=c[15],h},s.aa=function(h){const c={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(m,_,I,N)=>{const z=I||N;return c[_]=!z||z.toLowerCase(),""}),c["max-age"]){const m=parseInt(c["max-age"],10);isNaN(m)?delete c["max-age"]:c["max-age"]=m}return c},s.ab=function(h,c){const m=[];for(const _ in h)_ in c||m.push(_);return m},s.ac=O,s.ad=function(h,c,m){var _=Math.sin(m),I=Math.cos(m),N=c[0],z=c[1],j=c[2],Y=c[3],Z=c[4],ne=c[5],ae=c[6],ye=c[7];return c!==h&&(h[8]=c[8],h[9]=c[9],h[10]=c[10],h[11]=c[11],h[12]=c[12],h[13]=c[13],h[14]=c[14],h[15]=c[15]),h[0]=N*I+Z*_,h[1]=z*I+ne*_,h[2]=j*I+ae*_,h[3]=Y*I+ye*_,h[4]=Z*I-N*_,h[5]=ne*I-z*_,h[6]=ae*I-j*_,h[7]=ye*I-Y*_,h},s.ae=function(h){var c=new rf(16);return c[0]=h[0],c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5],c[6]=h[6],c[7]=h[7],c[8]=h[8],c[9]=h[9],c[10]=h[10],c[11]=h[11],c[12]=h[12],c[13]=h[13],c[14]=h[14],c[15]=h[15],c},s.af=wa,s.ag=function(h,c){let m=0,_=0;if(h.kind==="constant")_=h.layoutSize;else if(h.kind!=="source"){const{interpolationType:I,minZoom:N,maxZoom:z}=h,j=I?O(ys.interpolationFactor(I,c,N,z),0,1):0;h.kind==="camera"?_=Rs.number(h.minSize,h.maxSize,j):m=j}return{uSizeT:m,uSize:_}},s.ai=function(h,{uSize:c,uSizeT:m},{lowerSize:_,upperSize:I}){return h.kind==="source"?_/lf:h.kind==="composite"?Rs.number(_/lf,I/lf,m):c},s.aj=xL,s.ak=function(h,c,m,_){const I=c.y-h.y,N=c.x-h.x,z=_.y-m.y,j=_.x-m.x,Y=z*N-j*I;if(Y===0)return null;const Z=(j*(h.y-m.y)-z*(h.x-m.x))/Y;return new p(h.x+Z*N,h.y+Z*I)},s.al=fV,s.am=Xa,s.an=ig,s.ao=ts,s.aq=_L,s.ar=function(h,c){var m=c[0],_=c[1],I=c[2],N=c[3],z=c[4],j=c[5],Y=c[6],Z=c[7],ne=c[8],ae=c[9],ye=c[10],we=c[11],Me=c[12],Re=c[13],$e=c[14],Ke=c[15],_t=m*j-_*z,Qe=m*Y-I*z,ut=m*Z-N*z,Ft=_*Y-I*j,Ht=_*Z-N*j,_n=I*Z-N*Y,Ln=ne*Re-ae*Me,vn=ne*$e-ye*Me,mn=ne*Ke-we*Me,ln=ae*$e-ye*Re,An=ae*Ke-we*Re,hn=ye*Ke-we*$e,rn=_t*hn-Qe*An+ut*ln+Ft*mn-Ht*vn+_n*Ln;return rn?(h[0]=(j*hn-Y*An+Z*ln)*(rn=1/rn),h[1]=(I*An-_*hn-N*ln)*rn,h[2]=(Re*_n-$e*Ht+Ke*Ft)*rn,h[3]=(ye*Ht-ae*_n-we*Ft)*rn,h[4]=(Y*mn-z*hn-Z*vn)*rn,h[5]=(m*hn-I*mn+N*vn)*rn,h[6]=($e*ut-Me*_n-Ke*Qe)*rn,h[7]=(ne*_n-ye*ut+we*Qe)*rn,h[8]=(z*An-j*mn+Z*Ln)*rn,h[9]=(_*mn-m*An-N*Ln)*rn,h[10]=(Me*Ht-Re*ut+Ke*_t)*rn,h[11]=(ae*ut-ne*Ht-we*_t)*rn,h[12]=(j*vn-z*ln-Y*Ln)*rn,h[13]=(m*ln-_*vn+I*Ln)*rn,h[14]=(Re*Qe-Me*Ft-$e*_t)*rn,h[15]=(ne*Ft-ae*Qe+ye*_t)*rn,h):null},s.as=AL,s.at=vL,s.au=PL,s.av=function(){const h={},c=We.$version;for(const m in We.$root){const _=We.$root[m];if(_.required){let I=null;I=m==="version"?c:_.type==="array"?[]:{},I!=null&&(h[m]=I)}}return h},s.aw=Hm,s.ax=Fe,s.ay=function(h){h=h.slice();const c=Object.create(null);for(let m=0;m<h.length;m++)c[h[m].id]=h[m];for(let m=0;m<h.length;m++)"ref"in h[m]&&(h[m]=sn(h[m],c[h[m].ref]));return h},s.az=function(h){if(h.type==="custom")return new rfe(h);switch(h.type){case"background":return new efe(h);case"circle":return new n_(h);case"fill":return new pn(h);case"fill-extrusion":return new xhe(h);case"heatmap":return new HE(h);case"hillshade":return new o_(h);case"line":return new Ahe(h);case"raster":return new nfe(h);case"symbol":return new nT(h)}},s.b=ie,s.b0=function(h,c){return h[0]*c[0]+h[1]*c[1]+h[2]*c[2]+h[3]*c[3]},s.b1=D,s.b2=sV,s.b3=iV,s.b4=function(h,c,m,_,I){var N,z=1/Math.tan(c/2);return h[0]=z/m,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=z,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,I!=null&&I!==1/0?(h[10]=(I+_)*(N=1/(_-I)),h[14]=2*I*_*N):(h[10]=-1,h[14]=-2*_),h},s.b5=function(h,c,m){var _=Math.sin(m),I=Math.cos(m),N=c[4],z=c[5],j=c[6],Y=c[7],Z=c[8],ne=c[9],ae=c[10],ye=c[11];return c!==h&&(h[0]=c[0],h[1]=c[1],h[2]=c[2],h[3]=c[3],h[12]=c[12],h[13]=c[13],h[14]=c[14],h[15]=c[15]),h[4]=N*I+Z*_,h[5]=z*I+ne*_,h[6]=j*I+ae*_,h[7]=Y*I+ye*_,h[8]=Z*I-N*_,h[9]=ne*I-z*_,h[10]=ae*I-j*_,h[11]=ye*I-Y*_,h},s.b6=C,s.b7=k,s.b8=function(h){return h*Math.PI/180},s.b9=function(h,c){return h[0]=c[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=c[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=c[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},s.bA=Fu,s.ba=class extends dp{},s.bb=ML,s.bc=pfe,s.be=Lt,s.bf=function(h,c){st.REGISTERED_PROTOCOLS[h]=c},s.bg=function(h){delete st.REGISTERED_PROTOCOLS[h]},s.bh=function(h,c){const m={};for(let I=0;I<h.length;I++){const N=c&&c[h[I].id]||jm(h[I]);c&&(c[h[I].id]=N);let z=m[N];z||(z=m[N]=[]),z.push(h[I])}const _=[];for(const I in m)_.push(m[I]);return _},s.bi=wn,s.bj=lV,s.bk=uV,s.bl=U8,s.bm=function(h){h.bucket.createArrays(),h.bucket.tilePixelRatio=Sr/(512*h.bucket.overscaling),h.bucket.compareText={},h.bucket.iconsNeedLinear=!1;const c=h.bucket.layers[0],m=c.layout,_=c._unevaluatedLayout._values,I={layoutIconSize:_["icon-size"].possiblyEvaluate(new Mi(h.bucket.zoom+1),h.canonical),layoutTextSize:_["text-size"].possiblyEvaluate(new Mi(h.bucket.zoom+1),h.canonical),textMaxSize:_["text-size"].possiblyEvaluate(new Mi(18))};if(h.bucket.textSizeData.kind==="composite"){const{minZoom:Z,maxZoom:ne}=h.bucket.textSizeData;I.compositeTextSizes=[_["text-size"].possiblyEvaluate(new Mi(Z),h.canonical),_["text-size"].possiblyEvaluate(new Mi(ne),h.canonical)]}if(h.bucket.iconSizeData.kind==="composite"){const{minZoom:Z,maxZoom:ne}=h.bucket.iconSizeData;I.compositeIconSizes=[_["icon-size"].possiblyEvaluate(new Mi(Z),h.canonical),_["icon-size"].possiblyEvaluate(new Mi(ne),h.canonical)]}const N=m.get("text-line-height")*ts,z=m.get("text-rotation-alignment")!=="viewport"&&m.get("symbol-placement")!=="point",j=m.get("text-keep-upright"),Y=m.get("text-size");for(const Z of h.bucket.features){const ne=m.get("text-font").evaluate(Z,{},h.canonical).join(","),ae=Y.evaluate(Z,{},h.canonical),ye=I.layoutTextSize.evaluate(Z,{},h.canonical),we=I.layoutIconSize.evaluate(Z,{},h.canonical),Me={horizontal:{},vertical:void 0},Re=Z.text;let $e,Ke=[0,0];if(Re){const ut=Re.toString(),Ft=m.get("text-letter-spacing").evaluate(Z,{},h.canonical)*ts,Ht=zu(ut)?Ft:0,_n=m.get("text-anchor").evaluate(Z,{},h.canonical),Ln=wV(c,Z,h.canonical);if(!Ln){const hn=m.get("text-radial-offset").evaluate(Z,{},h.canonical);Ke=hn?bV(_n,[hn*ts,CL]):m.get("text-offset").evaluate(Z,{},h.canonical).map(rn=>rn*ts)}let vn=z?"center":m.get("text-justify").evaluate(Z,{},h.canonical);const mn=m.get("symbol-placement"),ln=mn==="point"?m.get("text-max-width").evaluate(Z,{},h.canonical)*ts:0,An=()=>{h.bucket.allowVerticalPlacement&&jd(ut)&&(Me.vertical=QE(Re,h.glyphMap,h.glyphPositions,h.imagePositions,ne,ln,N,_n,"left",Ht,Ke,s.ah.vertical,!0,mn,ye,ae))};if(!z&&Ln){const hn=new Set;if(vn==="auto")for(let Kn=0;Kn<Ln.values.length;Kn+=2)hn.add(AL(Ln.values[Kn]));else hn.add(vn);let rn=!1;for(const Kn of hn)if(!Me.horizontal[Kn])if(rn)Me.horizontal[Kn]=Me.horizontal[0];else{const Fn=QE(Re,h.glyphMap,h.glyphPositions,h.imagePositions,ne,ln,N,"center",Kn,Ht,Ke,s.ah.horizontal,!1,mn,ye,ae);Fn&&(Me.horizontal[Kn]=Fn,rn=Fn.positionedLines.length===1)}An()}else{vn==="auto"&&(vn=AL(_n));const hn=QE(Re,h.glyphMap,h.glyphPositions,h.imagePositions,ne,ln,N,_n,vn,Ht,Ke,s.ah.horizontal,!1,mn,ye,ae);hn&&(Me.horizontal[vn]=hn),An(),jd(ut)&&z&&j&&(Me.vertical=QE(Re,h.glyphMap,h.glyphPositions,h.imagePositions,ne,ln,N,_n,vn,Ht,Ke,s.ah.vertical,!1,mn,ye,ae))}}let _t=!1;if(Z.icon&&Z.icon.name){const ut=h.imageMap[Z.icon.name];ut&&($e=Xhe(h.imagePositions[Z.icon.name],m.get("icon-offset").evaluate(Z,{},h.canonical),m.get("icon-anchor").evaluate(Z,{},h.canonical)),_t=!!ut.sdf,h.bucket.sdfIcons===void 0?h.bucket.sdfIcons=_t:h.bucket.sdfIcons!==_t&&pe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ut.pixelRatio!==h.bucket.pixelRatio||m.get("icon-rotate").constantOr(1)!==0)&&(h.bucket.iconsNeedLinear=!0))}const Qe=MV(Me.horizontal)||Me.vertical;h.bucket.iconsInText=!!Qe&&Qe.iconsInText,(Qe||$e)&&hfe(h.bucket,Z,Me,$e,h.imageMap,I,ye,we,Ke,_t,h.canonical)}h.showCollisionBoxes&&h.bucket.generateCollisionDebugBuffers()},s.bn=hL,s.bo=ce,s.bp=ew,s.bq=Xr,s.br=pL,s.bs=class{constructor(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let h=performance.getEntriesByName(this._marks.measure);return h.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),h=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),h}},s.bt=function(h,c,m,_,I){return a(this,void 0,void 0,function*(){if(T())try{return yield Ee(h,c,m,_,I)}catch{}return function(N,z,j,Y,Z){const ne=N.width,ae=N.height;Ne&&Ge||(Ne=new OffscreenCanvas(ne,ae),Ge=Ne.getContext("2d",{willReadFrequently:!0})),Ne.width=ne,Ne.height=ae,Ge.drawImage(N,0,0,ne,ae);const ye=Ge.getImageData(z,j,Y,Z);return Ge.clearRect(0,0,ne,ae),ye.data}(h,c,m,_,I)})},s.bu=aV,s.bv=l,s.bw=d,s.bx=O8,s.by=ci,s.bz=function(h){return h.message===dt},s.c=Ue,s.d=h=>a(void 0,void 0,void 0,function*(){if(h.byteLength===0)return createImageBitmap(new ImageData(1,1));const c=new Blob([new Uint8Array(h)],{type:"image/png"});try{return createImageBitmap(c)}catch(m){throw new Error(`Could not load image because of ${m.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),s.e=B,s.f=h=>new Promise((c,m)=>{const _=new Image;_.onload=()=>{c(_),URL.revokeObjectURL(_.src),_.onload=null,window.requestAnimationFrame(()=>{_.src=ve})},_.onerror=()=>m(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const I=new Blob([new Uint8Array(h)],{type:"image/png"});_.src=h.byteLength?URL.createObjectURL(I):ve}),s.g=lt,s.h=(h,c)=>at(B(h,{type:"json"}),c),s.i=ue,s.j=vt,s.k=rt,s.l=(h,c)=>at(B(h,{type:"arrayBuffer"}),c),s.m=at,s.n=function(h){return new pL(h).readFields(Vhe,[])},s.o=og,s.p=j8,s.q=ea,s.r=ap,s.s=nt,s.t=Du,s.u=yn,s.v=We,s.w=pe,s.x=Lu,s.y=function([h,c,m]){return c+=90,c*=Math.PI/180,m*=Math.PI/180,{x:h*Math.cos(c)*Math.sin(m),y:h*Math.sin(c)*Math.sin(m),z:h*Math.cos(m)}},s.z=Rs}),i("worker",["./shared"],function(s){class a{constructor(ee){this.keyCache={},ee&&this.replace(ee)}replace(ee){this._layerConfigs={},this._layers={},this.update(ee,[])}update(ee,se){for(const Ce of ee){this._layerConfigs[Ce.id]=Ce;const qe=this._layers[Ce.id]=s.az(Ce);qe._featureFilter=s.a6(qe.filter),this.keyCache[Ce.id]&&delete this.keyCache[Ce.id]}for(const Ce of se)delete this.keyCache[Ce],delete this._layerConfigs[Ce],delete this._layers[Ce];this.familiesBySource={};const me=s.bh(Object.values(this._layerConfigs),this.keyCache);for(const Ce of me){const qe=Ce.map(It=>this._layers[It.id]),Ye=qe[0];if(Ye.visibility==="none")continue;const et=Ye.source||"";let je=this.familiesBySource[et];je||(je=this.familiesBySource[et]={});const ot=Ye.sourceLayer||"_geojsonTileLayer";let Dt=je[ot];Dt||(Dt=je[ot]=[]),Dt.push(qe)}}}class l{constructor(ee){const se={},me=[];for(const et in ee){const je=ee[et],ot=se[et]={};for(const Dt in je){const It=je[+Dt];if(!It||It.bitmap.width===0||It.bitmap.height===0)continue;const Nt={x:0,y:0,w:It.bitmap.width+2,h:It.bitmap.height+2};me.push(Nt),ot[Dt]={rect:Nt,metrics:It.metrics}}}const{w:Ce,h:qe}=s.p(me),Ye=new s.o({width:Ce||1,height:qe||1});for(const et in ee){const je=ee[et];for(const ot in je){const Dt=je[+ot];if(!Dt||Dt.bitmap.width===0||Dt.bitmap.height===0)continue;const It=se[et][ot].rect;s.o.copy(Dt.bitmap,Ye,{x:0,y:0},{x:It.x+1,y:It.y+1},Dt.bitmap)}}this.image=Ye,this.positions=se}}s.bi("GlyphAtlas",l);class d{constructor(ee){this.tileID=new s.Q(ee.tileID.overscaledZ,ee.tileID.wrap,ee.tileID.canonical.z,ee.tileID.canonical.x,ee.tileID.canonical.y),this.uid=ee.uid,this.zoom=ee.zoom,this.pixelRatio=ee.pixelRatio,this.tileSize=ee.tileSize,this.source=ee.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ee.showCollisionBoxes,this.collectResourceTiming=!!ee.collectResourceTiming,this.returnDependencies=!!ee.returnDependencies,this.promoteId=ee.promoteId,this.inFlightDependencies=[]}parse(ee,se,me,Ce){return s._(this,void 0,void 0,function*(){this.status="parsing",this.data=ee,this.collisionBoxArray=new s.a4;const qe=new s.bj(Object.keys(ee.layers).sort()),Ye=new s.bk(this.tileID,this.promoteId);Ye.bucketLayerIDs=[];const et={},je={featureIndex:Ye,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:me},ot=se.familiesBySource[this.source];for(const Te in ot){const pt=ee.layers[Te];if(!pt)continue;pt.version===1&&s.w(`Vector tile source "${this.source}" layer "${Te}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const At=qe.encode(Te),mt=[];for(let xt=0;xt<pt.length;xt++){const gn=pt.feature(xt),In=Ye.getId(gn,Te);mt.push({feature:gn,id:In,index:xt,sourceLayerIndex:At})}for(const xt of ot[Te]){const gn=xt[0];gn.source!==this.source&&s.w(`layer.source = ${gn.source} does not equal this.source = ${this.source}`),gn.minzoom&&this.zoom<Math.floor(gn.minzoom)||gn.maxzoom&&this.zoom>=gn.maxzoom||gn.visibility!=="none"&&(f(xt,this.zoom,me),(et[gn.id]=gn.createBucket({index:Ye.bucketLayerIDs.length,layers:xt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:At,sourceID:this.source})).populate(mt,je,this.tileID.canonical),Ye.bucketLayerIDs.push(xt.map(In=>In.id)))}}const Dt=s.aE(je.glyphDependencies,Te=>Object.keys(Te).map(Number));this.inFlightDependencies.forEach(Te=>Te==null?void 0:Te.abort()),this.inFlightDependencies=[];let It=Promise.resolve({});if(Object.keys(Dt).length){const Te=new AbortController;this.inFlightDependencies.push(Te),It=Ce.sendAsync({type:"getGlyphs",data:{stacks:Dt,source:this.source,tileID:this.tileID,type:"glyphs"}},Te)}const Nt=Object.keys(je.iconDependencies);let En=Promise.resolve({});if(Nt.length){const Te=new AbortController;this.inFlightDependencies.push(Te),En=Ce.sendAsync({type:"getImages",data:{icons:Nt,source:this.source,tileID:this.tileID,type:"icons"}},Te)}const Nn=Object.keys(je.patternDependencies);let zn=Promise.resolve({});if(Nn.length){const Te=new AbortController;this.inFlightDependencies.push(Te),zn=Ce.sendAsync({type:"getImages",data:{icons:Nn,source:this.source,tileID:this.tileID,type:"patterns"}},Te)}const[yr,tr,Qr]=yield Promise.all([It,En,zn]),Ur=new l(yr),Oi=new s.bl(tr,Qr);for(const Te in et){const pt=et[Te];pt instanceof s.a5?(f(pt.layers,this.zoom,me),s.bm({bucket:pt,glyphMap:yr,glyphPositions:Ur.positions,imageMap:tr,imagePositions:Oi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):pt.hasPattern&&(pt instanceof s.bn||pt instanceof s.bo||pt instanceof s.bp)&&(f(pt.layers,this.zoom,me),pt.addFeatures(je,this.tileID.canonical,Oi.patternPositions))}return this.status="done",{buckets:Object.values(et).filter(Te=>!Te.isEmpty()),featureIndex:Ye,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ur.image,imageAtlas:Oi,glyphMap:this.returnDependencies?yr:null,iconMap:this.returnDependencies?tr:null,glyphPositions:this.returnDependencies?Ur.positions:null}})}}function f(xe,ee,se){const me=new s.a8(ee);for(const Ce of xe)Ce.recalculate(me,se)}class p{constructor(ee,se,me){this.actor=ee,this.layerIndex=se,this.availableImages=me,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ee,se){return s._(this,void 0,void 0,function*(){const me=yield s.l(ee.request,se);try{return{vectorTile:new s.bq.VectorTile(new s.br(me.data)),rawData:me.data,cacheControl:me.cacheControl,expires:me.expires}}catch(Ce){const qe=new Uint8Array(me.data);let Ye=`Unable to parse the tile at ${ee.request.url}, `;throw Ye+=qe[0]===31&&qe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ce.messge}`,new Error(Ye)}})}loadTile(ee){return s._(this,void 0,void 0,function*(){const se=ee.uid,me=!!(ee&&ee.request&&ee.request.collectResourceTiming)&&new s.bs(ee.request),Ce=new d(ee);this.loading[se]=Ce;const qe=new AbortController;Ce.abort=qe;try{const Ye=yield this.loadVectorTile(ee,qe);if(delete this.loading[se],!Ye)return null;const et=Ye.rawData,je={};Ye.expires&&(je.expires=Ye.expires),Ye.cacheControl&&(je.cacheControl=Ye.cacheControl);const ot={};if(me){const It=me.finish();It&&(ot.resourceTiming=JSON.parse(JSON.stringify(It)))}Ce.vectorTile=Ye.vectorTile;const Dt=Ce.parse(Ye.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[se]=Ce,this.fetching[se]={rawTileData:et,cacheControl:je,resourceTiming:ot};try{const It=yield Dt;return s.e({rawTileData:et.slice(0)},It,je,ot)}finally{delete this.fetching[se]}}catch(Ye){throw delete this.loading[se],Ce.status="done",this.loaded[se]=Ce,Ye}})}reloadTile(ee){return s._(this,void 0,void 0,function*(){const se=ee.uid;if(!this.loaded||!this.loaded[se])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const me=this.loaded[se];if(me.showCollisionBoxes=ee.showCollisionBoxes,me.status==="parsing"){const Ce=yield me.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor);let qe;if(this.fetching[se]){const{rawTileData:Ye,cacheControl:et,resourceTiming:je}=this.fetching[se];delete this.fetching[se],qe=s.e({rawTileData:Ye.slice(0)},Ce,et,je)}else qe=Ce;return qe}if(me.status==="done"&&me.vectorTile)return me.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(ee){return s._(this,void 0,void 0,function*(){const se=this.loading,me=ee.uid;se&&se[me]&&se[me].abort&&(se[me].abort.abort(),delete se[me])})}removeTile(ee){return s._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ee.uid]&&delete this.loaded[ee.uid]})}}class g{constructor(){this.loaded={}}loadTile(ee){return s._(this,void 0,void 0,function*(){const{uid:se,encoding:me,rawImageData:Ce,redFactor:qe,greenFactor:Ye,blueFactor:et,baseShift:je}=ee,ot=Ce.width+2,Dt=Ce.height+2,It=s.b(Ce)?new s.R({width:ot,height:Dt},yield s.bt(Ce,-1,-1,ot,Dt)):Ce,Nt=new s.bu(se,It,me,qe,Ye,et,je);return this.loaded=this.loaded||{},this.loaded[se]=Nt,Nt})}removeTile(ee){const se=this.loaded,me=ee.uid;se&&se[me]&&delete se[me]}}function v(xe,ee){if(xe.length!==0){x(xe[0],ee);for(var se=1;se<xe.length;se++)x(xe[se],!ee)}}function x(xe,ee){for(var se=0,me=0,Ce=0,qe=xe.length,Ye=qe-1;Ce<qe;Ye=Ce++){var et=(xe[Ce][0]-xe[Ye][0])*(xe[Ye][1]+xe[Ce][1]),je=se+et;me+=Math.abs(se)>=Math.abs(et)?se-je+et:et-je+se,se=je}se+me>=0!=!!ee&&xe.reverse()}var b=s.bv(function xe(ee,se){var me,Ce=ee&&ee.type;if(Ce==="FeatureCollection")for(me=0;me<ee.features.length;me++)xe(ee.features[me],se);else if(Ce==="GeometryCollection")for(me=0;me<ee.geometries.length;me++)xe(ee.geometries[me],se);else if(Ce==="Feature")xe(ee.geometry,se);else if(Ce==="Polygon")v(ee.coordinates,se);else if(Ce==="MultiPolygon")for(me=0;me<ee.coordinates.length;me++)v(ee.coordinates[me],se);return ee});const S=s.bq.VectorTileFeature.prototype.toGeoJSON;var M={exports:{}},T=s.bw,C=s.bq.VectorTileFeature,k=O;function O(xe,ee){this.options=ee||{},this.features=xe,this.length=xe.length}function D(xe,ee){this.id=typeof xe.id=="number"?xe.id:void 0,this.type=xe.type,this.rawGeometry=xe.type===1?[xe.geometry]:xe.geometry,this.properties=xe.tags,this.extent=ee||4096}O.prototype.feature=function(xe){return new D(this.features[xe],this.options.extent)},D.prototype.loadGeometry=function(){var xe=this.rawGeometry;this.geometry=[];for(var ee=0;ee<xe.length;ee++){for(var se=xe[ee],me=[],Ce=0;Ce<se.length;Ce++)me.push(new T(se[Ce][0],se[Ce][1]));this.geometry.push(me)}return this.geometry},D.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var xe=this.geometry,ee=1/0,se=-1/0,me=1/0,Ce=-1/0,qe=0;qe<xe.length;qe++)for(var Ye=xe[qe],et=0;et<Ye.length;et++){var je=Ye[et];ee=Math.min(ee,je.x),se=Math.max(se,je.x),me=Math.min(me,je.y),Ce=Math.max(Ce,je.y)}return[ee,me,se,Ce]},D.prototype.toGeoJSON=C.prototype.toGeoJSON;var B=s.bx,U=k;function J(xe){var ee=new B;return function(se,me){for(var Ce in se.layers)me.writeMessage(3,V,se.layers[Ce])}(xe,ee),ee.finish()}function V(xe,ee){var se;ee.writeVarintField(15,xe.version||1),ee.writeStringField(1,xe.name||""),ee.writeVarintField(5,xe.extent||4096);var me={keys:[],values:[],keycache:{},valuecache:{}};for(se=0;se<xe.length;se++)me.feature=xe.feature(se),ee.writeMessage(2,X,me);var Ce=me.keys;for(se=0;se<Ce.length;se++)ee.writeStringField(3,Ce[se]);var qe=me.values;for(se=0;se<qe.length;se++)ee.writeMessage(4,ue,qe[se])}function X(xe,ee){var se=xe.feature;se.id!==void 0&&ee.writeVarintField(1,se.id),ee.writeMessage(2,oe,xe),ee.writeVarintField(3,se.type),ee.writeMessage(4,he,se)}function oe(xe,ee){var se=xe.feature,me=xe.keys,Ce=xe.values,qe=xe.keycache,Ye=xe.valuecache;for(var et in se.properties){var je=se.properties[et],ot=qe[et];if(je!==null){ot===void 0&&(me.push(et),qe[et]=ot=me.length-1),ee.writeVarint(ot);var Dt=typeof je;Dt!=="string"&&Dt!=="boolean"&&Dt!=="number"&&(je=JSON.stringify(je));var It=Dt+":"+je,Nt=Ye[It];Nt===void 0&&(Ce.push(je),Ye[It]=Nt=Ce.length-1),ee.writeVarint(Nt)}}}function pe(xe,ee){return(ee<<3)+(7&xe)}function re(xe){return xe<<1^xe>>31}function he(xe,ee){for(var se=xe.loadGeometry(),me=xe.type,Ce=0,qe=0,Ye=se.length,et=0;et<Ye;et++){var je=se[et],ot=1;me===1&&(ot=je.length),ee.writeVarint(pe(1,ot));for(var Dt=me===3?je.length-1:je.length,It=0;It<Dt;It++){It===1&&me!==1&&ee.writeVarint(pe(2,Dt-1));var Nt=je[It].x-Ce,En=je[It].y-qe;ee.writeVarint(re(Nt)),ee.writeVarint(re(En)),Ce+=Nt,qe+=En}me===3&&ee.writeVarint(pe(7,1))}}function ue(xe,ee){var se=typeof xe;se==="string"?ee.writeStringField(1,xe):se==="boolean"?ee.writeBooleanField(7,xe):se==="number"&&(xe%1!=0?ee.writeDoubleField(3,xe):xe<0?ee.writeSVarintField(6,xe):ee.writeVarintField(5,xe))}M.exports=J,M.exports.fromVectorTileJs=J,M.exports.fromGeojsonVt=function(xe,ee){ee=ee||{};var se={};for(var me in xe)se[me]=new U(xe[me].features,ee),se[me].name=me,se[me].version=ee.version,se[me].extent=ee.extent;return J({layers:se})},M.exports.GeoJSONWrapper=U;var be=s.bv(M.exports);const ie={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:xe=>xe},ve=Math.fround||(Ee=new Float32Array(1),xe=>(Ee[0]=+xe,Ee[0]));var Ee;const Ne=3,Ge=5,dt=6;class Ue{constructor(ee){this.options=Object.assign(Object.create(ie),ee),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ee){const{log:se,minZoom:me,maxZoom:Ce}=this.options;se&&console.time("total time");const qe=`prepare ${ee.length} points`;se&&console.time(qe),this.points=ee;const Ye=[];for(let je=0;je<ee.length;je++){const ot=ee[je];if(!ot.geometry)continue;const[Dt,It]=ot.geometry.coordinates,Nt=ve(Rt(Dt)),En=ve(Lt(It));Ye.push(Nt,En,1/0,je,-1,1),this.options.reduce&&Ye.push(0)}let et=this.trees[Ce+1]=this._createTree(Ye);se&&console.timeEnd(qe);for(let je=Ce;je>=me;je--){const ot=+Date.now();et=this.trees[je]=this._createTree(this._cluster(et,je)),se&&console.log("z%d: %d clusters in %dms",je,et.numItems,+Date.now()-ot)}return se&&console.timeEnd("total time"),this}getClusters(ee,se){let me=((ee[0]+180)%360+360)%360-180;const Ce=Math.max(-90,Math.min(90,ee[1]));let qe=ee[2]===180?180:((ee[2]+180)%360+360)%360-180;const Ye=Math.max(-90,Math.min(90,ee[3]));if(ee[2]-ee[0]>=360)me=-180,qe=180;else if(me>qe){const It=this.getClusters([me,Ce,180,Ye],se),Nt=this.getClusters([-180,Ce,qe,Ye],se);return It.concat(Nt)}const et=this.trees[this._limitZoom(se)],je=et.range(Rt(me),Lt(Ye),Rt(qe),Lt(Ce)),ot=et.data,Dt=[];for(const It of je){const Nt=this.stride*It;Dt.push(ot[Nt+Ge]>1?st(ot,Nt,this.clusterProps):this.points[ot[Nt+Ne]])}return Dt}getChildren(ee){const se=this._getOriginId(ee),me=this._getOriginZoom(ee),Ce="No cluster with the specified id.",qe=this.trees[me];if(!qe)throw new Error(Ce);const Ye=qe.data;if(se*this.stride>=Ye.length)throw new Error(Ce);const et=this.options.radius/(this.options.extent*Math.pow(2,me-1)),je=qe.within(Ye[se*this.stride],Ye[se*this.stride+1],et),ot=[];for(const Dt of je){const It=Dt*this.stride;Ye[It+4]===ee&&ot.push(Ye[It+Ge]>1?st(Ye,It,this.clusterProps):this.points[Ye[It+Ne]])}if(ot.length===0)throw new Error(Ce);return ot}getLeaves(ee,se,me){const Ce=[];return this._appendLeaves(Ce,ee,se=se||10,me=me||0,0),Ce}getTile(ee,se,me){const Ce=this.trees[this._limitZoom(ee)],qe=Math.pow(2,ee),{extent:Ye,radius:et}=this.options,je=et/Ye,ot=(me-je)/qe,Dt=(me+1+je)/qe,It={features:[]};return this._addTileFeatures(Ce.range((se-je)/qe,ot,(se+1+je)/qe,Dt),Ce.data,se,me,qe,It),se===0&&this._addTileFeatures(Ce.range(1-je/qe,ot,1,Dt),Ce.data,qe,me,qe,It),se===qe-1&&this._addTileFeatures(Ce.range(0,ot,je/qe,Dt),Ce.data,-1,me,qe,It),It.features.length?It:null}getClusterExpansionZoom(ee){let se=this._getOriginZoom(ee)-1;for(;se<=this.options.maxZoom;){const me=this.getChildren(ee);if(se++,me.length!==1)break;ee=me[0].properties.cluster_id}return se}_appendLeaves(ee,se,me,Ce,qe){const Ye=this.getChildren(se);for(const et of Ye){const je=et.properties;if(je&&je.cluster?qe+je.point_count<=Ce?qe+=je.point_count:qe=this._appendLeaves(ee,je.cluster_id,me,Ce,qe):qe<Ce?qe++:ee.push(et),ee.length===me)break}return qe}_createTree(ee){const se=new s.au(ee.length/this.stride|0,this.options.nodeSize,Float32Array);for(let me=0;me<ee.length;me+=this.stride)se.add(ee[me],ee[me+1]);return se.finish(),se.data=ee,se}_addTileFeatures(ee,se,me,Ce,qe,Ye){for(const et of ee){const je=et*this.stride,ot=se[je+Ge]>1;let Dt,It,Nt;if(ot)Dt=lt(se,je,this.clusterProps),It=se[je],Nt=se[je+1];else{const zn=this.points[se[je+Ne]];Dt=zn.properties;const[yr,tr]=zn.geometry.coordinates;It=Rt(yr),Nt=Lt(tr)}const En={type:1,geometry:[[Math.round(this.options.extent*(It*qe-me)),Math.round(this.options.extent*(Nt*qe-Ce))]],tags:Dt};let Nn;Nn=ot||this.options.generateId?se[je+Ne]:this.points[se[je+Ne]].id,Nn!==void 0&&(En.id=Nn),Ye.features.push(En)}}_limitZoom(ee){return Math.max(this.options.minZoom,Math.min(Math.floor(+ee),this.options.maxZoom+1))}_cluster(ee,se){const{radius:me,extent:Ce,reduce:qe,minPoints:Ye}=this.options,et=me/(Ce*Math.pow(2,se)),je=ee.data,ot=[],Dt=this.stride;for(let It=0;It<je.length;It+=Dt){if(je[It+2]<=se)continue;je[It+2]=se;const Nt=je[It],En=je[It+1],Nn=ee.within(je[It],je[It+1],et),zn=je[It+Ge];let yr=zn;for(const tr of Nn){const Qr=tr*Dt;je[Qr+2]>se&&(yr+=je[Qr+Ge])}if(yr>zn&&yr>=Ye){let tr,Qr=Nt*zn,Ur=En*zn,Oi=-1;const Te=((It/Dt|0)<<5)+(se+1)+this.points.length;for(const pt of Nn){const At=pt*Dt;if(je[At+2]<=se)continue;je[At+2]=se;const mt=je[At+Ge];Qr+=je[At]*mt,Ur+=je[At+1]*mt,je[At+4]=Te,qe&&(tr||(tr=this._map(je,It,!0),Oi=this.clusterProps.length,this.clusterProps.push(tr)),qe(tr,this._map(je,At)))}je[It+4]=Te,ot.push(Qr/yr,Ur/yr,1/0,Te,-1,yr),qe&&ot.push(Oi)}else{for(let tr=0;tr<Dt;tr++)ot.push(je[It+tr]);if(yr>1)for(const tr of Nn){const Qr=tr*Dt;if(!(je[Qr+2]<=se)){je[Qr+2]=se;for(let Ur=0;Ur<Dt;Ur++)ot.push(je[Qr+Ur])}}}}return ot}_getOriginId(ee){return ee-this.points.length>>5}_getOriginZoom(ee){return(ee-this.points.length)%32}_map(ee,se,me){if(ee[se+Ge]>1){const Ye=this.clusterProps[ee[se+dt]];return me?Object.assign({},Ye):Ye}const Ce=this.points[ee[se+Ne]].properties,qe=this.options.map(Ce);return me&&qe===Ce?Object.assign({},qe):qe}}function st(xe,ee,se){return{type:"Feature",id:xe[ee+Ne],properties:lt(xe,ee,se),geometry:{type:"Point",coordinates:[(me=xe[ee],360*(me-.5)),Fe(xe[ee+1])]}};var me}function lt(xe,ee,se){const me=xe[ee+Ge],Ce=me>=1e4?`${Math.round(me/1e3)}k`:me>=1e3?Math.round(me/100)/10+"k":me,qe=xe[ee+dt],Ye=qe===-1?{}:Object.assign({},se[qe]);return Object.assign(Ye,{cluster:!0,cluster_id:xe[ee+Ne],point_count:me,point_count_abbreviated:Ce})}function Rt(xe){return xe/360+.5}function Lt(xe){const ee=Math.sin(xe*Math.PI/180),se=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return se<0?0:se>1?1:se}function Fe(xe){const ee=(180-360*xe)*Math.PI/180;return 360*Math.atan(Math.exp(ee))/Math.PI-90}function at(xe,ee,se,me){for(var Ce,qe=me,Ye=se-ee>>1,et=se-ee,je=xe[ee],ot=xe[ee+1],Dt=xe[se],It=xe[se+1],Nt=ee+3;Nt<se;Nt+=3){var En=nt(xe[Nt],xe[Nt+1],je,ot,Dt,It);if(En>qe)Ce=Nt,qe=En;else if(En===qe){var Nn=Math.abs(Nt-Ye);Nn<et&&(Ce=Nt,et=Nn)}}qe>me&&(Ce-ee>3&&at(xe,ee,Ce,me),xe[Ce+2]=qe,se-Ce>3&&at(xe,Ce,se,me))}function nt(xe,ee,se,me,Ce,qe){var Ye=Ce-se,et=qe-me;if(Ye!==0||et!==0){var je=((xe-se)*Ye+(ee-me)*et)/(Ye*Ye+et*et);je>1?(se=Ce,me=qe):je>0&&(se+=Ye*je,me+=et*je)}return(Ye=xe-se)*Ye+(et=ee-me)*et}function ge(xe,ee,se,me){var Ce={id:xe===void 0?null:xe,type:ee,geometry:se,tags:me,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(qe){var Ye=qe.geometry,et=qe.type;if(et==="Point"||et==="MultiPoint"||et==="LineString")tt(qe,Ye);else if(et==="Polygon"||et==="MultiLineString")for(var je=0;je<Ye.length;je++)tt(qe,Ye[je]);else if(et==="MultiPolygon")for(je=0;je<Ye.length;je++)for(var ot=0;ot<Ye[je].length;ot++)tt(qe,Ye[je][ot])}(Ce),Ce}function tt(xe,ee){for(var se=0;se<ee.length;se+=3)xe.minX=Math.min(xe.minX,ee[se]),xe.minY=Math.min(xe.minY,ee[se+1]),xe.maxX=Math.max(xe.maxX,ee[se]),xe.maxY=Math.max(xe.maxY,ee[se+1])}function rt(xe,ee,se,me){if(ee.geometry){var Ce=ee.geometry.coordinates,qe=ee.geometry.type,Ye=Math.pow(se.tolerance/((1<<se.maxZoom)*se.extent),2),et=[],je=ee.id;if(se.promoteId?je=ee.properties[se.promoteId]:se.generateId&&(je=me||0),qe==="Point")vt(Ce,et);else if(qe==="MultiPoint")for(var ot=0;ot<Ce.length;ot++)vt(Ce[ot],et);else if(qe==="LineString")Tt(Ce,et,Ye,!1);else if(qe==="MultiLineString"){if(se.lineMetrics){for(ot=0;ot<Ce.length;ot++)Tt(Ce[ot],et=[],Ye,!1),xe.push(ge(je,"LineString",et,ee.properties));return}We(Ce,et,Ye,!1)}else if(qe==="Polygon")We(Ce,et,Ye,!0);else{if(qe!=="MultiPolygon"){if(qe==="GeometryCollection"){for(ot=0;ot<ee.geometry.geometries.length;ot++)rt(xe,{id:je,geometry:ee.geometry.geometries[ot],properties:ee.properties},se,me);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ot=0;ot<Ce.length;ot++){var Dt=[];We(Ce[ot],Dt,Ye,!0),et.push(Dt)}}xe.push(ge(je,qe,et,ee.properties))}}function vt(xe,ee){ee.push(Vt(xe[0])),ee.push(sn(xe[1])),ee.push(0)}function Tt(xe,ee,se,me){for(var Ce,qe,Ye=0,et=0;et<xe.length;et++){var je=Vt(xe[et][0]),ot=sn(xe[et][1]);ee.push(je),ee.push(ot),ee.push(0),et>0&&(Ye+=me?(Ce*ot-je*qe)/2:Math.sqrt(Math.pow(je-Ce,2)+Math.pow(ot-qe,2))),Ce=je,qe=ot}var Dt=ee.length-3;ee[2]=1,at(ee,0,Dt,se),ee[Dt+2]=1,ee.size=Math.abs(Ye),ee.start=0,ee.end=ee.size}function We(xe,ee,se,me){for(var Ce=0;Ce<xe.length;Ce++){var qe=[];Tt(xe[Ce],qe,se,me),ee.push(qe)}}function Vt(xe){return xe/360+.5}function sn(xe){var ee=Math.sin(xe*Math.PI/180),se=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return se<0?0:se>1?1:se}function Ut(xe,ee,se,me,Ce,qe,Ye,et){if(me/=ee,qe>=(se/=ee)&&Ye<me)return xe;if(Ye<se||qe>=me)return null;for(var je=[],ot=0;ot<xe.length;ot++){var Dt=xe[ot],It=Dt.geometry,Nt=Dt.type,En=Ce===0?Dt.minX:Dt.minY,Nn=Ce===0?Dt.maxX:Dt.maxY;if(En>=se&&Nn<me)je.push(Dt);else if(!(Nn<se||En>=me)){var zn=[];if(Nt==="Point"||Nt==="MultiPoint")Pe(It,zn,se,me,Ce);else if(Nt==="LineString")_e(It,zn,se,me,Ce,!1,et.lineMetrics);else if(Nt==="MultiLineString")wt(It,zn,se,me,Ce,!1);else if(Nt==="Polygon")wt(It,zn,se,me,Ce,!0);else if(Nt==="MultiPolygon")for(var yr=0;yr<It.length;yr++){var tr=[];wt(It[yr],tr,se,me,Ce,!0),tr.length&&zn.push(tr)}if(zn.length){if(et.lineMetrics&&Nt==="LineString"){for(yr=0;yr<zn.length;yr++)je.push(ge(Dt.id,Nt,zn[yr],Dt.tags));continue}Nt!=="LineString"&&Nt!=="MultiLineString"||(zn.length===1?(Nt="LineString",zn=zn[0]):Nt="MultiLineString"),Nt!=="Point"&&Nt!=="MultiPoint"||(Nt=zn.length===3?"Point":"MultiPoint"),je.push(ge(Dt.id,Nt,zn,Dt.tags))}}}return je.length?je:null}function Pe(xe,ee,se,me,Ce){for(var qe=0;qe<xe.length;qe+=3){var Ye=xe[qe+Ce];Ye>=se&&Ye<=me&&(ee.push(xe[qe]),ee.push(xe[qe+1]),ee.push(xe[qe+2]))}}function _e(xe,ee,se,me,Ce,qe,Ye){for(var et,je,ot=Mt(xe),Dt=Ce===0?Bt:Mn,It=xe.start,Nt=0;Nt<xe.length-3;Nt+=3){var En=xe[Nt],Nn=xe[Nt+1],zn=xe[Nt+2],yr=xe[Nt+3],tr=xe[Nt+4],Qr=Ce===0?En:Nn,Ur=Ce===0?yr:tr,Oi=!1;Ye&&(et=Math.sqrt(Math.pow(En-yr,2)+Math.pow(Nn-tr,2))),Qr<se?Ur>se&&(je=Dt(ot,En,Nn,yr,tr,se),Ye&&(ot.start=It+et*je)):Qr>me?Ur<me&&(je=Dt(ot,En,Nn,yr,tr,me),Ye&&(ot.start=It+et*je)):Wt(ot,En,Nn,zn),Ur<se&&Qr>=se&&(je=Dt(ot,En,Nn,yr,tr,se),Oi=!0),Ur>me&&Qr<=me&&(je=Dt(ot,En,Nn,yr,tr,me),Oi=!0),!qe&&Oi&&(Ye&&(ot.end=It+et*je),ee.push(ot),ot=Mt(xe)),Ye&&(It+=et)}var Te=xe.length-3;En=xe[Te],Nn=xe[Te+1],zn=xe[Te+2],(Qr=Ce===0?En:Nn)>=se&&Qr<=me&&Wt(ot,En,Nn,zn),Te=ot.length-3,qe&&Te>=3&&(ot[Te]!==ot[0]||ot[Te+1]!==ot[1])&&Wt(ot,ot[0],ot[1],ot[2]),ot.length&&ee.push(ot)}function Mt(xe){var ee=[];return ee.size=xe.size,ee.start=xe.start,ee.end=xe.end,ee}function wt(xe,ee,se,me,Ce,qe){for(var Ye=0;Ye<xe.length;Ye++)_e(xe[Ye],ee,se,me,Ce,qe,!1)}function Wt(xe,ee,se,me){xe.push(ee),xe.push(se),xe.push(me)}function Bt(xe,ee,se,me,Ce,qe){var Ye=(qe-ee)/(me-ee);return xe.push(qe),xe.push(se+(Ce-se)*Ye),xe.push(1),Ye}function Mn(xe,ee,se,me,Ce,qe){var Ye=(qe-se)/(Ce-se);return xe.push(ee+(me-ee)*Ye),xe.push(qe),xe.push(1),Ye}function an(xe,ee){for(var se=[],me=0;me<xe.length;me++){var Ce,qe=xe[me],Ye=qe.type;if(Ye==="Point"||Ye==="MultiPoint"||Ye==="LineString")Ce=Je(qe.geometry,ee);else if(Ye==="MultiLineString"||Ye==="Polygon"){Ce=[];for(var et=0;et<qe.geometry.length;et++)Ce.push(Je(qe.geometry[et],ee))}else if(Ye==="MultiPolygon")for(Ce=[],et=0;et<qe.geometry.length;et++){for(var je=[],ot=0;ot<qe.geometry[et].length;ot++)je.push(Je(qe.geometry[et][ot],ee));Ce.push(je)}se.push(ge(qe.id,Ye,Ce,qe.tags))}return se}function Je(xe,ee){var se=[];se.size=xe.size,xe.start!==void 0&&(se.start=xe.start,se.end=xe.end);for(var me=0;me<xe.length;me+=3)se.push(xe[me]+ee,xe[me+1],xe[me+2]);return se}function Yt(xe,ee){if(xe.transformed)return xe;var se,me,Ce,qe=1<<xe.z,Ye=xe.x,et=xe.y;for(se=0;se<xe.features.length;se++){var je=xe.features[se],ot=je.geometry,Dt=je.type;if(je.geometry=[],Dt===1)for(me=0;me<ot.length;me+=2)je.geometry.push(xn(ot[me],ot[me+1],ee,qe,Ye,et));else for(me=0;me<ot.length;me++){var It=[];for(Ce=0;Ce<ot[me].length;Ce+=2)It.push(xn(ot[me][Ce],ot[me][Ce+1],ee,qe,Ye,et));je.geometry.push(It)}}return xe.transformed=!0,xe}function xn(xe,ee,se,me,Ce,qe){return[Math.round(se*(xe*me-Ce)),Math.round(se*(ee*me-qe))]}function en(xe,ee,se,me,Ce){for(var qe=ee===Ce.maxZoom?0:Ce.tolerance/((1<<ee)*Ce.extent),Ye={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:se,y:me,z:ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},et=0;et<xe.length;et++){Ye.numFeatures++,un(Ye,xe[et],qe,Ce);var je=xe[et].minX,ot=xe[et].minY,Dt=xe[et].maxX,It=xe[et].maxY;je<Ye.minX&&(Ye.minX=je),ot<Ye.minY&&(Ye.minY=ot),Dt>Ye.maxX&&(Ye.maxX=Dt),It>Ye.maxY&&(Ye.maxY=It)}return Ye}function un(xe,ee,se,me){var Ce=ee.geometry,qe=ee.type,Ye=[];if(qe==="Point"||qe==="MultiPoint")for(var et=0;et<Ce.length;et+=3)Ye.push(Ce[et]),Ye.push(Ce[et+1]),xe.numPoints++,xe.numSimplified++;else if(qe==="LineString")St(Ye,Ce,xe,se,!1,!1);else if(qe==="MultiLineString"||qe==="Polygon")for(et=0;et<Ce.length;et++)St(Ye,Ce[et],xe,se,qe==="Polygon",et===0);else if(qe==="MultiPolygon")for(var je=0;je<Ce.length;je++){var ot=Ce[je];for(et=0;et<ot.length;et++)St(Ye,ot[et],xe,se,!0,et===0)}if(Ye.length){var Dt=ee.tags||null;if(qe==="LineString"&&me.lineMetrics){for(var It in Dt={},ee.tags)Dt[It]=ee.tags[It];Dt.mapbox_clip_start=Ce.start/Ce.size,Dt.mapbox_clip_end=Ce.end/Ce.size}var Nt={geometry:Ye,type:qe==="Polygon"||qe==="MultiPolygon"?3:qe==="LineString"||qe==="MultiLineString"?2:1,tags:Dt};ee.id!==null&&(Nt.id=ee.id),xe.features.push(Nt)}}function St(xe,ee,se,me,Ce,qe){var Ye=me*me;if(me>0&&ee.size<(Ce?Ye:me))se.numPoints+=ee.length/3;else{for(var et=[],je=0;je<ee.length;je+=3)(me===0||ee[je+2]>Ye)&&(se.numSimplified++,et.push(ee[je]),et.push(ee[je+1])),se.numPoints++;Ce&&function(ot,Dt){for(var It=0,Nt=0,En=ot.length,Nn=En-2;Nt<En;Nn=Nt,Nt+=2)It+=(ot[Nt]-ot[Nn])*(ot[Nt+1]+ot[Nn+1]);if(It>0===Dt)for(Nt=0,En=ot.length;Nt<En/2;Nt+=2){var zn=ot[Nt],yr=ot[Nt+1];ot[Nt]=ot[En-2-Nt],ot[Nt+1]=ot[En-1-Nt],ot[En-2-Nt]=zn,ot[En-1-Nt]=yr}}(et,qe),xe.push(et)}}function gt(xe,ee){var se=(ee=this.options=function(Ce,qe){for(var Ye in qe)Ce[Ye]=qe[Ye];return Ce}(Object.create(this.options),ee)).debug;if(se&&console.time("preprocess data"),ee.maxZoom<0||ee.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ee.promoteId&&ee.generateId)throw new Error("promoteId and generateId cannot be used together.");var me=function(Ce,qe){var Ye=[];if(Ce.type==="FeatureCollection")for(var et=0;et<Ce.features.length;et++)rt(Ye,Ce.features[et],qe,et);else rt(Ye,Ce.type==="Feature"?Ce:{geometry:Ce},qe);return Ye}(xe,ee);this.tiles={},this.tileCoords=[],se&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ee.indexMaxZoom,ee.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),me=function(Ce,qe){var Ye=qe.buffer/qe.extent,et=Ce,je=Ut(Ce,1,-1-Ye,Ye,0,-1,2,qe),ot=Ut(Ce,1,1-Ye,2+Ye,0,-1,2,qe);return(je||ot)&&(et=Ut(Ce,1,-Ye,1+Ye,0,-1,2,qe)||[],je&&(et=an(je,1).concat(et)),ot&&(et=et.concat(an(ot,-1)))),et}(me,ee),me.length&&this.splitTile(me,0,0,0),se&&(me.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ae(xe,ee,se){return 32*((1<<xe)*se+ee)+xe}function ft(xe,ee){return ee?xe.properties[ee]:xe.id}function Ie(xe,ee){if(xe==null)return!0;if(xe.type==="Feature")return ft(xe,ee)!=null;if(xe.type==="FeatureCollection"){const se=new Set;for(const me of xe.features){const Ce=ft(me,ee);if(Ce==null||se.has(Ce))return!1;se.add(Ce)}return!0}return!1}function it(xe,ee){const se=new Map;if(xe!=null)if(xe.type==="Feature")se.set(ft(xe,ee),xe);else for(const me of xe.features)se.set(ft(me,ee),me);return se}gt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},gt.prototype.splitTile=function(xe,ee,se,me,Ce,qe,Ye){for(var et=[xe,ee,se,me],je=this.options,ot=je.debug;et.length;){me=et.pop(),se=et.pop(),ee=et.pop(),xe=et.pop();var Dt=1<<ee,It=Ae(ee,se,me),Nt=this.tiles[It];if(!Nt&&(ot>1&&console.time("creation"),Nt=this.tiles[It]=en(xe,ee,se,me,je),this.tileCoords.push({z:ee,x:se,y:me}),ot)){ot>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ee,se,me,Nt.numFeatures,Nt.numPoints,Nt.numSimplified),console.timeEnd("creation"));var En="z"+ee;this.stats[En]=(this.stats[En]||0)+1,this.total++}if(Nt.source=xe,Ce){if(ee===je.maxZoom||ee===Ce)continue;var Nn=1<<Ce-ee;if(se!==Math.floor(qe/Nn)||me!==Math.floor(Ye/Nn))continue}else if(ee===je.indexMaxZoom||Nt.numPoints<=je.indexMaxPoints)continue;if(Nt.source=null,xe.length!==0){ot>1&&console.time("clipping");var zn,yr,tr,Qr,Ur,Oi,Te=.5*je.buffer/je.extent,pt=.5-Te,At=.5+Te,mt=1+Te;zn=yr=tr=Qr=null,Ur=Ut(xe,Dt,se-Te,se+At,0,Nt.minX,Nt.maxX,je),Oi=Ut(xe,Dt,se+pt,se+mt,0,Nt.minX,Nt.maxX,je),xe=null,Ur&&(zn=Ut(Ur,Dt,me-Te,me+At,1,Nt.minY,Nt.maxY,je),yr=Ut(Ur,Dt,me+pt,me+mt,1,Nt.minY,Nt.maxY,je),Ur=null),Oi&&(tr=Ut(Oi,Dt,me-Te,me+At,1,Nt.minY,Nt.maxY,je),Qr=Ut(Oi,Dt,me+pt,me+mt,1,Nt.minY,Nt.maxY,je),Oi=null),ot>1&&console.timeEnd("clipping"),et.push(zn||[],ee+1,2*se,2*me),et.push(yr||[],ee+1,2*se,2*me+1),et.push(tr||[],ee+1,2*se+1,2*me),et.push(Qr||[],ee+1,2*se+1,2*me+1)}}},gt.prototype.getTile=function(xe,ee,se){var me=this.options,Ce=me.extent,qe=me.debug;if(xe<0||xe>24)return null;var Ye=1<<xe,et=Ae(xe,ee=(ee%Ye+Ye)%Ye,se);if(this.tiles[et])return Yt(this.tiles[et],Ce);qe>1&&console.log("drilling down to z%d-%d-%d",xe,ee,se);for(var je,ot=xe,Dt=ee,It=se;!je&&ot>0;)ot--,Dt=Math.floor(Dt/2),It=Math.floor(It/2),je=this.tiles[Ae(ot,Dt,It)];return je&&je.source?(qe>1&&console.log("found parent tile z%d-%d-%d",ot,Dt,It),qe>1&&console.time("drilling down"),this.splitTile(je.source,ot,Dt,It,xe,ee,se),qe>1&&console.timeEnd("drilling down"),this.tiles[et]?Yt(this.tiles[et],Ce):null):null};class tn extends p{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ee,se){return s._(this,void 0,void 0,function*(){const me=ee.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ce=this._geoJSONIndex.getTile(me.z,me.x,me.y);if(!Ce)return null;const qe=new class{constructor(et){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.W,this.length=et.length,this._features=et}feature(et){return new class{constructor(je){this._feature=je,this.extent=s.W,this.type=je.type,this.properties=je.tags,"id"in je&&!isNaN(je.id)&&(this.id=parseInt(je.id,10))}loadGeometry(){if(this._feature.type===1){const je=[];for(const ot of this._feature.geometry)je.push([new s.P(ot[0],ot[1])]);return je}{const je=[];for(const ot of this._feature.geometry){const Dt=[];for(const It of ot)Dt.push(new s.P(It[0],It[1]));je.push(Dt)}return je}}toGeoJSON(je,ot,Dt){return S.call(this,je,ot,Dt)}}(this._features[et])}}(Ce.features);let Ye=be(qe);return Ye.byteOffset===0&&Ye.byteLength===Ye.buffer.byteLength||(Ye=new Uint8Array(Ye)),{vectorTile:qe,rawData:Ye.buffer}})}loadData(ee){return s._(this,void 0,void 0,function*(){var se;(se=this._pendingRequest)===null||se===void 0||se.abort();const me=!!(ee&&ee.request&&ee.request.collectResourceTiming)&&new s.bs(ee.request);this._pendingRequest=new AbortController;try{let Ce=yield this.loadGeoJSON(ee,this._pendingRequest);if(delete this._pendingRequest,typeof Ce!="object")throw new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`);if(b(Ce,!0),ee.filter){const Ye=s.by(ee.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ye.result==="error")throw new Error(Ye.value.map(je=>`${je.key}: ${je.message}`).join(", "));Ce={type:"FeatureCollection",features:Ce.features.filter(je=>Ye.value.evaluate({zoom:0},je))}}this._geoJSONIndex=ee.cluster?new Ue(function({superclusterOptions:Ye,clusterProperties:et}){if(!et||!Ye)return Ye;const je={},ot={},Dt={accumulated:null,zoom:0},It={properties:null},Nt=Object.keys(et);for(const En of Nt){const[Nn,zn]=et[En],yr=s.by(zn),tr=s.by(typeof Nn=="string"?[Nn,["accumulated"],["get",En]]:Nn);je[En]=yr.value,ot[En]=tr.value}return Ye.map=En=>{It.properties=En;const Nn={};for(const zn of Nt)Nn[zn]=je[zn].evaluate(Dt,It);return Nn},Ye.reduce=(En,Nn)=>{It.properties=Nn;for(const zn of Nt)Dt.accumulated=En[zn],En[zn]=ot[zn].evaluate(Dt,It)},Ye}(ee)).load(Ce.features):function(Ye,et){return new gt(Ye,et)}(Ce,ee.geojsonVtOptions),this.loaded={};const qe={};if(me){const Ye=me.finish();Ye&&(qe.resourceTiming={},qe.resourceTiming[ee.source]=JSON.parse(JSON.stringify(Ye)))}return qe}catch(Ce){if(delete this._pendingRequest,s.bz(Ce))return{abandoned:!0};throw Ce}})}reloadTile(ee){const se=this.loaded;return se&&se[ee.uid]?super.reloadTile(ee):this.loadTile(ee)}loadGeoJSON(ee,se){return s._(this,void 0,void 0,function*(){const{promoteId:me}=ee;if(ee.request){const Ce=yield s.h(ee.request,se);return this._dataUpdateable=Ie(Ce.data,me)?it(Ce.data,me):void 0,Ce.data}if(typeof ee.data=="string")try{const Ce=JSON.parse(ee.data);return this._dataUpdateable=Ie(Ce,me)?it(Ce,me):void 0,Ce}catch{throw new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`)}if(!ee.dataDiff)throw new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ee.source}`);return function(Ce,qe,Ye){var et,je,ot,Dt;if(qe.removeAll&&Ce.clear(),qe.remove)for(const It of qe.remove)Ce.delete(It);if(qe.add)for(const It of qe.add){const Nt=ft(It,Ye);Nt!=null&&Ce.set(Nt,It)}if(qe.update)for(const It of qe.update){let Nt=Ce.get(It.id);if(Nt==null)continue;const En=!It.removeAllProperties&&(((et=It.removeProperties)===null||et===void 0?void 0:et.length)>0||((je=It.addOrUpdateProperties)===null||je===void 0?void 0:je.length)>0);if((It.newGeometry||It.removeAllProperties||En)&&(Nt=Object.assign({},Nt),Ce.set(It.id,Nt),En&&(Nt.properties=Object.assign({},Nt.properties))),It.newGeometry&&(Nt.geometry=It.newGeometry),It.removeAllProperties)Nt.properties={};else if(((ot=It.removeProperties)===null||ot===void 0?void 0:ot.length)>0)for(const Nn of It.removeProperties)Object.prototype.hasOwnProperty.call(Nt.properties,Nn)&&delete Nt.properties[Nn];if(((Dt=It.addOrUpdateProperties)===null||Dt===void 0?void 0:Dt.length)>0)for(const{key:Nn,value:zn}of It.addOrUpdateProperties)Nt.properties[Nn]=zn}}(this._dataUpdateable,ee.dataDiff,me),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ee){return s._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ee){return this._geoJSONIndex.getClusterExpansionZoom(ee.clusterId)}getClusterChildren(ee){return this._geoJSONIndex.getChildren(ee.clusterId)}getClusterLeaves(ee){return this._geoJSONIndex.getLeaves(ee.clusterId,ee.limit,ee.offset)}}class Xe{constructor(ee){this.self=ee,this.actor=new s.C(ee),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(se,me)=>{if(this.externalWorkerSourceTypes[se])throw new Error(`Worker source with name "${se}" already registered.`);this.externalWorkerSourceTypes[se]=me},this.self.addProtocol=s.bf,this.self.removeProtocol=s.bg,this.self.registerRTLTextPlugin=se=>{if(s.bA.isParsed())throw new Error("RTL text plugin already registered.");s.bA.setMethods(se)},this.actor.registerMessageHandler("loadDEMTile",(se,me)=>this._getDEMWorkerSource(se,me.source).loadTile(me)),this.actor.registerMessageHandler("removeDEMTile",(se,me)=>s._(this,void 0,void 0,function*(){this._getDEMWorkerSource(se,me.source).removeTile(me)})),this.actor.registerMessageHandler("getClusterExpansionZoom",(se,me)=>s._(this,void 0,void 0,function*(){return this._getWorkerSource(se,me.type,me.source).getClusterExpansionZoom(me)})),this.actor.registerMessageHandler("getClusterChildren",(se,me)=>s._(this,void 0,void 0,function*(){return this._getWorkerSource(se,me.type,me.source).getClusterChildren(me)})),this.actor.registerMessageHandler("getClusterLeaves",(se,me)=>s._(this,void 0,void 0,function*(){return this._getWorkerSource(se,me.type,me.source).getClusterLeaves(me)})),this.actor.registerMessageHandler("loadData",(se,me)=>this._getWorkerSource(se,me.type,me.source).loadData(me)),this.actor.registerMessageHandler("loadTile",(se,me)=>this._getWorkerSource(se,me.type,me.source).loadTile(me)),this.actor.registerMessageHandler("reloadTile",(se,me)=>this._getWorkerSource(se,me.type,me.source).reloadTile(me)),this.actor.registerMessageHandler("abortTile",(se,me)=>this._getWorkerSource(se,me.type,me.source).abortTile(me)),this.actor.registerMessageHandler("removeTile",(se,me)=>this._getWorkerSource(se,me.type,me.source).removeTile(me)),this.actor.registerMessageHandler("removeSource",(se,me)=>s._(this,void 0,void 0,function*(){if(!this.workerSources[se]||!this.workerSources[se][me.type]||!this.workerSources[se][me.type][me.source])return;const Ce=this.workerSources[se][me.type][me.source];delete this.workerSources[se][me.type][me.source],Ce.removeSource!==void 0&&Ce.removeSource(me)})),this.actor.registerMessageHandler("removeMap",se=>s._(this,void 0,void 0,function*(){delete this.layerIndexes[se],delete this.availableImages[se],delete this.workerSources[se],delete this.demWorkerSources[se]})),this.actor.registerMessageHandler("setReferrer",(se,me)=>s._(this,void 0,void 0,function*(){this.referrer=me})),this.actor.registerMessageHandler("syncRTLPluginState",(se,me)=>this._syncRTLPluginState(se,me)),this.actor.registerMessageHandler("importScript",(se,me)=>s._(this,void 0,void 0,function*(){this.self.importScripts(me)})),this.actor.registerMessageHandler("setImages",(se,me)=>this._setImages(se,me)),this.actor.registerMessageHandler("updateLayers",(se,me)=>s._(this,void 0,void 0,function*(){this._getLayerIndex(se).update(me.layers,me.removedIds)})),this.actor.registerMessageHandler("setLayers",(se,me)=>s._(this,void 0,void 0,function*(){this._getLayerIndex(se).replace(me)}))}_setImages(ee,se){return s._(this,void 0,void 0,function*(){this.availableImages[ee]=se;for(const me in this.workerSources[ee]){const Ce=this.workerSources[ee][me];for(const qe in Ce)Ce[qe].availableImages=se}})}_syncRTLPluginState(ee,se){return s._(this,void 0,void 0,function*(){if(s.bA.isParsed())return s.bA.getState();if(se.pluginStatus!=="loading")return s.bA.setState(se),se;const me=se.pluginURL;if(this.self.importScripts(me),s.bA.isParsed()){const Ce={pluginStatus:"loaded",pluginURL:me};return s.bA.setState(Ce),Ce}throw s.bA.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${me}`)})}_getAvailableImages(ee){let se=this.availableImages[ee];return se||(se=[]),se}_getLayerIndex(ee){let se=this.layerIndexes[ee];return se||(se=this.layerIndexes[ee]=new a),se}_getWorkerSource(ee,se,me){if(this.workerSources[ee]||(this.workerSources[ee]={}),this.workerSources[ee][se]||(this.workerSources[ee][se]={}),!this.workerSources[ee][se][me]){const Ce={sendAsync:(qe,Ye)=>(qe.targetMapId=ee,this.actor.sendAsync(qe,Ye))};switch(se){case"vector":this.workerSources[ee][se][me]=new p(Ce,this._getLayerIndex(ee),this._getAvailableImages(ee));break;case"geojson":this.workerSources[ee][se][me]=new tn(Ce,this._getLayerIndex(ee),this._getAvailableImages(ee));break;default:this.workerSources[ee][se][me]=new this.externalWorkerSourceTypes[se](Ce,this._getLayerIndex(ee),this._getAvailableImages(ee))}}return this.workerSources[ee][se][me]}_getDEMWorkerSource(ee,se){return this.demWorkerSources[ee]||(this.demWorkerSources[ee]={}),this.demWorkerSources[ee][se]||(this.demWorkerSources[ee][se]=new g),this.demWorkerSources[ee][se]}}return s.i(self)&&(self.worker=new Xe(self)),Xe}),i("index",["exports","./shared"],function(s,a){var l="4.1.2";let d,f;const p={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:R=>new Promise((u,y)=>{const A=requestAnimationFrame(u);R.signal.addEventListener("abort",()=>{cancelAnimationFrame(A),y(a.c())})}),getImageData(R,u=0){return this.getImageCanvasContext(R).getImageData(-u,-u,R.width+2*u,R.height+2*u)},getImageCanvasContext(R){const u=window.document.createElement("canvas"),y=u.getContext("2d",{willReadFrequently:!0});if(!y)throw new Error("failed to create canvas 2d context");return u.width=R.width,u.height=R.height,y.drawImage(R,0,0,R.width,R.height),y},resolveURL:R=>(d||(d=document.createElement("a")),d.href=R,d.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(f==null&&(f=matchMedia("(prefers-reduced-motion: reduce)")),f.matches)}};class g{static testProp(u){if(!g.docStyle)return u[0];for(let y=0;y<u.length;y++)if(u[y]in g.docStyle)return u[y];return u[0]}static create(u,y,A){const P=window.document.createElement(u);return y!==void 0&&(P.className=y),A&&A.appendChild(P),P}static createNS(u,y){return window.document.createElementNS(u,y)}static disableDrag(){g.docStyle&&g.selectProp&&(g.userSelect=g.docStyle[g.selectProp],g.docStyle[g.selectProp]="none")}static enableDrag(){g.docStyle&&g.selectProp&&(g.docStyle[g.selectProp]=g.userSelect)}static setTransform(u,y){u.style[g.transformProp]=y}static addEventListener(u,y,A,P={}){u.addEventListener(y,A,"passive"in P?P:P.capture)}static removeEventListener(u,y,A,P={}){u.removeEventListener(y,A,"passive"in P?P:P.capture)}static suppressClickInternal(u){u.preventDefault(),u.stopPropagation(),window.removeEventListener("click",g.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",g.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",g.suppressClickInternal,!0)},0)}static getScale(u){const y=u.getBoundingClientRect();return{x:y.width/u.offsetWidth||1,y:y.height/u.offsetHeight||1,boundingClientRect:y}}static getPoint(u,y,A){const P=y.boundingClientRect;return new a.P((A.clientX-P.left)/y.x-u.clientLeft,(A.clientY-P.top)/y.y-u.clientTop)}static mousePos(u,y){const A=g.getScale(u);return g.getPoint(u,A,y)}static touchPos(u,y){const A=[],P=g.getScale(u);for(let L=0;L<y.length;L++)A.push(g.getPoint(u,P,y[L]));return A}static mouseButton(u){return u.button}static remove(u){u.parentNode&&u.parentNode.removeChild(u)}}g.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,g.selectProp=g.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),g.transformProp=g.testProp(["transform","WebkitTransform"]);const v={supported:!1,testSupport:function(R){!S&&b&&(M?T(R):x=R)}};let x,b,S=!1,M=!1;function T(R){const u=R.createTexture();R.bindTexture(R.TEXTURE_2D,u);try{if(R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,b),R.isContextLost())return;v.supported=!0}catch{}R.deleteTexture(u),S=!0}var C,k;typeof document<"u"&&(b=document.createElement("img"),b.onload=function(){x&&T(x),x=null,M=!0},b.onerror=function(){S=!0,x=null},b.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(R){let u,y,A,P;R.resetRequestQueue=()=>{u=[],y=0,A=0,P={}},R.addThrottleControl=K=>{const te=A++;return P[te]=K,te},R.removeThrottleControl=K=>{delete P[K],H()},R.getImage=(K,te,le=!0)=>new Promise((de,Se)=>{v.supported&&(K.headers||(K.headers={}),K.headers.accept="image/webp,*/*"),a.e(K,{type:"image"}),u.push({abortController:te,requestParameters:K,supportImageRefresh:le,state:"queued",onError:ze=>{Se(ze)},onSuccess:ze=>{de(ze)}}),H()});const L=K=>a._(this,void 0,void 0,function*(){K.state="running";const{requestParameters:te,supportImageRefresh:le,onError:de,onSuccess:Se,abortController:ze}=K,De=le===!1&&!a.i(self)&&!a.g(te.url)&&(!te.headers||Object.keys(te.headers).reduce((Le,Et)=>Le&&Et==="accept",!0));y++;const Be=De?q(te,ze):a.m(te,ze);try{const Le=yield Be;delete K.abortController,K.state="completed",Le.data instanceof HTMLImageElement||a.b(Le.data)?Se(Le):Le.data&&Se({data:yield(ke=Le.data,typeof createImageBitmap=="function"?a.d(ke):a.f(ke)),cacheControl:Le.cacheControl,expires:Le.expires})}catch(Le){delete K.abortController,de(Le)}finally{y--,H()}var ke}),H=()=>{const K=(()=>{for(const te of Object.keys(P))if(P[te]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let te=y;te<K&&u.length>0;te++){const le=u.shift();le.abortController.signal.aborted?te--:L(le)}},q=(K,te)=>new Promise((le,de)=>{const Se=new Image,ze=K.url,De=K.credentials;De&&De==="include"?Se.crossOrigin="use-credentials":(De&&De==="same-origin"||!a.s(ze))&&(Se.crossOrigin="anonymous"),te.signal.addEventListener("abort",()=>{Se.src="",de(a.c())}),Se.fetchPriority="high",Se.onload=()=>{Se.onerror=Se.onload=null,le({data:Se})},Se.onerror=()=>{Se.onerror=Se.onload=null,te.signal.aborted||de(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Se.src=ze})}(C||(C={})),C.resetRequestQueue(),function(R){R.Glyphs="Glyphs",R.Image="Image",R.Source="Source",R.SpriteImage="SpriteImage",R.SpriteJSON="SpriteJSON",R.Style="Style",R.Tile="Tile",R.Unknown="Unknown"}(k||(k={}));class O{constructor(u){this._transformRequestFn=u}transformRequest(u,y){return this._transformRequestFn&&this._transformRequestFn(u,y)||{url:u}}normalizeSpriteURL(u,y,A){const P=function(L){const H=L.match(D);if(!H)throw new Error(`Unable to parse URL "${L}"`);return{protocol:H[1],authority:H[2],path:H[3]||"/",params:H[4]?H[4].split("&"):[]}}(u);return P.path+=`${y}${A}`,function(L){const H=L.params.length?`?${L.params.join("&")}`:"";return`${L.protocol}://${L.authority}${L.path}${H}`}(P)}setTransformRequest(u){this._transformRequestFn=u}}const D=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function B(R){var u=new a.A(3);return u[0]=R[0],u[1]=R[1],u[2]=R[2],u}var U,J=function(R,u,y){return R[0]=u[0]-y[0],R[1]=u[1]-y[1],R[2]=u[2]-y[2],R};U=new a.A(3),a.A!=Float32Array&&(U[0]=0,U[1]=0,U[2]=0);var V=function(R){var u=R[0],y=R[1];return u*u+y*y};function X(R){const u=[];if(typeof R=="string")u.push({id:"default",url:R});else if(R&&R.length>0){const y=[];for(const{id:A,url:P}of R){const L=`${A}${P}`;y.indexOf(L)===-1&&(y.push(L),u.push({id:A,url:P}))}}return u}(function(){var R=new a.A(2);a.A!=Float32Array&&(R[0]=0,R[1]=0)})();class oe{constructor(u,y,A,P){this.context=u,this.format=A,this.texture=u.gl.createTexture(),this.update(y,P)}update(u,y,A){const{width:P,height:L}=u,H=!(this.size&&this.size[0]===P&&this.size[1]===L||A),{context:q}=this,{gl:K}=q;if(this.useMipmap=!!(y&&y.useMipmap),K.bindTexture(K.TEXTURE_2D,this.texture),q.pixelStoreUnpackFlipY.set(!1),q.pixelStoreUnpack.set(1),q.pixelStoreUnpackPremultiplyAlpha.set(this.format===K.RGBA&&(!y||y.premultiply!==!1)),H)this.size=[P,L],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||a.b(u)?K.texImage2D(K.TEXTURE_2D,0,this.format,this.format,K.UNSIGNED_BYTE,u):K.texImage2D(K.TEXTURE_2D,0,this.format,P,L,0,this.format,K.UNSIGNED_BYTE,u.data);else{const{x:te,y:le}=A||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||a.b(u)?K.texSubImage2D(K.TEXTURE_2D,0,te,le,K.RGBA,K.UNSIGNED_BYTE,u):K.texSubImage2D(K.TEXTURE_2D,0,te,le,P,L,K.RGBA,K.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&K.generateMipmap(K.TEXTURE_2D)}bind(u,y,A){const{context:P}=this,{gl:L}=P;L.bindTexture(L.TEXTURE_2D,this.texture),A!==L.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(A=L.LINEAR),u!==this.filter&&(L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MAG_FILTER,u),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MIN_FILTER,A||u),this.filter=u),y!==this.wrap&&(L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,y),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,y),this.wrap=y)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}function pe(R){const{userImage:u}=R;return!!(u&&u.render&&u.render())&&(R.data.replace(new Uint8Array(u.data.buffer)),!0)}class re extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:y,promiseResolve:A}of this.requestors)A(this._getImagesForIds(y));this.requestors=[]}}getImage(u){const y=this.images[u];if(y&&!y.data&&y.spriteData){const A=y.spriteData;y.data=new a.R({width:A.width,height:A.height},A.context.getImageData(A.x,A.y,A.width,A.height).data),y.spriteData=null}return y}addImage(u,y){if(this.images[u])throw new Error(`Image id ${u} already exist, use updateImage instead`);this._validate(u,y)&&(this.images[u]=y)}_validate(u,y){let A=!0;const P=y.data||y.spriteData;return this._validateStretch(y.stretchX,P&&P.width)||(this.fire(new a.j(new Error(`Image "${u}" has invalid "stretchX" value`))),A=!1),this._validateStretch(y.stretchY,P&&P.height)||(this.fire(new a.j(new Error(`Image "${u}" has invalid "stretchY" value`))),A=!1),this._validateContent(y.content,y)||(this.fire(new a.j(new Error(`Image "${u}" has invalid "content" value`))),A=!1),A}_validateStretch(u,y){if(!u)return!0;let A=0;for(const P of u){if(P[0]<A||P[1]<P[0]||y<P[1])return!1;A=P[1]}return!0}_validateContent(u,y){if(!u)return!0;if(u.length!==4)return!1;const A=y.spriteData,P=A&&A.width||y.data.width,L=A&&A.height||y.data.height;return!(u[0]<0||P<u[0]||u[1]<0||L<u[1]||u[2]<0||P<u[2]||u[3]<0||L<u[3]||u[2]<u[0]||u[3]<u[1])}updateImage(u,y,A=!0){const P=this.getImage(u);if(A&&(P.data.width!==y.data.width||P.data.height!==y.data.height))throw new Error(`size mismatch between old image (${P.data.width}x${P.data.height}) and new image (${y.data.width}x${y.data.height}).`);y.version=P.version+1,this.images[u]=y,this.updatedImages[u]=!0}removeImage(u){const y=this.images[u];delete this.images[u],delete this.patterns[u],y.userImage&&y.userImage.onRemove&&y.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u){return new Promise((y,A)=>{let P=!0;if(!this.isLoaded())for(const L of u)this.images[L]||(P=!1);this.isLoaded()||P?y(this._getImagesForIds(u)):this.requestors.push({ids:u,promiseResolve:y})})}_getImagesForIds(u){const y={};for(const A of u){let P=this.getImage(A);P||(this.fire(new a.k("styleimagemissing",{id:A})),P=this.getImage(A)),P?y[A]={data:P.data.clone(),pixelRatio:P.pixelRatio,sdf:P.sdf,version:P.version,stretchX:P.stretchX,stretchY:P.stretchY,content:P.content,hasRenderCallback:!!(P.userImage&&P.userImage.render)}:a.w(`Image "${A}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return y}getPixelSize(){const{width:u,height:y}=this.atlasImage;return{width:u,height:y}}getPattern(u){const y=this.patterns[u],A=this.getImage(u);if(!A)return null;if(y&&y.position.version===A.version)return y.position;if(y)y.position.version=A.version;else{const P={w:A.data.width+2,h:A.data.height+2,x:0,y:0},L=new a.I(P,A);this.patterns[u]={bin:P,position:L}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const y=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new oe(u,this.atlasImage,y.RGBA),this.atlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const L in this.patterns)u.push(this.patterns[L].bin);const{w:y,h:A}=a.p(u),P=this.atlasImage;P.resize({width:y||1,height:A||1});for(const L in this.patterns){const{bin:H}=this.patterns[L],q=H.x+1,K=H.y+1,te=this.getImage(L).data,le=te.width,de=te.height;a.R.copy(te,P,{x:0,y:0},{x:q,y:K},{width:le,height:de}),a.R.copy(te,P,{x:0,y:de-1},{x:q,y:K-1},{width:le,height:1}),a.R.copy(te,P,{x:0,y:0},{x:q,y:K+de},{width:le,height:1}),a.R.copy(te,P,{x:le-1,y:0},{x:q-1,y:K},{width:1,height:de}),a.R.copy(te,P,{x:0,y:0},{x:q+le,y:K},{width:1,height:de})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const y of u){if(this.callbackDispatchedThisFrame[y])continue;this.callbackDispatchedThisFrame[y]=!0;const A=this.getImage(y);A||a.w(`Image with ID: "${y}" was not found`),pe(A)&&this.updateImage(y,A)}}}const he=1e20;function ue(R,u,y,A,P,L,H,q,K){for(let te=u;te<u+A;te++)be(R,y*L+te,L,P,H,q,K);for(let te=y;te<y+P;te++)be(R,te*L+u,1,A,H,q,K)}function be(R,u,y,A,P,L,H){L[0]=0,H[0]=-he,H[1]=he,P[0]=R[u];for(let q=1,K=0,te=0;q<A;q++){P[q]=R[u+q*y];const le=q*q;do{const de=L[K];te=(P[q]-P[de]+le-de*de)/(q-de)/2}while(te<=H[K]&&--K>-1);K++,L[K]=q,H[K]=te,H[K+1]=he}for(let q=0,K=0;q<A;q++){for(;H[K+1]<q;)K++;const te=L[K],le=q-te;R[u+q*y]=P[te]+le*le}}class ie{constructor(u,y){this.requestManager=u,this.localIdeographFontFamily=y,this.entries={}}setURL(u){this.url=u}getGlyphs(u){return a._(this,void 0,void 0,function*(){const y=[];for(const L in u)for(const H of u[L])y.push(this._getAndCacheGlyphsPromise(L,H));const A=yield Promise.all(y),P={};for(const{stack:L,id:H,glyph:q}of A)P[L]||(P[L]={}),P[L][H]=q&&{id:q.id,bitmap:q.bitmap.clone(),metrics:q.metrics};return P})}_getAndCacheGlyphsPromise(u,y){return a._(this,void 0,void 0,function*(){let A=this.entries[u];A||(A=this.entries[u]={glyphs:{},requests:{},ranges:{}});let P=A.glyphs[y];if(P!==void 0)return{stack:u,id:y,glyph:P};if(P=this._tinySDF(A,u,y),P)return A.glyphs[y]=P,{stack:u,id:y,glyph:P};const L=Math.floor(y/256);if(256*L>65535)throw new Error("glyphs > 65535 not supported");if(A.ranges[L])return{stack:u,id:y,glyph:P};if(!this.url)throw new Error("glyphsUrl is not set");if(!A.requests[L]){const q=ie.loadGlyphRange(u,L,this.url,this.requestManager);A.requests[L]=q}const H=yield A.requests[L];for(const q in H)this._doesCharSupportLocalGlyph(+q)||(A.glyphs[+q]=H[+q]);return A.ranges[L]=!0,{stack:u,id:y,glyph:H[y]||null}})}_doesCharSupportLocalGlyph(u){return!!this.localIdeographFontFamily&&(a.u["CJK Unified Ideographs"](u)||a.u["Hangul Syllables"](u)||a.u.Hiragana(u)||a.u.Katakana(u))}_tinySDF(u,y,A){const P=this.localIdeographFontFamily;if(!P||!this._doesCharSupportLocalGlyph(A))return;let L=u.tinySDF;if(!L){let q="400";/bold/i.test(y)?q="900":/medium/i.test(y)?q="500":/light/i.test(y)&&(q="200"),L=u.tinySDF=new ie.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:P,fontWeight:q})}const H=L.draw(String.fromCharCode(A));return{id:A,bitmap:new a.o({width:H.width||60,height:H.height||60},H.data),metrics:{width:H.glyphWidth/2||24,height:H.glyphHeight/2||24,left:H.glyphLeft/2+.5||0,top:H.glyphTop/2-27.5||-8,advance:H.glyphAdvance/2||24,isDoubleResolution:!0}}}}ie.loadGlyphRange=function(R,u,y,A){return a._(this,void 0,void 0,function*(){const P=256*u,L=P+255,H=A.transformRequest(y.replace("{fontstack}",R).replace("{range}",`${P}-${L}`),k.Glyphs),q=yield a.l(H,new AbortController);if(!q||!q.data)throw new Error(`Could not load glyph range. range: ${u}, ${P}-${L}`);const K={};for(const te of a.n(q.data))K[te.id]=te;return K})},ie.TinySDF=class{constructor({fontSize:R=24,buffer:u=3,radius:y=8,cutoff:A=.25,fontFamily:P="sans-serif",fontWeight:L="normal",fontStyle:H="normal"}={}){this.buffer=u,this.cutoff=A,this.radius=y;const q=this.size=R+4*u,K=this._createCanvas(q),te=this.ctx=K.getContext("2d",{willReadFrequently:!0});te.font=`${H} ${L} ${R}px ${P}`,te.textBaseline="alphabetic",te.textAlign="left",te.fillStyle="black",this.gridOuter=new Float64Array(q*q),this.gridInner=new Float64Array(q*q),this.f=new Float64Array(q),this.z=new Float64Array(q+1),this.v=new Uint16Array(q)}_createCanvas(R){const u=document.createElement("canvas");return u.width=u.height=R,u}draw(R){const{width:u,actualBoundingBoxAscent:y,actualBoundingBoxDescent:A,actualBoundingBoxLeft:P,actualBoundingBoxRight:L}=this.ctx.measureText(R),H=Math.ceil(y),q=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(L-P))),K=Math.min(this.size-this.buffer,H+Math.ceil(A)),te=q+2*this.buffer,le=K+2*this.buffer,de=Math.max(te*le,0),Se=new Uint8ClampedArray(de),ze={data:Se,width:te,height:le,glyphWidth:q,glyphHeight:K,glyphTop:H,glyphLeft:0,glyphAdvance:u};if(q===0||K===0)return ze;const{ctx:De,buffer:Be,gridInner:ke,gridOuter:Le}=this;De.clearRect(Be,Be,q,K),De.fillText(R,Be,Be+H);const Et=De.getImageData(Be,Be,q,K);Le.fill(he,0,de),ke.fill(0,0,de);for(let He=0;He<K;He++)for(let ct=0;ct<q;ct++){const Pt=Et.data[4*(He*q+ct)+3]/255;if(Pt===0)continue;const Ct=(He+Be)*te+ct+Be;if(Pt===1)Le[Ct]=0,ke[Ct]=he;else{const Ot=.5-Pt;Le[Ct]=Ot>0?Ot*Ot:0,ke[Ct]=Ot<0?Ot*Ot:0}}ue(Le,0,0,te,le,te,this.f,this.v,this.z),ue(ke,Be,Be,q,K,te,this.f,this.v,this.z);for(let He=0;He<de;He++){const ct=Math.sqrt(Le[He])-Math.sqrt(ke[He]);Se[He]=Math.round(255-255*(ct/this.radius+this.cutoff))}return ze}};class ve{constructor(){this.specification=a.v.light.position}possiblyEvaluate(u,y){return a.y(u.expression.evaluate(y))}interpolate(u,y,A){return{x:a.z.number(u.x,y.x,A),y:a.z.number(u.y,y.y,A),z:a.z.number(u.z,y.z,A)}}}let Ee;class Ne extends a.E{constructor(u){super(),Ee=Ee||new a.q({anchor:new a.D(a.v.light.anchor),position:new ve,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(Ee),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,y={}){if(!this._validate(a.r,u,y))for(const A in u){const P=u[A];A.endsWith("-transition")?this._transitionable.setTransition(A.slice(0,-11),P):this._transitionable.setValue(A,P)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,y,A){return(!A||A.validate!==!1)&&a.t(this,u.call(a.x,{value:y,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}class Ge{constructor(u,y){this.width=u,this.height=y,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(u,y){const A=u.join(",")+String(y);return this.dashEntry[A]||(this.dashEntry[A]=this.addDash(u,y)),this.dashEntry[A]}getDashRanges(u,y,A){const P=[];let L=u.length%2==1?-u[u.length-1]*A:0,H=u[0]*A,q=!0;P.push({left:L,right:H,isDash:q,zeroLength:u[0]===0});let K=u[0];for(let te=1;te<u.length;te++){q=!q;const le=u[te];L=K*A,K+=le,H=K*A,P.push({left:L,right:H,isDash:q,zeroLength:le===0})}return P}addRoundDash(u,y,A){const P=y/2;for(let L=-A;L<=A;L++){const H=this.width*(this.nextRow+A+L);let q=0,K=u[q];for(let te=0;te<this.width;te++){te/K.right>1&&(K=u[++q]);const le=Math.abs(te-K.left),de=Math.abs(te-K.right),Se=Math.min(le,de);let ze;const De=L/A*(P+1);if(K.isDash){const Be=P-Math.abs(De);ze=Math.sqrt(Se*Se+Be*Be)}else ze=P-Math.sqrt(Se*Se+De*De);this.data[H+te]=Math.max(0,Math.min(255,ze+128))}}}addRegularDash(u){for(let q=u.length-1;q>=0;--q){const K=u[q],te=u[q+1];K.zeroLength?u.splice(q,1):te&&te.isDash===K.isDash&&(te.left=K.left,u.splice(q,1))}const y=u[0],A=u[u.length-1];y.isDash===A.isDash&&(y.left=A.left-this.width,A.right=y.right+this.width);const P=this.width*this.nextRow;let L=0,H=u[L];for(let q=0;q<this.width;q++){q/H.right>1&&(H=u[++L]);const K=Math.abs(q-H.left),te=Math.abs(q-H.right),le=Math.min(K,te);this.data[P+q]=Math.max(0,Math.min(255,(H.isDash?le:-le)+128))}}addDash(u,y){const A=y?7:0,P=2*A+1;if(this.nextRow+P>this.height)return a.w("LineAtlas out of space"),null;let L=0;for(let q=0;q<u.length;q++)L+=u[q];if(L!==0){const q=this.width/L,K=this.getDashRanges(u,this.width,q);y?this.addRoundDash(K,q,A):this.addRegularDash(K)}const H={y:(this.nextRow+A+.5)/this.height,height:2*A/this.height,width:L};return this.nextRow+=P,this.dirty=!0,H}bind(u){const y=u.gl;this.texture?(y.bindTexture(y.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,y.texSubImage2D(y.TEXTURE_2D,0,0,0,this.width,this.height,y.ALPHA,y.UNSIGNED_BYTE,this.data))):(this.texture=y.createTexture(),y.bindTexture(y.TEXTURE_2D,this.texture),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR),y.texImage2D(y.TEXTURE_2D,0,y.ALPHA,this.width,this.height,0,y.ALPHA,y.UNSIGNED_BYTE,this.data))}}const dt="maplibre_preloaded_worker_pool";class Ue{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<Ue.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach(y=>{y.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[dt]}numActive(){return Object.keys(this.active).length}}const st=Math.floor(p.hardwareConcurrency/2);let lt,Rt;function Lt(){return lt||(lt=new Ue),lt}Ue.workerCount=a.B(globalThis)?Math.max(Math.min(st,3),1):1;class Fe{constructor(u,y){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=y;const A=this.workerPool.acquire(y);for(let P=0;P<A.length;P++){const L=new a.C(A[P],y);L.name=`Worker ${P}`,this.actors.push(L)}if(!this.actors.length)throw new Error("No actors found")}broadcast(u,y){const A=[];for(const P of this.actors)A.push(P.sendAsync({type:u,data:y}));return Promise.all(A)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(u=!0){this.actors.forEach(y=>{y.remove()}),this.actors=[],u&&this.workerPool.release(this.id)}registerMessageHandler(u,y){for(const A of this.actors)A.registerMessageHandler(u,y)}}function at(){return Rt||(Rt=new Fe(Lt(),a.G),Rt.registerMessageHandler("getResource",(R,u,y)=>a.m(u,y))),Rt}function nt(R,u){const y=a.F();return a.H(y,y,[1,1,0]),a.J(y,y,[.5*R.width,.5*R.height,1]),a.K(y,y,R.calculatePosMatrix(u.toUnwrapped()))}function ge(R,u,y,A,P,L){const H=function(de,Se,ze){if(de)for(const De of de){const Be=Se[De];if(Be&&Be.source===ze&&Be.type==="fill-extrusion")return!0}else for(const De in Se){const Be=Se[De];if(Be.source===ze&&Be.type==="fill-extrusion")return!0}return!1}(P&&P.layers,u,R.id),q=L.maxPitchScaleFactor(),K=R.tilesIn(A,q,H);K.sort(tt);const te=[];for(const de of K)te.push({wrappedTileID:de.tileID.wrapped().key,queryResults:de.tile.queryRenderedFeatures(u,y,R._state,de.queryGeometry,de.cameraQueryGeometry,de.scale,P,L,q,nt(R.transform,de.tileID))});const le=function(de){const Se={},ze={};for(const De of de){const Be=De.queryResults,ke=De.wrappedTileID,Le=ze[ke]=ze[ke]||{};for(const Et in Be){const He=Be[Et],ct=Le[Et]=Le[Et]||{},Pt=Se[Et]=Se[Et]||[];for(const Ct of He)ct[Ct.featureIndex]||(ct[Ct.featureIndex]=!0,Pt.push(Ct))}}return Se}(te);for(const de in le)le[de].forEach(Se=>{const ze=Se.feature,De=R.getFeatureState(ze.layer["source-layer"],ze.id);ze.source=ze.layer.source,ze.layer["source-layer"]&&(ze.sourceLayer=ze.layer["source-layer"]),ze.state=De});return le}function tt(R,u){const y=R.tileID,A=u.tileID;return y.overscaledZ-A.overscaledZ||y.canonical.y-A.canonical.y||y.wrap-A.wrap||y.canonical.x-A.canonical.x}function rt(R,u,y){return a._(this,void 0,void 0,function*(){let A=R;if(R.url?A=(yield a.h(u.transformRequest(R.url,k.Source),y)).data:yield p.frameAsync(y),!A)return null;const P=a.L(a.e(A,R),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in A&&A.vector_layers&&(P.vectorLayerIds=A.vector_layers.map(L=>L.id)),P})}class vt{constructor(u,y){u&&(y?this.setSouthWest(u).setNorthEast(y):Array.isArray(u)&&(u.length===4?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1])))}setNorthEast(u){return this._ne=u instanceof a.M?new a.M(u.lng,u.lat):a.M.convert(u),this}setSouthWest(u){return this._sw=u instanceof a.M?new a.M(u.lng,u.lat):a.M.convert(u),this}extend(u){const y=this._sw,A=this._ne;let P,L;if(u instanceof a.M)P=u,L=u;else{if(!(u instanceof vt))return Array.isArray(u)?u.length===4||u.every(Array.isArray)?this.extend(vt.convert(u)):this.extend(a.M.convert(u)):u&&("lng"in u||"lon"in u)&&"lat"in u?this.extend(a.M.convert(u)):this;if(P=u._sw,L=u._ne,!P||!L)return this}return y||A?(y.lng=Math.min(P.lng,y.lng),y.lat=Math.min(P.lat,y.lat),A.lng=Math.max(L.lng,A.lng),A.lat=Math.max(L.lat,A.lat)):(this._sw=new a.M(P.lng,P.lat),this._ne=new a.M(L.lng,L.lat)),this}getCenter(){return new a.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.M(this.getWest(),this.getNorth())}getSouthEast(){return new a.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(u){const{lng:y,lat:A}=a.M.convert(u);let P=this._sw.lng<=y&&y<=this._ne.lng;return this._sw.lng>this._ne.lng&&(P=this._sw.lng>=y&&y>=this._ne.lng),this._sw.lat<=A&&A<=this._ne.lat&&P}static convert(u){return u instanceof vt?u:u&&new vt(u)}static fromLngLat(u,y=0){const A=360*y/40075017,P=A/Math.cos(Math.PI/180*u.lat);return new vt(new a.M(u.lng-P,u.lat-A),new a.M(u.lng+P,u.lat+A))}}class Tt{constructor(u,y,A){this.bounds=vt.convert(this.validateBounds(u)),this.minzoom=y||0,this.maxzoom=A||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const y=Math.pow(2,u.z),A=Math.floor(a.N(this.bounds.getWest())*y),P=Math.floor(a.O(this.bounds.getNorth())*y),L=Math.ceil(a.N(this.bounds.getEast())*y),H=Math.ceil(a.O(this.bounds.getSouth())*y);return u.x>=A&&u.x<L&&u.y>=P&&u.y<H}}class We extends a.E{constructor(u,y,A,P){if(super(),this.id=u,this.dispatcher=A,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.L(y,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},y),this._collectResourceTiming=y.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(P)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield rt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),u&&(a.e(this,u),u.bounds&&(this.tileBounds=new Tt(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(u){this._tileJSONRequest=null,this.fire(new a.j(u))}})}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.abort(),u(),this.load()}setTiles(u){return this.setSourceProperty(()=>{this._options.tiles=u}),this}setUrl(u){return this.setSourceProperty(()=>{this.url=u,this._options.url=u}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(u){return a._(this,void 0,void 0,function*(){const y=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),A={request:this.map._requestManager.transformRequest(y,k.Tile),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};A.request.collectResourceTiming=this._collectResourceTiming;let P="reloadTile";if(u.actor&&u.state!=="expired"){if(u.state==="loading")return new Promise((L,H)=>{u.reloadPromise={resolve:L,reject:H}})}else u.actor=this.dispatcher.getActor(),P="loadTile";u.abortController=new AbortController;try{const L=yield u.actor.sendAsync({type:P,data:A},u.abortController);if(delete u.abortController,u.aborted)return;this._afterTileLoadWorkerResponse(u,L)}catch(L){if(delete u.abortController,u.aborted)return;if(L&&L.status!==404)throw L;this._afterTileLoadWorkerResponse(u,null)}})}_afterTileLoadWorkerResponse(u,y){if(y&&y.resourceTiming&&(u.resourceTiming=y.resourceTiming),y&&this.map._refreshExpiredTiles&&u.setExpiryData(y),u.loadVectorData(y,this.map.painter),u.reloadPromise){const A=u.reloadPromise;u.reloadPromise=null,this.loadTile(u).then(A.resolve).catch(A.reject)}}abortTile(u){return a._(this,void 0,void 0,function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.actor&&(yield u.actor.sendAsync({type:"abortTile",data:{uid:u.uid,type:this.type,source:this.id}}))})}unloadTile(u){return a._(this,void 0,void 0,function*(){u.unloadVectorData(),u.actor&&(yield u.actor.sendAsync({type:"removeTile",data:{uid:u.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Vt extends a.E{constructor(u,y,A,P){super(),this.id=u,this.dispatcher=A,this.setEventedParent(P),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},y),a.e(this,a.L(y,["url","scheme","tileSize"]))}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield rt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,u&&(a.e(this,u),u.bounds&&(this.tileBounds=new Tt(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(u){this._tileJSONRequest=null,this.fire(new a.j(u))}})}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(u){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),u(),this.load()}setTiles(u){return this.setSourceProperty(()=>{this._options.tiles=u}),this}setUrl(u){return this.setSourceProperty(()=>{this.url=u,this._options.url=u}),this}serialize(){return a.e({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u){return a._(this,void 0,void 0,function*(){const y=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);u.abortController=new AbortController;try{const A=yield C.getImage(this.map._requestManager.transformRequest(y,k.Tile),u.abortController,this.map._refreshExpiredTiles);if(delete u.abortController,u.aborted)return void(u.state="unloaded");if(A&&A.data){this.map._refreshExpiredTiles&&A.cacheControl&&A.expires&&u.setExpiryData({cacheControl:A.cacheControl,expires:A.expires});const P=this.map.painter.context,L=P.gl,H=A.data;u.texture=this.map.painter.getTileTexture(H.width),u.texture?u.texture.update(H,{useMipmap:!0}):(u.texture=new oe(P,H,L.RGBA,{useMipmap:!0}),u.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),P.extTextureFilterAnisotropic&&L.texParameterf(L.TEXTURE_2D,P.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,P.extTextureFilterAnisotropicMax)),u.state="loaded"}}catch(A){if(delete u.abortController,u.aborted)u.state="unloaded";else if(A)throw u.state="errored",A}})}abortTile(u){return a._(this,void 0,void 0,function*(){u.abortController&&(u.abortController.abort(),delete u.abortController)})}unloadTile(u){return a._(this,void 0,void 0,function*(){u.texture&&this.map.painter.saveTileTexture(u.texture)})}hasTransition(){return!1}}class sn extends Vt{constructor(u,y,A,P){super(u,y,A,P),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},y),this.encoding=y.encoding||"mapbox",this.redFactor=y.redFactor,this.greenFactor=y.greenFactor,this.blueFactor=y.blueFactor,this.baseShift=y.baseShift}loadTile(u){return a._(this,void 0,void 0,function*(){const y=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),A=this.map._requestManager.transformRequest(y,k.Tile);u.neighboringTiles=this._getNeighboringTiles(u.tileID),u.abortController=new AbortController;try{const P=yield C.getImage(A,u.abortController,this.map._refreshExpiredTiles);if(delete u.abortController,u.aborted)return void(u.state="unloaded");if(P&&P.data){const L=P.data;this.map._refreshExpiredTiles&&P.cacheControl&&P.expires&&u.setExpiryData({cacheControl:P.cacheControl,expires:P.expires});const H=a.b(L)&&a.S()?L:yield this.readImageNow(L),q={type:this.type,uid:u.uid,source:this.id,rawImageData:H,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!u.actor||u.state==="expired"){u.actor=this.dispatcher.getActor();const K=yield u.actor.sendAsync({type:"loadDEMTile",data:q});u.dem=K,u.needsHillshadePrepare=!0,u.needsTerrainPrepare=!0,u.state="loaded"}}}catch(P){if(delete u.abortController,u.aborted)u.state="unloaded";else if(P)throw u.state="errored",P}})}readImageNow(u){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.U()){const y=u.width+2,A=u.height+2;try{return new a.R({width:y,height:A},yield a.V(u,-1,-1,y,A))}catch{}}return p.getImageData(u,1)})}_getNeighboringTiles(u){const y=u.canonical,A=Math.pow(2,y.z),P=(y.x-1+A)%A,L=y.x===0?u.wrap-1:u.wrap,H=(y.x+1+A)%A,q=y.x+1===A?u.wrap+1:u.wrap,K={};return K[new a.Q(u.overscaledZ,L,y.z,P,y.y).key]={backfilled:!1},K[new a.Q(u.overscaledZ,q,y.z,H,y.y).key]={backfilled:!1},y.y>0&&(K[new a.Q(u.overscaledZ,L,y.z,P,y.y-1).key]={backfilled:!1},K[new a.Q(u.overscaledZ,u.wrap,y.z,y.x,y.y-1).key]={backfilled:!1},K[new a.Q(u.overscaledZ,q,y.z,H,y.y-1).key]={backfilled:!1}),y.y+1<A&&(K[new a.Q(u.overscaledZ,L,y.z,P,y.y+1).key]={backfilled:!1},K[new a.Q(u.overscaledZ,u.wrap,y.z,y.x,y.y+1).key]={backfilled:!1},K[new a.Q(u.overscaledZ,q,y.z,H,y.y+1).key]={backfilled:!1}),K}unloadTile(u){return a._(this,void 0,void 0,function*(){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&(yield u.actor.sendAsync({type:"removeDEMTile",data:{type:this.type,uid:u.uid,source:this.id}}))})}}class Ut extends a.E{constructor(u,y,A,P){super(),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=A.getActor(),this.setEventedParent(P),this._data=y.data,this._options=a.e({},y),this._collectResourceTiming=y.collectResourceTiming,y.maxzoom!==void 0&&(this.maxzoom=y.maxzoom),y.type&&(this.type=y.type),y.attribution&&(this.attribution=y.attribution),this.promoteId=y.promoteId;const L=a.W/this.tileSize;this.workerOptions=a.e({source:this.id,cluster:y.cluster||!1,geojsonVtOptions:{buffer:(y.buffer!==void 0?y.buffer:128)*L,tolerance:(y.tolerance!==void 0?y.tolerance:.375)*L,extent:a.W,maxZoom:this.maxzoom,lineMetrics:y.lineMetrics||!1,generateId:y.generateId||!1},superclusterOptions:{maxZoom:y.clusterMaxZoom!==void 0?y.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,y.clusterMinPoints||2),extent:a.W,radius:(y.clusterRadius||50)*L,log:!1,generateId:y.generateId||!1},clusterProperties:y.clusterProperties,filter:y.filter},y.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(u){this.map=u,this.load()}setData(u){return this._data=u,this._updateWorkerData(),this}updateData(u){return this._updateWorkerData(u),this}setClusterOptions(u){return this.workerOptions.cluster=u.cluster,u&&(u.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=u.clusterRadius),u.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=u.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(u){return this.actor.sendAsync({type:"getClusterExpansionZoom",data:{type:this.type,clusterId:u,source:this.id}})}getClusterChildren(u){return this.actor.sendAsync({type:"getClusterChildren",data:{type:this.type,clusterId:u,source:this.id}})}getClusterLeaves(u,y,A){return this.actor.sendAsync({type:"getClusterLeaves",data:{type:this.type,source:this.id,clusterId:u,limit:y,offset:A}})}_updateWorkerData(u){return a._(this,void 0,void 0,function*(){const y=a.e({type:this.type},this.workerOptions);u?y.dataDiff=u:typeof this._data=="string"?(y.request=this.map._requestManager.transformRequest(p.resolveURL(this._data),k.Source),y.request.collectResourceTiming=this._collectResourceTiming):y.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.k("dataloading",{dataType:"source"}));try{const A=yield this.actor.sendAsync({type:"loadData",data:y});if(this._pendingLoads--,this._removed||A.abandoned)return void this.fire(new a.k("dataabort",{dataType:"source"}));let P=null;A.resourceTiming&&A.resourceTiming[this.id]&&(P=A.resourceTiming[this.id].slice(0));const L={dataType:"source"};this._collectResourceTiming&&P&&P.length>0&&a.e(L,{resourceTiming:P}),this.fire(new a.k("data",Object.assign(Object.assign({},L),{sourceDataType:"metadata"}))),this.fire(new a.k("data",Object.assign(Object.assign({},L),{sourceDataType:"content"})))}catch(A){if(this._pendingLoads--,this._removed)return void this.fire(new a.k("dataabort",{dataType:"source"}));this.fire(new a.j(A))}})}loaded(){return this._pendingLoads===0}loadTile(u){return a._(this,void 0,void 0,function*(){const y=u.actor?"reloadTile":"loadTile";u.actor=this.actor;const A={type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};u.abortController=new AbortController;const P=yield this.actor.sendAsync({type:y,data:A},u.abortController);delete u.abortController,u.unloadVectorData(),u.aborted||u.loadVectorData(P,this.map.painter,y==="reloadTile")})}abortTile(u){return a._(this,void 0,void 0,function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.aborted=!0})}unloadTile(u){return a._(this,void 0,void 0,function*(){u.unloadVectorData(),yield this.actor.sendAsync({type:"removeTile",data:{uid:u.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"removeSource",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Pe=a.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class _e extends a.E{constructor(u,y,A,P){super(),this.id=u,this.dispatcher=A,this.coordinates=y.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(P),this.options=y}load(u){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const y=yield C.getImage(this.map._requestManager.transformRequest(this.url,k.Image),this._request);this._request=null,this._loaded=!0,y&&y.data&&(this.image=y.data,u&&(this.coordinates=u),this._finishLoading())}catch(y){this._request=null,this.fire(new a.j(y))}})}loaded(){return this._loaded}updateImage(u){return u.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=u.url,this.load(u.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(u){this.coordinates=u;const y=u.map(a.Y.fromLngLat);this.tileID=function(P){let L=1/0,H=1/0,q=-1/0,K=-1/0;for(const Se of P)L=Math.min(L,Se.x),H=Math.min(H,Se.y),q=Math.max(q,Se.x),K=Math.max(K,Se.y);const te=Math.max(q-L,K-H),le=Math.max(0,Math.floor(-Math.log(te)/Math.LN2)),de=Math.pow(2,le);return new a.a0(le,Math.floor((L+q)/2*de),Math.floor((H+K)/2*de))}(y),this.minzoom=this.maxzoom=this.tileID.z;const A=y.map(P=>this.tileID.getTilePoint(P)._round());return this._boundsArray=new a.Z,this._boundsArray.emplaceBack(A[0].x,A[0].y,0,0),this._boundsArray.emplaceBack(A[1].x,A[1].y,a.W,0),this._boundsArray.emplaceBack(A[3].x,A[3].y,0,a.W),this._boundsArray.emplaceBack(A[2].x,A[2].y,a.W,a.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const u=this.map.painter.context,y=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Pe.members)),this.boundsSegments||(this.boundsSegments=a.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new oe(u,this.image,y.RGBA),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE));let A=!1;for(const P in this.tiles){const L=this.tiles[P];L.state!=="loaded"&&(L.state="loaded",L.texture=this.texture,A=!0)}A&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(u){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={}):u.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Mt extends _e{constructor(u,y,A,P){super(u,y,A,P),this.roundZoom=!0,this.type="video",this.options=y}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;const u=this.options;this.urls=[];for(const y of u.urls)this.urls.push(this.map._requestManager.transformRequest(y,k.Source).url);try{const y=yield a.a2(this.urls);if(this._loaded=!0,!y)return;this.video=y,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(y){this.fire(new a.j(y))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){if(this.video){const y=this.video.seekable;u<y.start(0)||u>y.end(0)?this.fire(new a.j(new a.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${y.start(0)} and ${y.end(0)}-second mark.`))):this.video.currentTime=u}}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const u=this.map.painter.context,y=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Pe.members)),this.boundsSegments||(this.boundsSegments=a.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE),y.texSubImage2D(y.TEXTURE_2D,0,0,0,y.RGBA,y.UNSIGNED_BYTE,this.video)):(this.texture=new oe(u,this.video,y.RGBA),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE));let A=!1;for(const P in this.tiles){const L=this.tiles[P];L.state!=="loaded"&&(L.state="loaded",L.texture=this.texture,A=!0)}A&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class wt extends _e{constructor(u,y,A,P){super(u,y,A,P),y.coordinates?Array.isArray(y.coordinates)&&y.coordinates.length===4&&!y.coordinates.some(L=>!Array.isArray(L)||L.length!==2||L.some(H=>typeof H!="number"))||this.fire(new a.j(new a.a1(`sources.${u}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.j(new a.a1(`sources.${u}`,null,'missing required property "coordinates"'))),y.animate&&typeof y.animate!="boolean"&&this.fire(new a.j(new a.a1(`sources.${u}`,null,'optional "animate" property must be a boolean value'))),y.canvas?typeof y.canvas=="string"||y.canvas instanceof HTMLCanvasElement||this.fire(new a.j(new a.a1(`sources.${u}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.j(new a.a1(`sources.${u}`,null,'missing required property "canvas"'))),this.options=y,this.animate=y.animate===void 0||y.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const y=this.map.painter.context,A=y.gl;this.boundsBuffer||(this.boundsBuffer=y.createVertexBuffer(this._boundsArray,Pe.members)),this.boundsSegments||(this.boundsSegments=a.$.simpleSegment(0,0,4,2)),this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new oe(y,this.canvas,A.RGBA,{premultiply:!0});let P=!1;for(const L in this.tiles){const H=this.tiles[L];H.state!=="loaded"&&(H.state="loaded",H.texture=this.texture,P=!0)}P&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}}const Wt={},Bt=R=>{switch(R){case"geojson":return Ut;case"image":return _e;case"raster":return Vt;case"raster-dem":return sn;case"vector":return We;case"video":return Mt;case"canvas":return wt}return Wt[R]},Mn="RTLPluginLoaded";class an extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=at()}_syncState(u){return this.status=u,this.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:u,pluginURL:this.url}).catch(y=>{throw this.status="error",y})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(u){return a._(this,arguments,void 0,function*(y,A=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=p.resolveURL(y),!this.url)throw new Error(`requested url ${y} is invalid`);if(this.status==="unavailable"){if(!A)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.k(Mn))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Je=null;function Yt(){return Je||(Je=new an),Je}class xn{constructor(u,y){this.timeAdded=0,this.fadeEndTime=0,this.tileID=u,this.uid=a.a3(),this.uses=0,this.tileSize=y,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(u){const y=u+this.timeAdded;y<this.fadeEndTime||(this.fadeEndTime=y)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(u){this.demTexture&&u.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(u,y,A){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=function(P,L){const H={};if(!L)return H;for(const q of P){const K=q.layerIds.map(te=>L.getLayer(te)).filter(Boolean);if(K.length!==0){q.layers=K,q.stateDependentLayerIds&&(q.stateDependentLayers=q.stateDependentLayerIds.map(te=>K.filter(le=>le.id===te)[0]));for(const te of K)H[te.id]=q}}return H}(u.buckets,y.style),this.hasSymbolBuckets=!1;for(const P in this.buckets){const L=this.buckets[P];if(L instanceof a.a5){if(this.hasSymbolBuckets=!0,!A)break;L.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const P in this.buckets){const L=this.buckets[P];if(L instanceof a.a5&&L.hasRTLText){this.hasRTLText=!0,Yt().lazyLoad();break}}this.queryPadding=0;for(const P in this.buckets){const L=this.buckets[P];this.queryPadding=Math.max(this.queryPadding,y.style.getLayer(P).queryRadius(L))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new a.a4}unloadVectorData(){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(u){return this.buckets[u.id]}upload(u){for(const A in this.buckets){const P=this.buckets[A];P.uploadPending()&&P.upload(u)}const y=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new oe(u,this.imageAtlas.image,y.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new oe(u,this.glyphAtlasImage,y.ALPHA),this.glyphAtlasImage=null)}prepare(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)}queryRenderedFeatures(u,y,A,P,L,H,q,K,te,le){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:P,cameraQueryGeometry:L,scale:H,tileSize:this.tileSize,pixelPosMatrix:le,transform:K,params:q,queryPadding:this.queryPadding*te},u,y,A):{}}querySourceFeatures(u,y){const A=this.latestFeatureIndex;if(!A||!A.rawTileData)return;const P=A.loadVTLayers(),L=y&&y.sourceLayer?y.sourceLayer:"",H=P._geojsonTileLayer||P[L];if(!H)return;const q=a.a6(y&&y.filter),{z:K,x:te,y:le}=this.tileID.canonical,de={z:K,x:te,y:le};for(let Se=0;Se<H.length;Se++){const ze=H.feature(Se);if(q.needGeometry){const ke=a.a7(ze,!0);if(!q.filter(new a.a8(this.tileID.overscaledZ),ke,this.tileID.canonical))continue}else if(!q.filter(new a.a8(this.tileID.overscaledZ),ze))continue;const De=A.getId(ze,L),Be=new a.a9(ze,K,te,le,De);Be.tile=de,u.push(Be)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(u){const y=this.expirationTime;if(u.cacheControl){const A=a.aa(u.cacheControl);A["max-age"]&&(this.expirationTime=Date.now()+1e3*A["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){const A=Date.now();let P=!1;if(this.expirationTime>A)P=!1;else if(y)if(this.expirationTime<y)P=!0;else{const L=this.expirationTime-y;L?this.expirationTime=A+Math.max(L,3e4):P=!0}else P=!0;P?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(u,y){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(u).length===0)return;const A=this.latestFeatureIndex.loadVTLayers();for(const P in this.buckets){if(!y.style.hasLayer(P))continue;const L=this.buckets[P],H=L.layers[0].sourceLayer||"_geojsonTileLayer",q=A[H],K=u[H];if(!q||!K||Object.keys(K).length===0)continue;L.update(K,q,this.imageAtlas&&this.imageAtlas.patternPositions||{});const te=y&&y.style&&y.style.getLayer(P);te&&(this.queryPadding=Math.max(this.queryPadding,te.queryRadius(L)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<p.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(u){this.symbolFadeHoldUntil=p.now()+u}setDependencies(u,y){const A={};for(const P of y)A[P]=!0;this.dependencies[u]=A}hasDependency(u,y){for(const A of u){const P=this.dependencies[A];if(P){for(const L of y)if(P[L])return!0}}return!1}}class en{constructor(u,y){this.max=u,this.onRemove=y,this.reset()}reset(){for(const u in this.data)for(const y of this.data[u])y.timeout&&clearTimeout(y.timeout),this.onRemove(y.value);return this.data={},this.order=[],this}add(u,y,A){const P=u.wrapped().key;this.data[P]===void 0&&(this.data[P]=[]);const L={value:y,timeout:void 0};if(A!==void 0&&(L.timeout=setTimeout(()=>{this.remove(u,L)},A)),this.data[P].push(L),this.order.push(P),this.order.length>this.max){const H=this._getAndRemoveByKey(this.order[0]);H&&this.onRemove(H)}return this}has(u){return u.wrapped().key in this.data}getAndRemove(u){return this.has(u)?this._getAndRemoveByKey(u.wrapped().key):null}_getAndRemoveByKey(u){const y=this.data[u].shift();return y.timeout&&clearTimeout(y.timeout),this.data[u].length===0&&delete this.data[u],this.order.splice(this.order.indexOf(u),1),y.value}getByKey(u){const y=this.data[u];return y?y[0].value:null}get(u){return this.has(u)?this.data[u.wrapped().key][0].value:null}remove(u,y){if(!this.has(u))return this;const A=u.wrapped().key,P=y===void 0?0:this.data[A].indexOf(y),L=this.data[A][P];return this.data[A].splice(P,1),L.timeout&&clearTimeout(L.timeout),this.data[A].length===0&&delete this.data[A],this.onRemove(L.value),this.order.splice(this.order.indexOf(A),1),this}setMaxSize(u){for(this.max=u;this.order.length>this.max;){const y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this}filter(u){const y=[];for(const A in this.data)for(const P of this.data[A])u(P.value)||y.push(P);for(const A of y)this.remove(A.value.tileID,A)}}class un{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(u,y,A){const P=String(y);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][P]=this.stateChanges[u][P]||{},a.e(this.stateChanges[u][P],A),this.deletedStates[u]===null){this.deletedStates[u]={};for(const L in this.state[u])L!==P&&(this.deletedStates[u][L]=null)}else if(this.deletedStates[u]&&this.deletedStates[u][P]===null){this.deletedStates[u][P]={};for(const L in this.state[u][P])A[L]||(this.deletedStates[u][P][L]=null)}else for(const L in A)this.deletedStates[u]&&this.deletedStates[u][P]&&this.deletedStates[u][P][L]===null&&delete this.deletedStates[u][P][L]}removeFeatureState(u,y,A){if(this.deletedStates[u]===null)return;const P=String(y);if(this.deletedStates[u]=this.deletedStates[u]||{},A&&y!==void 0)this.deletedStates[u][P]!==null&&(this.deletedStates[u][P]=this.deletedStates[u][P]||{},this.deletedStates[u][P][A]=null);else if(y!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][P])for(A in this.deletedStates[u][P]={},this.stateChanges[u][P])this.deletedStates[u][P][A]=null;else this.deletedStates[u][P]=null;else this.deletedStates[u]=null}getState(u,y){const A=String(y),P=a.e({},(this.state[u]||{})[A],(this.stateChanges[u]||{})[A]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){const L=this.deletedStates[u][y];if(L===null)return{};for(const H in L)delete P[H]}return P}initializeTileState(u,y){u.setFeatureState(this.state,y)}coalesceChanges(u,y){const A={};for(const P in this.stateChanges){this.state[P]=this.state[P]||{};const L={};for(const H in this.stateChanges[P])this.state[P][H]||(this.state[P][H]={}),a.e(this.state[P][H],this.stateChanges[P][H]),L[H]=this.state[P][H];A[P]=L}for(const P in this.deletedStates){this.state[P]=this.state[P]||{};const L={};if(this.deletedStates[P]===null)for(const H in this.state[P])L[H]={},this.state[P][H]={};else for(const H in this.deletedStates[P]){if(this.deletedStates[P][H]===null)this.state[P][H]={};else for(const q of Object.keys(this.deletedStates[P][H]))delete this.state[P][H][q];L[H]=this.state[P][H]}A[P]=A[P]||{},a.e(A[P],L)}if(this.stateChanges={},this.deletedStates={},Object.keys(A).length!==0)for(const P in u)u[P].setFeatureState(A,y)}}class St extends a.E{constructor(u,y,A){super(),this.id=u,this.dispatcher=A,this.on("data",P=>{P.dataType==="source"&&P.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&P.dataType==="source"&&P.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((P,L,H,q)=>{const K=new(Bt(L.type))(P,L,H,q);if(K.id!==P)throw new Error(`Expected Source id to be ${P} instead of ${K.id}`);return K})(u,y,A,this),this._tiles={},this._cache=new en(0,P=>this._unloadTile(P)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new un,this._didEmitContent=!1,this._updated=!1}onAdd(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._maxTileCacheZoomLevels=u?u._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(u)}onRemove(u){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(u)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const u in this._tiles){const y=this._tiles[u];if(y.state!=="loaded"&&y.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(u,y,A){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(u),this._tileLoaded(u,y,A)}catch(P){u.state="errored",P.status!==404?this._source.fire(new a.j(P,{tile:u})):this.update(this.transform,this.terrain)}})}_unloadTile(u){this._source.unloadTile&&this._source.unloadTile(u)}_abortTile(u){this._source.abortTile&&this._source.abortTile(u),this._source.fire(new a.k("dataabort",{tile:u,coord:u.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(u){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const y in this._tiles){const A=this._tiles[y];A.upload(u),A.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(u=>u.tileID).sort(gt).map(u=>u.key)}getRenderableIds(u){const y=[];for(const A in this._tiles)this._isIdRenderable(A,u)&&y.push(this._tiles[A]);return u?y.sort((A,P)=>{const L=A.tileID,H=P.tileID,q=new a.P(L.canonical.x,L.canonical.y)._rotate(this.transform.angle),K=new a.P(H.canonical.x,H.canonical.y)._rotate(this.transform.angle);return L.overscaledZ-H.overscaledZ||K.y-q.y||K.x-q.x}).map(A=>A.tileID.key):y.map(A=>A.tileID).sort(gt).map(A=>A.key)}hasRenderableParent(u){const y=this.findLoadedParent(u,0);return!!y&&this._isIdRenderable(y.tileID.key)}_isIdRenderable(u,y){return this._tiles[u]&&this._tiles[u].hasData()&&!this._coveredTiles[u]&&(y||!this._tiles[u].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(u,y){return a._(this,void 0,void 0,function*(){const A=this._tiles[u];A&&(A.state!=="loading"&&(A.state=y),yield this._loadTile(A,u,y))})}_tileLoaded(u,y,A){u.timeAdded=p.now(),A==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(y,u),this.getSource().type==="raster-dem"&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),u.aborted||this._source.fire(new a.k("data",{dataType:"source",tile:u,coord:u.tileID}))}_backfillDEM(u){const y=this.getRenderableIds();for(let P=0;P<y.length;P++){const L=y[P];if(u.neighboringTiles&&u.neighboringTiles[L]){const H=this.getTileByID(L);A(u,H),A(H,u)}}function A(P,L){P.needsHillshadePrepare=!0,P.needsTerrainPrepare=!0;let H=L.tileID.canonical.x-P.tileID.canonical.x;const q=L.tileID.canonical.y-P.tileID.canonical.y,K=Math.pow(2,P.tileID.canonical.z),te=L.tileID.key;H===0&&q===0||Math.abs(q)>1||(Math.abs(H)>1&&(Math.abs(H+K)===1?H+=K:Math.abs(H-K)===1&&(H-=K)),L.dem&&P.dem&&(P.dem.backfillBorder(L.dem,H,q),P.neighboringTiles&&P.neighboringTiles[te]&&(P.neighboringTiles[te].backfilled=!0)))}}getTile(u){return this.getTileByID(u.key)}getTileByID(u){return this._tiles[u]}_retainLoadedChildren(u,y,A,P){for(const L in this._tiles){let H=this._tiles[L];if(P[L]||!H.hasData()||H.tileID.overscaledZ<=y||H.tileID.overscaledZ>A)continue;let q=H.tileID;for(;H&&H.tileID.overscaledZ>y+1;){const te=H.tileID.scaledTo(H.tileID.overscaledZ-1);H=this._tiles[te.key],H&&H.hasData()&&(q=te)}let K=q;for(;K.overscaledZ>y;)if(K=K.scaledTo(K.overscaledZ-1),u[K.key]){P[q.key]=q;break}}}findLoadedParent(u,y){if(u.key in this._loadedParentTiles){const A=this._loadedParentTiles[u.key];return A&&A.tileID.overscaledZ>=y?A:null}for(let A=u.overscaledZ-1;A>=y;A--){const P=u.scaledTo(A),L=this._getLoadedTile(P);if(L)return L}}_getLoadedTile(u){const y=this._tiles[u.key];return y&&y.hasData()?y:this._cache.getByKey(u.wrapped().key)}updateCacheSize(u){const y=Math.ceil(u.width/this._source.tileSize)+1,A=Math.ceil(u.height/this._source.tileSize)+1,P=Math.floor(y*A*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),L=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,P):P;this._cache.setMaxSize(L)}handleWrapJump(u){const y=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);if(this._prevLng=u,y){const A={};for(const P in this._tiles){const L=this._tiles[P];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+y),A[L.tileID.key]=L}this._tiles=A;for(const P in this._timers)clearTimeout(this._timers[P]),delete this._timers[P];for(const P in this._tiles)this._setTileReloadTimer(P,this._tiles[P])}}update(u,y){if(this.transform=u,this.terrain=y,!this._sourceLoaded||this._paused)return;let A;this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?A=u.getVisibleUnwrappedCoordinates(this._source.tileID).map(le=>new a.Q(le.canonical.z,le.wrap,le.canonical.z,le.canonical.x,le.canonical.y)):(A=u.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:y}),this._source.hasTile&&(A=A.filter(le=>this._source.hasTile(le)))):A=[];const P=u.coveringZoomLevel(this._source),L=Math.max(P-St.maxOverzooming,this._source.minzoom),H=Math.max(P+St.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const le={};for(const de of A)if(de.canonical.z>this._source.minzoom){const Se=de.scaledTo(de.canonical.z-1);le[Se.key]=Se;const ze=de.scaledTo(Math.max(this._source.minzoom,Math.min(de.canonical.z,5)));le[ze.key]=ze}A=A.concat(Object.values(le))}const q=A.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,q&&this.fire(new a.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const K=this._updateRetainedTiles(A,P);if(Ae(this._source.type)){const le={},de={},Se=Object.keys(K),ze=p.now();for(const De of Se){const Be=K[De],ke=this._tiles[De];if(!ke||ke.fadeEndTime!==0&&ke.fadeEndTime<=ze)continue;const Le=this.findLoadedParent(Be,L);Le&&(this._addTile(Le.tileID),le[Le.tileID.key]=Le.tileID),de[De]=Be}this._retainLoadedChildren(de,P,H,K);for(const De in le)K[De]||(this._coveredTiles[De]=!0,K[De]=le[De]);if(y){const De={},Be={};for(const ke of A)this._tiles[ke.key].hasData()?De[ke.key]=ke:Be[ke.key]=ke;for(const ke in Be){const Le=Be[ke].children(this._source.maxzoom);this._tiles[Le[0].key]&&this._tiles[Le[1].key]&&this._tiles[Le[2].key]&&this._tiles[Le[3].key]&&(De[Le[0].key]=K[Le[0].key]=Le[0],De[Le[1].key]=K[Le[1].key]=Le[1],De[Le[2].key]=K[Le[2].key]=Le[2],De[Le[3].key]=K[Le[3].key]=Le[3],delete Be[ke])}for(const ke in Be){const Le=this.findLoadedParent(Be[ke],this._source.minzoom);if(Le){De[Le.tileID.key]=K[Le.tileID.key]=Le.tileID;for(const Et in De)De[Et].isChildOf(Le.tileID)&&delete De[Et]}}for(const ke in this._tiles)De[ke]||(this._coveredTiles[ke]=!0)}}for(const le in K)this._tiles[le].clearFadeHold();const te=a.ab(this._tiles,K);for(const le of te){const de=this._tiles[le];de.hasSymbolBuckets&&!de.holdingForFade()?de.setHoldDuration(this.map._fadeDuration):de.hasSymbolBuckets&&!de.symbolFadeFinished()||this._removeTile(le)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const u in this._tiles)this._tiles[u].holdingForFade()&&this._removeTile(u)}_updateRetainedTiles(u,y){const A={},P={},L=Math.max(y-St.maxOverzooming,this._source.minzoom),H=Math.max(y+St.maxUnderzooming,this._source.minzoom),q={};for(const K of u){const te=this._addTile(K);A[K.key]=K,te.hasData()||y<this._source.maxzoom&&(q[K.key]=K)}this._retainLoadedChildren(q,y,H,A);for(const K of u){let te=this._tiles[K.key];if(te.hasData())continue;if(y+1>this._source.maxzoom){const de=K.children(this._source.maxzoom)[0],Se=this.getTile(de);if(Se&&Se.hasData()){A[de.key]=de;continue}}else{const de=K.children(this._source.maxzoom);if(A[de[0].key]&&A[de[1].key]&&A[de[2].key]&&A[de[3].key])continue}let le=te.wasRequested();for(let de=K.overscaledZ-1;de>=L;--de){const Se=K.scaledTo(de);if(P[Se.key])break;if(P[Se.key]=!0,te=this.getTile(Se),!te&&le&&(te=this._addTile(Se)),te){const ze=te.hasData();if((le||ze)&&(A[Se.key]=Se),le=te.wasRequested(),ze)break}}}return A}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const u in this._tiles){const y=[];let A,P=this._tiles[u].tileID;for(;P.overscaledZ>0;){if(P.key in this._loadedParentTiles){A=this._loadedParentTiles[P.key];break}y.push(P.key);const L=P.scaledTo(P.overscaledZ-1);if(A=this._getLoadedTile(L),A)break;P=L}for(const L of y)this._loadedParentTiles[L]=A}}_addTile(u){let y=this._tiles[u.key];if(y)return y;y=this._cache.getAndRemove(u),y&&(this._setTileReloadTimer(u.key,y),y.tileID=u,this._state.initializeTileState(y,this.map?this.map.painter:null),this._cacheTimers[u.key]&&(clearTimeout(this._cacheTimers[u.key]),delete this._cacheTimers[u.key],this._setTileReloadTimer(u.key,y)));const A=y;return y||(y=new xn(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(y,u.key,y.state)),y.uses++,this._tiles[u.key]=y,A||this._source.fire(new a.k("dataloading",{tile:y,coord:y.tileID,dataType:"source"})),y}_setTileReloadTimer(u,y){u in this._timers&&(clearTimeout(this._timers[u]),delete this._timers[u]);const A=y.getExpiryTimeout();A&&(this._timers[u]=setTimeout(()=>{this._reloadTile(u,"expired"),delete this._timers[u]},A))}_removeTile(u){const y=this._tiles[u];y&&(y.uses--,delete this._tiles[u],this._timers[u]&&(clearTimeout(this._timers[u]),delete this._timers[u]),y.uses>0||(y.hasData()&&y.state!=="reloading"?this._cache.add(y.tileID,y,y.getExpiryTimeout()):(y.aborted=!0,this._abortTile(y),this._unloadTile(y))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const u in this._tiles)this._removeTile(u);this._cache.reset()}tilesIn(u,y,A){const P=[],L=this.transform;if(!L)return P;const H=A?L.getCameraQueryGeometry(u):u,q=u.map(De=>L.pointCoordinate(De,this.terrain)),K=H.map(De=>L.pointCoordinate(De,this.terrain)),te=this.getIds();let le=1/0,de=1/0,Se=-1/0,ze=-1/0;for(const De of K)le=Math.min(le,De.x),de=Math.min(de,De.y),Se=Math.max(Se,De.x),ze=Math.max(ze,De.y);for(let De=0;De<te.length;De++){const Be=this._tiles[te[De]];if(Be.holdingForFade())continue;const ke=Be.tileID,Le=Math.pow(2,L.zoom-Be.tileID.overscaledZ),Et=y*Be.queryPadding*a.W/Be.tileSize/Le,He=[ke.getTilePoint(new a.Y(le,de)),ke.getTilePoint(new a.Y(Se,ze))];if(He[0].x-Et<a.W&&He[0].y-Et<a.W&&He[1].x+Et>=0&&He[1].y+Et>=0){const ct=q.map(Ct=>ke.getTilePoint(Ct)),Pt=K.map(Ct=>ke.getTilePoint(Ct));P.push({tile:Be,tileID:ke,queryGeometry:ct,cameraQueryGeometry:Pt,scale:Le})}}return P}getVisibleCoordinates(u){const y=this.getRenderableIds(u).map(A=>this._tiles[A].tileID);for(const A of y)A.posMatrix=this.transform.calculatePosMatrix(A.toUnwrapped());return y}hasTransition(){if(this._source.hasTransition())return!0;if(Ae(this._source.type)){const u=p.now();for(const y in this._tiles)if(this._tiles[y].fadeEndTime>=u)return!0}return!1}setFeatureState(u,y,A){this._state.updateState(u=u||"_geojsonTileLayer",y,A)}removeFeatureState(u,y,A){this._state.removeFeatureState(u=u||"_geojsonTileLayer",y,A)}getFeatureState(u,y){return this._state.getState(u=u||"_geojsonTileLayer",y)}setDependencies(u,y,A){const P=this._tiles[u];P&&P.setDependencies(y,A)}reloadTilesForDependencies(u,y){for(const A in this._tiles)this._tiles[A].hasDependency(u,y)&&this._reloadTile(A,"reloading");this._cache.filter(A=>!A.hasDependency(u,y))}}function gt(R,u){const y=Math.abs(2*R.wrap)-+(R.wrap<0),A=Math.abs(2*u.wrap)-+(u.wrap<0);return R.overscaledZ-u.overscaledZ||A-y||u.canonical.y-R.canonical.y||u.canonical.x-R.canonical.x}function Ae(R){return R==="raster"||R==="image"||R==="video"}St.maxOverzooming=10,St.maxUnderzooming=3;class ft{constructor(u,y){this.reset(u,y)}reset(u,y){this.points=u||[],this._distances=[0];for(let A=1;A<this.points.length;A++)this._distances[A]=this._distances[A-1]+this.points[A].dist(this.points[A-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(y||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=a.ac(u,0,1);let y=1,A=this._distances[y];const P=u*this.paddedLength+this.padding;for(;A<P&&y<this._distances.length;)A=this._distances[++y];const L=y-1,H=this._distances[L],q=A-H,K=q>0?(P-H)/q:0;return this.points[L].mult(1-K).add(this.points[y].mult(K))}}function Ie(R,u){let y=!0;return R==="always"||R!=="never"&&u!=="never"||(y=!1),y}class it{constructor(u,y,A){const P=this.boxCells=[],L=this.circleCells=[];this.xCellCount=Math.ceil(u/A),this.yCellCount=Math.ceil(y/A);for(let H=0;H<this.xCellCount*this.yCellCount;H++)P.push([]),L.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=y,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/y,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,y,A,P,L){this._forEachCell(y,A,P,L,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(y),this.bboxes.push(A),this.bboxes.push(P),this.bboxes.push(L)}insertCircle(u,y,A,P){this._forEachCell(y-P,A-P,y+P,A+P,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(y),this.circles.push(A),this.circles.push(P)}_insertBoxCell(u,y,A,P,L,H){this.boxCells[L].push(H)}_insertCircleCell(u,y,A,P,L,H){this.circleCells[L].push(H)}_query(u,y,A,P,L,H,q){if(A<0||u>this.width||P<0||y>this.height)return[];const K=[];if(u<=0&&y<=0&&this.width<=A&&this.height<=P){if(L)return[{key:null,x1:u,y1:y,x2:A,y2:P}];for(let te=0;te<this.boxKeys.length;te++)K.push({key:this.boxKeys[te],x1:this.bboxes[4*te],y1:this.bboxes[4*te+1],x2:this.bboxes[4*te+2],y2:this.bboxes[4*te+3]});for(let te=0;te<this.circleKeys.length;te++){const le=this.circles[3*te],de=this.circles[3*te+1],Se=this.circles[3*te+2];K.push({key:this.circleKeys[te],x1:le-Se,y1:de-Se,x2:le+Se,y2:de+Se})}}else this._forEachCell(u,y,A,P,this._queryCell,K,{hitTest:L,overlapMode:H,seenUids:{box:{},circle:{}}},q);return K}query(u,y,A,P){return this._query(u,y,A,P,!1,null)}hitTest(u,y,A,P,L,H){return this._query(u,y,A,P,!0,L,H).length>0}hitTestCircle(u,y,A,P,L){const H=u-A,q=u+A,K=y-A,te=y+A;if(q<0||H>this.width||te<0||K>this.height)return!1;const le=[];return this._forEachCell(H,K,q,te,this._queryCellCircle,le,{hitTest:!0,overlapMode:P,circle:{x:u,y,radius:A},seenUids:{box:{},circle:{}}},L),le.length>0}_queryCell(u,y,A,P,L,H,q,K){const{seenUids:te,hitTest:le,overlapMode:de}=q,Se=this.boxCells[L];if(Se!==null){const De=this.bboxes;for(const Be of Se)if(!te.box[Be]){te.box[Be]=!0;const ke=4*Be,Le=this.boxKeys[Be];if(u<=De[ke+2]&&y<=De[ke+3]&&A>=De[ke+0]&&P>=De[ke+1]&&(!K||K(Le))&&(!le||!Ie(de,Le.overlapMode))&&(H.push({key:Le,x1:De[ke],y1:De[ke+1],x2:De[ke+2],y2:De[ke+3]}),le))return!0}}const ze=this.circleCells[L];if(ze!==null){const De=this.circles;for(const Be of ze)if(!te.circle[Be]){te.circle[Be]=!0;const ke=3*Be,Le=this.circleKeys[Be];if(this._circleAndRectCollide(De[ke],De[ke+1],De[ke+2],u,y,A,P)&&(!K||K(Le))&&(!le||!Ie(de,Le.overlapMode))){const Et=De[ke],He=De[ke+1],ct=De[ke+2];if(H.push({key:Le,x1:Et-ct,y1:He-ct,x2:Et+ct,y2:He+ct}),le)return!0}}}return!1}_queryCellCircle(u,y,A,P,L,H,q,K){const{circle:te,seenUids:le,overlapMode:de}=q,Se=this.boxCells[L];if(Se!==null){const De=this.bboxes;for(const Be of Se)if(!le.box[Be]){le.box[Be]=!0;const ke=4*Be,Le=this.boxKeys[Be];if(this._circleAndRectCollide(te.x,te.y,te.radius,De[ke+0],De[ke+1],De[ke+2],De[ke+3])&&(!K||K(Le))&&!Ie(de,Le.overlapMode))return H.push(!0),!0}}const ze=this.circleCells[L];if(ze!==null){const De=this.circles;for(const Be of ze)if(!le.circle[Be]){le.circle[Be]=!0;const ke=3*Be,Le=this.circleKeys[Be];if(this._circlesCollide(De[ke],De[ke+1],De[ke+2],te.x,te.y,te.radius)&&(!K||K(Le))&&!Ie(de,Le.overlapMode))return H.push(!0),!0}}}_forEachCell(u,y,A,P,L,H,q,K){const te=this._convertToXCellCoord(u),le=this._convertToYCellCoord(y),de=this._convertToXCellCoord(A),Se=this._convertToYCellCoord(P);for(let ze=te;ze<=de;ze++)for(let De=le;De<=Se;De++)if(L.call(this,u,y,A,P,this.xCellCount*De+ze,H,q,K))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,y,A,P,L,H){const q=P-u,K=L-y,te=A+H;return te*te>q*q+K*K}_circleAndRectCollide(u,y,A,P,L,H,q){const K=(H-P)/2,te=Math.abs(u-(P+K));if(te>K+A)return!1;const le=(q-L)/2,de=Math.abs(y-(L+le));if(de>le+A)return!1;if(te<=K||de<=le)return!0;const Se=te-K,ze=de-le;return Se*Se+ze*ze<=A*A}}function tn(R,u,y,A,P){const L=a.F();return u?(a.J(L,L,[1/P,1/P,1]),y||a.ad(L,L,A.angle)):a.K(L,A.labelPlaneMatrix,R),L}function Xe(R,u,y,A,P){if(u){const L=a.ae(R);return a.J(L,L,[P,P,1]),y||a.ad(L,L,-A.angle),L}return A.glCoordMatrix}function xe(R,u,y){let A;y?(A=[R.x,R.y,y(R.x,R.y),1],a.af(A,A,u)):(A=[R.x,R.y,0,1],Nn(A,A,u));const P=A[3];return{point:new a.P(A[0]/P,A[1]/P),signedDistanceFromCamera:P}}function ee(R,u){return .5+R/u*.5}function se(R,u){const y=R[0]/R[3],A=R[1]/R[3];return y>=-u[0]&&y<=u[0]&&A>=-u[1]&&A<=u[1]}function me(R,u,y,A,P,L,H,q,K,te){const le=A?R.textSizeData:R.iconSizeData,de=a.ag(le,y.transform.zoom),Se=[256/y.width*2+1,256/y.height*2+1],ze=A?R.text.dynamicLayoutVertexArray:R.icon.dynamicLayoutVertexArray;ze.clear();const De=R.lineVertexArray,Be=A?R.text.placedSymbolArray:R.icon.placedSymbolArray,ke=y.transform.width/y.transform.height;let Le=!1;for(let Et=0;Et<Be.length;Et++){const He=Be.get(Et);if(He.hidden||He.writingMode===a.ah.vertical&&!Le){En(He.numGlyphs,ze);continue}let ct;if(Le=!1,te?(ct=[He.anchorX,He.anchorY,te(He.anchorX,He.anchorY),1],a.af(ct,ct,u)):(ct=[He.anchorX,He.anchorY,0,1],Nn(ct,ct,u)),!se(ct,Se)){En(He.numGlyphs,ze);continue}const Pt=ee(y.transform.cameraToCenterDistance,ct[3]),Ct=a.ai(le,de,He),Ot=H?Ct/Pt:Ct*Pt,Zt=new a.P(He.anchorX,He.anchorY),Gt=xe(Zt,P,te).point,Kt={projections:{},offsets:{}},bn=Ye(He,Ot,!1,q,u,P,L,R.glyphOffsetArray,De,ze,Gt,Zt,Kt,ke,K,te);Le=bn.useVertical,(bn.notEnoughRoom||Le||bn.needsFlipping&&Ye(He,Ot,!0,q,u,P,L,R.glyphOffsetArray,De,ze,Gt,Zt,Kt,ke,K,te).notEnoughRoom)&&En(He.numGlyphs,ze)}A?R.text.dynamicLayoutVertexBuffer.updateData(ze):R.icon.dynamicLayoutVertexBuffer.updateData(ze)}function Ce(R,u,y,A,P,L,H,q,K,te,le,de,Se){const ze=q.glyphStartIndex+q.numGlyphs,De=q.lineStartIndex,Be=q.lineStartIndex+q.lineLength,ke=u.getoffsetX(q.glyphStartIndex),Le=u.getoffsetX(ze-1),Et=It(R*ke,y,A,P,L,H,q.segment,De,Be,K,te,le,de,Se);if(!Et)return null;const He=It(R*Le,y,A,P,L,H,q.segment,De,Be,K,te,le,de,Se);return He?{first:Et,last:He}:null}function qe(R,u,y,A){return R===a.ah.horizontal&&Math.abs(y.y-u.y)>Math.abs(y.x-u.x)*A?{useVertical:!0}:(R===a.ah.vertical?u.y<y.y:u.x>y.x)?{needsFlipping:!0}:null}function Ye(R,u,y,A,P,L,H,q,K,te,le,de,Se,ze,De,Be){const ke=u/24,Le=R.lineOffsetX*ke,Et=R.lineOffsetY*ke;let He;if(R.numGlyphs>1){const ct=R.glyphStartIndex+R.numGlyphs,Pt=R.lineStartIndex,Ct=R.lineStartIndex+R.lineLength,Ot=Ce(ke,q,Le,Et,y,le,de,R,K,L,Se,De,Be);if(!Ot)return{notEnoughRoom:!0};const Zt=xe(Ot.first.point,H,Be).point,Gt=xe(Ot.last.point,H,Be).point;if(A&&!y){const Kt=qe(R.writingMode,Zt,Gt,ze);if(Kt)return Kt}He=[Ot.first];for(let Kt=R.glyphStartIndex+1;Kt<ct-1;Kt++)He.push(It(ke*q.getoffsetX(Kt),Le,Et,y,le,de,R.segment,Pt,Ct,K,L,Se,De,Be));He.push(Ot.last)}else{if(A&&!y){const Pt=xe(de,P,Be).point,Ct=R.lineStartIndex+R.segment+1,Ot=new a.P(K.getx(Ct),K.gety(Ct)),Zt=xe(Ot,P,Be),Gt=Zt.signedDistanceFromCamera>0?Zt.point:et(de,Ot,Pt,1,P,Be),Kt=qe(R.writingMode,Pt,Gt,ze);if(Kt)return Kt}const ct=It(ke*q.getoffsetX(R.glyphStartIndex),Le,Et,y,le,de,R.segment,R.lineStartIndex,R.lineStartIndex+R.lineLength,K,L,Se,De,Be);if(!ct)return{notEnoughRoom:!0};He=[ct]}for(const ct of He)a.aj(te,ct.point,ct.angle);return{}}function et(R,u,y,A,P,L){const H=xe(R.add(R.sub(u)._unit()),P,L).point,q=y.sub(H);return y.add(q._mult(A/q.mag()))}function je(R,u){const{projectionCache:y,lineVertexArray:A,labelPlaneMatrix:P,tileAnchorPoint:L,distanceFromAnchor:H,getElevation:q,previousVertex:K,direction:te,absOffsetX:le}=u;if(y.projections[R])return y.projections[R];const de=new a.P(A.getx(R),A.gety(R)),Se=xe(de,P,q);if(Se.signedDistanceFromCamera>0)return y.projections[R]=Se.point,Se.point;const ze=R-te;return et(H===0?L:new a.P(A.getx(ze),A.gety(ze)),de,K,le-H+1,P,q)}function ot(R,u,y){return R._unit()._perp()._mult(u*y)}function Dt(R,u,y,A,P,L,H,q){const{projectionCache:K,direction:te}=q;if(K.offsets[R])return K.offsets[R];const le=y.add(u);if(R+te<A||R+te>=P)return K.offsets[R]=le,le;const de=je(R+te,q),Se=ot(de.sub(y),H,te),ze=y.add(Se),De=de.add(Se);return K.offsets[R]=a.ak(L,le,ze,De)||le,K.offsets[R]}function It(R,u,y,A,P,L,H,q,K,te,le,de,Se,ze){const De=A?R-u:R+u;let Be=De>0?1:-1,ke=0;A&&(Be*=-1,ke=Math.PI),Be<0&&(ke+=Math.PI);let Le,Et,He=Be>0?q+H:q+H+1,ct=P,Pt=P,Ct=0,Ot=0;const Zt=Math.abs(De),Gt=[];let Kt;for(;Ct+Ot<=Zt;){if(He+=Be,He<q||He>=K)return null;Ct+=Ot,Pt=ct,Et=Le;const cn={projectionCache:de,lineVertexArray:te,labelPlaneMatrix:le,tileAnchorPoint:L,distanceFromAnchor:Ct,getElevation:ze,previousVertex:Pt,direction:Be,absOffsetX:Zt};if(ct=je(He,cn),y===0)Gt.push(Pt),Kt=ct.sub(Pt);else{let Zn;const ur=ct.sub(Pt);Zn=ur.mag()===0?ot(je(He+Be,cn).sub(ct),y,Be):ot(ur,y,Be),Et||(Et=Pt.add(Zn)),Le=Dt(He,Zn,ct,q,K,Et,y,cn),Gt.push(Et),Kt=Le.sub(Et)}Ot=Kt.mag()}const bn=Kt._mult((Zt-Ct)/Ot)._add(Et||Pt),sr=ke+Math.atan2(ct.y-Pt.y,ct.x-Pt.x);return Gt.push(bn),{point:bn,angle:Se?sr:0,path:Gt}}const Nt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function En(R,u){for(let y=0;y<R;y++){const A=u.length;u.resize(A+4),u.float32.set(Nt,3*A)}}function Nn(R,u,y){const A=u[0],P=u[1];return R[0]=y[0]*A+y[4]*P+y[12],R[1]=y[1]*A+y[5]*P+y[13],R[3]=y[3]*A+y[7]*P+y[15],R}const zn=100;class yr{constructor(u,y=new it(u.width+200,u.height+200,25),A=new it(u.width+200,u.height+200,25)){this.transform=u,this.grid=y,this.ignoredGrid=A,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+zn,this.screenBottomBoundary=u.height+zn,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(u,y,A,P,L,H){const q=this.projectAndGetPerspectiveRatio(P,u.anchorPointX,u.anchorPointY,H),K=A*q.perspectiveRatio,te=u.x1*K+q.point.x,le=u.y1*K+q.point.y,de=u.x2*K+q.point.x,Se=u.y2*K+q.point.y;return!this.isInsideGrid(te,le,de,Se)||y!=="always"&&this.grid.hitTest(te,le,de,Se,y,L)||q.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[te,le,de,Se],offscreen:this.isOffscreen(te,le,de,Se)}}placeCollisionCircles(u,y,A,P,L,H,q,K,te,le,de,Se,ze,De){const Be=[],ke=new a.P(y.anchorX,y.anchorY),Le=xe(ke,H,De),Et=ee(this.transform.cameraToCenterDistance,Le.signedDistanceFromCamera),He=(le?L/Et:L*Et)/a.ao,ct=xe(ke,q,De).point,Pt=Ce(He,P,y.lineOffsetX*He,y.lineOffsetY*He,!1,ct,ke,y,A,q,{projections:{},offsets:{}},!1,De);let Ct=!1,Ot=!1,Zt=!0;if(Pt){const Gt=.5*Se*Et+ze,Kt=new a.P(-100,-100),bn=new a.P(this.screenRightBoundary,this.screenBottomBoundary),sr=new ft,cn=Pt.first,Zn=Pt.last;let ur=[];for(let fr=cn.path.length-1;fr>=1;fr--)ur.push(cn.path[fr]);for(let fr=1;fr<Zn.path.length;fr++)ur.push(Zn.path[fr]);const Mr=2.5*Gt;if(K){const fr=ur.map(dr=>xe(dr,K,De));ur=fr.some(dr=>dr.signedDistanceFromCamera<=0)?[]:fr.map(dr=>dr.point)}let rr=[];if(ur.length>0){const fr=ur[0].clone(),dr=ur[0].clone();for(let Vi=1;Vi<ur.length;Vi++)fr.x=Math.min(fr.x,ur[Vi].x),fr.y=Math.min(fr.y,ur[Vi].y),dr.x=Math.max(dr.x,ur[Vi].x),dr.y=Math.max(dr.y,ur[Vi].y);rr=fr.x>=Kt.x&&dr.x<=bn.x&&fr.y>=Kt.y&&dr.y<=bn.y?[ur]:dr.x<Kt.x||fr.x>bn.x||dr.y<Kt.y||fr.y>bn.y?[]:a.al([ur],Kt.x,Kt.y,bn.x,bn.y)}for(const fr of rr){sr.reset(fr,.25*Gt);let dr=0;dr=sr.length<=.5*Gt?1:Math.ceil(sr.paddedLength/Mr)+1;for(let Vi=0;Vi<dr;Vi++){const fi=Vi/Math.max(dr-1,1),Os=sr.lerp(fi),ho=Os.x+zn,pi=Os.y+zn;Be.push(ho,pi,Gt,0);const Qo=ho-Gt,ta=pi-Gt,_a=ho+Gt,sc=pi+Gt;if(Zt=Zt&&this.isOffscreen(Qo,ta,_a,sc),Ot=Ot||this.isInsideGrid(Qo,ta,_a,sc),u!=="always"&&this.grid.hitTestCircle(ho,pi,Gt,u,de)&&(Ct=!0,!te))return{circles:[],offscreen:!1,collisionDetected:Ct}}}}return{circles:!te&&Ct||!Ot||Et<this.perspectiveRatioCutoff?[]:Be,offscreen:Zt,collisionDetected:Ct}}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const y=[];let A=1/0,P=1/0,L=-1/0,H=-1/0;for(const le of u){const de=new a.P(le.x+zn,le.y+zn);A=Math.min(A,de.x),P=Math.min(P,de.y),L=Math.max(L,de.x),H=Math.max(H,de.y),y.push(de)}const q=this.grid.query(A,P,L,H).concat(this.ignoredGrid.query(A,P,L,H)),K={},te={};for(const le of q){const de=le.key;if(K[de.bucketInstanceId]===void 0&&(K[de.bucketInstanceId]={}),K[de.bucketInstanceId][de.featureIndex])continue;const Se=[new a.P(le.x1,le.y1),new a.P(le.x2,le.y1),new a.P(le.x2,le.y2),new a.P(le.x1,le.y2)];a.am(y,Se)&&(K[de.bucketInstanceId][de.featureIndex]=!0,te[de.bucketInstanceId]===void 0&&(te[de.bucketInstanceId]=[]),te[de.bucketInstanceId].push(de.featureIndex))}return te}insertCollisionBox(u,y,A,P,L,H){(A?this.ignoredGrid:this.grid).insert({bucketInstanceId:P,featureIndex:L,collisionGroupID:H,overlapMode:y},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,y,A,P,L,H){const q=A?this.ignoredGrid:this.grid,K={bucketInstanceId:P,featureIndex:L,collisionGroupID:H,overlapMode:y};for(let te=0;te<u.length;te+=4)q.insertCircle(K,u[te],u[te+1],u[te+2])}projectAndGetPerspectiveRatio(u,y,A,P){let L;return P?(L=[y,A,P(y,A),1],a.af(L,L,u)):(L=[y,A,0,1],Nn(L,L,u)),{point:new a.P((L[0]/L[3]+1)/2*this.transform.width+zn,(-L[1]/L[3]+1)/2*this.transform.height+zn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/L[3]*.5}}isOffscreen(u,y,A,P){return A<zn||u>=this.screenRightBoundary||P<zn||y>this.screenBottomBoundary}isInsideGrid(u,y,A,P){return A>=0&&u<this.gridRightBoundary&&P>=0&&y<this.gridBottomBoundary}getViewportMatrix(){const u=a.an([]);return a.H(u,u,[-100,-100,0]),u}}function tr(R,u,y){return u*(a.W/(R.tileSize*Math.pow(2,y-R.tileID.overscaledZ)))}class Qr{constructor(u,y,A,P){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?y:-y))):P&&A?1:0,this.placed=A}isHidden(){return this.opacity===0&&!this.placed}}class Ur{constructor(u,y,A,P,L){this.text=new Qr(u?u.text:null,y,A,L),this.icon=new Qr(u?u.icon:null,y,P,L)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Oi{constructor(u,y,A){this.text=u,this.icon=y,this.skipFade=A}}class Te{constructor(){this.invProjMatrix=a.F(),this.viewportMatrix=a.F(),this.circles=[]}}class pt{constructor(u,y,A,P,L){this.bucketInstanceId=u,this.featureIndex=y,this.sourceLayerIndex=A,this.bucketIndex=P,this.tileID=L}}class At{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const y=++this.maxGroupID;this.collisionGroups[u]={ID:y,predicate:A=>A.collisionGroupID===y}}return this.collisionGroups[u]}}function mt(R,u,y,A,P){const{horizontalAlign:L,verticalAlign:H}=a.at(R);return new a.P(-(L-.5)*u+A[0]*P,-(H-.5)*y+A[1]*P)}function xt(R,u,y,A,P,L){const{x1:H,x2:q,y1:K,y2:te,anchorPointX:le,anchorPointY:de}=R,Se=new a.P(u,y);return A&&Se._rotate(P?L:-L),{x1:H+Se.x,y1:K+Se.y,x2:q+Se.x,y2:te+Se.y,anchorPointX:le,anchorPointY:de}}class gn{constructor(u,y,A,P,L){this.transform=u.clone(),this.terrain=y,this.collisionIndex=new yr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=A,this.retainedQueryData={},this.collisionGroups=new At(P),this.collisionCircleArrays={},this.prevPlacement=L,L&&(L.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(u,y,A,P){const L=A.getBucket(y),H=A.latestFeatureIndex;if(!L||!H||y.id!==L.layerIds[0])return;const q=A.collisionBoxArray,K=L.layers[0].layout,te=Math.pow(2,this.transform.zoom-A.tileID.overscaledZ),le=A.tileSize/a.W,de=this.transform.calculatePosMatrix(A.tileID.toUnwrapped()),Se=K.get("text-pitch-alignment")==="map",ze=K.get("text-rotation-alignment")==="map",De=tr(A,1,this.transform.zoom),Be=tn(de,Se,ze,this.transform,De);let ke=null;if(Se){const Et=Xe(de,Se,ze,this.transform,De);ke=a.K([],this.transform.labelPlaneMatrix,Et)}this.retainedQueryData[L.bucketInstanceId]=new pt(L.bucketInstanceId,H,L.sourceLayerIndex,L.index,A.tileID);const Le={bucket:L,layout:K,posMatrix:de,textLabelPlaneMatrix:Be,labelToScreenMatrix:ke,scale:te,textPixelRatio:le,holdingForFade:A.holdingForFade(),collisionBoxArray:q,partiallyEvaluatedTextSize:a.ag(L.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(L.sourceID)};if(P)for(const Et of L.sortKeyRanges){const{sortKey:He,symbolInstanceStart:ct,symbolInstanceEnd:Pt}=Et;u.push({sortKey:He,symbolInstanceStart:ct,symbolInstanceEnd:Pt,parameters:Le})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:L.symbolInstances.length,parameters:Le})}attemptAnchorPlacement(u,y,A,P,L,H,q,K,te,le,de,Se,ze,De,Be,ke){const Le=a.ap[u.textAnchor],Et=[u.textOffset0,u.textOffset1],He=mt(Le,A,P,Et,L),ct=this.collisionIndex.placeCollisionBox(xt(y,He.x,He.y,H,q,this.transform.angle),de,K,te,le.predicate,ke);if((!Be||this.collisionIndex.placeCollisionBox(xt(Be,He.x,He.y,H,q,this.transform.angle),de,K,te,le.predicate,ke).box.length!==0)&&ct.box.length>0){let Pt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Se.crossTileID]&&this.prevPlacement.placements[Se.crossTileID]&&this.prevPlacement.placements[Se.crossTileID].text&&(Pt=this.prevPlacement.variableOffsets[Se.crossTileID].anchor),Se.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Se.crossTileID]={textOffset:Et,width:A,height:P,anchor:Le,textBoxScale:L,prevAnchor:Pt},this.markUsedJustification(ze,Le,Se,De),ze.allowVerticalPlacement&&(this.markUsedOrientation(ze,De,Se),this.placedOrientations[Se.crossTileID]=De),{shift:He,placedGlyphBoxes:ct}}}placeLayerBucketPart(u,y,A){const{bucket:P,layout:L,posMatrix:H,textLabelPlaneMatrix:q,labelToScreenMatrix:K,textPixelRatio:te,holdingForFade:le,collisionBoxArray:de,partiallyEvaluatedTextSize:Se,collisionGroup:ze}=u.parameters,De=L.get("text-optional"),Be=L.get("icon-optional"),ke=a.aq(L,"text-overlap","text-allow-overlap"),Le=ke==="always",Et=a.aq(L,"icon-overlap","icon-allow-overlap"),He=Et==="always",ct=L.get("text-rotation-alignment")==="map",Pt=L.get("text-pitch-alignment")==="map",Ct=L.get("icon-text-fit")!=="none",Ot=L.get("symbol-z-order")==="viewport-y",Zt=Le&&(He||!P.hasIconData()||Be),Gt=He&&(Le||!P.hasTextData()||De);!P.collisionArrays&&de&&P.deserializeCollisionBoxes(de);const Kt=this.retainedQueryData[P.bucketInstanceId].tileID,bn=this.terrain?(cn,Zn)=>this.terrain.getElevation(Kt,cn,Zn):null,sr=(cn,Zn)=>{var ur,Mr;if(y[cn.crossTileID])return;if(le)return void(this.placements[cn.crossTileID]=new Oi(!1,!1,!1));let rr=!1,fr=!1,dr=!0,Vi=null,fi={box:null,offscreen:null},Os={box:null,offscreen:null},ho=null,pi=null,Qo=null,ta=0,_a=0,sc=0;Zn.textFeatureIndex?ta=Zn.textFeatureIndex:cn.useRuntimeCollisionCircles&&(ta=cn.featureIndex),Zn.verticalTextFeatureIndex&&(_a=Zn.verticalTextFeatureIndex);const ac=Zn.textBox;if(ac){const Di=Ei=>{let jo=a.ah.horizontal;if(P.allowVerticalPlacement&&!Ei&&this.prevPlacement){const ws=this.prevPlacement.placedOrientations[cn.crossTileID];ws&&(this.placedOrientations[cn.crossTileID]=ws,jo=ws,this.markUsedOrientation(P,jo,cn))}return jo},mi=(Ei,jo)=>{if(P.allowVerticalPlacement&&cn.numVerticalGlyphVertices>0&&Zn.verticalTextBox){for(const ws of P.writingModes)if(ws===a.ah.vertical?(fi=jo(),Os=fi):fi=Ei(),fi&&fi.box&&fi.box.length)break}else fi=Ei()},Wi=cn.textAnchorOffsetStartIndex,qd=cn.textAnchorOffsetEndIndex;if(qd===Wi){const Ei=(jo,ws)=>{const Sr=this.collisionIndex.placeCollisionBox(jo,ke,te,H,ze.predicate,bn);return Sr&&Sr.box&&Sr.box.length&&(this.markUsedOrientation(P,ws,cn),this.placedOrientations[cn.crossTileID]=ws),Sr};mi(()=>Ei(ac,a.ah.horizontal),()=>{const jo=Zn.verticalTextBox;return P.allowVerticalPlacement&&cn.numVerticalGlyphVertices>0&&jo?Ei(jo,a.ah.vertical):{box:null,offscreen:null}}),Di(fi&&fi.box&&fi.box.length)}else{let Ei=a.ap[(Mr=(ur=this.prevPlacement)===null||ur===void 0?void 0:ur.variableOffsets[cn.crossTileID])===null||Mr===void 0?void 0:Mr.anchor];const jo=(Sr,eo,Cr)=>{const ki=Sr.x2-Sr.x1,Ri=Sr.y2-Sr.y1,bo=cn.textBoxScale,Ds=Ct&&Et==="never"?eo:null;let Xa={box:[],offscreen:!1},wo=ke==="never"?1:2,Yd="never";Ei&&wo++;for(let Xd=0;Xd<wo;Xd++){for(let Vu=Wi;Vu<qd;Vu++){const tg=P.textAnchorOffsets.get(Vu);if(Ei&&tg.textAnchor!==Ei)continue;const Fc=this.attemptAnchorPlacement(tg,Sr,ki,Ri,bo,ct,Pt,te,H,ze,Yd,cn,P,Cr,Ds,bn);if(Fc&&(Xa=Fc.placedGlyphBoxes,Xa&&Xa.box&&Xa.box.length))return rr=!0,Vi=Fc.shift,Xa}Ei?Ei=null:Yd=ke}return Xa};mi(()=>jo(ac,Zn.iconBox,a.ah.horizontal),()=>{const Sr=Zn.verticalTextBox;return P.allowVerticalPlacement&&!(fi&&fi.box&&fi.box.length)&&cn.numVerticalGlyphVertices>0&&Sr?jo(Sr,Zn.verticalIconBox,a.ah.vertical):{box:null,offscreen:null}}),fi&&(rr=fi.box,dr=fi.offscreen);const ws=Di(fi&&fi.box);if(!rr&&this.prevPlacement){const Sr=this.prevPlacement.variableOffsets[cn.crossTileID];Sr&&(this.variableOffsets[cn.crossTileID]=Sr,this.markUsedJustification(P,Sr.anchor,cn,ws))}}}if(ho=fi,rr=ho&&ho.box&&ho.box.length>0,dr=ho&&ho.offscreen,cn.useRuntimeCollisionCircles){const Di=P.text.placedSymbolArray.get(cn.centerJustifiedTextSymbolIndex),mi=a.ai(P.textSizeData,Se,Di),Wi=L.get("text-padding");pi=this.collisionIndex.placeCollisionCircles(ke,Di,P.lineVertexArray,P.glyphOffsetArray,mi,H,q,K,A,Pt,ze.predicate,cn.collisionCircleDiameter,Wi,bn),pi.circles.length&&pi.collisionDetected&&!A&&a.w("Collisions detected, but collision boxes are not shown"),rr=Le||pi.circles.length>0&&!pi.collisionDetected,dr=dr&&pi.offscreen}if(Zn.iconFeatureIndex&&(sc=Zn.iconFeatureIndex),Zn.iconBox){const Di=mi=>{const Wi=Ct&&Vi?xt(mi,Vi.x,Vi.y,ct,Pt,this.transform.angle):mi;return this.collisionIndex.placeCollisionBox(Wi,Et,te,H,ze.predicate,bn)};Os&&Os.box&&Os.box.length&&Zn.verticalIconBox?(Qo=Di(Zn.verticalIconBox),fr=Qo.box.length>0):(Qo=Di(Zn.iconBox),fr=Qo.box.length>0),dr=dr&&Qo.offscreen}const xa=De||cn.numHorizontalGlyphVertices===0&&cn.numVerticalGlyphVertices===0,Ls=Be||cn.numIconVertices===0;if(xa||Ls?Ls?xa||(fr=fr&&rr):rr=fr&&rr:fr=rr=fr&&rr,rr&&ho&&ho.box&&this.collisionIndex.insertCollisionBox(ho.box,ke,L.get("text-ignore-placement"),P.bucketInstanceId,Os&&Os.box&&_a?_a:ta,ze.ID),fr&&Qo&&this.collisionIndex.insertCollisionBox(Qo.box,Et,L.get("icon-ignore-placement"),P.bucketInstanceId,sc,ze.ID),pi&&(rr&&this.collisionIndex.insertCollisionCircles(pi.circles,ke,L.get("text-ignore-placement"),P.bucketInstanceId,ta,ze.ID),A)){const Di=P.bucketInstanceId;let mi=this.collisionCircleArrays[Di];mi===void 0&&(mi=this.collisionCircleArrays[Di]=new Te);for(let Wi=0;Wi<pi.circles.length;Wi+=4)mi.circles.push(pi.circles[Wi+0]),mi.circles.push(pi.circles[Wi+1]),mi.circles.push(pi.circles[Wi+2]),mi.circles.push(pi.collisionDetected?1:0)}if(cn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(P.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[cn.crossTileID]=new Oi(rr||Zt,fr||Gt,dr||P.justReloaded),y[cn.crossTileID]=!0};if(Ot){if(u.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const cn=P.getSortedSymbolIndexes(this.transform.angle);for(let Zn=cn.length-1;Zn>=0;--Zn){const ur=cn[Zn];sr(P.symbolInstances.get(ur),P.collisionArrays[ur])}}else for(let cn=u.symbolInstanceStart;cn<u.symbolInstanceEnd;cn++)sr(P.symbolInstances.get(cn),P.collisionArrays[cn]);if(A&&P.bucketInstanceId in this.collisionCircleArrays){const cn=this.collisionCircleArrays[P.bucketInstanceId];a.ar(cn.invProjMatrix,H),cn.viewportMatrix=this.collisionIndex.getViewportMatrix()}P.justReloaded=!1}markUsedJustification(u,y,A,P){let L;L=P===a.ah.vertical?A.verticalPlacedTextSymbolIndex:{left:A.leftJustifiedTextSymbolIndex,center:A.centerJustifiedTextSymbolIndex,right:A.rightJustifiedTextSymbolIndex}[a.as(y)];const H=[A.leftJustifiedTextSymbolIndex,A.centerJustifiedTextSymbolIndex,A.rightJustifiedTextSymbolIndex,A.verticalPlacedTextSymbolIndex];for(const q of H)q>=0&&(u.text.placedSymbolArray.get(q).crossTileID=L>=0&&q!==L?0:A.crossTileID)}markUsedOrientation(u,y,A){const P=y===a.ah.horizontal||y===a.ah.horizontalOnly?y:0,L=y===a.ah.vertical?y:0,H=[A.leftJustifiedTextSymbolIndex,A.centerJustifiedTextSymbolIndex,A.rightJustifiedTextSymbolIndex];for(const q of H)u.text.placedSymbolArray.get(q).placedOrientation=P;A.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(A.verticalPlacedTextSymbolIndex).placedOrientation=L)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const y=this.prevPlacement;let A=!1;this.prevZoomAdjustment=y?y.zoomAdjustment(this.transform.zoom):0;const P=y?y.symbolFadeChange(u):1,L=y?y.opacities:{},H=y?y.variableOffsets:{},q=y?y.placedOrientations:{};for(const K in this.placements){const te=this.placements[K],le=L[K];le?(this.opacities[K]=new Ur(le,P,te.text,te.icon),A=A||te.text!==le.text.placed||te.icon!==le.icon.placed):(this.opacities[K]=new Ur(null,P,te.text,te.icon,te.skipFade),A=A||te.text||te.icon)}for(const K in L){const te=L[K];if(!this.opacities[K]){const le=new Ur(te,P,!1,!1);le.isHidden()||(this.opacities[K]=le,A=A||te.text.placed||te.icon.placed)}}for(const K in H)this.variableOffsets[K]||!this.opacities[K]||this.opacities[K].isHidden()||(this.variableOffsets[K]=H[K]);for(const K in q)this.placedOrientations[K]||!this.opacities[K]||this.opacities[K].isHidden()||(this.placedOrientations[K]=q[K]);if(y&&y.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");A?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=y?y.lastPlacementChangeTime:u)}updateLayerOpacities(u,y){const A={};for(const P of y){const L=P.getBucket(u);L&&P.latestFeatureIndex&&u.id===L.layerIds[0]&&this.updateBucketOpacities(L,A,P.collisionBoxArray)}}updateBucketOpacities(u,y,A){u.hasTextData()&&(u.text.opacityVertexArray.clear(),u.text.hasVisibleVertices=!1),u.hasIconData()&&(u.icon.opacityVertexArray.clear(),u.icon.hasVisibleVertices=!1),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const P=u.layers[0],L=P.layout,H=new Ur(null,0,!1,!1,!0),q=L.get("text-allow-overlap"),K=L.get("icon-allow-overlap"),te=P._unevaluatedLayout.hasValue("text-variable-anchor")||P._unevaluatedLayout.hasValue("text-variable-anchor-offset"),le=L.get("text-rotation-alignment")==="map",de=L.get("text-pitch-alignment")==="map",Se=L.get("icon-text-fit")!=="none",ze=new Ur(null,0,q&&(K||!u.hasIconData()||L.get("icon-optional")),K&&(q||!u.hasTextData()||L.get("text-optional")),!0);!u.collisionArrays&&A&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(A);const De=(Be,ke,Le)=>{for(let Et=0;Et<ke/4;Et++)Be.opacityVertexArray.emplaceBack(Le);Be.hasVisibleVertices=Be.hasVisibleVertices||Le!==Vr};for(let Be=0;Be<u.symbolInstances.length;Be++){const ke=u.symbolInstances.get(Be),{numHorizontalGlyphVertices:Le,numVerticalGlyphVertices:Et,crossTileID:He}=ke;let ct=this.opacities[He];y[He]?ct=H:ct||(ct=ze,this.opacities[He]=ct),y[He]=!0;const Pt=ke.numIconVertices>0,Ct=this.placedOrientations[ke.crossTileID],Ot=Ct===a.ah.vertical,Zt=Ct===a.ah.horizontal||Ct===a.ah.horizontalOnly;if(Le>0||Et>0){const Gt=Pi(ct.text);De(u.text,Le,Ot?Vr:Gt),De(u.text,Et,Zt?Vr:Gt);const Kt=ct.text.isHidden();[ke.rightJustifiedTextSymbolIndex,ke.centerJustifiedTextSymbolIndex,ke.leftJustifiedTextSymbolIndex].forEach(cn=>{cn>=0&&(u.text.placedSymbolArray.get(cn).hidden=Kt||Ot?1:0)}),ke.verticalPlacedTextSymbolIndex>=0&&(u.text.placedSymbolArray.get(ke.verticalPlacedTextSymbolIndex).hidden=Kt||Zt?1:0);const bn=this.variableOffsets[ke.crossTileID];bn&&this.markUsedJustification(u,bn.anchor,ke,Ct);const sr=this.placedOrientations[ke.crossTileID];sr&&(this.markUsedJustification(u,"left",ke,sr),this.markUsedOrientation(u,sr,ke))}if(Pt){const Gt=Pi(ct.icon),Kt=!(Se&&ke.verticalPlacedIconSymbolIndex&&Ot);ke.placedIconSymbolIndex>=0&&(De(u.icon,ke.numIconVertices,Kt?Gt:Vr),u.icon.placedSymbolArray.get(ke.placedIconSymbolIndex).hidden=ct.icon.isHidden()),ke.verticalPlacedIconSymbolIndex>=0&&(De(u.icon,ke.numVerticalIconVertices,Kt?Vr:Gt),u.icon.placedSymbolArray.get(ke.verticalPlacedIconSymbolIndex).hidden=ct.icon.isHidden())}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const Gt=u.collisionArrays[Be];if(Gt){let Kt=new a.P(0,0);if(Gt.textBox||Gt.verticalTextBox){let sr=!0;if(te){const cn=this.variableOffsets[He];cn?(Kt=mt(cn.anchor,cn.width,cn.height,cn.textOffset,cn.textBoxScale),le&&Kt._rotate(de?this.transform.angle:-this.transform.angle)):sr=!1}Gt.textBox&&In(u.textCollisionBox.collisionVertexArray,ct.text.placed,!sr||Ot,Kt.x,Kt.y),Gt.verticalTextBox&&In(u.textCollisionBox.collisionVertexArray,ct.text.placed,!sr||Zt,Kt.x,Kt.y)}const bn=!!(!Zt&&Gt.verticalIconBox);Gt.iconBox&&In(u.iconCollisionBox.collisionVertexArray,ct.icon.placed,bn,Se?Kt.x:0,Se?Kt.y:0),Gt.verticalIconBox&&In(u.iconCollisionBox.collisionVertexArray,ct.icon.placed,!bn,Se?Kt.x:0,Se?Kt.y:0)}}}if(u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.text.opacityVertexArray.length!==u.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${u.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${u.text.layoutVertexArray.length}) / 4`);if(u.icon.opacityVertexArray.length!==u.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${u.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${u.icon.layoutVertexArray.length}) / 4`);if(u.bucketInstanceId in this.collisionCircleArrays){const Be=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=Be.invProjMatrix,u.placementViewportMatrix=Be.viewportMatrix,u.collisionCircleArray=Be.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,y){const A=this.zoomAtLastRecencyCheck===y?1-this.zoomAdjustment(y):1;return this.zoomAtLastRecencyCheck=y,this.commitTime+this.fadeDuration*A>u}setStale(){this.stale=!0}}function In(R,u,y,A,P){R.emplaceBack(u?1:0,y?1:0,A||0,P||0),R.emplaceBack(u?1:0,y?1:0,A||0,P||0),R.emplaceBack(u?1:0,y?1:0,A||0,P||0),R.emplaceBack(u?1:0,y?1:0,A||0,P||0)}const ir=Math.pow(2,25),lr=Math.pow(2,24),Tn=Math.pow(2,17),cr=Math.pow(2,16),hr=Math.pow(2,9),$r=Math.pow(2,8),li=Math.pow(2,1);function Pi(R){if(R.opacity===0&&!R.placed)return 0;if(R.opacity===1&&R.placed)return 4294967295;const u=R.placed?1:0,y=Math.floor(127*R.opacity);return y*ir+u*lr+y*Tn+u*cr+y*hr+u*$r+y*li+u}const Vr=0;class qn{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&!u.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(u,y,A,P,L){const H=this._bucketParts;for(;this._currentTileIndex<u.length;)if(y.getBucketParts(H,P,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,L())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,H.sort((q,K)=>q.sortKey-K.sortKey));this._currentPartIndex<H.length;)if(y.placeLayerBucketPart(H[this._currentPartIndex],this._seenCrossTileIDs,A),this._currentPartIndex++,L())return!0;return!1}}class Rn{constructor(u,y,A,P,L,H,q,K){this.placement=new gn(u,y,H,q,K),this._currentPlacementIndex=A.length-1,this._forceFullPlacement=P,this._showCollisionBoxes=L,this._done=!1}isDone(){return this._done}continuePlacement(u,y,A){const P=p.now(),L=()=>!this._forceFullPlacement&&p.now()-P>2;for(;this._currentPlacementIndex>=0;){const H=y[u[this._currentPlacementIndex]],q=this.placement.collisionIndex.transform.zoom;if(H.type==="symbol"&&(!H.minzoom||H.minzoom<=q)&&(!H.maxzoom||H.maxzoom>q)){if(this._inProgressLayer||(this._inProgressLayer=new qn(H)),this._inProgressLayer.continuePlacement(A[H.source],this.placement,this._showCollisionBoxes,H,L))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const Io=512/a.W/2;class Yn{constructor(u,y,A){this.tileID=u,this.bucketInstanceId=A,this._symbolsByKey={};const P=new Map;for(let L=0;L<y.length;L++){const H=y.get(L),q=H.key,K=P.get(q);K?K.push(H):P.set(q,[H])}for(const[L,H]of P){const q={positions:H.map(K=>({x:Math.floor(K.anchorX*Io),y:Math.floor(K.anchorY*Io)})),crossTileIDs:H.map(K=>K.crossTileID)};if(q.positions.length>128){const K=new a.au(q.positions.length,16,Uint16Array);for(const{x:te,y:le}of q.positions)K.add(te,le);K.finish(),delete q.positions,q.index=K}this._symbolsByKey[L]=q}}getScaledCoordinates(u,y){const{x:A,y:P,z:L}=this.tileID.canonical,{x:H,y:q,z:K}=y.canonical,te=Io/Math.pow(2,K-L),le=(q*a.W+u.anchorY)*te,de=P*a.W*Io;return{x:Math.floor((H*a.W+u.anchorX)*te-A*a.W*Io),y:Math.floor(le-de)}}findMatches(u,y,A){const P=this.tileID.canonical.z<y.canonical.z?1:Math.pow(2,this.tileID.canonical.z-y.canonical.z);for(let L=0;L<u.length;L++){const H=u.get(L);if(H.crossTileID)continue;const q=this._symbolsByKey[H.key];if(!q)continue;const K=this.getScaledCoordinates(H,y);if(q.index){const te=q.index.range(K.x-P,K.y-P,K.x+P,K.y+P).sort();for(const le of te){const de=q.crossTileIDs[le];if(!A[de]){A[de]=!0,H.crossTileID=de;break}}}else if(q.positions)for(let te=0;te<q.positions.length;te++){const le=q.positions[te],de=q.crossTileIDs[te];if(Math.abs(le.x-K.x)<=P&&Math.abs(le.y-K.y)<=P&&!A[de]){A[de]=!0,H.crossTileID=de;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:u})=>u)}}class Ii{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class gs{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const y=Math.round((u-this.lng)/360);if(y!==0)for(const A in this.indexes){const P=this.indexes[A],L={};for(const H in P){const q=P[H];q.tileID=q.tileID.unwrapTo(q.tileID.wrap+y),L[q.tileID.key]=q}this.indexes[A]=L}this.lng=u}addBucket(u,y,A){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===y.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let L=0;L<y.symbolInstances.length;L++)y.symbolInstances.get(L).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});const P=this.usedCrossTileIDs[u.overscaledZ];for(const L in this.indexes){const H=this.indexes[L];if(Number(L)>u.overscaledZ)for(const q in H){const K=H[q];K.tileID.isChildOf(u)&&K.findMatches(y.symbolInstances,u,P)}else{const q=H[u.scaledTo(Number(L)).key];q&&q.findMatches(y.symbolInstances,u,P)}}for(let L=0;L<y.symbolInstances.length;L++){const H=y.symbolInstances.get(L);H.crossTileID||(H.crossTileID=A.generate(),P[H.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new Yn(u,y.symbolInstances,y.bucketInstanceId),!0}removeBucketCrossTileIDs(u,y){for(const A of y.getCrossTileIDsLists())for(const P of A)delete this.usedCrossTileIDs[u][P]}removeStaleBuckets(u){let y=!1;for(const A in this.indexes){const P=this.indexes[A];for(const L in P)u[P[L].bucketInstanceId]||(this.removeBucketCrossTileIDs(A,P[L]),delete P[L],y=!0)}return y}}class Wr{constructor(){this.layerIndexes={},this.crossTileIDs=new Ii,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,y,A){let P=this.layerIndexes[u.id];P===void 0&&(P=this.layerIndexes[u.id]=new gs);let L=!1;const H={};P.handleWrapJump(A);for(const q of y){const K=q.getBucket(u);K&&u.id===K.layerIds[0]&&(K.bucketInstanceId||(K.bucketInstanceId=++this.maxBucketInstanceId),P.addBucket(q.tileID,K,this.crossTileIDs)&&(L=!0),H[K.bucketInstanceId]=!0)}return P.removeStaleBuckets(H)&&(L=!0),L}pruneUnusedLayers(u){const y={};u.forEach(A=>{y[A]=!0});for(const A in this.layerIndexes)y[A]||delete this.layerIndexes[A]}}const Ui=(R,u)=>a.t(R,u&&u.filter(y=>y.identifier!=="source.canvas")),ei=a.av();class pa extends a.E{constructor(u,y={}){super(),this._rtlPluginLoaded=()=>{for(const A in this.sourceCaches){const P=this.sourceCaches[A].getSource().type;P!=="vector"&&P!=="geojson"||this.sourceCaches[A].reload()}},this.map=u,this.dispatcher=new Fe(Lt(),u._getMapId()),this.dispatcher.registerMessageHandler("getGlyphs",(A,P)=>this.getGlyphs(A,P)),this.dispatcher.registerMessageHandler("getImages",(A,P)=>this.getImages(A,P)),this.imageManager=new re,this.imageManager.setEventedParent(this),this.glyphManager=new ie(u._requestManager,y.localIdeographFontFamily),this.lineAtlas=new Ge(256,512),this.crossTileSymbolIndex=new Wr,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.aw,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.ax()),Yt().on(Mn,this._rtlPluginLoaded),this.on("data",A=>{if(A.dataType!=="source"||A.sourceDataType!=="metadata")return;const P=this.sourceCaches[A.sourceId];if(!P)return;const L=P.getSource();if(L&&L.vectorLayerIds)for(const H in this._layers){const q=this._layers[H];q.source===L.id&&this._validateLayer(q)}})}loadURL(u,y={},A){this.fire(new a.k("dataloading",{dataType:"style"})),y.validate=typeof y.validate!="boolean"||y.validate;const P=this.map._requestManager.transformRequest(u,k.Style);this._loadStyleRequest=new AbortController,a.h(P,this._loadStyleRequest).then(L=>{this._loadStyleRequest=null,this._load(L.data,y,A)}).catch(L=>{this._loadStyleRequest=null,L&&this.fire(new a.j(L))})}loadJSON(u,y={},A){this.fire(new a.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,p.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,y.validate=y.validate!==!1,this._load(u,y,A)}).catch(()=>{})}loadEmpty(){this.fire(new a.k("dataloading",{dataType:"style"})),this._load(ei,{validate:!1})}_load(u,y,A){var P;const L=y.transformStyle?y.transformStyle(A,u):u;if(!y.validate||!Ui(this,a.x(L))){this._loaded=!0,this.stylesheet=L;for(const H in L.sources)this.addSource(H,L.sources[H],{validate:!1});L.sprite?this._loadSprite(L.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(L.glyphs),this._createLayers(),this.light=new Ne(this.stylesheet.light),this.map.setTerrain((P=this.stylesheet.terrain)!==null&&P!==void 0?P:null),this.fire(new a.k("data",{dataType:"style"})),this.fire(new a.k("style.load"))}}_createLayers(){const u=a.ay(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",u),this._order=u.map(y=>y.id),this._layers={},this._serializedLayers=null;for(const y of u){const A=a.az(y);A.setEventedParent(this,{layer:{id:y.id}}),this._layers[y.id]=A}}_loadSprite(u,y=!1,A=void 0){let P;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(L,H,q,K){return a._(this,void 0,void 0,function*(){const te=X(L),le=q>1?"@2x":"",de={},Se={};for(const{id:ze,url:De}of te){const Be=H.transformRequest(H.normalizeSpriteURL(De,le,".json"),k.SpriteJSON);de[ze]=a.h(Be,K);const ke=H.transformRequest(H.normalizeSpriteURL(De,le,".png"),k.SpriteImage);Se[ze]=C.getImage(ke,K)}return yield Promise.all([...Object.values(de),...Object.values(Se)]),function(ze,De){return a._(this,void 0,void 0,function*(){const Be={};for(const ke in ze){Be[ke]={};const Le=p.getImageCanvasContext((yield De[ke]).data),Et=(yield ze[ke]).data;for(const He in Et){const{width:ct,height:Pt,x:Ct,y:Ot,sdf:Zt,pixelRatio:Gt,stretchX:Kt,stretchY:bn,content:sr}=Et[He];Be[ke][He]={data:null,pixelRatio:Gt,sdf:Zt,stretchX:Kt,stretchY:bn,content:sr,spriteData:{width:ct,height:Pt,x:Ct,y:Ot,context:Le}}}}return Be})}(de,Se)})}(u,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(L=>{if(this._spriteRequest=null,L)for(const H in L){this._spritesImagesIds[H]=[];const q=this._spritesImagesIds[H]?this._spritesImagesIds[H].filter(K=>!(K in L)):[];for(const K of q)this.imageManager.removeImage(K),this._changedImages[K]=!0;for(const K in L[H]){const te=H==="default"?K:`${H}:${K}`;this._spritesImagesIds[H].push(te),te in this.imageManager.images?this.imageManager.updateImage(te,L[H][K],!1):this.imageManager.addImage(te,L[H][K]),y&&(this._changedImages[te]=!0)}}}).catch(L=>{this._spriteRequest=null,P=L,this.fire(new a.j(P))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),y&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"})),A&&A(P)})}_unloadSprite(){for(const u of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(u),this._changedImages[u]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}_validateLayer(u){const y=this.sourceCaches[u.source];if(!y)return;const A=u.sourceLayer;if(!A)return;const P=y.getSource();(P.type==="geojson"||P.vectorLayerIds&&P.vectorLayerIds.indexOf(A)===-1)&&this.fire(new a.j(new Error(`Source layer "${A}" does not exist on source "${P.id}" as specified by style layer "${u.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this.sourceCaches)if(!this.sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(u){const y=this._serializedAllLayers();if(!u||u.length===0)return Object.values(y);const A=[];for(const P of u)y[P]&&A.push(y[P]);return A}_serializedAllLayers(){let u=this._serializedLayers;if(u)return u;u=this._serializedLayers={};const y=Object.keys(this._layers);for(const A of y){const P=this._layers[A];P.type!=="custom"&&(u[A]=P.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const u in this.sourceCaches)if(this.sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(u){if(!this._loaded)return;const y=this._changed;if(this._changed){const P=Object.keys(this._updatedLayers),L=Object.keys(this._removedLayers);(P.length||L.length)&&this._updateWorkerLayers(P,L);for(const H in this._updatedSources){const q=this._updatedSources[H];if(q==="reload")this._reloadSource(H);else{if(q!=="clear")throw new Error(`Invalid action ${q}`);this._clearSource(H)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const H in this._updatedPaintProps)this._layers[H].updateTransitions(u);this.light.updateTransitions(u),this._resetUpdates()}const A={};for(const P in this.sourceCaches){const L=this.sourceCaches[P];A[P]=L.used,L.used=!1}for(const P of this._order){const L=this._layers[P];L.recalculate(u,this._availableImages),!L.isHidden(u.zoom)&&L.source&&(this.sourceCaches[L.source].used=!0)}for(const P in A){const L=this.sourceCaches[P];A[P]!==L.used&&L.fire(new a.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:P}))}this.light.recalculate(u),this.z=u.zoom,y&&this.fire(new a.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const y in this.sourceCaches)this.sourceCaches[y].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(u,y){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(u),removedIds:y})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(u,y={}){var A;this._checkLoaded();const P=this.serialize();if(u=y.transformStyle?y.transformStyle(P,u):u,((A=y.validate)===null||A===void 0||A)&&Ui(this,a.x(u)))return!1;(u=a.aA(u)).layers=a.ay(u.layers);const L=a.aB(P,u),H=this._getOperationsToPerform(L);if(H.unimplemented.length>0)throw new Error(`Unimplemented: ${H.unimplemented.join(", ")}.`);if(H.operations.length===0)return!1;for(const q of H.operations)q();return this.stylesheet=u,this._serializedLayers=null,!0}_getOperationsToPerform(u){const y=[],A=[];for(const P of u)switch(P.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":y.push(()=>this.addLayer.apply(this,P.args));break;case"removeLayer":y.push(()=>this.removeLayer.apply(this,P.args));break;case"setPaintProperty":y.push(()=>this.setPaintProperty.apply(this,P.args));break;case"setLayoutProperty":y.push(()=>this.setLayoutProperty.apply(this,P.args));break;case"setFilter":y.push(()=>this.setFilter.apply(this,P.args));break;case"addSource":y.push(()=>this.addSource.apply(this,P.args));break;case"removeSource":y.push(()=>this.removeSource.apply(this,P.args));break;case"setLayerZoomRange":y.push(()=>this.setLayerZoomRange.apply(this,P.args));break;case"setLight":y.push(()=>this.setLight.apply(this,P.args));break;case"setGeoJSONSourceData":y.push(()=>this.setGeoJSONSourceData.apply(this,P.args));break;case"setGlyphs":y.push(()=>this.setGlyphs.apply(this,P.args));break;case"setSprite":y.push(()=>this.setSprite.apply(this,P.args));break;case"setTerrain":y.push(()=>this.map.setTerrain.apply(this,P.args));break;case"setTransition":y.push(()=>{});break;default:A.push(P.command)}return{operations:y,unimplemented:A}}addImage(u,y){if(this.getImage(u))return this.fire(new a.j(new Error(`An image named "${u}" already exists.`)));this.imageManager.addImage(u,y),this._afterImageUpdated(u)}updateImage(u,y){this.imageManager.updateImage(u,y)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){if(!this.getImage(u))return this.fire(new a.j(new Error(`An image named "${u}" does not exist.`)));this.imageManager.removeImage(u),this._afterImageUpdated(u)}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(u,y,A={}){if(this._checkLoaded(),this.sourceCaches[u]!==void 0)throw new Error(`Source "${u}" already exists.`);if(!y.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(y).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(y.type)>=0&&this._validate(a.x.source,`sources.${u}`,y,null,A))return;this.map&&this.map._collectResourceTiming&&(y.collectResourceTiming=!0);const P=this.sourceCaches[u]=new St(u,y,this.dispatcher);P.style=this,P.setEventedParent(this,()=>({isSourceLoaded:P.loaded(),source:P.serialize(),sourceId:u})),P.onAdd(this.map),this._changed=!0}removeSource(u){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error("There is no source with this ID");for(const A in this._layers)if(this._layers[A].source===u)return this.fire(new a.j(new Error(`Source "${u}" cannot be removed while layer "${A}" is using it.`)));const y=this.sourceCaches[u];delete this.sourceCaches[u],delete this._updatedSources[u],y.fire(new a.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),y.setEventedParent(null),y.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(u,y){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error(`There is no source with this ID=${u}`);const A=this.sourceCaches[u].getSource();if(A.type!=="geojson")throw new Error(`geojsonSource.type is ${A.type}, which is !== 'geojson`);A.setData(y),this._changed=!0}getSource(u){return this.sourceCaches[u]&&this.sourceCaches[u].getSource()}addLayer(u,y,A={}){this._checkLoaded();const P=u.id;if(this.getLayer(P))return void this.fire(new a.j(new Error(`Layer "${P}" already exists on this map.`)));let L;if(u.type==="custom"){if(Ui(this,a.aC(u)))return;L=a.az(u)}else{if("source"in u&&typeof u.source=="object"&&(this.addSource(P,u.source),u=a.aA(u),u=a.e(u,{source:P})),this._validate(a.x.layer,`layers.${P}`,u,{arrayIndex:-1},A))return;L=a.az(u),this._validateLayer(L),L.setEventedParent(this,{layer:{id:P}})}const H=y?this._order.indexOf(y):this._order.length;if(y&&H===-1)this.fire(new a.j(new Error(`Cannot add layer "${P}" before non-existing layer "${y}".`)));else{if(this._order.splice(H,0,P),this._layerOrderChanged=!0,this._layers[P]=L,this._removedLayers[P]&&L.source&&L.type!=="custom"){const q=this._removedLayers[P];delete this._removedLayers[P],q.type!==L.type?this._updatedSources[L.source]="clear":(this._updatedSources[L.source]="reload",this.sourceCaches[L.source].pause())}this._updateLayer(L),L.onAdd&&L.onAdd(this.map)}}moveLayer(u,y){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new a.j(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===y)return;const A=this._order.indexOf(u);this._order.splice(A,1);const P=y?this._order.indexOf(y):this._order.length;y&&P===-1?this.fire(new a.j(new Error(`Cannot move layer "${u}" before non-existing layer "${y}".`))):(this._order.splice(P,0,u),this._layerOrderChanged=!0)}removeLayer(u){this._checkLoaded();const y=this._layers[u];if(!y)return void this.fire(new a.j(new Error(`Cannot remove non-existing layer "${u}".`)));y.setEventedParent(null);const A=this._order.indexOf(u);this._order.splice(A,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=y,delete this._layers[u],this._serializedLayers&&delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],y.onRemove&&y.onRemove(this.map)}getLayer(u){return this._layers[u]}getLayersOrder(){return[...this._order]}hasLayer(u){return u in this._layers}setLayerZoomRange(u,y,A){this._checkLoaded();const P=this.getLayer(u);P?P.minzoom===y&&P.maxzoom===A||(y!=null&&(P.minzoom=y),A!=null&&(P.maxzoom=A),this._updateLayer(P)):this.fire(new a.j(new Error(`Cannot set the zoom range of non-existing layer "${u}".`)))}setFilter(u,y,A={}){this._checkLoaded();const P=this.getLayer(u);if(P){if(!a.aD(P.filter,y))return y==null?(P.filter=void 0,void this._updateLayer(P)):void(this._validate(a.x.filter,`layers.${P.id}.filter`,y,null,A)||(P.filter=a.aA(y),this._updateLayer(P)))}else this.fire(new a.j(new Error(`Cannot filter non-existing layer "${u}".`)))}getFilter(u){return a.aA(this.getLayer(u).filter)}setLayoutProperty(u,y,A,P={}){this._checkLoaded();const L=this.getLayer(u);L?a.aD(L.getLayoutProperty(y),A)||(L.setLayoutProperty(y,A,P),this._updateLayer(L)):this.fire(new a.j(new Error(`Cannot style non-existing layer "${u}".`)))}getLayoutProperty(u,y){const A=this.getLayer(u);if(A)return A.getLayoutProperty(y);this.fire(new a.j(new Error(`Cannot get style of non-existing layer "${u}".`)))}setPaintProperty(u,y,A,P={}){this._checkLoaded();const L=this.getLayer(u);L?a.aD(L.getPaintProperty(y),A)||(L.setPaintProperty(y,A,P)&&this._updateLayer(L),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new a.j(new Error(`Cannot style non-existing layer "${u}".`)))}getPaintProperty(u,y){return this.getLayer(u).getPaintProperty(y)}setFeatureState(u,y){this._checkLoaded();const A=u.source,P=u.sourceLayer,L=this.sourceCaches[A];if(L===void 0)return void this.fire(new a.j(new Error(`The source '${A}' does not exist in the map's style.`)));const H=L.getSource().type;H==="geojson"&&P?this.fire(new a.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):H!=="vector"||P?(u.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),L.setFeatureState(P,u.id,y)):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(u,y){this._checkLoaded();const A=u.source,P=this.sourceCaches[A];if(P===void 0)return void this.fire(new a.j(new Error(`The source '${A}' does not exist in the map's style.`)));const L=P.getSource().type,H=L==="vector"?u.sourceLayer:void 0;L!=="vector"||H?y&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new a.j(new Error("A feature id is required to remove its specific state property."))):P.removeFeatureState(H,u.id,y):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(u){this._checkLoaded();const y=u.source,A=u.sourceLayer,P=this.sourceCaches[y];if(P!==void 0)return P.getSource().type!=="vector"||A?(u.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),P.getFeatureState(A,u.id)):void this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.j(new Error(`The source '${y}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const u=a.aE(this.sourceCaches,L=>L.serialize()),y=this._serializeByIds(this._order),A=this.map.getTerrain()||void 0,P=this.stylesheet;return a.aF({version:P.version,name:P.name,metadata:P.metadata,light:P.light,center:P.center,zoom:P.zoom,bearing:P.bearing,pitch:P.pitch,sprite:P.sprite,glyphs:P.glyphs,transition:P.transition,sources:u,layers:y,terrain:A},L=>L!==void 0)}_updateLayer(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.sourceCaches[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.sourceCaches[u.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(u){const y=H=>this._layers[H].type==="fill-extrusion",A={},P=[];for(let H=this._order.length-1;H>=0;H--){const q=this._order[H];if(y(q)){A[q]=H;for(const K of u){const te=K[q];if(te)for(const le of te)P.push(le)}}}P.sort((H,q)=>q.intersectionZ-H.intersectionZ);const L=[];for(let H=this._order.length-1;H>=0;H--){const q=this._order[H];if(y(q))for(let K=P.length-1;K>=0;K--){const te=P[K].feature;if(A[te.layer.id]<H)break;L.push(te),P.pop()}else for(const K of u){const te=K[q];if(te)for(const le of te)L.push(le.feature)}}return L}queryRenderedFeatures(u,y,A){y&&y.filter&&this._validate(a.x.filter,"queryRenderedFeatures.filter",y.filter,null,y);const P={};if(y&&y.layers){if(!Array.isArray(y.layers))return this.fire(new a.j(new Error("parameters.layers must be an Array."))),[];for(const q of y.layers){const K=this._layers[q];if(!K)return this.fire(new a.j(new Error(`The layer '${q}' does not exist in the map's style and cannot be queried for features.`))),[];P[K.source]=!0}}const L=[];y.availableImages=this._availableImages;const H=this._serializedAllLayers();for(const q in this.sourceCaches)y.layers&&!P[q]||L.push(ge(this.sourceCaches[q],this._layers,H,u,y,A));return this.placement&&L.push(function(q,K,te,le,de,Se,ze){const De={},Be=Se.queryRenderedSymbols(le),ke=[];for(const Le of Object.keys(Be).map(Number))ke.push(ze[Le]);ke.sort(tt);for(const Le of ke){const Et=Le.featureIndex.lookupSymbolFeatures(Be[Le.bucketInstanceId],K,Le.bucketIndex,Le.sourceLayerIndex,de.filter,de.layers,de.availableImages,q);for(const He in Et){const ct=De[He]=De[He]||[],Pt=Et[He];Pt.sort((Ct,Ot)=>{const Zt=Le.featureSortOrder;if(Zt){const Gt=Zt.indexOf(Ct.featureIndex);return Zt.indexOf(Ot.featureIndex)-Gt}return Ot.featureIndex-Ct.featureIndex});for(const Ct of Pt)ct.push(Ct)}}for(const Le in De)De[Le].forEach(Et=>{const He=Et.feature,ct=te[q[Le].source].getFeatureState(He.layer["source-layer"],He.id);He.source=He.layer.source,He.layer["source-layer"]&&(He.sourceLayer=He.layer["source-layer"]),He.state=ct});return De}(this._layers,H,this.sourceCaches,u,y,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(L)}querySourceFeatures(u,y){y&&y.filter&&this._validate(a.x.filter,"querySourceFeatures.filter",y.filter,null,y);const A=this.sourceCaches[u];return A?function(P,L){const H=P.getRenderableIds().map(te=>P.getTileByID(te)),q=[],K={};for(let te=0;te<H.length;te++){const le=H[te],de=le.tileID.canonical.key;K[de]||(K[de]=!0,le.querySourceFeatures(q,L))}return q}(A,y):[]}getLight(){return this.light.getLight()}setLight(u,y={}){this._checkLoaded();const A=this.light.getLight();let P=!1;for(const H in u)if(!a.aD(u[H],A[H])){P=!0;break}if(!P)return;const L={now:p.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,y),this.light.updateTransitions(L)}_validate(u,y,A,P,L={}){return(!L||L.validate!==!1)&&Ui(this,u.call(a.x,a.e({key:y,style:this.serialize(),value:A,styleSpec:a.v},P)))}_remove(u=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Yt().off(Mn,this._rtlPluginLoaded);for(const y in this._layers)this._layers[y].setEventedParent(null);for(const y in this.sourceCaches){const A=this.sourceCaches[y];A.setEventedParent(null),A.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),u&&this.dispatcher.broadcast("removeMap",void 0),this.dispatcher.remove(u)}_clearSource(u){this.sourceCaches[u].clearTiles()}_reloadSource(u){this.sourceCaches[u].resume(),this.sourceCaches[u].reload()}_updateSources(u){for(const y in this.sourceCaches)this.sourceCaches[y].update(u,this.map.terrain)}_generateCollisionBoxes(){for(const u in this.sourceCaches)this._reloadSource(u)}_updatePlacement(u,y,A,P,L=!1){let H=!1,q=!1;const K={};for(const te of this._order){const le=this._layers[te];if(le.type!=="symbol")continue;if(!K[le.source]){const Se=this.sourceCaches[le.source];K[le.source]=Se.getRenderableIds(!0).map(ze=>Se.getTileByID(ze)).sort((ze,De)=>De.tileID.overscaledZ-ze.tileID.overscaledZ||(ze.tileID.isLessThan(De.tileID)?-1:1))}const de=this.crossTileSymbolIndex.addLayer(le,K[le.source],u.center.lng);H=H||de}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((L=L||this._layerOrderChanged||A===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(p.now(),u.zoom))&&(this.pauseablePlacement=new Rn(u,this.map.terrain,this._order,L,y,A,P,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,K),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(p.now()),q=!0),H&&this.pauseablePlacement.placement.setStale()),q||H)for(const te of this._order){const le=this._layers[te];le.type==="symbol"&&this.placement.updateLayerOpacities(le,K[le.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(p.now())}_releaseSymbolFadeTiles(){for(const u in this.sourceCaches)this.sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,y){return a._(this,void 0,void 0,function*(){const A=yield this.imageManager.getImages(y.icons);this._updateTilesForChangedImages();const P=this.sourceCaches[y.source];return P&&P.setDependencies(y.tileID.key,y.type,y.icons),A})}getGlyphs(u,y){return a._(this,void 0,void 0,function*(){const A=yield this.glyphManager.getGlyphs(y.stacks),P=this.sourceCaches[y.source];return P&&P.setDependencies(y.tileID.key,y.type,[""]),A})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(u,y={}){this._checkLoaded(),u&&this._validate(a.x.glyphs,"glyphs",u,null,y)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=u,this.glyphManager.entries={},this.glyphManager.setURL(u))}addSprite(u,y,A={},P){this._checkLoaded();const L=[{id:u,url:y}],H=[...X(this.stylesheet.sprite),...L];this._validate(a.x.sprite,"sprite",H,null,A)||(this.stylesheet.sprite=H,this._loadSprite(L,!0,P))}removeSprite(u){this._checkLoaded();const y=X(this.stylesheet.sprite);if(y.find(A=>A.id===u)){if(this._spritesImagesIds[u])for(const A of this._spritesImagesIds[u])this.imageManager.removeImage(A),this._changedImages[A]=!0;y.splice(y.findIndex(A=>A.id===u),1),this.stylesheet.sprite=y.length>0?y:void 0,delete this._spritesImagesIds[u],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}else this.fire(new a.j(new Error(`Sprite "${u}" doesn't exists on this map.`)))}getSprite(){return X(this.stylesheet.sprite)}setSprite(u,y={},A){this._checkLoaded(),u&&this._validate(a.x.sprite,"sprite",u,null,y)||(this.stylesheet.sprite=u,u?this._loadSprite(u,!0,A):(this._unloadSprite(),A&&A(null)))}}var Is=a.X([{name:"a_pos",type:"Int16",components:2}]),ko="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const bl={prelude:vr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:vr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:vr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:vr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:vr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:vr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:vr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:vr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:vr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:vr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:vr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:vr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:vr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:vr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:vr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:vr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:vr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:vr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:vr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:vr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:vr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:vr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:vr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:vr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:vr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:vr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:vr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ko),terrainDepth:vr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ko),terrainCoords:vr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ko)};function vr(R,u){const y=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,A=u.match(/attribute ([\w]+) ([\w]+)/g),P=R.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),L=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),H=L?L.concat(P):P,q={};return{fragmentSource:R=R.replace(y,(K,te,le,de,Se)=>(q[Se]=!0,te==="define"?`
#ifndef HAS_UNIFORM_u_${Se}
varying ${le} ${de} ${Se};
#else
uniform ${le} ${de} u_${Se};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Se}
    ${le} ${de} ${Se} = u_${Se};
#endif
`)),vertexSource:u=u.replace(y,(K,te,le,de,Se)=>{const ze=de==="float"?"vec2":"vec4",De=Se.match(/color/)?"color":ze;return q[Se]?te==="define"?`
#ifndef HAS_UNIFORM_u_${Se}
uniform lowp float u_${Se}_t;
attribute ${le} ${ze} a_${Se};
varying ${le} ${de} ${Se};
#else
uniform ${le} ${de} u_${Se};
#endif
`:De==="vec4"?`
#ifndef HAS_UNIFORM_u_${Se}
    ${Se} = a_${Se};
#else
    ${le} ${de} ${Se} = u_${Se};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Se}
    ${Se} = unpack_mix_${De}(a_${Se}, u_${Se}_t);
#else
    ${le} ${de} ${Se} = u_${Se};
#endif
`:te==="define"?`
#ifndef HAS_UNIFORM_u_${Se}
uniform lowp float u_${Se}_t;
attribute ${le} ${ze} a_${Se};
#else
uniform ${le} ${de} u_${Se};
#endif
`:De==="vec4"?`
#ifndef HAS_UNIFORM_u_${Se}
    ${le} ${de} ${Se} = a_${Se};
#else
    ${le} ${de} ${Se} = u_${Se};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Se}
    ${le} ${de} ${Se} = unpack_mix_${De}(a_${Se}, u_${Se}_t);
#else
    ${le} ${de} ${Se} = u_${Se};
#endif
`}),staticAttributes:A,staticUniforms:H}}class Pd{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(u,y,A,P,L,H,q,K,te){this.context=u;let le=this.boundPaintVertexBuffers.length!==P.length;for(let de=0;!le&&de<P.length;de++)this.boundPaintVertexBuffers[de]!==P[de]&&(le=!0);!this.vao||this.boundProgram!==y||this.boundLayoutVertexBuffer!==A||le||this.boundIndexBuffer!==L||this.boundVertexOffset!==H||this.boundDynamicVertexBuffer!==q||this.boundDynamicVertexBuffer2!==K||this.boundDynamicVertexBuffer3!==te?this.freshBind(y,A,P,L,H,q,K,te):(u.bindVertexArray.set(this.vao),q&&q.bind(),L&&L.dynamicDraw&&L.bind(),K&&K.bind(),te&&te.bind())}freshBind(u,y,A,P,L,H,q,K){const te=u.numAttributes,le=this.context,de=le.gl;this.vao&&this.destroy(),this.vao=le.createVertexArray(),le.bindVertexArray.set(this.vao),this.boundProgram=u,this.boundLayoutVertexBuffer=y,this.boundPaintVertexBuffers=A,this.boundIndexBuffer=P,this.boundVertexOffset=L,this.boundDynamicVertexBuffer=H,this.boundDynamicVertexBuffer2=q,this.boundDynamicVertexBuffer3=K,y.enableAttributes(de,u);for(const Se of A)Se.enableAttributes(de,u);H&&H.enableAttributes(de,u),q&&q.enableAttributes(de,u),K&&K.enableAttributes(de,u),y.bind(),y.setVertexAttribPointers(de,u,L);for(const Se of A)Se.bind(),Se.setVertexAttribPointers(de,u,L);H&&(H.bind(),H.setVertexAttribPointers(de,u,L)),P&&P.bind(),q&&(q.bind(),q.setVertexAttribPointers(de,u,L)),K&&(K.bind(),K.setVertexAttribPointers(de,u,L)),le.currentNumAttributes=te}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Zl(R){const u=[];for(let y=0;y<R.length;y++){if(R[y]===null)continue;const A=R[y].split(" ");u.push(A.pop())}return u}class zy{constructor(u,y,A,P,L,H){const q=u.gl;this.program=q.createProgram();const K=Zl(y.staticAttributes),te=A?A.getBinderAttributes():[],le=K.concat(te),de=bl.prelude.staticUniforms?Zl(bl.prelude.staticUniforms):[],Se=y.staticUniforms?Zl(y.staticUniforms):[],ze=A?A.getBinderUniforms():[],De=de.concat(Se).concat(ze),Be=[];for(const Ct of De)Be.indexOf(Ct)<0&&Be.push(Ct);const ke=A?A.defines():[];L&&ke.push("#define OVERDRAW_INSPECTOR;"),H&&ke.push("#define TERRAIN3D;");const Le=ke.concat(bl.prelude.fragmentSource,y.fragmentSource).join(`
`),Et=ke.concat(bl.prelude.vertexSource,y.vertexSource).join(`
`),He=q.createShader(q.FRAGMENT_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(He,Le),q.compileShader(He),!q.getShaderParameter(He,q.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${q.getShaderInfoLog(He)}`);q.attachShader(this.program,He);const ct=q.createShader(q.VERTEX_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(ct,Et),q.compileShader(ct),!q.getShaderParameter(ct,q.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${q.getShaderInfoLog(ct)}`);q.attachShader(this.program,ct),this.attributes={};const Pt={};this.numAttributes=le.length;for(let Ct=0;Ct<this.numAttributes;Ct++)le[Ct]&&(q.bindAttribLocation(this.program,Ct,le[Ct]),this.attributes[le[Ct]]=Ct);if(q.linkProgram(this.program),!q.getProgramParameter(this.program,q.LINK_STATUS))throw new Error(`Program failed to link: ${q.getProgramInfoLog(this.program)}`);q.deleteShader(ct),q.deleteShader(He);for(let Ct=0;Ct<Be.length;Ct++){const Ot=Be[Ct];if(Ot&&!Pt[Ot]){const Zt=q.getUniformLocation(this.program,Ot);Zt&&(Pt[Ot]=Zt)}}this.fixedUniforms=P(u,Pt),this.terrainUniforms=((Ct,Ot)=>({u_depth:new a.aG(Ct,Ot.u_depth),u_terrain:new a.aG(Ct,Ot.u_terrain),u_terrain_dim:new a.aH(Ct,Ot.u_terrain_dim),u_terrain_matrix:new a.aI(Ct,Ot.u_terrain_matrix),u_terrain_unpack:new a.aJ(Ct,Ot.u_terrain_unpack),u_terrain_exaggeration:new a.aH(Ct,Ot.u_terrain_exaggeration)}))(u,Pt),this.binderUniforms=A?A.getUniforms(u,Pt):[]}draw(u,y,A,P,L,H,q,K,te,le,de,Se,ze,De,Be,ke,Le,Et){const He=u.gl;if(this.failedToCreate)return;if(u.program.set(this.program),u.setDepthMode(A),u.setStencilMode(P),u.setColorMode(L),u.setCullFace(H),K){u.activeTexture.set(He.TEXTURE2),He.bindTexture(He.TEXTURE_2D,K.depthTexture),u.activeTexture.set(He.TEXTURE3),He.bindTexture(He.TEXTURE_2D,K.texture);for(const Pt in this.terrainUniforms)this.terrainUniforms[Pt].set(K[Pt])}for(const Pt in this.fixedUniforms)this.fixedUniforms[Pt].set(q[Pt]);Be&&Be.setUniforms(u,this.binderUniforms,ze,{zoom:De});let ct=0;switch(y){case He.LINES:ct=2;break;case He.TRIANGLES:ct=3;break;case He.LINE_STRIP:ct=1}for(const Pt of Se.get()){const Ct=Pt.vaos||(Pt.vaos={});(Ct[te]||(Ct[te]=new Pd)).bind(u,this,le,Be?Be.getPaintVertexBuffers():[],de,Pt.vertexOffset,ke,Le,Et),He.drawElements(y,Pt.primitiveLength*ct,He.UNSIGNED_SHORT,Pt.primitiveOffset*ct*2)}}}function Eu(R,u,y){const A=1/tr(y,1,u.transform.tileZoom),P=Math.pow(2,y.tileID.overscaledZ),L=y.tileSize*Math.pow(2,u.transform.tileZoom)/P,H=L*(y.tileID.canonical.x+y.tileID.wrap*P),q=L*y.tileID.canonical.y;return{u_image:0,u_texsize:y.imageAtlasTexture.size,u_scale:[A,R.fromScale,R.toScale],u_fade:R.t,u_pixel_coord_upper:[H>>16,q>>16],u_pixel_coord_lower:[65535&H,65535&q]}}const Yf=(R,u,y,A)=>{const P=u.style.light,L=P.properties.get("position"),H=[L.x,L.y,L.z],q=function(){var te=new a.A(9);return a.A!=Float32Array&&(te[1]=0,te[2]=0,te[3]=0,te[5]=0,te[6]=0,te[7]=0),te[0]=1,te[4]=1,te[8]=1,te}();P.properties.get("anchor")==="viewport"&&function(te,le){var de=Math.sin(le),Se=Math.cos(le);te[0]=Se,te[1]=de,te[2]=0,te[3]=-de,te[4]=Se,te[5]=0,te[6]=0,te[7]=0,te[8]=1}(q,-u.transform.angle),function(te,le,de){var Se=le[0],ze=le[1],De=le[2];te[0]=Se*de[0]+ze*de[3]+De*de[6],te[1]=Se*de[1]+ze*de[4]+De*de[7],te[2]=Se*de[2]+ze*de[5]+De*de[8]}(H,H,q);const K=P.properties.get("color");return{u_matrix:R,u_lightpos:H,u_lightintensity:P.properties.get("intensity"),u_lightcolor:[K.r,K.g,K.b],u_vertical_gradient:+y,u_opacity:A}},Xf=(R,u,y,A,P,L,H)=>a.e(Yf(R,u,y,A),Eu(L,u,H),{u_height_factor:-Math.pow(2,P.overscaledZ)/H.tileSize/8}),Id=R=>({u_matrix:R}),Y0=(R,u,y,A)=>a.e(Id(R),Eu(y,u,A)),X0=(R,u)=>({u_matrix:R,u_world:u}),Fy=(R,u,y,A,P)=>a.e(Y0(R,u,y,A),{u_world:P}),km=(R,u,y,A)=>{const P=R.transform;let L,H;if(A.paint.get("circle-pitch-alignment")==="map"){const q=tr(y,1,P.zoom);L=!0,H=[q,q]}else L=!1,H=P.pixelsToGLUnits;return{u_camera_to_center_distance:P.cameraToCenterDistance,u_scale_with_map:+(A.paint.get("circle-pitch-scale")==="map"),u_matrix:R.translatePosMatrix(u.posMatrix,y,A.paint.get("circle-translate"),A.paint.get("circle-translate-anchor")),u_pitch_with_map:+L,u_device_pixel_ratio:R.pixelRatio,u_extrude_scale:H}},Kf=(R,u,y)=>{const A=tr(y,1,u.zoom),P=Math.pow(2,u.zoom-y.tileID.overscaledZ),L=y.tileID.overscaleFactor();return{u_matrix:R,u_camera_to_center_distance:u.cameraToCenterDistance,u_pixels_to_tile_units:A,u_extrude_scale:[u.pixelsToGLUnits[0]/(A*P),u.pixelsToGLUnits[1]/(A*P)],u_overscale_factor:L}},Rm=(R,u,y=1)=>({u_matrix:R,u_color:u,u_overlay:0,u_overlay_scale:y}),Zf=R=>({u_matrix:R}),Hr=(R,u,y,A)=>({u_matrix:R,u_extrude_scale:tr(u,1,y),u_intensity:A});function By(R,u){const y=Math.pow(2,u.canonical.z),A=u.canonical.y;return[new a.Y(0,A/y).toLngLat().lat,new a.Y(0,(A+1)/y).toLngLat().lat]}const Fh=(R,u,y,A)=>{const P=R.transform;return{u_matrix:kd(R,u,y,A),u_ratio:1/tr(u,1,P.zoom),u_device_pixel_ratio:R.pixelRatio,u_units_to_pixels:[1/P.pixelsToGLUnits[0],1/P.pixelsToGLUnits[1]]}},Tu=(R,u,y,A,P)=>a.e(Fh(R,u,y,P),{u_image:0,u_image_height:A}),Om=(R,u,y,A,P)=>{const L=R.transform,H=ro(u,L);return{u_matrix:kd(R,u,y,P),u_texsize:u.imageAtlasTexture.size,u_ratio:1/tr(u,1,L.zoom),u_device_pixel_ratio:R.pixelRatio,u_image:0,u_scale:[H,A.fromScale,A.toScale],u_fade:A.t,u_units_to_pixels:[1/L.pixelsToGLUnits[0],1/L.pixelsToGLUnits[1]]}},ja=(R,u,y,A,P,L)=>{const H=R.lineAtlas,q=ro(u,R.transform),K=y.layout.get("line-cap")==="round",te=H.getDash(A.from,K),le=H.getDash(A.to,K),de=te.width*P.fromScale,Se=le.width*P.toScale;return a.e(Fh(R,u,y,L),{u_patternscale_a:[q/de,-te.height/2],u_patternscale_b:[q/Se,-le.height/2],u_sdfgamma:H.width/(256*Math.min(de,Se)*R.pixelRatio)/2,u_image:0,u_tex_y_a:te.y,u_tex_y_b:le.y,u_mix:P.t})};function ro(R,u){return 1/tr(R,1,u.tileZoom)}function kd(R,u,y,A){return R.translatePosMatrix(A?A.posMatrix:u.tileID.posMatrix,u,y.paint.get("line-translate"),y.paint.get("line-translate-anchor"))}const Jf=(R,u,y,A,P)=>{return{u_matrix:R,u_tl_parent:u,u_scale_parent:y,u_buffer_scale:1,u_fade_t:A.mix,u_opacity:A.opacity*P.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:P.paint.get("raster-brightness-min"),u_brightness_high:P.paint.get("raster-brightness-max"),u_saturation_factor:(H=P.paint.get("raster-saturation"),H>0?1-1/(1.001-H):-H),u_contrast_factor:(L=P.paint.get("raster-contrast"),L>0?1/(1-L):1+L),u_spin_weights:Bh(P.paint.get("raster-hue-rotate"))};var L,H};function Bh(R){R*=Math.PI/180;const u=Math.sin(R),y=Math.cos(R);return[(2*y+1)/3,(-Math.sqrt(3)*u-y+1)/3,(Math.sqrt(3)*u-y+1)/3]}const Qf=(R,u,y,A,P,L,H,q,K,te)=>{const le=P.transform;return{u_is_size_zoom_constant:+(R==="constant"||R==="source"),u_is_size_feature_constant:+(R==="constant"||R==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:le.cameraToCenterDistance,u_pitch:le.pitch/360*2*Math.PI,u_rotate_symbol:+y,u_aspect_ratio:le.width/le.height,u_fade_change:P.options.fadeDuration?P.symbolFadeChange:1,u_matrix:L,u_label_plane_matrix:H,u_coord_matrix:q,u_is_text:+K,u_pitch_with_map:+A,u_texsize:te,u_texture:0}},Ic=(R,u,y,A,P,L,H,q,K,te,le)=>{const de=P.transform;return a.e(Qf(R,u,y,A,P,L,H,q,K,te),{u_gamma_scale:A?Math.cos(de._pitch)*de.cameraToCenterDistance:1,u_device_pixel_ratio:P.pixelRatio,u_is_halo:+le})},Jl=(R,u,y,A,P,L,H,q,K,te)=>a.e(Ic(R,u,y,A,P,L,H,q,!0,K,!0),{u_texsize_icon:te,u_texture_icon:1}),H1=(R,u,y)=>({u_matrix:R,u_opacity:u,u_color:y}),K0=(R,u,y,A,P,L)=>a.e(function(H,q,K,te){const le=K.imageManager.getPattern(H.from.toString()),de=K.imageManager.getPattern(H.to.toString()),{width:Se,height:ze}=K.imageManager.getPixelSize(),De=Math.pow(2,te.tileID.overscaledZ),Be=te.tileSize*Math.pow(2,K.transform.tileZoom)/De,ke=Be*(te.tileID.canonical.x+te.tileID.wrap*De),Le=Be*te.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:le.tl,u_pattern_br_a:le.br,u_pattern_tl_b:de.tl,u_pattern_br_b:de.br,u_texsize:[Se,ze],u_mix:q.t,u_pattern_size_a:le.displaySize,u_pattern_size_b:de.displaySize,u_scale_a:q.fromScale,u_scale_b:q.toScale,u_tile_units_to_pixels:1/tr(te,1,K.transform.tileZoom),u_pixel_coord_upper:[ke>>16,Le>>16],u_pixel_coord_lower:[65535&ke,65535&Le]}}(A,L,y,P),{u_matrix:R,u_opacity:u}),Ql={fillExtrusion:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix),u_lightpos:new a.aK(R,u.u_lightpos),u_lightintensity:new a.aH(R,u.u_lightintensity),u_lightcolor:new a.aK(R,u.u_lightcolor),u_vertical_gradient:new a.aH(R,u.u_vertical_gradient),u_opacity:new a.aH(R,u.u_opacity)}),fillExtrusionPattern:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix),u_lightpos:new a.aK(R,u.u_lightpos),u_lightintensity:new a.aH(R,u.u_lightintensity),u_lightcolor:new a.aK(R,u.u_lightcolor),u_vertical_gradient:new a.aH(R,u.u_vertical_gradient),u_height_factor:new a.aH(R,u.u_height_factor),u_image:new a.aG(R,u.u_image),u_texsize:new a.aL(R,u.u_texsize),u_pixel_coord_upper:new a.aL(R,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aL(R,u.u_pixel_coord_lower),u_scale:new a.aK(R,u.u_scale),u_fade:new a.aH(R,u.u_fade),u_opacity:new a.aH(R,u.u_opacity)}),fill:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix)}),fillPattern:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix),u_image:new a.aG(R,u.u_image),u_texsize:new a.aL(R,u.u_texsize),u_pixel_coord_upper:new a.aL(R,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aL(R,u.u_pixel_coord_lower),u_scale:new a.aK(R,u.u_scale),u_fade:new a.aH(R,u.u_fade)}),fillOutline:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix),u_world:new a.aL(R,u.u_world)}),fillOutlinePattern:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix),u_world:new a.aL(R,u.u_world),u_image:new a.aG(R,u.u_image),u_texsize:new a.aL(R,u.u_texsize),u_pixel_coord_upper:new a.aL(R,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aL(R,u.u_pixel_coord_lower),u_scale:new a.aK(R,u.u_scale),u_fade:new a.aH(R,u.u_fade)}),circle:(R,u)=>({u_camera_to_center_distance:new a.aH(R,u.u_camera_to_center_distance),u_scale_with_map:new a.aG(R,u.u_scale_with_map),u_pitch_with_map:new a.aG(R,u.u_pitch_with_map),u_extrude_scale:new a.aL(R,u.u_extrude_scale),u_device_pixel_ratio:new a.aH(R,u.u_device_pixel_ratio),u_matrix:new a.aI(R,u.u_matrix)}),collisionBox:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix),u_camera_to_center_distance:new a.aH(R,u.u_camera_to_center_distance),u_pixels_to_tile_units:new a.aH(R,u.u_pixels_to_tile_units),u_extrude_scale:new a.aL(R,u.u_extrude_scale),u_overscale_factor:new a.aH(R,u.u_overscale_factor)}),collisionCircle:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix),u_inv_matrix:new a.aI(R,u.u_inv_matrix),u_camera_to_center_distance:new a.aH(R,u.u_camera_to_center_distance),u_viewport_size:new a.aL(R,u.u_viewport_size)}),debug:(R,u)=>({u_color:new a.aM(R,u.u_color),u_matrix:new a.aI(R,u.u_matrix),u_overlay:new a.aG(R,u.u_overlay),u_overlay_scale:new a.aH(R,u.u_overlay_scale)}),clippingMask:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix)}),heatmap:(R,u)=>({u_extrude_scale:new a.aH(R,u.u_extrude_scale),u_intensity:new a.aH(R,u.u_intensity),u_matrix:new a.aI(R,u.u_matrix)}),heatmapTexture:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix),u_world:new a.aL(R,u.u_world),u_image:new a.aG(R,u.u_image),u_color_ramp:new a.aG(R,u.u_color_ramp),u_opacity:new a.aH(R,u.u_opacity)}),hillshade:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix),u_image:new a.aG(R,u.u_image),u_latrange:new a.aL(R,u.u_latrange),u_light:new a.aL(R,u.u_light),u_shadow:new a.aM(R,u.u_shadow),u_highlight:new a.aM(R,u.u_highlight),u_accent:new a.aM(R,u.u_accent)}),hillshadePrepare:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix),u_image:new a.aG(R,u.u_image),u_dimension:new a.aL(R,u.u_dimension),u_zoom:new a.aH(R,u.u_zoom),u_unpack:new a.aJ(R,u.u_unpack)}),line:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix),u_ratio:new a.aH(R,u.u_ratio),u_device_pixel_ratio:new a.aH(R,u.u_device_pixel_ratio),u_units_to_pixels:new a.aL(R,u.u_units_to_pixels)}),lineGradient:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix),u_ratio:new a.aH(R,u.u_ratio),u_device_pixel_ratio:new a.aH(R,u.u_device_pixel_ratio),u_units_to_pixels:new a.aL(R,u.u_units_to_pixels),u_image:new a.aG(R,u.u_image),u_image_height:new a.aH(R,u.u_image_height)}),linePattern:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix),u_texsize:new a.aL(R,u.u_texsize),u_ratio:new a.aH(R,u.u_ratio),u_device_pixel_ratio:new a.aH(R,u.u_device_pixel_ratio),u_image:new a.aG(R,u.u_image),u_units_to_pixels:new a.aL(R,u.u_units_to_pixels),u_scale:new a.aK(R,u.u_scale),u_fade:new a.aH(R,u.u_fade)}),lineSDF:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix),u_ratio:new a.aH(R,u.u_ratio),u_device_pixel_ratio:new a.aH(R,u.u_device_pixel_ratio),u_units_to_pixels:new a.aL(R,u.u_units_to_pixels),u_patternscale_a:new a.aL(R,u.u_patternscale_a),u_patternscale_b:new a.aL(R,u.u_patternscale_b),u_sdfgamma:new a.aH(R,u.u_sdfgamma),u_image:new a.aG(R,u.u_image),u_tex_y_a:new a.aH(R,u.u_tex_y_a),u_tex_y_b:new a.aH(R,u.u_tex_y_b),u_mix:new a.aH(R,u.u_mix)}),raster:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix),u_tl_parent:new a.aL(R,u.u_tl_parent),u_scale_parent:new a.aH(R,u.u_scale_parent),u_buffer_scale:new a.aH(R,u.u_buffer_scale),u_fade_t:new a.aH(R,u.u_fade_t),u_opacity:new a.aH(R,u.u_opacity),u_image0:new a.aG(R,u.u_image0),u_image1:new a.aG(R,u.u_image1),u_brightness_low:new a.aH(R,u.u_brightness_low),u_brightness_high:new a.aH(R,u.u_brightness_high),u_saturation_factor:new a.aH(R,u.u_saturation_factor),u_contrast_factor:new a.aH(R,u.u_contrast_factor),u_spin_weights:new a.aK(R,u.u_spin_weights)}),symbolIcon:(R,u)=>({u_is_size_zoom_constant:new a.aG(R,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aG(R,u.u_is_size_feature_constant),u_size_t:new a.aH(R,u.u_size_t),u_size:new a.aH(R,u.u_size),u_camera_to_center_distance:new a.aH(R,u.u_camera_to_center_distance),u_pitch:new a.aH(R,u.u_pitch),u_rotate_symbol:new a.aG(R,u.u_rotate_symbol),u_aspect_ratio:new a.aH(R,u.u_aspect_ratio),u_fade_change:new a.aH(R,u.u_fade_change),u_matrix:new a.aI(R,u.u_matrix),u_label_plane_matrix:new a.aI(R,u.u_label_plane_matrix),u_coord_matrix:new a.aI(R,u.u_coord_matrix),u_is_text:new a.aG(R,u.u_is_text),u_pitch_with_map:new a.aG(R,u.u_pitch_with_map),u_texsize:new a.aL(R,u.u_texsize),u_texture:new a.aG(R,u.u_texture)}),symbolSDF:(R,u)=>({u_is_size_zoom_constant:new a.aG(R,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aG(R,u.u_is_size_feature_constant),u_size_t:new a.aH(R,u.u_size_t),u_size:new a.aH(R,u.u_size),u_camera_to_center_distance:new a.aH(R,u.u_camera_to_center_distance),u_pitch:new a.aH(R,u.u_pitch),u_rotate_symbol:new a.aG(R,u.u_rotate_symbol),u_aspect_ratio:new a.aH(R,u.u_aspect_ratio),u_fade_change:new a.aH(R,u.u_fade_change),u_matrix:new a.aI(R,u.u_matrix),u_label_plane_matrix:new a.aI(R,u.u_label_plane_matrix),u_coord_matrix:new a.aI(R,u.u_coord_matrix),u_is_text:new a.aG(R,u.u_is_text),u_pitch_with_map:new a.aG(R,u.u_pitch_with_map),u_texsize:new a.aL(R,u.u_texsize),u_texture:new a.aG(R,u.u_texture),u_gamma_scale:new a.aH(R,u.u_gamma_scale),u_device_pixel_ratio:new a.aH(R,u.u_device_pixel_ratio),u_is_halo:new a.aG(R,u.u_is_halo)}),symbolTextAndIcon:(R,u)=>({u_is_size_zoom_constant:new a.aG(R,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aG(R,u.u_is_size_feature_constant),u_size_t:new a.aH(R,u.u_size_t),u_size:new a.aH(R,u.u_size),u_camera_to_center_distance:new a.aH(R,u.u_camera_to_center_distance),u_pitch:new a.aH(R,u.u_pitch),u_rotate_symbol:new a.aG(R,u.u_rotate_symbol),u_aspect_ratio:new a.aH(R,u.u_aspect_ratio),u_fade_change:new a.aH(R,u.u_fade_change),u_matrix:new a.aI(R,u.u_matrix),u_label_plane_matrix:new a.aI(R,u.u_label_plane_matrix),u_coord_matrix:new a.aI(R,u.u_coord_matrix),u_is_text:new a.aG(R,u.u_is_text),u_pitch_with_map:new a.aG(R,u.u_pitch_with_map),u_texsize:new a.aL(R,u.u_texsize),u_texsize_icon:new a.aL(R,u.u_texsize_icon),u_texture:new a.aG(R,u.u_texture),u_texture_icon:new a.aG(R,u.u_texture_icon),u_gamma_scale:new a.aH(R,u.u_gamma_scale),u_device_pixel_ratio:new a.aH(R,u.u_device_pixel_ratio),u_is_halo:new a.aG(R,u.u_is_halo)}),background:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix),u_opacity:new a.aH(R,u.u_opacity),u_color:new a.aM(R,u.u_color)}),backgroundPattern:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix),u_opacity:new a.aH(R,u.u_opacity),u_image:new a.aG(R,u.u_image),u_pattern_tl_a:new a.aL(R,u.u_pattern_tl_a),u_pattern_br_a:new a.aL(R,u.u_pattern_br_a),u_pattern_tl_b:new a.aL(R,u.u_pattern_tl_b),u_pattern_br_b:new a.aL(R,u.u_pattern_br_b),u_texsize:new a.aL(R,u.u_texsize),u_mix:new a.aH(R,u.u_mix),u_pattern_size_a:new a.aL(R,u.u_pattern_size_a),u_pattern_size_b:new a.aL(R,u.u_pattern_size_b),u_scale_a:new a.aH(R,u.u_scale_a),u_scale_b:new a.aH(R,u.u_scale_b),u_pixel_coord_upper:new a.aL(R,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aL(R,u.u_pixel_coord_lower),u_tile_units_to_pixels:new a.aH(R,u.u_tile_units_to_pixels)}),terrain:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix),u_texture:new a.aG(R,u.u_texture),u_ele_delta:new a.aH(R,u.u_ele_delta)}),terrainDepth:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix),u_ele_delta:new a.aH(R,u.u_ele_delta)}),terrainCoords:(R,u)=>({u_matrix:new a.aI(R,u.u_matrix),u_texture:new a.aG(R,u.u_texture),u_terrain_coords_id:new a.aH(R,u.u_terrain_coords_id),u_ele_delta:new a.aH(R,u.u_ele_delta)})};class ks{constructor(u,y,A){this.context=u;const P=u.gl;this.buffer=P.createBuffer(),this.dynamicDraw=!!A,this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),P.bufferData(P.ELEMENT_ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?P.DYNAMIC_DRAW:P.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const y=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),y.bufferSubData(y.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Rd={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Rs{constructor(u,y,A,P){this.length=y.length,this.attributes=A,this.itemSize=y.bytesPerElement,this.dynamicDraw=P,this.context=u;const L=u.gl;this.buffer=L.createBuffer(),u.bindVertexBuffer.set(this.buffer),L.bufferData(L.ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?L.DYNAMIC_DRAW:L.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){if(u.length!==this.length)throw new Error(`Length of new data is ${u.length}, which doesn't match current length of ${this.length}`);const y=this.context.gl;this.bind(),y.bufferSubData(y.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,y){for(let A=0;A<this.attributes.length;A++){const P=y.attributes[this.attributes[A].name];P!==void 0&&u.enableVertexAttribArray(P)}}setVertexAttribPointers(u,y,A){for(let P=0;P<this.attributes.length;P++){const L=this.attributes[P],H=y.attributes[L.name];H!==void 0&&u.vertexAttribPointer(H,L.components,u[Rd[L.type]],!1,this.itemSize,L.offset+this.itemSize*(A||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ys=new WeakMap;function $h(R){var u;if(ys.has(R))return ys.get(R);{const y=(u=R.getParameter(R.VERSION))===null||u===void 0?void 0:u.startsWith("WebGL 2.0");return ys.set(R,y),y}}class _r{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Lm extends _r{getDefault(){return a.aO.transparent}set(u){const y=this.current;(u.r!==y.r||u.g!==y.g||u.b!==y.b||u.a!==y.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class jh extends _r{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class $y extends _r{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class Ks extends _r{getDefault(){return[!0,!0,!0,!0]}set(u){const y=this.current;(u[0]!==y[0]||u[1]!==y[1]||u[2]!==y[2]||u[3]!==y[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Uh extends _r{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class Vh extends _r{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class kc extends _r{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const y=this.current;(u.func!==y.func||u.ref!==y.ref||u.mask!==y.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class Dm extends _r{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const y=this.current;(u[0]!==y[0]||u[1]!==y[1]||u[2]!==y[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class Nm extends _r{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;u?y.enable(y.STENCIL_TEST):y.disable(y.STENCIL_TEST),this.current=u,this.dirty=!1}}class Od extends _r{getDefault(){return[0,1]}set(u){const y=this.current;(u[0]!==y[0]||u[1]!==y[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class jy extends _r{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;u?y.enable(y.DEPTH_TEST):y.disable(y.DEPTH_TEST),this.current=u,this.dirty=!1}}class Uy extends _r{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class Wh extends _r{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;u?y.enable(y.BLEND):y.disable(y.BLEND),this.current=u,this.dirty=!1}}class Ua extends _r{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const y=this.current;(u[0]!==y[0]||u[1]!==y[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class ec extends _r{getDefault(){return a.aO.transparent}set(u){const y=this.current;(u.r!==y.r||u.g!==y.g||u.b!==y.b||u.a!==y.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class Cu extends _r{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class ep extends _r{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;u?y.enable(y.CULL_FACE):y.disable(y.CULL_FACE),this.current=u,this.dirty=!1}}class tp extends _r{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class wl extends _r{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}class tc extends _r{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}}class Rc extends _r{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class Vy extends _r{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const y=this.current;(u[0]!==y[0]||u[1]!==y[1]||u[2]!==y[2]||u[3]!==y[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class np extends _r{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;y.bindFramebuffer(y.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class zm extends _r{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;y.bindRenderbuffer(y.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Au extends _r{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;y.bindTexture(y.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class Fm extends _r{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;y.bindBuffer(y.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class Oc extends _r{getDefault(){return null}set(u){const y=this.gl;y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class Ld extends _r{getDefault(){return null}set(u){var y;if(u===this.current&&!this.dirty)return;const A=this.gl;$h(A)?A.bindVertexArray(u):(y=A.getExtension("OES_vertex_array_object"))===null||y===void 0||y.bindVertexArrayOES(u),this.current=u,this.dirty=!1}}class Wy extends _r{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;y.pixelStorei(y.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class Bm extends _r{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;y.pixelStorei(y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class Br extends _r{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;y.pixelStorei(y.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class Sl extends _r{constructor(u,y){super(u),this.context=u,this.parent=y}getDefault(){return null}}class Hh extends Sl{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const y=this.gl;y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class rp extends Sl{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const y=this.gl;y.framebufferRenderbuffer(y.FRAMEBUFFER,y.DEPTH_ATTACHMENT,y.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Pu extends Sl{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const y=this.gl;y.framebufferRenderbuffer(y.FRAMEBUFFER,y.DEPTH_STENCIL_ATTACHMENT,y.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Va{constructor(u,y,A,P,L){this.context=u,this.width=y,this.height=A;const H=u.gl,q=this.framebuffer=H.createFramebuffer();if(this.colorAttachment=new Hh(u,q),P)this.depthAttachment=L?new Pu(u,q):new rp(u,q);else if(L)throw new Error("Stencil cannot be set without depth");if(H.checkFramebufferStatus(H.FRAMEBUFFER)!==H.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const u=this.context.gl,y=this.colorAttachment.get();if(y&&u.deleteTexture(y),this.depthAttachment){const A=this.depthAttachment.get();A&&u.deleteRenderbuffer(A)}u.deleteFramebuffer(this.framebuffer)}}class Yr{constructor(u,y,A){this.blendFunction=u,this.blendColor=y,this.mask=A}}Yr.Replace=[1,0],Yr.disabled=new Yr(Yr.Replace,a.aO.transparent,[!1,!1,!1,!1]),Yr.unblended=new Yr(Yr.Replace,a.aO.transparent,[!0,!0,!0,!0]),Yr.alphaBlended=new Yr([1,771],a.aO.transparent,[!0,!0,!0,!0]);class Iu{constructor(u){var y,A;if(this.gl=u,this.clearColor=new Lm(this),this.clearDepth=new jh(this),this.clearStencil=new $y(this),this.colorMask=new Ks(this),this.depthMask=new Uh(this),this.stencilMask=new Vh(this),this.stencilFunc=new kc(this),this.stencilOp=new Dm(this),this.stencilTest=new Nm(this),this.depthRange=new Od(this),this.depthTest=new jy(this),this.depthFunc=new Uy(this),this.blend=new Wh(this),this.blendFunc=new Ua(this),this.blendColor=new ec(this),this.blendEquation=new Cu(this),this.cullFace=new ep(this),this.cullFaceSide=new tp(this),this.frontFace=new wl(this),this.program=new tc(this),this.activeTexture=new Rc(this),this.viewport=new Vy(this),this.bindFramebuffer=new np(this),this.bindRenderbuffer=new zm(this),this.bindTexture=new Au(this),this.bindVertexBuffer=new Fm(this),this.bindElementBuffer=new Oc(this),this.bindVertexArray=new Ld(this),this.pixelStoreUnpack=new Wy(this),this.pixelStoreUnpackPremultiplyAlpha=new Bm(this),this.pixelStoreUnpackFlipY=new Br(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE),$h(u)){this.HALF_FLOAT=u.HALF_FLOAT;const P=u.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(y=u.RGBA16F)!==null&&y!==void 0?y:P==null?void 0:P.RGBA16F_EXT,this.RGB16F=(A=u.RGB16F)!==null&&A!==void 0?A:P==null?void 0:P.RGB16F_EXT,u.getExtension("EXT_color_buffer_float")}else{u.getExtension("EXT_color_buffer_half_float"),u.getExtension("OES_texture_half_float_linear");const P=u.getExtension("OES_texture_half_float");this.HALF_FLOAT=P==null?void 0:P.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,y){return new ks(this,u,y)}createVertexBuffer(u,y,A){return new Rs(this,u,y,A)}createRenderbuffer(u,y,A){const P=this.gl,L=P.createRenderbuffer();return this.bindRenderbuffer.set(L),P.renderbufferStorage(P.RENDERBUFFER,u,y,A),this.bindRenderbuffer.set(null),L}createFramebuffer(u,y,A,P){return new Va(this,u,y,A,P)}clear({color:u,depth:y,stencil:A}){const P=this.gl;let L=0;u&&(L|=P.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),y!==void 0&&(L|=P.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(y),this.depthMask.set(!0)),A!==void 0&&(L|=P.STENCIL_BUFFER_BIT,this.clearStencil.set(A),this.stencilMask.set(255)),P.clear(L)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){a.aD(u.blendFunction,Yr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}createVertexArray(){var u;return $h(this.gl)?this.gl.createVertexArray():(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.createVertexArrayOES()}deleteVertexArray(u){var y;return $h(this.gl)?this.gl.deleteVertexArray(u):(y=this.gl.getExtension("OES_vertex_array_object"))===null||y===void 0?void 0:y.deleteVertexArrayOES(u)}unbindVAO(){this.bindVertexArray.set(null)}}class gr{constructor(u,y,A){this.func=u,this.mask=y,this.range=A}}gr.ReadOnly=!1,gr.ReadWrite=!0,gr.disabled=new gr(519,gr.ReadOnly,[0,1]);const ma=7680;class Gr{constructor(u,y,A,P,L,H){this.test=u,this.ref=y,this.mask=A,this.fail=P,this.depthFail=L,this.pass=H}}Gr.disabled=new Gr({func:519,mask:0},0,0,ma,ma,ma);class ci{constructor(u,y,A){this.enable=u,this.mode=y,this.frontFace=A}}let ku;function Gh(R,u,y,A,P,L,H){const q=R.context,K=q.gl,te=R.useProgram("collisionBox"),le=[];let de=0,Se=0;for(let He=0;He<A.length;He++){const ct=A[He],Pt=u.getTile(ct),Ct=Pt.getBucket(y);if(!Ct)continue;let Ot=ct.posMatrix;P[0]===0&&P[1]===0||(Ot=R.translatePosMatrix(ct.posMatrix,Pt,P,L));const Zt=H?Ct.textCollisionBox:Ct.iconCollisionBox,Gt=Ct.collisionCircleArray;if(Gt.length>0){const Kt=a.F(),bn=Ot;a.aP(Kt,Ct.placementInvProjMatrix,R.transform.glCoordMatrix),a.aP(Kt,Kt,Ct.placementViewportMatrix),le.push({circleArray:Gt,circleOffset:Se,transform:bn,invTransform:Kt,coord:ct}),de+=Gt.length/4,Se=de}Zt&&te.draw(q,K.LINES,gr.disabled,Gr.disabled,R.colorModeForRenderPass(),ci.disabled,Kf(Ot,R.transform,Pt),R.style.map.terrain&&R.style.map.terrain.getTerrainData(ct),y.id,Zt.layoutVertexBuffer,Zt.indexBuffer,Zt.segments,null,R.transform.zoom,null,null,Zt.collisionVertexBuffer)}if(!H||!le.length)return;const ze=R.useProgram("collisionCircle"),De=new a.aQ;De.resize(4*de),De._trim();let Be=0;for(const He of le)for(let ct=0;ct<He.circleArray.length/4;ct++){const Pt=4*ct,Ct=He.circleArray[Pt+0],Ot=He.circleArray[Pt+1],Zt=He.circleArray[Pt+2],Gt=He.circleArray[Pt+3];De.emplace(Be++,Ct,Ot,Zt,Gt,0),De.emplace(Be++,Ct,Ot,Zt,Gt,1),De.emplace(Be++,Ct,Ot,Zt,Gt,2),De.emplace(Be++,Ct,Ot,Zt,Gt,3)}(!ku||ku.length<2*de)&&(ku=function(He){const ct=2*He,Pt=new a.aS;Pt.resize(ct),Pt._trim();for(let Ct=0;Ct<ct;Ct++){const Ot=6*Ct;Pt.uint16[Ot+0]=4*Ct+0,Pt.uint16[Ot+1]=4*Ct+1,Pt.uint16[Ot+2]=4*Ct+2,Pt.uint16[Ot+3]=4*Ct+2,Pt.uint16[Ot+4]=4*Ct+3,Pt.uint16[Ot+5]=4*Ct+0}return Pt}(de));const ke=q.createIndexBuffer(ku,!0),Le=q.createVertexBuffer(De,a.aR.members,!0);for(const He of le){const ct={u_matrix:He.transform,u_inv_matrix:He.invTransform,u_camera_to_center_distance:(Et=R.transform).cameraToCenterDistance,u_viewport_size:[Et.width,Et.height]};ze.draw(q,K.TRIANGLES,gr.disabled,Gr.disabled,R.colorModeForRenderPass(),ci.disabled,ct,R.style.map.terrain&&R.style.map.terrain.getTerrainData(He.coord),y.id,Le,ke,a.$.simpleSegment(0,2*He.circleOffset,He.circleArray.length,He.circleArray.length/2),null,R.transform.zoom,null,null,null)}var Et;Le.destroy(),ke.destroy()}ci.disabled=new ci(!1,1029,2305),ci.backCCW=new ci(!0,1029,2305);const Zs=a.an(new Float32Array(16));function vs(R,u,y,A,P,L){const{horizontalAlign:H,verticalAlign:q}=a.at(R);return new a.P((-(H-.5)*u/P+A[0])*L,(-(q-.5)*y/P+A[1])*L)}function Si(R,u,y,A,P,L,H,q,K,te,le){const de=R.text.placedSymbolArray,Se=R.text.dynamicLayoutVertexArray,ze=R.icon.dynamicLayoutVertexArray,De={};Se.clear();for(let Be=0;Be<de.length;Be++){const ke=de.get(Be),Le=ke.hidden||!ke.crossTileID||R.allowVerticalPlacement&&!ke.placedOrientation?null:A[ke.crossTileID];if(Le){const Et=new a.P(ke.anchorX,ke.anchorY),He=xe(Et,y?H:L,le),ct=ee(P.cameraToCenterDistance,He.signedDistanceFromCamera);let Pt=a.ai(R.textSizeData,K,ke)*ct/a.ao;y&&(Pt*=R.tilePixelRatio/q);const{width:Ct,height:Ot,anchor:Zt,textOffset:Gt,textBoxScale:Kt}=Le,bn=vs(Zt,Ct,Ot,Gt,Kt,Pt),sr=y?xe(Et.add(bn),L,le).point:He.point.add(u?bn.rotate(-P.angle):bn),cn=R.allowVerticalPlacement&&ke.placedOrientation===a.ah.vertical?Math.PI/2:0;for(let Zn=0;Zn<ke.numGlyphs;Zn++)a.aj(Se,sr,cn);te&&ke.associatedIconIndex>=0&&(De[ke.associatedIconIndex]={shiftedAnchor:sr,angle:cn})}else En(ke.numGlyphs,Se)}if(te){ze.clear();const Be=R.icon.placedSymbolArray;for(let ke=0;ke<Be.length;ke++){const Le=Be.get(ke);if(Le.hidden)En(Le.numGlyphs,ze);else{const Et=De[ke];if(Et)for(let He=0;He<Le.numGlyphs;He++)a.aj(ze,Et.shiftedAnchor,Et.angle);else En(Le.numGlyphs,ze)}}R.icon.dynamicLayoutVertexBuffer.updateData(ze)}R.text.dynamicLayoutVertexBuffer.updateData(Se)}function Dd(R,u,y){return y.iconsInText&&u?"symbolTextAndIcon":R?"symbolSDF":"symbolIcon"}function Wa(R,u,y,A,P,L,H,q,K,te,le,de){const Se=R.context,ze=Se.gl,De=R.transform,Be=q==="map",ke=K==="map",Le=q!=="viewport"&&y.layout.get("symbol-placement")!=="point",Et=Be&&!ke&&!Le,He=!y.layout.get("symbol-sort-key").isConstant();let ct=!1;const Pt=R.depthModeForSublayer(0,gr.ReadOnly),Ct=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ot=[];for(const Zt of A){const Gt=u.getTile(Zt),Kt=Gt.getBucket(y);if(!Kt)continue;const bn=P?Kt.text:Kt.icon;if(!bn||!bn.segments.get().length||!bn.hasVisibleVertices)continue;const sr=bn.programConfigurations.get(y.id),cn=P||Kt.sdfIcons,Zn=P?Kt.textSizeData:Kt.iconSizeData,ur=ke||De.pitch!==0,Mr=R.useProgram(Dd(cn,P,Kt),sr),rr=a.ag(Zn,De.zoom),fr=R.style.map.terrain&&R.style.map.terrain.getTerrainData(Zt);let dr,Vi,fi,Os,ho=[0,0],pi=null;if(P)Vi=Gt.glyphAtlasTexture,fi=ze.LINEAR,dr=Gt.glyphAtlasTexture.size,Kt.iconsInText&&(ho=Gt.imageAtlasTexture.size,pi=Gt.imageAtlasTexture,Os=ur||R.options.rotating||R.options.zooming||Zn.kind==="composite"||Zn.kind==="camera"?ze.LINEAR:ze.NEAREST);else{const Ei=y.layout.get("icon-size").constantOr(0)!==1||Kt.iconsNeedLinear;Vi=Gt.imageAtlasTexture,fi=cn||R.options.rotating||R.options.zooming||Ei||ur?ze.LINEAR:ze.NEAREST,dr=Gt.imageAtlasTexture.size}const Qo=tr(Gt,1,R.transform.zoom),ta=tn(Zt.posMatrix,ke,Be,R.transform,Qo),_a=Xe(Zt.posMatrix,ke,Be,R.transform,Qo),sc=Ct&&Kt.hasTextData(),ac=y.layout.get("icon-text-fit")!=="none"&&sc&&Kt.hasIconData();if(Le){const Ei=R.style.map.terrain?(ws,Sr)=>R.style.map.terrain.getElevation(Zt,ws,Sr):null,jo=y.layout.get("text-rotation-alignment")==="map";me(Kt,Zt.posMatrix,R,P,ta,_a,ke,te,jo,Ei)}const xa=R.translatePosMatrix(Zt.posMatrix,Gt,L,H),Ls=Le||P&&Ct||ac?Zs:ta,Di=R.translatePosMatrix(_a,Gt,L,H,!0),mi=cn&&y.paint.get(P?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Wi;Wi=cn?Kt.iconsInText?Jl(Zn.kind,rr,Et,ke,R,xa,Ls,Di,dr,ho):Ic(Zn.kind,rr,Et,ke,R,xa,Ls,Di,P,dr,!0):Qf(Zn.kind,rr,Et,ke,R,xa,Ls,Di,P,dr);const qd={program:Mr,buffers:bn,uniformValues:Wi,atlasTexture:Vi,atlasTextureIcon:pi,atlasInterpolation:fi,atlasInterpolationIcon:Os,isSDF:cn,hasHalo:mi};if(He&&Kt.canOverlap){ct=!0;const Ei=bn.segments.get();for(const jo of Ei)Ot.push({segments:new a.$([jo]),sortKey:jo.sortKey,state:qd,terrainData:fr})}else Ot.push({segments:bn.segments,sortKey:0,state:qd,terrainData:fr})}ct&&Ot.sort((Zt,Gt)=>Zt.sortKey-Gt.sortKey);for(const Zt of Ot){const Gt=Zt.state;if(Se.activeTexture.set(ze.TEXTURE0),Gt.atlasTexture.bind(Gt.atlasInterpolation,ze.CLAMP_TO_EDGE),Gt.atlasTextureIcon&&(Se.activeTexture.set(ze.TEXTURE1),Gt.atlasTextureIcon&&Gt.atlasTextureIcon.bind(Gt.atlasInterpolationIcon,ze.CLAMP_TO_EDGE)),Gt.isSDF){const Kt=Gt.uniformValues;Gt.hasHalo&&(Kt.u_is_halo=1,ip(Gt.buffers,Zt.segments,y,R,Gt.program,Pt,le,de,Kt,Zt.terrainData)),Kt.u_is_halo=0}ip(Gt.buffers,Zt.segments,y,R,Gt.program,Pt,le,de,Gt.uniformValues,Zt.terrainData)}}function ip(R,u,y,A,P,L,H,q,K,te){const le=A.context;P.draw(le,le.gl.TRIANGLES,L,H,q,ci.disabled,K,te,y.id,R.layoutVertexBuffer,R.indexBuffer,u,y.paint,A.transform.zoom,R.programConfigurations.get(y.id),R.dynamicLayoutVertexBuffer,R.opacityVertexBuffer)}function Hy(R,u,y,A,P){if(!y||!A||!A.imageAtlas)return;const L=A.imageAtlas.patternPositions;let H=L[y.to.toString()],q=L[y.from.toString()];if(!H&&q&&(H=q),!q&&H&&(q=H),!H||!q){const K=P.getPaintProperty(u);H=L[K],q=L[K]}H&&q&&R.setConstantPatternPositions(H,q)}function op(R,u,y,A,P,L,H){const q=R.context.gl,K="fill-pattern",te=y.paint.get(K),le=te&&te.constantOr(1),de=y.getCrossfadeParameters();let Se,ze,De,Be,ke;H?(ze=le&&!y.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Se=q.LINES):(ze=le?"fillPattern":"fill",Se=q.TRIANGLES);const Le=te.constantOr(null);for(const Et of A){const He=u.getTile(Et);if(le&&!He.patternsLoaded())continue;const ct=He.getBucket(y);if(!ct)continue;const Pt=ct.programConfigurations.get(y.id),Ct=R.useProgram(ze,Pt),Ot=R.style.map.terrain&&R.style.map.terrain.getTerrainData(Et);le&&(R.context.activeTexture.set(q.TEXTURE0),He.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),Pt.updatePaintBuffers(de)),Hy(Pt,K,Le,He,y);const Zt=Ot?Et:null,Gt=R.translatePosMatrix(Zt?Zt.posMatrix:Et.posMatrix,He,y.paint.get("fill-translate"),y.paint.get("fill-translate-anchor"));if(H){Be=ct.indexBuffer2,ke=ct.segments2;const Kt=[q.drawingBufferWidth,q.drawingBufferHeight];De=ze==="fillOutlinePattern"&&le?Fy(Gt,R,de,He,Kt):X0(Gt,Kt)}else Be=ct.indexBuffer,ke=ct.segments,De=le?Y0(Gt,R,de,He):Id(Gt);Ct.draw(R.context,Se,P,R.stencilModeForClipping(Et),L,ci.disabled,De,Ot,y.id,ct.layoutVertexBuffer,Be,ke,y.paint,R.transform.zoom,Pt)}}function Ru(R,u,y,A,P,L,H){const q=R.context,K=q.gl,te="fill-extrusion-pattern",le=y.paint.get(te),de=le.constantOr(1),Se=y.getCrossfadeParameters(),ze=y.paint.get("fill-extrusion-opacity"),De=le.constantOr(null);for(const Be of A){const ke=u.getTile(Be),Le=ke.getBucket(y);if(!Le)continue;const Et=R.style.map.terrain&&R.style.map.terrain.getTerrainData(Be),He=Le.programConfigurations.get(y.id),ct=R.useProgram(de?"fillExtrusionPattern":"fillExtrusion",He);de&&(R.context.activeTexture.set(K.TEXTURE0),ke.imageAtlasTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),He.updatePaintBuffers(Se)),Hy(He,te,De,ke,y);const Pt=R.translatePosMatrix(Be.posMatrix,ke,y.paint.get("fill-extrusion-translate"),y.paint.get("fill-extrusion-translate-anchor")),Ct=y.paint.get("fill-extrusion-vertical-gradient"),Ot=de?Xf(Pt,R,Ct,ze,Be,Se,ke):Yf(Pt,R,Ct,ze);ct.draw(q,q.gl.TRIANGLES,P,L,H,ci.backCCW,Ot,Et,y.id,Le.layoutVertexBuffer,Le.indexBuffer,Le.segments,y.paint,R.transform.zoom,He,R.style.map.terrain&&Le.centroidVertexBuffer)}}function $m(R,u,y,A,P,L,H){const q=R.context,K=q.gl,te=y.fbo;if(!te)return;const le=R.useProgram("hillshade"),de=R.style.map.terrain&&R.style.map.terrain.getTerrainData(u);q.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,te.colorAttachment.get()),le.draw(q,K.TRIANGLES,P,L,H,ci.disabled,((Se,ze,De,Be)=>{const ke=De.paint.get("hillshade-shadow-color"),Le=De.paint.get("hillshade-highlight-color"),Et=De.paint.get("hillshade-accent-color");let He=De.paint.get("hillshade-illumination-direction")*(Math.PI/180);De.paint.get("hillshade-illumination-anchor")==="viewport"&&(He-=Se.transform.angle);const ct=!Se.options.moving;return{u_matrix:Be?Be.posMatrix:Se.transform.calculatePosMatrix(ze.tileID.toUnwrapped(),ct),u_image:0,u_latrange:By(0,ze.tileID),u_light:[De.paint.get("hillshade-exaggeration"),He],u_shadow:ke,u_highlight:Le,u_accent:Et}})(R,y,A,de?u:null),de,A.id,R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments)}function qh(R,u,y,A,P,L){const H=R.context,q=H.gl,K=u.dem;if(K&&K.data){const te=K.dim,le=K.stride,de=K.getPixels();if(H.activeTexture.set(q.TEXTURE1),H.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||R.getTileTexture(le),u.demTexture){const ze=u.demTexture;ze.update(de,{premultiply:!1}),ze.bind(q.NEAREST,q.CLAMP_TO_EDGE)}else u.demTexture=new oe(H,de,q.RGBA,{premultiply:!1}),u.demTexture.bind(q.NEAREST,q.CLAMP_TO_EDGE);H.activeTexture.set(q.TEXTURE0);let Se=u.fbo;if(!Se){const ze=new oe(H,{width:te,height:te,data:null},q.RGBA);ze.bind(q.LINEAR,q.CLAMP_TO_EDGE),Se=u.fbo=H.createFramebuffer(te,te,!0,!1),Se.colorAttachment.set(ze.texture)}H.bindFramebuffer.set(Se.framebuffer),H.viewport.set([0,0,te,te]),R.useProgram("hillshadePrepare").draw(H,q.TRIANGLES,A,P,L,ci.disabled,((ze,De)=>{const Be=De.stride,ke=a.F();return a.aN(ke,0,a.W,-a.W,0,0,1),a.H(ke,ke,[0,-a.W,0]),{u_matrix:ke,u_image:1,u_dimension:[Be,Be],u_zoom:ze.overscaledZ,u_unpack:De.getUnpackVector()}})(u.tileID,K),null,y.id,R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments),u.needsHillshadePrepare=!1}}function Nd(R,u,y,A,P,L){const H=A.paint.get("raster-fade-duration");if(!L&&H>0){const q=p.now(),K=(q-R.timeAdded)/H,te=u?(q-u.timeAdded)/H:-1,le=y.getSource(),de=P.coveringZoomLevel({tileSize:le.tileSize,roundZoom:le.roundZoom}),Se=!u||Math.abs(u.tileID.overscaledZ-de)>Math.abs(R.tileID.overscaledZ-de),ze=Se&&R.refreshedUponExpiration?1:a.ac(Se?K:1-te,0,1);return R.refreshedUponExpiration&&K>=1&&(R.refreshedUponExpiration=!1),u?{opacity:1,mix:1-ze}:{opacity:ze,mix:0}}return{opacity:1,mix:0}}const Yh=new a.aO(1,0,0,1),zd=new a.aO(0,1,0,1),jm=new a.aO(0,0,1,1),Gy=new a.aO(1,0,1,1),Zi=new a.aO(0,1,1,1);function ga(R,u,y,A){nc(R,0,u+y/2,R.transform.width,y,A)}function Js(R,u,y,A){nc(R,u-y/2,0,y,R.transform.height,A)}function nc(R,u,y,A,P,L){const H=R.context,q=H.gl;q.enable(q.SCISSOR_TEST),q.scissor(u*R.pixelRatio,y*R.pixelRatio,A*R.pixelRatio,P*R.pixelRatio),H.clear({color:L}),q.disable(q.SCISSOR_TEST)}function Qs(R,u,y){const A=R.context,P=A.gl,L=y.posMatrix,H=R.useProgram("debug"),q=gr.disabled,K=Gr.disabled,te=R.colorModeForRenderPass(),le="$debug",de=R.style.map.terrain&&R.style.map.terrain.getTerrainData(y);A.activeTexture.set(P.TEXTURE0);const Se=u.getTileByID(y.key).latestRawTileData,ze=Math.floor((Se&&Se.byteLength||0)/1024),De=u.getTile(y).tileSize,Be=512/Math.min(De,512)*(y.overscaledZ/R.transform.zoom)*.5;let ke=y.canonical.toString();y.overscaledZ!==y.canonical.z&&(ke+=` => ${y.overscaledZ}`),function(Le,Et){Le.initDebugOverlayCanvas();const He=Le.debugOverlayCanvas,ct=Le.context.gl,Pt=Le.debugOverlayCanvas.getContext("2d");Pt.clearRect(0,0,He.width,He.height),Pt.shadowColor="white",Pt.shadowBlur=2,Pt.lineWidth=1.5,Pt.strokeStyle="white",Pt.textBaseline="top",Pt.font="bold 36px Open Sans, sans-serif",Pt.fillText(Et,5,5),Pt.strokeText(Et,5,5),Le.debugOverlayTexture.update(He),Le.debugOverlayTexture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE)}(R,`${ke} ${ze}kB`),H.draw(A,P.TRIANGLES,q,K,Yr.alphaBlended,ci.disabled,Rm(L,a.aO.transparent,Be),null,le,R.debugBuffer,R.quadTriangleIndexBuffer,R.debugSegments),H.draw(A,P.LINE_STRIP,q,K,te,ci.disabled,Rm(L,a.aO.red),de,le,R.debugBuffer,R.tileBorderIndexBuffer,R.debugSegments)}function Fd(R,u,y){const A=R.context,P=A.gl,L=R.colorModeForRenderPass(),H=new gr(P.LEQUAL,gr.ReadWrite,R.depthRangeFor3D),q=R.useProgram("terrain"),K=u.getTerrainMesh();A.bindFramebuffer.set(null),A.viewport.set([0,0,R.width,R.height]);for(const te of y){const le=R.renderToTexture.getTexture(te),de=u.getTerrainData(te.tileID);A.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,le.texture);const Se={u_matrix:R.transform.calculatePosMatrix(te.tileID.toUnwrapped()),u_texture:0,u_ele_delta:u.getMeshFrameDelta(R.transform.zoom)};q.draw(A,P.TRIANGLES,H,Gr.disabled,L,ci.backCCW,Se,de,"terrain",K.vertexBuffer,K.indexBuffer,K.segments)}}class Ml{constructor(u,y){this.context=new Iu(u),this.transform=y,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=St.maxUnderzooming+St.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Wr}resize(u,y,A){if(this.width=Math.floor(u*A),this.height=Math.floor(y*A),this.pixelRatio=A,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const P of this.style._order)this.style._layers[P].resize()}setup(){const u=this.context,y=new a.aV;y.emplaceBack(0,0),y.emplaceBack(a.W,0),y.emplaceBack(0,a.W),y.emplaceBack(a.W,a.W),this.tileExtentBuffer=u.createVertexBuffer(y,Is.members),this.tileExtentSegments=a.$.simpleSegment(0,0,4,2);const A=new a.aV;A.emplaceBack(0,0),A.emplaceBack(a.W,0),A.emplaceBack(0,a.W),A.emplaceBack(a.W,a.W),this.debugBuffer=u.createVertexBuffer(A,Is.members),this.debugSegments=a.$.simpleSegment(0,0,4,5);const P=new a.Z;P.emplaceBack(0,0,0,0),P.emplaceBack(a.W,0,a.W,0),P.emplaceBack(0,a.W,0,a.W),P.emplaceBack(a.W,a.W,a.W,a.W),this.rasterBoundsBuffer=u.createVertexBuffer(P,Pe.members),this.rasterBoundsSegments=a.$.simpleSegment(0,0,4,2);const L=new a.aV;L.emplaceBack(0,0),L.emplaceBack(1,0),L.emplaceBack(0,1),L.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(L,Is.members),this.viewportSegments=a.$.simpleSegment(0,0,4,2);const H=new a.aW;H.emplaceBack(0),H.emplaceBack(1),H.emplaceBack(3),H.emplaceBack(2),H.emplaceBack(0),this.tileBorderIndexBuffer=u.createIndexBuffer(H);const q=new a.aX;q.emplaceBack(0,1,2),q.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(q);const K=this.context.gl;this.stencilClearMode=new Gr({func:K.ALWAYS,mask:0},0,255,K.ZERO,K.ZERO,K.ZERO)}clearStencil(){const u=this.context,y=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const A=a.F();a.aN(A,0,this.width,this.height,0,0,1),a.J(A,A,[y.drawingBufferWidth,y.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(u,y.TRIANGLES,gr.disabled,this.stencilClearMode,Yr.disabled,ci.disabled,Zf(A),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(u,y){if(this.currentStencilSource===u.source||!u.isTileClipped()||!y||!y.length)return;this.currentStencilSource=u.source;const A=this.context,P=A.gl;this.nextStencilID+y.length>256&&this.clearStencil(),A.setColorMode(Yr.disabled),A.setDepthMode(gr.disabled);const L=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const H of y){const q=this._tileClippingMaskIDs[H.key]=this.nextStencilID++,K=this.style.map.terrain&&this.style.map.terrain.getTerrainData(H);L.draw(A,P.TRIANGLES,gr.disabled,new Gr({func:P.ALWAYS,mask:0},q,255,P.KEEP,P.KEEP,P.REPLACE),Yr.disabled,ci.disabled,Zf(H.posMatrix),K,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,y=this.context.gl;return new Gr({func:y.NOTEQUAL,mask:255},u,255,y.KEEP,y.KEEP,y.REPLACE)}stencilModeForClipping(u){const y=this.context.gl;return new Gr({func:y.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,y.KEEP,y.KEEP,y.REPLACE)}stencilConfigForOverlap(u){const y=this.context.gl,A=u.sort((H,q)=>q.overscaledZ-H.overscaledZ),P=A[A.length-1].overscaledZ,L=A[0].overscaledZ-P+1;if(L>1){this.currentStencilSource=void 0,this.nextStencilID+L>256&&this.clearStencil();const H={};for(let q=0;q<L;q++)H[q+P]=new Gr({func:y.GEQUAL,mask:255},q+this.nextStencilID,255,y.KEEP,y.KEEP,y.REPLACE);return this.nextStencilID+=L,[H,A]}return[{[P]:Gr.disabled},A]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new Yr([u.CONSTANT_COLOR,u.ONE],new a.aO(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Yr.unblended:Yr.alphaBlended}depthModeForSublayer(u,y,A){if(!this.opaquePassEnabledForLayer())return gr.disabled;const P=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new gr(A||this.context.gl.LEQUAL,y,[P,P])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,y){this.style=u,this.options=y,this.lineAtlas=u.lineAtlas,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(p.now()),this.imageManager.beginFrame();const A=this.style._order,P=this.style.sourceCaches,L={},H={},q={};for(const K in P){const te=P[K];te.used&&te.prepare(this.context),L[K]=te.getVisibleCoordinates(),H[K]=L[K].slice().reverse(),q[K]=te.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let K=0;K<A.length;K++)if(this.style._layers[A[K]].is3D()){this.opaquePassCutoff=K;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const K of A){const te=this.style._layers[K];if(!te.hasOffscreenPass()||te.isHidden(this.transform.zoom))continue;const le=H[te.source];(te.type==="custom"||le.length)&&this.renderLayer(this,P[te.source],te,le)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:y.showOverdrawInspector?a.aO.black:a.aO.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=y.showOverdrawInspector,this.depthRangeFor3D=[0,1-(u._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=A.length-1;this.currentLayer>=0;this.currentLayer--){const K=this.style._layers[A[this.currentLayer]],te=P[K.source],le=L[K.source];this._renderTileClippingMasks(K,le),this.renderLayer(this,te,K,le)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<A.length;this.currentLayer++){const K=this.style._layers[A[this.currentLayer]],te=P[K.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(K))continue;const le=(K.type==="symbol"?q:H)[K.source];this._renderTileClippingMasks(K,L[K.source]),this.renderLayer(this,te,K,le)}if(this.options.showTileBoundaries){const K=function(te,le){let de=null;const Se=Object.values(te._layers).flatMap(ke=>ke.source&&!ke.isHidden(le)?[te.sourceCaches[ke.source]]:[]),ze=Se.filter(ke=>ke.getSource().type==="vector"),De=Se.filter(ke=>ke.getSource().type!=="vector"),Be=ke=>{(!de||de.getSource().maxzoom<ke.getSource().maxzoom)&&(de=ke)};return ze.forEach(ke=>Be(ke)),de||De.forEach(ke=>Be(ke)),de}(this.style,this.transform.zoom);K&&function(te,le,de){for(let Se=0;Se<de.length;Se++)Qs(te,le,de[Se])}(this,K,K.getVisibleCoordinates())}this.options.showPadding&&function(K){const te=K.transform.padding;ga(K,K.transform.height-(te.top||0),3,Yh),ga(K,te.bottom||0,3,zd),Js(K,te.left||0,3,jm),Js(K,K.transform.width-(te.right||0),3,Gy);const le=K.transform.centerPoint;(function(de,Se,ze,De){nc(de,Se-1,ze-10,2,20,De),nc(de,Se-10,ze-1,20,2,De)})(K,le.x,K.transform.height-le.y,Zi)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(u){if(!this.style||!this.style.map||!this.style.map.terrain)return;const y=this.terrainFacilitator.matrix,A=this.transform.projMatrix;let P=this.terrainFacilitator.dirty;P||(P=u?!a.aY(y,A):!a.aZ(y,A)),P||(P=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),P&&(a.a_(y,A),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(L,H){const q=L.context,K=q.gl,te=Yr.unblended,le=new gr(K.LEQUAL,gr.ReadWrite,[0,1]),de=H.getTerrainMesh(),Se=H.sourceCache.getRenderableTiles(),ze=L.useProgram("terrainDepth");q.bindFramebuffer.set(H.getFramebuffer("depth").framebuffer),q.viewport.set([0,0,L.width/devicePixelRatio,L.height/devicePixelRatio]),q.clear({color:a.aO.transparent,depth:1});for(const De of Se){const Be=H.getTerrainData(De.tileID),ke={u_matrix:L.transform.calculatePosMatrix(De.tileID.toUnwrapped()),u_ele_delta:H.getMeshFrameDelta(L.transform.zoom)};ze.draw(q,K.TRIANGLES,le,Gr.disabled,te,ci.backCCW,ke,Be,"terrain",de.vertexBuffer,de.indexBuffer,de.segments)}q.bindFramebuffer.set(null),q.viewport.set([0,0,L.width,L.height])}(this,this.style.map.terrain),function(L,H){const q=L.context,K=q.gl,te=Yr.unblended,le=new gr(K.LEQUAL,gr.ReadWrite,[0,1]),de=H.getTerrainMesh(),Se=H.getCoordsTexture(),ze=H.sourceCache.getRenderableTiles(),De=L.useProgram("terrainCoords");q.bindFramebuffer.set(H.getFramebuffer("coords").framebuffer),q.viewport.set([0,0,L.width/devicePixelRatio,L.height/devicePixelRatio]),q.clear({color:a.aO.transparent,depth:1}),H.coordsIndex=[];for(const Be of ze){const ke=H.getTerrainData(Be.tileID);q.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,Se.texture);const Le={u_matrix:L.transform.calculatePosMatrix(Be.tileID.toUnwrapped()),u_terrain_coords_id:(255-H.coordsIndex.length)/255,u_texture:0,u_ele_delta:H.getMeshFrameDelta(L.transform.zoom)};De.draw(q,K.TRIANGLES,le,Gr.disabled,te,ci.backCCW,Le,ke,"terrain",de.vertexBuffer,de.indexBuffer,de.segments),H.coordsIndex.push(Be.tileID.key)}q.bindFramebuffer.set(null),q.viewport.set([0,0,L.width,L.height])}(this,this.style.map.terrain))}renderLayer(u,y,A,P){if(!A.isHidden(this.transform.zoom)&&(A.type==="background"||A.type==="custom"||(P||[]).length))switch(this.id=A.id,A.type){case"symbol":(function(L,H,q,K,te){if(L.renderPass!=="translucent")return;const le=Gr.disabled,de=L.colorModeForRenderPass();(q._unevaluatedLayout.hasValue("text-variable-anchor")||q._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Se,ze,De,Be,ke,Le,Et){const He=ze.transform,ct=ke==="map",Pt=Le==="map";for(const Ct of Se){const Ot=Be.getTile(Ct),Zt=Ot.getBucket(De);if(!Zt||!Zt.text||!Zt.text.segments.get().length)continue;const Gt=a.ag(Zt.textSizeData,He.zoom),Kt=tr(Ot,1,ze.transform.zoom),bn=tn(Ct.posMatrix,Pt,ct,ze.transform,Kt),sr=De.layout.get("icon-text-fit")!=="none"&&Zt.hasIconData();if(Gt){const cn=Math.pow(2,He.zoom-Ot.tileID.overscaledZ);Si(Zt,ct,Pt,Et,He,bn,Ct.posMatrix,cn,Gt,sr,ze.style.map.terrain?(Zn,ur)=>ze.style.map.terrain.getElevation(Ct,Zn,ur):null)}}}(K,L,q,H,q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),te),q.paint.get("icon-opacity").constantOr(1)!==0&&Wa(L,H,q,K,!1,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),q.layout.get("icon-rotation-alignment"),q.layout.get("icon-pitch-alignment"),q.layout.get("icon-keep-upright"),le,de),q.paint.get("text-opacity").constantOr(1)!==0&&Wa(L,H,q,K,!0,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.layout.get("text-keep-upright"),le,de),H.map.showCollisionBoxes&&(Gh(L,H,q,K,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),!0),Gh(L,H,q,K,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),!1))})(u,y,A,P,this.style.placement.variableOffsets);break;case"circle":(function(L,H,q,K){if(L.renderPass!=="translucent")return;const te=q.paint.get("circle-opacity"),le=q.paint.get("circle-stroke-width"),de=q.paint.get("circle-stroke-opacity"),Se=!q.layout.get("circle-sort-key").isConstant();if(te.constantOr(1)===0&&(le.constantOr(1)===0||de.constantOr(1)===0))return;const ze=L.context,De=ze.gl,Be=L.depthModeForSublayer(0,gr.ReadOnly),ke=Gr.disabled,Le=L.colorModeForRenderPass(),Et=[];for(let He=0;He<K.length;He++){const ct=K[He],Pt=H.getTile(ct),Ct=Pt.getBucket(q);if(!Ct)continue;const Ot=Ct.programConfigurations.get(q.id),Zt=L.useProgram("circle",Ot),Gt=Ct.layoutVertexBuffer,Kt=Ct.indexBuffer,bn=L.style.map.terrain&&L.style.map.terrain.getTerrainData(ct),sr={programConfiguration:Ot,program:Zt,layoutVertexBuffer:Gt,indexBuffer:Kt,uniformValues:km(L,ct,Pt,q),terrainData:bn};if(Se){const cn=Ct.segments.get();for(const Zn of cn)Et.push({segments:new a.$([Zn]),sortKey:Zn.sortKey,state:sr})}else Et.push({segments:Ct.segments,sortKey:0,state:sr})}Se&&Et.sort((He,ct)=>He.sortKey-ct.sortKey);for(const He of Et){const{programConfiguration:ct,program:Pt,layoutVertexBuffer:Ct,indexBuffer:Ot,uniformValues:Zt,terrainData:Gt}=He.state;Pt.draw(ze,De.TRIANGLES,Be,ke,Le,ci.disabled,Zt,Gt,q.id,Ct,Ot,He.segments,q.paint,L.transform.zoom,ct)}})(u,y,A,P);break;case"heatmap":(function(L,H,q,K){if(q.paint.get("heatmap-opacity")!==0)if(L.renderPass==="offscreen"){const te=L.context,le=te.gl,de=Gr.disabled,Se=new Yr([le.ONE,le.ONE],a.aO.transparent,[!0,!0,!0,!0]);(function(ze,De,Be){const ke=ze.gl;ze.activeTexture.set(ke.TEXTURE1),ze.viewport.set([0,0,De.width/4,De.height/4]);let Le=Be.heatmapFbo;if(Le)ke.bindTexture(ke.TEXTURE_2D,Le.colorAttachment.get()),ze.bindFramebuffer.set(Le.framebuffer);else{const Et=ke.createTexture();ke.bindTexture(ke.TEXTURE_2D,Et),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_WRAP_S,ke.CLAMP_TO_EDGE),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_WRAP_T,ke.CLAMP_TO_EDGE),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_MIN_FILTER,ke.LINEAR),ke.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_MAG_FILTER,ke.LINEAR),Le=Be.heatmapFbo=ze.createFramebuffer(De.width/4,De.height/4,!1,!1),function(He,ct,Pt,Ct){var Ot,Zt;const Gt=He.gl,Kt=(Ot=He.HALF_FLOAT)!==null&&Ot!==void 0?Ot:Gt.UNSIGNED_BYTE,bn=(Zt=He.RGBA16F)!==null&&Zt!==void 0?Zt:Gt.RGBA;Gt.texImage2D(Gt.TEXTURE_2D,0,bn,ct.width/4,ct.height/4,0,Gt.RGBA,Kt,null),Ct.colorAttachment.set(Pt)}(ze,De,Et,Le)}})(te,L,q),te.clear({color:a.aO.transparent});for(let ze=0;ze<K.length;ze++){const De=K[ze];if(H.hasRenderableParent(De))continue;const Be=H.getTile(De),ke=Be.getBucket(q);if(!ke)continue;const Le=ke.programConfigurations.get(q.id),Et=L.useProgram("heatmap",Le),{zoom:He}=L.transform;Et.draw(te,le.TRIANGLES,gr.disabled,de,Se,ci.disabled,Hr(De.posMatrix,Be,He,q.paint.get("heatmap-intensity")),null,q.id,ke.layoutVertexBuffer,ke.indexBuffer,ke.segments,q.paint,L.transform.zoom,Le)}te.viewport.set([0,0,L.width,L.height])}else L.renderPass==="translucent"&&(L.context.setColorMode(L.colorModeForRenderPass()),function(te,le){const de=te.context,Se=de.gl,ze=le.heatmapFbo;if(!ze)return;de.activeTexture.set(Se.TEXTURE0),Se.bindTexture(Se.TEXTURE_2D,ze.colorAttachment.get()),de.activeTexture.set(Se.TEXTURE1);let De=le.colorRampTexture;De||(De=le.colorRampTexture=new oe(de,le.colorRamp,Se.RGBA)),De.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),te.useProgram("heatmapTexture").draw(de,Se.TRIANGLES,gr.disabled,Gr.disabled,te.colorModeForRenderPass(),ci.disabled,((Be,ke,Le,Et)=>{const He=a.F();a.aN(He,0,Be.width,Be.height,0,0,1);const ct=Be.context.gl;return{u_matrix:He,u_world:[ct.drawingBufferWidth,ct.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ke.paint.get("heatmap-opacity")}})(te,le),null,le.id,te.viewportBuffer,te.quadTriangleIndexBuffer,te.viewportSegments,le.paint,te.transform.zoom)}(L,q))})(u,y,A,P);break;case"line":(function(L,H,q,K){if(L.renderPass!=="translucent")return;const te=q.paint.get("line-opacity"),le=q.paint.get("line-width");if(te.constantOr(1)===0||le.constantOr(1)===0)return;const de=L.depthModeForSublayer(0,gr.ReadOnly),Se=L.colorModeForRenderPass(),ze=q.paint.get("line-dasharray"),De=q.paint.get("line-pattern"),Be=De.constantOr(1),ke=q.paint.get("line-gradient"),Le=q.getCrossfadeParameters(),Et=Be?"linePattern":ze?"lineSDF":ke?"lineGradient":"line",He=L.context,ct=He.gl;let Pt=!0;for(const Ct of K){const Ot=H.getTile(Ct);if(Be&&!Ot.patternsLoaded())continue;const Zt=Ot.getBucket(q);if(!Zt)continue;const Gt=Zt.programConfigurations.get(q.id),Kt=L.context.program.get(),bn=L.useProgram(Et,Gt),sr=Pt||bn.program!==Kt,cn=L.style.map.terrain&&L.style.map.terrain.getTerrainData(Ct),Zn=De.constantOr(null);if(Zn&&Ot.imageAtlas){const rr=Ot.imageAtlas,fr=rr.patternPositions[Zn.to.toString()],dr=rr.patternPositions[Zn.from.toString()];fr&&dr&&Gt.setConstantPatternPositions(fr,dr)}const ur=cn?Ct:null,Mr=Be?Om(L,Ot,q,Le,ur):ze?ja(L,Ot,q,ze,Le,ur):ke?Tu(L,Ot,q,Zt.lineClipsArray.length,ur):Fh(L,Ot,q,ur);if(Be)He.activeTexture.set(ct.TEXTURE0),Ot.imageAtlasTexture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE),Gt.updatePaintBuffers(Le);else if(ze&&(sr||L.lineAtlas.dirty))He.activeTexture.set(ct.TEXTURE0),L.lineAtlas.bind(He);else if(ke){const rr=Zt.gradients[q.id];let fr=rr.texture;if(q.gradientVersion!==rr.version){let dr=256;if(q.stepInterpolant){const Vi=H.getSource().maxzoom,fi=Ct.canonical.z===Vi?Math.ceil(1<<L.transform.maxZoom-Ct.canonical.z):1;dr=a.ac(a.aT(Zt.maxLineLength/a.W*1024*fi),256,He.maxTextureSize)}rr.gradient=a.aU({expression:q.gradientExpression(),evaluationKey:"lineProgress",resolution:dr,image:rr.gradient||void 0,clips:Zt.lineClipsArray}),rr.texture?rr.texture.update(rr.gradient):rr.texture=new oe(He,rr.gradient,ct.RGBA),rr.version=q.gradientVersion,fr=rr.texture}He.activeTexture.set(ct.TEXTURE0),fr.bind(q.stepInterpolant?ct.NEAREST:ct.LINEAR,ct.CLAMP_TO_EDGE)}bn.draw(He,ct.TRIANGLES,de,L.stencilModeForClipping(Ct),Se,ci.disabled,Mr,cn,q.id,Zt.layoutVertexBuffer,Zt.indexBuffer,Zt.segments,q.paint,L.transform.zoom,Gt,Zt.layoutVertexBuffer2),Pt=!1}})(u,y,A,P);break;case"fill":(function(L,H,q,K){const te=q.paint.get("fill-color"),le=q.paint.get("fill-opacity");if(le.constantOr(1)===0)return;const de=L.colorModeForRenderPass(),Se=q.paint.get("fill-pattern"),ze=L.opaquePassEnabledForLayer()&&!Se.constantOr(1)&&te.constantOr(a.aO.transparent).a===1&&le.constantOr(0)===1?"opaque":"translucent";if(L.renderPass===ze){const De=L.depthModeForSublayer(1,L.renderPass==="opaque"?gr.ReadWrite:gr.ReadOnly);op(L,H,q,K,De,de,!1)}if(L.renderPass==="translucent"&&q.paint.get("fill-antialias")){const De=L.depthModeForSublayer(q.getPaintProperty("fill-outline-color")?2:0,gr.ReadOnly);op(L,H,q,K,De,de,!0)}})(u,y,A,P);break;case"fill-extrusion":(function(L,H,q,K){const te=q.paint.get("fill-extrusion-opacity");if(te!==0&&L.renderPass==="translucent"){const le=new gr(L.context.gl.LEQUAL,gr.ReadWrite,L.depthRangeFor3D);if(te!==1||q.paint.get("fill-extrusion-pattern").constantOr(1))Ru(L,H,q,K,le,Gr.disabled,Yr.disabled),Ru(L,H,q,K,le,L.stencilModeFor3D(),L.colorModeForRenderPass());else{const de=L.colorModeForRenderPass();Ru(L,H,q,K,le,Gr.disabled,de)}}})(u,y,A,P);break;case"hillshade":(function(L,H,q,K){if(L.renderPass!=="offscreen"&&L.renderPass!=="translucent")return;const te=L.context,le=L.depthModeForSublayer(0,gr.ReadOnly),de=L.colorModeForRenderPass(),[Se,ze]=L.renderPass==="translucent"?L.stencilConfigForOverlap(K):[{},K];for(const De of ze){const Be=H.getTile(De);Be.needsHillshadePrepare!==void 0&&Be.needsHillshadePrepare&&L.renderPass==="offscreen"?qh(L,Be,q,le,Gr.disabled,de):L.renderPass==="translucent"&&$m(L,De,Be,q,le,Se[De.overscaledZ],de)}te.viewport.set([0,0,L.width,L.height])})(u,y,A,P);break;case"raster":(function(L,H,q,K){if(L.renderPass!=="translucent"||q.paint.get("raster-opacity")===0||!K.length)return;const te=L.context,le=te.gl,de=H.getSource(),Se=L.useProgram("raster"),ze=L.colorModeForRenderPass(),[De,Be]=de instanceof _e?[{},K]:L.stencilConfigForOverlap(K),ke=Be[Be.length-1].overscaledZ,Le=!L.options.moving;for(const Et of Be){const He=L.depthModeForSublayer(Et.overscaledZ-ke,q.paint.get("raster-opacity")===1?gr.ReadWrite:gr.ReadOnly,le.LESS),ct=H.getTile(Et);ct.registerFadeDuration(q.paint.get("raster-fade-duration"));const Pt=H.findLoadedParent(Et,0),Ct=Nd(ct,Pt,H,q,L.transform,L.style.map.terrain);let Ot,Zt;const Gt=q.paint.get("raster-resampling")==="nearest"?le.NEAREST:le.LINEAR;te.activeTexture.set(le.TEXTURE0),ct.texture.bind(Gt,le.CLAMP_TO_EDGE,le.LINEAR_MIPMAP_NEAREST),te.activeTexture.set(le.TEXTURE1),Pt?(Pt.texture.bind(Gt,le.CLAMP_TO_EDGE,le.LINEAR_MIPMAP_NEAREST),Ot=Math.pow(2,Pt.tileID.overscaledZ-ct.tileID.overscaledZ),Zt=[ct.tileID.canonical.x*Ot%1,ct.tileID.canonical.y*Ot%1]):ct.texture.bind(Gt,le.CLAMP_TO_EDGE,le.LINEAR_MIPMAP_NEAREST);const Kt=L.style.map.terrain&&L.style.map.terrain.getTerrainData(Et),bn=Kt?Et:null,sr=bn?bn.posMatrix:L.transform.calculatePosMatrix(Et.toUnwrapped(),Le),cn=Jf(sr,Zt||[0,0],Ot||1,Ct,q);de instanceof _e?Se.draw(te,le.TRIANGLES,He,Gr.disabled,ze,ci.disabled,cn,Kt,q.id,de.boundsBuffer,L.quadTriangleIndexBuffer,de.boundsSegments):Se.draw(te,le.TRIANGLES,He,De[Et.overscaledZ],ze,ci.disabled,cn,Kt,q.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments)}})(u,y,A,P);break;case"background":(function(L,H,q,K){const te=q.paint.get("background-color"),le=q.paint.get("background-opacity");if(le===0)return;const de=L.context,Se=de.gl,ze=L.transform,De=ze.tileSize,Be=q.paint.get("background-pattern");if(L.isPatternMissing(Be))return;const ke=!Be&&te.a===1&&le===1&&L.opaquePassEnabledForLayer()?"opaque":"translucent";if(L.renderPass!==ke)return;const Le=Gr.disabled,Et=L.depthModeForSublayer(0,ke==="opaque"?gr.ReadWrite:gr.ReadOnly),He=L.colorModeForRenderPass(),ct=L.useProgram(Be?"backgroundPattern":"background"),Pt=K||ze.coveringTiles({tileSize:De,terrain:L.style.map.terrain});Be&&(de.activeTexture.set(Se.TEXTURE0),L.imageManager.bind(L.context));const Ct=q.getCrossfadeParameters();for(const Ot of Pt){const Zt=K?Ot.posMatrix:L.transform.calculatePosMatrix(Ot.toUnwrapped()),Gt=Be?K0(Zt,le,L,Be,{tileID:Ot,tileSize:De},Ct):H1(Zt,le,te),Kt=L.style.map.terrain&&L.style.map.terrain.getTerrainData(Ot);ct.draw(de,Se.TRIANGLES,Et,Le,He,ci.disabled,Gt,Kt,q.id,L.tileExtentBuffer,L.quadTriangleIndexBuffer,L.tileExtentSegments)}})(u,0,A,P);break;case"custom":(function(L,H,q){const K=L.context,te=q.implementation;if(L.renderPass==="offscreen"){const le=te.prerender;le&&(L.setCustomLayerDefaults(),K.setColorMode(L.colorModeForRenderPass()),le.call(te,K.gl,L.transform.customLayerMatrix()),K.setDirty(),L.setBaseState())}else if(L.renderPass==="translucent"){L.setCustomLayerDefaults(),K.setColorMode(L.colorModeForRenderPass()),K.setStencilMode(Gr.disabled);const le=te.renderingMode==="3d"?new gr(L.context.gl.LEQUAL,gr.ReadWrite,L.depthRangeFor3D):L.depthModeForSublayer(0,gr.ReadOnly);K.setDepthMode(le),te.render(K.gl,L.transform.customLayerMatrix()),K.setDirty(),L.setBaseState(),K.bindFramebuffer.set(null)}})(u,0,A)}}translatePosMatrix(u,y,A,P,L){if(!A[0]&&!A[1])return u;const H=L?P==="map"?this.transform.angle:0:P==="viewport"?-this.transform.angle:0;if(H){const te=Math.sin(H),le=Math.cos(H);A=[A[0]*le-A[1]*te,A[0]*te+A[1]*le]}const q=[L?A[0]:tr(y,A[0],this.transform.zoom),L?A[1]:tr(y,A[1],this.transform.zoom),0],K=new Float32Array(16);return a.H(K,u,q),K}saveTileTexture(u){const y=this._tileTextures[u.size[0]];y?y.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const y=this._tileTextures[u];return y&&y.length>0?y.pop():null}isPatternMissing(u){if(!u)return!1;if(!u.from||!u.to)return!0;const y=this.imageManager.getPattern(u.from.toString()),A=this.imageManager.getPattern(u.to.toString());return!y||!A}useProgram(u,y){this.cache=this.cache||{};const A=u+(y?y.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[A]||(this.cache[A]=new zy(this.context,bl[u],y,Ql[u],this._showOverdrawInspector,this.style.map.terrain)),this.cache[A]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new oe(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:u,drawingBufferHeight:y}=this.context.gl;return this.width!==u||this.height!==y}}class _s{constructor(u,y){this.points=u,this.planes=y}static fromInvProjectionMatrix(u,y,A){const P=Math.pow(2,A),L=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(q=>{const K=1/(q=a.af([],q,u))[3]/y*P;return a.a$(q,q,[K,K,1/q[3],K])}),H=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(q=>{const K=function(Se,ze){var De=ze[0],Be=ze[1],ke=ze[2],Le=De*De+Be*Be+ke*ke;return Le>0&&(Le=1/Math.sqrt(Le)),Se[0]=ze[0]*Le,Se[1]=ze[1]*Le,Se[2]=ze[2]*Le,Se}([],function(Se,ze,De){var Be=ze[0],ke=ze[1],Le=ze[2],Et=De[0],He=De[1],ct=De[2];return Se[0]=ke*ct-Le*He,Se[1]=Le*Et-Be*ct,Se[2]=Be*He-ke*Et,Se}([],J([],L[q[0]],L[q[1]]),J([],L[q[2]],L[q[1]]))),te=-((le=K)[0]*(de=L[q[1]])[0]+le[1]*de[1]+le[2]*de[2]);var le,de;return K.concat(te)});return new _s(L,H)}}class Ou{constructor(u,y){this.min=u,this.max=y,this.center=function(A,P,L){return A[0]=.5*P[0],A[1]=.5*P[1],A[2]=.5*P[2],A}([],function(A,P,L){return A[0]=P[0]+L[0],A[1]=P[1]+L[1],A[2]=P[2]+L[2],A}([],this.min,this.max))}quadrant(u){const y=[u%2==0,u<2],A=B(this.min),P=B(this.max);for(let L=0;L<y.length;L++)A[L]=y[L]?this.min[L]:this.center[L],P[L]=y[L]?this.center[L]:this.max[L];return P[2]=this.max[2],new Ou(A,P)}distanceX(u){return Math.max(Math.min(this.max[0],u[0]),this.min[0])-u[0]}distanceY(u){return Math.max(Math.min(this.max[1],u[1]),this.min[1])-u[1]}intersects(u){const y=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let A=!0;for(let P=0;P<u.planes.length;P++){const L=u.planes[P];let H=0;for(let q=0;q<y.length;q++)a.b0(L,y[q])>=0&&H++;if(H===0)return 0;H!==y.length&&(A=!1)}if(A)return 2;for(let P=0;P<3;P++){let L=Number.MAX_VALUE,H=-Number.MAX_VALUE;for(let q=0;q<u.points.length;q++){const K=u.points[q][P]-this.min[P];L=Math.min(L,K),H=Math.max(H,K)}if(H<0||L>this.max[P]-this.min[P])return 0}return 1}}class rc{constructor(u=0,y=0,A=0,P=0){if(isNaN(u)||u<0||isNaN(y)||y<0||isNaN(A)||A<0||isNaN(P)||P<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=y,this.left=A,this.right=P}interpolate(u,y,A){return y.top!=null&&u.top!=null&&(this.top=a.z.number(u.top,y.top,A)),y.bottom!=null&&u.bottom!=null&&(this.bottom=a.z.number(u.bottom,y.bottom,A)),y.left!=null&&u.left!=null&&(this.left=a.z.number(u.left,y.left,A)),y.right!=null&&u.right!=null&&(this.right=a.z.number(u.right,y.right,A)),this}getCenter(u,y){const A=a.ac((this.left+u-this.right)/2,0,u),P=a.ac((this.top+y-this.bottom)/2,0,y);return new a.P(A,P)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new rc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Um=85.051129;class Xh{constructor(u,y,A,P,L){this.tileSize=512,this._renderWorldCopies=L===void 0||!!L,this._minZoom=u||0,this._maxZoom=y||22,this._minPitch=A??0,this._maxPitch=P??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new rc,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const u=new Xh(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return u.apply(this),u}apply(u){this.tileSize=u.tileSize,this.latRange=u.latRange,this.width=u.width,this.height=u.height,this._center=u._center,this._elevation=u._elevation,this.minElevationForCurrentTile=u.minElevationForCurrentTile,this.zoom=u.zoom,this.angle=u.angle,this._fov=u._fov,this._pitch=u._pitch,this._unmodified=u._unmodified,this._edgeInsets=u._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(u){const y=-a.b1(u,-180,180)*Math.PI/180;this.angle!==y&&(this._unmodified=!1,this.angle=y,this._calcMatrices(),this.rotationMatrix=function(){var A=new a.A(4);return a.A!=Float32Array&&(A[1]=0,A[2]=0),A[0]=1,A[3]=1,A}(),function(A,P,L){var H=P[0],q=P[1],K=P[2],te=P[3],le=Math.sin(L),de=Math.cos(L);A[0]=H*de+K*le,A[1]=q*de+te*le,A[2]=H*-le+K*de,A[3]=q*-le+te*de}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(u){const y=a.ac(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==y&&(this._unmodified=!1,this._pitch=y,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=u/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(u){const y=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==y&&(this._unmodified=!1,this._zoom=y,this.tileZoom=Math.max(0,Math.floor(y)),this.scale=this.zoomScale(y),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(u){u!==this._elevation&&(this._elevation=u,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,y,A){this._unmodified=!1,this._edgeInsets.interpolate(u,y,A),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){const y=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,y)}getVisibleUnwrappedCoordinates(u){const y=[new a.b2(0,u)];if(this._renderWorldCopies){const A=this.pointCoordinate(new a.P(0,0)),P=this.pointCoordinate(new a.P(this.width,0)),L=this.pointCoordinate(new a.P(this.width,this.height)),H=this.pointCoordinate(new a.P(0,this.height)),q=Math.floor(Math.min(A.x,P.x,L.x,H.x)),K=Math.floor(Math.max(A.x,P.x,L.x,H.x)),te=1;for(let le=q-te;le<=K+te;le++)le!==0&&y.push(new a.b2(le,u))}return y}coveringTiles(u){var y,A;let P=this.coveringZoomLevel(u);const L=P;if(u.minzoom!==void 0&&P<u.minzoom)return[];u.maxzoom!==void 0&&P>u.maxzoom&&(P=u.maxzoom);const H=this.pointCoordinate(this.getCameraPoint()),q=a.Y.fromLngLat(this.center),K=Math.pow(2,P),te=[K*H.x,K*H.y,0],le=[K*q.x,K*q.y,0],de=_s.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,P);let Se=u.minzoom||0;!u.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Se=P);const ze=u.terrain?2/Math.min(this.tileSize,u.tileSize)*this.tileSize:3,De=He=>({aabb:new Ou([He*K,0,0],[(He+1)*K,K,0]),zoom:0,x:0,y:0,wrap:He,fullyVisible:!1}),Be=[],ke=[],Le=P,Et=u.reparseOverscaled?L:P;if(this._renderWorldCopies)for(let He=1;He<=3;He++)Be.push(De(-He)),Be.push(De(He));for(Be.push(De(0));Be.length>0;){const He=Be.pop(),ct=He.x,Pt=He.y;let Ct=He.fullyVisible;if(!Ct){const bn=He.aabb.intersects(de);if(bn===0)continue;Ct=bn===2}const Ot=u.terrain?te:le,Zt=He.aabb.distanceX(Ot),Gt=He.aabb.distanceY(Ot),Kt=Math.max(Math.abs(Zt),Math.abs(Gt));if(He.zoom===Le||Kt>ze+(1<<Le-He.zoom)-2&&He.zoom>=Se){const bn=Le-He.zoom,sr=te[0]-.5-(ct<<bn),cn=te[1]-.5-(Pt<<bn);ke.push({tileID:new a.Q(He.zoom===Le?Et:He.zoom,He.wrap,He.zoom,ct,Pt),distanceSq:V([le[0]-.5-ct,le[1]-.5-Pt]),tileDistanceToCamera:Math.sqrt(sr*sr+cn*cn)})}else for(let bn=0;bn<4;bn++){const sr=(ct<<1)+bn%2,cn=(Pt<<1)+(bn>>1),Zn=He.zoom+1;let ur=He.aabb.quadrant(bn);if(u.terrain){const Mr=new a.Q(Zn,He.wrap,Zn,sr,cn),rr=u.terrain.getMinMaxElevation(Mr),fr=(y=rr.minElevation)!==null&&y!==void 0?y:this.elevation,dr=(A=rr.maxElevation)!==null&&A!==void 0?A:this.elevation;ur=new Ou([ur.min[0],ur.min[1],fr],[ur.max[0],ur.max[1],dr])}Be.push({aabb:ur,zoom:Zn,x:sr,y:cn,wrap:He.wrap,fullyVisible:Ct})}}return ke.sort((He,ct)=>He.distanceSq-ct.distanceSq).map(He=>He.tileID)}resize(u,y){this.width=u,this.height=y,this.pixelsToGLUnits=[2/u,-2/y],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){const y=a.ac(u.lat,-85.051129,Um);return new a.P(a.N(u.lng)*this.worldSize,a.O(y)*this.worldSize)}unproject(u){return new a.Y(u.x/this.worldSize,u.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(u){const y=this.elevation,A=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,P=this.pointLocation(this.centerPoint,u),L=u.getElevationForLngLatZoom(P,this.tileZoom);if(!(this.elevation-L))return;const H=A+y-L,q=Math.cos(this._pitch)*this.cameraToCenterDistance/H/a.b3(1,P.lat),K=this.scaleZoom(q/this.tileSize);this._elevation=L,this._center=P,this.zoom=K}setLocationAtPoint(u,y){const A=this.pointCoordinate(y),P=this.pointCoordinate(this.centerPoint),L=this.locationCoordinate(u),H=new a.Y(L.x-(A.x-P.x),L.y-(A.y-P.y));this.center=this.coordinateLocation(H),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(u,y){return y?this.coordinatePoint(this.locationCoordinate(u),y.getElevationForLngLatZoom(u,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(u))}pointLocation(u,y){return this.coordinateLocation(this.pointCoordinate(u,y))}locationCoordinate(u){return a.Y.fromLngLat(u)}coordinateLocation(u){return u&&u.toLngLat()}pointCoordinate(u,y){if(y){const Se=y.pointCoordinate(u);if(Se!=null)return Se}const A=[u.x,u.y,0,1],P=[u.x,u.y,1,1];a.af(A,A,this.pixelMatrixInverse),a.af(P,P,this.pixelMatrixInverse);const L=A[3],H=P[3],q=A[1]/L,K=P[1]/H,te=A[2]/L,le=P[2]/H,de=te===le?0:(0-te)/(le-te);return new a.Y(a.z.number(A[0]/L,P[0]/H,de)/this.worldSize,a.z.number(q,K,de)/this.worldSize)}coordinatePoint(u,y=0,A=this.pixelMatrix){const P=[u.x*this.worldSize,u.y*this.worldSize,y,1];return a.af(P,P,A),new a.P(P[0]/P[3],P[1]/P[3])}getBounds(){const u=Math.max(0,this.height/2-this.getHorizon());return new vt().extend(this.pointLocation(new a.P(0,u))).extend(this.pointLocation(new a.P(this.width,u))).extend(this.pointLocation(new a.P(this.width,this.height))).extend(this.pointLocation(new a.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new vt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(u){u?(this.lngRange=[u.getWest(),u.getEast()],this.latRange=[u.getSouth(),u.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Um])}calculatePosMatrix(u,y=!1){const A=u.key,P=y?this._alignedPosMatrixCache:this._posMatrixCache;if(P[A])return P[A];const L=u.canonical,H=this.worldSize/this.zoomScale(L.z),q=L.x+Math.pow(2,L.z)*u.wrap,K=a.an(new Float64Array(16));return a.H(K,K,[q*H,L.y*H,0]),a.J(K,K,[H/a.W,H/a.W,1]),a.K(K,y?this.alignedProjMatrix:this.projMatrix,K),P[A]=new Float32Array(K),P[A]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(u,y){y=a.ac(+y,this.minZoom,this.maxZoom);const A={center:new a.M(u.lng,u.lat),zoom:y};let P=this.lngRange;if(!this._renderWorldCopies&&P===null){const He=179.9999999999;P=[-He,He]}const L=this.tileSize*this.zoomScale(A.zoom);let H=0,q=L,K=0,te=L,le=0,de=0;const{x:Se,y:ze}=this.size;if(this.latRange){const He=this.latRange;H=a.O(He[1])*L,q=a.O(He[0])*L,q-H<ze&&(le=ze/(q-H))}P&&(K=a.b1(a.N(P[0])*L,0,L),te=a.b1(a.N(P[1])*L,0,L),te<K&&(te+=L),te-K<Se&&(de=Se/(te-K)));const{x:De,y:Be}=this.project.call({worldSize:L},u);let ke,Le;const Et=Math.max(de||0,le||0);if(Et){const He=new a.P(de?(te+K)/2:De,le?(q+H)/2:Be);return A.center=this.unproject.call({worldSize:L},He).wrap(),A.zoom+=this.scaleZoom(Et),A}if(this.latRange){const He=ze/2;Be-He<H&&(Le=H+He),Be+He>q&&(Le=q-He)}if(P){const He=(K+te)/2;let ct=De;this._renderWorldCopies&&(ct=a.b1(De,He-L/2,He+L/2));const Pt=Se/2;ct-Pt<K&&(ke=K+Pt),ct+Pt>te&&(ke=te-Pt)}if(ke!==void 0||Le!==void 0){const He=new a.P(ke??De,Le??Be);A.center=this.unproject.call({worldSize:L},He).wrap()}return A}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const u=this._unmodified,{center:y,zoom:A}=this.getConstrained(this.center,this.zoom);this.center=y,this.zoom=A,this._unmodified=u,this._constraining=!1}_calcMatrices(){if(!this.height)return;const u=this.centerOffset,y=this.point.x,A=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.b3(1,this.center.lat)*this.worldSize;let P=a.an(new Float64Array(16));a.J(P,P,[this.width/2,-this.height/2,1]),a.H(P,P,[1,-1,0]),this.labelPlaneMatrix=P,P=a.an(new Float64Array(16)),a.J(P,P,[1,-1,1]),a.H(P,P,[-1,-1,0]),a.J(P,P,[2/this.width,2/this.height,1]),this.glCoordMatrix=P;const L=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),H=Math.min(this.elevation,this.minElevationForCurrentTile),q=L-H*this._pixelPerMeter/Math.cos(this._pitch),K=H<0?q:L,te=Math.PI/2+this._pitch,le=this._fov*(.5+u.y/this.height),de=Math.sin(le)*K/Math.sin(a.ac(Math.PI-te-le,.01,Math.PI-.01)),Se=this.getHorizon(),ze=2*Math.atan(Se/this.cameraToCenterDistance)*(.5+u.y/(2*Se)),De=Math.sin(ze)*K/Math.sin(a.ac(Math.PI-te-ze,.01,Math.PI-.01)),Be=Math.min(de,De),ke=1.01*(Math.cos(Math.PI/2-this._pitch)*Be+K),Le=this.height/50;P=new Float64Array(16),a.b4(P,this._fov,this.width/this.height,Le,ke),P[8]=2*-u.x/this.width,P[9]=2*u.y/this.height,a.J(P,P,[1,-1,1]),a.H(P,P,[0,0,-this.cameraToCenterDistance]),a.b5(P,P,this._pitch),a.ad(P,P,this.angle),a.H(P,P,[-y,-A,0]),this.mercatorMatrix=a.J([],P,[this.worldSize,this.worldSize,this.worldSize]),a.J(P,P,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.K(new Float64Array(16),this.labelPlaneMatrix,P),a.H(P,P,[0,0,-this.elevation]),this.projMatrix=P,this.invProjMatrix=a.ar([],P),this.pixelMatrix3D=a.K(new Float64Array(16),this.labelPlaneMatrix,P);const Et=this.width%2/2,He=this.height%2/2,ct=Math.cos(this.angle),Pt=Math.sin(this.angle),Ct=y-Math.round(y)+ct*Et+Pt*He,Ot=A-Math.round(A)+ct*He+Pt*Et,Zt=new Float64Array(P);if(a.H(Zt,Zt,[Ct>.5?Ct-1:Ct,Ot>.5?Ot-1:Ot,0]),this.alignedProjMatrix=Zt,P=a.ar(new Float64Array(16),this.pixelMatrix),!P)throw new Error("failed to invert matrix");this.pixelMatrixInverse=P,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const u=this.pointCoordinate(new a.P(0,0)),y=[u.x*this.worldSize,u.y*this.worldSize,0,1];return a.af(y,y,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,u))}getCameraQueryGeometry(u){const y=this.getCameraPoint();if(u.length===1)return[u[0],y];{let A=y.x,P=y.y,L=y.x,H=y.y;for(const q of u)A=Math.min(A,q.x),P=Math.min(P,q.y),L=Math.max(L,q.x),H=Math.max(H,q.y);return[new a.P(A,P),new a.P(L,P),new a.P(L,H),new a.P(A,H),new a.P(A,P)]}}lngLatToCameraDepth(u,y){const A=this.locationCoordinate(u),P=[A.x*this.worldSize,A.y*this.worldSize,y,1];return a.af(P,P,this.projMatrix),P[2]/P[3]}}function Li(R,u){let y,A=!1,P=null,L=null;const H=()=>{P=null,A&&(R.apply(L,y),P=setTimeout(H,u),A=!1)};return(...q)=>(A=!0,L=this,y=q,P||H(),P)}class Kh{constructor(u){this._getCurrentHash=()=>{const y=window.location.hash.replace("#","");if(this._hashName){let A;return y.split("&").map(P=>P.split("=")).forEach(P=>{P[0]===this._hashName&&(A=P)}),(A&&A[1]||"").split("/")}return y.split("/")},this._onHashChange=()=>{const y=this._getCurrentHash();if(y.length>=3&&!y.some(A=>isNaN(A))){const A=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(y[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+y[2],+y[1]],zoom:+y[0],bearing:A,pitch:+(y[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const y=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,y)}catch{}},this._updateHash=Li(this._updateHashUnthrottled,300),this._hashName=u&&encodeURIComponent(u)}addTo(u){return this._map=u,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(u){const y=this._map.getCenter(),A=Math.round(100*this._map.getZoom())/100,P=Math.ceil((A*Math.LN2+Math.log(512/360/.5))/Math.LN10),L=Math.pow(10,P),H=Math.round(y.lng*L)/L,q=Math.round(y.lat*L)/L,K=this._map.getBearing(),te=this._map.getPitch();let le="";if(le+=u?`/${H}/${q}/${A}`:`${A}/${q}/${H}`,(K||te)&&(le+="/"+Math.round(10*K)/10),te&&(le+=`/${Math.round(te)}`),this._hashName){const de=this._hashName;let Se=!1;const ze=window.location.hash.slice(1).split("&").map(De=>{const Be=De.split("=")[0];return Be===de?(Se=!0,`${Be}=${le}`):De}).filter(De=>De);return Se||ze.push(`${de}=${le}`),`#${ze.join("&")}`}return`#${le}`}}const Ha={linearity:.3,easing:a.b6(0,0,.3,1)},Vm=a.e({deceleration:2500,maxSpeed:1400},Ha),sp=a.e({deceleration:20,maxSpeed:1400},Ha),ya=a.e({deceleration:1e3,maxSpeed:360},Ha),Bd=a.e({deceleration:1e3,maxSpeed:90},Ha);class Ji{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:p.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,y=p.now();for(;u.length>0&&y-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const y={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:L}of this._inertiaBuffer)y.zoom+=L.zoomDelta||0,y.bearing+=L.bearingDelta||0,y.pitch+=L.pitchDelta||0,L.panDelta&&y.pan._add(L.panDelta),L.around&&(y.around=L.around),L.pinchAround&&(y.pinchAround=L.pinchAround);const A=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,P={};if(y.pan.mag()){const L=io(y.pan.mag(),A,a.e({},Vm,u||{}));P.offset=y.pan.mult(L.amount/y.pan.mag()),P.center=this._map.transform.center,xo(P,L)}if(y.zoom){const L=io(y.zoom,A,sp);P.zoom=this._map.transform.zoom+L.amount,xo(P,L)}if(y.bearing){const L=io(y.bearing,A,ya);P.bearing=this._map.transform.bearing+a.ac(L.amount,-179,179),xo(P,L)}if(y.pitch){const L=io(y.pitch,A,Bd);P.pitch=this._map.transform.pitch+L.amount,xo(P,L)}if(P.zoom||P.bearing){const L=y.pinchAround===void 0?y.around:y.pinchAround;P.around=L?this._map.unproject(L):this._map.getCenter()}return this.clear(),a.e(P,{noMoveStart:!0})}}function xo(R,u){(!R.duration||R.duration<u.duration)&&(R.duration=u.duration,R.easing=u.easing)}function io(R,u,y){const{maxSpeed:A,linearity:P,deceleration:L}=y,H=a.ac(R*P/(u/1e3),-A,A),q=Math.abs(H)/(L*P);return{easing:y.easing,duration:1e3*q,amount:H*(q/2)}}class uo extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,y,A,P={}){const L=g.mousePos(y.getCanvas(),A),H=y.unproject(L);super(u,a.e({point:L,lngLat:H,originalEvent:A},P)),this._defaultPrevented=!1,this.target=y}}class ic extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,y,A){const P=u==="touchend"?A.changedTouches:A.touches,L=g.touchPos(y.getCanvasContainer(),P),H=L.map(K=>y.unproject(K)),q=L.reduce((K,te,le,de)=>K.add(te.div(de.length)),new a.P(0,0));super(u,{points:L,point:q,lngLats:H,lngLat:y.unproject(q),originalEvent:A}),this._defaultPrevented=!1}}class xs extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,y,A){super(u,{originalEvent:A}),this._defaultPrevented=!1}}class oc{constructor(u,y){this._map=u,this._clickTolerance=y.clickTolerance}reset(){delete this._mousedownPos}wheel(u){return this._firePreventable(new xs(u.type,this._map,u))}mousedown(u,y){return this._mousedownPos=y,this._firePreventable(new uo(u.type,this._map,u))}mouseup(u){this._map.fire(new uo(u.type,this._map,u))}click(u,y){this._mousedownPos&&this._mousedownPos.dist(y)>=this._clickTolerance||this._map.fire(new uo(u.type,this._map,u))}dblclick(u){return this._firePreventable(new uo(u.type,this._map,u))}mouseover(u){this._map.fire(new uo(u.type,this._map,u))}mouseout(u){this._map.fire(new uo(u.type,this._map,u))}touchstart(u){return this._firePreventable(new ic(u.type,this._map,u))}touchmove(u){this._map.fire(new ic(u.type,this._map,u))}touchend(u){this._map.fire(new ic(u.type,this._map,u))}touchcancel(u){this._map.fire(new ic(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Zo{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(u){this._map.fire(new uo(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new uo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._ignoreContextMenu||this._map.fire(new uo(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class bs{constructor(u){this._map=u}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(u){return this.transform.pointLocation(a.P.convert(u),this._map.terrain)}}class Lu{constructor(u,y){this._map=u,this._tr=new bs(u),this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=y.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,y){this.isEnabled()&&u.shiftKey&&u.button===0&&(g.disableDrag(),this._startPos=this._lastPos=y,this._active=!0)}mousemoveWindow(u,y){if(!this._active)return;const A=y;if(this._lastPos.equals(A)||!this._box&&A.dist(this._startPos)<this._clickTolerance)return;const P=this._startPos;this._lastPos=A,this._box||(this._box=g.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",u));const L=Math.min(P.x,A.x),H=Math.max(P.x,A.x),q=Math.min(P.y,A.y),K=Math.max(P.y,A.y);g.setTransform(this._box,`translate(${L}px,${q}px)`),this._box.style.width=H-L+"px",this._box.style.height=K-q+"px"}mouseupWindow(u,y){if(!this._active||u.button!==0)return;const A=this._startPos,P=y;if(this.reset(),g.suppressClick(),A.x!==P.x||A.y!==P.y)return this._map.fire(new a.k("boxzoomend",{originalEvent:u})),{cameraAnimation:L=>L.fitScreenCoordinates(A,P,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",u)}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(g.remove(this._box),this._box=null),g.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(u,y){return this._map.fire(new a.k(u,{originalEvent:y}))}}function ap(R,u){if(R.length!==u.length)throw new Error(`The number of touches and points are not equal - touches ${R.length}, points ${u.length}`);const y={};for(let A=0;A<R.length;A++)y[R[A].identifier]=u[A];return y}class Lc{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(u,y,A){(this.centroid||A.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=u.timeStamp),A.length===this.numTouches&&(this.centroid=function(P){const L=new a.P(0,0);for(const H of P)L._add(H);return L.div(P.length)}(y),this.touches=ap(A,y)))}touchmove(u,y,A){if(this.aborted||!this.centroid)return;const P=ap(A,y);for(const L in this.touches){const H=P[L];(!H||H.dist(this.touches[L])>30)&&(this.aborted=!0)}}touchend(u,y,A){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),A.length===0){const P=!this.aborted&&this.centroid;if(this.reset(),P)return P}}}class Ga{constructor(u){this.singleTap=new Lc(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(u,y,A){this.singleTap.touchstart(u,y,A)}touchmove(u,y,A){this.singleTap.touchmove(u,y,A)}touchend(u,y,A){const P=this.singleTap.touchend(u,y,A);if(P){const L=u.timeStamp-this.lastTime<500,H=!this.lastTap||this.lastTap.dist(P)<30;if(L&&H||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=P,this.count===this.numTaps)return this.reset(),P}}}class Du{constructor(u){this._tr=new bs(u),this._zoomIn=new Ga({numTouches:1,numTaps:2}),this._zoomOut=new Ga({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,y,A){this._zoomIn.touchstart(u,y,A),this._zoomOut.touchstart(u,y,A)}touchmove(u,y,A){this._zoomIn.touchmove(u,y,A),this._zoomOut.touchmove(u,y,A)}touchend(u,y,A){const P=this._zoomIn.touchend(u,y,A),L=this._zoomOut.touchend(u,y,A),H=this._tr;return P?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:q=>q.easeTo({duration:300,zoom:H.zoom+1,around:H.unproject(P)},{originalEvent:u})}):L?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:q=>q.easeTo({duration:300,zoom:H.zoom-1,around:H.unproject(L)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qa{constructor(u){this._enabled=!!u.enable,this._moveStateManager=u.moveStateManager,this._clickTolerance=u.clickTolerance||1,this._moveFunction=u.move,this._activateOnStart=!!u.activateOnStart,u.assignEvents(this),this.reset()}reset(u){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(u)}_move(...u){const y=this._moveFunction(...u);if(y.bearingDelta||y.pitchDelta||y.around||y.panDelta)return this._active=!0,y}dragStart(u,y){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(u)&&(this._moveStateManager.startMove(u),this._lastPoint=y.length?y[0]:y,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(u,y){if(!this.isEnabled())return;const A=this._lastPoint;if(!A)return;if(u.preventDefault(),!this._moveStateManager.isValidMoveEvent(u))return void this.reset(u);const P=y.length?y[0]:y;return!this._moved&&P.dist(A)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=P,this._move(A,P))}dragEnd(u){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(u)&&(this._moved&&g.suppressClick(),this.reset(u))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const El={0:1,2:2};class wn{constructor(u){this._correctEvent=u.checkCorrectEvent}startMove(u){const y=g.mouseButton(u);this._eventButton=y}endMove(u){delete this._eventButton}isValidStartEvent(u){return this._correctEvent(u)}isValidMoveEvent(u){return!function(y,A){const P=El[A];return y.buttons===void 0||(y.buttons&P)!==P}(u,this._eventButton)}isValidEndEvent(u){return g.mouseButton(u)===this._eventButton}}class Wm{constructor(){this._firstTouch=void 0}_isOneFingerTouch(u){return u.targetTouches.length===1}_isSameTouchEvent(u){return u.targetTouches[0].identifier===this._firstTouch}startMove(u){this._firstTouch=u.targetTouches[0].identifier}endMove(u){delete this._firstTouch}isValidStartEvent(u){return this._isOneFingerTouch(u)}isValidMoveEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}isValidEndEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}}const Nu=R=>{R.mousedown=R.dragStart,R.mousemoveWindow=R.dragMove,R.mouseup=R.dragEnd,R.contextmenu=function(u){u.preventDefault()}},$d=({enable:R,clickTolerance:u,bearingDegreesPerPixelMoved:y=.8})=>{const A=new wn({checkCorrectEvent:P=>g.mouseButton(P)===0&&P.ctrlKey||g.mouseButton(P)===2});return new qa({clickTolerance:u,move:(P,L)=>({bearingDelta:(L.x-P.x)*y}),moveStateManager:A,enable:R,assignEvents:Nu})},Hm=({enable:R,clickTolerance:u,pitchDegreesPerPixelMoved:y=-.5})=>{const A=new wn({checkCorrectEvent:P=>g.mouseButton(P)===0&&P.ctrlKey||g.mouseButton(P)===2});return new qa({clickTolerance:u,move:(P,L)=>({pitchDelta:(L.y-P.y)*y}),moveStateManager:A,enable:R,assignEvents:Nu})};class yn{constructor(u,y){this._clickTolerance=u.clickTolerance||1,this._map=y,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(u,y,A){return this._calculateTransform(u,y,A)}touchmove(u,y,A){if(this._active&&!(A.length<this.minTouchs()))return u.preventDefault(),this._calculateTransform(u,y,A)}touchend(u,y,A){this._calculateTransform(u,y,A),this._active&&A.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,y,A){A.length>0&&(this._active=!0);const P=ap(A,y),L=new a.P(0,0),H=new a.P(0,0);let q=0;for(const te in P){const le=P[te],de=this._touches[te];de&&(L._add(le),H._add(le.sub(de)),q++,P[te]=le)}if(this._touches=P,q<this.minTouchs()||!H.mag())return;const K=H.div(q);return this._sum._add(K),this._sum.mag()<this._clickTolerance?void 0:{around:L.div(q),panDelta:K}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class jd{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(u,y,A){this._firstTwoTouches||A.length<2||(this._firstTwoTouches=[A[0].identifier,A[1].identifier],this._start([y[0],y[1]]))}touchmove(u,y,A){if(!this._firstTwoTouches)return;u.preventDefault();const[P,L]=this._firstTwoTouches,H=zu(A,y,P),q=zu(A,y,L);if(!H||!q)return;const K=this._aroundCenter?null:H.add(q).div(2);return this._move([H,q],K,u)}touchend(u,y,A){if(!this._firstTwoTouches)return;const[P,L]=this._firstTwoTouches,H=zu(A,y,P),q=zu(A,y,L);H&&q||(this._active&&g.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function zu(R,u,y){for(let A=0;A<R.length;A++)if(R[A].identifier===y)return u[A]}function qy(R,u){return Math.log(R/u)/Math.LN2}class Ud extends jd{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,y){const A=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(qy(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:qy(this._distance,A),pinchAround:y}}}function Zh(R,u){return 180*R.angleWith(u)/Math.PI}class lp extends jd{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,y,A){const P=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Zh(this._vector,P),pinchAround:y}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const y=25/(Math.PI*this._minDiameter)*360,A=Zh(u,this._startVector);return Math.abs(A)<y}}function Vd(R){return Math.abs(R.y)>Math.abs(R.x)}class Yy extends jd{constructor(u){super(),this._currentTouchCount=0,this._map=u}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(u,y,A){super.touchstart(u,y,A),this._currentTouchCount=A.length}_start(u){this._lastPoints=u,Vd(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,y,A){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const P=u[0].sub(this._lastPoints[0]),L=u[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(P,L,A.timeStamp),this._valid?(this._lastPoints=u,this._active=!0,{pitchDelta:(P.y+L.y)/2*-.5}):void 0}gestureBeginsVertically(u,y,A){if(this._valid!==void 0)return this._valid;const P=u.mag()>=2,L=y.mag()>=2;if(!P&&!L)return;if(!P||!L)return this._firstMove===void 0&&(this._firstMove=A),A-this._firstMove<100&&void 0;const H=u.y>0==y.y>0;return Vd(u)&&Vd(y)&&H}}const Fu={panStep:100,bearingStep:15,pitchStep:10};class Mi{constructor(u){this._tr=new bs(u);const y=Fu;this._panStep=y.panStep,this._bearingStep=y.bearingStep,this._pitchStep=y.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let y=0,A=0,P=0,L=0,H=0;switch(u.keyCode){case 61:case 107:case 171:case 187:y=1;break;case 189:case 109:case 173:y=-1;break;case 37:u.shiftKey?A=-1:(u.preventDefault(),L=-1);break;case 39:u.shiftKey?A=1:(u.preventDefault(),L=1);break;case 38:u.shiftKey?P=1:(u.preventDefault(),H=-1);break;case 40:u.shiftKey?P=-1:(u.preventDefault(),H=1);break;default:return}return this._rotationDisabled&&(A=0,P=0),{cameraAnimation:q=>{const K=this._tr;q.easeTo({duration:300,easeId:"keyboardHandler",easing:cp,zoom:y?Math.round(K.zoom)+y*(u.shiftKey?2:1):K.zoom,bearing:K.bearing+A*this._bearingStep,pitch:K.pitch+P*this._pitchStep,offset:[-L*this._panStep,-H*this._panStep],center:K.center},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function cp(R){return R*(2-R)}const Jh=4.000244140625;class Gm{constructor(u,y){this._onTimeout=A=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(A)},this._map=u,this._tr=new bs(u),this._triggerRenderFrame=y,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!u&&u.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(u){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!u[this._map.cooperativeGestures._bypassKey])return;let y=u.deltaMode===WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const A=p.now(),P=A-(this._lastWheelEventTime||0);this._lastWheelEventTime=A,y!==0&&y%Jh==0?this._type="wheel":y!==0&&Math.abs(y)<4?this._type="trackpad":P>400?(this._type=null,this._lastValue=y,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(P*y)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,y+=this._lastValue)),u.shiftKey&&y&&(y/=4),this._type&&(this._lastWheelEvent=u,this._delta-=y,this._active||this._start(u)),u.preventDefault()}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const y=g.mousePos(this._map.getCanvas(),u),A=this._tr;this._around=y.y>A.transform.height/2-A.transform.getHorizon()?a.M.convert(this._aroundCenter?A.center:A.unproject(y)):a.M.convert(A.center),this._aroundPoint=A.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._tr.transform;if(this._delta!==0){const q=this._type==="wheel"&&Math.abs(this._delta)>Jh?this._wheelZoomRate:this._defaultZoomRate;let K=2/(1+Math.exp(-Math.abs(this._delta*q)));this._delta<0&&K!==0&&(K=1/K);const te=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):u.scale;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(te*K))),this._type==="wheel"&&(this._startZoom=u.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const y=typeof this._targetZoom=="number"?this._targetZoom:u.zoom,A=this._startZoom,P=this._easing;let L,H=!1;if(this._type==="wheel"&&A&&P){const q=Math.min((p.now()-this._lastWheelEventTime)/200,1),K=P(q);L=a.z.number(A,y,K),q<1?this._frameId||(this._frameId=!0):H=!0}else L=y,H=!0;return this._active=!0,H&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!H,zoomDelta:L-u.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let y=a.b7;if(this._prevEase){const A=this._prevEase,P=(p.now()-A.start)/A.duration,L=A.easing(P+.01)-A.easing(P),H=.27/Math.sqrt(L*L+1e-4)*.01,q=Math.sqrt(.0729-H*H);y=a.b6(H,q,.25,1)}return this._prevEase={start:p.now(),duration:u,easing:y},y}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class qm{constructor(u,y){this._clickZoom=u,this._tapZoom=y}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Z0{constructor(u){this._tr=new bs(u),this.reset()}reset(){this._active=!1}dblclick(u,y){return u.preventDefault(),{cameraAnimation:A=>{A.easeTo({duration:300,zoom:this._tr.zoom+(u.shiftKey?-1:1),around:this._tr.unproject(y)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class J0{constructor(){this._tap=new Ga({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(u,y,A){if(!this._swipePoint)if(this._tapTime){const P=y[0],L=u.timeStamp-this._tapTime<500,H=this._tapPoint.dist(P)<30;L&&H?A.length>0&&(this._swipePoint=P,this._swipeTouch=A[0].identifier):this.reset()}else this._tap.touchstart(u,y,A)}touchmove(u,y,A){if(this._tapTime){if(this._swipePoint){if(A[0].identifier!==this._swipeTouch)return;const P=y[0],L=P.y-this._swipePoint.y;return this._swipePoint=P,u.preventDefault(),this._active=!0,{zoomDelta:L/128}}}else this._tap.touchmove(u,y,A)}touchend(u,y,A){if(this._tapTime)this._swipePoint&&A.length===0&&this.reset();else{const P=this._tap.touchend(u,y,A);P&&(this._tapTime=u.timeStamp,this._tapPoint=P)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tl{constructor(u,y,A){this._el=u,this._mousePan=y,this._touchPan=A}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class up{constructor(u,y,A){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=y,this._mousePitch=A}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class On{constructor(u,y,A,P){this._el=u,this._touchZoom=y,this._touchRotate=A,this._tapDragZoom=P,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Xn{constructor(u,y){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=u,this._options=y,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const u=this._map.getCanvasContainer();u.classList.add("maplibregl-cooperative-gestures"),this._container=g.create("div","maplibregl-cooperative-gesture-screen",u);let y=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(y=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const A=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),P=document.createElement("div");P.className="maplibregl-desktop-message",P.textContent=y,this._container.appendChild(P);const L=document.createElement("div");L.className="maplibregl-mobile-message",L.textContent=A,this._container.appendChild(L),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(g.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(u){this._onCooperativeGesture(u.touches.length===1)}wheel(u){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!u[this._bypassKey])}_onCooperativeGesture(u){this._enabled&&u&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Bu=R=>R.zoom||R.drag||R.pitch||R.rotate;class Ym extends a.k{}function $u(R){return R.panDelta&&R.panDelta.mag()||R.zoomDelta||R.bearingDelta||R.pitchDelta}class ea{constructor(u,y){this.handleWindowEvent=P=>{this.handleEvent(P,`${P.type}Window`)},this.handleEvent=(P,L)=>{if(P.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const H=P.type==="renderFrame"?void 0:P,q={needsRenderFrame:!1},K={},te={},le=P.touches,de=le?this._getMapTouches(le):void 0,Se=de?g.touchPos(this._map.getCanvas(),de):g.mousePos(this._map.getCanvas(),P);for(const{handlerName:Be,handler:ke,allowed:Le}of this._handlers){if(!ke.isEnabled())continue;let Et;this._blockedByActive(te,Le,Be)?ke.reset():ke[L||P.type]&&(Et=ke[L||P.type](P,Se,de),this.mergeHandlerResult(q,K,Et,Be,H),Et&&Et.needsRenderFrame&&this._triggerRenderFrame()),(Et||ke.isActive())&&(te[Be]=ke)}const ze={};for(const Be in this._previousActiveHandlers)te[Be]||(ze[Be]=H);this._previousActiveHandlers=te,(Object.keys(ze).length||$u(q))&&(this._changes.push([q,K,ze]),this._triggerRenderFrame()),(Object.keys(te).length||$u(q))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:De}=q;De&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],De(this._map))},this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ji(u),this._bearingSnap=y.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(y);const A=this._el;this._listeners=[[A,"touchstart",{passive:!0}],[A,"touchmove",{passive:!1}],[A,"touchend",void 0],[A,"touchcancel",void 0],[A,"mousedown",void 0],[A,"mousemove",void 0],[A,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[A,"mouseover",void 0],[A,"mouseout",void 0],[A,"dblclick",void 0],[A,"click",void 0],[A,"keydown",{capture:!1}],[A,"keyup",void 0],[A,"wheel",{passive:!1}],[A,"contextmenu",void 0],[window,"blur",void 0]];for(const[P,L,H]of this._listeners)g.addEventListener(P,L,P===document?this.handleWindowEvent:this.handleEvent,H)}destroy(){for(const[u,y,A]of this._listeners)g.removeEventListener(u,y,u===document?this.handleWindowEvent:this.handleEvent,A)}_addDefaultHandlers(u){const y=this._map,A=y.getCanvasContainer();this._add("mapEvent",new oc(y,u));const P=y.boxZoom=new Lu(y,u);this._add("boxZoom",P),u.interactive&&u.boxZoom&&P.enable();const L=y.cooperativeGestures=new Xn(y,u.cooperativeGestures);this._add("cooperativeGestures",L),u.cooperativeGestures&&L.enable();const H=new Du(y),q=new Z0(y);y.doubleClickZoom=new qm(q,H),this._add("tapZoom",H),this._add("clickZoom",q),u.interactive&&u.doubleClickZoom&&y.doubleClickZoom.enable();const K=new J0;this._add("tapDragZoom",K);const te=y.touchPitch=new Yy(y);this._add("touchPitch",te),u.interactive&&u.touchPitch&&y.touchPitch.enable(u.touchPitch);const le=$d(u),de=Hm(u);y.dragRotate=new up(u,le,de),this._add("mouseRotate",le,["mousePitch"]),this._add("mousePitch",de,["mouseRotate"]),u.interactive&&u.dragRotate&&y.dragRotate.enable();const Se=(({enable:Et,clickTolerance:He})=>{const ct=new wn({checkCorrectEvent:Pt=>g.mouseButton(Pt)===0&&!Pt.ctrlKey});return new qa({clickTolerance:He,move:(Pt,Ct)=>({around:Ct,panDelta:Ct.sub(Pt)}),activateOnStart:!0,moveStateManager:ct,enable:Et,assignEvents:Nu})})(u),ze=new yn(u,y);y.dragPan=new Tl(A,Se,ze),this._add("mousePan",Se),this._add("touchPan",ze,["touchZoom","touchRotate"]),u.interactive&&u.dragPan&&y.dragPan.enable(u.dragPan);const De=new lp,Be=new Ud;y.touchZoomRotate=new On(A,Be,De,K),this._add("touchRotate",De,["touchPan","touchZoom"]),this._add("touchZoom",Be,["touchPan","touchRotate"]),u.interactive&&u.touchZoomRotate&&y.touchZoomRotate.enable(u.touchZoomRotate);const ke=y.scrollZoom=new Gm(y,()=>this._triggerRenderFrame());this._add("scrollZoom",ke,["mousePan"]),u.interactive&&u.scrollZoom&&y.scrollZoom.enable(u.scrollZoom);const Le=y.keyboard=new Mi(y);this._add("keyboard",Le),u.interactive&&u.keyboard&&y.keyboard.enable(),this._add("blockableMapEvent",new Zo(y))}_add(u,y,A){this._handlers.push({handlerName:u,handler:y,allowed:A}),this._handlersById[u]=y}stop(u){if(!this._updatingCamera){for(const{handler:y}of this._handlers)y.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Bu(this._eventsInProgress)||this.isZooming()}_blockedByActive(u,y,A){for(const P in u)if(P!==A&&(!y||y.indexOf(P)<0))return!0;return!1}_getMapTouches(u){const y=[];for(const A of u)this._el.contains(A.target)&&y.push(A);return y}mergeHandlerResult(u,y,A,P,L){if(!A)return;a.e(u,A);const H={handlerName:P,originalEvent:A.originalEvent||L};A.zoomDelta!==void 0&&(y.zoom=H),A.panDelta!==void 0&&(y.drag=H),A.pitchDelta!==void 0&&(y.pitch=H),A.bearingDelta!==void 0&&(y.rotate=H)}_applyChanges(){const u={},y={},A={};for(const[P,L,H]of this._changes)P.panDelta&&(u.panDelta=(u.panDelta||new a.P(0,0))._add(P.panDelta)),P.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+P.zoomDelta),P.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+P.bearingDelta),P.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+P.pitchDelta),P.around!==void 0&&(u.around=P.around),P.pinchAround!==void 0&&(u.pinchAround=P.pinchAround),P.noInertia&&(u.noInertia=P.noInertia),a.e(y,L),a.e(A,H);this._updateMapTransform(u,y,A),this._changes=[]}_updateMapTransform(u,y,A){const P=this._map,L=P._getTransformForUpdate(),H=P.terrain;if(!($u(u)||H&&this._terrainMovement))return this._fireEvents(y,A,!0);let{panDelta:q,zoomDelta:K,bearingDelta:te,pitchDelta:le,around:de,pinchAround:Se}=u;Se!==void 0&&(de=Se),P._stop(!0),de=de||P.transform.centerPoint;const ze=L.pointLocation(q?de.sub(q):de);te&&(L.bearing+=te),le&&(L.pitch+=le),K&&(L.zoom+=K),H?this._terrainMovement||!y.drag&&!y.zoom?y.drag&&this._terrainMovement?L.center=L.pointLocation(L.centerPoint.sub(q)):L.setLocationAtPoint(ze,de):(this._terrainMovement=!0,this._map._elevationFreeze=!0,L.setLocationAtPoint(ze,de),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,L.recalculateZoom(P.terrain)})):L.setLocationAtPoint(ze,de),P._applyUpdatedTransform(L),this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(y,A,!0)}_fireEvents(u,y,A){const P=Bu(this._eventsInProgress),L=Bu(u),H={};for(const le in u){const{originalEvent:de}=u[le];this._eventsInProgress[le]||(H[`${le}start`]=de),this._eventsInProgress[le]=u[le]}!P&&L&&this._fireEvent("movestart",L.originalEvent);for(const le in H)this._fireEvent(le,H[le]);L&&this._fireEvent("move",L.originalEvent);for(const le in u){const{originalEvent:de}=u[le];this._fireEvent(le,de)}const q={};let K;for(const le in this._eventsInProgress){const{handlerName:de,originalEvent:Se}=this._eventsInProgress[le];this._handlersById[de].isActive()||(delete this._eventsInProgress[le],K=y[de]||Se,q[`${le}end`]=K)}for(const le in q)this._fireEvent(le,q[le]);const te=Bu(this._eventsInProgress);if(A&&(P||L)&&!te){this._updatingCamera=!0;const le=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),de=Se=>Se!==0&&-this._bearingSnap<Se&&Se<this._bearingSnap;!le||!le.essential&&p.prefersReducedMotion?(this._map.fire(new a.k("moveend",{originalEvent:K})),de(this._map.getBearing())&&this._map.resetNorth()):(de(le.bearing||this._map.getBearing())&&(le.bearing=0),le.freezeElevation=!0,this._map.easeTo(le,{originalEvent:K})),this._updatingCamera=!1}}_fireEvent(u,y){this._map.fire(new a.k(u,y?{originalEvent:y}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(u=>{delete this._frameId,this.handleEvent(new Ym("renderFrame",{timeStamp:u})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Q0 extends a.E{constructor(u,y){super(),this._renderFrameCallback=()=>{const A=Math.min((p.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(A)),A<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=y.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new a.M(this.transform.center.lng,this.transform.center.lat)}setCenter(u,y){return this.jumpTo({center:u},y)}panBy(u,y,A){return u=a.P.convert(u).mult(-1),this.panTo(this.transform.center,a.e({offset:u},y),A)}panTo(u,y,A){return this.easeTo(a.e({center:u},y),A)}getZoom(){return this.transform.zoom}setZoom(u,y){return this.jumpTo({zoom:u},y),this}zoomTo(u,y,A){return this.easeTo(a.e({zoom:u},y),A)}zoomIn(u,y){return this.zoomTo(this.getZoom()+1,u,y),this}zoomOut(u,y){return this.zoomTo(this.getZoom()-1,u,y),this}getBearing(){return this.transform.bearing}setBearing(u,y){return this.jumpTo({bearing:u},y),this}getPadding(){return this.transform.padding}setPadding(u,y){return this.jumpTo({padding:u},y),this}rotateTo(u,y,A){return this.easeTo(a.e({bearing:u},y),A)}resetNorth(u,y){return this.rotateTo(0,a.e({duration:1e3},u),y),this}resetNorthPitch(u,y){return this.easeTo(a.e({bearing:0,pitch:0,duration:1e3},u),y),this}snapToNorth(u,y){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,y):this}getPitch(){return this.transform.pitch}setPitch(u,y){return this.jumpTo({pitch:u},y),this}cameraForBounds(u,y){u=vt.convert(u);const A=y&&y.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),A,y)}_cameraForBoxAndBearing(u,y,A,P){const L={top:0,bottom:0,right:0,left:0};if(typeof(P=a.e({padding:L,offset:[0,0],maxZoom:this.transform.maxZoom},P)).padding=="number"){const bn=P.padding;P.padding={top:bn,bottom:bn,right:bn,left:bn}}P.padding=a.e(L,P.padding);const H=this.transform,q=H.padding,K=new vt(u,y),te=H.project(K.getNorthWest()),le=H.project(K.getNorthEast()),de=H.project(K.getSouthEast()),Se=H.project(K.getSouthWest()),ze=a.b8(-A),De=te.rotate(ze),Be=le.rotate(ze),ke=de.rotate(ze),Le=Se.rotate(ze),Et=new a.P(Math.max(De.x,Be.x,Le.x,ke.x),Math.max(De.y,Be.y,Le.y,ke.y)),He=new a.P(Math.min(De.x,Be.x,Le.x,ke.x),Math.min(De.y,Be.y,Le.y,ke.y)),ct=Et.sub(He),Pt=(H.width-(q.left+q.right+P.padding.left+P.padding.right))/ct.x,Ct=(H.height-(q.top+q.bottom+P.padding.top+P.padding.bottom))/ct.y;if(Ct<0||Pt<0)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ot=Math.min(H.scaleZoom(H.scale*Math.min(Pt,Ct)),P.maxZoom),Zt=a.P.convert(P.offset),Gt=new a.P((P.padding.left-P.padding.right)/2,(P.padding.top-P.padding.bottom)/2).rotate(a.b8(A)),Kt=Zt.add(Gt).mult(H.scale/H.zoomScale(Ot));return{center:H.unproject(te.add(de).div(2).sub(Kt)),zoom:Ot,bearing:A}}fitBounds(u,y,A){return this._fitInternal(this.cameraForBounds(u,y),y,A)}fitScreenCoordinates(u,y,A,P,L){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.P.convert(u)),this.transform.pointLocation(a.P.convert(y)),A,P),P,L)}_fitInternal(u,y,A){return u?(delete(y=a.e(u,y)).padding,y.linear?this.easeTo(y,A):this.flyTo(y,A)):this}jumpTo(u,y){this.stop();const A=this._getTransformForUpdate();let P=!1,L=!1,H=!1;return"zoom"in u&&A.zoom!==+u.zoom&&(P=!0,A.zoom=+u.zoom),u.center!==void 0&&(A.center=a.M.convert(u.center)),"bearing"in u&&A.bearing!==+u.bearing&&(L=!0,A.bearing=+u.bearing),"pitch"in u&&A.pitch!==+u.pitch&&(H=!0,A.pitch=+u.pitch),u.padding==null||A.isPaddingEqual(u.padding)||(A.padding=u.padding),this._applyUpdatedTransform(A),this.fire(new a.k("movestart",y)).fire(new a.k("move",y)),P&&this.fire(new a.k("zoomstart",y)).fire(new a.k("zoom",y)).fire(new a.k("zoomend",y)),L&&this.fire(new a.k("rotatestart",y)).fire(new a.k("rotate",y)).fire(new a.k("rotateend",y)),H&&this.fire(new a.k("pitchstart",y)).fire(new a.k("pitch",y)).fire(new a.k("pitchend",y)),this.fire(new a.k("moveend",y))}calculateCameraOptionsFromTo(u,y,A,P=0){const L=a.Y.fromLngLat(u,y),H=a.Y.fromLngLat(A,P),q=H.x-L.x,K=H.y-L.y,te=H.z-L.z,le=Math.hypot(q,K,te);if(le===0)throw new Error("Can't calculate camera options with same From and To");const de=Math.hypot(q,K),Se=this.transform.scaleZoom(this.transform.cameraToCenterDistance/le/this.transform.tileSize),ze=180*Math.atan2(q,-K)/Math.PI;let De=180*Math.acos(de/le)/Math.PI;return De=te<0?90-De:90+De,{center:H.toLngLat(),zoom:Se,pitch:De,bearing:ze}}easeTo(u,y){var A;this._stop(!1,u.easeId),((u=a.e({offset:[0,0],duration:500,easing:a.b7},u)).animate===!1||!u.essential&&p.prefersReducedMotion)&&(u.duration=0);const P=this._getTransformForUpdate(),L=this.getZoom(),H=this.getBearing(),q=this.getPitch(),K=this.getPadding(),te="bearing"in u?this._normalizeBearing(u.bearing,H):H,le="pitch"in u?+u.pitch:q,de="padding"in u?u.padding:P.padding,Se=a.P.convert(u.offset);let ze=P.centerPoint.add(Se);const De=P.pointLocation(ze),{center:Be,zoom:ke}=P.getConstrained(a.M.convert(u.center||De),(A=u.zoom)!==null&&A!==void 0?A:L);this._normalizeCenter(Be);const Le=P.project(De),Et=P.project(Be).sub(Le),He=P.zoomScale(ke-L);let ct,Pt;u.around&&(ct=a.M.convert(u.around),Pt=P.locationPoint(ct));const Ct={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ke!==L,this._rotating=this._rotating||H!==te,this._pitching=this._pitching||le!==q,this._padding=!P.isPaddingEqual(de),this._easeId=u.easeId,this._prepareEase(y,u.noMoveStart,Ct),this.terrain&&this._prepareElevation(Be),this._ease(Ot=>{if(this._zooming&&(P.zoom=a.z.number(L,ke,Ot)),this._rotating&&(P.bearing=a.z.number(H,te,Ot)),this._pitching&&(P.pitch=a.z.number(q,le,Ot)),this._padding&&(P.interpolatePadding(K,de,Ot),ze=P.centerPoint.add(Se)),this.terrain&&!u.freezeElevation&&this._updateElevation(Ot),ct)P.setLocationAtPoint(ct,Pt);else{const Zt=P.zoomScale(P.zoom-L),Gt=ke>L?Math.min(2,He):Math.max(.5,He),Kt=Math.pow(Gt,1-Ot),bn=P.unproject(Le.add(Et.mult(Ot*Kt)).mult(Zt));P.setLocationAtPoint(P.renderWorldCopies?bn.wrap():bn,ze)}this._applyUpdatedTransform(P),this._fireMoveEvents(y)},Ot=>{this.terrain&&this._finalizeElevation(),this._afterEase(y,Ot)},u),this}_prepareEase(u,y,A={}){this._moving=!0,y||A.moving||this.fire(new a.k("movestart",u)),this._zooming&&!A.zooming&&this.fire(new a.k("zoomstart",u)),this._rotating&&!A.rotating&&this.fire(new a.k("rotatestart",u)),this._pitching&&!A.pitching&&this.fire(new a.k("pitchstart",u))}_prepareElevation(u){this._elevationCenter=u,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(u){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const y=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(u<1&&y!==this._elevationTarget){const A=this._elevationTarget-this._elevationStart;this._elevationStart+=u*(A-(y-(A*u+this._elevationStart))/(1-u)),this._elevationTarget=y}this.transform.elevation=a.z.number(this._elevationStart,this._elevationTarget,u)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(u){if(!this.transformCameraUpdate)return;const y=u.clone(),{center:A,zoom:P,pitch:L,bearing:H,elevation:q}=this.transformCameraUpdate(y);A&&(y.center=A),P!==void 0&&(y.zoom=P),L!==void 0&&(y.pitch=L),H!==void 0&&(y.bearing=H),q!==void 0&&(y.elevation=q),this.transform.apply(y)}_fireMoveEvents(u){this.fire(new a.k("move",u)),this._zooming&&this.fire(new a.k("zoom",u)),this._rotating&&this.fire(new a.k("rotate",u)),this._pitching&&this.fire(new a.k("pitch",u))}_afterEase(u,y){if(this._easeId&&y&&this._easeId===y)return;delete this._easeId;const A=this._zooming,P=this._rotating,L=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,A&&this.fire(new a.k("zoomend",u)),P&&this.fire(new a.k("rotateend",u)),L&&this.fire(new a.k("pitchend",u)),this.fire(new a.k("moveend",u))}flyTo(u,y){var A;if(!u.essential&&p.prefersReducedMotion){const Mr=a.L(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Mr,y)}this.stop(),u=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.b7},u);const P=this._getTransformForUpdate(),L=this.getZoom(),H=this.getBearing(),q=this.getPitch(),K=this.getPadding(),te="bearing"in u?this._normalizeBearing(u.bearing,H):H,le="pitch"in u?+u.pitch:q,de="padding"in u?u.padding:P.padding,Se=a.P.convert(u.offset);let ze=P.centerPoint.add(Se);const De=P.pointLocation(ze),{center:Be,zoom:ke}=P.getConstrained(a.M.convert(u.center||De),(A=u.zoom)!==null&&A!==void 0?A:L);this._normalizeCenter(Be);const Le=P.zoomScale(ke-L),Et=P.project(De),He=P.project(Be).sub(Et);let ct=u.curve;const Pt=Math.max(P.width,P.height),Ct=Pt/Le,Ot=He.mag();if("minZoom"in u){const Mr=a.ac(Math.min(u.minZoom,L,ke),P.minZoom,P.maxZoom),rr=Pt/P.zoomScale(Mr-L);ct=Math.sqrt(rr/Ot*2)}const Zt=ct*ct;function Gt(Mr){const rr=(Ct*Ct-Pt*Pt+(Mr?-1:1)*Zt*Zt*Ot*Ot)/(2*(Mr?Ct:Pt)*Zt*Ot);return Math.log(Math.sqrt(rr*rr+1)-rr)}function Kt(Mr){return(Math.exp(Mr)-Math.exp(-Mr))/2}function bn(Mr){return(Math.exp(Mr)+Math.exp(-Mr))/2}const sr=Gt(!1);let cn=function(Mr){return bn(sr)/bn(sr+ct*Mr)},Zn=function(Mr){return Pt*((bn(sr)*(Kt(rr=sr+ct*Mr)/bn(rr))-Kt(sr))/Zt)/Ot;var rr},ur=(Gt(!0)-sr)/ct;if(Math.abs(Ot)<1e-6||!isFinite(ur)){if(Math.abs(Pt-Ct)<1e-6)return this.easeTo(u,y);const Mr=Ct<Pt?-1:1;ur=Math.abs(Math.log(Ct/Pt))/ct,Zn=function(){return 0},cn=function(rr){return Math.exp(Mr*ct*rr)}}return u.duration="duration"in u?+u.duration:1e3*ur/("screenSpeed"in u?+u.screenSpeed/ct:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=H!==te,this._pitching=le!==q,this._padding=!P.isPaddingEqual(de),this._prepareEase(y,!1),this.terrain&&this._prepareElevation(Be),this._ease(Mr=>{const rr=Mr*ur,fr=1/cn(rr);P.zoom=Mr===1?ke:L+P.scaleZoom(fr),this._rotating&&(P.bearing=a.z.number(H,te,Mr)),this._pitching&&(P.pitch=a.z.number(q,le,Mr)),this._padding&&(P.interpolatePadding(K,de,Mr),ze=P.centerPoint.add(Se)),this.terrain&&!u.freezeElevation&&this._updateElevation(Mr);const dr=Mr===1?Be:P.unproject(Et.add(He.mult(Zn(rr))).mult(fr));P.setLocationAtPoint(P.renderWorldCopies?dr.wrap():dr,ze),this._applyUpdatedTransform(P),this._fireMoveEvents(y)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(y)},u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,y){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const A=this._onEaseEnd;delete this._onEaseEnd,A.call(this,y)}if(!u){const A=this.handlers;A&&A.stop(!1)}return this}_ease(u,y,A){A.animate===!1||A.duration===0?(u(1),y()):(this._easeStart=p.now(),this._easeOptions=A,this._onEaseFrame=u,this._onEaseEnd=y,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(u,y){u=a.b1(u,-180,180);const A=Math.abs(u-y);return Math.abs(u-360-y)<A&&(u-=360),Math.abs(u+360-y)<A&&(u+=360),u}_normalizeCenter(u){const y=this.transform;if(!y.renderWorldCopies||y.lngRange)return;const A=u.lng-y.center.lng;u.lng+=A>180?-360:A<-180?360:0}queryTerrainElevation(u){return this.terrain?this.terrain.getElevationForLngLatZoom(a.M.convert(u),this.transform.tileZoom)-this.transform.elevation:null}}const Cl={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Xm{constructor(u=Cl){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=y=>{!y||y.sourceDataType!=="metadata"&&y.sourceDataType!=="visibility"&&y.dataType!=="style"&&y.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=u}getDefaultPosition(){return"bottom-right"}onAdd(u){return this._map=u,this._compact=this.options.compact,this._container=g.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=g.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=g.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){g.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(u,y){const A=this._map._getUIString(`AttributionControl.${y}`);u.title=A,u.setAttribute("aria-label",A)}_updateAttributions(){if(!this._map.style)return;let u=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=u.concat(this.options.customAttribution.map(P=>typeof P!="string"?"":P)):typeof this.options.customAttribution=="string"&&u.push(this.options.customAttribution)),this._map.style.stylesheet){const P=this._map.style.stylesheet;this.styleOwner=P.owner,this.styleId=P.id}const y=this._map.style.sourceCaches;for(const P in y){const L=y[P];if(L.used||L.usedForTerrain){const H=L.getSource();H.attribution&&u.indexOf(H.attribution)<0&&u.push(H.attribution)}}u=u.filter(P=>String(P).trim()),u.sort((P,L)=>P.length-L.length),u=u.filter((P,L)=>{for(let H=L+1;H<u.length;H++)if(u[H].indexOf(P)>=0)return!1;return!0});const A=u.join(" | ");A!==this._attribHTML&&(this._attribHTML=A,u.length?(this._innerContainer.innerHTML=A,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ju{constructor(u={}){this._updateCompact=()=>{const y=this._container.children;if(y.length){const A=y[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&A.classList.add("maplibregl-compact"):A.classList.remove("maplibregl-compact")}},this.options=u}getDefaultPosition(){return"bottom-left"}onAdd(u){this._map=u,this._compact=this.options&&this.options.compact,this._container=g.create("div","maplibregl-ctrl");const y=g.create("a","maplibregl-ctrl-logo");return y.target="_blank",y.rel="noopener nofollow",y.href="https://maplibre.org/",y.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),y.setAttribute("rel","noopener nofollow"),this._container.appendChild(y),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){g.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Qi{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const y=++this._id;return this._queue.push({callback:u,id:y,cancelled:!1}),y}remove(u){const y=this._currentlyRunning,A=y?this._queue.concat(y):this._queue;for(const P of A)if(P.id===u)return void(P.cancelled=!0)}run(u=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const y=this._currentlyRunning=this._queue;this._queue=[];for(const A of y)if(!A.cancelled&&(A.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var oo=a.X([{name:"a_pos3d",type:"Int16",components:3}]);class Xy extends a.E{constructor(u){super(),this.sourceCache=u,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,u.usedForTerrain=!0,u.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(u,y){this.sourceCache.update(u,y),this._renderableTilesKeys=[];const A={};for(const P of u.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:y}))A[P.key]=!0,this._renderableTilesKeys.push(P.key),this._tiles[P.key]||(P.posMatrix=new Float64Array(16),a.aN(P.posMatrix,0,a.W,0,a.W,0,1),this._tiles[P.key]=new xn(P,this.tileSize));for(const P in this._tiles)A[P]||delete this._tiles[P]}freeRtt(u){for(const y in this._tiles){const A=this._tiles[y];(!u||A.tileID.equals(u)||A.tileID.isChildOf(u)||u.isChildOf(A.tileID))&&(A.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(u=>this.getTileByID(u))}getTileByID(u){return this._tiles[u]}getTerrainCoords(u){const y={};for(const A of this._renderableTilesKeys){const P=this._tiles[A].tileID;if(P.canonical.equals(u.canonical)){const L=u.clone();L.posMatrix=new Float64Array(16),a.aN(L.posMatrix,0,a.W,0,a.W,0,1),y[A]=L}else if(P.canonical.isChildOf(u.canonical)){const L=u.clone();L.posMatrix=new Float64Array(16);const H=P.canonical.z-u.canonical.z,q=P.canonical.x-(P.canonical.x>>H<<H),K=P.canonical.y-(P.canonical.y>>H<<H),te=a.W>>H;a.aN(L.posMatrix,0,te,0,te,0,1),a.H(L.posMatrix,L.posMatrix,[-q*te,-K*te,0]),y[A]=L}else if(u.canonical.isChildOf(P.canonical)){const L=u.clone();L.posMatrix=new Float64Array(16);const H=u.canonical.z-P.canonical.z,q=u.canonical.x-(u.canonical.x>>H<<H),K=u.canonical.y-(u.canonical.y>>H<<H),te=a.W>>H;a.aN(L.posMatrix,0,a.W,0,a.W,0,1),a.H(L.posMatrix,L.posMatrix,[q*te,K*te,0]),a.J(L.posMatrix,L.posMatrix,[1/2**H,1/2**H,0]),y[A]=L}}return y}getSourceTile(u,y){const A=this.sourceCache._source;let P=u.overscaledZ-this.deltaZoom;if(P>A.maxzoom&&(P=A.maxzoom),P<A.minzoom)return null;this._sourceTileCache[u.key]||(this._sourceTileCache[u.key]=u.scaledTo(P).key);let L=this.sourceCache.getTileByID(this._sourceTileCache[u.key]);if((!L||!L.dem)&&y)for(;P>=A.minzoom&&(!L||!L.dem);)L=this.sourceCache.getTileByID(u.scaledTo(P--).key);return L}tilesAfterTime(u=Date.now()){return Object.values(this._tiles).filter(y=>y.timeAdded>=u)}}class Qh{constructor(u,y,A){this.painter=u,this.sourceCache=new Xy(y),this.options=A,this.exaggeration=typeof A.exaggeration=="number"?A.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(u,y,A,P=a.W){var L;if(!(y>=0&&y<P&&A>=0&&A<P))return 0;const H=this.getTerrainData(u),q=(L=H.tile)===null||L===void 0?void 0:L.dem;if(!q)return 0;const K=function(De,Be,ke){var Le=Be[0],Et=Be[1];return De[0]=ke[0]*Le+ke[4]*Et+ke[12],De[1]=ke[1]*Le+ke[5]*Et+ke[13],De}([],[y/P*a.W,A/P*a.W],H.u_terrain_matrix),te=[K[0]*q.dim,K[1]*q.dim],le=Math.floor(te[0]),de=Math.floor(te[1]),Se=te[0]-le,ze=te[1]-de;return q.get(le,de)*(1-Se)*(1-ze)+q.get(le+1,de)*Se*(1-ze)+q.get(le,de+1)*(1-Se)*ze+q.get(le+1,de+1)*Se*ze}getElevationForLngLatZoom(u,y){const{tileID:A,mercatorX:P,mercatorY:L}=this._getOverscaledTileIDFromLngLatZoom(u,y);return this.getElevation(A,P%a.W,L%a.W,a.W)}getElevation(u,y,A,P=a.W){return this.getDEMElevation(u,y,A,P)*this.exaggeration}getTerrainData(u){if(!this._emptyDemTexture){const P=this.painter.context,L=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new oe(P,L,P.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new oe(P,new a.R({width:1,height:1}),P.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(P.gl.NEAREST,P.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.an([])}const y=this.sourceCache.getSourceTile(u,!0);if(y&&y.dem&&(!y.demTexture||y.needsTerrainPrepare)){const P=this.painter.context;y.demTexture=this.painter.getTileTexture(y.dem.stride),y.demTexture?y.demTexture.update(y.dem.getPixels(),{premultiply:!1}):y.demTexture=new oe(P,y.dem.getPixels(),P.gl.RGBA,{premultiply:!1}),y.demTexture.bind(P.gl.NEAREST,P.gl.CLAMP_TO_EDGE),y.needsTerrainPrepare=!1}const A=y&&y+y.tileID.key+u.key;if(A&&!this._demMatrixCache[A]){const P=this.sourceCache.sourceCache._source.maxzoom;let L=u.canonical.z-y.tileID.canonical.z;u.overscaledZ>u.canonical.z&&(u.canonical.z>=P?L=u.canonical.z-P:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const H=u.canonical.x-(u.canonical.x>>L<<L),q=u.canonical.y-(u.canonical.y>>L<<L),K=a.b9(new Float64Array(16),[1/(a.W<<L),1/(a.W<<L),0]);a.H(K,K,[H*a.W,q*a.W,0]),this._demMatrixCache[u.key]={matrix:K,coord:u}}return{u_depth:2,u_terrain:3,u_terrain_dim:y&&y.dem&&y.dem.dim||1,u_terrain_matrix:A?this._demMatrixCache[u.key].matrix:this._emptyDemMatrix,u_terrain_unpack:y&&y.dem&&y.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(y&&y.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:y}}getFramebuffer(u){const y=this.painter,A=y.width/devicePixelRatio,P=y.height/devicePixelRatio;return!this._fbo||this._fbo.width===A&&this._fbo.height===P||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new oe(y.context,{width:A,height:P,data:null},y.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(y.context.gl.NEAREST,y.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new oe(y.context,{width:A,height:P,data:null},y.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(y.context.gl.NEAREST,y.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=y.context.createFramebuffer(A,P,!0,!1),this._fbo.depthAttachment.set(y.context.createRenderbuffer(y.context.gl.DEPTH_COMPONENT16,A,P))),this._fbo.colorAttachment.set(u==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const u=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const y=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let L=0,H=0;L<this._coordsTextureSize;L++)for(let q=0;q<this._coordsTextureSize;q++,H+=4)y[H+0]=255&q,y[H+1]=255&L,y[H+2]=q>>8<<4|L>>8,y[H+3]=0;const A=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(y.buffer)),P=new oe(u,A,u.gl.RGBA,{premultiply:!1});return P.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),this._coordsTexture=P,P}pointCoordinate(u){this.painter.maybeDrawDepthAndCoords(!0);const y=new Uint8Array(4),A=this.painter.context,P=A.gl;A.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),P.readPixels(u.x,this.painter.height/devicePixelRatio-u.y-1,1,1,P.RGBA,P.UNSIGNED_BYTE,y),A.bindFramebuffer.set(null);const L=y[0]+(y[2]>>4<<8),H=y[1]+((15&y[2])<<8),q=this.coordsIndex[255-y[3]],K=q&&this.sourceCache.getTileByID(q);if(!K)return null;const te=this._coordsTextureSize,le=(1<<K.tileID.canonical.z)*te;return new a.Y((K.tileID.canonical.x*te+L)/le+K.tileID.wrap,(K.tileID.canonical.y*te+H)/le,this.getElevation(K.tileID,L,H,te))}depthAtPoint(u){const y=new Uint8Array(4),A=this.painter.context,P=A.gl;return A.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),P.readPixels(u.x,this.painter.height/devicePixelRatio-u.y-1,1,1,P.RGBA,P.UNSIGNED_BYTE,y),A.bindFramebuffer.set(null),(y[0]/16777216+y[1]/65536+y[2]/256+y[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const u=this.painter.context,y=new a.ba,A=new a.aX,P=this.meshSize,L=a.W/P,H=P*P;for(let de=0;de<=P;de++)for(let Se=0;Se<=P;Se++)y.emplaceBack(Se*L,de*L,0);for(let de=0;de<H;de+=P+1)for(let Se=0;Se<P;Se++)A.emplaceBack(Se+de,P+Se+de+1,P+Se+de+2),A.emplaceBack(Se+de,P+Se+de+2,Se+de+1);const q=y.length,K=q+2*(P+1);for(const de of[0,1])for(let Se=0;Se<=P;Se++)for(const ze of[0,1])y.emplaceBack(Se*L,de*a.W,ze);for(let de=0;de<2*P;de+=2)A.emplaceBack(K+de,K+de+1,K+de+3),A.emplaceBack(K+de,K+de+3,K+de+2),A.emplaceBack(q+de,q+de+3,q+de+1),A.emplaceBack(q+de,q+de+2,q+de+3);const te=y.length,le=te+2*(P+1);for(const de of[0,1])for(let Se=0;Se<=P;Se++)for(const ze of[0,1])y.emplaceBack(de*a.W,Se*L,ze);for(let de=0;de<2*P;de+=2)A.emplaceBack(te+de,te+de+1,te+de+3),A.emplaceBack(te+de,te+de+3,te+de+2),A.emplaceBack(le+de,le+de+3,le+de+1),A.emplaceBack(le+de,le+de+2,le+de+3);return this._mesh={indexBuffer:u.createIndexBuffer(A),vertexBuffer:u.createVertexBuffer(y,oo.members),segments:a.$.simpleSegment(0,0,y.length,A.length)},this._mesh}getMeshFrameDelta(u){return 2*Math.PI*a.bb/Math.pow(2,u)/5}getMinTileElevationForLngLatZoom(u,y){var A;const{tileID:P}=this._getOverscaledTileIDFromLngLatZoom(u,y);return(A=this.getMinMaxElevation(P).minElevation)!==null&&A!==void 0?A:0}getMinMaxElevation(u){const y=this.getTerrainData(u).tile,A={minElevation:null,maxElevation:null};return y&&y.dem&&(A.minElevation=y.dem.min*this.exaggeration,A.maxElevation=y.dem.max*this.exaggeration),A}_getOverscaledTileIDFromLngLatZoom(u,y){const A=a.Y.fromLngLat(u.wrap()),P=(1<<y)*a.W,L=A.x*P,H=A.y*P,q=Math.floor(L/a.W),K=Math.floor(H/a.W);return{tileID:new a.Q(y,0,y,q,K),mercatorX:L,mercatorY:H}}}class dp{constructor(u,y,A){this._context=u,this._size=y,this._tileSize=A,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const u of this._objects)u.texture.destroy(),u.fbo.destroy()}_createObject(u){const y=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),A=new oe(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return A.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),y.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),y.colorAttachment.set(A.texture),{id:u,fbo:y,texture:A,stamp:-1,inUse:!1}}getObjectForId(u){return this._objects[u]}useObject(u){u.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(y=>u.id!==y),this._recentlyUsed.push(u.id)}stampObject(u){u.stamp=++this._stamp}getOrCreateFreeObject(){for(const y of this._recentlyUsed)if(!this._objects[y].inUse)return this._objects[y];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const u=this._createObject(this._objects.length);return this._objects.push(u),u}freeObject(u){u.inUse=!1}freeAllObjects(){for(const u of this._objects)this.freeObject(u)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(u=>!u.inUse)===!1}}const Dc={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Ya{constructor(u,y){this.painter=u,this.terrain=y,this.pool=new dp(u.context,30,y.sourceCache.tileSize*y.qualityFactor)}destruct(){this.pool.destruct()}getTexture(u){return this.pool.getObjectForId(u.rtt[this._stacks.length-1].id).texture}prepareForRender(u,y){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=u._order.filter(A=>!u._layers[A].isHidden(y)),this._coordsDescendingInv={};for(const A in u.sourceCaches){this._coordsDescendingInv[A]={};const P=u.sourceCaches[A].getVisibleCoordinates();for(const L of P){const H=this.terrain.sourceCache.getTerrainCoords(L);for(const q in H)this._coordsDescendingInv[A][q]||(this._coordsDescendingInv[A][q]=[]),this._coordsDescendingInv[A][q].push(H[q])}}this._coordsDescendingInvStr={};for(const A of u._order){const P=u._layers[A],L=P.source;if(Dc[P.type]&&!this._coordsDescendingInvStr[L]){this._coordsDescendingInvStr[L]={};for(const H in this._coordsDescendingInv[L])this._coordsDescendingInvStr[L][H]=this._coordsDescendingInv[L][H].map(q=>q.key).sort().join()}}for(const A of this._renderableTiles)for(const P in this._coordsDescendingInvStr){const L=this._coordsDescendingInvStr[P][A.tileID.key];L&&L!==A.rttCoords[P]&&(A.rtt=[])}}renderLayer(u){if(u.isHidden(this.painter.transform.zoom))return!1;const y=u.type,A=this.painter,P=this._renderableLayerIds[this._renderableLayerIds.length-1]===u.id;if(Dc[y]&&(this._prevType&&Dc[this._prevType]||this._stacks.push([]),this._prevType=y,this._stacks[this._stacks.length-1].push(u.id),!P))return!0;if(Dc[this._prevType]||Dc[y]&&P){this._prevType=y;const L=this._stacks.length-1,H=this._stacks[L]||[];for(const q of this._renderableTiles){if(this.pool.isFull()&&(Fd(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(q),q.rtt[L]){const te=this.pool.getObjectForId(q.rtt[L].id);if(te.stamp===q.rtt[L].stamp){this.pool.useObject(te);continue}}const K=this.pool.getOrCreateFreeObject();this.pool.useObject(K),this.pool.stampObject(K),q.rtt[L]={id:K.id,stamp:K.stamp},A.context.bindFramebuffer.set(K.fbo.framebuffer),A.context.clear({color:a.aO.transparent,stencil:0}),A.currentStencilSource=void 0;for(let te=0;te<H.length;te++){const le=A.style._layers[H[te]],de=le.source?this._coordsDescendingInv[le.source][q.tileID.key]:[q.tileID];A.context.viewport.set([0,0,K.fbo.width,K.fbo.height]),A._renderTileClippingMasks(le,de),A.renderLayer(A,A.style.sourceCaches[le.source],le,de),le.source&&(q.rttCoords[le.source]=this._coordsDescendingInvStr[le.source][q.tileID.key])}}return Fd(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Dc[y]}return!1}}const Km={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Nc=l,Wd={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:Cl,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Hd=R=>{R.touchstart=R.dragStart,R.touchmoveWindow=R.dragMove,R.touchend=R.dragEnd},ef={showCompass:!0,showZoom:!0,visualizePitch:!1};class Zm{constructor(u,y,A=!1){this.mousedown=H=>{this.startMouse(a.e({},H,{ctrlKey:!0,preventDefault:()=>H.preventDefault()}),g.mousePos(this.element,H)),g.addEventListener(window,"mousemove",this.mousemove),g.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=H=>{this.moveMouse(H,g.mousePos(this.element,H))},this.mouseup=H=>{this.mouseRotate.dragEnd(H),this.mousePitch&&this.mousePitch.dragEnd(H),this.offTemp()},this.touchstart=H=>{H.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=g.touchPos(this.element,H.targetTouches)[0],this.startTouch(H,this._startPos),g.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.addEventListener(window,"touchend",this.touchend))},this.touchmove=H=>{H.targetTouches.length!==1?this.reset():(this._lastPos=g.touchPos(this.element,H.targetTouches)[0],this.moveTouch(H,this._lastPos))},this.touchend=H=>{H.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const P=u.dragRotate._mouseRotate.getClickTolerance(),L=u.dragRotate._mousePitch.getClickTolerance();this.element=y,this.mouseRotate=$d({clickTolerance:P,enable:!0}),this.touchRotate=(({enable:H,clickTolerance:q,bearingDegreesPerPixelMoved:K=.8})=>{const te=new Wm;return new qa({clickTolerance:q,move:(le,de)=>({bearingDelta:(de.x-le.x)*K}),moveStateManager:te,enable:H,assignEvents:Hd})})({clickTolerance:P,enable:!0}),this.map=u,A&&(this.mousePitch=Hm({clickTolerance:L,enable:!0}),this.touchPitch=(({enable:H,clickTolerance:q,pitchDegreesPerPixelMoved:K=-.5})=>{const te=new Wm;return new qa({clickTolerance:q,move:(le,de)=>({pitchDelta:(de.y-le.y)*K}),moveStateManager:te,enable:H,assignEvents:Hd})})({clickTolerance:L,enable:!0})),g.addEventListener(y,"mousedown",this.mousedown),g.addEventListener(y,"touchstart",this.touchstart,{passive:!1}),g.addEventListener(y,"touchcancel",this.reset)}startMouse(u,y){this.mouseRotate.dragStart(u,y),this.mousePitch&&this.mousePitch.dragStart(u,y),g.disableDrag()}startTouch(u,y){this.touchRotate.dragStart(u,y),this.touchPitch&&this.touchPitch.dragStart(u,y),g.disableDrag()}moveMouse(u,y){const A=this.map,{bearingDelta:P}=this.mouseRotate.dragMove(u,y)||{};if(P&&A.setBearing(A.getBearing()+P),this.mousePitch){const{pitchDelta:L}=this.mousePitch.dragMove(u,y)||{};L&&A.setPitch(A.getPitch()+L)}}moveTouch(u,y){const A=this.map,{bearingDelta:P}=this.touchRotate.dragMove(u,y)||{};if(P&&A.setBearing(A.getBearing()+P),this.touchPitch){const{pitchDelta:L}=this.touchPitch.dragMove(u,y)||{};L&&A.setPitch(A.getPitch()+L)}}off(){const u=this.element;g.removeEventListener(u,"mousedown",this.mousedown),g.removeEventListener(u,"touchstart",this.touchstart,{passive:!1}),g.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.removeEventListener(window,"touchend",this.touchend),g.removeEventListener(u,"touchcancel",this.reset),this.offTemp()}offTemp(){g.enableDrag(),g.removeEventListener(window,"mousemove",this.mousemove),g.removeEventListener(window,"mouseup",this.mouseup),g.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.removeEventListener(window,"touchend",this.touchend)}}let va;function Ro(R,u,y){const A=new a.M(R.lng,R.lat);if(R=new a.M(R.lng,R.lat),u){const P=new a.M(R.lng-360,R.lat),L=new a.M(R.lng+360,R.lat),H=y.locationPoint(R).distSqr(u);y.locationPoint(P).distSqr(u)<H?R=P:y.locationPoint(L).distSqr(u)<H&&(R=L)}for(;Math.abs(R.lng-y.center.lng)>180;){const P=y.locationPoint(R);if(P.x>=0&&P.y>=0&&P.x<=y.width&&P.y<=y.height)break;R.lng>y.center.lng?R.lng-=360:R.lng+=360}return R.lng!==A.lng&&y.locationPoint(R).y>y.height/2-y.getHorizon()?R:A}const hp={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Jm(R,u,y){const A=R.classList;for(const P in hp)A.remove(`maplibregl-${y}-anchor-${P}`);A.add(`maplibregl-${y}-anchor-${u}`)}class $o extends a.E{constructor(u){if(super(),this._onKeyPress=y=>{const A=y.code,P=y.charCode||y.keyCode;A!=="Space"&&A!=="Enter"&&P!==32&&P!==13||this.togglePopup()},this._onMapClick=y=>{const A=y.originalEvent.target,P=this._element;this._popup&&(A===P||P.contains(A))&&this.togglePopup()},this._update=y=>{var A;if(!this._map)return;const P=this._map.loaded()&&!this._map.isMoving();((y==null?void 0:y.type)==="terrain"||(y==null?void 0:y.type)==="render"&&!P)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Ro(this._lngLat,this._flatPos,this._map.transform):(A=this._lngLat)===null||A===void 0?void 0:A.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let L="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?L=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(L=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let H="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?H="rotateX(0deg)":this._pitchAlignment==="map"&&(H=`rotateX(${this._map.getPitch()}deg)`),y&&y.type!=="moveend"||(this._pos=this._pos.round()),g.setTransform(this._element,`${hp[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${H} ${L}`),p.frameAsync(new AbortController).then(()=>{this._updateOpacity(y&&y.type==="moveend")}).catch(()=>{})},this._onMove=y=>{if(!this._isDragging){const A=this._clickTolerance||this._map._clickTolerance;this._isDragging=y.point.dist(this._pointerdownPos)>=A}this._isDragging&&(this._pos=y.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.k("dragstart"))),this.fire(new a.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.k("dragend")),this._state="inactive"},this._addDragHandler=y=>{this._element.contains(y.originalEvent.target)&&(y.preventDefault(),this._positionDelta=y.point.sub(this._pos).add(this._offset),this._pointerdownPos=y.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(u==null?void 0:u.opacity,u==null?void 0:u.opacityWhenCovered),u&&u.element)this._element=u.element,this._offset=a.P.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=g.create("div"),this._element.setAttribute("aria-label","Map marker");const y=g.createNS("http://www.w3.org/2000/svg","svg"),A=41,P=27;y.setAttributeNS(null,"display","block"),y.setAttributeNS(null,"height",`${A}px`),y.setAttributeNS(null,"width",`${P}px`),y.setAttributeNS(null,"viewBox",`0 0 ${P} ${A}`);const L=g.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"stroke","none"),L.setAttributeNS(null,"stroke-width","1"),L.setAttributeNS(null,"fill","none"),L.setAttributeNS(null,"fill-rule","evenodd");const H=g.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"fill-rule","nonzero");const q=g.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"transform","translate(3.0, 29.0)"),q.setAttributeNS(null,"fill","#000000");const K=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Le of K){const Et=g.createNS("http://www.w3.org/2000/svg","ellipse");Et.setAttributeNS(null,"opacity","0.04"),Et.setAttributeNS(null,"cx","10.5"),Et.setAttributeNS(null,"cy","5.80029008"),Et.setAttributeNS(null,"rx",Le.rx),Et.setAttributeNS(null,"ry",Le.ry),q.appendChild(Et)}const te=g.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"fill",this._color);const le=g.createNS("http://www.w3.org/2000/svg","path");le.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),te.appendChild(le);const de=g.createNS("http://www.w3.org/2000/svg","g");de.setAttributeNS(null,"opacity","0.25"),de.setAttributeNS(null,"fill","#000000");const Se=g.createNS("http://www.w3.org/2000/svg","path");Se.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),de.appendChild(Se);const ze=g.createNS("http://www.w3.org/2000/svg","g");ze.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ze.setAttributeNS(null,"fill","#FFFFFF");const De=g.createNS("http://www.w3.org/2000/svg","g");De.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Be=g.createNS("http://www.w3.org/2000/svg","circle");Be.setAttributeNS(null,"fill","#000000"),Be.setAttributeNS(null,"opacity","0.25"),Be.setAttributeNS(null,"cx","5.5"),Be.setAttributeNS(null,"cy","5.5"),Be.setAttributeNS(null,"r","5.4999962");const ke=g.createNS("http://www.w3.org/2000/svg","circle");ke.setAttributeNS(null,"fill","#FFFFFF"),ke.setAttributeNS(null,"cx","5.5"),ke.setAttributeNS(null,"cy","5.5"),ke.setAttributeNS(null,"r","5.4999962"),De.appendChild(Be),De.appendChild(ke),H.appendChild(q),H.appendChild(te),H.appendChild(de),H.appendChild(ze),H.appendChild(De),y.appendChild(H),y.setAttributeNS(null,"height",A*this._scale+"px"),y.setAttributeNS(null,"width",P*this._scale+"px"),this._element.appendChild(y),this._offset=a.P.convert(u&&u.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",y=>{y.preventDefault()}),this._element.addEventListener("mousedown",y=>{y.preventDefault()}),Jm(this._element,this._anchor,"marker"),u&&u.className)for(const y of u.className.split(" "))this._element.classList.add(y);this._popup=null}addTo(u){return this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),u.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),g.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=a.M.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const P=Math.abs(13.5)/Math.SQRT2;u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[P,-1*(38.1-13.5+P)],"bottom-right":[-P,-1*(38.1-13.5+P)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const u=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:u?(u.isOpen()?u.remove():(u.setLngLat(this._lngLat),u.addTo(this._map)),this):this}_updateOpacity(u=!1){var y,A;if(!(!((y=this._map)===null||y===void 0)&&y.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(u)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const P=this._map,L=P.terrain.depthAtPoint(this._pos),H=P.terrain.getElevationForLngLatZoom(this._lngLat,P.transform.tileZoom);if(P.transform.lngLatToCameraDepth(this._lngLat,H)-L<.006)return void(this._element.style.opacity=this._opacity);const q=-this._offset.y/P.transform._pixelPerMeter,K=Math.sin(P.getPitch()*Math.PI/180)*q,te=P.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),le=P.transform.lngLatToCameraDepth(this._lngLat,H+K)-te>.006;!((A=this._popup)===null||A===void 0)&&A.isOpen()&&le&&this._popup.remove(),this._element.style.opacity=le?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(u){return this._offset=a.P.convert(u),this._update(),this}addClassName(u){this._element.classList.add(u)}removeClassName(u){this._element.classList.remove(u)}toggleClassName(u){return this._element.classList.toggle(u)}setDraggable(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(u,y){return u===void 0&&y===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),u!==void 0&&(this._opacity=u),y!==void 0&&(this._opacityWhenCovered=y),this._map&&this._updateOpacity(!0),this}}const Jo={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Gd=0,zc=!1;const Qm={maxWidth:100,unit:"metric"};function fp(R,u,y){const A=y&&y.maxWidth||100,P=R._container.clientHeight/2,L=R.unproject([0,P]),H=R.unproject([A,P]),q=L.distanceTo(H);if(y&&y.unit==="imperial"){const K=3.2808*q;K>5280?Uu(u,A,K/5280,R._getUIString("ScaleControl.Miles")):Uu(u,A,K,R._getUIString("ScaleControl.Feet"))}else y&&y.unit==="nautical"?Uu(u,A,q/1852,R._getUIString("ScaleControl.NauticalMiles")):q>=1e3?Uu(u,A,q/1e3,R._getUIString("ScaleControl.Kilometers")):Uu(u,A,q,R._getUIString("ScaleControl.Meters"))}function Uu(R,u,y,A){const P=function(L){const H=Math.pow(10,`${Math.floor(L)}`.length-1);let q=L/H;return q=q>=10?10:q>=5?5:q>=3?3:q>=2?2:q>=1?1:function(K){const te=Math.pow(10,Math.ceil(-Math.log(K)/Math.LN10));return Math.round(K*te)/te}(q),H*q}(y);R.style.width=u*(P/y)+"px",R.innerHTML=`${P}&nbsp;${A}`}const pp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},eg=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function mp(R){if(R){if(typeof R=="number"){const u=Math.round(Math.abs(R)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,R),"top-left":new a.P(u,u),"top-right":new a.P(-u,u),bottom:new a.P(0,-R),"bottom-left":new a.P(u,-u),"bottom-right":new a.P(-u,-u),left:new a.P(R,0),right:new a.P(-R,0)}}if(R instanceof a.P||Array.isArray(R)){const u=a.P.convert(R);return{center:u,top:u,"top-left":u,"top-right":u,bottom:u,"bottom-left":u,"bottom-right":u,left:u,right:u}}return{center:a.P.convert(R.center||[0,0]),top:a.P.convert(R.top||[0,0]),"top-left":a.P.convert(R["top-left"]||[0,0]),"top-right":a.P.convert(R["top-right"]||[0,0]),bottom:a.P.convert(R.bottom||[0,0]),"bottom-left":a.P.convert(R["bottom-left"]||[0,0]),"bottom-right":a.P.convert(R["bottom-right"]||[0,0]),left:a.P.convert(R.left||[0,0]),right:a.P.convert(R.right||[0,0])}}return mp(new a.P(0,0))}const Ky=l;s.AJAXError=a.be,s.Evented=a.E,s.LngLat=a.M,s.MercatorCoordinate=a.Y,s.Point=a.P,s.addProtocol=a.bf,s.config=a.a,s.removeProtocol=a.bg,s.AttributionControl=Xm,s.BoxZoomHandler=Lu,s.CanvasSource=wt,s.CooperativeGesturesHandler=Xn,s.DoubleClickZoomHandler=qm,s.DragPanHandler=Tl,s.DragRotateHandler=up,s.EdgeInsets=rc,s.FullscreenControl=class extends a.E{constructor(R={}){super(),this._onFullscreenChange=()=>{var u;let y=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((u=y==null?void 0:y.shadowRoot)===null||u===void 0)&&u.fullscreenElement;)y=y.shadowRoot.fullscreenElement;y===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,R&&R.container&&(R.container instanceof HTMLElement?this._container=R.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(R){return this._map=R,this._container||(this._container=this._map.getContainer()),this._controlContainer=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){g.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const R=this._fullscreenButton=g.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);g.create("span","maplibregl-ctrl-icon",R).setAttribute("aria-hidden","true"),R.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const R=this._getTitle();this._fullscreenButton.setAttribute("aria-label",R),this._fullscreenButton.title=R}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},s.GeoJSONSource=Ut,s.GeolocateControl=class extends a.E{constructor(R){super(),this._onSuccess=u=>{if(this._map){if(this._isOutOfMapMaxBounds(u))return this._setErrorState(),this.fire(new a.k("outofmaxbounds",u)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=u,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(u),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(u),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.k("geolocate",u)),this._finish()}},this._updateCamera=u=>{const y=new a.M(u.coords.longitude,u.coords.latitude),A=u.coords.accuracy,P=this._map.getBearing(),L=a.e({bearing:P},this.options.fitBoundsOptions),H=vt.fromLngLat(y,A);this._map.fitBounds(H,L,{geolocateSource:!0})},this._updateMarker=u=>{if(u){const y=new a.M(u.coords.longitude,u.coords.latitude);this._accuracyCircleMarker.setLngLat(y).addTo(this._map),this._userLocationDotMarker.setLngLat(y).addTo(this._map),this._accuracy=u.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=u=>{if(this._map){if(this.options.trackUserLocation)if(u.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const y=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=y,this._geolocateButton.setAttribute("aria-label",y),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(u.code===3&&zc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.k("error",u)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=u=>{if(this._map){if(this._container.addEventListener("contextmenu",y=>y.preventDefault()),this._geolocateButton=g.create("button","maplibregl-ctrl-geolocate",this._container),g.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",u===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const y=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=y,this._geolocateButton.setAttribute("aria-label",y)}else{const y=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=y,this._geolocateButton.setAttribute("aria-label",y)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=g.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new $o({element:this._dotElement}),this._circleElement=g.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new $o({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",y=>{y.geolocateSource||this._watchState!=="ACTIVE_LOCK"||y.originalEvent&&y.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.k("trackuserlocationend")))})}},this.options=a.e({},Jo,R)}onAdd(R){return this._map=R,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return a._(this,arguments,void 0,function*(u=!1){if(va!==void 0&&!u)return va;if(window.navigator.permissions===void 0)return va=!!window.navigator.geolocation,va;try{va=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{va=!!window.navigator.geolocation}return va})}().then(u=>this._setupUI(u)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),g.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Gd=0,zc=!1}_isOutOfMapMaxBounds(R){const u=this._map.getMaxBounds(),y=R.coords;return u&&(y.longitude<u.getWest()||y.longitude>u.getEast()||y.latitude<u.getSouth()||y.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const R=this._map.getBounds(),u=R.getSouthEast(),y=R.getNorthEast(),A=u.distanceTo(y),P=Math.ceil(this._accuracy/(A/this._map._container.clientHeight)*2);this._circleElement.style.width=`${P}px`,this._circleElement.style.height=`${P}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Gd--,zc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let R;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Gd++,Gd>1?(R={maximumAge:6e5,timeout:0},zc=!0):(R=this.options.positionOptions,zc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,R)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},s.Hash=Kh,s.ImageSource=_e,s.KeyboardHandler=Mi,s.LngLatBounds=vt,s.LogoControl=ju,s.Map=class extends Q0{constructor(R){if(a.bc.mark(a.bd.create),(R=a.e({},Wd,R)).minZoom!=null&&R.maxZoom!=null&&R.minZoom>R.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(R.minPitch!=null&&R.maxPitch!=null&&R.minPitch>R.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(R.minPitch!=null&&R.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(R.maxPitch!=null&&R.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Xh(R.minZoom,R.maxZoom,R.minPitch,R.maxPitch,R.renderWorldCopies),{bearingSnap:R.bearingSnap}),this._contextLost=u=>{u.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.k("webglcontextlost",{originalEvent:u}))},this._contextRestored=u=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.k("webglcontextrestored",{originalEvent:u}))},this._onMapScroll=u=>{if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=R.interactive,this._maxTileCacheSize=R.maxTileCacheSize,this._maxTileCacheZoomLevels=R.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=R.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=R.preserveDrawingBuffer,this._antialias=R.antialias,this._trackResize=R.trackResize,this._bearingSnap=R.bearingSnap,this._refreshExpiredTiles=R.refreshExpiredTiles,this._fadeDuration=R.fadeDuration,this._crossSourceCollisions=R.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=R.collectResourceTiming,this._renderTaskQueue=new Qi,this._controls=[],this._mapId=a.a3(),this._locale=a.e({},Km,R.locale),this._clickTolerance=R.clickTolerance,this._overridePixelRatio=R.pixelRatio,this._maxCanvasSize=R.maxCanvasSize,this.transformCameraUpdate=R.transformCameraUpdate,this._imageQueueHandle=C.addThrottleControl(()=>this.isMoving()),this._requestManager=new O(R.transformRequest),typeof R.container=="string"){if(this._container=document.getElementById(R.container),!this._container)throw new Error(`Container '${R.container}' not found.`)}else{if(!(R.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=R.container}if(R.maxBounds&&this.setMaxBounds(R.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let u=!1;const y=Li(A=>{this._trackResize&&!this._removed&&this.resize(A)._update()},50);this._resizeObserver=new ResizeObserver(A=>{u?y(A):u=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ea(this,R),this._hash=R.hash&&new Kh(typeof R.hash=="string"&&R.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:R.center,zoom:R.zoom,bearing:R.bearing,pitch:R.pitch}),R.bounds&&(this.resize(),this.fitBounds(R.bounds,a.e({},R.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=R.localIdeographFontFamily,this._validateStyle=R.validateStyle,R.style&&this.setStyle(R.style,{localIdeographFontFamily:R.localIdeographFontFamily}),R.attributionControl&&this.addControl(new Xm(typeof R.attributionControl=="boolean"?void 0:R.attributionControl)),R.maplibreLogo&&this.addControl(new ju,R.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new a.k(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new a.k(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new a.k("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(R,u){if(u===void 0&&(u=R.getDefaultPosition?R.getDefaultPosition():"top-right"),!R||!R.onAdd)return this.fire(new a.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const y=R.onAdd(this);this._controls.push(R);const A=this._controlPositions[u];return u.indexOf("bottom")!==-1?A.insertBefore(y,A.firstChild):A.appendChild(y),this}removeControl(R){if(!R||!R.onRemove)return this.fire(new a.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(R);return u>-1&&this._controls.splice(u,1),R.onRemove(this),this}hasControl(R){return this._controls.indexOf(R)>-1}calculateCameraOptionsFromTo(R,u,y,A){return A==null&&this.terrain&&(A=this.terrain.getElevationForLngLatZoom(y,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(R,u,y,A)}resize(R){var u;const y=this._containerDimensions(),A=y[0],P=y[1],L=this._getClampedPixelRatio(A,P);if(this._resizeCanvas(A,P,L),this.painter.resize(A,P,L),this.painter.overLimit()){const q=this.painter.context.gl;this._maxCanvasSize=[q.drawingBufferWidth,q.drawingBufferHeight];const K=this._getClampedPixelRatio(A,P);this._resizeCanvas(A,P,K),this.painter.resize(A,P,K)}this.transform.resize(A,P),(u=this._requestedCameraState)===null||u===void 0||u.resize(A,P);const H=!this._moving;return H&&(this.stop(),this.fire(new a.k("movestart",R)).fire(new a.k("move",R))),this.fire(new a.k("resize",R)),H&&this.fire(new a.k("moveend",R)),this}_getClampedPixelRatio(R,u){const{0:y,1:A}=this._maxCanvasSize,P=this.getPixelRatio(),L=R*P,H=u*P;return Math.min(L>y?y/L:1,H>A?A/H:1)*P}getPixelRatio(){var R;return(R=this._overridePixelRatio)!==null&&R!==void 0?R:devicePixelRatio}setPixelRatio(R){this._overridePixelRatio=R,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(R){return this.transform.setMaxBounds(vt.convert(R)),this._update()}setMinZoom(R){if((R=R??-2)>=-2&&R<=this.transform.maxZoom)return this.transform.minZoom=R,this._update(),this.getZoom()<R&&this.setZoom(R),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(R){if((R=R??22)>=this.transform.minZoom)return this.transform.maxZoom=R,this._update(),this.getZoom()>R&&this.setZoom(R),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(R){if((R=R??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(R>=0&&R<=this.transform.maxPitch)return this.transform.minPitch=R,this._update(),this.getPitch()<R&&this.setPitch(R),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(R){if((R=R??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(R>=this.transform.minPitch)return this.transform.maxPitch=R,this._update(),this.getPitch()>R&&this.setPitch(R),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(R){return this.transform.renderWorldCopies=R,this._update()}project(R){return this.transform.locationPoint(a.M.convert(R),this.style&&this.terrain)}unproject(R){return this.transform.pointLocation(a.P.convert(R),this.terrain)}isMoving(){var R;return this._moving||((R=this.handlers)===null||R===void 0?void 0:R.isMoving())}isZooming(){var R;return this._zooming||((R=this.handlers)===null||R===void 0?void 0:R.isZooming())}isRotating(){var R;return this._rotating||((R=this.handlers)===null||R===void 0?void 0:R.isRotating())}_createDelegatedListener(R,u,y){if(R==="mouseenter"||R==="mouseover"){let A=!1;return{layer:u,listener:y,delegates:{mousemove:L=>{const H=this.getLayer(u)?this.queryRenderedFeatures(L.point,{layers:[u]}):[];H.length?A||(A=!0,y.call(this,new uo(R,this,L.originalEvent,{features:H}))):A=!1},mouseout:()=>{A=!1}}}}if(R==="mouseleave"||R==="mouseout"){let A=!1;return{layer:u,listener:y,delegates:{mousemove:H=>{(this.getLayer(u)?this.queryRenderedFeatures(H.point,{layers:[u]}):[]).length?A=!0:A&&(A=!1,y.call(this,new uo(R,this,H.originalEvent)))},mouseout:H=>{A&&(A=!1,y.call(this,new uo(R,this,H.originalEvent)))}}}}{const A=P=>{const L=this.getLayer(u)?this.queryRenderedFeatures(P.point,{layers:[u]}):[];L.length&&(P.features=L,y.call(this,P),delete P.features)};return{layer:u,listener:y,delegates:{[R]:A}}}}on(R,u,y){if(y===void 0)return super.on(R,u);const A=this._createDelegatedListener(R,u,y);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[R]=this._delegatedListeners[R]||[],this._delegatedListeners[R].push(A);for(const P in A.delegates)this.on(P,A.delegates[P]);return this}once(R,u,y){if(y===void 0)return super.once(R,u);const A=this._createDelegatedListener(R,u,y);for(const P in A.delegates)this.once(P,A.delegates[P]);return this}off(R,u,y){return y===void 0?super.off(R,u):(this._delegatedListeners&&this._delegatedListeners[R]&&(A=>{const P=this._delegatedListeners[R];for(let L=0;L<P.length;L++){const H=P[L];if(H.layer===u&&H.listener===y){for(const q in H.delegates)this.off(q,H.delegates[q]);return P.splice(L,1),this}}})(),this)}queryRenderedFeatures(R,u){if(!this.style)return[];let y;const A=R instanceof a.P||Array.isArray(R),P=A?R:[[0,0],[this.transform.width,this.transform.height]];if(u=u||(A?{}:R)||{},P instanceof a.P||typeof P[0]=="number")y=[a.P.convert(P)];else{const L=a.P.convert(P[0]),H=a.P.convert(P[1]);y=[L,new a.P(H.x,L.y),H,new a.P(L.x,H.y),L]}return this.style.queryRenderedFeatures(y,u,this.transform)}querySourceFeatures(R,u){return this.style.querySourceFeatures(R,u)}setStyle(R,u){return(u=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&R?(this._diffStyle(R,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._updateStyle(R,u))}setTransformRequest(R){return this._requestManager.setTransformRequest(R),this}_getUIString(R){const u=this._locale[R];if(u==null)throw new Error(`Missing UI string '${R}'`);return u}_updateStyle(R,u){if(u.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(R,u));const y=this.style&&u.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!R)),R?(this.style=new pa(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof R=="string"?this.style.loadURL(R,u,y):this.style.loadJSON(R,u,y),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new pa(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(R,u){if(typeof R=="string"){const y=this._requestManager.transformRequest(R,k.Style);a.h(y,new AbortController).then(A=>{this._updateDiff(A.data,u)}).catch(A=>{A&&this.fire(new a.j(A))})}else typeof R=="object"&&this._updateDiff(R,u)}_updateDiff(R,u){try{this.style.setState(R,u)&&this._update(!0)}catch(y){a.w(`Unable to perform style diff: ${y.message||y.error||y}.  Rebuilding the style from scratch.`),this._updateStyle(R,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(R,u){return this._lazyInitEmptyStyle(),this.style.addSource(R,u),this._update(!0)}isSourceLoaded(R){const u=this.style&&this.style.sourceCaches[R];if(u!==void 0)return u.loaded();this.fire(new a.j(new Error(`There is no source with ID '${R}'`)))}setTerrain(R){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),R){const u=this.style.sourceCaches[R.source];if(!u)throw new Error(`cannot load terrain, because there exists no source with ID: ${R.source}`);this.terrain===null&&u.reload();for(const y in this.style._layers){const A=this.style._layers[y];A.type==="hillshade"&&A.source===R.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Qh(this.painter,u,R),this.painter.renderToTexture=new Ya(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=y=>{y.dataType==="style"?this.terrain.sourceCache.freeRtt():y.dataType==="source"&&y.tile&&(y.sourceId!==R.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(y.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.k("terrain",{terrain:R})),this}getTerrain(){var R,u;return(u=(R=this.terrain)===null||R===void 0?void 0:R.options)!==null&&u!==void 0?u:null}areTilesLoaded(){const R=this.style&&this.style.sourceCaches;for(const u in R){const y=R[u]._tiles;for(const A in y){const P=y[A];if(P.state!=="loaded"&&P.state!=="errored")return!1}}return!0}removeSource(R){return this.style.removeSource(R),this._update(!0)}getSource(R){return this.style.getSource(R)}addImage(R,u,y={}){const{pixelRatio:A=1,sdf:P=!1,stretchX:L,stretchY:H,content:q}=y;if(this._lazyInitEmptyStyle(),!(u instanceof HTMLImageElement||a.b(u))){if(u.width===void 0||u.height===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:K,height:te,data:le}=u,de=u;return this.style.addImage(R,{data:new a.R({width:K,height:te},new Uint8Array(le)),pixelRatio:A,stretchX:L,stretchY:H,content:q,sdf:P,version:0,userImage:de}),de.onAdd&&de.onAdd(this,R),this}}{const{width:K,height:te,data:le}=p.getImageData(u);this.style.addImage(R,{data:new a.R({width:K,height:te},le),pixelRatio:A,stretchX:L,stretchY:H,content:q,sdf:P,version:0})}}updateImage(R,u){const y=this.style.getImage(R);if(!y)return this.fire(new a.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const A=u instanceof HTMLImageElement||a.b(u)?p.getImageData(u):u,{width:P,height:L,data:H}=A;if(P===void 0||L===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(P!==y.data.width||L!==y.data.height)return this.fire(new a.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const q=!(u instanceof HTMLImageElement||a.b(u));return y.data.replace(H,q),this.style.updateImage(R,y),this}getImage(R){return this.style.getImage(R)}hasImage(R){return R?!!this.style.getImage(R):(this.fire(new a.j(new Error("Missing required image id"))),!1)}removeImage(R){this.style.removeImage(R)}loadImage(R){return C.getImage(this._requestManager.transformRequest(R,k.Image),new AbortController)}listImages(){return this.style.listImages()}addLayer(R,u){return this._lazyInitEmptyStyle(),this.style.addLayer(R,u),this._update(!0)}moveLayer(R,u){return this.style.moveLayer(R,u),this._update(!0)}removeLayer(R){return this.style.removeLayer(R),this._update(!0)}getLayer(R){return this.style.getLayer(R)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(R,u,y){return this.style.setLayerZoomRange(R,u,y),this._update(!0)}setFilter(R,u,y={}){return this.style.setFilter(R,u,y),this._update(!0)}getFilter(R){return this.style.getFilter(R)}setPaintProperty(R,u,y,A={}){return this.style.setPaintProperty(R,u,y,A),this._update(!0)}getPaintProperty(R,u){return this.style.getPaintProperty(R,u)}setLayoutProperty(R,u,y,A={}){return this.style.setLayoutProperty(R,u,y,A),this._update(!0)}getLayoutProperty(R,u){return this.style.getLayoutProperty(R,u)}setGlyphs(R,u={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(R,u),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(R,u,y={}){return this._lazyInitEmptyStyle(),this.style.addSprite(R,u,y,A=>{A||this._update(!0)}),this}removeSprite(R){return this._lazyInitEmptyStyle(),this.style.removeSprite(R),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(R,u={}){return this._lazyInitEmptyStyle(),this.style.setSprite(R,u,y=>{y||this._update(!0)}),this}setLight(R,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(R,u),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(R,u){return this.style.setFeatureState(R,u),this._update()}removeFeatureState(R,u){return this.style.removeFeatureState(R,u),this._update()}getFeatureState(R){return this.style.getFeatureState(R)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let R=0,u=0;return this._container&&(R=this._container.clientWidth||400,u=this._container.clientHeight||300),[R,u]}_setupContainer(){const R=this._container;R.classList.add("maplibregl-map");const u=this._canvasContainer=g.create("div","maplibregl-canvas-container",R);this._interactive&&u.classList.add("maplibregl-interactive"),this._canvas=g.create("canvas","maplibregl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const y=this._containerDimensions(),A=this._getClampedPixelRatio(y[0],y[1]);this._resizeCanvas(y[0],y[1],A);const P=this._controlContainer=g.create("div","maplibregl-control-container",R),L=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(H=>{L[H]=g.create("div",`maplibregl-ctrl-${H} `,P)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(R,u,y){this._canvas.width=Math.floor(y*R),this._canvas.height=Math.floor(y*u),this._canvas.style.width=`${R}px`,this._canvas.style.height=`${u}px`}_setupPainter(){const R={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let u=null;this._canvas.addEventListener("webglcontextcreationerror",A=>{u={requestedAttributes:R},A&&(u.statusMessage=A.statusMessage,u.type=A.type)},{once:!0});const y=this._canvas.getContext("webgl2",R)||this._canvas.getContext("webgl",R);if(!y){const A="Failed to initialize WebGL";throw u?(u.message=A,new Error(JSON.stringify(u))):new Error(A)}this.painter=new Ml(y,this.transform),v.testSupport(y)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(R){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||R,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(R){return this._update(),this._renderTaskQueue.add(R)}_cancelRenderFrame(R){this._renderTaskQueue.remove(R)}_render(R){const u=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(R),this._removed)return;let y=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const P=this.transform.zoom,L=p.now();this.style.zoomHistory.update(P,L);const H=new a.a8(P,{now:L,fadeDuration:u,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),q=H.crossFadingFactor();q===1&&q===this._crossFadingFactor||(y=!0,this._crossFadingFactor=q),this.style.update(H)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,u,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:u,showPadding:this.showPadding}),this.fire(new a.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.bc.mark(a.bd.load),this.fire(new a.k("load"))),this.style&&(this.style.hasTransitions()||y)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const A=this._sourcesDirty||this._styleDirty||this._placementDirty;return A||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.k("idle")),!this._loaded||this._fullyLoaded||A||(this._fullyLoaded=!0,a.bc.mark(a.bd.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var R;this._hash&&this._hash.remove();for(const y of this._controls)y.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),C.removeThrottleControl(this._imageQueueHandle),(R=this._resizeObserver)===null||R===void 0||R.disconnect();const u=this.painter.context.gl.getExtension("WEBGL_lose_context");u&&u.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),g.remove(this._canvasContainer),g.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),a.bc.clearMetrics(),this._removed=!0,this.fire(new a.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,p.frameAsync(this._frameRequest).then(R=>{a.bc.frame(R),this._frameRequest=null,this._render(R)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(R){this._showTileBoundaries!==R&&(this._showTileBoundaries=R,this._update())}get showPadding(){return!!this._showPadding}set showPadding(R){this._showPadding!==R&&(this._showPadding=R,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(R){this._showCollisionBoxes!==R&&(this._showCollisionBoxes=R,R?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(R){this._showOverdrawInspector!==R&&(this._showOverdrawInspector=R,this._update())}get repaint(){return!!this._repaint}set repaint(R){this._repaint!==R&&(this._repaint=R,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(R){this._vertices=R,this._update()}get version(){return Nc}getCameraTargetElevation(){return this.transform.elevation}},s.MapMouseEvent=uo,s.MapTouchEvent=ic,s.MapWheelEvent=xs,s.Marker=$o,s.NavigationControl=class{constructor(R){this._updateZoomButtons=()=>{const u=this._map.getZoom(),y=u===this._map.getMaxZoom(),A=u===this._map.getMinZoom();this._zoomInButton.disabled=y,this._zoomOutButton.disabled=A,this._zoomInButton.setAttribute("aria-disabled",y.toString()),this._zoomOutButton.setAttribute("aria-disabled",A.toString())},this._rotateCompassArrow=()=>{const u=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=u},this._setButtonTitle=(u,y)=>{const A=this._map._getUIString(`NavigationControl.${y}`);u.title=A,u.setAttribute("aria-label",A)},this.options=a.e({},ef,R),this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",u=>u.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",u=>this._map.zoomIn({},{originalEvent:u})),g.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",u=>this._map.zoomOut({},{originalEvent:u})),g.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",u=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:u}):this._map.resetNorth({},{originalEvent:u})}),this._compassIcon=g.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(R){return this._map=R,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Zm(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){g.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(R,u){const y=g.create("button",R,this._container);return y.type="button",y.addEventListener("click",u),y}},s.Popup=class extends a.E{constructor(R){super(),this.remove=()=>(this._content&&g.remove(this._content),this._container&&(g.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.k("close"))),this),this._onMouseUp=u=>{this._update(u.point)},this._onMouseMove=u=>{this._update(u.point)},this._onDrag=u=>{this._update(u.point)},this._update=u=>{var y;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=g.create("div","maplibregl-popup",this._map.getContainer()),this._tip=g.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const q of this.options.className.split(" "))this._container.classList.add(q);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Ro(this._lngLat,this._flatPos,this._map.transform):(y=this._lngLat)===null||y===void 0?void 0:y.wrap(),this._trackPointer&&!u)return;const A=this._flatPos=this._pos=this._trackPointer&&u?u:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&u?u:this._map.transform.locationPoint(this._lngLat));let P=this.options.anchor;const L=mp(this.options.offset);if(!P){const q=this._container.offsetWidth,K=this._container.offsetHeight;let te;te=A.y+L.bottom.y<K?["top"]:A.y>this._map.transform.height-K?["bottom"]:[],A.x<q/2?te.push("left"):A.x>this._map.transform.width-q/2&&te.push("right"),P=te.length===0?"bottom":te.join("-")}let H=A.add(L[P]);this.options.subpixelPositioning||(H=H.round()),g.setTransform(this._container,`${hp[P]} translate(${H.x}px,${H.y}px)`),Jm(this._container,P,"popup")},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(pp),R)}addTo(R){return this._map&&this.remove(),this._map=R,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(R){return this._lngLat=a.M.convert(R),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(R){return this.setDOMContent(document.createTextNode(R))}setHTML(R){const u=document.createDocumentFragment(),y=document.createElement("body");let A;for(y.innerHTML=R;A=y.firstChild,A;)u.appendChild(A);return this.setDOMContent(u)}getMaxWidth(){var R;return(R=this._container)===null||R===void 0?void 0:R.style.maxWidth}setMaxWidth(R){return this.options.maxWidth=R,this._update(),this}setDOMContent(R){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=g.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(R),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(R){this._container&&this._container.classList.add(R)}removeClassName(R){this._container&&this._container.classList.remove(R)}setOffset(R){return this.options.offset=R,this._update(),this}toggleClassName(R){if(this._container)return this._container.classList.toggle(R)}setSubpixelPositioning(R){this.options.subpixelPositioning=R}_createCloseButton(){this.options.closeButton&&(this._closeButton=g.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const R=this._container.querySelector(eg);R&&R.focus()}},s.RasterDEMTileSource=sn,s.RasterTileSource=Vt,s.ScaleControl=class{constructor(R){this._onMove=()=>{fp(this._map,this._container,this.options)},this.setUnit=u=>{this.options.unit=u,fp(this._map,this._container,this.options)},this.options=a.e({},Qm,R)}getDefaultPosition(){return"bottom-left"}onAdd(R){return this._map=R,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-scale",R.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){g.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},s.ScrollZoomHandler=Gm,s.Style=pa,s.TerrainControl=class{constructor(R){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=R}onAdd(R){return this._map=R,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=g.create("button","maplibregl-ctrl-terrain",this._container),g.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){g.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},s.TwoFingersTouchPitchHandler=Yy,s.TwoFingersTouchRotateHandler=lp,s.TwoFingersTouchZoomHandler=Ud,s.TwoFingersTouchZoomRotateHandler=On,s.VectorTileSource=We,s.VideoSource=Mt,s.addSourceType=(R,u)=>a._(void 0,void 0,void 0,function*(){if(Bt(R))throw new Error(`A source type called "${R}" already exists.`);((y,A)=>{Wt[y]=A})(R,u)}),s.clearPrewarmedResources=function(){const R=lt;R&&(R.isPreloaded()&&R.numActive()===1?(R.release(dt),lt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},s.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},s.getRTLTextPluginStatus=function(){return Yt().getRTLTextPluginStatus()},s.getVersion=function(){return Ky},s.getWorkerCount=function(){return Ue.workerCount},s.getWorkerUrl=function(){return a.a.WORKER_URL},s.importScriptInWorkers=function(R){return at().broadcast("importScript",R)},s.prewarm=function(){Lt().acquire(dt)},s.setMaxParallelImageRequests=function(R){a.a.MAX_PARALLEL_IMAGE_REQUESTS=R},s.setRTLTextPlugin=function(R,u){return Yt().setRTLTextPlugin(R,u)},s.setWorkerCount=function(R){Ue.workerCount=R},s.setWorkerUrl=function(R){a.a.WORKER_URL=R}});var o=n;return o})})(Ire);var wDe=Ire.exports;const m1=xi(wDe);class SDe{constructor(e,n,r){this.onBeforeSwitch=e,this.onSwitch=n,this.onAfterSwitch=r,this.onDocumentClick=this.onDocumentClick.bind(this),this.styles=[],this.currentStyle=null}getDefaultPosition(){return"top-right"}updateStyles(e,n){this.styles=e;let r=null;for(const o of this.styles)if(o.id===(this.currentStyle||n)){r=o.id;break}for(r||(r=this.styles[0].id);this.mapStyleContainer.firstChild;)this.mapStyleContainer.removeChild(this.mapStyleContainer.firstChild);let i;for(const o of this.styles){const s=document.createElement("button");s.type="button",s.innerText=o.title,s.dataset.id=o.id,s.dataset.style=JSON.stringify(o.style),s.addEventListener("click",a=>{const{target:l}=a;l.classList.contains("active")||this.onSelectStyle(l)}),o.id===r&&(i=s,s.classList.add("active")),this.mapStyleContainer.appendChild(s)}this.currentStyle!==r&&(this.onSelectStyle(i),this.currentStyle=r)}onSelectStyle(e){this.onBeforeSwitch();const n=this.styles.find(i=>i.id===e.dataset.id);this.map.setStyle(n.style,{diff:!1}),this.map.setTransformRequest(n.transformRequest),this.onSwitch(e.dataset.id),this.mapStyleContainer.style.display="none",this.styleButton.style.display="block";const r=this.mapStyleContainer.getElementsByClassName("active");for(;r[0];)r[0].classList.remove("active");e.classList.add("active"),this.currentStyle=e.dataset.id,this.onAfterSwitch()}onAdd(e){return this.map=e,this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("maplibregl-ctrl"),this.controlContainer.classList.add("maplibregl-ctrl-group"),this.mapStyleContainer=document.createElement("div"),this.styleButton=document.createElement("button"),this.styleButton.type="button",this.mapStyleContainer.classList.add("maplibregl-style-list"),this.styleButton.classList.add("maplibregl-ctrl-icon"),this.styleButton.classList.add("maplibregl-style-switcher"),this.styleButton.addEventListener("click",()=>{this.styleButton.style.display="none",this.mapStyleContainer.style.display="block"}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.styleButton),this.controlContainer.appendChild(this.mapStyleContainer),this.controlContainer}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.styleButton||(this.styleButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.map=void 0)}onDocumentClick(e){this.controlContainer&&!this.controlContainer.contains(e.target)&&this.mapStyleContainer&&this.styleButton&&(this.mapStyleContainer.style.display="none",this.styleButton.style.display="block")}}const Vg=(t,e)=>t.hasOwnProperty(e)&&t[e]!==null,RA=(t,e)=>pr(n=>n.session.server.forceSettings?Vg(n.session.server,t)?n.session.server[t]:Vg(n.session.user,t)?n.session.user[t]:e:Vg(n.session.user,t)?n.session.user[t]:Vg(n.session.server,t)?n.session.server[t]:e),MDe=(t,e)=>pr(n=>n.session.server.forceSettings?Vg(n.session.server.attributes,t)?n.session.server.attributes[t]:Vg(n.session.user.attributes,t)?n.session.user.attributes[t]:e:Vg(n.session.user.attributes,t)?n.session.user.attributes[t]:Vg(n.session.server.attributes,t)?n.session.server.attributes[t]:e),Rre=(t,e)=>{window.localStorage.setItem(t,JSON.stringify(e))},OA=(t,e)=>{const[n,r]=W.useState(()=>{const i=window.localStorage.getItem(t);return i?JSON.parse(i):e});return W.useEffect(()=>{n!==e?Rre(t,n):window.localStorage.removeItem(t)},[t,n]),[n,r]},rl=({tiles:t,minZoom:e,maxZoom:n,attribution:r,glyphs:i})=>{const o={type:"raster",tiles:t,attribution:r,tileSize:256,minzoom:e,maxzoom:n};return Object.keys(o).forEach(s=>o[s]===void 0&&delete o[s]),{version:8,sources:{custom:o},glyphs:i,layers:[{id:"custom",type:"raster",source:"custom"}]}},EDe=()=>{const t="mykey",e="pk.0f147952a41c555a5b70614039fd148b",n="mykey",r="mykey",i="mykey",o="mykey";let s=window.location.origin.slice(0,-5),l=MDe("glyphs",!1)?`${s}:8484/map/fonts/{fontstack}/{range}.pbf`:"https://cdn.traccar.com/map/fonts/{fontstack}/{range}.pbf";return[{id:"osm",title:"mapOsm",style:rl({tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],maxZoom:19,attribution:' <a target="_top" rel="noopener" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',glyphs:l}),available:!0},{id:"locationIqStreets",title:"mapLocationIqStreets",style:`https://tiles.locationiq.com/v3/streets/vector.json?key=${e}`,available:!0},{id:"locationIqDark",title:"mapLocationIqDark",style:`https://tiles.locationiq.com/v3/dark/vector.json?key=${e}`,available:!0},{id:"openTopoMap",title:"mapOpenTopoMap",style:rl({tiles:["a","b","c"].map(d=>`https://${d}.tile.opentopomap.org/{z}/{x}/{y}.png`),maxZoom:17,glyphs:l}),available:!0},{id:"carto",title:"mapCarto",style:rl({tiles:["a","b","c","d"].map(d=>`https://${d}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png`),maxZoom:22,attribution:' <a target="_top" rel="noopener" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors,  <a target="_top" rel="noopener" href="https://carto.com/attribution">CARTO</a>',glyphs:l}),available:!0},{id:"googleRoad",title:"mapGoogleRoad",style:rl({tiles:[0,1,2,3].map(d=>`https://mt${d}.google.com/vt/lyrs=m&hl=en&x={x}&y={y}&z={z}&s=Ga`),maxZoom:20,attribution:" Google",glyphs:l}),available:!0},{id:"googleSatellite",title:"mapGoogleSatellite",style:rl({tiles:[0,1,2,3].map(d=>`https://mt${d}.google.com/vt/lyrs=s&hl=en&x={x}&y={y}&z={z}&s=Ga`),maxZoom:20,attribution:" Google",glyphs:l}),available:!0},{id:"googleHybrid",title:"mapGoogleHybrid",style:rl({tiles:[0,1,2,3].map(d=>`https://mt${d}.google.com/vt/lyrs=y&hl=en&x={x}&y={y}&z={z}&s=Ga`),maxZoom:20,attribution:" Google",glyphs:l}),available:!0},{id:"mapTilerBasic",title:"mapMapTilerBasic",style:`https://api.maptiler.com/maps/basic/style.json?key=${t}`,available:!!t,attribute:"mapTilerKey"},{id:"mapTilerHybrid",title:"mapMapTilerHybrid",style:`https://api.maptiler.com/maps/hybrid/style.json?key=${t}`,available:!!t,attribute:"mapTilerKey"},{id:"bingRoad",title:"mapBingRoad",style:rl({tiles:[0,1,2,3].map(d=>`https://t${d}.ssl.ak.dynamic.tiles.virtualearth.net/comp/ch/{quadkey}?mkt=en-US&it=G,L&shading=hill&og=1885&n=z`),maxZoom:21,glyphs:l}),available:!!n,attribute:"bingMapsKey"},{id:"bingAerial",title:"mapBingAerial",style:rl({tiles:[0,1,2,3].map(d=>`https://ecn.t${d}.tiles.virtualearth.net/tiles/a{quadkey}.jpeg?g=12327`),maxZoom:19,glyphs:l}),available:!!n,attribute:"bingMapsKey"},{id:"bingHybrid",title:"mapBingHybrid",style:rl({tiles:[0,1,2,3].map(d=>`https://t${d}.ssl.ak.dynamic.tiles.virtualearth.net/comp/ch/{quadkey}?mkt=en-US&it=A,G,L&og=1885&n=z`),maxZoom:19,glyphs:l}),available:!!n,attribute:"bingMapsKey"},{id:"tomTomBasic",title:"mapTomTomBasic",style:`https://api.tomtom.com/map/1/style/20.0.0-8/basic_main.json?key=${r}`,available:!!r,attribute:"tomTomKey"},{id:"hereBasic",title:"mapHereBasic",style:`https://assets.vector.hereapi.com/styles/berlin/base/mapbox/tilezen?apikey=${i}`,available:!!i,attribute:"hereKey"},{id:"hereHybrid",title:"mapHereHybrid",style:rl({tiles:[1,2,3,4].map(d=>`https://${d}.aerial.maps.ls.hereapi.com/maptile/2.1/maptile/newest/hybrid.day/{z}/{x}/{y}/256/png8?apiKey=${i}`),maxZoom:20,glyphs:l}),available:!!i,attribute:"hereKey"},{id:"hereSatellite",title:"mapHereSatellite",style:rl({tiles:[1,2,3,4].map(d=>`https://${d}.aerial.maps.ls.hereapi.com/maptile/2.1/maptile/newest/satellite.day/{z}/{x}/{y}/256/png8?apiKey=${i}`),maxZoom:19,glyphs:l}),available:!!i,attribute:"hereKey"},{id:"autoNavi",title:"mapAutoNavi",style:rl({tiles:[1,2,3,4].map(d=>`https://webrd0${d}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}`),minZoom:3,maxZoom:18,glyphs:l}),available:!0},{id:"ordnanceSurvey",title:"mapOrdnanceSurvey",style:"https://api.os.uk/maps/vector/v1/vts/resources/styles?key=EAZ8p83u72FTGiLjLC2MsTAl1ko6XQHC",transformRequest:d=>({url:`${d}&srs=3857`}),available:!0},{id:"mapboxStreets",title:"mapMapboxStreets",style:rl({tiles:[`https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/{z}/{x}/{y}?access_token=${o}`],maxZoom:22,glyphs:l}),available:!!o,attribute:"mapboxAccessToken"},{id:"mapboxOutdoors",title:"mapMapboxOutdoors",style:rl({tiles:[`https://api.mapbox.com/styles/v1/mapbox/outdoors-v11/tiles/{z}/{x}/{y}?access_token=${o}`],maxZoom:22,glyphs:l}),available:!!o,attribute:"mapboxAccessToken"},{id:"mapboxSatelliteStreet",title:"mapMapboxSatellite",style:rl({tiles:[`https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v11/tiles/{z}/{x}/{y}?access_token=${o}`],maxZoom:22,glyphs:l}),available:!!o,attribute:"mapboxAccessToken"},{id:"custom",title:"mapCustom",style:rl({tiles:["http://localhost:8080/tile/{z}/{x}/{y}.png"],maxZoom:19,glyphs:l}),available:!0}]},Ab=document.createElement("div");Ab.style.width="100%";Ab.style.height="100%";Ab.style.boxSizing="initial";const ht=new m1.Map({container:Ab,attributionControl:!1,zoom:14});let Z$=!1;const J$=new Set,TDe=t=>{J$.add(t),t(Z$)},CDe=t=>{J$.delete(t)},Ore=t=>{Z$=t,J$.forEach(e=>e(t))},ADe=async()=>{Z$||(ht.hasImage("background")||Object.entries(Rp).forEach(([t,e])=>{ht.addImage(t,e,{pixelRatio:window.devicePixelRatio})}),Ore(!0))};ht.addControl(new m1.NavigationControl);const Lre=new SDe(()=>Ore(!1),t=>Rre("selectedMapStyle",t),()=>{ht.once("styledata",()=>{const t=()=>{ht.loaded()?ADe():setTimeout(t,33)};t()})});ht.addControl(Lre);const Q$=({children:t})=>{const e=W.useRef(null),[n,r]=W.useState(!1),i=EDe(),o="osm,locationIqStreets,carto,custom",[s]=OA("selectedMapStyle",RA("map","osm")),a="my tocken",l=21;return W.useEffect(()=>{ht.setMaxZoom(l)},[l]),W.useEffect(()=>{m1.accessToken=a},[a]),W.useEffect(()=>{const d=i.filter(p=>p.available&&o.includes(p.id)),f=d.length?d:i.filter(p=>p.id==="osm");Lre.updateStyles(f,s)},[i,s]),W.useEffect(()=>{const d=f=>r(f);return TDe(d),()=>{CDe(d)}},[]),W.useLayoutEffect(()=>{const d=e.current;return d.appendChild(Ab),ht.resize(),()=>{d.removeChild(Ab)}},[e]),F.jsx("div",{style:{position:"relative",width:"100%",height:"100%"},ref:e,children:n&&t})},ej=Symbol.for("yaml.alias"),wF=Symbol.for("yaml.document"),ny=Symbol.for("yaml.map"),Dre=Symbol.for("yaml.pair"),hm=Symbol.for("yaml.scalar"),g1=Symbol.for("yaml.seq"),wd=Symbol.for("yaml.node.type"),B0=t=>!!t&&typeof t=="object"&&t[wd]===ej,y1=t=>!!t&&typeof t=="object"&&t[wd]===wF,v1=t=>!!t&&typeof t=="object"&&t[wd]===ny,Po=t=>!!t&&typeof t=="object"&&t[wd]===Dre,co=t=>!!t&&typeof t=="object"&&t[wd]===hm,_1=t=>!!t&&typeof t=="object"&&t[wd]===g1;function Do(t){if(t&&typeof t=="object")switch(t[wd]){case ny:case g1:return!0}return!1}function fs(t){if(t&&typeof t=="object")switch(t[wd]){case ej:case ny:case hm:case g1:return!0}return!1}const PDe=t=>(co(t)||Do(t))&&!!t.anchor,gc=Symbol("break visit"),Nre=Symbol("skip children"),Af=Symbol("remove node");function py(t,e){const n=zre(e);y1(t)?Tx(null,t.contents,n,Object.freeze([t]))===Af&&(t.contents=null):Tx(null,t,n,Object.freeze([]))}py.BREAK=gc;py.SKIP=Nre;py.REMOVE=Af;function Tx(t,e,n,r){const i=Fre(t,e,n,r);if(fs(i)||Po(i))return Bre(t,r,i),Tx(t,i,n,r);if(typeof i!="symbol"){if(Do(e)){r=Object.freeze(r.concat(e));for(let o=0;o<e.items.length;++o){const s=Tx(o,e.items[o],n,r);if(typeof s=="number")o=s-1;else{if(s===gc)return gc;s===Af&&(e.items.splice(o,1),o-=1)}}}else if(Po(e)){r=Object.freeze(r.concat(e));const o=Tx("key",e.key,n,r);if(o===gc)return gc;o===Af&&(e.key=null);const s=Tx("value",e.value,n,r);if(s===gc)return gc;s===Af&&(e.value=null)}}return i}async function vR(t,e){const n=zre(e);y1(t)?await Cx(null,t.contents,n,Object.freeze([t]))===Af&&(t.contents=null):await Cx(null,t,n,Object.freeze([]))}vR.BREAK=gc;vR.SKIP=Nre;vR.REMOVE=Af;async function Cx(t,e,n,r){const i=await Fre(t,e,n,r);if(fs(i)||Po(i))return Bre(t,r,i),Cx(t,i,n,r);if(typeof i!="symbol"){if(Do(e)){r=Object.freeze(r.concat(e));for(let o=0;o<e.items.length;++o){const s=await Cx(o,e.items[o],n,r);if(typeof s=="number")o=s-1;else{if(s===gc)return gc;s===Af&&(e.items.splice(o,1),o-=1)}}}else if(Po(e)){r=Object.freeze(r.concat(e));const o=await Cx("key",e.key,n,r);if(o===gc)return gc;o===Af&&(e.key=null);const s=await Cx("value",e.value,n,r);if(s===gc)return gc;s===Af&&(e.value=null)}}return i}function zre(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function Fre(t,e,n,r){var i,o,s,a,l;if(typeof n=="function")return n(t,e,r);if(v1(e))return(i=n.Map)==null?void 0:i.call(n,t,e,r);if(_1(e))return(o=n.Seq)==null?void 0:o.call(n,t,e,r);if(Po(e))return(s=n.Pair)==null?void 0:s.call(n,t,e,r);if(co(e))return(a=n.Scalar)==null?void 0:a.call(n,t,e,r);if(B0(e))return(l=n.Alias)==null?void 0:l.call(n,t,e,r)}function Bre(t,e,n){const r=e[e.length-1];if(Do(r))r.items[t]=n;else if(Po(r))t==="key"?r.key=n:r.value=n;else if(y1(r))r.contents=n;else{const i=B0(r)?"alias":"scalar";throw new Error(`Cannot replace node with ${i} parent`)}}const IDe={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},kDe=t=>t.replace(/[!,[\]{}]/g,e=>IDe[e]);class Fl{constructor(e,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Fl.defaultYaml,e),this.tags=Object.assign({},Fl.defaultTags,n)}clone(){const e=new Fl(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new Fl(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Fl.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Fl.defaultTags);break}return e}add(e,n){this.atNextDocument&&(this.yaml={explicit:Fl.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Fl.defaultTags),this.atNextDocument=!1);const r=e.trim().split(/[ \t]+/),i=r.shift();switch(i){case"%TAG":{if(r.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),r.length<2))return!1;const[o,s]=r;return this.tags[o]=s,!0}case"%YAML":{if(this.yaml.explicit=!0,r.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;const[o]=r;if(o==="1.1"||o==="1.2")return this.yaml.version=o,!0;{const s=/^\d+\.\d+$/.test(o);return n(6,`Unsupported YAML version ${o}`,s),!1}}default:return n(0,`Unknown directive ${i}`,!0),!1}}tagName(e,n){if(e==="!")return"!";if(e[0]!=="!")return n(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const s=e.slice(2,-1);return s==="!"||s==="!!"?(n(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&n("Verbatim tags must end with a >"),s)}const[,r,i]=e.match(/^(.*!)([^!]*)$/s);i||n(`The ${e} tag has no suffix`);const o=this.tags[r];if(o)try{return o+decodeURIComponent(i)}catch(s){return n(String(s)),null}return r==="!"?e:(n(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[n,r]of Object.entries(this.tags))if(e.startsWith(r))return n+kDe(e.substring(r.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],r=Object.entries(this.tags);let i;if(e&&r.length>0&&fs(e.contents)){const o={};py(e.contents,(s,a)=>{fs(a)&&a.tag&&(o[a.tag]=!0)}),i=Object.keys(o)}else i=[];for(const[o,s]of r)o==="!!"&&s==="tag:yaml.org,2002:"||(!e||i.some(a=>a.startsWith(s)))&&n.push(`%TAG ${o} ${s}`);return n.join(`
`)}}Fl.defaultYaml={explicit:!1,version:"1.2"};Fl.defaultTags={"!!":"tag:yaml.org,2002:"};function $re(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(n)}return!0}function jre(t){const e=new Set;return py(t,{Value(n,r){r.anchor&&e.add(r.anchor)}}),e}function Ure(t,e){for(let n=1;;++n){const r=`${t}${n}`;if(!e.has(r))return r}}function RDe(t,e){const n=[],r=new Map;let i=null;return{onAnchor:o=>{n.push(o),i||(i=jre(t));const s=Ure(e,i);return i.add(s),s},setAnchors:()=>{for(const o of n){const s=r.get(o);if(typeof s=="object"&&s.anchor&&(co(s.node)||Do(s.node)))s.node.anchor=s.anchor;else{const a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=o,a}}},sourceObjects:r}}function Ax(t,e,n,r){if(r&&typeof r=="object")if(Array.isArray(r))for(let i=0,o=r.length;i<o;++i){const s=r[i],a=Ax(t,r,String(i),s);a===void 0?delete r[i]:a!==s&&(r[i]=a)}else if(r instanceof Map)for(const i of Array.from(r.keys())){const o=r.get(i),s=Ax(t,r,i,o);s===void 0?r.delete(i):s!==o&&r.set(i,s)}else if(r instanceof Set)for(const i of Array.from(r)){const o=Ax(t,r,i,i);o===void 0?r.delete(i):o!==i&&(r.delete(i),r.add(o))}else for(const[i,o]of Object.entries(r)){const s=Ax(t,r,i,o);s===void 0?delete r[i]:s!==o&&(r[i]=s)}return t.call(e,n,r)}function fd(t,e,n){if(Array.isArray(t))return t.map((r,i)=>fd(r,String(i),n));if(t&&typeof t.toJSON=="function"){if(!n||!PDe(t))return t.toJSON(e,n);const r={aliasCount:0,count:1,res:void 0};n.anchors.set(t,r),n.onCreate=o=>{r.res=o,delete n.onCreate};const i=t.toJSON(e,n);return n.onCreate&&n.onCreate(i),i}return typeof t=="bigint"&&!(n!=null&&n.keep)?Number(t):t}class tj{constructor(e){Object.defineProperty(this,wd,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:n,maxAliasCount:r,onAnchor:i,reviver:o}={}){if(!y1(e))throw new TypeError("A document argument is required");const s={anchors:new Map,doc:e,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},a=fd(this,"",s);if(typeof i=="function")for(const{count:l,res:d}of s.anchors.values())i(d,l);return typeof o=="function"?Ax(o,{"":a},"",a):a}}class _R extends tj{constructor(e){super(ej),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let n;return py(e,{Node:(r,i)=>{if(i===this)return py.BREAK;i.anchor===this.source&&(n=i)}}),n}toJSON(e,n){if(!n)return{source:this.source};const{anchors:r,doc:i,maxAliasCount:o}=n,s=this.resolve(i);if(!s){const l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let a=r.get(s);if(a||(fd(s,null,n),a=r.get(s)),!a||a.res===void 0){const l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(o>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=LA(i,s,r)),a.count*a.aliasCount>o)){const l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return a.res}toString(e,n,r){const i=`*${this.source}`;if(e){if($re(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const o=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(o)}if(e.implicitKey)return`${i} `}return i}}function LA(t,e,n){if(B0(e)){const r=e.resolve(t),i=n&&r&&n.get(r);return i?i.count*i.aliasCount:0}else if(Do(e)){let r=0;for(const i of e.items){const o=LA(t,i,n);o>r&&(r=o)}return r}else if(Po(e)){const r=LA(t,e.key,n),i=LA(t,e.value,n);return Math.max(r,i)}return 1}const Vre=t=>!t||typeof t!="function"&&typeof t!="object";class Rr extends tj{constructor(e){super(hm),this.value=e}toJSON(e,n){return n!=null&&n.keep?this.value:fd(this.value,e,n)}toString(){return String(this.value)}}Rr.BLOCK_FOLDED="BLOCK_FOLDED";Rr.BLOCK_LITERAL="BLOCK_LITERAL";Rr.PLAIN="PLAIN";Rr.QUOTE_DOUBLE="QUOTE_DOUBLE";Rr.QUOTE_SINGLE="QUOTE_SINGLE";const ODe="tag:yaml.org,2002:";function LDe(t,e,n){if(e){const r=n.filter(o=>o.tag===e),i=r.find(o=>!o.format)??r[0];if(!i)throw new Error(`Tag ${e} not found`);return i}return n.find(r=>{var i;return((i=r.identify)==null?void 0:i.call(r,t))&&!r.format})}function T2(t,e,n){var p,g,v;if(y1(t)&&(t=t.contents),fs(t))return t;if(Po(t)){const x=(g=(p=n.schema[ny]).createNode)==null?void 0:g.call(p,n.schema,null,n);return x.items.push(t),x}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:r,onAnchor:i,onTagObj:o,schema:s,sourceObjects:a}=n;let l;if(r&&t&&typeof t=="object"){if(l=a.get(t),l)return l.anchor||(l.anchor=i(t)),new _R(l.anchor);l={anchor:null,node:null},a.set(t,l)}e!=null&&e.startsWith("!!")&&(e=ODe+e.slice(2));let d=LDe(t,e,s.tags);if(!d){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){const x=new Rr(t);return l&&(l.node=x),x}d=t instanceof Map?s[ny]:Symbol.iterator in Object(t)?s[g1]:s[ny]}o&&(o(d),delete n.onTagObj);const f=d!=null&&d.createNode?d.createNode(n.schema,t,n):typeof((v=d==null?void 0:d.nodeClass)==null?void 0:v.from)=="function"?d.nodeClass.from(n.schema,t,n):new Rr(t);return e?f.tag=e:d.default||(f.tag=d.tag),l&&(l.node=f),f}function WP(t,e,n){let r=n;for(let i=e.length-1;i>=0;--i){const o=e[i];if(typeof o=="number"&&Number.isInteger(o)&&o>=0){const s=[];s[o]=r,r=s}else r=new Map([[o,r]])}return T2(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const mS=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done;class nj extends tj{constructor(e,n){super(e),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(e){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(n.schema=e),n.items=n.items.map(r=>fs(r)||Po(r)?r.clone(e):r),this.range&&(n.range=this.range.slice()),n}addIn(e,n){if(mS(e))this.add(n);else{const[r,...i]=e,o=this.get(r,!0);if(Do(o))o.addIn(i,n);else if(o===void 0&&this.schema)this.set(r,WP(this.schema,i,n));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}deleteIn(e){const[n,...r]=e;if(r.length===0)return this.delete(n);const i=this.get(n,!0);if(Do(i))return i.deleteIn(r);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`)}getIn(e,n){const[r,...i]=e,o=this.get(r,!0);return i.length===0?!n&&co(o)?o.value:o:Do(o)?o.getIn(i,n):void 0}hasAllNullValues(e){return this.items.every(n=>{if(!Po(n))return!1;const r=n.value;return r==null||e&&co(r)&&r.value==null&&!r.commentBefore&&!r.comment&&!r.tag})}hasIn(e){const[n,...r]=e;if(r.length===0)return this.has(n);const i=this.get(n,!0);return Do(i)?i.hasIn(r):!1}setIn(e,n){const[r,...i]=e;if(i.length===0)this.set(r,n);else{const o=this.get(r,!0);if(Do(o))o.setIn(i,n);else if(o===void 0&&this.schema)this.set(r,WP(this.schema,i,n));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}}nj.maxFlowStringSingleLineLength=60;const DDe=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function Up(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const Uv=(t,e,n)=>t.endsWith(`
`)?Up(n,e):n.includes(`
`)?`
`+Up(n,e):(t.endsWith(" ")?"":" ")+n,Wre="flow",SF="block",DA="quoted";function xR(t,e,n="flow",{indentAtStart:r,lineWidth:i=80,minContentWidth:o=20,onFold:s,onOverflow:a}={}){if(!i||i<0)return t;const l=Math.max(1+o,1+i-e.length);if(t.length<=l)return t;const d=[],f={};let p=i-e.length;typeof r=="number"&&(r>i-Math.max(2,o)?d.push(0):p=i-r);let g,v,x=!1,b=-1,S=-1,M=-1;n===SF&&(b=EG(t,b,e.length),b!==-1&&(p=b+l));for(let C;C=t[b+=1];){if(n===DA&&C==="\\"){switch(S=b,t[b+1]){case"x":b+=3;break;case"u":b+=5;break;case"U":b+=9;break;default:b+=1}M=b}if(C===`
`)n===SF&&(b=EG(t,b,e.length)),p=b+e.length+l,g=void 0;else{if(C===" "&&v&&v!==" "&&v!==`
`&&v!=="	"){const k=t[b+1];k&&k!==" "&&k!==`
`&&k!=="	"&&(g=b)}if(b>=p)if(g)d.push(g),p=g+l,g=void 0;else if(n===DA){for(;v===" "||v==="	";)v=C,C=t[b+=1],x=!0;const k=b>M+1?b-2:S-1;if(f[k])return t;d.push(k),f[k]=!0,p=k+l,g=void 0}else x=!0}v=C}if(x&&a&&a(),d.length===0)return t;s&&s();let T=t.slice(0,d[0]);for(let C=0;C<d.length;++C){const k=d[C],O=d[C+1]||t.length;k===0?T=`
${e}${t.slice(0,O)}`:(n===DA&&f[k]&&(T+=`${t[k]}\\`),T+=`
${e}${t.slice(k+1,O)}`)}return T}function EG(t,e,n){let r=e,i=e+1,o=t[i];for(;o===" "||o==="	";)if(e<i+n)o=t[++e];else{do o=t[++e];while(o&&o!==`
`);r=e,i=e+1,o=t[i]}return r}const bR=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),wR=t=>/^(%|---|\.\.\.)/m.test(t);function NDe(t,e,n){if(!e||e<0)return!1;const r=e-n,i=t.length;if(i<=r)return!1;for(let o=0,s=0;o<i;++o)if(t[o]===`
`){if(o-s>r)return!0;if(s=o+1,i-s<=r)return!1}return!0}function NS(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:r}=e,i=e.options.doubleQuotedMinMultiLineLength,o=e.indent||(wR(t)?"  ":"");let s="",a=0;for(let l=0,d=n[l];d;d=n[++l])if(d===" "&&n[l+1]==="\\"&&n[l+2]==="n"&&(s+=n.slice(a,l)+"\\ ",l+=1,a=l,d="\\"),d==="\\")switch(n[l+1]){case"u":{s+=n.slice(a,l);const f=n.substr(l+2,4);switch(f){case"0000":s+="\\0";break;case"0007":s+="\\a";break;case"000b":s+="\\v";break;case"001b":s+="\\e";break;case"0085":s+="\\N";break;case"00a0":s+="\\_";break;case"2028":s+="\\L";break;case"2029":s+="\\P";break;default:f.substr(0,2)==="00"?s+="\\x"+f.substr(2):s+=n.substr(l,6)}l+=5,a=l+1}break;case"n":if(r||n[l+2]==='"'||n.length<i)l+=1;else{for(s+=n.slice(a,l)+`

`;n[l+2]==="\\"&&n[l+3]==="n"&&n[l+4]!=='"';)s+=`
`,l+=2;s+=o,n[l+2]===" "&&(s+="\\"),l+=1,a=l+1}break;default:l+=1}return s=a?s+n.slice(a):n,r?s:xR(s,o,DA,bR(e,!1))}function MF(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return NS(t,e);const n=e.indent||(wR(t)?"  ":""),r="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?r:xR(r,n,Wre,bR(e,!1))}function Px(t,e){const{singleQuote:n}=e.options;let r;if(n===!1)r=NS;else{const i=t.includes('"'),o=t.includes("'");i&&!o?r=MF:o&&!i?r=NS:r=n?MF:NS}return r(t,e)}let EF;try{EF=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{EF=/\n+(?!\n|$)/g}function NA({comment:t,type:e,value:n},r,i,o){const{blockQuote:s,commentString:a,lineWidth:l}=r.options;if(!s||/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return Px(n,r);const d=r.indent||(r.forceBlockIndent||wR(n)?"  ":""),f=s==="literal"?!0:s==="folded"||e===Rr.BLOCK_FOLDED?!1:e===Rr.BLOCK_LITERAL?!0:!NDe(n,l,d.length);if(!n)return f?`|
`:`>
`;let p,g;for(g=n.length;g>0;--g){const D=n[g-1];if(D!==`
`&&D!=="	"&&D!==" ")break}let v=n.substring(g);const x=v.indexOf(`
`);x===-1?p="-":n===v||x!==v.length-1?(p="+",o&&o()):p="",v&&(n=n.slice(0,-v.length),v[v.length-1]===`
`&&(v=v.slice(0,-1)),v=v.replace(EF,`$&${d}`));let b=!1,S,M=-1;for(S=0;S<n.length;++S){const D=n[S];if(D===" ")b=!0;else if(D===`
`)M=S;else break}let T=n.substring(0,M<S?M+1:S);T&&(n=n.substring(T.length),T=T.replace(/\n+/g,`$&${d}`));let k=(f?"|":">")+(b?d?"2":"1":"")+p;if(t&&(k+=" "+a(t.replace(/ ?[\r\n]+/g," ")),i&&i()),f)return n=n.replace(/\n+/g,`$&${d}`),`${k}
${d}${T}${n}${v}`;n=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${d}`);const O=xR(`${T}${n}${v}`,d,SF,bR(r,!0));return`${k}
${d}${O}`}function zDe(t,e,n,r){const{type:i,value:o}=t,{actualString:s,implicitKey:a,indent:l,indentStep:d,inFlow:f}=e;if(a&&o.includes(`
`)||f&&/[[\]{},]/.test(o))return Px(o,e);if(!o||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(o))return a||f||!o.includes(`
`)?Px(o,e):NA(t,e,n,r);if(!a&&!f&&i!==Rr.PLAIN&&o.includes(`
`))return NA(t,e,n,r);if(wR(o)){if(l==="")return e.forceBlockIndent=!0,NA(t,e,n,r);if(a&&l===d)return Px(o,e)}const p=o.replace(/\n+/g,`$&
${l}`);if(s){const g=b=>{var S;return b.default&&b.tag!=="tag:yaml.org,2002:str"&&((S=b.test)==null?void 0:S.test(p))},{compat:v,tags:x}=e.doc.schema;if(x.some(g)||v!=null&&v.some(g))return Px(o,e)}return a?p:xR(p,l,Wre,bR(e,!1))}function hE(t,e,n,r){const{implicitKey:i,inFlow:o}=e,s=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)});let{type:a}=t;a!==Rr.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(s.value)&&(a=Rr.QUOTE_DOUBLE);const l=f=>{switch(f){case Rr.BLOCK_FOLDED:case Rr.BLOCK_LITERAL:return i||o?Px(s.value,e):NA(s,e,n,r);case Rr.QUOTE_DOUBLE:return NS(s.value,e);case Rr.QUOTE_SINGLE:return MF(s.value,e);case Rr.PLAIN:return zDe(s,e,n,r);default:return null}};let d=l(a);if(d===null){const{defaultKeyType:f,defaultStringType:p}=e.options,g=i&&f||p;if(d=l(g),d===null)throw new Error(`Unsupported default string type ${g}`)}return d}function Hre(t,e){const n=Object.assign({blockQuote:!0,commentString:DDe,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let r;switch(n.collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:r,options:n}}function FDe(t,e){var i;if(e.tag){const o=t.filter(s=>s.tag===e.tag);if(o.length>0)return o.find(s=>s.format===e.format)??o[0]}let n,r;if(co(e)){r=e.value;const o=t.filter(s=>{var a;return(a=s.identify)==null?void 0:a.call(s,r)});n=o.find(s=>s.format===e.format)??o.find(s=>!s.format)}else r=e,n=t.find(o=>o.nodeClass&&r instanceof o.nodeClass);if(!n){const o=((i=r==null?void 0:r.constructor)==null?void 0:i.name)??typeof r;throw new Error(`Tag not resolved for ${o} value`)}return n}function BDe(t,e,{anchors:n,doc:r}){if(!r.directives)return"";const i=[],o=(co(t)||Do(t))&&t.anchor;o&&$re(o)&&(n.add(o),i.push(`&${o}`));const s=t.tag?t.tag:e.default?null:e.tag;return s&&i.push(r.directives.tagString(s)),i.join(" ")}function Pb(t,e,n,r){var l;if(Po(t))return t.toString(e,n,r);if(B0(t)){if(e.doc.directives)return t.toString(e);if((l=e.resolvedAliases)!=null&&l.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let i;const o=fs(t)?t:e.doc.createNode(t,{onTagObj:d=>i=d});i||(i=FDe(e.doc.schema.tags,o));const s=BDe(o,i,e);s.length>0&&(e.indentAtStart=(e.indentAtStart??0)+s.length+1);const a=typeof i.stringify=="function"?i.stringify(o,e,n,r):co(o)?hE(o,e,n,r):o.toString(e,n,r);return s?co(o)||a[0]==="{"||a[0]==="["?`${s} ${a}`:`${s}
${e.indent}${a}`:a}function $De({key:t,value:e},n,r,i){const{allNullValues:o,doc:s,indent:a,indentStep:l,options:{commentString:d,indentSeq:f,simpleKeys:p}}=n;let g=fs(t)&&t.comment||null;if(p){if(g)throw new Error("With simple keys, key nodes cannot have comments");if(Do(t)){const B="With simple keys, collection cannot be used as a key value";throw new Error(B)}}let v=!p&&(!t||g&&e==null&&!n.inFlow||Do(t)||(co(t)?t.type===Rr.BLOCK_FOLDED||t.type===Rr.BLOCK_LITERAL:typeof t=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!v&&(p||!o),indent:a+l});let x=!1,b=!1,S=Pb(t,n,()=>x=!0,()=>b=!0);if(!v&&!n.inFlow&&S.length>1024){if(p)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");v=!0}if(n.inFlow){if(o||e==null)return x&&r&&r(),S===""?"?":v?`? ${S}`:S}else if(o&&!p||e==null&&v)return S=`? ${S}`,g&&!x?S+=Uv(S,n.indent,d(g)):b&&i&&i(),S;x&&(g=null),v?(g&&(S+=Uv(S,n.indent,d(g))),S=`? ${S}
${a}:`):(S=`${S}:`,g&&(S+=Uv(S,n.indent,d(g))));let M,T,C;fs(e)?(M=!!e.spaceBefore,T=e.commentBefore,C=e.comment):(M=!1,T=null,C=null,e&&typeof e=="object"&&(e=s.createNode(e))),n.implicitKey=!1,!v&&!g&&co(e)&&(n.indentAtStart=S.length+1),b=!1,!f&&l.length>=2&&!n.inFlow&&!v&&_1(e)&&!e.flow&&!e.tag&&!e.anchor&&(n.indent=n.indent.substring(2));let k=!1;const O=Pb(e,n,()=>k=!0,()=>b=!0);let D=" ";if(g||M||T){if(D=M?`
`:"",T){const B=d(T);D+=`
${Up(B,n.indent)}`}O===""&&!n.inFlow?D===`
`&&(D=`

`):D+=`
${n.indent}`}else if(!v&&Do(e)){const B=O[0],U=O.indexOf(`
`),J=U!==-1,V=n.inFlow??e.flow??e.items.length===0;if(J||!V){let X=!1;if(J&&(B==="&"||B==="!")){let oe=O.indexOf(" ");B==="&"&&oe!==-1&&oe<U&&O[oe+1]==="!"&&(oe=O.indexOf(" ",oe+1)),(oe===-1||U<oe)&&(X=!0)}X||(D=`
${n.indent}`)}}else(O===""||O[0]===`
`)&&(D="");return S+=D+O,n.inFlow?k&&r&&r():C&&!k?S+=Uv(S,n.indent,d(C)):b&&i&&i(),S}function Gre(t,e){(t==="debug"||t==="warn")&&(typeof process<"u"&&process.emitWarning?process.emitWarning(e):console.warn(e))}const TG="<<";function qre(t,e,{key:n,value:r}){if(t!=null&&t.doc.schema.merge&&jDe(n))if(r=B0(r)?r.resolve(t.doc):r,_1(r))for(const i of r.items)qD(t,e,i);else if(Array.isArray(r))for(const i of r)qD(t,e,i);else qD(t,e,r);else{const i=fd(n,"",t);if(e instanceof Map)e.set(i,fd(r,i,t));else if(e instanceof Set)e.add(i);else{const o=UDe(n,i,t),s=fd(r,o,t);o in e?Object.defineProperty(e,o,{value:s,writable:!0,enumerable:!0,configurable:!0}):e[o]=s}}return e}const jDe=t=>t===TG||co(t)&&t.value===TG&&(!t.type||t.type===Rr.PLAIN);function qD(t,e,n){const r=t&&B0(n)?n.resolve(t.doc):n;if(!v1(r))throw new Error("Merge sources must be maps or map aliases");const i=r.toJSON(null,t,Map);for(const[o,s]of i)e instanceof Map?e.has(o)||e.set(o,s):e instanceof Set?e.add(o):Object.prototype.hasOwnProperty.call(e,o)||Object.defineProperty(e,o,{value:s,writable:!0,enumerable:!0,configurable:!0});return e}function UDe(t,e,n){if(e===null)return"";if(typeof e!="object")return String(e);if(fs(t)&&(n!=null&&n.doc)){const r=Hre(n.doc,{});r.anchors=new Set;for(const o of n.anchors.keys())r.anchors.add(o.anchor);r.inFlow=!0,r.inStringifyKey=!0;const i=t.toString(r);if(!n.mapKeyWarned){let o=JSON.stringify(i);o.length>40&&(o=o.substring(0,36)+'..."'),Gre(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${o}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return i}return JSON.stringify(e)}function rj(t,e,n){const r=T2(t,void 0,n),i=T2(e,void 0,n);return new yl(r,i)}class yl{constructor(e,n=null){Object.defineProperty(this,wd,{value:Dre}),this.key=e,this.value=n}clone(e){let{key:n,value:r}=this;return fs(n)&&(n=n.clone(e)),fs(r)&&(r=r.clone(e)),new yl(n,r)}toJSON(e,n){const r=n!=null&&n.mapAsMap?new Map:{};return qre(n,r,this)}toString(e,n,r){return e!=null&&e.doc?$De(this,e,n,r):JSON.stringify(this)}}function Yre(t,e,n){return(e.inFlow??t.flow?WDe:VDe)(t,e,n)}function VDe({comment:t,items:e},n,{blockItemPrefix:r,flowChars:i,itemIndent:o,onChompKeep:s,onComment:a}){const{indent:l,options:{commentString:d}}=n,f=Object.assign({},n,{indent:o,type:null});let p=!1;const g=[];for(let x=0;x<e.length;++x){const b=e[x];let S=null;if(fs(b))!p&&b.spaceBefore&&g.push(""),HP(n,g,b.commentBefore,p),b.comment&&(S=b.comment);else if(Po(b)){const T=fs(b.key)?b.key:null;T&&(!p&&T.spaceBefore&&g.push(""),HP(n,g,T.commentBefore,p))}p=!1;let M=Pb(b,f,()=>S=null,()=>p=!0);S&&(M+=Uv(M,o,d(S))),p&&S&&(p=!1),g.push(r+M)}let v;if(g.length===0)v=i.start+i.end;else{v=g[0];for(let x=1;x<g.length;++x){const b=g[x];v+=b?`
${l}${b}`:`
`}}return t?(v+=`
`+Up(d(t),l),a&&a()):p&&s&&s(),v}function WDe({items:t},e,{flowChars:n,itemIndent:r}){const{indent:i,indentStep:o,flowCollectionPadding:s,options:{commentString:a}}=e;r+=o;const l=Object.assign({},e,{indent:r,inFlow:!0,type:null});let d=!1,f=0;const p=[];for(let x=0;x<t.length;++x){const b=t[x];let S=null;if(fs(b))b.spaceBefore&&p.push(""),HP(e,p,b.commentBefore,!1),b.comment&&(S=b.comment);else if(Po(b)){const T=fs(b.key)?b.key:null;T&&(T.spaceBefore&&p.push(""),HP(e,p,T.commentBefore,!1),T.comment&&(d=!0));const C=fs(b.value)?b.value:null;C?(C.comment&&(S=C.comment),C.commentBefore&&(d=!0)):b.value==null&&(T!=null&&T.comment)&&(S=T.comment)}S&&(d=!0);let M=Pb(b,l,()=>S=null);x<t.length-1&&(M+=","),S&&(M+=Uv(M,r,a(S))),!d&&(p.length>f||M.includes(`
`))&&(d=!0),p.push(M),f=p.length}const{start:g,end:v}=n;if(p.length===0)return g+v;if(!d){const x=p.reduce((b,S)=>b+S.length+2,2);d=e.options.lineWidth>0&&x>e.options.lineWidth}if(d){let x=g;for(const b of p)x+=b?`
${o}${i}${b}`:`
`;return`${x}
${i}${v}`}else return`${g}${s}${p.join(" ")}${s}${v}`}function HP({indent:t,options:{commentString:e}},n,r,i){if(r&&i&&(r=r.replace(/^\n+/,"")),r){const o=Up(e(r),t);n.push(o.trimStart())}}function Vv(t,e){const n=co(e)?e.value:e;for(const r of t)if(Po(r)&&(r.key===e||r.key===n||co(r.key)&&r.key.value===n))return r}class nu extends nj{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(ny,e),this.items=[]}static from(e,n,r){const{keepUndefined:i,replacer:o}=r,s=new this(e),a=(l,d)=>{if(typeof o=="function")d=o.call(n,l,d);else if(Array.isArray(o)&&!o.includes(l))return;(d!==void 0||i)&&s.items.push(rj(l,d,r))};if(n instanceof Map)for(const[l,d]of n)a(l,d);else if(n&&typeof n=="object")for(const l of Object.keys(n))a(l,n[l]);return typeof e.sortMapEntries=="function"&&s.items.sort(e.sortMapEntries),s}add(e,n){var s;let r;Po(e)?r=e:!e||typeof e!="object"||!("key"in e)?r=new yl(e,e==null?void 0:e.value):r=new yl(e.key,e.value);const i=Vv(this.items,r.key),o=(s=this.schema)==null?void 0:s.sortMapEntries;if(i){if(!n)throw new Error(`Key ${r.key} already set`);co(i.value)&&Vre(r.value)?i.value.value=r.value:i.value=r.value}else if(o){const a=this.items.findIndex(l=>o(r,l)<0);a===-1?this.items.push(r):this.items.splice(a,0,r)}else this.items.push(r)}delete(e){const n=Vv(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){const r=Vv(this.items,e),i=r==null?void 0:r.value;return(!n&&co(i)?i.value:i)??void 0}has(e){return!!Vv(this.items,e)}set(e,n){this.add(new yl(e,n),!0)}toJSON(e,n,r){const i=r?new r:n!=null&&n.mapAsMap?new Map:{};n!=null&&n.onCreate&&n.onCreate(i);for(const o of this.items)qre(n,i,o);return i}toString(e,n,r){if(!e)return JSON.stringify(this);for(const i of this.items)if(!Po(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),Yre(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:r,onComment:n})}}const x1={collection:"map",default:!0,nodeClass:nu,tag:"tag:yaml.org,2002:map",resolve(t,e){return v1(t)||e("Expected a mapping for this tag"),t},createNode:(t,e,n)=>nu.from(t,e,n)};class my extends nj{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(g1,e),this.items=[]}add(e){this.items.push(e)}delete(e){const n=KT(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){const r=KT(e);if(typeof r!="number")return;const i=this.items[r];return!n&&co(i)?i.value:i}has(e){const n=KT(e);return typeof n=="number"&&n<this.items.length}set(e,n){const r=KT(e);if(typeof r!="number")throw new Error(`Expected a valid index, not ${e}.`);const i=this.items[r];co(i)&&Vre(n)?i.value=n:this.items[r]=n}toJSON(e,n){const r=[];n!=null&&n.onCreate&&n.onCreate(r);let i=0;for(const o of this.items)r.push(fd(o,String(i++),n));return r}toString(e,n,r){return e?Yre(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:r,onComment:n}):JSON.stringify(this)}static from(e,n,r){const{replacer:i}=r,o=new this(e);if(n&&Symbol.iterator in Object(n)){let s=0;for(let a of n){if(typeof i=="function"){const l=n instanceof Set?a:String(s++);a=i.call(n,l,a)}o.items.push(T2(a,void 0,r))}}return o}}function KT(t){let e=co(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const b1={collection:"seq",default:!0,nodeClass:my,tag:"tag:yaml.org,2002:seq",resolve(t,e){return _1(t)||e("Expected a sequence for this tag"),t},createNode:(t,e,n)=>my.from(t,e,n)},SR={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,n,r){return e=Object.assign({actualString:!0},e),hE(t,e,n,r)}},MR={identify:t=>t==null,createNode:()=>new Rr(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Rr(null),stringify:({source:t},e)=>typeof t=="string"&&MR.test.test(t)?t:e.options.nullStr},ij={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new Rr(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},n){if(t&&ij.test.test(t)){const r=t[0]==="t"||t[0]==="T";if(e===r)return t}return e?n.options.trueStr:n.options.falseStr}};function Rh({format:t,minFractionDigits:e,tag:n,value:r}){if(typeof r=="bigint")return String(r);const i=typeof r=="number"?r:Number(r);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let o=JSON.stringify(r);if(!t&&e&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(o)){let s=o.indexOf(".");s<0&&(s=o.length,o+=".");let a=e-(o.length-s-1);for(;a-- >0;)o+="0"}return o}const Xre={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Rh},Kre={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Rh(t)}},Zre={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new Rr(parseFloat(t)),n=t.indexOf(".");return n!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-n-1),e},stringify:Rh},ER=t=>typeof t=="bigint"||Number.isInteger(t),oj=(t,e,n,{intAsBigInt:r})=>r?BigInt(t):parseInt(t.substring(e),n);function Jre(t,e,n){const{value:r}=t;return ER(r)&&r>=0?n+r.toString(e):Rh(t)}const Qre={identify:t=>ER(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>oj(t,2,8,n),stringify:t=>Jre(t,8,"0o")},eie={identify:ER,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>oj(t,0,10,n),stringify:Rh},tie={identify:t=>ER(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>oj(t,2,16,n),stringify:t=>Jre(t,16,"0x")},HDe=[x1,b1,SR,MR,ij,Qre,eie,tie,Xre,Kre,Zre];function CG(t){return typeof t=="bigint"||Number.isInteger(t)}const ZT=({value:t})=>JSON.stringify(t),GDe=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:ZT},{identify:t=>t==null,createNode:()=>new Rr(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:ZT},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:t=>t==="true",stringify:ZT},{identify:CG,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>CG(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:ZT}],qDe={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},YDe=[x1,b1].concat(GDe,qDe),sj={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof Buffer=="function")return Buffer.from(t,"base64");if(typeof atob=="function"){const n=atob(t.replace(/[\n\r]/g,"")),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},r,i,o){const s=n;let a;if(typeof Buffer=="function")a=s instanceof Buffer?s.toString("base64"):Buffer.from(s.buffer).toString("base64");else if(typeof btoa=="function"){let l="";for(let d=0;d<s.length;++d)l+=String.fromCharCode(s[d]);a=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=Rr.BLOCK_LITERAL),e!==Rr.QUOTE_DOUBLE){const l=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),d=Math.ceil(a.length/l),f=new Array(d);for(let p=0,g=0;p<d;++p,g+=l)f[p]=a.substr(g,l);a=f.join(e===Rr.BLOCK_LITERAL?`
`:" ")}return hE({comment:t,type:e,value:a},r,i,o)}};function nie(t,e){if(_1(t))for(let n=0;n<t.items.length;++n){let r=t.items[n];if(!Po(r)){if(v1(r)){r.items.length>1&&e("Each pair must have its own sequence indicator");const i=r.items[0]||new yl(new Rr(null));if(r.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${r.commentBefore}
${i.key.commentBefore}`:r.commentBefore),r.comment){const o=i.value??i.key;o.comment=o.comment?`${r.comment}
${o.comment}`:r.comment}r=i}t.items[n]=Po(r)?r:new yl(r)}}else e("Expected a sequence for this tag");return t}function rie(t,e,n){const{replacer:r}=n,i=new my(t);i.tag="tag:yaml.org,2002:pairs";let o=0;if(e&&Symbol.iterator in Object(e))for(let s of e){typeof r=="function"&&(s=r.call(e,String(o++),s));let a,l;if(Array.isArray(s))if(s.length===2)a=s[0],l=s[1];else throw new TypeError(`Expected [key, value] tuple: ${s}`);else if(s&&s instanceof Object){const d=Object.keys(s);if(d.length===1)a=d[0],l=s[a];else throw new TypeError(`Expected tuple with one key, not ${d.length} keys`)}else a=s;i.items.push(rj(a,l,n))}return i}const aj={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:nie,createNode:rie};class Kx extends my{constructor(){super(),this.add=nu.prototype.add.bind(this),this.delete=nu.prototype.delete.bind(this),this.get=nu.prototype.get.bind(this),this.has=nu.prototype.has.bind(this),this.set=nu.prototype.set.bind(this),this.tag=Kx.tag}toJSON(e,n){if(!n)return super.toJSON(e);const r=new Map;n!=null&&n.onCreate&&n.onCreate(r);for(const i of this.items){let o,s;if(Po(i)?(o=fd(i.key,"",n),s=fd(i.value,o,n)):o=fd(i,"",n),r.has(o))throw new Error("Ordered maps must not include duplicate keys");r.set(o,s)}return r}static from(e,n,r){const i=rie(e,n,r),o=new this;return o.items=i.items,o}}Kx.tag="tag:yaml.org,2002:omap";const lj={collection:"seq",identify:t=>t instanceof Map,nodeClass:Kx,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=nie(t,e),r=[];for(const{key:i}of n.items)co(i)&&(r.includes(i.value)?e(`Ordered maps must not include duplicate keys: ${i.value}`):r.push(i.value));return Object.assign(new Kx,n)},createNode:(t,e,n)=>Kx.from(t,e,n)};function iie({value:t,source:e},n){return e&&(t?oie:sie).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const oie={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Rr(!0),stringify:iie},sie={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new Rr(!1),stringify:iie},XDe={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Rh},KDe={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Rh(t)}},ZDe={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new Rr(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(n!==-1){const r=t.substring(n+1).replace(/_/g,"");r[r.length-1]==="0"&&(e.minFractionDigits=r.length)}return e},stringify:Rh},fE=t=>typeof t=="bigint"||Number.isInteger(t);function TR(t,e,n,{intAsBigInt:r}){const i=t[0];if((i==="-"||i==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),r){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}const s=BigInt(t);return i==="-"?BigInt(-1)*s:s}const o=parseInt(t,n);return i==="-"?-1*o:o}function cj(t,e,n){const{value:r}=t;if(fE(r)){const i=r.toString(e);return r<0?"-"+n+i.substr(1):n+i}return Rh(t)}const JDe={identify:fE,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>TR(t,2,2,n),stringify:t=>cj(t,2,"0b")},QDe={identify:fE,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>TR(t,1,8,n),stringify:t=>cj(t,8,"0")},e3e={identify:fE,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>TR(t,0,10,n),stringify:Rh},t3e={identify:fE,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>TR(t,2,16,n),stringify:t=>cj(t,16,"0x")};class Zx extends nu{constructor(e){super(e),this.tag=Zx.tag}add(e){let n;Po(e)?n=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?n=new yl(e.key,null):n=new yl(e,null),Vv(this.items,n.key)||this.items.push(n)}get(e,n){const r=Vv(this.items,e);return!n&&Po(r)?co(r.key)?r.key.value:r.key:r}set(e,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const r=Vv(this.items,e);r&&!n?this.items.splice(this.items.indexOf(r),1):!r&&n&&this.items.push(new yl(e))}toJSON(e,n){return super.toJSON(e,n,Set)}toString(e,n,r){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),n,r);throw new Error("Set items must all have null values")}static from(e,n,r){const{replacer:i}=r,o=new this(e);if(n&&Symbol.iterator in Object(n))for(let s of n)typeof i=="function"&&(s=i.call(n,s,s)),o.items.push(rj(s,null,r));return o}}Zx.tag="tag:yaml.org,2002:set";const uj={collection:"map",identify:t=>t instanceof Set,nodeClass:Zx,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,n)=>Zx.from(t,e,n),resolve(t,e){if(v1(t)){if(t.hasAllNullValues(!0))return Object.assign(new Zx,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function dj(t,e){const n=t[0],r=n==="-"||n==="+"?t.substring(1):t,i=s=>e?BigInt(s):Number(s),o=r.replace(/_/g,"").split(":").reduce((s,a)=>s*i(60)+i(a),i(0));return n==="-"?i(-1)*o:o}function aie(t){let{value:e}=t,n=s=>s;if(typeof e=="bigint")n=s=>BigInt(s);else if(isNaN(e)||!isFinite(e))return Rh(t);let r="";e<0&&(r="-",e*=n(-1));const i=n(60),o=[e%i];return e<60?o.unshift(0):(e=(e-o[0])/i,o.unshift(e%i),e>=60&&(e=(e-o[0])/i,o.unshift(e))),r+o.map(s=>String(s).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const lie={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>dj(t,n),stringify:aie},cie={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>dj(t,!1),stringify:aie},CR={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(CR.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,r,i,o,s,a]=e.map(Number),l=e[7]?Number((e[7]+"00").substr(1,3)):0;let d=Date.UTC(n,r-1,i,o||0,s||0,a||0,l);const f=e[8];if(f&&f!=="Z"){let p=dj(f,!1);Math.abs(p)<30&&(p*=60),d-=6e4*p}return new Date(d)},stringify:({value:t})=>t.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},AG=[x1,b1,SR,MR,oie,sie,JDe,QDe,e3e,t3e,XDe,KDe,ZDe,sj,lj,aj,uj,lie,cie,CR],PG=new Map([["core",HDe],["failsafe",[x1,b1,SR]],["json",YDe],["yaml11",AG],["yaml-1.1",AG]]),IG={binary:sj,bool:ij,float:Zre,floatExp:Kre,floatNaN:Xre,floatTime:cie,int:eie,intHex:tie,intOct:Qre,intTime:lie,map:x1,null:MR,omap:lj,pairs:aj,seq:b1,set:uj,timestamp:CR},n3e={"tag:yaml.org,2002:binary":sj,"tag:yaml.org,2002:omap":lj,"tag:yaml.org,2002:pairs":aj,"tag:yaml.org,2002:set":uj,"tag:yaml.org,2002:timestamp":CR};function YD(t,e){let n=PG.get(e);if(!n)if(Array.isArray(t))n=[];else{const r=Array.from(PG.keys()).filter(i=>i!=="yaml11").map(i=>JSON.stringify(i)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${r} or define customTags array`)}if(Array.isArray(t))for(const r of t)n=n.concat(r);else typeof t=="function"&&(n=t(n.slice()));return n.map(r=>{if(typeof r!="string")return r;const i=IG[r];if(i)return i;const o=Object.keys(IG).map(s=>JSON.stringify(s)).join(", ");throw new Error(`Unknown custom tag "${r}"; use one of ${o}`)})}const r3e=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;class AR{constructor({compat:e,customTags:n,merge:r,resolveKnownTags:i,schema:o,sortMapEntries:s,toStringDefaults:a}){this.compat=Array.isArray(e)?YD(e,"compat"):e?YD(null,e):null,this.merge=!!r,this.name=typeof o=="string"&&o||"core",this.knownTags=i?n3e:{},this.tags=YD(n,this.name),this.toStringOptions=a??null,Object.defineProperty(this,ny,{value:x1}),Object.defineProperty(this,hm,{value:SR}),Object.defineProperty(this,g1,{value:b1}),this.sortMapEntries=typeof s=="function"?s:s===!0?r3e:null}clone(){const e=Object.create(AR.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function i3e(t,e){var l;const n=[];let r=e.directives===!0;if(e.directives!==!1&&t.directives){const d=t.directives.toString(t);d?(n.push(d),r=!0):t.directives.docStart&&(r=!0)}r&&n.push("---");const i=Hre(t,e),{commentString:o}=i.options;if(t.commentBefore){n.length!==1&&n.unshift("");const d=o(t.commentBefore);n.unshift(Up(d,""))}let s=!1,a=null;if(t.contents){if(fs(t.contents)){if(t.contents.spaceBefore&&r&&n.push(""),t.contents.commentBefore){const p=o(t.contents.commentBefore);n.push(Up(p,""))}i.forceBlockIndent=!!t.comment,a=t.contents.comment}const d=a?void 0:()=>s=!0;let f=Pb(t.contents,i,()=>a=null,d);a&&(f+=Uv(f,"",o(a))),(f[0]==="|"||f[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${f}`:n.push(f)}else n.push(Pb(t.contents,i));if((l=t.directives)!=null&&l.docEnd)if(t.comment){const d=o(t.comment);d.includes(`
`)?(n.push("..."),n.push(Up(d,""))):n.push(`... ${d}`)}else n.push("...");else{let d=t.comment;d&&s&&(d=d.replace(/^\n+/,"")),d&&((!s||a)&&n[n.length-1]!==""&&n.push(""),n.push(Up(o(d),"")))}return n.join(`
`)+`
`}class w1{constructor(e,n,r){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,wd,{value:wF});let i=null;typeof n=="function"||Array.isArray(n)?i=n:r===void 0&&n&&(r=n,n=void 0);const o=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"},r);this.options=o;let{version:s}=o;r!=null&&r._directives?(this.directives=r._directives.atDocument(),this.directives.yaml.explicit&&(s=this.directives.yaml.version)):this.directives=new Fl({version:s}),this.setSchema(s,r),this.contents=e===void 0?null:this.createNode(e,i,r)}clone(){const e=Object.create(w1.prototype,{[wd]:{value:wF}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=fs(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){A_(this.contents)&&this.contents.add(e)}addIn(e,n){A_(this.contents)&&this.contents.addIn(e,n)}createAlias(e,n){if(!e.anchor){const r=jre(this);e.anchor=!n||r.has(n)?Ure(n||"a",r):n}return new _R(e.anchor)}createNode(e,n,r){let i;if(typeof n=="function")e=n.call({"":e},"",e),i=n;else if(Array.isArray(n)){const S=T=>typeof T=="number"||T instanceof String||T instanceof Number,M=n.filter(S).map(String);M.length>0&&(n=n.concat(M)),i=n}else r===void 0&&n&&(r=n,n=void 0);const{aliasDuplicateObjects:o,anchorPrefix:s,flow:a,keepUndefined:l,onTagObj:d,tag:f}=r??{},{onAnchor:p,setAnchors:g,sourceObjects:v}=RDe(this,s||"a"),x={aliasDuplicateObjects:o??!0,keepUndefined:l??!1,onAnchor:p,onTagObj:d,replacer:i,schema:this.schema,sourceObjects:v},b=T2(e,f,x);return a&&Do(b)&&(b.flow=!0),g(),b}createPair(e,n,r={}){const i=this.createNode(e,null,r),o=this.createNode(n,null,r);return new yl(i,o)}delete(e){return A_(this.contents)?this.contents.delete(e):!1}deleteIn(e){return mS(e)?this.contents==null?!1:(this.contents=null,!0):A_(this.contents)?this.contents.deleteIn(e):!1}get(e,n){return Do(this.contents)?this.contents.get(e,n):void 0}getIn(e,n){return mS(e)?!n&&co(this.contents)?this.contents.value:this.contents:Do(this.contents)?this.contents.getIn(e,n):void 0}has(e){return Do(this.contents)?this.contents.has(e):!1}hasIn(e){return mS(e)?this.contents!==void 0:Do(this.contents)?this.contents.hasIn(e):!1}set(e,n){this.contents==null?this.contents=WP(this.schema,[e],n):A_(this.contents)&&this.contents.set(e,n)}setIn(e,n){mS(e)?this.contents=n:this.contents==null?this.contents=WP(this.schema,Array.from(e),n):A_(this.contents)&&this.contents.setIn(e,n)}setSchema(e,n={}){typeof e=="number"&&(e=String(e));let r;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Fl({version:"1.1"}),r={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new Fl({version:e}),r={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,r=null;break;default:{const i=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(r)this.schema=new AR(Object.assign(r,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:n,mapAsMap:r,maxAliasCount:i,onAnchor:o,reviver:s}={}){const a={anchors:new Map,doc:this,keep:!e,mapAsMap:r===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},l=fd(this.contents,n??"",a);if(typeof o=="function")for(const{count:d,res:f}of a.anchors.values())o(f,d);return typeof s=="function"?Ax(s,{"":l},"",l):l}toJSON(e,n){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:n})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const n=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return i3e(this,e)}}function A_(t){if(Do(t))return!0;throw new Error("Expected a YAML collection as document contents")}class hj extends Error{constructor(e,n,r,i){super(),this.name=e,this.code=r,this.message=i,this.pos=n}}class Wv extends hj{constructor(e,n,r){super("YAMLParseError",e,n,r)}}class uie extends hj{constructor(e,n,r){super("YAMLWarning",e,n,r)}}const GP=(t,e)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(a=>e.linePos(a));const{line:r,col:i}=n.linePos[0];n.message+=` at line ${r}, column ${i}`;let o=i-1,s=t.substring(e.lineStarts[r-1],e.lineStarts[r]).replace(/[\n\r]+$/,"");if(o>=60&&s.length>80){const a=Math.min(o-39,s.length-79);s=""+s.substring(a),o-=a-1}if(s.length>80&&(s=s.substring(0,79)+""),r>1&&/^ *$/.test(s.substring(0,o))){let a=t.substring(e.lineStarts[r-2],e.lineStarts[r-1]);a.length>80&&(a=a.substring(0,79)+`
`),s=a+s}if(/[^ ]/.test(s)){let a=1;const l=n.linePos[1];l&&l.line===r&&l.col>i&&(a=Math.max(1,Math.min(l.col-i,80-o)));const d=" ".repeat(o)+"^".repeat(a);n.message+=`:

${s}
${d}
`}};function Ib(t,{flow:e,indicator:n,next:r,offset:i,onError:o,startOnNewline:s}){let a=!1,l=s,d=s,f="",p="",g=!1,v=!1,x=!1,b=null,S=null,M=null,T=null,C=null;for(const D of t)switch(x&&(D.type!=="space"&&D.type!=="newline"&&D.type!=="comma"&&o(D.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),x=!1),D.type){case"space":!e&&l&&n!=="doc-start"&&D.source[0]==="	"&&o(D,"TAB_AS_INDENT","Tabs are not allowed as indentation"),d=!0;break;case"comment":{d||o(D,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const B=D.source.substring(1)||" ";f?f+=p+B:f=B,p="",l=!1;break}case"newline":l?f?f+=D.source:a=!0:p+=D.source,l=!0,g=!0,(b||S)&&(v=!0),d=!0;break;case"anchor":b&&o(D,"MULTIPLE_ANCHORS","A node can have at most one anchor"),D.source.endsWith(":")&&o(D.offset+D.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),b=D,C===null&&(C=D.offset),l=!1,d=!1,x=!0;break;case"tag":{S&&o(D,"MULTIPLE_TAGS","A node can have at most one tag"),S=D,C===null&&(C=D.offset),l=!1,d=!1,x=!0;break}case n:(b||S)&&o(D,"BAD_PROP_ORDER",`Anchors and tags must be after the ${D.source} indicator`),T&&o(D,"UNEXPECTED_TOKEN",`Unexpected ${D.source} in ${e??"collection"}`),T=D,l=!1,d=!1;break;case"comma":if(e){M&&o(D,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),M=D,l=!1,d=!1;break}default:o(D,"UNEXPECTED_TOKEN",`Unexpected ${D.type} token`),l=!1,d=!1}const k=t[t.length-1],O=k?k.offset+k.source.length:i;return x&&r&&r.type!=="space"&&r.type!=="newline"&&r.type!=="comma"&&(r.type!=="scalar"||r.source!=="")&&o(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:M,found:T,spaceBefore:a,comment:f,hasNewline:g,hasNewlineAfterProp:v,anchor:b,tag:S,end:O,start:C??O}}function C2(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(const e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(const e of t.items){for(const n of e.start)if(n.type==="newline")return!0;if(e.sep){for(const n of e.sep)if(n.type==="newline")return!0}if(C2(e.key)||C2(e.value))return!0}return!1;default:return!0}}function TF(t,e,n){if((e==null?void 0:e.type)==="flow-collection"){const r=e.end[0];r.indent===t&&(r.source==="]"||r.source==="}")&&C2(e)&&n(r,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function die(t,e,n){const{uniqueKeys:r}=t.options;if(r===!1)return!1;const i=typeof r=="function"?r:(o,s)=>o===s||co(o)&&co(s)&&o.value===s.value&&!(o.value==="<<"&&t.schema.merge);return e.some(o=>i(o.key,n))}const kG="All mapping items must start at the same column";function o3e({composeNode:t,composeEmptyNode:e},n,r,i,o){var f;const s=(o==null?void 0:o.nodeClass)??nu,a=new s(n.schema);n.atRoot&&(n.atRoot=!1);let l=r.offset,d=null;for(const p of r.items){const{start:g,key:v,sep:x,value:b}=p,S=Ib(g,{indicator:"explicit-key-ind",next:v??(x==null?void 0:x[0]),offset:l,onError:i,startOnNewline:!0}),M=!S.found;if(M){if(v&&(v.type==="block-seq"?i(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in v&&v.indent!==r.indent&&i(l,"BAD_INDENT",kG)),!S.anchor&&!S.tag&&!x){d=S.end,S.comment&&(a.comment?a.comment+=`
`+S.comment:a.comment=S.comment);continue}(S.hasNewlineAfterProp||C2(v))&&i(v??g[g.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else((f=S.found)==null?void 0:f.indent)!==r.indent&&i(l,"BAD_INDENT",kG);const T=S.end,C=v?t(n,v,S,i):e(n,T,g,null,S,i);n.schema.compat&&TF(r.indent,v,i),die(n,a.items,C)&&i(T,"DUPLICATE_KEY","Map keys must be unique");const k=Ib(x??[],{indicator:"map-value-ind",next:b,offset:C.range[2],onError:i,startOnNewline:!v||v.type==="block-scalar"});if(l=k.end,k.found){M&&((b==null?void 0:b.type)==="block-map"&&!k.hasNewline&&i(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&S.start<k.found.offset-1024&&i(C.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const O=b?t(n,b,k,i):e(n,l,x,null,k,i);n.schema.compat&&TF(r.indent,b,i),l=O.range[2];const D=new yl(C,O);n.options.keepSourceTokens&&(D.srcToken=p),a.items.push(D)}else{M&&i(C.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),k.comment&&(C.comment?C.comment+=`
`+k.comment:C.comment=k.comment);const O=new yl(C);n.options.keepSourceTokens&&(O.srcToken=p),a.items.push(O)}}return d&&d<l&&i(d,"IMPOSSIBLE","Map comment with trailing content"),a.range=[r.offset,l,d??l],a}function s3e({composeNode:t,composeEmptyNode:e},n,r,i,o){const s=(o==null?void 0:o.nodeClass)??my,a=new s(n.schema);n.atRoot&&(n.atRoot=!1);let l=r.offset,d=null;for(const{start:f,value:p}of r.items){const g=Ib(f,{indicator:"seq-item-ind",next:p,offset:l,onError:i,startOnNewline:!0});if(!g.found)if(g.anchor||g.tag||p)p&&p.type==="block-seq"?i(g.end,"BAD_INDENT","All sequence items must start at the same column"):i(l,"MISSING_CHAR","Sequence item without - indicator");else{d=g.end,g.comment&&(a.comment=g.comment);continue}const v=p?t(n,p,g,i):e(n,g.end,f,null,g,i);n.schema.compat&&TF(r.indent,p,i),l=v.range[2],a.items.push(v)}return a.range=[r.offset,l,d??l],a}function pE(t,e,n,r){let i="";if(t){let o=!1,s="";for(const a of t){const{source:l,type:d}=a;switch(d){case"space":o=!0;break;case"comment":{n&&!o&&r(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const f=l.substring(1)||" ";i?i+=s+f:i=f,s="";break}case"newline":i&&(s+=l),o=!0;break;default:r(a,"UNEXPECTED_TOKEN",`Unexpected ${d} at node end`)}e+=l.length}}return{comment:i,offset:e}}const XD="Block collections are not allowed within flow collections",KD=t=>t&&(t.type==="block-map"||t.type==="block-seq");function a3e({composeNode:t,composeEmptyNode:e},n,r,i,o){const s=r.start.source==="{",a=s?"flow map":"flow sequence",l=(o==null?void 0:o.nodeClass)??(s?nu:my),d=new l(n.schema);d.flow=!0;const f=n.atRoot;f&&(n.atRoot=!1);let p=r.offset+r.start.source.length;for(let S=0;S<r.items.length;++S){const M=r.items[S],{start:T,key:C,sep:k,value:O}=M,D=Ib(T,{flow:a,indicator:"explicit-key-ind",next:C??(k==null?void 0:k[0]),offset:p,onError:i,startOnNewline:!1});if(!D.found){if(!D.anchor&&!D.tag&&!k&&!O){S===0&&D.comma?i(D.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`):S<r.items.length-1&&i(D.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${a}`),D.comment&&(d.comment?d.comment+=`
`+D.comment:d.comment=D.comment),p=D.end;continue}!s&&n.options.strict&&C2(C)&&i(C,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(S===0)D.comma&&i(D.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`);else if(D.comma||i(D.start,"MISSING_CHAR",`Missing , between ${a} items`),D.comment){let B="";e:for(const U of T)switch(U.type){case"comma":case"space":break;case"comment":B=U.source.substring(1);break e;default:break e}if(B){let U=d.items[d.items.length-1];Po(U)&&(U=U.value??U.key),U.comment?U.comment+=`
`+B:U.comment=B,D.comment=D.comment.substring(B.length+1)}}if(!s&&!k&&!D.found){const B=O?t(n,O,D,i):e(n,D.end,k,null,D,i);d.items.push(B),p=B.range[2],KD(O)&&i(B.range,"BLOCK_IN_FLOW",XD)}else{const B=D.end,U=C?t(n,C,D,i):e(n,B,T,null,D,i);KD(C)&&i(U.range,"BLOCK_IN_FLOW",XD);const J=Ib(k??[],{flow:a,indicator:"map-value-ind",next:O,offset:U.range[2],onError:i,startOnNewline:!1});if(J.found){if(!s&&!D.found&&n.options.strict){if(k)for(const oe of k){if(oe===J.found)break;if(oe.type==="newline"){i(oe,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}D.start<J.found.offset-1024&&i(J.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else O&&("source"in O&&O.source&&O.source[0]===":"?i(O,"MISSING_CHAR",`Missing space after : in ${a}`):i(J.start,"MISSING_CHAR",`Missing , or : between ${a} items`));const V=O?t(n,O,J,i):J.found?e(n,J.end,k,null,J,i):null;V?KD(O)&&i(V.range,"BLOCK_IN_FLOW",XD):J.comment&&(U.comment?U.comment+=`
`+J.comment:U.comment=J.comment);const X=new yl(U,V);if(n.options.keepSourceTokens&&(X.srcToken=M),s){const oe=d;die(n,oe.items,U)&&i(B,"DUPLICATE_KEY","Map keys must be unique"),oe.items.push(X)}else{const oe=new nu(n.schema);oe.flow=!0,oe.items.push(X),d.items.push(oe)}p=V?V.range[2]:J.end}}const g=s?"}":"]",[v,...x]=r.end;let b=p;if(v&&v.source===g)b=v.offset+v.source.length;else{const S=a[0].toUpperCase()+a.substring(1),M=f?`${S} must end with a ${g}`:`${S} in block collection must be sufficiently indented and end with a ${g}`;i(p,f?"MISSING_CHAR":"BAD_INDENT",M),v&&v.source.length!==1&&x.unshift(v)}if(x.length>0){const S=pE(x,b,n.options.strict,i);S.comment&&(d.comment?d.comment+=`
`+S.comment:d.comment=S.comment),d.range=[r.offset,b,S.offset]}else d.range=[r.offset,b,b];return d}function ZD(t,e,n,r,i,o){const s=n.type==="block-map"?o3e(t,e,n,r,o):n.type==="block-seq"?s3e(t,e,n,r,o):a3e(t,e,n,r,o),a=s.constructor;return i==="!"||i===a.tagName?(s.tag=a.tagName,s):(i&&(s.tag=i),s)}function l3e(t,e,n,r,i){var p;const o=r?e.directives.tagName(r.source,g=>i(r,"TAG_RESOLVE_FAILED",g)):null,s=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!r||!o||o==="!"||o===nu.tagName&&s==="map"||o===my.tagName&&s==="seq"||!s)return ZD(t,e,n,i,o);let a=e.schema.tags.find(g=>g.tag===o&&g.collection===s);if(!a){const g=e.schema.knownTags[o];if(g&&g.collection===s)e.schema.tags.push(Object.assign({},g,{default:!1})),a=g;else return g!=null&&g.collection?i(r,"BAD_COLLECTION_TYPE",`${g.tag} used for ${s} collection, but expects ${g.collection}`,!0):i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),ZD(t,e,n,i,o)}const l=ZD(t,e,n,i,o,a),d=((p=a.resolve)==null?void 0:p.call(a,l,g=>i(r,"TAG_RESOLVE_FAILED",g),e.options))??l,f=fs(d)?d:new Rr(d);return f.range=l.range,f.tag=o,a!=null&&a.format&&(f.format=a.format),f}function hie(t,e,n){const r=t.offset,i=c3e(t,e,n);if(!i)return{value:"",type:null,comment:"",range:[r,r,r]};const o=i.mode===">"?Rr.BLOCK_FOLDED:Rr.BLOCK_LITERAL,s=t.source?u3e(t.source):[];let a=s.length;for(let b=s.length-1;b>=0;--b){const S=s[b][1];if(S===""||S==="\r")a=b;else break}if(a===0){const b=i.chomp==="+"&&s.length>0?`
`.repeat(Math.max(1,s.length-1)):"";let S=r+i.length;return t.source&&(S+=t.source.length),{value:b,type:o,comment:i.comment,range:[r,S,S]}}let l=t.indent+i.indent,d=t.offset+i.length,f=0;for(let b=0;b<a;++b){const[S,M]=s[b];if(M===""||M==="\r")i.indent===0&&S.length>l&&(l=S.length);else{S.length<l&&n(d+S.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),i.indent===0&&(l=S.length),f=b;break}d+=S.length+M.length+1}for(let b=s.length-1;b>=a;--b)s[b][0].length>l&&(a=b+1);let p="",g="",v=!1;for(let b=0;b<f;++b)p+=s[b][0].slice(l)+`
`;for(let b=f;b<a;++b){let[S,M]=s[b];d+=S.length+M.length+1;const T=M[M.length-1]==="\r";if(T&&(M=M.slice(0,-1)),M&&S.length<l){const k=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;n(d-M.length-(T?2:1),"BAD_INDENT",k),S=""}o===Rr.BLOCK_LITERAL?(p+=g+S.slice(l)+M,g=`
`):S.length>l||M[0]==="	"?(g===" "?g=`
`:!v&&g===`
`&&(g=`

`),p+=g+S.slice(l)+M,g=`
`,v=!0):M===""?g===`
`?p+=`
`:g=`
`:(p+=g+M,g=" ",v=!1)}switch(i.chomp){case"-":break;case"+":for(let b=a;b<s.length;++b)p+=`
`+s[b][0].slice(l);p[p.length-1]!==`
`&&(p+=`
`);break;default:p+=`
`}const x=r+i.length+t.source.length;return{value:p,type:o,comment:i.comment,range:[r,x,x]}}function c3e({offset:t,props:e},n,r){if(e[0].type!=="block-scalar-header")return r(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:i}=e[0],o=i[0];let s=0,a="",l=-1;for(let g=1;g<i.length;++g){const v=i[g];if(!a&&(v==="-"||v==="+"))a=v;else{const x=Number(v);!s&&x?s=x:l===-1&&(l=t+g)}}l!==-1&&r(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let d=!1,f="",p=i.length;for(let g=1;g<e.length;++g){const v=e[g];switch(v.type){case"space":d=!0;case"newline":p+=v.source.length;break;case"comment":n&&!d&&r(v,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),p+=v.source.length,f=v.source.substring(1);break;case"error":r(v,"UNEXPECTED_TOKEN",v.message),p+=v.source.length;break;default:{const x=`Unexpected token in block scalar header: ${v.type}`;r(v,"UNEXPECTED_TOKEN",x);const b=v.source;b&&typeof b=="string"&&(p+=b.length)}}}return{mode:o,indent:s,chomp:a,comment:f,length:p}}function u3e(t){const e=t.split(/\n( *)/),n=e[0],r=n.match(/^( *)/),o=[r!=null&&r[1]?[r[1],n.slice(r[1].length)]:["",n]];for(let s=1;s<e.length;s+=2)o.push([e[s],e[s+1]]);return o}function fie(t,e,n){const{offset:r,type:i,source:o,end:s}=t;let a,l;const d=(g,v,x)=>n(r+g,v,x);switch(i){case"scalar":a=Rr.PLAIN,l=d3e(o,d);break;case"single-quoted-scalar":a=Rr.QUOTE_SINGLE,l=h3e(o,d);break;case"double-quoted-scalar":a=Rr.QUOTE_DOUBLE,l=f3e(o,d);break;default:return n(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[r,r+o.length,r+o.length]}}const f=r+o.length,p=pE(s,f,e,n);return{value:l,type:a,comment:p.comment,range:[r,f,p.offset]}}function d3e(t,e){let n="";switch(t[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${t[0]}`;break}case"@":case"`":{n=`reserved character ${t[0]}`;break}}return n&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),pie(t)}function h3e(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),pie(t.slice(1,-1)).replace(/''/g,"'")}function pie(t){let e,n;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let r=e.exec(t);if(!r)return t;let i=r[1],o=" ",s=e.lastIndex;for(n.lastIndex=s;r=n.exec(t);)r[1]===""?o===`
`?i+=o:o=`
`:(i+=o+r[1],o=" "),s=n.lastIndex;const a=/[ \t]*(.*)/sy;return a.lastIndex=s,r=a.exec(t),i+o+((r==null?void 0:r[1])??"")}function f3e(t,e){let n="";for(let r=1;r<t.length-1;++r){const i=t[r];if(!(i==="\r"&&t[r+1]===`
`))if(i===`
`){const{fold:o,offset:s}=p3e(t,r);n+=o,r=s}else if(i==="\\"){let o=t[++r];const s=m3e[o];if(s)n+=s;else if(o===`
`)for(o=t[r+1];o===" "||o==="	";)o=t[++r+1];else if(o==="\r"&&t[r+1]===`
`)for(o=t[++r+1];o===" "||o==="	";)o=t[++r+1];else if(o==="x"||o==="u"||o==="U"){const a={x:2,u:4,U:8}[o];n+=g3e(t,r+1,a,e),r+=a}else{const a=t.substr(r-1,2);e(r-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),n+=a}}else if(i===" "||i==="	"){const o=r;let s=t[r+1];for(;s===" "||s==="	";)s=t[++r+1];s!==`
`&&!(s==="\r"&&t[r+2]===`
`)&&(n+=r>o?t.slice(o,r+1):i)}else n+=i}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),n}function p3e(t,e){let n="",r=t[e+1];for(;(r===" "||r==="	"||r===`
`||r==="\r")&&!(r==="\r"&&t[e+2]!==`
`);)r===`
`&&(n+=`
`),e+=1,r=t[e+1];return n||(n=" "),{fold:n,offset:e}}const m3e={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:"",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function g3e(t,e,n,r){const i=t.substr(e,n),s=i.length===n&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(s)){const a=t.substr(e-2,n+2);return r(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),a}return String.fromCodePoint(s)}function mie(t,e,n,r){const{value:i,type:o,comment:s,range:a}=e.type==="block-scalar"?hie(e,t.options.strict,r):fie(e,t.options.strict,r),l=n?t.directives.tagName(n.source,p=>r(n,"TAG_RESOLVE_FAILED",p)):null,d=n&&l?y3e(t.schema,i,l,n,r):e.type==="scalar"?v3e(t,i,e,r):t.schema[hm];let f;try{const p=d.resolve(i,g=>r(n??e,"TAG_RESOLVE_FAILED",g),t.options);f=co(p)?p:new Rr(p)}catch(p){const g=p instanceof Error?p.message:String(p);r(n??e,"TAG_RESOLVE_FAILED",g),f=new Rr(i)}return f.range=a,f.source=i,o&&(f.type=o),l&&(f.tag=l),d.format&&(f.format=d.format),s&&(f.comment=s),f}function y3e(t,e,n,r,i){var a;if(n==="!")return t[hm];const o=[];for(const l of t.tags)if(!l.collection&&l.tag===n)if(l.default&&l.test)o.push(l);else return l;for(const l of o)if((a=l.test)!=null&&a.test(e))return l;const s=t.knownTags[n];return s&&!s.collection?(t.tags.push(Object.assign({},s,{default:!1,test:void 0})),s):(i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),t[hm])}function v3e({directives:t,schema:e},n,r,i){const o=e.tags.find(s=>{var a;return s.default&&((a=s.test)==null?void 0:a.test(n))})||e[hm];if(e.compat){const s=e.compat.find(a=>{var l;return a.default&&((l=a.test)==null?void 0:l.test(n))})??e[hm];if(o.tag!==s.tag){const a=t.tagString(o.tag),l=t.tagString(s.tag),d=`Value may be parsed as either ${a} or ${l}`;i(r,"TAG_RESOLVE_FAILED",d,!0)}}return o}function _3e(t,e,n){if(e){n===null&&(n=e.length);for(let r=n-1;r>=0;--r){let i=e[r];switch(i.type){case"space":case"comment":case"newline":t-=i.source.length;continue}for(i=e[++r];(i==null?void 0:i.type)==="space";)t+=i.source.length,i=e[++r];break}}return t}const x3e={composeNode:gie,composeEmptyNode:fj};function gie(t,e,n,r){const{spaceBefore:i,comment:o,anchor:s,tag:a}=n;let l,d=!0;switch(e.type){case"alias":l=b3e(t,e,r),(s||a)&&r(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":l=mie(t,e,a,r),s&&(l.anchor=s.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":l=l3e(x3e,t,e,a,r),s&&(l.anchor=s.source.substring(1));break;default:{const f=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;r(e,"UNEXPECTED_TOKEN",f),l=fj(t,e.offset,void 0,null,n,r),d=!1}}return s&&l.anchor===""&&r(s,"BAD_ALIAS","Anchor cannot be an empty string"),i&&(l.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?l.comment=o:l.commentBefore=o),t.options.keepSourceTokens&&d&&(l.srcToken=e),l}function fj(t,e,n,r,{spaceBefore:i,comment:o,anchor:s,tag:a,end:l},d){const f={type:"scalar",offset:_3e(e,n,r),indent:-1,source:""},p=mie(t,f,a,d);return s&&(p.anchor=s.source.substring(1),p.anchor===""&&d(s,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(p.spaceBefore=!0),o&&(p.comment=o,p.range[2]=l),p}function b3e({options:t},{offset:e,source:n,end:r},i){const o=new _R(n.substring(1));o.source===""&&i(e,"BAD_ALIAS","Alias cannot be an empty string"),o.source.endsWith(":")&&i(e+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const s=e+n.length,a=pE(r,s,t.strict,i);return o.range=[e,s,a.offset],a.comment&&(o.comment=a.comment),o}function w3e(t,e,{offset:n,start:r,value:i,end:o},s){const a=Object.assign({_directives:e},t),l=new w1(void 0,a),d={atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},f=Ib(r,{indicator:"doc-start",next:i??(o==null?void 0:o[0]),offset:n,onError:s,startOnNewline:!0});f.found&&(l.directives.docStart=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!f.hasNewline&&s(f.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=i?gie(d,i,f,s):fj(d,f.end,r,null,f,s);const p=l.contents.range[2],g=pE(o,p,!1,s);return g.comment&&(l.comment=g.comment),l.range=[n,p,g.offset],l}function Ow(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];const{offset:e,source:n}=t;return[e,e+(typeof n=="string"?n.length:1)]}function RG(t){var i;let e="",n=!1,r=!1;for(let o=0;o<t.length;++o){const s=t[o];switch(s[0]){case"#":e+=(e===""?"":r?`

`:`
`)+(s.substring(1)||" "),n=!0,r=!1;break;case"%":((i=t[o+1])==null?void 0:i[0])!=="#"&&(o+=1),n=!1;break;default:n||(r=!0),n=!1}}return{comment:e,afterEmptyLine:r}}class pj{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,r,i,o)=>{const s=Ow(n);o?this.warnings.push(new uie(s,r,i)):this.errors.push(new Wv(s,r,i))},this.directives=new Fl({version:e.version||"1.2"}),this.options=e}decorate(e,n){const{comment:r,afterEmptyLine:i}=RG(this.prelude);if(r){const o=e.contents;if(n)e.comment=e.comment?`${e.comment}
${r}`:r;else if(i||e.directives.docStart||!o)e.commentBefore=r;else if(Do(o)&&!o.flow&&o.items.length>0){let s=o.items[0];Po(s)&&(s=s.key);const a=s.commentBefore;s.commentBefore=a?`${r}
${a}`:r}else{const s=o.commentBefore;o.commentBefore=s?`${r}
${s}`:r}}n?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:RG(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,n=!1,r=-1){for(const i of e)yield*this.next(i);yield*this.end(n,r)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(n,r,i)=>{const o=Ow(e);o[0]+=n,this.onError(o,"BAD_DIRECTIVE",r,i)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const n=w3e(this.options,this.directives,e,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const n=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,r=new Wv(Ow(e),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(r):this.doc.errors.push(r);break}case"doc-end":{if(!this.doc){const r="Unexpected doc-end without preceding document";this.errors.push(new Wv(Ow(e),"UNEXPECTED_TOKEN",r));break}this.doc.directives.docEnd=!0;const n=pE(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){const r=this.doc.comment;this.doc.comment=r?`${r}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new Wv(Ow(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const r=Object.assign({_directives:this.directives},this.options),i=new w1(void 0,r);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,n,n],this.decorate(i,!1),yield i}}}function S3e(t,e=!0,n){if(t){const r=(i,o,s)=>{const a=typeof i=="number"?i:Array.isArray(i)?i[0]:i.offset;if(n)n(a,o,s);else throw new Wv([a,a+1],o,s)};switch(t.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return fie(t,e,r);case"block-scalar":return hie(t,e,r)}}return null}function M3e(t,e){const{implicitKey:n=!1,indent:r,inFlow:i=!1,offset:o=-1,type:s="PLAIN"}=e,a=hE({type:s,value:t},{implicitKey:n,indent:r>0?" ".repeat(r):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}}),l=e.end??[{type:"newline",offset:-1,indent:r,source:`
`}];switch(a[0]){case"|":case">":{const d=a.indexOf(`
`),f=a.substring(0,d),p=a.substring(d+1)+`
`,g=[{type:"block-scalar-header",offset:o,indent:r,source:f}];return yie(g,l)||g.push({type:"newline",offset:-1,indent:r,source:`
`}),{type:"block-scalar",offset:o,indent:r,props:g,source:p}}case'"':return{type:"double-quoted-scalar",offset:o,indent:r,source:a,end:l};case"'":return{type:"single-quoted-scalar",offset:o,indent:r,source:a,end:l};default:return{type:"scalar",offset:o,indent:r,source:a,end:l}}}function E3e(t,e,n={}){let{afterKey:r=!1,implicitKey:i=!1,inFlow:o=!1,type:s}=n,a="indent"in t?t.indent:null;if(r&&typeof a=="number"&&(a+=2),!s)switch(t.type){case"single-quoted-scalar":s="QUOTE_SINGLE";break;case"double-quoted-scalar":s="QUOTE_DOUBLE";break;case"block-scalar":{const d=t.props[0];if(d.type!=="block-scalar-header")throw new Error("Invalid block scalar header");s=d.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:s="PLAIN"}const l=hE({type:s,value:e},{implicitKey:i||a===null,indent:a!==null&&a>0?" ".repeat(a):"",inFlow:o,options:{blockQuote:!0,lineWidth:-1}});switch(l[0]){case"|":case">":T3e(t,l);break;case'"':JD(t,l,"double-quoted-scalar");break;case"'":JD(t,l,"single-quoted-scalar");break;default:JD(t,l,"scalar")}}function T3e(t,e){const n=e.indexOf(`
`),r=e.substring(0,n),i=e.substring(n+1)+`
`;if(t.type==="block-scalar"){const o=t.props[0];if(o.type!=="block-scalar-header")throw new Error("Invalid block scalar header");o.source=r,t.source=i}else{const{offset:o}=t,s="indent"in t?t.indent:-1,a=[{type:"block-scalar-header",offset:o,indent:s,source:r}];yie(a,"end"in t?t.end:void 0)||a.push({type:"newline",offset:-1,indent:s,source:`
`});for(const l of Object.keys(t))l!=="type"&&l!=="offset"&&delete t[l];Object.assign(t,{type:"block-scalar",indent:s,props:a,source:i})}}function yie(t,e){if(e)for(const n of e)switch(n.type){case"space":case"comment":t.push(n);break;case"newline":return t.push(n),!0}return!1}function JD(t,e,n){switch(t.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":t.type=n,t.source=e;break;case"block-scalar":{const r=t.props.slice(1);let i=e.length;t.props[0].type==="block-scalar-header"&&(i-=t.props[0].source.length);for(const o of r)o.offset+=i;delete t.props,Object.assign(t,{type:n,source:e,end:r});break}case"block-map":case"block-seq":{const i={type:"newline",offset:t.offset+e.length,indent:t.indent,source:`
`};delete t.items,Object.assign(t,{type:n,source:e,end:[i]});break}default:{const r="indent"in t?t.indent:-1,i="end"in t&&Array.isArray(t.end)?t.end.filter(o=>o.type==="space"||o.type==="comment"||o.type==="newline"):[];for(const o of Object.keys(t))o!=="type"&&o!=="offset"&&delete t[o];Object.assign(t,{type:n,indent:r,source:e,end:i})}}}const C3e=t=>"type"in t?qP(t):zA(t);function qP(t){switch(t.type){case"block-scalar":{let e="";for(const n of t.props)e+=qP(n);return e+t.source}case"block-map":case"block-seq":{let e="";for(const n of t.items)e+=zA(n);return e}case"flow-collection":{let e=t.start.source;for(const n of t.items)e+=zA(n);for(const n of t.end)e+=n.source;return e}case"document":{let e=zA(t);if(t.end)for(const n of t.end)e+=n.source;return e}default:{let e=t.source;if("end"in t&&t.end)for(const n of t.end)e+=n.source;return e}}}function zA({start:t,key:e,sep:n,value:r}){let i="";for(const o of t)i+=o.source;if(e&&(i+=qP(e)),n)for(const o of n)i+=o.source;return r&&(i+=qP(r)),i}const CF=Symbol("break visit"),A3e=Symbol("skip children"),vie=Symbol("remove item");function T0(t,e){"type"in t&&t.type==="document"&&(t={start:t.start,value:t.value}),_ie(Object.freeze([]),t,e)}T0.BREAK=CF;T0.SKIP=A3e;T0.REMOVE=vie;T0.itemAtPath=(t,e)=>{let n=t;for(const[r,i]of e){const o=n==null?void 0:n[r];if(o&&"items"in o)n=o.items[i];else return}return n};T0.parentCollection=(t,e)=>{const n=T0.itemAtPath(t,e.slice(0,-1)),r=e[e.length-1][0],i=n==null?void 0:n[r];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function _ie(t,e,n){let r=n(e,t);if(typeof r=="symbol")return r;for(const i of["key","value"]){const o=e[i];if(o&&"items"in o){for(let s=0;s<o.items.length;++s){const a=_ie(Object.freeze(t.concat([[i,s]])),o.items[s],n);if(typeof a=="number")s=a-1;else{if(a===CF)return CF;a===vie&&(o.items.splice(s,1),s-=1)}}typeof r=="function"&&i==="key"&&(r=r(e,t))}}return typeof r=="function"?r(e,t):r}const PR="\uFEFF",IR="",kR="",A2="",P3e=t=>!!t&&"items"in t,I3e=t=>!!t&&(t.type==="scalar"||t.type==="single-quoted-scalar"||t.type==="double-quoted-scalar"||t.type==="block-scalar");function k3e(t){switch(t){case PR:return"<BOM>";case IR:return"<DOC>";case kR:return"<FLOW_END>";case A2:return"<SCALAR>";default:return JSON.stringify(t)}}function xie(t){switch(t){case PR:return"byte-order-mark";case IR:return"doc-mode";case kR:return"flow-error-end";case A2:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}const R3e=Object.freeze(Object.defineProperty({__proto__:null,BOM:PR,DOCUMENT:IR,FLOW_END:kR,SCALAR:A2,createScalarToken:M3e,isCollection:P3e,isScalar:I3e,prettyToken:k3e,resolveAsScalar:S3e,setScalarValue:E3e,stringify:C3e,tokenType:xie,visit:T0},Symbol.toStringTag,{value:"Module"}));function qu(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const OG="0123456789ABCDEFabcdef".split(""),O3e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),QD=",[]{}".split(""),L3e=` ,[]{}
\r	`.split(""),e3=t=>!t||L3e.includes(t);class bie{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,n=!1){e&&(this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null),this.atEnd=!n;let r=this.next??"stream";for(;r&&(n||this.hasChars(1));)r=yield*this.parseNext(r)}atLineEnd(){let e=this.pos,n=this.buffer[e];for(;n===" "||n==="	";)n=this.buffer[++e];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let n=this.buffer[e];if(this.indentNext>0){let r=0;for(;n===" ";)n=this.buffer[++r+e];if(n==="\r"){const i=this.buffer[r+e+1];if(i===`
`||!i&&!this.atEnd)return e+r+1}return n===`
`||r>=this.indentNext||!n&&!this.atEnd?e+r:-1}if(n==="-"||n==="."){const r=this.buffer.substr(e,3);if((r==="---"||r==="...")&&qu(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===PR&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let n=e.length;const r=e.indexOf("#");if(r!==-1){const o=e[r-1];(o===" "||o==="	")&&(n=r-1)}for(;;){const o=e[n-1];if(o===" "||o==="	")n-=1;else break}const i=(yield*this.pushCount(n))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){const n=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-n),yield*this.pushNewline(),"stream"}return yield IR,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const n=this.peek(3);if(n==="---"&&qu(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if(n==="..."&&qu(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!qu(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&qu(n)){const r=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=r,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(e===null)return this.setNext("doc");let n=yield*this.pushIndicators();switch(e[n]){case"#":yield*this.pushCount(e.length-n);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(e3),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return n+=yield*this.parseBlockScalarHeader(),n+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-n),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,n,r=-1;do e=yield*this.pushNewline(),e>0?(n=yield*this.pushSpaces(!1),this.indentValue=r=n):n=0,n+=yield*this.pushSpaces(!0);while(e+n>0);const i=this.getLine();if(i===null)return this.setNext("flow");if((r!==-1&&r<this.indentNext&&i[0]!=="#"||r===0&&(i.startsWith("---")||i.startsWith("..."))&&qu(i[3]))&&!(r===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield kR,yield*this.parseLineStart();let o=0;for(;i[o]===",";)o+=yield*this.pushCount(1),o+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(o+=yield*this.pushIndicators(),i[o]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-o),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(e3),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const s=this.charAt(1);if(this.flowKey||qu(s)||s===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let n=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let o=0;for(;this.buffer[n-1-o]==="\\";)o+=1;if(o%2===0)break;n=this.buffer.indexOf('"',n+1)}const r=this.buffer.substring(0,n);let i=r.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){const o=this.continueScalar(i+1);if(o===-1)break;i=r.indexOf(`
`,o)}i!==-1&&(n=i-(r[i-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*this.pushToIndex(n+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const n=this.buffer[++e];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*this.pushUntil(n=>qu(n)||n==="#")}*parseBlockScalar(){let e=this.pos-1,n=0,r;e:for(let i=this.pos;r=this.buffer[i];++i)switch(r){case" ":n+=1;break;case`
`:e=i,n=0;break;case"\r":{const o=this.buffer[i+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!r&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext+=this.blockScalarIndent;do{const i=this.continueScalar(e+1);if(i===-1)break;e=this.buffer.indexOf(`
`,i)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}if(!this.blockScalarKeep)do{let i=e-1,o=this.buffer[i];o==="\r"&&(o=this.buffer[--i]);const s=i;for(;o===" "||o==="	";)o=this.buffer[--i];if(o===`
`&&i>=this.pos&&i+1+n>s)e=i;else break}while(!0);return yield A2,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let n=this.pos-1,r=this.pos-1,i;for(;i=this.buffer[++r];)if(i===":"){const o=this.buffer[r+1];if(qu(o)||e&&o===",")break;n=r}else if(qu(i)){let o=this.buffer[r+1];if(i==="\r"&&(o===`
`?(r+=1,i=`
`,o=this.buffer[r+1]):n=r),o==="#"||e&&QD.includes(o))break;if(i===`
`){const s=this.continueScalar(r+1);if(s===-1)break;r=Math.max(r,s-2)}}else{if(e&&QD.includes(i))break;n=r}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield A2,yield*this.pushToIndex(n+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,n){const r=this.buffer.slice(this.pos,e);return r?(yield r,this.pos+=r.length,r.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(e3))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,n=this.charAt(1);if(qu(n)||e&&QD.includes(n))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,n=this.buffer[e];for(;!qu(n)&&n!==">";)n=this.buffer[++e];return yield*this.pushToIndex(n===">"?e+1:e,!1)}else{let e=this.pos+1,n=this.buffer[e];for(;n;)if(O3e.includes(n))n=this.buffer[++e];else if(n==="%"&&OG.includes(this.buffer[e+1])&&OG.includes(this.buffer[e+2]))n=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let n=this.pos-1,r;do r=this.buffer[++n];while(r===" "||e&&r==="	");const i=n-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=n),i}*pushUntil(e){let n=this.pos,r=this.buffer[n];for(;!e(r);)r=this.buffer[++n];return yield*this.pushToIndex(n,!1)}}class wie{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let n=0,r=this.lineStarts.length;for(;n<r;){const o=n+r>>1;this.lineStarts[o]<e?n=o+1:r=o}if(this.lineStarts[n]===e)return{line:n+1,col:1};if(n===0)return{line:0,col:e};const i=this.lineStarts[n-1];return{line:n,col:e-i+1}}}}function lh(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function LG(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function Sie(t){switch(t==null?void 0:t.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function JT(t){switch(t.type){case"document":return t.start;case"block-map":{const e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function P_(t){var n;if(t.length===0)return[];let e=t.length;e:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;((n=t[++e])==null?void 0:n.type)==="space";);return t.splice(e,t.length)}function DG(t){if(t.start.type==="flow-seq-start")for(const e of t.items)e.sep&&!e.value&&!lh(e.start,"explicit-key-ind")&&!lh(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,Sie(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class mj{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new bie,this.onNewLine=e}*parse(e,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const r of this.lexer.lex(e,n))yield*this.next(r);n||(yield*this.end())}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}const n=xie(e);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*this.step(),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const r=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:r,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){const n=e??this.stack.pop();if(!n)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield n;else{const r=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in r?r.indent:0:n.type==="flow-collection"&&r.type==="document"&&(n.indent=0),n.type==="flow-collection"&&DG(n),r.type){case"document":r.value=n;break;case"block-scalar":r.props.push(n);break;case"block-map":{const i=r.items[r.items.length-1];if(i.value){r.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=n;else{Object.assign(i,{key:n,sep:[]}),this.onKeyLine=!lh(i.start,"explicit-key-ind");return}break}case"block-seq":{const i=r.items[r.items.length-1];i.value?r.items.push({start:[],value:n}):i.value=n;break}case"flow-collection":{const i=r.items[r.items.length-1];!i||i.value?r.items.push({start:[],key:n,sep:[]}):i.sep?i.value=n:Object.assign(i,{key:n,sep:[]});return}default:yield*this.pop(),yield*this.pop(n)}if((r.type==="document"||r.type==="block-map"||r.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){const i=n.items[n.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&LG(i.start)===-1&&(n.indent===0||i.start.every(o=>o.type!=="comment"||o.indent<n.indent))&&(r.type==="document"?r.end=i.start:r.items.push({start:i.start}),n.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{LG(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}const n=this.startBlockValue(e);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){const n=JT(this.peek(2)),r=P_(n);let i;e.end?(i=e.end,i.push(this.sourceToken),delete e.end):i=[this.sourceToken];const o={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:r,key:e,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){var r;const n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){const i="end"in n.value?n.value.end:void 0,o=Array.isArray(i)?i[i.length-1]:void 0;(o==null?void 0:o.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){const i=e.items[e.items.length-2],o=(r=i==null?void 0:i.value)==null?void 0:r.end;if(Array.isArray(o)){Array.prototype.push.apply(o,n.start),o.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const i=!this.onKeyLine&&this.indent===e.indent&&n.sep&&this.type!=="seq-item-ind";let o=[];if(i&&n.sep&&!n.value){const s=[];for(let a=0;a<n.sep.length;++a){const l=n.sep[a];switch(l.type){case"newline":s.push(a);break;case"space":break;case"comment":l.indent>e.indent&&(s.length=0);break;default:s.length=0}}s.length>=2&&(o=n.sep.splice(s[1]))}switch(this.type){case"anchor":case"tag":i||n.value?(o.push(this.sourceToken),e.items.push({start:o}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!lh(n.start,"explicit-key-ind")?n.start.push(this.sourceToken):i||n.value?(o.push(this.sourceToken),e.items.push({start:o})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}),this.onKeyLine=!0;return;case"map-value-ind":if(lh(n.start,"explicit-key-ind"))if(n.sep)if(n.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(lh(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]});else if(Sie(n.key)&&!lh(n.sep,"newline")){const s=P_(n.start),a=n.key,l=n.sep;l.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:a,sep:l}]})}else o.length>0?n.sep=n.sep.concat(o,this.sourceToken):n.sep.push(this.sourceToken);else if(lh(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{const s=P_(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||i?e.items.push({start:o,key:null,sep:[this.sourceToken]}):lh(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const s=this.flowScalar(this.type);i||n.value?(e.items.push({start:o,key:s,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(s):(Object.assign(n,{key:s,sep:[]}),this.onKeyLine=!0);return}default:{const s=this.startBlockValue(e);if(s){i&&s.type!=="block-seq"&&lh(n.start,"explicit-key-ind")&&e.items.push({start:o}),this.stack.push(s);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){var r;const n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){const i="end"in n.value?n.value.end:void 0,o=Array.isArray(i)?i[i.length-1]:void 0;(o==null?void 0:o.type)==="comment"?i==null||i.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){const i=e.items[e.items.length-2],o=(r=i==null?void 0:i.value)==null?void 0:r.end;if(Array.isArray(o)){Array.prototype.push.apply(o,n.start),o.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||lh(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){const i=this.startBlockValue(e);if(i){this.stack.push(i);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){const n=e.items[e.items.length-1];if(this.type==="flow-error-end"){let r;do yield*this.pop(),r=this.peek(1);while(r&&r.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?e.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const i=this.flowScalar(this.type);!n||n.value?e.items.push({start:[],key:i,sep:[]}):n.sep?this.stack.push(i):Object.assign(n,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}const r=this.startBlockValue(e);r?this.stack.push(r):(yield*this.pop(),yield*this.step())}else{const r=this.peek(2);if(r.type==="block-map"&&(this.type==="map-value-ind"&&r.indent===e.indent||this.type==="newline"&&!r.items[r.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&r.type!=="flow-collection"){const i=JT(r),o=P_(i);DG(e);const s=e.end.splice(1,e.end.length);s.push(this.sourceToken);const a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:o,key:e,sep:s}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const n=JT(e),r=P_(n);return r.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r}]}}case"map-value-ind":{this.onKeyLine=!0;const n=JT(e),r=P_(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,n){return this.type!=="comment"||this.indent<=n?!1:e.every(r=>r.type==="newline"||r.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function Mie(t){const e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new wie||null,prettyErrors:e}}function D3e(t,e={}){const{lineCounter:n,prettyErrors:r}=Mie(e),i=new mj(n==null?void 0:n.addNewLine),o=new pj(e),s=Array.from(o.compose(i.parse(t)));if(r&&n)for(const a of s)a.errors.forEach(GP(t,n)),a.warnings.forEach(GP(t,n));return s.length>0?s:Object.assign([],{empty:!0},o.streamInfo())}function Eie(t,e={}){const{lineCounter:n,prettyErrors:r}=Mie(e),i=new mj(n==null?void 0:n.addNewLine),o=new pj(e);let s=null;for(const a of o.compose(i.parse(t),!0,t.length))if(!s)s=a;else if(s.options.logLevel!=="silent"){s.errors.push(new Wv(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return r&&n&&(s.errors.forEach(GP(t,n)),s.warnings.forEach(GP(t,n))),s}function N3e(t,e,n){let r;typeof e=="function"?r=e:n===void 0&&e&&typeof e=="object"&&(n=e);const i=Eie(t,n);if(!i)return null;if(i.warnings.forEach(o=>Gre(i.options.logLevel,o)),i.errors.length>0){if(i.options.logLevel!=="silent")throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:r},n))}function z3e(t,e,n){let r=null;if(typeof e=="function"||Array.isArray(e)?r=e:n===void 0&&e&&(n=e),typeof n=="string"&&(n=n.length),typeof n=="number"){const i=Math.round(n);n=i<1?void 0:i>8?{indent:8}:{indent:i}}if(t===void 0){const{keepUndefined:i}=n??e??{};if(!i)return}return new w1(t,r,n).toString(n)}const YP=Object.freeze(Object.defineProperty({__proto__:null,Alias:_R,CST:R3e,Composer:pj,Document:w1,Lexer:bie,LineCounter:wie,Pair:yl,Parser:mj,Scalar:Rr,Schema:AR,YAMLError:hj,YAMLMap:nu,YAMLParseError:Wv,YAMLSeq:my,YAMLWarning:uie,isAlias:B0,isCollection:Do,isDocument:y1,isMap:v1,isNode:fs,isPair:Po,isScalar:co,isSeq:_1,parse:N3e,parseAllDocuments:D3e,parseDocument:Eie,stringify:z3e,visit:py,visitAsync:vR},Symbol.toStringTag,{value:"Module"})),gy=Ze.createContext();var NG="";const mE=({children:t,notification:e})=>{pr(T=>T.devices.items);const n=pr(T=>T.mission),r=pr(T=>T.session.server.rosState),i=Yl(),[o,s]=W.useState(!1),[a,l]=W.useState(!1);W.useState(""),W.useEffect(()=>{s(r)},[r]);const d=async T=>{try{const C=await fetch("/api/rosConnect",{method:"POST",body:new URLSearchParams(`rosState=${encodeURIComponent(o)}`)});if(C.ok){let k=await C.json();k.state==="connect"&&(e("success",k.msg),s(!0)),k.state==="error"&&(s(!1),e("danger",k.msg)),k.state==="disconnect"&&(e("danger",k.msg),s(!1)),console.log(k)}else throw Error(await C.text())}catch{s(!1)}},f=async T=>{console.log(T.name+"-"+T.category);try{const C=await fetch("/api/devices",{method:"POST",body:JSON.stringify(T),headers:{"Content-Type":"application/json"}});if(C.ok){let k=await C.json();k.state==="connect"&&e("success",k.msg),k.state==="error"&&e("danger",k.msg),console.log(k)}else throw Error(await C.text())}catch{}},p=async()=>{try{const T=await fetch("/api/commands/send",{method:"POST",body:JSON.stringify({deviceId:-1,type:"loadMission",attributes:n.route}),headers:{"Content-Type":"application/json"}});if(T.ok){let C=await T.json();C.state==="connect"&&e("success",C.msg),C.state==="error"&&e("danger",C.msg),console.log(C)}else throw Error(await T.text())}catch{}},g=async()=>{let T=n.route.map(C=>C.uav);console.log(T),console.log("command mission ");try{const C=await fetch("/api/commands/send",{method:"POST",body:JSON.stringify({deviceId:-1,type:"commandMission"}),headers:{"Content-Type":"application/json"}});if(C.ok){let k=await C.json();k.state==="connect"&&e("success",k.msg),k.state==="error"&&e("danger",k.msg),console.log(k)}else throw Error(await C.text())}catch{}},v=(T,C)=>{if(T.endsWith(".yaml"))NG=YP.parse(C),i(_f.updateMission({...NG,name:T.slice(0,-5)}));else if(T.endsWith(".waypoints")){let O=C.split(`
`).map(U=>U.split("	")),D={uav_n:1,uav_1:{}},B=0;O.forEach(U=>{U[3]=="16"&&(D.uav_1["wp_"+B]=[U[8],U[9],U[10]],B=B+1)}),D.uav_1.wp_n=B,i(_f.updateMission({...D,name:T.slice(0,-10)}))}else if(T.endsWith(".kml")){let O=new DOMParser().parseFromString(C,"text/xml").getElementsByTagName("coordinates"),D=Object.values(O).map(J=>J.textContent.replace("	1","").replace(/(\r\n|\n|\r|\t)/gm,"").split(" ").map(X=>X.split(","))),B={uav_n:D.length},U=1;D.forEach(J=>{console.log(J);let V=0;B["uav_"+U]={},J.forEach(X=>{X.length==3&&(B["uav_"+U]["wp_"+V]=[X[1],X[0],X[2]],V=V+1)}),B["uav_"+U].wp_n=V,U=U+1}),console.log(B),i(_f.updateMission({...B,name:T.slice(0,-4)}))}else if(T.endsWith(".plan")){let k=JSON.parse(C),O={uav_n:1,uav_1:{}},D=0;k.mission.items.forEach(B=>{O.uav_1["wp_"+D]=[B.params[4],B.params[5],B.Altitude],D=D+1}),O.uav_1.wp_n=D,i(_f.updateMission({...O,name:T.slice(0,-5)}))}else e("danger","Formato de mission no compatible")},x=()=>{d()};async function b(T){o?f(T):alert(`
Ros no est conectado.

 Por favor conctelo primero.`)}function S(){p()}function M(){g()}return F.jsx("div",{style:{width:"100%",height:"100%"},children:F.jsx(gy.Provider,{value:{rosConnect:x,rosState:o,openMision:v,connectAddUav:b,commandMission:M,loadMission:S,confirmMission:a,setconfirmMission:l},children:t})})};var gj={},t3={};const F3e=Bf(twe);var zG;function bi(){return zG||(zG=1,function(t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=F3e}(t3)),t3}var B3e=oi;Object.defineProperty(gj,"__esModule",{value:!0});var yj=gj.default=void 0,$3e=B3e(bi()),j3e=F;yj=gj.default=(0,$3e.default)((0,j3e.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm4 18H6V4h7v5h5zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z"}),"UploadFile");const U3e=si(t=>({input:{display:"none"},parent:{alignItems:"center",justifyContent:"center",padding:"6px 16px"}})),Tie=({title:t,readFile:e,typefiles:n=".yaml, .plan, .waypoint, .kml"})=>{const r=U3e();return F.jsx("div",{className:r.parent,children:F.jsxs("label",{htmlFor:"upload-gpx",children:[F.jsx("input",{accept:n,id:"upload-gpx",type:"file",className:r.input,onChange:e}),t?F.jsx(Bn,{children:t}):F.jsx(br,{edge:"end",component:"span",onClick:()=>{},children:F.jsx(yj,{})})]})})},Cie=({items:t,depthLevel:e})=>{const[n,r]=W.useState(null),i=!!n,o=a=>{r(a.currentTarget)},s=()=>{r(null)};return F.jsxs("div",{children:[F.jsx(jr,{id:"fade-button","aria-controls":i?"fade-menu":void 0,"aria-haspopup":"true","aria-expanded":i?"true":void 0,onClick:o,sx:{color:"#FFFFFF",fontSize:16},style:{textTransform:"none"},children:t.title}),t.submenu&&F.jsx(F$,{id:"fade-menu",MenuListProps:{"aria-labelledby":"fade-button"},anchorEl:n,open:i,onClose:s,TransitionComponent:Pne,children:t.submenu.map((a,l)=>a.input?F.jsx(Tie,{title:a.title,readFile:d=>{a.input(d)},typefiles:a.type},"men"+l):F.jsx(au,{onClick:()=>{s(),a.action&&a.action()},children:a.title},"men"+l))})]})},RR=({SetAddUAVOpen:t})=>{const e=Yl(),n=Sy(),r=W.useContext(gy),i=[{title:"ROS",submenu:[{title:"Connect ROS",action:()=>r.rosConnect()},{title:"Show Topics",action:()=>n("/topics")},{title:"Show Services"}]},{title:"Devices",submenu:[{title:"Connect Devices",action:()=>d()},{title:"Load Mission all",action:()=>r.loadMission()},{title:"Command Mission All",action:()=>r.setconfirmMission(!0)}]},{title:"Mission",submenu:[{title:" Open Mission",input:f=>s(f),type:".yaml, .plan, .waypoint, .kml"},{title:"Clear mission",action:()=>o()},{title:"Edit mission",action:()=>n("/mission")},{title:"Planning",action:()=>n("/planning")}]},{title:"View",submenu:[{title:"Enviroment Features"},{title:"add elements",input:f=>a(f),type:".kml"},{title:"Camera view",action:()=>n("/camera")},{title:"3D view",action:()=>n("/3Dmission")}]},{title:"Report",submenu:[{title:"Missions"},{title:"events"}]}],o=()=>{e(_f.clearMission({}))},s=f=>{const p=f.target.files[0];if(!p)return;const g=new FileReader;g.readAsText(p),g.onload=()=>{r.openMision(p.name,g.result)},g.onerror=()=>{console.log("error"),console.log(g.error)}},a=f=>{const p=f.target.files[0];if(!p)return;const g=new FileReader;g.readAsText(p),g.onload=()=>{console.log(g.result);let v=new DOMParser().parseFromString(g.result,"text/xml");console.log(v);let x=v.getElementsByTagName("Point");console.log(x);let b=Object.values(x).map(k=>k.textContent.replace("	1","").replace(/(\r\n|\n|\r|\t)/gm,"").split(","));console.log(b);let S=v.getElementsByTagName("coordinates");console.log(S);const M=Object.values(S).map(k=>k.textContent.replace("	1","").replace(/(\r\n|\n|\r|\t)/gm,"").split(" ")),T=M.map(k=>k.map(O=>O.split(",")));console.log(M),console.log(T);let C=[];if(b.length)return console.log("add markers"),C=b.map((k,O,D)=>({latitude:Number(k[1]),longitude:Number(k[0]),image:"base"})),console.log(C),e(mh.addMarkerBase(C)),null;T.length&&(console.log("add towers markers"),T.map(k=>{console.log(k);const O=[];k.map(D=>(console.log(D),D.length>1&&O.push({latitude:Number(D[1]),longitude:Number(D[0])}),null)),C.push({type:"powerTower",items:O})}),console.log(C),e(mh.addMarkerElement(C)))},g.onerror=()=>{console.log("error"),console.log(g.error)}};function l(){ht.easeTo({center:[-6.0025,37.412],zoom:Math.max(ht.getZoom(),5),offset:[0,-1/2]})}function d(){t(!0)}return F.jsx(lR,{position:"static",style:{backgroundColor:"#333",height:"52px"},children:F.jsx(oE,{maxWidth:"x",children:F.jsxs(z0,{disableGutters:!0,children:[F.jsx(jr,{onClick:()=>{l(),n("/")},children:F.jsx(Bn,{variant:"h6",noWrap:!0,component:"a",sx:{mr:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"#FFFFFF",textDecoration:"none"},children:"Management Tool"})}),Ze.Children.toArray(i.map((f,p)=>F.jsx(W.Fragment,{children:F.jsx(Cie,{items:f,depthLevel:0})},"s-"+p)))]})})})},V3e=Ba(F.jsx("path",{d:"m3.55 18.54 1.41 1.41 1.79-1.8-1.41-1.41zM11 22.45h2V19.5h-2zM4 10.5H1v2h3zm11-4.19V1.5H9v4.81C7.21 7.35 6 9.28 6 11.5c0 3.31 2.69 6 6 6s6-2.69 6-6c0-2.22-1.21-4.15-3-5.19m5 4.19v2h3v-2zm-2.76 7.66 1.79 1.8 1.41-1.41-1.8-1.79z"}),"WbIncandescent"),W3e=Ba(F.jsx("path",{d:"m3.55 19.09 1.41 1.41 1.79-1.8-1.41-1.41zM11 20h2v3h-2zM1 11h3v2H1zm12-6.95v3.96l1 .58c1.24.72 2 2.04 2 3.46 0 2.21-1.79 4-4 4s-4-1.79-4-4c0-1.42.77-2.74 2-3.46l1-.58V4.05zm2-2H9v4.81C7.21 7.9 6 9.83 6 12.05c0 3.31 2.69 6 6 6s6-2.69 6-6c0-2.22-1.21-4.15-3-5.19zM20 11h3v2h-3zm-2.76 7.71 1.79 1.8 1.41-1.41-1.8-1.79z"}),"WbIncandescentOutlined"),H3e=Ba(F.jsx("path",{d:"m1 9 2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.08 2.93 1 9m8 8 3 3 3-3c-1.65-1.66-4.34-1.66-6 0m-4-4 2 2c2.76-2.76 7.24-2.76 10 0l2-2C15.14 9.14 8.87 9.14 5 13"}),"Wifi"),G3e=Ba(F.jsx("path",{d:"M22.99 9C19.15 5.16 13.8 3.76 8.84 4.78l2.52 2.52c3.47-.17 6.99 1.05 9.63 3.7zm-4 4c-1.29-1.29-2.84-2.13-4.49-2.56l3.53 3.53zM2 3.05 5.07 6.1C3.6 6.82 2.22 7.78 1 9l1.99 2c1.24-1.24 2.67-2.16 4.2-2.77l2.24 2.24C7.81 10.89 6.27 11.73 5 13v.01L6.99 15c1.36-1.36 3.14-2.04 4.92-2.06L18.98 20l1.27-1.26L3.29 1.79zM9 17l3 3 3-3c-1.65-1.66-4.34-1.66-6 0"}),"WifiOff");var vj={},q3e=oi;Object.defineProperty(vj,"__esModule",{value:!0});var Aie=vj.default=void 0,Y3e=q3e(bi()),X3e=F;Aie=vj.default=(0,Y3e.default)((0,X3e.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");var _j={},K3e=oi;Object.defineProperty(_j,"__esModule",{value:!0});var Pie=_j.default=void 0,Z3e=K3e(bi()),J3e=F;Pie=_j.default=(0,Z3e.default)((0,J3e.jsx)("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8z"}),"Folder");var xj={},Q3e=oi;Object.defineProperty(xj,"__esModule",{value:!0});var Iie=xj.default=void 0,eNe=Q3e(bi()),tNe=F;Iie=xj.default=(0,eNe.default)((0,tNe.jsx)("path",{d:"M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5z"}),"Flight");var bj={},nNe=oi;Object.defineProperty(bj,"__esModule",{value:!0});var kie=bj.default=void 0,rNe=nNe(bi()),iNe=F;kie=bj.default=(0,rNe.default)((0,iNe.jsx)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"}),"FileUpload");var wj={},oNe=oi;Object.defineProperty(wj,"__esModule",{value:!0});var Rie=wj.default=void 0,sNe=oNe(bi()),aNe=F;Rie=wj.default=(0,sNe.default)((0,aNe.jsx)("path",{d:"M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H3V5h10v4h8z"}),"Tab");var Sj={},lNe=oi;Object.defineProperty(Sj,"__esModule",{value:!0});var Oie=Sj.default=void 0,cNe=lNe(bi()),uNe=F;Oie=Sj.default=(0,cNe.default)((0,uNe.jsx)("path",{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11"}),"Reply");var Mj={},dNe=oi;Object.defineProperty(Mj,"__esModule",{value:!0});var Lie=Mj.default=void 0,hNe=dNe(bi()),fNe=F;Lie=Mj.default=(0,hNe.default)((0,fNe.jsx)("path",{d:"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z"}),"CallMade");var Ej={},pNe=oi;Object.defineProperty(Ej,"__esModule",{value:!0});var Die=Ej.default=void 0,mNe=pNe(bi()),gNe=F;Die=Ej.default=(0,mNe.default)((0,gNe.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"ModeEdit");var Tj={},yNe=oi;Object.defineProperty(Tj,"__esModule",{value:!0});var Nie=Tj.default=void 0,vNe=yNe(bi()),_Ne=F;Nie=Tj.default=(0,vNe.default)((0,_Ne.jsx)("path",{d:"m19 8-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4z"}),"Cached");const xNe=si(t=>({toolbar:{height:"36px",background:"linear-gradient(#E7E5E7, #D3D1D3)",borderTop:"1px solid rgba(255, 255, 255, .6)"},mediaButton:{width:"auto",color:Ef[700],backgroundColor:"#F9F9F9",boxShadow:"inset 0px -4px 4px 0 rgba(0, 0, 0, 0.1)",maxHeight:"22px",top:"2px",border:"1px solid #C2C0C2",margin:"5px 10px",fontSize:"12px","&:hover":{backgroundColor:Ef[300]}},mediaicon:{color:Ef[700],width:"15px"}})),gE=({SetAddUAVOpen:t})=>{const e=xNe(),n=W.useContext(gy),[r,i]=W.useState("no load mission"),o=pr(x=>x.mission.name),s=pr(x=>x.mission.home),[a,l]=W.useState(!0),d=x=>{const b=x.target.files[0];if(!b)return;const S=new FileReader;S.readAsText(b),S.onload=()=>{console.log(S.result),console.log(b.name),n.openMision(b.name,S.result)},S.onerror=()=>{console.log(S.error)}};function f(){ht.easeTo({center:[-6.0025,37.412],zoom:Math.max(ht.getZoom(),5),offset:[0,-1/2]})}function p(){ht.easeTo({center:[s[1],s[0]],zoom:Math.max(ht.getZoom(),15),offset:[0,-1/2]})}function g(){t(!0)}const v=()=>{l(!a)};return W.useEffect(()=>{i(o)},[o]),W.useEffect(()=>{p()},[s]),F.jsx("header",{className:e.toolbar,children:F.jsxs("div",{children:[F.jsxs(uTe,{style:{height:"26px",display:"inline",justifyContent:"flex-end"},children:[F.jsx(jr,{onClick:f,className:e.mediaButton,style:{margin:"0px 0px"},children:F.jsx(Aie,{fontSize:"small",className:e.mediaicon})}),F.jsxs(jr,{id:"openMission",className:e.mediaButton,style:{margin:"0px 0px"},children:[F.jsx("label",{htmlFor:"openMissionNavbar",style:{padding:0},children:F.jsx(Pie,{fontSize:"small",className:e.mediaicon,style:{position:"relative",top:"3px"}})}),F.jsx("input",{type:"file",multiple:!1,style:{display:"none"},id:"openMissionNavbar",onChange:d})]}),F.jsx(jr,{id:"openAddUav",onClick:g,className:e.mediaButton,style:{margin:"0px 0px"},children:F.jsx(Iie,{fontSize:"small",className:e.mediaicon,style:{transform:"rotate(90deg)"}})})]}),F.jsx(gy.Consumer,{children:({rosState:x})=>F.jsxs(jr,{id:"rosConnect",onClick:n.rosConnect,className:e.mediaButton,children:[x&&"conectado"," ",!x&&"desconectado"," "]})}),F.jsx(jr,{id:"loadMission",size:"small",onClick:g,className:e.mediaButton,children:F.jsx(kie,{fontSize:"small",className:e.mediaicon})}),F.jsx(jr,{id:"commandMission",onClick:g,className:e.mediaButton,children:"Fly!"}),F.jsxs(jr,{id:"openedmission",onClick:p,className:e.mediaButton,style:{margin:"0px 100px",width:"500px"},children:[" ",r]}),F.jsx(jr,{variant:"filledTonal",onClick:x=>v(),className:e.mediaButton,children:"Status"}),F.jsx(jr,{id:"openTerminal",style:{visibility:!0},className:e.mediaButton,children:F.jsx(Rie,{fontSize:"small",className:e.mediaicon})}),F.jsx(jr,{id:"UndoMission",style:{visibility:!0},className:e.mediaButton,children:F.jsx(Oie,{fontSize:"small",className:e.mediaicon})}),F.jsx(jr,{id:"reset",className:e.mediaButton,children:F.jsx(Lie,{fontSize:"small",className:e.mediaicon})}),F.jsx(jr,{id:"showManualMode",className:e.mediaButton,children:F.jsx(Die,{fontSize:"small",className:e.mediaicon})}),F.jsx(jr,{id:"commandManualMission",style:{visibility:!0},className:e.mediaButton,children:F.jsx(Nie,{fontSize:"small",className:e.mediaicon})})]})})};var Cj={},bNe=oi;Object.defineProperty(Cj,"__esModule",{value:!0});var Nf=Cj.default=void 0,wNe=bNe(bi()),SNe=F;Nf=Cj.default=(0,wNe.default)((0,SNe.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");const MNe=si(t=>({title:{fontWeight:700,fontSize:"16px",textAlign:"left",marginTop:0,marginBottom:"6px",width:"300px",height:"18px"},mediaButton:{color:"#fff",mixBlendMode:"difference",right:0,top:0},description:{margin:0,textAlign:"left",fontSize:"12px",paddingLeft:"1rem"},toast:{height:"60px",width:"365px",color:"#fff",marginBottom:"1rem"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(.5,1,0,2)},card:{pointerEvents:"auto",height:"60px",width:"365px",color:"#fff",marginBottom:"1rem"},root:{pointerEvents:"none",position:"fixed",zIndex:5,bottom:"1rem",right:"1rem"}})),ENe=({toastlist:t,position:e,setList:n})=>{const r=MNe(),i=W.useCallback(o=>{const s=t.filter(a=>a.id!==o);n(s)},[t,n]);return W.useEffect(()=>{const o=setInterval(()=>{t.length&&i(t[0].id)},3e3);return()=>{clearInterval(o)}},[t,i]),F.jsx("div",{className:r.root,children:t.map((o,s)=>F.jsxs(jf,{elevation:3,className:r.card,style:{backgroundColor:o.backgroundColor},children:[F.jsxs("div",{className:r.header,children:[F.jsx(Bn,{variant:"body2",children:o.title}),F.jsx(br,{size:"small",onClick:()=>i(o.id),onTouchStart:()=>i(o.id),children:F.jsx(Nf,{fontSize:"small",className:r.mediaButton})})]}),F.jsx("div",{children:F.jsx("p",{className:r.description,children:o.description})})]}))})};var Aj={},TNe=oi;Object.defineProperty(Aj,"__esModule",{value:!0});var La=Aj.default=void 0,CNe=TNe(bi()),ANe=F;La=Aj.default=(0,CNe.default)((0,ANe.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");const sd=({label:t,fullWidth:e,multiple:n,value:r,emptyValue:i=0,emptyTitle:o="",onChange:s,endpoint:a,data:l,keyGetter:d=g=>g.id,titleGetter:f=g=>g.name,getItems:p=g=>g})=>{const[g,v]=W.useState(l);return f1(async()=>{if(a){const x=await fetch(a);if(x.ok)v(await x.json());else throw Error(await x.text())}},[]),W.useEffect(()=>{typeof g<"u"&&p(g[r])},[g]),g?F.jsxs(sE,{fullWidth:e,children:[F.jsx(aE,{children:t}),F.jsxs(lE,{label:t,multiple:n,value:r,onChange:x=>s(x,g),children:[!n&&i!==null&&F.jsx(au,{value:i,children:o}),g.map(x=>F.jsx(au,{value:d(x),children:f(x)},d(x)))]})]}):null};var Pj={},PNe=oi;Object.defineProperty(Pj,"__esModule",{value:!0});var yu=Pj.default=void 0,INe=PNe(bi()),kNe=F;yu=Pj.default=(0,INe.default)((0,kNe.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");const RNe=si(t=>({root:{pointerEvents:"none",position:"fixed",zIndex:6,left:"50%",top:"20%",transform:"translateX(-50%)"},card:{pointerEvents:"auto",display:"block",width:"400px",height:"70vh",transitionDuration:"0.3s",overflowY:"auto"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},button:{width:"80%",paddingBottom:"10pt",paddingTop:"10pt"},formControl:{margin:t.spacing(1),gap:t.spacing(2),paddingBottom:"20pt"},inputtext:{paddingBottom:"20px"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},title:{display:"block",width:"calc( 100% - 60pt )",paddingLeft:"15pt",paddingTop:"10pt",paddingBottom:"20pt",textAlign:"left"},closeBtn:{display:"flex",right:"5px",height:"35px",position:"absolute"},attributeName:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attributeValue:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),ONe=({SetAddUAVOpen:t})=>{const e=RNe(),n=W.useContext(gy),[r,i]=W.useState({name:"uav_",category:"dji_M210_noetic",ip:"10.42.0.42",camera:[]});function o(){t(!1)}function s(){console.log("add uav-"+r.name+"-"+r.category),console.log(r),n.connectAddUav(r),t(!1)}const a=d=>{let f=JSON.parse(JSON.stringify(r.camera));f.splice(d,1),i({...r,camera:f})};function l(){let d=JSON.parse(JSON.stringify(r.camera));d.push({type:"WebRTC",source:""}),i({...r,camera:d})}return F.jsx("div",{className:e.root,children:F.jsxs(jf,{elevation:3,className:e.card,children:[F.jsx("div",{className:e.closeBtn,children:F.jsx(br,{size:"small",onClick:o,onTouchStart:o,children:F.jsx(Nf,{fontSize:"small",className:e.mediaButton})})}),F.jsx("b",{children:F.jsx("div",{className:e.title,children:"Add device "})}),F.jsxs(pl,{defaultExpanded:!0,children:[F.jsx(gl,{expandIcon:F.jsx(La,{}),children:F.jsx(Bn,{variant:"subtitle1",children:"Datos UAV"})}),F.jsx(ml,{className:e.details,children:F.jsxs(BCe,{style:{margin:"20px"},children:[F.jsx(gi,{required:!0,label:"UAV ID",name:"uavid",value:r.name,onChange:d=>i({...r,name:d.target.value}),className:e.inputtext}),F.jsx(sd,{emptyValue:null,value:r.category?r.category:"",onChange:d=>i({...r,category:d.target.value}),endpoint:"/api/category",keyGetter:d=>d,titleGetter:d=>d,label:"Type UAV "}),F.jsx(gi,{style:{marginTop:"20px"},label:"ip",value:r.ip,onChange:d=>i({...r,ip:d.target.value})})]})})]}),r&&F.jsxs(pl,{children:[F.jsx(gl,{expandIcon:F.jsx(La,{}),children:F.jsx(Bn,{variant:"subtitle1",children:"Camera"})}),F.jsxs(ml,{className:e.details,children:[r.camera&&r.camera.map((d,f,p)=>F.jsxs(W.Fragment,{children:[F.jsx(Bn,{variant:"subtitle1",className:e.attributeName,children:"Camera "+f}),F.jsxs("div",{children:[F.jsxs(sE,{variant:"outlined",children:[F.jsx(aE,{id:"demo-simple-select-outlined-label",children:"CameraType"}),F.jsxs(lE,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:d.type,label:"type",onChange:g=>i({...r,camera:r.camera.map((v,x)=>{let b=JSON.parse(JSON.stringify(v));return f==x&&(b.type=g.target.value),b})}),children:[F.jsx(au,{value:"WebRTC",children:"WebRTC"}),F.jsx(au,{value:"WebRTC_env",children:"WebRTCenv"}),F.jsx(au,{value:"Websocket",children:"Websocket"})]})]}),F.jsx("div",{className:e.actionValue,children:F.jsx(gi,{required:!0,fullWidth:!0,value:d.source,onChange:g=>i({...r,camera:r.camera.map((v,x)=>{let b=JSON.parse(JSON.stringify(v));return f==x&&(b.source=g.target.value),b})})})}),F.jsx(br,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>a(f),className:e.negative,children:F.jsx(yu,{})})]}),F.jsx(Tb,{})]},"fragment-action-"+f)),F.jsx(jr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:l,children:"Add camera source"})]})]}),F.jsx("div",{style:{paddingBottom:"20pt",paddingTop:"20pt",display:"flex",justifyContent:"center"},children:F.jsx(jr,{className:e.button,variant:"contained",onClick:s,children:"ADD"})})]})})},XP="/assets/placeholder-ipViEH7R.jpg";var Ij={},LNe=oi;Object.defineProperty(Ij,"__esModule",{value:!0});var kj=Ij.default=void 0,DNe=LNe(bi()),NNe=F;kj=Ij.default=(0,DNe.default)((0,NNe.jsx)("path",{d:"m15 3 2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z"}),"ZoomOutMap");const zNe=si(t=>({card:{pointerEvents:"auto",width:t.dimensions.popupMaxWidth},card_max:{pointerEvents:"auto",width:"100%"},media:{width:"100%",display:"flex",justifyContent:"flex-end",alignItems:"flex-start"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},root:{pointerEvents:"none",position:"fixed",zIndex:6,left:"360px",top:t.spacing(15),transform:"translateX(1%)"},root_max:{pointerEvents:"none",position:"fixed",zIndex:6,left:"51%",top:"5%",transform:"translateX(-50%)",width:"55%"}})),FNe=({deviceId:t,datacamera:e,onClose:n})=>{const r=zNe(),[i,o]=W.useState(XP),s=pr(g=>g.devices.items[t]),[a,l]=W.useState(!1);let d=a?r.card_max:r.card,f=a?r.root_max:r.root;function p(){l(!a)}return W.useEffect(()=>{t!=null&&(e!=null?o("data:image/bgr8;base64,"+e.camera):o(XP))},[e]),F.jsx("div",{className:f,children:s&&F.jsxs(jf,{elevation:3,className:d,children:[F.jsxs("div",{style:{display:"flex",right:"5px",height:"35px",position:"absolute"},children:[F.jsx(br,{size:"small",onClick:p,onTouchStart:p,children:F.jsx(kj,{fontSize:"small",className:r.mediaButton})}),F.jsx(br,{size:"small",onClick:()=>{n(),l(!1)},onTouchStart:n,children:F.jsx(Nf,{fontSize:"small",className:r.mediaButton})})]}),F.jsxs("div",{style:{display:"block",width:"calc( 100% - 60pt )",paddingLeft:"15pt",paddingTop:"10pt",paddingBottom:"10pt",textAlign:"left"},children:["Image "+s.name," "]}),F.jsx("img",{src:i,className:r.media})]})})};var FG=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function BNe(t,e){return!!(t===e||FG(t)&&FG(e))}function $Ne(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!BNe(t[n],e[n]))return!1;return!0}function n3(t,e){e===void 0&&(e=$Ne);var n,r=[],i,o=!1;function s(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return o&&n===this&&e(a,r)||(i=t.apply(this,a),o=!0,n=this,r=a),i}return s}var jNe=typeof performance=="object"&&typeof performance.now=="function",BG=jNe?function(){return performance.now()}:function(){return Date.now()};function $G(t){cancelAnimationFrame(t.id)}function UNe(t,e){var n=BG();function r(){BG()-n>=e?t.call(null):i.id=requestAnimationFrame(r)}var i={id:requestAnimationFrame(r)};return i}var r3=-1;function jG(t){if(t===void 0&&(t=!1),r3===-1||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(e),r3=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return r3}var I_=null;function UG(t){if(t===void 0&&(t=!1),I_===null||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?I_="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?I_="negative":I_="positive-ascending"),document.body.removeChild(e),I_}return I_}var VNe=150,WNe=function(e,n){return e};function HNe(t){var e,n=t.getItemOffset,r=t.getEstimatedTotalSize,i=t.getItemSize,o=t.getOffsetForIndexAndAlignment,s=t.getStartIndexForOffset,a=t.getStopIndexForStartIndex,l=t.initInstanceProps,d=t.shouldResetStyleCacheOnItemSizeChange,f=t.validateProps;return e=function(p){nE(g,p);function g(x){var b;return b=p.call(this,x)||this,b._instanceProps=l(b.props,b2(b)),b._outerRef=void 0,b._resetIsScrollingTimeoutId=null,b.state={instance:b2(b),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof b.props.initialScrollOffset=="number"?b.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},b._callOnItemsRendered=void 0,b._callOnItemsRendered=n3(function(S,M,T,C){return b.props.onItemsRendered({overscanStartIndex:S,overscanStopIndex:M,visibleStartIndex:T,visibleStopIndex:C})}),b._callOnScroll=void 0,b._callOnScroll=n3(function(S,M,T){return b.props.onScroll({scrollDirection:S,scrollOffset:M,scrollUpdateWasRequested:T})}),b._getItemStyle=void 0,b._getItemStyle=function(S){var M=b.props,T=M.direction,C=M.itemSize,k=M.layout,O=b._getItemStyleCache(d&&C,d&&k,d&&T),D;if(O.hasOwnProperty(S))D=O[S];else{var B=n(b.props,S,b._instanceProps),U=i(b.props,S,b._instanceProps),J=T==="horizontal"||k==="horizontal",V=T==="rtl",X=J?B:0;O[S]=D={position:"absolute",left:V?void 0:X,right:V?X:void 0,top:J?0:B,height:J?"100%":U,width:J?U:"100%"}}return D},b._getItemStyleCache=void 0,b._getItemStyleCache=n3(function(S,M,T){return{}}),b._onScrollHorizontal=function(S){var M=S.currentTarget,T=M.clientWidth,C=M.scrollLeft,k=M.scrollWidth;b.setState(function(O){if(O.scrollOffset===C)return null;var D=b.props.direction,B=C;if(D==="rtl")switch(UG()){case"negative":B=-C;break;case"positive-descending":B=k-T-C;break}return B=Math.max(0,Math.min(B,k-T)),{isScrolling:!0,scrollDirection:O.scrollOffset<B?"forward":"backward",scrollOffset:B,scrollUpdateWasRequested:!1}},b._resetIsScrollingDebounced)},b._onScrollVertical=function(S){var M=S.currentTarget,T=M.clientHeight,C=M.scrollHeight,k=M.scrollTop;b.setState(function(O){if(O.scrollOffset===k)return null;var D=Math.max(0,Math.min(k,C-T));return{isScrolling:!0,scrollDirection:O.scrollOffset<D?"forward":"backward",scrollOffset:D,scrollUpdateWasRequested:!1}},b._resetIsScrollingDebounced)},b._outerRefSetter=function(S){var M=b.props.outerRef;b._outerRef=S,typeof M=="function"?M(S):M!=null&&typeof M=="object"&&M.hasOwnProperty("current")&&(M.current=S)},b._resetIsScrollingDebounced=function(){b._resetIsScrollingTimeoutId!==null&&$G(b._resetIsScrollingTimeoutId),b._resetIsScrollingTimeoutId=UNe(b._resetIsScrolling,VNe)},b._resetIsScrolling=function(){b._resetIsScrollingTimeoutId=null,b.setState({isScrolling:!1},function(){b._getItemStyleCache(-1,null)})},b}g.getDerivedStateFromProps=function(b,S){return GNe(b,S),f(b),null};var v=g.prototype;return v.scrollTo=function(b){b=Math.max(0,b),this.setState(function(S){return S.scrollOffset===b?null:{scrollDirection:S.scrollOffset<b?"forward":"backward",scrollOffset:b,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},v.scrollToItem=function(b,S){S===void 0&&(S="auto");var M=this.props,T=M.itemCount,C=M.layout,k=this.state.scrollOffset;b=Math.max(0,Math.min(b,T-1));var O=0;if(this._outerRef){var D=this._outerRef;C==="vertical"?O=D.scrollWidth>D.clientWidth?jG():0:O=D.scrollHeight>D.clientHeight?jG():0}this.scrollTo(o(this.props,b,S,k,this._instanceProps,O))},v.componentDidMount=function(){var b=this.props,S=b.direction,M=b.initialScrollOffset,T=b.layout;if(typeof M=="number"&&this._outerRef!=null){var C=this._outerRef;S==="horizontal"||T==="horizontal"?C.scrollLeft=M:C.scrollTop=M}this._callPropsCallbacks()},v.componentDidUpdate=function(){var b=this.props,S=b.direction,M=b.layout,T=this.state,C=T.scrollOffset,k=T.scrollUpdateWasRequested;if(k&&this._outerRef!=null){var O=this._outerRef;if(S==="horizontal"||M==="horizontal")if(S==="rtl")switch(UG()){case"negative":O.scrollLeft=-C;break;case"positive-ascending":O.scrollLeft=C;break;default:var D=O.clientWidth,B=O.scrollWidth;O.scrollLeft=B-D-C;break}else O.scrollLeft=C;else O.scrollTop=C}this._callPropsCallbacks()},v.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&$G(this._resetIsScrollingTimeoutId)},v.render=function(){var b=this.props,S=b.children,M=b.className,T=b.direction,C=b.height,k=b.innerRef,O=b.innerElementType,D=b.innerTagName,B=b.itemCount,U=b.itemData,J=b.itemKey,V=J===void 0?WNe:J,X=b.layout,oe=b.outerElementType,pe=b.outerTagName,re=b.style,he=b.useIsScrolling,ue=b.width,be=this.state.isScrolling,ie=T==="horizontal"||X==="horizontal",ve=ie?this._onScrollHorizontal:this._onScrollVertical,Ee=this._getRangeToRender(),Ne=Ee[0],Ge=Ee[1],dt=[];if(B>0)for(var Ue=Ne;Ue<=Ge;Ue++)dt.push(W.createElement(S,{data:U,key:V(Ue,U),index:Ue,isScrolling:he?be:void 0,style:this._getItemStyle(Ue)}));var st=r(this.props,this._instanceProps);return W.createElement(oe||pe||"div",{className:M,onScroll:ve,ref:this._outerRefSetter,style:fe({position:"relative",height:C,width:ue,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:T},re)},W.createElement(O||D||"div",{children:dt,ref:k,style:{height:ie?"100%":st,pointerEvents:be?"none":void 0,width:ie?st:"100%"}}))},v._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var b=this.props.itemCount;if(b>0){var S=this._getRangeToRender(),M=S[0],T=S[1],C=S[2],k=S[3];this._callOnItemsRendered(M,T,C,k)}}if(typeof this.props.onScroll=="function"){var O=this.state,D=O.scrollDirection,B=O.scrollOffset,U=O.scrollUpdateWasRequested;this._callOnScroll(D,B,U)}},v._getRangeToRender=function(){var b=this.props,S=b.itemCount,M=b.overscanCount,T=this.state,C=T.isScrolling,k=T.scrollDirection,O=T.scrollOffset;if(S===0)return[0,0,0,0];var D=s(this.props,O,this._instanceProps),B=a(this.props,D,O,this._instanceProps),U=!C||k==="backward"?Math.max(1,M):1,J=!C||k==="forward"?Math.max(1,M):1;return[Math.max(0,D-U),Math.max(0,Math.min(S-1,B+J)),D,B]},g}(W.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var GNe=function(e,n){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,n.instance},qNe=HNe({getItemOffset:function(e,n){var r=e.itemSize;return n*r},getItemSize:function(e,n){var r=e.itemSize;return r},getEstimatedTotalSize:function(e){var n=e.itemCount,r=e.itemSize;return r*n},getOffsetForIndexAndAlignment:function(e,n,r,i,o,s){var a=e.direction,l=e.height,d=e.itemCount,f=e.itemSize,p=e.layout,g=e.width,v=a==="horizontal"||p==="horizontal",x=v?g:l,b=Math.max(0,d*f-x),S=Math.min(b,n*f),M=Math.max(0,n*f-x+f+s);switch(r==="smart"&&(i>=M-x&&i<=S+x?r="auto":r="center"),r){case"start":return S;case"end":return M;case"center":{var T=Math.round(M+(S-M)/2);return T<Math.ceil(x/2)?0:T>b+Math.floor(x/2)?b:T}case"auto":default:return i>=M&&i<=S?i:i<M?M:S}},getStartIndexForOffset:function(e,n){var r=e.itemCount,i=e.itemSize;return Math.max(0,Math.min(r-1,Math.floor(n/i)))},getStopIndexForStartIndex:function(e,n,r){var i=e.direction,o=e.height,s=e.itemCount,a=e.itemSize,l=e.layout,d=e.width,f=i==="horizontal"||l==="horizontal",p=n*a,g=f?d:o,v=Math.ceil((g+r-p)/a);return Math.max(0,Math.min(s-1,n+v-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});let pd;typeof window<"u"?pd=window:typeof self<"u"?pd=self:pd=global;let AF=null,PF=null;const VG=20,i3=pd.clearTimeout,WG=pd.setTimeout,o3=pd.cancelAnimationFrame||pd.mozCancelAnimationFrame||pd.webkitCancelAnimationFrame,HG=pd.requestAnimationFrame||pd.mozRequestAnimationFrame||pd.webkitRequestAnimationFrame;o3==null||HG==null?(AF=i3,PF=function(e){return WG(e,VG)}):(AF=function([e,n]){o3(e),i3(n)},PF=function(e){const n=HG(function(){i3(r),e()}),r=WG(function(){o3(n),e()},VG);return[n,r]});function YNe(t){let e,n,r,i,o,s,a;const l=typeof document<"u"&&document.attachEvent;if(!l){s=function(M){const T=M.__resizeTriggers__,C=T.firstElementChild,k=T.lastElementChild,O=C.firstElementChild;k.scrollLeft=k.scrollWidth,k.scrollTop=k.scrollHeight,O.style.width=C.offsetWidth+1+"px",O.style.height=C.offsetHeight+1+"px",C.scrollLeft=C.scrollWidth,C.scrollTop=C.scrollHeight},o=function(M){return M.offsetWidth!==M.__resizeLast__.width||M.offsetHeight!==M.__resizeLast__.height},a=function(M){if(M.target.className&&typeof M.target.className.indexOf=="function"&&M.target.className.indexOf("contract-trigger")<0&&M.target.className.indexOf("expand-trigger")<0)return;const T=this;s(this),this.__resizeRAF__&&AF(this.__resizeRAF__),this.__resizeRAF__=PF(function(){o(T)&&(T.__resizeLast__.width=T.offsetWidth,T.__resizeLast__.height=T.offsetHeight,T.__resizeListeners__.forEach(function(O){O.call(T,M)}))})};let g=!1,v="";r="animationstart";const x="Webkit Moz O ms".split(" ");let b="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),S="";{const M=document.createElement("fakeelement");if(M.style.animationName!==void 0&&(g=!0),g===!1){for(let T=0;T<x.length;T++)if(M.style[x[T]+"AnimationName"]!==void 0){S=x[T],v="-"+S.toLowerCase()+"-",r=b[T],g=!0;break}}}n="resizeanim",e="@"+v+"keyframes "+n+" { from { opacity: 0; } to { opacity: 0; } } ",i=v+"animation: 1ms "+n+"; "}const d=function(g){if(!g.getElementById("detectElementResize")){const v=(e||"")+".resize-triggers { "+(i||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',x=g.head||g.getElementsByTagName("head")[0],b=g.createElement("style");b.id="detectElementResize",b.type="text/css",t!=null&&b.setAttribute("nonce",t),b.styleSheet?b.styleSheet.cssText=v:b.appendChild(g.createTextNode(v)),x.appendChild(b)}};return{addResizeListener:function(g,v){if(l)g.attachEvent("onresize",v);else{if(!g.__resizeTriggers__){const x=g.ownerDocument,b=pd.getComputedStyle(g);b&&b.position==="static"&&(g.style.position="relative"),d(x),g.__resizeLast__={},g.__resizeListeners__=[],(g.__resizeTriggers__=x.createElement("div")).className="resize-triggers";const S=x.createElement("div");S.className="expand-trigger",S.appendChild(x.createElement("div"));const M=x.createElement("div");M.className="contract-trigger",g.__resizeTriggers__.appendChild(S),g.__resizeTriggers__.appendChild(M),g.appendChild(g.__resizeTriggers__),s(g),g.addEventListener("scroll",a,!0),r&&(g.__resizeTriggers__.__animationListener__=function(C){C.animationName===n&&s(g)},g.__resizeTriggers__.addEventListener(r,g.__resizeTriggers__.__animationListener__))}g.__resizeListeners__.push(v)}},removeResizeListener:function(g,v){if(l)g.detachEvent("onresize",v);else if(g.__resizeListeners__.splice(g.__resizeListeners__.indexOf(v),1),!g.__resizeListeners__.length){g.removeEventListener("scroll",a,!0),g.__resizeTriggers__.__animationListener__&&(g.__resizeTriggers__.removeEventListener(r,g.__resizeTriggers__.__animationListener__),g.__resizeTriggers__.__animationListener__=null);try{g.__resizeTriggers__=!g.removeChild(g.__resizeTriggers__)}catch{}}}}}class XNe extends W.Component{constructor(...e){super(...e),this.state={height:this.props.defaultHeight||0,scaledHeight:this.props.defaultHeight||0,scaledWidth:this.props.defaultWidth||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:n,disableWidth:r,onResize:i}=this.props;if(this._parentNode){const o=window.getComputedStyle(this._parentNode)||{},s=parseFloat(o.paddingLeft||"0"),a=parseFloat(o.paddingRight||"0"),l=parseFloat(o.paddingTop||"0"),d=parseFloat(o.paddingBottom||"0"),f=this._parentNode.getBoundingClientRect(),p=f.height-l-d,g=f.width-s-a,v=this._parentNode.offsetHeight-l-d,x=this._parentNode.offsetWidth-s-a;(!n&&(this.state.height!==v||this.state.scaledHeight!==p)||!r&&(this.state.width!==x||this.state.scaledWidth!==g))&&(this.setState({height:v,width:x,scaledHeight:p,scaledWidth:g}),typeof i=="function"&&i({height:v,scaledHeight:p,scaledWidth:g,width:x}))}},this._setRef=n=>{this._autoSizer=n}}componentDidMount(){const{nonce:e}=this.props,n=this._autoSizer?this._autoSizer.parentNode:null;if(n!=null&&n.ownerDocument&&n.ownerDocument.defaultView&&n instanceof n.ownerDocument.defaultView.HTMLElement){this._parentNode=n;const r=n.ownerDocument.defaultView.ResizeObserver;r!=null?(this._resizeObserver=new r(()=>{this._timeoutId=setTimeout(this._onResize,0)}),this._resizeObserver.observe(n)):(this._detectElementResize=YNe(e),this._detectElementResize.addResizeListener(n,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),this._timeoutId!==null&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){const{children:e,defaultHeight:n,defaultWidth:r,disableHeight:i=!1,disableWidth:o=!1,doNotBailOutOnEmptyChildren:s=!1,nonce:a,onResize:l,style:d={},tagName:f="div",...p}=this.props,{height:g,scaledHeight:v,scaledWidth:x,width:b}=this.state,S={overflow:"visible"},M={};let T=!1;return i||(g===0&&(T=!0),S.height=0,M.height=g,M.scaledHeight=v),o||(b===0&&(T=!0),S.width=0,M.width=b,M.scaledWidth=x),s&&(T=!1),W.createElement(f,{ref:this._setRef,style:{...S,...d},...p},!T&&e(M))}}var Rj={},KNe=oi;Object.defineProperty(Rj,"__esModule",{value:!0});var zie=Rj.default=void 0,ZNe=KNe(bi()),JNe=F;zie=Rj.default=(0,ZNe.default)((0,JNe.jsx)("path",{d:"M15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33v15.33C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V5.33C17 4.6 16.4 4 15.67 4"}),"BatteryFull");var Oj={},QNe=oi;Object.defineProperty(Oj,"__esModule",{value:!0});var Fie=Oj.default=void 0,eze=QNe(bi()),tze=F;Fie=Oj.default=(0,eze.default)((0,tze.jsx)("path",{d:"M15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33v15.33C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V5.33C17 4.6 16.4 4 15.67 4M11 20v-5.5H9L13 7v5.5h2z"}),"BatteryChargingFull");var Lj={},nze=oi;Object.defineProperty(Lj,"__esModule",{value:!0});var Bie=Lj.default=void 0,rze=oze(W),ize=nze(bi()),s3=F;function $ie(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return($ie=function(r){return r?n:e})(t)}function oze(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=$ie(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}Bie=Lj.default=(0,ize.default)((0,s3.jsxs)(rze.Fragment,{children:[(0,s3.jsx)("path",{fillOpacity:".3",d:"M17 5.33C17 4.6 16.4 4 15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33V11h10V5.33z"}),(0,s3.jsx)("path",{d:"M7 11v9.67C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V11H7z"})]}),"Battery60");var Dj={},sze=oi;Object.defineProperty(Dj,"__esModule",{value:!0});var jie=Dj.default=void 0,aze=cze(W),lze=sze(bi()),a3=F;function Uie(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Uie=function(r){return r?n:e})(t)}function cze(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=Uie(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}jie=Dj.default=(0,lze.default)((0,a3.jsxs)(aze.Fragment,{children:[(0,a3.jsx)("path",{fillOpacity:".3",d:"M15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33V11h3.87L13 7v4h4V5.33C17 4.6 16.4 4 15.67 4z"}),(0,a3.jsx)("path",{d:"M13 12.5h2L11 20v-5.5H9l1.87-3.5H7v9.67C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V11h-4v1.5z"})]}),"BatteryCharging60");var Nj={},uze=oi;Object.defineProperty(Nj,"__esModule",{value:!0});var Vie=Nj.default=void 0,dze=fze(W),hze=uze(bi()),l3=F;function Wie(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Wie=function(r){return r?n:e})(t)}function fze(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=Wie(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}Vie=Nj.default=(0,hze.default)((0,l3.jsxs)(dze.Fragment,{children:[(0,l3.jsx)("path",{d:"M7 17v3.67C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V17H7z"}),(0,l3.jsx)("path",{fillOpacity:".3",d:"M17 5.33C17 4.6 16.4 4 15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33V17h10V5.33z"})]}),"Battery20");var zj={},pze=oi;Object.defineProperty(zj,"__esModule",{value:!0});var Hie=zj.default=void 0,mze=yze(W),gze=pze(bi()),c3=F;function Gie(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Gie=function(r){return r?n:e})(t)}function yze(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=Gie(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}Hie=zj.default=(0,gze.default)((0,c3.jsxs)(mze.Fragment,{children:[(0,c3.jsx)("path",{d:"M11 20v-3H7v3.67C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V17h-4.4L11 20z"}),(0,c3.jsx)("path",{fillOpacity:".3",d:"M15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33V17h4v-2.5H9L13 7v5.5h2L12.6 17H17V5.33C17 4.6 16.4 4 15.67 4z"})]}),"BatteryCharging20");var Fj={},vze=oi;Object.defineProperty(Fj,"__esModule",{value:!0});var qie=Fj.default=void 0,_ze=vze(bi()),xze=F;qie=Fj.default=(0,_ze.default)((0,xze.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error");//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Yie;function kn(){return Yie.apply(null,arguments)}function bze(t){Yie=t}function Ah(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function a0(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function yi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Bj(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(yi(t,e))return!1;return!0}function fc(t){return t===void 0}function fm(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function yE(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function Xie(t,e){var n=[],r,i=t.length;for(r=0;r<i;++r)n.push(e(t[r],r));return n}function Wg(t,e){for(var n in e)yi(e,n)&&(t[n]=e[n]);return yi(e,"toString")&&(t.toString=e.toString),yi(e,"valueOf")&&(t.valueOf=e.valueOf),t}function Uf(t,e,n,r){return voe(t,e,n,r,!0).utc()}function wze(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Fr(t){return t._pf==null&&(t._pf=wze()),t._pf}var IF;Array.prototype.some?IF=Array.prototype.some:IF=function(t){var e=Object(this),n=e.length>>>0,r;for(r=0;r<n;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};function $j(t){var e=null,n=!1,r=t._d&&!isNaN(t._d.getTime());if(r&&(e=Fr(t),n=IF.call(e.parsedDateParts,function(i){return i!=null}),r=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n),t._strict&&(r=r&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=r;else return r;return t._isValid}function OR(t){var e=Uf(NaN);return t!=null?Wg(Fr(e),t):Fr(e).userInvalidated=!0,e}var GG=kn.momentProperties=[],u3=!1;function jj(t,e){var n,r,i,o=GG.length;if(fc(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),fc(e._i)||(t._i=e._i),fc(e._f)||(t._f=e._f),fc(e._l)||(t._l=e._l),fc(e._strict)||(t._strict=e._strict),fc(e._tzm)||(t._tzm=e._tzm),fc(e._isUTC)||(t._isUTC=e._isUTC),fc(e._offset)||(t._offset=e._offset),fc(e._pf)||(t._pf=Fr(e)),fc(e._locale)||(t._locale=e._locale),o>0)for(n=0;n<o;n++)r=GG[n],i=e[r],fc(i)||(t[r]=i);return t}function vE(t){jj(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),u3===!1&&(u3=!0,kn.updateOffset(this),u3=!1)}function Ph(t){return t instanceof vE||t!=null&&t._isAMomentObject!=null}function Kie(t){kn.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function Td(t,e){var n=!0;return Wg(function(){if(kn.deprecationHandler!=null&&kn.deprecationHandler(null,t),n){var r=[],i,o,s,a=arguments.length;for(o=0;o<a;o++){if(i="",typeof arguments[o]=="object"){i+=`
[`+o+"] ";for(s in arguments[0])yi(arguments[0],s)&&(i+=s+": "+arguments[0][s]+", ");i=i.slice(0,-2)}else i=arguments[o];r.push(i)}Kie(t+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),n=!1}return e.apply(this,arguments)},e)}var qG={};function Zie(t,e){kn.deprecationHandler!=null&&kn.deprecationHandler(t,e),qG[t]||(Kie(e),qG[t]=!0)}kn.suppressDeprecationWarnings=!1;kn.deprecationHandler=null;function Vf(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function Sze(t){var e,n;for(n in t)yi(t,n)&&(e=t[n],Vf(e)?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function kF(t,e){var n=Wg({},t),r;for(r in e)yi(e,r)&&(a0(t[r])&&a0(e[r])?(n[r]={},Wg(n[r],t[r]),Wg(n[r],e[r])):e[r]!=null?n[r]=e[r]:delete n[r]);for(r in t)yi(t,r)&&!yi(e,r)&&a0(t[r])&&(n[r]=Wg({},n[r]));return n}function Uj(t){t!=null&&this.set(t)}var RF;Object.keys?RF=Object.keys:RF=function(t){var e,n=[];for(e in t)yi(t,e)&&n.push(e);return n};var Mze={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Eze(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return Vf(r)?r.call(e,n):r}function zf(t,e,n){var r=""+Math.abs(t),i=e-r.length,o=t>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var Vj=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,QT=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,d3={},Jx={};function or(t,e,n,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),t&&(Jx[t]=i),e&&(Jx[e[0]]=function(){return zf(i.apply(this,arguments),e[1],e[2])}),n&&(Jx[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function Tze(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function Cze(t){var e=t.match(Vj),n,r;for(n=0,r=e.length;n<r;n++)Jx[e[n]]?e[n]=Jx[e[n]]:e[n]=Tze(e[n]);return function(i){var o="",s;for(s=0;s<r;s++)o+=Vf(e[s])?e[s].call(i,t):e[s];return o}}function FA(t,e){return t.isValid()?(e=Jie(e,t.localeData()),d3[e]=d3[e]||Cze(e),d3[e](t)):t.localeData().invalidDate()}function Jie(t,e){var n=5;function r(i){return e.longDateFormat(i)||i}for(QT.lastIndex=0;n>=0&&QT.test(t);)t=t.replace(QT,r),QT.lastIndex=0,n-=1;return t}var Aze={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Pze(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(Vj).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[t])}var Ize="Invalid date";function kze(){return this._invalidDate}var Rze="%d",Oze=/\d{1,2}/;function Lze(t){return this._ordinal.replace("%d",t)}var Dze={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Nze(t,e,n,r){var i=this._relativeTime[n];return Vf(i)?i(t,e,n,r):i.replace(/%d/i,t)}function zze(t,e){var n=this._relativeTime[t>0?"future":"past"];return Vf(n)?n(e):n.replace(/%s/i,e)}var YG={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Cd(t){return typeof t=="string"?YG[t]||YG[t.toLowerCase()]:void 0}function Wj(t){var e={},n,r;for(r in t)yi(t,r)&&(n=Cd(r),n&&(e[n]=t[r]));return e}var Fze={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Bze(t){var e=[],n;for(n in t)yi(t,n)&&e.push({unit:n,priority:Fze[n]});return e.sort(function(r,i){return r.priority-i.priority}),e}var Qie=/\d/,Su=/\d\d/,eoe=/\d{3}/,Hj=/\d{4}/,LR=/[+-]?\d{6}/,_o=/\d\d?/,toe=/\d\d\d\d?/,noe=/\d\d\d\d\d\d?/,DR=/\d{1,3}/,Gj=/\d{1,4}/,NR=/[+-]?\d{1,6}/,S1=/\d+/,zR=/[+-]?\d+/,$ze=/Z|[+-]\d\d:?\d\d/gi,FR=/Z|[+-]\d\d(?::?\d\d)?/gi,jze=/[+-]?\d+(\.\d{1,3})?/,_E=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,M1=/^[1-9]\d?/,qj=/^([1-9]\d|\d)/,KP;KP={};function Wn(t,e,n){KP[t]=Vf(e)?e:function(r,i){return r&&n?n:e}}function Uze(t,e){return yi(KP,t)?KP[t](e._strict,e._locale):new RegExp(Vze(t))}function Vze(t){return Jp(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,n,r,i,o){return n||r||i||o}))}function Jp(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ad(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function Zr(t){var e=+t,n=0;return e!==0&&isFinite(e)&&(n=ad(e)),n}var OF={};function Ki(t,e){var n,r=e,i;for(typeof t=="string"&&(t=[t]),fm(e)&&(r=function(o,s){s[e]=Zr(o)}),i=t.length,n=0;n<i;n++)OF[t[n]]=r}function xE(t,e){Ki(t,function(n,r,i,o){i._w=i._w||{},e(n,i._w,i,o)})}function Wze(t,e,n){e!=null&&yi(OF,t)&&OF[t](e,n._a,n,t)}function BR(t){return t%4===0&&t%100!==0||t%400===0}var vl=0,Vp=1,vf=2,Vs=3,wh=4,Wp=5,Hv=6,Hze=7,Gze=8;or("Y",0,0,function(){var t=this.year();return t<=9999?zf(t,4):"+"+t});or(0,["YY",2],0,function(){return this.year()%100});or(0,["YYYY",4],0,"year");or(0,["YYYYY",5],0,"year");or(0,["YYYYYY",6,!0],0,"year");Wn("Y",zR);Wn("YY",_o,Su);Wn("YYYY",Gj,Hj);Wn("YYYYY",NR,LR);Wn("YYYYYY",NR,LR);Ki(["YYYYY","YYYYYY"],vl);Ki("YYYY",function(t,e){e[vl]=t.length===2?kn.parseTwoDigitYear(t):Zr(t)});Ki("YY",function(t,e){e[vl]=kn.parseTwoDigitYear(t)});Ki("Y",function(t,e){e[vl]=parseInt(t,10)});function zS(t){return BR(t)?366:365}kn.parseTwoDigitYear=function(t){return Zr(t)+(Zr(t)>68?1900:2e3)};var roe=E1("FullYear",!0);function qze(){return BR(this.year())}function E1(t,e){return function(n){return n!=null?(ioe(this,t,n),kn.updateOffset(this,e),this):P2(this,t)}}function P2(t,e){if(!t.isValid())return NaN;var n=t._d,r=t._isUTC;switch(e){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function ioe(t,e,n){var r,i,o,s,a;if(!(!t.isValid()||isNaN(n))){switch(r=t._d,i=t._isUTC,e){case"Milliseconds":return void(i?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(i?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(i?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(i?r.setUTCHours(n):r.setHours(n));case"Date":return void(i?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}o=n,s=t.month(),a=t.date(),a=a===29&&s===1&&!BR(o)?28:a,i?r.setUTCFullYear(o,s,a):r.setFullYear(o,s,a)}}function Yze(t){return t=Cd(t),Vf(this[t])?this[t]():this}function Xze(t,e){if(typeof t=="object"){t=Wj(t);var n=Bze(t),r,i=n.length;for(r=0;r<i;r++)this[n[r].unit](t[n[r].unit])}else if(t=Cd(t),Vf(this[t]))return this[t](e);return this}function Kze(t,e){return(t%e+e)%e}var ls;Array.prototype.indexOf?ls=Array.prototype.indexOf:ls=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function Yj(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=Kze(e,12);return t+=(e-n)/12,n===1?BR(t)?29:28:31-n%7%2}or("M",["MM",2],"Mo",function(){return this.month()+1});or("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});or("MMMM",0,0,function(t){return this.localeData().months(this,t)});Wn("M",_o,M1);Wn("MM",_o,Su);Wn("MMM",function(t,e){return e.monthsShortRegex(t)});Wn("MMMM",function(t,e){return e.monthsRegex(t)});Ki(["M","MM"],function(t,e){e[Vp]=Zr(t)-1});Ki(["MMM","MMMM"],function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);i!=null?e[Vp]=i:Fr(n).invalidMonth=t});var Zze="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ooe="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),soe=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Jze=_E,Qze=_E;function eFe(t,e){return t?Ah(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||soe).test(e)?"format":"standalone"][t.month()]:Ah(this._months)?this._months:this._months.standalone}function tFe(t,e){return t?Ah(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[soe.test(e)?"format":"standalone"][t.month()]:Ah(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function nFe(t,e,n){var r,i,o,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=Uf([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?e==="MMM"?(i=ls.call(this._shortMonthsParse,s),i!==-1?i:null):(i=ls.call(this._longMonthsParse,s),i!==-1?i:null):e==="MMM"?(i=ls.call(this._shortMonthsParse,s),i!==-1?i:(i=ls.call(this._longMonthsParse,s),i!==-1?i:null)):(i=ls.call(this._longMonthsParse,s),i!==-1?i:(i=ls.call(this._shortMonthsParse,s),i!==-1?i:null))}function rFe(t,e,n){var r,i,o;if(this._monthsParseExact)return nFe.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=Uf([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&e==="MMMM"&&this._longMonthsParse[r].test(t))return r;if(n&&e==="MMM"&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}}function aoe(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=Zr(e);else if(e=t.localeData().monthsParse(e),!fm(e))return t}var n=e,r=t.date();return r=r<29?r:Math.min(r,Yj(t.year(),n)),t._isUTC?t._d.setUTCMonth(n,r):t._d.setMonth(n,r),t}function loe(t){return t!=null?(aoe(this,t),kn.updateOffset(this,!0),this):P2(this,"Month")}function iFe(){return Yj(this.year(),this.month())}function oFe(t){return this._monthsParseExact?(yi(this,"_monthsRegex")||coe.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(yi(this,"_monthsShortRegex")||(this._monthsShortRegex=Jze),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function sFe(t){return this._monthsParseExact?(yi(this,"_monthsRegex")||coe.call(this),t?this._monthsStrictRegex:this._monthsRegex):(yi(this,"_monthsRegex")||(this._monthsRegex=Qze),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function coe(){function t(l,d){return d.length-l.length}var e=[],n=[],r=[],i,o,s,a;for(i=0;i<12;i++)o=Uf([2e3,i]),s=Jp(this.monthsShort(o,"")),a=Jp(this.months(o,"")),e.push(s),n.push(a),r.push(a),r.push(s);e.sort(t),n.sort(t),r.sort(t),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function aFe(t,e,n,r,i,o,s){var a;return t<100&&t>=0?(a=new Date(t+400,e,n,r,i,o,s),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,n,r,i,o,s),a}function I2(t){var e,n;return t<100&&t>=0?(n=Array.prototype.slice.call(arguments),n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function ZP(t,e,n){var r=7+e-n,i=(7+I2(t,0,r).getUTCDay()-e)%7;return-i+r-1}function uoe(t,e,n,r,i){var o=(7+n-r)%7,s=ZP(t,r,i),a=1+7*(e-1)+o+s,l,d;return a<=0?(l=t-1,d=zS(l)+a):a>zS(t)?(l=t+1,d=a-zS(t)):(l=t,d=a),{year:l,dayOfYear:d}}function k2(t,e,n){var r=ZP(t.year(),e,n),i=Math.floor((t.dayOfYear()-r-1)/7)+1,o,s;return i<1?(s=t.year()-1,o=i+Qp(s,e,n)):i>Qp(t.year(),e,n)?(o=i-Qp(t.year(),e,n),s=t.year()+1):(s=t.year(),o=i),{week:o,year:s}}function Qp(t,e,n){var r=ZP(t,e,n),i=ZP(t+1,e,n);return(zS(t)-r+i)/7}or("w",["ww",2],"wo","week");or("W",["WW",2],"Wo","isoWeek");Wn("w",_o,M1);Wn("ww",_o,Su);Wn("W",_o,M1);Wn("WW",_o,Su);xE(["w","ww","W","WW"],function(t,e,n,r){e[r.substr(0,1)]=Zr(t)});function lFe(t){return k2(t,this._week.dow,this._week.doy).week}var cFe={dow:0,doy:6};function uFe(){return this._week.dow}function dFe(){return this._week.doy}function hFe(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function fFe(t){var e=k2(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}or("d",0,"do","day");or("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});or("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});or("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});or("e",0,0,"weekday");or("E",0,0,"isoWeekday");Wn("d",_o);Wn("e",_o);Wn("E",_o);Wn("dd",function(t,e){return e.weekdaysMinRegex(t)});Wn("ddd",function(t,e){return e.weekdaysShortRegex(t)});Wn("dddd",function(t,e){return e.weekdaysRegex(t)});xE(["dd","ddd","dddd"],function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);i!=null?e.d=i:Fr(n).invalidWeekday=t});xE(["d","e","E"],function(t,e,n,r){e[r]=Zr(t)});function pFe(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function mFe(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Xj(t,e){return t.slice(e,7).concat(t.slice(0,e))}var gFe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),doe="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),yFe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),vFe=_E,_Fe=_E,xFe=_E;function bFe(t,e){var n=Ah(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?Xj(n,this._week.dow):t?n[t.day()]:n}function wFe(t){return t===!0?Xj(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function SFe(t){return t===!0?Xj(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function MFe(t,e,n){var r,i,o,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=Uf([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?e==="dddd"?(i=ls.call(this._weekdaysParse,s),i!==-1?i:null):e==="ddd"?(i=ls.call(this._shortWeekdaysParse,s),i!==-1?i:null):(i=ls.call(this._minWeekdaysParse,s),i!==-1?i:null):e==="dddd"?(i=ls.call(this._weekdaysParse,s),i!==-1||(i=ls.call(this._shortWeekdaysParse,s),i!==-1)?i:(i=ls.call(this._minWeekdaysParse,s),i!==-1?i:null)):e==="ddd"?(i=ls.call(this._shortWeekdaysParse,s),i!==-1||(i=ls.call(this._weekdaysParse,s),i!==-1)?i:(i=ls.call(this._minWeekdaysParse,s),i!==-1?i:null)):(i=ls.call(this._minWeekdaysParse,s),i!==-1||(i=ls.call(this._weekdaysParse,s),i!==-1)?i:(i=ls.call(this._shortWeekdaysParse,s),i!==-1?i:null))}function EFe(t,e,n){var r,i,o;if(this._weekdaysParseExact)return MFe.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=Uf([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&e==="dddd"&&this._fullWeekdaysParse[r].test(t))return r;if(n&&e==="ddd"&&this._shortWeekdaysParse[r].test(t))return r;if(n&&e==="dd"&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}}function TFe(t){if(!this.isValid())return t!=null?this:NaN;var e=P2(this,"Day");return t!=null?(t=pFe(t,this.localeData()),this.add(t-e,"d")):e}function CFe(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function AFe(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=mFe(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function PFe(t){return this._weekdaysParseExact?(yi(this,"_weekdaysRegex")||Kj.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(yi(this,"_weekdaysRegex")||(this._weekdaysRegex=vFe),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function IFe(t){return this._weekdaysParseExact?(yi(this,"_weekdaysRegex")||Kj.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(yi(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=_Fe),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function kFe(t){return this._weekdaysParseExact?(yi(this,"_weekdaysRegex")||Kj.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(yi(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=xFe),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Kj(){function t(f,p){return p.length-f.length}var e=[],n=[],r=[],i=[],o,s,a,l,d;for(o=0;o<7;o++)s=Uf([2e3,1]).day(o),a=Jp(this.weekdaysMin(s,"")),l=Jp(this.weekdaysShort(s,"")),d=Jp(this.weekdays(s,"")),e.push(a),n.push(l),r.push(d),i.push(a),i.push(l),i.push(d);e.sort(t),n.sort(t),r.sort(t),i.sort(t),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Zj(){return this.hours()%12||12}function RFe(){return this.hours()||24}or("H",["HH",2],0,"hour");or("h",["hh",2],0,Zj);or("k",["kk",2],0,RFe);or("hmm",0,0,function(){return""+Zj.apply(this)+zf(this.minutes(),2)});or("hmmss",0,0,function(){return""+Zj.apply(this)+zf(this.minutes(),2)+zf(this.seconds(),2)});or("Hmm",0,0,function(){return""+this.hours()+zf(this.minutes(),2)});or("Hmmss",0,0,function(){return""+this.hours()+zf(this.minutes(),2)+zf(this.seconds(),2)});function hoe(t,e){or(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}hoe("a",!0);hoe("A",!1);function foe(t,e){return e._meridiemParse}Wn("a",foe);Wn("A",foe);Wn("H",_o,qj);Wn("h",_o,M1);Wn("k",_o,M1);Wn("HH",_o,Su);Wn("hh",_o,Su);Wn("kk",_o,Su);Wn("hmm",toe);Wn("hmmss",noe);Wn("Hmm",toe);Wn("Hmmss",noe);Ki(["H","HH"],Vs);Ki(["k","kk"],function(t,e,n){var r=Zr(t);e[Vs]=r===24?0:r});Ki(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t});Ki(["h","hh"],function(t,e,n){e[Vs]=Zr(t),Fr(n).bigHour=!0});Ki("hmm",function(t,e,n){var r=t.length-2;e[Vs]=Zr(t.substr(0,r)),e[wh]=Zr(t.substr(r)),Fr(n).bigHour=!0});Ki("hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[Vs]=Zr(t.substr(0,r)),e[wh]=Zr(t.substr(r,2)),e[Wp]=Zr(t.substr(i)),Fr(n).bigHour=!0});Ki("Hmm",function(t,e,n){var r=t.length-2;e[Vs]=Zr(t.substr(0,r)),e[wh]=Zr(t.substr(r))});Ki("Hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[Vs]=Zr(t.substr(0,r)),e[wh]=Zr(t.substr(r,2)),e[Wp]=Zr(t.substr(i))});function OFe(t){return(t+"").toLowerCase().charAt(0)==="p"}var LFe=/[ap]\.?m?\.?/i,DFe=E1("Hours",!0);function NFe(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var poe={calendar:Mze,longDateFormat:Aze,invalidDate:Ize,ordinal:Rze,dayOfMonthOrdinalParse:Oze,relativeTime:Dze,months:Zze,monthsShort:ooe,week:cFe,weekdays:gFe,weekdaysMin:yFe,weekdaysShort:doe,meridiemParse:LFe},Mo={},Lw={},R2;function zFe(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n+=1)if(t[n]!==e[n])return n;return r}function XG(t){return t&&t.toLowerCase().replace("_","-")}function FFe(t){for(var e=0,n,r,i,o;e<t.length;){for(o=XG(t[e]).split("-"),n=o.length,r=XG(t[e+1]),r=r?r.split("-"):null;n>0;){if(i=$R(o.slice(0,n).join("-")),i)return i;if(r&&r.length>=n&&zFe(o,r)>=n-1)break;n--}e++}return R2}function BFe(t){return!!(t&&t.match("^[^/\\\\]*$"))}function $R(t){var e=null,n;if(Mo[t]===void 0&&typeof ZA<"u"&&ZA&&ZA.exports&&BFe(t))try{e=R2._abbr,n=require,n("./locale/"+t),ry(e)}catch{Mo[t]=null}return Mo[t]}function ry(t,e){var n;return t&&(fc(e)?n=Em(t):n=Jj(t,e),n?R2=n:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),R2._abbr}function Jj(t,e){if(e!==null){var n,r=poe;if(e.abbr=t,Mo[t]!=null)Zie("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Mo[t]._config;else if(e.parentLocale!=null)if(Mo[e.parentLocale]!=null)r=Mo[e.parentLocale]._config;else if(n=$R(e.parentLocale),n!=null)r=n._config;else return Lw[e.parentLocale]||(Lw[e.parentLocale]=[]),Lw[e.parentLocale].push({name:t,config:e}),null;return Mo[t]=new Uj(kF(r,e)),Lw[t]&&Lw[t].forEach(function(i){Jj(i.name,i.config)}),ry(t),Mo[t]}else return delete Mo[t],null}function $Fe(t,e){if(e!=null){var n,r,i=poe;Mo[t]!=null&&Mo[t].parentLocale!=null?Mo[t].set(kF(Mo[t]._config,e)):(r=$R(t),r!=null&&(i=r._config),e=kF(i,e),r==null&&(e.abbr=t),n=new Uj(e),n.parentLocale=Mo[t],Mo[t]=n),ry(t)}else Mo[t]!=null&&(Mo[t].parentLocale!=null?(Mo[t]=Mo[t].parentLocale,t===ry()&&ry(t)):Mo[t]!=null&&delete Mo[t]);return Mo[t]}function Em(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return R2;if(!Ah(t)){if(e=$R(t),e)return e;t=[t]}return FFe(t)}function jFe(){return RF(Mo)}function Qj(t){var e,n=t._a;return n&&Fr(t).overflow===-2&&(e=n[Vp]<0||n[Vp]>11?Vp:n[vf]<1||n[vf]>Yj(n[vl],n[Vp])?vf:n[Vs]<0||n[Vs]>24||n[Vs]===24&&(n[wh]!==0||n[Wp]!==0||n[Hv]!==0)?Vs:n[wh]<0||n[wh]>59?wh:n[Wp]<0||n[Wp]>59?Wp:n[Hv]<0||n[Hv]>999?Hv:-1,Fr(t)._overflowDayOfYear&&(e<vl||e>vf)&&(e=vf),Fr(t)._overflowWeeks&&e===-1&&(e=Hze),Fr(t)._overflowWeekday&&e===-1&&(e=Gze),Fr(t).overflow=e),t}var UFe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,VFe=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,WFe=/Z|[+-]\d\d(?::?\d\d)?/,eC=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],h3=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],HFe=/^\/?Date\((-?\d+)/i,GFe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,qFe={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function moe(t){var e,n,r=t._i,i=UFe.exec(r)||VFe.exec(r),o,s,a,l,d=eC.length,f=h3.length;if(i){for(Fr(t).iso=!0,e=0,n=d;e<n;e++)if(eC[e][1].exec(i[1])){s=eC[e][0],o=eC[e][2]!==!1;break}if(s==null){t._isValid=!1;return}if(i[3]){for(e=0,n=f;e<n;e++)if(h3[e][1].exec(i[3])){a=(i[2]||" ")+h3[e][0];break}if(a==null){t._isValid=!1;return}}if(!o&&a!=null){t._isValid=!1;return}if(i[4])if(WFe.exec(i[4]))l="Z";else{t._isValid=!1;return}t._f=s+(a||"")+(l||""),tU(t)}else t._isValid=!1}function YFe(t,e,n,r,i,o){var s=[XFe(t),ooe.indexOf(e),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return o&&s.push(parseInt(o,10)),s}function XFe(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function KFe(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function ZFe(t,e,n){if(t){var r=doe.indexOf(t),i=new Date(e[0],e[1],e[2]).getDay();if(r!==i)return Fr(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function JFe(t,e,n){if(t)return qFe[t];if(e)return 0;var r=parseInt(n,10),i=r%100,o=(r-i)/100;return o*60+i}function goe(t){var e=GFe.exec(KFe(t._i)),n;if(e){if(n=YFe(e[4],e[3],e[2],e[5],e[6],e[7]),!ZFe(e[1],n,t))return;t._a=n,t._tzm=JFe(e[8],e[9],e[10]),t._d=I2.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),Fr(t).rfc2822=!0}else t._isValid=!1}function QFe(t){var e=HFe.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(moe(t),t._isValid===!1)delete t._isValid;else return;if(goe(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:kn.createFromInputFallback(t)}kn.createFromInputFallback=Td("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function sx(t,e,n){return t??e??n}function eBe(t){var e=new Date(kn.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function eU(t){var e,n,r=[],i,o,s;if(!t._d){for(i=eBe(t),t._w&&t._a[vf]==null&&t._a[Vp]==null&&tBe(t),t._dayOfYear!=null&&(s=sx(t._a[vl],i[vl]),(t._dayOfYear>zS(s)||t._dayOfYear===0)&&(Fr(t)._overflowDayOfYear=!0),n=I2(s,0,t._dayOfYear),t._a[Vp]=n.getUTCMonth(),t._a[vf]=n.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=r[e]=i[e];for(;e<7;e++)t._a[e]=r[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[Vs]===24&&t._a[wh]===0&&t._a[Wp]===0&&t._a[Hv]===0&&(t._nextDay=!0,t._a[Vs]=0),t._d=(t._useUTC?I2:aFe).apply(null,r),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Vs]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==o&&(Fr(t).weekdayMismatch=!0)}}function tBe(t){var e,n,r,i,o,s,a,l,d;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(o=1,s=4,n=sx(e.GG,t._a[vl],k2(vo(),1,4).year),r=sx(e.W,1),i=sx(e.E,1),(i<1||i>7)&&(l=!0)):(o=t._locale._week.dow,s=t._locale._week.doy,d=k2(vo(),o,s),n=sx(e.gg,t._a[vl],d.year),r=sx(e.w,d.week),e.d!=null?(i=e.d,(i<0||i>6)&&(l=!0)):e.e!=null?(i=e.e+o,(e.e<0||e.e>6)&&(l=!0)):i=o),r<1||r>Qp(n,o,s)?Fr(t)._overflowWeeks=!0:l!=null?Fr(t)._overflowWeekday=!0:(a=uoe(n,r,i,o,s),t._a[vl]=a.year,t._dayOfYear=a.dayOfYear)}kn.ISO_8601=function(){};kn.RFC_2822=function(){};function tU(t){if(t._f===kn.ISO_8601){moe(t);return}if(t._f===kn.RFC_2822){goe(t);return}t._a=[],Fr(t).empty=!0;var e=""+t._i,n,r,i,o,s,a=e.length,l=0,d,f;for(i=Jie(t._f,t._locale).match(Vj)||[],f=i.length,n=0;n<f;n++)o=i[n],r=(e.match(Uze(o,t))||[])[0],r&&(s=e.substr(0,e.indexOf(r)),s.length>0&&Fr(t).unusedInput.push(s),e=e.slice(e.indexOf(r)+r.length),l+=r.length),Jx[o]?(r?Fr(t).empty=!1:Fr(t).unusedTokens.push(o),Wze(o,r,t)):t._strict&&!r&&Fr(t).unusedTokens.push(o);Fr(t).charsLeftOver=a-l,e.length>0&&Fr(t).unusedInput.push(e),t._a[Vs]<=12&&Fr(t).bigHour===!0&&t._a[Vs]>0&&(Fr(t).bigHour=void 0),Fr(t).parsedDateParts=t._a.slice(0),Fr(t).meridiem=t._meridiem,t._a[Vs]=nBe(t._locale,t._a[Vs],t._meridiem),d=Fr(t).era,d!==null&&(t._a[vl]=t._locale.erasConvertYear(d,t._a[vl])),eU(t),Qj(t)}function nBe(t,e,n){var r;return n==null?e:t.meridiemHour!=null?t.meridiemHour(e,n):(t.isPM!=null&&(r=t.isPM(n),r&&e<12&&(e+=12),!r&&e===12&&(e=0)),e)}function rBe(t){var e,n,r,i,o,s,a=!1,l=t._f.length;if(l===0){Fr(t).invalidFormat=!0,t._d=new Date(NaN);return}for(i=0;i<l;i++)o=0,s=!1,e=jj({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[i],tU(e),$j(e)&&(s=!0),o+=Fr(e).charsLeftOver,o+=Fr(e).unusedTokens.length*10,Fr(e).score=o,a?o<r&&(r=o,n=e):(r==null||o<r||s)&&(r=o,n=e,s&&(a=!0));Wg(t,n||e)}function iBe(t){if(!t._d){var e=Wj(t._i),n=e.day===void 0?e.date:e.day;t._a=Xie([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],function(r){return r&&parseInt(r,10)}),eU(t)}}function oBe(t){var e=new vE(Qj(yoe(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function yoe(t){var e=t._i,n=t._f;return t._locale=t._locale||Em(t._l),e===null||n===void 0&&e===""?OR({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),Ph(e)?new vE(Qj(e)):(yE(e)?t._d=e:Ah(n)?rBe(t):n?tU(t):sBe(t),$j(t)||(t._d=null),t))}function sBe(t){var e=t._i;fc(e)?t._d=new Date(kn.now()):yE(e)?t._d=new Date(e.valueOf()):typeof e=="string"?QFe(t):Ah(e)?(t._a=Xie(e.slice(0),function(n){return parseInt(n,10)}),eU(t)):a0(e)?iBe(t):fm(e)?t._d=new Date(e):kn.createFromInputFallback(t)}function voe(t,e,n,r,i){var o={};return(e===!0||e===!1)&&(r=e,e=void 0),(n===!0||n===!1)&&(r=n,n=void 0),(a0(t)&&Bj(t)||Ah(t)&&t.length===0)&&(t=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=n,o._i=t,o._f=e,o._strict=r,oBe(o)}function vo(t,e,n,r){return voe(t,e,n,r,!1)}var aBe=Td("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=vo.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:OR()}),lBe=Td("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=vo.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:OR()});function _oe(t,e){var n,r;if(e.length===1&&Ah(e[0])&&(e=e[0]),!e.length)return vo();for(n=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](n))&&(n=e[r]);return n}function cBe(){var t=[].slice.call(arguments,0);return _oe("isBefore",t)}function uBe(){var t=[].slice.call(arguments,0);return _oe("isAfter",t)}var dBe=function(){return Date.now?Date.now():+new Date},Dw=["year","quarter","month","week","day","hour","minute","second","millisecond"];function hBe(t){var e,n=!1,r,i=Dw.length;for(e in t)if(yi(t,e)&&!(ls.call(Dw,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(r=0;r<i;++r)if(t[Dw[r]]){if(n)return!1;parseFloat(t[Dw[r]])!==Zr(t[Dw[r]])&&(n=!0)}return!0}function fBe(){return this._isValid}function pBe(){return Oh(NaN)}function jR(t){var e=Wj(t),n=e.year||0,r=e.quarter||0,i=e.month||0,o=e.week||e.isoWeek||0,s=e.day||0,a=e.hour||0,l=e.minute||0,d=e.second||0,f=e.millisecond||0;this._isValid=hBe(e),this._milliseconds=+f+d*1e3+l*6e4+a*1e3*60*60,this._days=+s+o*7,this._months=+i+r*3+n*12,this._data={},this._locale=Em(),this._bubble()}function BA(t){return t instanceof jR}function LF(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function mBe(t,e,n){var r=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),o=0,s;for(s=0;s<r;s++)(n&&t[s]!==e[s]||!n&&Zr(t[s])!==Zr(e[s]))&&o++;return o+i}function xoe(t,e){or(t,0,0,function(){var n=this.utcOffset(),r="+";return n<0&&(n=-n,r="-"),r+zf(~~(n/60),2)+e+zf(~~n%60,2)})}xoe("Z",":");xoe("ZZ","");Wn("Z",FR);Wn("ZZ",FR);Ki(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=nU(FR,t)});var gBe=/([\+\-]|\d\d)/gi;function nU(t,e){var n=(e||"").match(t),r,i,o;return n===null?null:(r=n[n.length-1]||[],i=(r+"").match(gBe)||["-",0,0],o=+(i[1]*60)+Zr(i[2]),o===0?0:i[0]==="+"?o:-o)}function rU(t,e){var n,r;return e._isUTC?(n=e.clone(),r=(Ph(t)||yE(t)?t.valueOf():vo(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),kn.updateOffset(n,!1),n):vo(t).local()}function DF(t){return-Math.round(t._d.getTimezoneOffset())}kn.updateOffset=function(){};function yBe(t,e,n){var r=this._offset||0,i;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=nU(FR,t),t===null)return this}else Math.abs(t)<16&&!n&&(t=t*60);return!this._isUTC&&e&&(i=DF(this)),this._offset=t,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==t&&(!e||this._changeInProgress?Soe(this,Oh(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,kn.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:DF(this)}function vBe(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function _Be(t){return this.utcOffset(0,t)}function xBe(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(DF(this),"m")),this}function bBe(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=nU($ze,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function wBe(t){return this.isValid()?(t=t?vo(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function SBe(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function MBe(){if(!fc(this._isDSTShifted))return this._isDSTShifted;var t={},e;return jj(t,this),t=yoe(t),t._a?(e=t._isUTC?Uf(t._a):vo(t._a),this._isDSTShifted=this.isValid()&&mBe(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function EBe(){return this.isValid()?!this._isUTC:!1}function TBe(){return this.isValid()?this._isUTC:!1}function boe(){return this.isValid()?this._isUTC&&this._offset===0:!1}var CBe=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,ABe=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Oh(t,e){var n=t,r=null,i,o,s;return BA(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:fm(t)||!isNaN(+t)?(n={},e?n[e]=+t:n.milliseconds=+t):(r=CBe.exec(t))?(i=r[1]==="-"?-1:1,n={y:0,d:Zr(r[vf])*i,h:Zr(r[Vs])*i,m:Zr(r[wh])*i,s:Zr(r[Wp])*i,ms:Zr(LF(r[Hv]*1e3))*i}):(r=ABe.exec(t))?(i=r[1]==="-"?-1:1,n={y:av(r[2],i),M:av(r[3],i),w:av(r[4],i),d:av(r[5],i),h:av(r[6],i),m:av(r[7],i),s:av(r[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(s=PBe(vo(n.from),vo(n.to)),n={},n.ms=s.milliseconds,n.M=s.months),o=new jR(n),BA(t)&&yi(t,"_locale")&&(o._locale=t._locale),BA(t)&&yi(t,"_isValid")&&(o._isValid=t._isValid),o}Oh.fn=jR.prototype;Oh.invalid=pBe;function av(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function KG(t,e){var n={};return n.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function PBe(t,e){var n;return t.isValid()&&e.isValid()?(e=rU(e,t),t.isBefore(e)?n=KG(t,e):(n=KG(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function woe(t,e){return function(n,r){var i,o;return r!==null&&!isNaN(+r)&&(Zie(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=r,r=o),i=Oh(n,r),Soe(this,i,t),this}}function Soe(t,e,n,r){var i=e._milliseconds,o=LF(e._days),s=LF(e._months);t.isValid()&&(r=r??!0,s&&aoe(t,P2(t,"Month")+s*n),o&&ioe(t,"Date",P2(t,"Date")+o*n),i&&t._d.setTime(t._d.valueOf()+i*n),r&&kn.updateOffset(t,o||s))}var IBe=woe(1,"add"),kBe=woe(-1,"subtract");function Moe(t){return typeof t=="string"||t instanceof String}function RBe(t){return Ph(t)||yE(t)||Moe(t)||fm(t)||LBe(t)||OBe(t)||t===null||t===void 0}function OBe(t){var e=a0(t)&&!Bj(t),n=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,o,s=r.length;for(i=0;i<s;i+=1)o=r[i],n=n||yi(t,o);return e&&n}function LBe(t){var e=Ah(t),n=!1;return e&&(n=t.filter(function(r){return!fm(r)&&Moe(t)}).length===0),e&&n}function DBe(t){var e=a0(t)&&!Bj(t),n=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,o;for(i=0;i<r.length;i+=1)o=r[i],n=n||yi(t,o);return e&&n}function NBe(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function zBe(t,e){arguments.length===1&&(arguments[0]?RBe(arguments[0])?(t=arguments[0],e=void 0):DBe(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||vo(),r=rU(n,this).startOf("day"),i=kn.calendarFormat(this,r)||"sameElse",o=e&&(Vf(e[i])?e[i].call(this,n):e[i]);return this.format(o||this.localeData().calendar(i,this,vo(n)))}function FBe(){return new vE(this)}function BBe(t,e){var n=Ph(t)?t:vo(t);return this.isValid()&&n.isValid()?(e=Cd(e)||"millisecond",e==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf()):!1}function $Be(t,e){var n=Ph(t)?t:vo(t);return this.isValid()&&n.isValid()?(e=Cd(e)||"millisecond",e==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf()):!1}function jBe(t,e,n,r){var i=Ph(t)?t:vo(t),o=Ph(e)?e:vo(e);return this.isValid()&&i.isValid()&&o.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(i,n):!this.isBefore(i,n))&&(r[1]===")"?this.isBefore(o,n):!this.isAfter(o,n))):!1}function UBe(t,e){var n=Ph(t)?t:vo(t),r;return this.isValid()&&n.isValid()?(e=Cd(e)||"millisecond",e==="millisecond"?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(e).valueOf()<=r&&r<=this.clone().endOf(e).valueOf())):!1}function VBe(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function WBe(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function HBe(t,e,n){var r,i,o;if(!this.isValid())return NaN;if(r=rU(t,this),!r.isValid())return NaN;switch(i=(r.utcOffset()-this.utcOffset())*6e4,e=Cd(e),e){case"year":o=$A(this,r)/12;break;case"month":o=$A(this,r);break;case"quarter":o=$A(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:ad(o)}function $A(t,e){if(t.date()<e.date())return-$A(e,t);var n=(e.year()-t.year())*12+(e.month()-t.month()),r=t.clone().add(n,"months"),i,o;return e-r<0?(i=t.clone().add(n-1,"months"),o=(e-r)/(r-i)):(i=t.clone().add(n+1,"months"),o=(e-r)/(i-r)),-(n+o)||0}kn.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";kn.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function GBe(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function qBe(t){if(!this.isValid())return null;var e=t!==!0,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?FA(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Vf(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",FA(n,"Z")):FA(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function YBe(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",n,r,i,o;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),n="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",o=e+'[")]',this.format(n+r+i+o)}function XBe(t){t||(t=this.isUtc()?kn.defaultFormatUtc:kn.defaultFormat);var e=FA(this,t);return this.localeData().postformat(e)}function KBe(t,e){return this.isValid()&&(Ph(t)&&t.isValid()||vo(t).isValid())?Oh({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ZBe(t){return this.from(vo(),t)}function JBe(t,e){return this.isValid()&&(Ph(t)&&t.isValid()||vo(t).isValid())?Oh({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function QBe(t){return this.to(vo(),t)}function Eoe(t){var e;return t===void 0?this._locale._abbr:(e=Em(t),e!=null&&(this._locale=e),this)}var Toe=Td("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function Coe(){return this._locale}var JP=1e3,Qx=60*JP,QP=60*Qx,Aoe=(365*400+97)*24*QP;function eb(t,e){return(t%e+e)%e}function Poe(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-Aoe:new Date(t,e,n).valueOf()}function Ioe(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-Aoe:Date.UTC(t,e,n)}function e4e(t){var e,n;if(t=Cd(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Ioe:Poe,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=eb(e+(this._isUTC?0:this.utcOffset()*Qx),QP);break;case"minute":e=this._d.valueOf(),e-=eb(e,Qx);break;case"second":e=this._d.valueOf(),e-=eb(e,JP);break}return this._d.setTime(e),kn.updateOffset(this,!0),this}function t4e(t){var e,n;if(t=Cd(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?Ioe:Poe,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=QP-eb(e+(this._isUTC?0:this.utcOffset()*Qx),QP)-1;break;case"minute":e=this._d.valueOf(),e+=Qx-eb(e,Qx)-1;break;case"second":e=this._d.valueOf(),e+=JP-eb(e,JP)-1;break}return this._d.setTime(e),kn.updateOffset(this,!0),this}function n4e(){return this._d.valueOf()-(this._offset||0)*6e4}function r4e(){return Math.floor(this.valueOf()/1e3)}function i4e(){return new Date(this.valueOf())}function o4e(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function s4e(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function a4e(){return this.isValid()?this.toISOString():null}function l4e(){return $j(this)}function c4e(){return Wg({},Fr(this))}function u4e(){return Fr(this).overflow}function d4e(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}or("N",0,0,"eraAbbr");or("NN",0,0,"eraAbbr");or("NNN",0,0,"eraAbbr");or("NNNN",0,0,"eraName");or("NNNNN",0,0,"eraNarrow");or("y",["y",1],"yo","eraYear");or("y",["yy",2],0,"eraYear");or("y",["yyy",3],0,"eraYear");or("y",["yyyy",4],0,"eraYear");Wn("N",iU);Wn("NN",iU);Wn("NNN",iU);Wn("NNNN",w4e);Wn("NNNNN",S4e);Ki(["N","NN","NNN","NNNN","NNNNN"],function(t,e,n,r){var i=n._locale.erasParse(t,r,n._strict);i?Fr(n).era=i:Fr(n).invalidEra=t});Wn("y",S1);Wn("yy",S1);Wn("yyy",S1);Wn("yyyy",S1);Wn("yo",M4e);Ki(["y","yy","yyy","yyyy"],vl);Ki(["yo"],function(t,e,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[vl]=n._locale.eraYearOrdinalParse(t,i):e[vl]=parseInt(t,10)});function h4e(t,e){var n,r,i,o=this._eras||Em("en")._eras;for(n=0,r=o.length;n<r;++n){switch(typeof o[n].since){case"string":i=kn(o[n].since).startOf("day"),o[n].since=i.valueOf();break}switch(typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":i=kn(o[n].until).startOf("day").valueOf(),o[n].until=i.valueOf();break}}return o}function f4e(t,e,n){var r,i,o=this.eras(),s,a,l;for(t=t.toUpperCase(),r=0,i=o.length;r<i;++r)if(s=o[r].name.toUpperCase(),a=o[r].abbr.toUpperCase(),l=o[r].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(a===t)return o[r];break;case"NNNN":if(s===t)return o[r];break;case"NNNNN":if(l===t)return o[r];break}else if([s,a,l].indexOf(t)>=0)return o[r]}function p4e(t,e){var n=t.since<=t.until?1:-1;return e===void 0?kn(t.since).year():kn(t.since).year()+(e-t.offset)*n}function m4e(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].name;return""}function g4e(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].narrow;return""}function y4e(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].abbr;return""}function v4e(){var t,e,n,r,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=i[t].since<=i[t].until?1:-1,r=this.clone().startOf("day").valueOf(),i[t].since<=r&&r<=i[t].until||i[t].until<=r&&r<=i[t].since)return(this.year()-kn(i[t].since).year())*n+i[t].offset;return this.year()}function _4e(t){return yi(this,"_erasNameRegex")||oU.call(this),t?this._erasNameRegex:this._erasRegex}function x4e(t){return yi(this,"_erasAbbrRegex")||oU.call(this),t?this._erasAbbrRegex:this._erasRegex}function b4e(t){return yi(this,"_erasNarrowRegex")||oU.call(this),t?this._erasNarrowRegex:this._erasRegex}function iU(t,e){return e.erasAbbrRegex(t)}function w4e(t,e){return e.erasNameRegex(t)}function S4e(t,e){return e.erasNarrowRegex(t)}function M4e(t,e){return e._eraYearOrdinalRegex||S1}function oU(){var t=[],e=[],n=[],r=[],i,o,s,a,l,d=this.eras();for(i=0,o=d.length;i<o;++i)s=Jp(d[i].name),a=Jp(d[i].abbr),l=Jp(d[i].narrow),e.push(s),t.push(a),n.push(l),r.push(s),r.push(a),r.push(l);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}or(0,["gg",2],0,function(){return this.weekYear()%100});or(0,["GG",2],0,function(){return this.isoWeekYear()%100});function UR(t,e){or(0,[t,t.length],0,e)}UR("gggg","weekYear");UR("ggggg","weekYear");UR("GGGG","isoWeekYear");UR("GGGGG","isoWeekYear");Wn("G",zR);Wn("g",zR);Wn("GG",_o,Su);Wn("gg",_o,Su);Wn("GGGG",Gj,Hj);Wn("gggg",Gj,Hj);Wn("GGGGG",NR,LR);Wn("ggggg",NR,LR);xE(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,r){e[r.substr(0,2)]=Zr(t)});xE(["gg","GG"],function(t,e,n,r){e[r]=kn.parseTwoDigitYear(t)});function E4e(t){return koe.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function T4e(t){return koe.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function C4e(){return Qp(this.year(),1,4)}function A4e(){return Qp(this.isoWeekYear(),1,4)}function P4e(){var t=this.localeData()._week;return Qp(this.year(),t.dow,t.doy)}function I4e(){var t=this.localeData()._week;return Qp(this.weekYear(),t.dow,t.doy)}function koe(t,e,n,r,i){var o;return t==null?k2(this,r,i).year:(o=Qp(t,r,i),e>o&&(e=o),k4e.call(this,t,e,n,r,i))}function k4e(t,e,n,r,i){var o=uoe(t,e,n,r,i),s=I2(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}or("Q",0,"Qo","quarter");Wn("Q",Qie);Ki("Q",function(t,e){e[Vp]=(Zr(t)-1)*3});function R4e(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}or("D",["DD",2],"Do","date");Wn("D",_o,M1);Wn("DD",_o,Su);Wn("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Ki(["D","DD"],vf);Ki("Do",function(t,e){e[vf]=Zr(t.match(_o)[0])});var Roe=E1("Date",!0);or("DDD",["DDDD",3],"DDDo","dayOfYear");Wn("DDD",DR);Wn("DDDD",eoe);Ki(["DDD","DDDD"],function(t,e,n){n._dayOfYear=Zr(t)});function O4e(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}or("m",["mm",2],0,"minute");Wn("m",_o,qj);Wn("mm",_o,Su);Ki(["m","mm"],wh);var L4e=E1("Minutes",!1);or("s",["ss",2],0,"second");Wn("s",_o,qj);Wn("ss",_o,Su);Ki(["s","ss"],Wp);var D4e=E1("Seconds",!1);or("S",0,0,function(){return~~(this.millisecond()/100)});or(0,["SS",2],0,function(){return~~(this.millisecond()/10)});or(0,["SSS",3],0,"millisecond");or(0,["SSSS",4],0,function(){return this.millisecond()*10});or(0,["SSSSS",5],0,function(){return this.millisecond()*100});or(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});or(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});or(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});or(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Wn("S",DR,Qie);Wn("SS",DR,Su);Wn("SSS",DR,eoe);var Hg,Ooe;for(Hg="SSSS";Hg.length<=9;Hg+="S")Wn(Hg,S1);function N4e(t,e){e[Hv]=Zr(("0."+t)*1e3)}for(Hg="S";Hg.length<=9;Hg+="S")Ki(Hg,N4e);Ooe=E1("Milliseconds",!1);or("z",0,0,"zoneAbbr");or("zz",0,0,"zoneName");function z4e(){return this._isUTC?"UTC":""}function F4e(){return this._isUTC?"Coordinated Universal Time":""}var fn=vE.prototype;fn.add=IBe;fn.calendar=zBe;fn.clone=FBe;fn.diff=HBe;fn.endOf=t4e;fn.format=XBe;fn.from=KBe;fn.fromNow=ZBe;fn.to=JBe;fn.toNow=QBe;fn.get=Yze;fn.invalidAt=u4e;fn.isAfter=BBe;fn.isBefore=$Be;fn.isBetween=jBe;fn.isSame=UBe;fn.isSameOrAfter=VBe;fn.isSameOrBefore=WBe;fn.isValid=l4e;fn.lang=Toe;fn.locale=Eoe;fn.localeData=Coe;fn.max=lBe;fn.min=aBe;fn.parsingFlags=c4e;fn.set=Xze;fn.startOf=e4e;fn.subtract=kBe;fn.toArray=o4e;fn.toObject=s4e;fn.toDate=i4e;fn.toISOString=qBe;fn.inspect=YBe;typeof Symbol<"u"&&Symbol.for!=null&&(fn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});fn.toJSON=a4e;fn.toString=GBe;fn.unix=r4e;fn.valueOf=n4e;fn.creationData=d4e;fn.eraName=m4e;fn.eraNarrow=g4e;fn.eraAbbr=y4e;fn.eraYear=v4e;fn.year=roe;fn.isLeapYear=qze;fn.weekYear=E4e;fn.isoWeekYear=T4e;fn.quarter=fn.quarters=R4e;fn.month=loe;fn.daysInMonth=iFe;fn.week=fn.weeks=hFe;fn.isoWeek=fn.isoWeeks=fFe;fn.weeksInYear=P4e;fn.weeksInWeekYear=I4e;fn.isoWeeksInYear=C4e;fn.isoWeeksInISOWeekYear=A4e;fn.date=Roe;fn.day=fn.days=TFe;fn.weekday=CFe;fn.isoWeekday=AFe;fn.dayOfYear=O4e;fn.hour=fn.hours=DFe;fn.minute=fn.minutes=L4e;fn.second=fn.seconds=D4e;fn.millisecond=fn.milliseconds=Ooe;fn.utcOffset=yBe;fn.utc=_Be;fn.local=xBe;fn.parseZone=bBe;fn.hasAlignedHourOffset=wBe;fn.isDST=SBe;fn.isLocal=EBe;fn.isUtcOffset=TBe;fn.isUtc=boe;fn.isUTC=boe;fn.zoneAbbr=z4e;fn.zoneName=F4e;fn.dates=Td("dates accessor is deprecated. Use date instead.",Roe);fn.months=Td("months accessor is deprecated. Use month instead",loe);fn.years=Td("years accessor is deprecated. Use year instead",roe);fn.zone=Td("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",vBe);fn.isDSTShifted=Td("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",MBe);function B4e(t){return vo(t*1e3)}function $4e(){return vo.apply(null,arguments).parseZone()}function Loe(t){return t}var wi=Uj.prototype;wi.calendar=Eze;wi.longDateFormat=Pze;wi.invalidDate=kze;wi.ordinal=Lze;wi.preparse=Loe;wi.postformat=Loe;wi.relativeTime=Nze;wi.pastFuture=zze;wi.set=Sze;wi.eras=h4e;wi.erasParse=f4e;wi.erasConvertYear=p4e;wi.erasAbbrRegex=x4e;wi.erasNameRegex=_4e;wi.erasNarrowRegex=b4e;wi.months=eFe;wi.monthsShort=tFe;wi.monthsParse=rFe;wi.monthsRegex=sFe;wi.monthsShortRegex=oFe;wi.week=lFe;wi.firstDayOfYear=dFe;wi.firstDayOfWeek=uFe;wi.weekdays=bFe;wi.weekdaysMin=SFe;wi.weekdaysShort=wFe;wi.weekdaysParse=EFe;wi.weekdaysRegex=PFe;wi.weekdaysShortRegex=IFe;wi.weekdaysMinRegex=kFe;wi.isPM=OFe;wi.meridiem=NFe;function eI(t,e,n,r){var i=Em(),o=Uf().set(r,e);return i[n](o,t)}function Doe(t,e,n){if(fm(t)&&(e=t,t=void 0),t=t||"",e!=null)return eI(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=eI(t,r,n,"month");return i}function sU(t,e,n,r){typeof t=="boolean"?(fm(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,fm(e)&&(n=e,e=void 0),e=e||"");var i=Em(),o=t?i._week.dow:0,s,a=[];if(n!=null)return eI(e,(n+o)%7,r,"day");for(s=0;s<7;s++)a[s]=eI(e,(s+o)%7,r,"day");return a}function j4e(t,e){return Doe(t,e,"months")}function U4e(t,e){return Doe(t,e,"monthsShort")}function V4e(t,e,n){return sU(t,e,n,"weekdays")}function W4e(t,e,n){return sU(t,e,n,"weekdaysShort")}function H4e(t,e,n){return sU(t,e,n,"weekdaysMin")}ry("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=Zr(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+n}});kn.lang=Td("moment.lang is deprecated. Use moment.locale instead.",ry);kn.langData=Td("moment.langData is deprecated. Use moment.localeData instead.",Em);var Ep=Math.abs;function G4e(){var t=this._data;return this._milliseconds=Ep(this._milliseconds),this._days=Ep(this._days),this._months=Ep(this._months),t.milliseconds=Ep(t.milliseconds),t.seconds=Ep(t.seconds),t.minutes=Ep(t.minutes),t.hours=Ep(t.hours),t.months=Ep(t.months),t.years=Ep(t.years),this}function Noe(t,e,n,r){var i=Oh(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function q4e(t,e){return Noe(this,t,e,1)}function Y4e(t,e){return Noe(this,t,e,-1)}function ZG(t){return t<0?Math.floor(t):Math.ceil(t)}function X4e(){var t=this._milliseconds,e=this._days,n=this._months,r=this._data,i,o,s,a,l;return t>=0&&e>=0&&n>=0||t<=0&&e<=0&&n<=0||(t+=ZG(NF(n)+e)*864e5,e=0,n=0),r.milliseconds=t%1e3,i=ad(t/1e3),r.seconds=i%60,o=ad(i/60),r.minutes=o%60,s=ad(o/60),r.hours=s%24,e+=ad(s/24),l=ad(zoe(e)),n+=l,e-=ZG(NF(l)),a=ad(n/12),n%=12,r.days=e,r.months=n,r.years=a,this}function zoe(t){return t*4800/146097}function NF(t){return t*146097/4800}function K4e(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if(t=Cd(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+r/864e5,n=this._months+zoe(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(NF(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return e*24+r/36e5;case"minute":return e*1440+r/6e4;case"second":return e*86400+r/1e3;case"millisecond":return Math.floor(e*864e5)+r;default:throw new Error("Unknown unit "+t)}}function Tm(t){return function(){return this.as(t)}}var Foe=Tm("ms"),Z4e=Tm("s"),J4e=Tm("m"),Q4e=Tm("h"),e5e=Tm("d"),t5e=Tm("w"),n5e=Tm("M"),r5e=Tm("Q"),i5e=Tm("y"),o5e=Foe;function s5e(){return Oh(this)}function a5e(t){return t=Cd(t),this.isValid()?this[t+"s"]():NaN}function $0(t){return function(){return this.isValid()?this._data[t]:NaN}}var l5e=$0("milliseconds"),c5e=$0("seconds"),u5e=$0("minutes"),d5e=$0("hours"),h5e=$0("days"),f5e=$0("months"),p5e=$0("years");function m5e(){return ad(this.days()/7)}var Lp=Math.round,Ix={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function g5e(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}function y5e(t,e,n,r){var i=Oh(t).abs(),o=Lp(i.as("s")),s=Lp(i.as("m")),a=Lp(i.as("h")),l=Lp(i.as("d")),d=Lp(i.as("M")),f=Lp(i.as("w")),p=Lp(i.as("y")),g=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||s<=1&&["m"]||s<n.m&&["mm",s]||a<=1&&["h"]||a<n.h&&["hh",a]||l<=1&&["d"]||l<n.d&&["dd",l];return n.w!=null&&(g=g||f<=1&&["w"]||f<n.w&&["ww",f]),g=g||d<=1&&["M"]||d<n.M&&["MM",d]||p<=1&&["y"]||["yy",p],g[2]=e,g[3]=+t>0,g[4]=r,g5e.apply(null,g)}function v5e(t){return t===void 0?Lp:typeof t=="function"?(Lp=t,!0):!1}function _5e(t,e){return Ix[t]===void 0?!1:e===void 0?Ix[t]:(Ix[t]=e,t==="s"&&(Ix.ss=e-1),!0)}function x5e(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,r=Ix,i,o;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(n=t),typeof e=="object"&&(r=Object.assign({},Ix,e),e.s!=null&&e.ss==null&&(r.ss=e.s-1)),i=this.localeData(),o=y5e(this,!n,r,i),n&&(o=i.pastFuture(+this,o)),i.postformat(o)}var f3=Math.abs;function k_(t){return(t>0)-(t<0)||+t}function VR(){if(!this.isValid())return this.localeData().invalidDate();var t=f3(this._milliseconds)/1e3,e=f3(this._days),n=f3(this._months),r,i,o,s,a=this.asSeconds(),l,d,f,p;return a?(r=ad(t/60),i=ad(r/60),t%=60,r%=60,o=ad(n/12),n%=12,s=t?t.toFixed(3).replace(/\.?0+$/,""):"",l=a<0?"-":"",d=k_(this._months)!==k_(a)?"-":"",f=k_(this._days)!==k_(a)?"-":"",p=k_(this._milliseconds)!==k_(a)?"-":"",l+"P"+(o?d+o+"Y":"")+(n?d+n+"M":"")+(e?f+e+"D":"")+(i||r||t?"T":"")+(i?p+i+"H":"")+(r?p+r+"M":"")+(t?p+s+"S":"")):"P0D"}var ai=jR.prototype;ai.isValid=fBe;ai.abs=G4e;ai.add=q4e;ai.subtract=Y4e;ai.as=K4e;ai.asMilliseconds=Foe;ai.asSeconds=Z4e;ai.asMinutes=J4e;ai.asHours=Q4e;ai.asDays=e5e;ai.asWeeks=t5e;ai.asMonths=n5e;ai.asQuarters=r5e;ai.asYears=i5e;ai.valueOf=o5e;ai._bubble=X4e;ai.clone=s5e;ai.get=a5e;ai.milliseconds=l5e;ai.seconds=c5e;ai.minutes=u5e;ai.hours=d5e;ai.days=h5e;ai.weeks=m5e;ai.months=f5e;ai.years=p5e;ai.humanize=x5e;ai.toISOString=VR;ai.toString=VR;ai.toJSON=VR;ai.locale=Eoe;ai.localeData=Coe;ai.toIsoString=Td("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",VR);ai.lang=Toe;or("X",0,0,"unix");or("x",0,0,"valueOf");Wn("x",zR);Wn("X",jze);Ki("X",function(t,e,n){n._d=new Date(parseFloat(t)*1e3)});Ki("x",function(t,e,n){n._d=new Date(Zr(t))});//! moment.js
kn.version="2.30.1";bze(vo);kn.fn=fn;kn.min=cBe;kn.max=uBe;kn.now=dBe;kn.utc=Uf;kn.unix=B4e;kn.months=j4e;kn.isDate=yE;kn.locale=ry;kn.invalid=OR;kn.duration=Oh;kn.isMoment=Ph;kn.weekdays=V4e;kn.parseZone=$4e;kn.localeData=Em;kn.isDuration=BA;kn.monthsShort=U4e;kn.weekdaysMin=H4e;kn.defineLocale=Jj;kn.updateLocale=$Fe;kn.locales=jFe;kn.weekdaysShort=W4e;kn.normalizeUnits=Cd;kn.relativeTimeRounding=v5e;kn.relativeTimeThreshold=_5e;kn.calendarFormat=NBe;kn.prototype=fn;kn.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const b5e=t=>{switch(t){case"kmh":return 1.852;case"mph":return 1.15078;case"kn":default:return 1}},w5e=t=>{switch(t){case"kmh":return"Km/h";case"mph":return"sharedMph";case"kn":default:return"Km/h"}},S5e=(t,e)=>t*b5e(e),M5e=t=>{switch(t){case"mi":return 621371e-9;case"nmi":return 539957e-9;case"km":default:return .001}},E5e=t=>{switch(t){case"mi":return"Mi";case"nmi":return"Nmi";case"km":default:return"Km"}},T5e=(t,e)=>t*M5e(e),C5e=t=>{switch(t){case"ft":return 3.28084;case"m":default:return 1}},A5e=t=>{switch(t){case"ft":return"sharedFeet";case"m":default:return"sharedMeters"}},P5e=(t,e)=>t*C5e(e),Boe=(t,e)=>t+e.charAt(0).toUpperCase()+e.slice(1),$oe=t=>t?"sharedYes":"sharedNo",I5e=(t,e=1)=>Number(t.toFixed(e)),joe=t=>`${t}%`,Uoe=(t,e,n)=>{if(t){const r=kn(t);switch(e){case"date":return r.format("YYYY-MM-DD");case"time":return r.format(n?"hh:mm:ss A":"HH:mm:ss");case"minutes":return r.format(n?"YYYY-MM-DD hh:mm A":"YYYY-MM-DD HH:mm");default:return r.format(n?"YYYY-MM-DD hh:mm:ss A":"YYYY-MM-DD HH:mm:ss")}}return""},Voe=t=>t?Boe("alarm_",t):"",k5e=t=>{const e=["","","","","","","",""];let n=(t+22.5)%360;return n<0&&(n+=360),t.toFixed()+e[Math.floor(n/45)]},R5e=(t,e,n)=>`${T5e(t,e).toFixed(2)} ${E5e(e)}`,O5e=(t,e,n)=>`${P5e(t,e).toFixed(2)} ${A5e(e)}`,L5e=(t,e,n)=>`${S5e(t,e).toFixed(2)} ${w5e(e)}`,D5e=(t,e)=>{const n=Math.floor(t/36e5),r=Math.floor(t%36e5/6e4);return`${n} ${e("sharedHourAbbreviation")} ${r} ${e("sharedMinuteAbbreviation")}`},JG=(t,e,n)=>{let r,i,o,s;switch(t==="latitude"?r=e>=0?"N":"S":r=e>=0?"E":"W",n){case"ddm":return e=Math.abs(e),i=Math.floor(e),o=(e-i)*60,`${i} ${o.toFixed(6)}' ${r}`;case"dms":return e=Math.abs(e),i=Math.floor(e),o=Math.floor((e-i)*60),s=Math.round((e-i-o/60)*3600),`${i} ${o}' ${s}" ${r}`;default:return`${e.toFixed(6)}`}},Woe=t=>{switch(t){case"online":return"positive";case"offline":return"negative";case"unknown":default:return"neutral"}},QG="data:image/svg+xml,%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%3e%3ctitle%3eEngine%3c/title%3e%3cpath%20fill='currentColor'%20d='M13.778%206.667v2.222h3.333v2.222h2.222v-2.222h3.333v-2.222h-8.889zM13.778%2013.333c-0.3%200-0.579%200.121-0.79%200.321l-1.888%201.901h-2.878c-0.611%200-1.111%200.5-1.111%201.111v6.667c0%200.611%200.5%201.111%201.111%201.111h1.888l3.056%202.033c0.178%200.122%200.39%200.189%200.612%200.189h5.556c0.244%200%200.477-0.077%200.666-0.221l4.444-3.333c0.278-0.211%200.445-0.545%200.445-0.89v-7.778c0-0.611-0.5-1.111-1.111-1.111h-10zM27.111%2014.444v6.667h2.222v-6.667h-2.222zM17.111%2015.556v3.333h2.222l-3.333%205.556v-3.333h-2.222l3.333-5.556zM2.667%2016.667v5.556h2.222v-5.556h-2.222z'%3e%3c/path%3e%3c/svg%3e",N5e=si(t=>({icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},batteryText:{fontSize:"0.75rem",fontWeight:"normal",lineHeight:"0.875rem"},positive:{color:t.palette.colors.positive},medium:{color:t.palette.colors.medium},negative:{color:t.palette.colors.negative},neutral:{color:t.palette.colors.neutral}})),z5e={width:"25px",height:"25px",filter:"brightness(0) invert(1)"},p3={color:gh[500]},e7={color:J5[700]},m3={color:Np[500]},F5e={color:Ef[500]},B5e=({data:t,index:e,style:n})=>{const r=N5e(),i=Yl(),o=t[e],s=pr(d=>d.data.positions[o.id]),a=o.name,l=()=>{let d;return o.status==="online"||!o.lastUpdate?d=o.status:d=kn(o.lastUpdate).fromNow(),F.jsxs(Ze.Fragment,{children:[s&&s.attributes.hasOwnProperty("landed_state")&&F.jsx(Bn,{component:"span",sx:{display:"block",fontSize:10},children:s.attributes.landed_state}),F.jsx(Bn,{component:"span",style:{fontSize:12},className:r[Woe(o.status)],children:d})]})};return F.jsx("div",{style:n,children:F.jsxs(yPe,{onClick:()=>i(eu.selectId(o.id)),disabled:o.disabled,children:[F.jsx(SPe,{children:F.jsx(fEe,{children:F.jsx("img",{style:z5e,src:g2[PP(o.category)],alt:""})})}),F.jsx(kPe,{primary:a,primaryTypographyProps:{noWrap:!0},secondary:l(),secondaryTypographyProps:{noWrap:!0}}),s&&F.jsxs(F.Fragment,{children:[s.attributes.hasOwnProperty("ignition")&&F.jsx(Dg,{title:`positionIgnition: ${$oe(s.attributes.ignition)}`,children:F.jsx(br,{size:"small",children:s.attributes.ignition?F.jsx(QG,{width:20,height:20,style:p3}):F.jsx(QG,{width:20,height:20,style:F5e})})}),s.hasOwnProperty("speed")&&F.jsx(Dg,{title:`speed: ${s.speed}`,children:F.jsx(br,{size:"small",children:F.jsxs("div",{style:{fontSize:"0.9rem"},children:[" V ",Math.round(s.speed),"m/s"]})})}),s.hasOwnProperty("altitude")&&F.jsx(Dg,{title:`altitude: ${Math.round(s.altitude)}`,children:F.jsx(br,{size:"small",children:F.jsxs("div",{style:{fontSize:"0.9rem"},children:["H ",Math.round(s.altitude),"m"]})})}),s.attributes.hasOwnProperty("batteryLevel")&&F.jsx(Dg,{title:`BatteryLevel: ${joe(s.attributes.batteryLevel)}`,children:F.jsx(br,{size:"small",children:s.attributes.batteryLevel>70?s.attributes.charge?F.jsx(Fie,{fontSize:"small",style:p3}):F.jsx(zie,{fontSize:"small",style:p3}):s.attributes.batteryLevel>30?s.attributes.charge?F.jsx(jie,{fontSize:"small",style:e7}):F.jsx(Bie,{fontSize:"small",style:e7}):s.attributes.charge?F.jsx(Hie,{fontSize:"small",style:m3}):F.jsx(Vie,{fontSize:"small",style:m3})})}),s.attributes.hasOwnProperty("alarm")&&s.attributes.alarm=="threat"&&F.jsx(Dg,{title:`eventAlarm: ${Voe(s.attributes.alarm)}`,children:F.jsx(br,{size:"small",children:F.jsx(qie,{fontSize:"small",style:m3})})})]})]},o.id)})},$5e=si(t=>({list:{maxHeight:"100%"},listInner:{position:"relative",margin:t.spacing(1.5,0)}})),Hoe=({devices:t})=>{const e=$5e(),n=Yl(),r=W.useRef(null);r.current&&(r.current.className=e.listInner);const[,i]=W.useState(Date.now());return W.useEffect(()=>{const o=setInterval(()=>i(Date.now()),6e4);return()=>{clearInterval(o)}},[]),f1(async()=>{const o=await fetch("/api/devices");if(o.ok)n(eu.refresh(await o.json()));else throw Error(await o.text())},[]),F.jsx(XNe,{className:e.list,children:({height:o,width:s})=>F.jsx(qNe,{width:s,height:o,itemCount:t.length,itemData:t,itemSize:72,overscanCount:10,innerRef:r,children:B5e})})};var aU={exports:{}},Goe={};function qoe(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=qoe(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function t7(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=qoe(t))&&(r&&(r+=" "),r+=e);return r}const j5e=Object.freeze(Object.defineProperty({__proto__:null,clsx:t7,default:t7},Symbol.toStringTag,{value:"Module"})),U5e=Bf(j5e);var Ko={},Wf={};Object.defineProperty(Wf,"__esModule",{value:!0});Wf.dontSetMe=q5e;Wf.findInArray=V5e;Wf.int=G5e;Wf.isFunction=W5e;Wf.isNum=H5e;function V5e(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function W5e(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function H5e(t){return typeof t=="number"&&!isNaN(t)}function G5e(t){return parseInt(t,10)}function q5e(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))}var j0={};Object.defineProperty(j0,"__esModule",{value:!0});j0.browserPrefixToKey=Xoe;j0.browserPrefixToStyle=Y5e;j0.default=void 0;j0.getPrefix=Yoe;const g3=["Moz","Webkit","O","ms"];function Yoe(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!n||e in n)return"";for(let r=0;r<g3.length;r++)if(Xoe(e,g3[r])in n)return g3[r];return""}function Xoe(t,e){return e?"".concat(e).concat(X5e(t)):t}function Y5e(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function X5e(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}j0.default=Yoe();Object.defineProperty(Ko,"__esModule",{value:!0});Ko.addClassName=Joe;Ko.addEvent=J5e;Ko.addUserSelectStyles=c$e;Ko.createCSSTransform=o$e;Ko.createSVGTransform=s$e;Ko.getTouch=a$e;Ko.getTouchIdentifier=l$e;Ko.getTranslation=lU;Ko.innerHeight=n$e;Ko.innerWidth=r$e;Ko.matchesSelector=Zoe;Ko.matchesSelectorAndParentsTo=Z5e;Ko.offsetXYFromParent=i$e;Ko.outerHeight=e$e;Ko.outerWidth=t$e;Ko.removeClassName=Qoe;Ko.removeEvent=Q5e;Ko.removeUserSelectStyles=u$e;var uu=Wf,n7=K5e(j0);function Koe(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Koe=function(r){return r?n:e})(t)}function K5e(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=Koe(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}let tC="";function Zoe(t,e){return tC||(tC=(0,uu.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,uu.isFunction)(t[n])})),(0,uu.isFunction)(t[tC])?t[tC](e):!1}function Z5e(t,e,n){let r=t;do{if(Zoe(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function J5e(t,e,n,r){if(!t)return;const i={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,i):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function Q5e(t,e,n,r){if(!t)return;const i={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function e$e(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,uu.int)(n.borderTopWidth),e+=(0,uu.int)(n.borderBottomWidth),e}function t$e(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,uu.int)(n.borderLeftWidth),e+=(0,uu.int)(n.borderRightWidth),e}function n$e(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,uu.int)(n.paddingTop),e-=(0,uu.int)(n.paddingBottom),e}function r$e(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,uu.int)(n.paddingLeft),e-=(0,uu.int)(n.paddingRight),e}function i$e(t,e,n){const i=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),o=(t.clientX+e.scrollLeft-i.left)/n,s=(t.clientY+e.scrollTop-i.top)/n;return{x:o,y:s}}function o$e(t,e){const n=lU(t,e,"px");return{[(0,n7.browserPrefixToKey)("transform",n7.default)]:n}}function s$e(t,e){return lU(t,e,"")}function lU(t,e,n){let{x:r,y:i}=t,o="translate(".concat(r).concat(n,",").concat(i).concat(n,")");if(e){const s="".concat(typeof e.x=="string"?e.x:e.x+n),a="".concat(typeof e.y=="string"?e.y:e.y+n);o="translate(".concat(s,", ").concat(a,")")+o}return o}function a$e(t,e){return t.targetTouches&&(0,uu.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,uu.findInArray)(t.changedTouches,n=>e===n.identifier)}function l$e(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function c$e(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&Joe(t.body,"react-draggable-transparent-selection")}function u$e(t){if(t)try{if(t.body&&Qoe(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function Joe(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function Qoe(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var Hf={};Object.defineProperty(Hf,"__esModule",{value:!0});Hf.canDragX=f$e;Hf.canDragY=p$e;Hf.createCoreData=g$e;Hf.createDraggableData=y$e;Hf.getBoundPosition=d$e;Hf.getControlPosition=m$e;Hf.snapToGrid=h$e;var qc=Wf,kx=Ko;function d$e(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:v$e(r);const i=cU(t);if(typeof r=="string"){const{ownerDocument:o}=i,s=o.defaultView;let a;if(r==="parent"?a=i.parentNode:a=o.querySelector(r),!(a instanceof s.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const l=a,d=s.getComputedStyle(i),f=s.getComputedStyle(l);r={left:-i.offsetLeft+(0,qc.int)(f.paddingLeft)+(0,qc.int)(d.marginLeft),top:-i.offsetTop+(0,qc.int)(f.paddingTop)+(0,qc.int)(d.marginTop),right:(0,kx.innerWidth)(l)-(0,kx.outerWidth)(i)-i.offsetLeft+(0,qc.int)(f.paddingRight)-(0,qc.int)(d.marginRight),bottom:(0,kx.innerHeight)(l)-(0,kx.outerHeight)(i)-i.offsetTop+(0,qc.int)(f.paddingBottom)-(0,qc.int)(d.marginBottom)}}return(0,qc.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,qc.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,qc.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,qc.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function h$e(t,e,n){const r=Math.round(e/t[0])*t[0],i=Math.round(n/t[1])*t[1];return[r,i]}function f$e(t){return t.props.axis==="both"||t.props.axis==="x"}function p$e(t){return t.props.axis==="both"||t.props.axis==="y"}function m$e(t,e,n){const r=typeof e=="number"?(0,kx.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const i=cU(n),o=n.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,kx.offsetXYFromParent)(r||t,o,n.props.scale)}function g$e(t,e,n){const r=!(0,qc.isNum)(t.lastX),i=cU(t);return r?{node:i,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:i,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function y$e(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function v$e(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function cU(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var WR={},HR={};Object.defineProperty(HR,"__esModule",{value:!0});HR.default=_$e;function _$e(){}Object.defineProperty(WR,"__esModule",{value:!0});WR.default=void 0;var y3=b$e(W),uc=uU(a$),x$e=uU(i1),il=Ko,gg=Hf,v3=Wf,Nw=uU(HR);function uU(t){return t&&t.__esModule?t:{default:t}}function ese(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(ese=function(r){return r?n:e})(t)}function b$e(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=ese(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(o!=="default"&&Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}function Nl(t,e,n){return e=w$e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w$e(t){var e=S$e(t,"string");return typeof e=="symbol"?e:String(e)}function S$e(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const ah={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let yg=ah.mouse,GR=class extends y3.Component{constructor(){super(...arguments),Nl(this,"dragging",!1),Nl(this,"lastX",NaN),Nl(this,"lastY",NaN),Nl(this,"touchIdentifier",null),Nl(this,"mounted",!1),Nl(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,il.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,il.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&e.preventDefault();const i=(0,il.getTouchIdentifier)(e);this.touchIdentifier=i;const o=(0,gg.getControlPosition)(e,i,this);if(o==null)return;const{x:s,y:a}=o,l=(0,gg.createCoreData)(this,s,a);(0,Nw.default)("DraggableCore: handleDragStart: %j",l),(0,Nw.default)("calling",this.props.onStart),!(this.props.onStart(e,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,il.addUserSelectStyles)(r),this.dragging=!0,this.lastX=s,this.lastY=a,(0,il.addEvent)(r,yg.move,this.handleDrag),(0,il.addEvent)(r,yg.stop,this.handleDragStop))}),Nl(this,"handleDrag",e=>{const n=(0,gg.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,l=i-this.lastY;if([a,l]=(0,gg.snapToGrid)(this.props.grid,a,l),!a&&!l)return;r=this.lastX+a,i=this.lastY+l}const o=(0,gg.createCoreData)(this,r,i);if((0,Nw.default)("DraggableCore: handleDrag: %j",o),this.props.onDrag(e,o)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=r,this.lastY=i}),Nl(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,gg.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let l=r-this.lastX||0,d=i-this.lastY||0;[l,d]=(0,gg.snapToGrid)(this.props.grid,l,d),r=this.lastX+l,i=this.lastY+d}const o=(0,gg.createCoreData)(this,r,i);if(this.props.onStop(e,o)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,il.removeUserSelectStyles)(a.ownerDocument),(0,Nw.default)("DraggableCore: handleDragStop: %j",o),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,Nw.default)("DraggableCore: Removing handlers"),(0,il.removeEvent)(a.ownerDocument,yg.move,this.handleDrag),(0,il.removeEvent)(a.ownerDocument,yg.stop,this.handleDragStop))}),Nl(this,"onMouseDown",e=>(yg=ah.mouse,this.handleDragStart(e))),Nl(this,"onMouseUp",e=>(yg=ah.mouse,this.handleDragStop(e))),Nl(this,"onTouchStart",e=>(yg=ah.touch,this.handleDragStart(e))),Nl(this,"onTouchEnd",e=>(yg=ah.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,il.addEvent)(e,ah.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,il.removeEvent)(n,ah.mouse.move,this.handleDrag),(0,il.removeEvent)(n,ah.touch.move,this.handleDrag),(0,il.removeEvent)(n,ah.mouse.stop,this.handleDragStop),(0,il.removeEvent)(n,ah.touch.stop,this.handleDragStop),(0,il.removeEvent)(e,ah.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,il.removeUserSelectStyles)(n)}}findDOMNode(){var e,n;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:x$e.default.findDOMNode(this)}render(){return y3.cloneElement(y3.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};WR.default=GR;Nl(GR,"displayName","DraggableCore");Nl(GR,"propTypes",{allowAnyClick:uc.default.bool,children:uc.default.node.isRequired,disabled:uc.default.bool,enableUserSelectHack:uc.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:uc.default.arrayOf(uc.default.number),handle:uc.default.string,cancel:uc.default.string,nodeRef:uc.default.object,onStart:uc.default.func,onDrag:uc.default.func,onStop:uc.default.func,onMouseDown:uc.default.func,scale:uc.default.number,className:v3.dontSetMe,style:v3.dontSetMe,transform:v3.dontSetMe});Nl(GR,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),t.default=void 0;var e=g(W),n=f(a$),r=f(i1),i=f(U5e),o=Ko,s=Hf,a=Wf,l=f(WR),d=f(HR);function f(T){return T&&T.__esModule?T:{default:T}}function p(T){if(typeof WeakMap!="function")return null;var C=new WeakMap,k=new WeakMap;return(p=function(O){return O?k:C})(T)}function g(T,C){if(!C&&T&&T.__esModule)return T;if(T===null||typeof T!="object"&&typeof T!="function")return{default:T};var k=p(C);if(k&&k.has(T))return k.get(T);var O={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in T)if(B!=="default"&&Object.prototype.hasOwnProperty.call(T,B)){var U=D?Object.getOwnPropertyDescriptor(T,B):null;U&&(U.get||U.set)?Object.defineProperty(O,B,U):O[B]=T[B]}return O.default=T,k&&k.set(T,O),O}function v(){return v=Object.assign?Object.assign.bind():function(T){for(var C=1;C<arguments.length;C++){var k=arguments[C];for(var O in k)Object.prototype.hasOwnProperty.call(k,O)&&(T[O]=k[O])}return T},v.apply(this,arguments)}function x(T,C,k){return C=b(C),C in T?Object.defineProperty(T,C,{value:k,enumerable:!0,configurable:!0,writable:!0}):T[C]=k,T}function b(T){var C=S(T,"string");return typeof C=="symbol"?C:String(C)}function S(T,C){if(typeof T!="object"||T===null)return T;var k=T[Symbol.toPrimitive];if(k!==void 0){var O=k.call(T,C||"default");if(typeof O!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(T)}class M extends e.Component{static getDerivedStateFromProps(C,k){let{position:O}=C,{prevPropsPosition:D}=k;return O&&(!D||O.x!==D.x||O.y!==D.y)?((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:O,prevPropsPosition:D}),{x:O.x,y:O.y,prevPropsPosition:{...O}}):null}constructor(C){super(C),x(this,"onDragStart",(k,O)=>{if((0,d.default)("Draggable: onDragStart: %j",O),this.props.onStart(k,(0,s.createDraggableData)(this,O))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),x(this,"onDrag",(k,O)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",O);const D=(0,s.createDraggableData)(this,O),B={x:D.x,y:D.y,slackX:0,slackY:0};if(this.props.bounds){const{x:J,y:V}=B;B.x+=this.state.slackX,B.y+=this.state.slackY;const[X,oe]=(0,s.getBoundPosition)(this,B.x,B.y);B.x=X,B.y=oe,B.slackX=this.state.slackX+(J-B.x),B.slackY=this.state.slackY+(V-B.y),D.x=B.x,D.y=B.y,D.deltaX=B.x-this.state.x,D.deltaY=B.y-this.state.y}if(this.props.onDrag(k,D)===!1)return!1;this.setState(B)}),x(this,"onDragStop",(k,O)=>{if(!this.state.dragging||this.props.onStop(k,(0,s.createDraggableData)(this,O))===!1)return!1;(0,d.default)("Draggable: onDragStop: %j",O);const B={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:J,y:V}=this.props.position;B.x=J,B.y=V}this.setState(B)}),this.state={dragging:!1,dragged:!1,x:C.position?C.position.x:C.defaultPosition.x,y:C.position?C.position.y:C.defaultPosition.y,prevPropsPosition:{...C.position},slackX:0,slackY:0,isElementSVG:!1},C.position&&!(C.onDrag||C.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var C,k;return(C=(k=this.props)===null||k===void 0||(k=k.nodeRef)===null||k===void 0?void 0:k.current)!==null&&C!==void 0?C:r.default.findDOMNode(this)}render(){const{axis:C,bounds:k,children:O,defaultPosition:D,defaultClassName:B,defaultClassNameDragging:U,defaultClassNameDragged:J,position:V,positionOffset:X,scale:oe,...pe}=this.props;let re={},he=null;const be=!!!V||this.state.dragging,ie=V||D,ve={x:(0,s.canDragX)(this)&&be?this.state.x:ie.x,y:(0,s.canDragY)(this)&&be?this.state.y:ie.y};this.state.isElementSVG?he=(0,o.createSVGTransform)(ve,X):re=(0,o.createCSSTransform)(ve,X);const Ee=(0,i.default)(O.props.className||"",B,{[U]:this.state.dragging,[J]:this.state.dragged});return e.createElement(l.default,v({},pe,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(O),{className:Ee,style:{...O.props.style,...re},transform:he}))}}t.default=M,x(M,"displayName","Draggable"),x(M,"propTypes",{...l.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),x(M,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Goe);const{default:tse,DraggableCore:M$e}=Goe;aU.exports=tse;aU.exports.default=tse;aU.exports.DraggableCore=M$e;var dU={},E$e=oi;Object.defineProperty(dU,"__esModule",{value:!0});var qR=dU.default=void 0,T$e=E$e(bi()),C$e=F;qR=dU.default=(0,T$e.default)((0,C$e.jsx)("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8"}),"Replay");var hU={},A$e=oi;Object.defineProperty(hU,"__esModule",{value:!0});var fU=hU.default=void 0,P$e=A$e(bi()),I$e=F;fU=hU.default=(0,P$e.default)((0,I$e.jsx)("path",{d:"M5 4v2h14V4zm0 10h4v6h6v-6h4l-7-7z"}),"Publish");var pU={},k$e=oi;Object.defineProperty(pU,"__esModule",{value:!0});var mU=pU.default=void 0,R$e=k$e(bi()),O$e=F;mU=pU.default=(0,R$e.default)((0,O$e.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");var gU={},L$e=oi;Object.defineProperty(gU,"__esModule",{value:!0});var nse=gU.default=void 0,D$e=L$e(bi()),N$e=F;nse=gU.default=(0,D$e.default)((0,N$e.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M7 13.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m5 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m5 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"Pending");const zF=({position:t,property:e,attribute:n})=>{const r=pr(g=>g.devices.items[t.deviceId]),i=e||n,o=e?t[e]:t.attributes[n],s="m",a="m",l="km/s",d="ddm",f=!1,p=()=>{switch(i){case"fixTime":case"deviceTime":case"serverTime":return Uoe(o,"seconds",f);case"latitude":return JG("latitude",o,d);case"longitude":return JG("longitude",o,d);case"speed":return L5e(o,l);case"course":return k5e(o);case"altitude":return O5e(o,a);case"batteryLevel":return joe(o);case"alarm":return Voe(o);case"gimbal":return o.toString();case"obstacle_info":return o.toString();case"odometer":case"distance":case"totalDistance":return R5e(o,s);case"hours":return D5e(o);default:return typeof o=="number"?I5e(o):typeof o=="boolean"?$oe(o):o||""}};switch(i){case"image":case"video":case"audio":return F.jsx(nPe,{href:`/api/media/${r.uniqueId}/${o}`,target:"_blank",children:o});case"totalDistance":case"hours":case"address":case"network":return"";default:return p()}},z$e=si(t=>({root:{[t.breakpoints.down("md")]:{bottom:`calc(${t.dimensions.bottomBarHeight}px + ${t.spacing(1)})`}},button:{height:"auto",marginTop:0,marginBottom:0,color:t.palette.colors.negative}})),F$e=({open:t,endpoint:e,itemId:n,onResult:r})=>{const i=z$e(),o=async()=>{(await fetch(`/api/${e}/${n}`,{method:"DELETE"})).ok?(console.log("elemento eliminado"),r(!0)):r(!1)};return F.jsx(ZIe,{className:i.root,open:t,autoHideDuration:2750,onClose:()=>r(!1),message:"confirmar para eliminar",action:F.jsx(jr,{size:"small",className:i.button,onClick:o,children:"Eliminar"})})},rse=si(t=>({card:{pointerEvents:"auto",width:t.dimensions.popupMaxWidth},media:{height:t.dimensions.popupImageHeight,display:"flex",justifyContent:"flex-end",alignItems:"flex-start"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},content:{paddingTop:t.spacing(1),paddingBottom:t.spacing(1)},negative:{color:t.palette.colors.negative},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},table:{"& .MuiTableCell-sizeSmall":{paddingLeft:0,paddingRight:0}},cell:{borderBottom:"none"},actions:{justifyContent:"space-between"},root:({desktopPadding:e})=>({pointerEvents:"none",position:"fixed",zIndex:5,left:"50%",[t.breakpoints.up("md")]:{left:`calc(50% + ${e} / 2)`,bottom:t.spacing(3)},[t.breakpoints.down("md")]:{left:"50%",bottom:`calc(${t.spacing(3)} + ${t.dimensions.bottomBarHeight}px)`},transform:"translateX(-50%)"})})),_3=({name:t,content:e})=>{const n=rse();return F.jsxs(Xx,{children:[F.jsx(mc,{className:n.card,children:F.jsx(Bn,{variant:"body2",children:t})}),F.jsx(mc,{className:n.cell,children:F.jsx(Bn,{variant:"body2",color:"textSecondary",children:e})})]})},B$e=({deviceId:t,position:e,onClose:n,disableActions:r,desktopPadding:i=0})=>{var M;const o=rse(),s=Sy(),a=Yl(),l=pr(T=>T.devices.items[t]),d=(M=l==null?void 0:l.attributes)==null?void 0:M.deviceImage,f="speed,course,batteryLevel,gimbal",[p,g]=W.useState(null),[v,x]=W.useState(!1),b=async(T,C,k)=>{console.log("send command uavud: "+T+C);try{const O=await fetch("/api/commands/send",{method:"POST",body:JSON.stringify({deviceId:T,type:C,attributes:k}),headers:{"Content-Type":"application/json"}});if(O.ok){let D=await O.json();console.log(D)}else throw console.log("Error1:"+O),Error(await O.text())}catch(O){console.log("Error2:"+O)}},S=async T=>{if(T){const C=await fetch("/api/devices");if(C.ok){let k=await C.json();a(eu.refresh(Object.values(k)))}else throw Error(await C.text())}x(!1)};return F.jsxs(F.Fragment,{children:[F.jsx("div",{className:o.root,children:l&&F.jsxs(jf,{elevation:3,className:o.card,children:[d?F.jsx(OTe,{className:o.media,image:`/api/media/${l.uniqueId}/${d}`,children:F.jsx(br,{size:"small",onClick:n,onTouchStart:n,children:F.jsx(Nf,{fontSize:"small",className:o.mediaButton})})}):F.jsxs("div",{className:o.header,children:[F.jsx(Bn,{variant:"body2",color:"textSecondary",children:l.name}),F.jsx(br,{size:"small",onClick:n,onTouchStart:n,children:F.jsx(Nf,{fontSize:"small"})})]}),e&&F.jsx(N$,{className:o.content,children:F.jsx(U$,{size:"small",classes:{root:o.table},children:F.jsxs(V$,{children:[e.hasOwnProperty("latitude")&&F.jsx(_3,{name:"Position",content:F.jsx("a",{href:"https://www.google.com/maps?q="+e.latitude+","+e.longitude,target:"_blank",children:"["+e.latitude.toFixed(6)+","+e.longitude.toFixed(6)+"]"})},"latitude"),f.split(",").filter(T=>e.hasOwnProperty(T)||e.attributes.hasOwnProperty(T)).map(T=>F.jsx(_3,{name:T,content:F.jsx(zF,{position:e,property:e.hasOwnProperty(T)?T:null,attribute:e.hasOwnProperty(T)?null:T})},T)),e.attributes.hasOwnProperty("alarm")&&e.attributes.alarm=="threat"&&F.jsx(_3,{name:"Alarm "+e.attributes.alarm,content:F.jsxs("div",{style:{width:"100%"},children:[F.jsx(jr,{variant:"contained",size:"small",color:"primary",style:{margin:"1px",display:"inline-block"},onClick:()=>b(l.id,"threat",{data:!0}),children:"Validate"}),F.jsx(jr,{variant:"contained",size:"small",color:"secondary",style:{margin:"1px",display:"inline-block"},onClick:()=>b(l.id,"threat",{data:!1}),children:"Dismiss"})]})},"alarm1")]})})}),F.jsxs(Lne,{classes:{root:o.actions},disableSpacing:!0,children:[F.jsx(br,{color:"secondary",onClick:T=>g(T.currentTarget),disabled:!e,children:F.jsx(nse,{})}),F.jsx(br,{onClick:()=>b(l.id,"SincroniseFiles"),children:F.jsx(qR,{})}),F.jsx(br,{onClick:()=>b(l.id,"commandMission"),disabled:r,children:F.jsx(fU,{})}),F.jsx(br,{onClick:()=>s(`/device/${t}`),children:F.jsx(mU,{})}),F.jsx(br,{onClick:()=>x(!0),className:o.negative,children:F.jsx(yu,{})})]})]})}),e&&F.jsxs(F$,{anchorEl:p,open:!!p,onClose:()=>g(null),children:[F.jsx(au,{onClick:()=>s(`/device/${t}`),children:F.jsx(Bn,{color:"secondary",children:"Detalle Dispositivo"})}),F.jsx(au,{component:"a",target:"_blank",href:`https://www.google.com/maps/search/?api=1&query=${e.latitude}%2C${e.longitude}`,children:"linkGoogleMaps"}),F.jsx(au,{component:"a",target:"_blank",href:`http://maps.apple.com/?ll=${e.latitude},${e.longitude}`,children:"linkAppleMaps"}),F.jsx(au,{component:"a",target:"_blank",href:`https://www.google.com/maps/@?api=1&map_action=pano&viewpoint=${e.latitude}%2C${e.longitude}&heading=${e.course}`,children:"linkStreetView"})]}),F.jsx(F$e,{open:v,endpoint:"devices",itemId:t,onResult:T=>S(T)})]})};function $$e(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var j$e=`/* add css styles here (optional) */

.styles_ReactSwipeButton__2WML2 {
  float: left;
  width: 100%;
  height: 50px;
  position: relative;
}
.styles_ReactSwipeButton__2WML2,
.styles_ReactSwipeButton__2WML2 * {
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none;   /* Chrome/Safari/Opera */
  -khtml-user-select: none;    /* Konqueror */
  -moz-user-select: none;      /* Firefox */
  -ms-user-select: none;       /* Internet Explorer/Edge */
  user-select: none;           /* Non-prefixed version, currently
                                  not supported by any browser */
}
.styles_rsbContainer__KXpXK{
  float: left;
  width: 100%;
  height: 100%;
  background: #eee;
  border-radius: 50px;
  position: relative;
  /* box-shadow: inset 1px 1px 4px rgba(0,0,0,0.1); */
  overflow: hidden;
}
.styles_rsbContainerUnlocked__1T0vd{
  width: 50%!important;
  margin-left: 25%;
  transition: 0.5s;
  cursor: default;
}
.styles_rsbContainerUnlocked__1T0vd .styles_rsbcSlider__1yYxD{
  left: 100%!important;
  cursor: default;
  pointer-events: none;
}
.styles_rsbContainerUnlocked__1T0vd .styles_rsbcSliderArrow__2D9q4 {
  transition: 0.5s;
  margin-right: -60px;
}
.styles_rsbContainerUnlocked__1T0vd .styles_rsbcSliderCircle__3G0Zs {
  transition: 0.5s;
  margin-right: -60px;
}
.styles_rsbcSlider__1yYxD {
  float: left;
  width: 100%;
  position: absolute;
  height: 50px;
  top:0;
  left: 50px;
  margin-left:-100%;
  background: #333;
  border-radius: 25px;
  z-index: 100;
  /* box-shadow: 1px 1px 5px rgba(0,0,0,0.3); */
  cursor: pointer;
}
.styles_rsbcSliderText__3h08j{
  position: absolute;
  top:0;
  left:0;
  right:0;
  line-height: 50px;
  text-align: center;
  font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
  letter-spacing: 2px;
  color: #fff;
  font-size: 13px;

}
.styles_rsbcSliderArrow__2D9q4{
  float: left;
  position: absolute;
  transform: rotate(45deg);
  border: 2px solid #fff;
  height: 8px;
  width: 8px;
  top:50%;
  right: 22px;
  margin-top: -6px;
  border-left-color: transparent;
  border-bottom-color: transparent;
  transform-origin: center;
  z-index: 10;
}
.styles_rsbcSliderCircle__3G0Zs {
  position: absolute;
  right: 0;
  background: #444;
  top:0;
  height: 50px;
  width: 50px;
  border-radius: 100%;
}
.styles_rsbcText__16wA0 {
  float: left;
  position: absolute;
  top:0;
  left:0;
  right:0;
  height: 50px;
  line-height: 50px;
  text-align: center;
  font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
  letter-spacing: 2px;
  font-size: 13px;
  color: #aaa;
}`,vg={ReactSwipeButton:"styles_ReactSwipeButton__2WML2",rsbContainer:"styles_rsbContainer__KXpXK",rsbContainerUnlocked:"styles_rsbContainerUnlocked__1T0vd",rsbcSlider:"styles_rsbcSlider__1yYxD",rsbcSliderArrow:"styles_rsbcSliderArrow__2D9q4",rsbcSliderCircle:"styles_rsbcSliderCircle__3G0Zs",rsbcSliderText:"styles_rsbcSliderText__3h08j",rsbcText:"styles_rsbcText__16wA0"};$$e(j$e);var U$e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},V$e=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),W$e=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},r7=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},i7=Ze.createRef(),nC=Ze.createRef(),x3="ontouchstart"in document.documentElement,H$e=function(t){W$e(e,t);function e(){var n,r,i,o;U$e(this,e);for(var s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];return o=(r=(i=r7(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(a))),i),i.isDragging=!1,i.sliderLeft=0,i.state={},i.onDrag=function(d){i.unmounted||i.state.unlocked||i.isDragging&&(x3?i.sliderLeft=Math.min(Math.max(0,d.touches[0].clientX-i.startX),i.containerWidth):i.sliderLeft=Math.min(Math.max(0,d.clientX-i.startX),i.containerWidth),i.updateSliderStyle())},i.updateSliderStyle=function(){i.unmounted||i.state.unlocked||(i7.current.style.left=i.sliderLeft+50+"px")},i.stopDrag=function(){i.unmounted||i.state.unlocked||i.isDragging&&(i.isDragging=!1,i.sliderLeft>i.containerWidth*.9?(i.sliderLeft=i.containerWidth,i.onSuccess(),i.props.onSuccess&&i.props.onSuccess()):(i.sliderLeft=0,i.props.onFailure&&i.props.onFailure()),i.updateSliderStyle())},i.startDrag=function(d){i.unmounted||i.state.unlocked||(i.isDragging=!0,x3?i.startX=d.touches[0].clientX:i.startX=d.clientX)},i.onSuccess=function(){nC.current.style.width=nC.current.clientWidth+"px",i.setState({unlocked:!0})},i.getText=function(){return i.state.unlocked?i.props.text_unlocked||"UNLOCKED":i.props.text||"SLIDE"},i.reset=function(){i.unmounted||i.setState({unlocked:!1},function(){i.sliderLeft=0,i.updateSliderStyle()})},r),r7(i,o)}return V$e(e,[{key:"componentDidMount",value:function(){x3?(document.addEventListener("touchmove",this.onDrag),document.addEventListener("touchend",this.stopDrag)):(document.addEventListener("mousemove",this.onDrag),document.addEventListener("mouseup",this.stopDrag)),this.containerWidth=nC.current.clientWidth-50}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"render",value:function(){return Ze.createElement("div",{className:vg.ReactSwipeButton},Ze.createElement("div",{className:vg.rsbContainer+" "+(this.state.unlocked?vg.rsbContainerUnlocked:""),ref:nC},Ze.createElement("div",{className:vg.rsbcSlider,ref:i7,onMouseDown:this.startDrag,style:{background:this.props.color},onTouchStart:this.startDrag},Ze.createElement("span",{className:vg.rsbcSliderText},this.getText()),Ze.createElement("span",{className:vg.rsbcSliderArrow}),Ze.createElement("span",{className:vg.rsbcSliderCircle,style:{background:this.props.color}})),Ze.createElement("div",{className:vg.rsbcText},this.getText())))}}]),e}(W.Component);const G$e=si(t=>({card:{pointerEvents:"auto",width:t.dimensions.popupMaxWidth},media:{height:t.dimensions.popupImageHeight,display:"flex",justifyContent:"flex-end",alignItems:"flex-start"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},content:{paddingTop:"20px",paddingBottom:"20px"},negative:{color:t.palette.colors.negative},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},table:{"& .MuiTableCell-sizeSmall":{paddingLeft:0,paddingRight:0}},cell:{borderBottom:"none"},actions:{justifyContent:"space-between"},root:{pointerEvents:"none",position:"fixed",zIndex:5,left:"50%",top:"50%",transform:"translate(-50%,-50%)"}})),q$e=({enable:t,onClose:e,onSucces:n})=>{const r=G$e();return F.jsx(F.Fragment,{children:F.jsx("div",{className:r.root,children:t&&F.jsxs(jf,{elevation:5,className:r.card,children:[F.jsxs("div",{className:r.header,children:[F.jsx(Bn,{variant:"body2",color:"textSecondary",children:"Confirm mission"}),F.jsx(br,{size:"small",onClick:e,onTouchStart:e,children:F.jsx(Nf,{fontSize:"small"})})]}),F.jsxs(N$,{className:r.content,children:[F.jsx(Bn,{variant:"body1",color:"textSecondary",children:"Send all devices to command the mission load"}),F.jsx("div",{style:{marginTop:"10px",height:"50px"},children:F.jsx(H$e,{text:"Slide to Command Mission",color:"#7393B3",text_unlocked:"Commanded",onSuccess:n})})]})]})})})};var yU={},Y$e=oi;Object.defineProperty(yU,"__esModule",{value:!0});var ise=yU.default=void 0,X$e=Y$e(bi()),K$e=F;ise=yU.default=(0,X$e.default)((0,K$e.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var vU={},Z$e=oi;Object.defineProperty(vU,"__esModule",{value:!0});var ose=vU.default=void 0,J$e=Z$e(bi()),Q$e=F;ose=vU.default=(0,J$e.default)((0,Q$e.jsx)("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}),"ViewList");var _U={},eje=oi;Object.defineProperty(_U,"__esModule",{value:!0});var sse=_U.default=void 0,tje=eje(bi()),nje=F;sse=_U.default=(0,tje.default)((0,nje.jsx)("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"}),"Tune");const rje={display:"flex",gap:"10px 10px",height:"30px",borderBottom:"3px solid rgb(212, 212, 212)"},ase=({SetAddUAVOpen:t})=>F.jsxs(z0,{style:rje,children:[F.jsx(br,{edge:"start",children:F.jsx(ose,{})}),F.jsx($$,{placeholder:"device",endAdornment:F.jsx(PAe,{position:"end",children:F.jsx(br,{size:"small",edge:"end",children:F.jsx(kEe,{color:"info",variant:"dot",children:F.jsx(sse,{fontSize:"small"})})})}),size:"small",fullWidth:!0}),F.jsx(br,{edge:"end",onClick:()=>{t(!0)},children:F.jsx(Dg,{children:F.jsx(ise,{})})})]}),ije=si(t=>({card:{pointerEvents:"auto"},media:{width:t.dimensions.popupMaxWidth,display:"flex",justifyContent:"flex-end",alignItems:"flex-start",background:"black"},media1:{width:"95vw",height:"90vh",display:"flex",justifyContent:"flex-end",alignItems:"flex-start",background:"black"},gruopBtn:{display:"flex",right:"5px",height:"40px",position:"absolute"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},tittle:{display:"block",width:"calc( 100% - 60pt )",paddingLeft:"15pt",paddingTop:"10pt",paddingBottom:"10pt",textAlign:"left"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},root:{pointerEvents:"none",position:"fixed",zIndex:6,left:"360px",top:t.spacing(15),transform:"translateX(1%)"},root_max:{pointerEvents:"none",position:"fixed",zIndex:6,left:"51%",top:"5%",transform:"translateX(-50%)"}})),o7=({deviceId:t,deviceIp:e,camera_src:n,onClose:r})=>{const i=ije();pr(x=>x.data.camera[t]);const o=pr(x=>x.devices.items[t]),s="http://"+e+":8889/"+n,[a,l]=W.useState(!1);let d=i.card,f=a?i.root_max:i.root,p=a?i.media1:i.media;function g(){l(!a)}W.useRef();function v(){r(),l(!1)}return W.useEffect(()=>{t&&console.log("device in camera-"+o.name+"-"+e+"+"+n)},[t]),F.jsx("div",{className:f,children:o&&F.jsxs(jf,{elevation:3,className:d,children:[F.jsxs("div",{className:i.gruopBtn,children:[F.jsx(br,{size:"small",onClick:g,onTouchStart:g,children:F.jsx(kj,{fontSize:"small",className:i.mediaButton})}),F.jsx(br,{size:"small",onClick:v,children:F.jsx(Nf,{fontSize:"small",className:i.mediaButton})})]}),F.jsx("div",{className:i.tittle,children:"Image "+o.name}),F.jsx("iframe",{src:s,className:p})]})})},lse=({filtereddeviceid:t=-1})=>{const e=W.useId(),n=`${e}-points`,r=`${e}-points-clusters`,i=pr(x=>x.mission.route),o=pr(x=>x.devices.items),s=!0,a=.6,l=()=>ht.getCanvas().style.cursor="pointer",d=()=>ht.getCanvas().style.cursor="",f=(x,b)=>({id:b.id,name:x[b.routeid].name,uav:x[b.routeid].uav,latitude:x[b.routeid].wp[b.id].pos[0],longitude:x[b.routeid].wp[b.id].pos[1],altitud:x[b.routeid].wp[b.id].pos[2],yaw:x[b.routeid].wp[b.id].yaw,speed:x[b.routeid].wp[b.id].speed,gimbal:x[b.routeid].wp[b.id].gimbal,actions:x[b.routeid].wp[b.id].action,attributes:x[b.routeid].attributes,category:"default",color:x[b.routeid].id}),p=x=>{console.log("target"),console.log(x);let b=`<div style="color: #FF7A59;text-align: center" ><b>UAV: ${x.features[0].properties.uav}</b>
      <span><a href="https://www.google.com/maps?q=${x.features[0].properties.latitude},${x.features[0].properties.longitude}" target="_blank">
      Point_${x.features[0].properties.id}</a></span></div>
          <div><span>Route: ${x.features[0].properties.name}</span></div>
          <div style="display:inline"><span> Height: </span><span>${x.features[0].properties.altitud.toFixed(1)}m </span></div>`;b=x.features[0].properties.hasOwnProperty("speed")?b+`<div style="display:inline"><span>Speed: </span><span>${x.features[0].properties.speed} m/s </span></div>`:b,b=x.features[0].properties.hasOwnProperty("yaw")?b+`<div style="display:inline"><span>Yaw: </span><span>${x.features[0].properties.yaw} </span></div>`:b,b=x.features[0].properties.hasOwnProperty("gimbal")?b+`<div style="display:inline"><span>Gimbal: </span><span>${x.features[0].properties.gimbal} </span></div>`:b;let S="<div><b> Waypoint actions: </b></div>";if(x.features[0].properties.actions){let C=JSON.parse(x.features[0].properties.actions);S=S+Object.keys(C).map(k=>{let O=k=="idle_vel"?"m/s":"";return`<div style="display:inline"><span>${k}: </span><span>${C[k]} ${O} </span></div>`}).join("")}let M="<div><b> Attributes_mission: </b></div>",T=JSON.parse(x.features[0].properties.attributes);M=M+Object.keys(T).map(C=>{let k=C=="idle_vel"||C=="max_vel"?"m/s":"";return`<div style="display:inline"><span>${C}: </span><span>${T[C]} ${k} </span></div>`}).join(""),new m1.Popup().setLngLat(x.lngLat).setHTML(b+S+M).addTo(ht)};W.useEffect(()=>(ht.addSource(n,{type:"geojson",data:{type:"FeatureCollection",features:[]},cluster:s,clusterMaxZoom:10,clusterRadius:50}),ht.addSource(e,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),ht.addLayer({source:e,id:"mission-line",type:"line",paint:{"line-color":["get","color"],"line-width":2}}),ht.addLayer({source:e,id:"mission-title",type:"symbol",layout:{"text-field":"{name}","text-font":Th(ht),"text-size":12},paint:{"text-halo-color":"white","text-halo-width":1}}),ht.addLayer({id:"mission-points",type:"symbol",source:n,filter:["!has","point_count"],layout:{"icon-image":"background-{color}","icon-size":a,"icon-allow-overlap":!0,"text-allow-overlap":!0,"text-field":"{id}","text-font":Th(ht),"text-size":14},paint:{"text-color":"white"}}),ht.addLayer({id:r,type:"symbol",source:n,filter:["has","point_count"],layout:{"icon-image":"background","icon-size":a,"text-field":"M","text-font":Th(ht),"text-size":14}}),ht.on("click","mission-points",p),ht.on("mouseenter","mission-points",l),ht.on("mouseleave","mission-points",d),()=>{ht.off("click","mission-points",p),ht.off("mouseenter","mission-points",l),ht.off("mouseleave","mission-points",d),ht.getLayer("mission-line")&&ht.removeLayer("mission-line"),ht.getLayer("mission-title")&&ht.removeLayer("mission-title"),ht.getLayer("mission-points")&&ht.removeLayer("mission-points"),ht.getLayer(r)&&ht.removeLayer(r),ht.getSource(e)&&ht.removeSource(e),ht.getSource(n)&&ht.removeSource(n)}),[]);function g(x){let b=x.wp.map(function(S){return[S.pos[1],S.pos[0]]});return{id:x.id,type:"Feature",geometry:{type:"LineString",coordinates:b},properties:{name:x.uav,color:hy.colors_devices[x.id]}}}function v(x){let b=[];return x.forEach((S,M)=>{S.wp.forEach((T,C)=>{b.push({longitude:T.pos[1],latitude:T.pos[0],id:C,routeid:M})})}),b}return W.useEffect(()=>{let x=i.filter(S=>t<0||S.uav==o[t].name);console.log("mission filtered"),console.log(x);let b=v(x);ht.getSource(n).setData({type:"FeatureCollection",features:b.map(S=>({type:"Feature",geometry:{type:"Point",coordinates:[S.longitude,S.latitude]},properties:f(x,S)}))}),ht.getSource(e).setData({type:"FeatureCollection",features:x.map(S=>g(S))})},[i]),null},oje=({markers:t,showTitles:e})=>{const n=W.useId();cre();const r=.4;W.useEffect(()=>(ht.addSource(n,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),e?ht.addLayer({id:n,type:"symbol",source:n,filter:["!has","point_count"],layout:{"icon-image":"{image}","icon-size":r,"icon-allow-overlap":!0,"text-field":"{title}","text-allow-overlap":!0,"text-anchor":"bottom","text-offset":[0,-2*r],"text-font":Th(ht),"text-size":12},paint:{"text-halo-color":"white","text-halo-width":1}}):ht.addLayer({id:n,type:"symbol",source:n,layout:{"icon-image":"{image}","icon-size":r,"icon-allow-overlap":!0}}),()=>{ht.getLayer(n)&&ht.removeLayer(n),ht.getSource(n)&&ht.removeSource(n)}),[e]);function i(o){const s=[];return o.elements&&o.elements.forEach((a,l)=>{a.items.forEach((d,f)=>{s.push({...d,image:a.type,title:`${l}-${f}`})})}),o.bases&&o.bases.forEach((a,l)=>{s.push({...a,image:"base",title:l})}),s}return W.useEffect(()=>{var s;let o=i(t);(s=ht.getSource(n))==null||s.setData({type:"FeatureCollection",features:o.map(({latitude:a,longitude:l,image:d,title:f})=>({type:"Feature",geometry:{type:"Point",coordinates:[l,a]},properties:{image:d||"default-neutral",title:f||""}}))})},[e,t]),null},cse=({positions:t,onClick:e,showStatus:n,selectedPosition:r,titleField:i})=>{const o=W.useId(),s=`${o}-clusters`,a=`${o}-direction`,l=`${o}-mission`,d=pr(O=>O.devices.items),f=pr(O=>O.mission.route),p=1,g=!0,v=!1,x="all",b=(O,D,B)=>{const U=O[D.deviceId];let J;switch(x){case"none":J=!1;break;case"all":J=!0;break;default:J=B===D.id;break}let V=f.find(oe=>oe.uav==U.name),X=V?V.id:null;return{id:D.id,deviceId:D.deviceId,name:U.name,fixTime:Uoe(D.fixTime,"seconds",v),category:PP(U.category),color:n?Woe(U.status):"neutral",rotation:D.course,direction:J,mission:!!V,missionColor:X}},S=()=>ht.getCanvas().style.cursor="pointer",M=()=>ht.getCanvas().style.cursor="",T=W.useCallback(O=>{!O.defaultPrevented&&e&&e()},[e]),C=W.useCallback(O=>{O.preventDefault();const D=O.features[0];e&&e(D.properties.id,D.properties.deviceId)},[e]),k=W.useCallback(O=>{O.preventDefault();const D=ht.queryRenderedFeatures(O.point,{layers:[s]}),B=D[0].properties.cluster_id;ht.getSource(o).getClusterExpansionZoom(B,(U,J)=>{U||ht.easeTo({center:D[0].geometry.coordinates,zoom:J})})},[s]);return W.useEffect(()=>(ht.addSource(o,{type:"geojson",data:{type:"FeatureCollection",features:[]},cluster:g,clusterMaxZoom:14,clusterRadius:50}),ht.addLayer({id:o,type:"symbol",source:o,filter:["!has","point_count"],layout:{"icon-image":"{category}-{color}","icon-size":p,"icon-allow-overlap":!0,"text-field":`{${i||"name"}}`,"text-allow-overlap":!0,"text-anchor":"bottom","text-offset":[0,-2*p],"text-font":Th(ht),"text-size":12},paint:{"text-halo-color":"white","text-halo-width":1}}),ht.addLayer({id:s,type:"symbol",source:o,filter:["has","point_count"],layout:{"icon-image":"background","icon-size":p,"text-field":"{point_count_abbreviated}","text-font":Th(ht),"text-size":14}}),ht.addLayer({id:a,type:"symbol",source:o,filter:["all",["!has","point_count"],["==","direction",!0]],layout:{"icon-image":"direction","icon-size":p,"icon-allow-overlap":!0,"icon-rotate":["get","rotation"],"icon-rotation-alignment":"map"}}),ht.addLayer({id:l,type:"symbol",source:o,filter:["all",["!has","point_count"],["==","mission",!0]],layout:{"icon-image":"mission-{missionColor}","icon-size":p}}),ht.on("mouseenter",o,S),ht.on("mouseleave",o,M),ht.on("mouseenter",s,S),ht.on("mouseleave",s,M),ht.on("click",o,C),ht.on("click",s,k),ht.on("click",T),()=>{ht.off("mouseenter",o,S),ht.off("mouseleave",o,M),ht.off("mouseenter",s,S),ht.off("mouseleave",s,M),ht.off("click",o,C),ht.off("click",s,k),ht.off("click",T),ht.getLayer(o)&&ht.removeLayer(o),ht.getLayer(s)&&ht.removeLayer(s),ht.getLayer(a)&&ht.removeLayer(a),ht.getLayer(l)&&ht.removeLayer(l),ht.getSource(o)&&ht.removeSource(o)}),[g,s,a,l,C,k]),W.useEffect(()=>{ht.getSource(o).setData({type:"FeatureCollection",features:t.filter(O=>d.hasOwnProperty(O.deviceId)).map(O=>({type:"Feature",geometry:{type:"Point",coordinates:[O.longitude,O.latitude]},properties:b(d,O,r&&r.id)}))})},[d,t,r]),null},sje=t=>{const e=W.useRef();return W.useEffect(()=>{e.current=t}),e.current},aje=()=>{const t=pr(o=>o.devices.selectedId),e=sje(t),n=10,r=!1,i=pr(o=>o.data.positions[t]);return W.useEffect(()=>{(t!==e||r)&&i&&i.hasOwnProperty("latitude")&&ht.easeTo({center:[i.longitude,i.latitude],zoom:Math.max(ht.getZoom(),n),offset:[0,-300/2]})}),null},xU=()=>{const t="km",e=W.useMemo(()=>new m1.ScaleControl,[]);return W.useEffect(()=>(ht.addControl(e,"bottom-right"),()=>ht.removeControl(e)),[e]),W.useEffect(()=>{switch(t){case"mi":e.setUnit("imperial");break;case"nmi":e.setUnit("nautical");break;case"km":default:e.setUnit("metric");break}},[e,t]),null},bU=()=>{const t=pr(a=>a.devices.selectedId),e=pr(a=>a.session.positions),n=RA("latitude"),r=RA("longitude"),i=RA("zoom",10),[o,s]=W.useState(!1);return W.useEffect(()=>{if(console.log("default"+n+"kk"+r+o),t)s(!0);else if(!o)if(n&&r)ht.jumpTo({center:[r,n],zoom:i}),s(!0);else{const a=Object.values(e).map(l=>[l.longitude,l.latitude]);if(a.length>1){const l=a.reduce((f,p)=>f.extend(p),new m1.LngLatBounds(a[0],a[1])),d=ht.getCanvas();ht.fitBounds(l,{duration:0,padding:Math.min(d.width,d.height)*.1}),s(!0)}else if(a.length){const[l]=a;ht.jumpTo({center:l,zoom:Math.max(ht.getZoom(),10)}),s(!0)}}},[t,o,n,r,i,e]),null},use=({filteredPositions:t,markers:e=[],selectedPosition:n,filteredMissiondeviceid:r=-1,onEventsClick:i})=>{const o=Yl(),s=W.useCallback((a,l)=>{o(eu.selectId(l))},[o]);return F.jsxs(F.Fragment,{children:[F.jsxs(Q$,{children:[F.jsx(oje,{markers:e}),F.jsx(lse,{filtereddeviceid:r}),F.jsx(cse,{positions:t,onClick:s,selectedPosition:n,showStatus:!0}),F.jsx(aje,{}),F.jsx(bU,{})]}),F.jsx(xU,{})]})},lje=si(t=>({root:{height:"100%"},sidebar:{pointerEvents:"none",display:"flex",flexDirection:"column",[t.breakpoints.up("md")]:{position:"fixed",left:0,top:0,height:`calc(100% - ${t.spacing(3)})`,width:t.dimensions.drawerWidthDesktop,margin:t.spacing(1.5),zIndex:3},[t.breakpoints.down("md")]:{height:"100%",width:"100%"}},header:{pointerEvents:"auto",zIndex:6},footer:{pointerEvents:"auto",zIndex:5},middle:{flex:1,display:"grid"},contentMap:{pointerEvents:"auto",gridArea:"1 / 1"},contentList:{pointerEvents:"auto",gridArea:"1 / 1",zIndex:4},sidebarStyle:{pointerEvents:"none",display:"flex",flexDirection:"column",position:"fixed",left:0,top:"88px",height:"calc(100% - 88px)",width:"360px",margin:"0px",zIndex:3},middleStyle:{flex:1,display:"grid"}})),cje=()=>{const t=lje(),e=Yl(),n=wm(),r=pr(he=>he.devices.items),i=pr(he=>he.data.positions),o=pr(he=>he.data.camera),s=pr(he=>he.devices.selectedId),a=pr(he=>he.session.markers),[l,d]=W.useState([]),[f,p]=W.useState([]),[g,v]=W.useState([]),[x,b]=W.useState(),[S,M]=W.useState(),[T,C]=W.useState(),[k,O]=W.useState(),D=`${window.location.hostname}`,B=l.find(he=>s&&he.deviceId===s),U=g.find(he=>s&&he.deviceId==s);let J=Object.values(r);W.useContext(gy);const[V,X]=W.useState(!1),[oe,pe]=W.useState([]),re=(he,ue)=>{console.log(`${he} - ${ue}`)};return W.useCallback((he,ue)=>{e(eu.selectId(ue))},[e]),W.useEffect(()=>{p(a)},[a]),W.useEffect(()=>{d(Object.values(i))},[i]),W.useEffect(()=>{v(Object.values(o))},[o]),W.useEffect(()=>{s?(b(r[s].ip),r[s].camera.length>0?(M(r[s].camera[0].type),C(r[s].camera[0].source)):M(null),O(r[s].name)):(b(null),M(null))},[s]),F.jsx("div",{className:t.root,children:F.jsxs(mE,{notification:re,children:[F.jsx(RR,{SetAddUAVOpen:X}),F.jsx(gE,{SetAddUAVOpen:X}),F.jsx("div",{style:{position:"relative",float:"right",width:"calc(100% - 360px)",height:"calc(100vh - 88px)"},children:F.jsx(use,{filteredPositions:l,markers:f,selectedPosition:B})}),F.jsxs("div",{className:t.sidebarStyle,children:[F.jsx(Gs,{square:!0,elevation:3,className:t.header,children:F.jsx(ase,{SetAddUAVOpen:X})}),F.jsx("div",{className:t.middleStyle,children:F.jsx(Gs,{square:!0,className:t.contentList,children:F.jsx(Hoe,{devices:J})})})]}),V&&F.jsx(ONe,{SetAddUAVOpen:X}),F.jsx(B$e,{deviceId:s,position:B,onClose:()=>e(eu.selectId(null)),desktopPadding:n.dimensions.drawerWidthDesktop}),F.jsx(gy.Consumer,{children:({confirmMission:he,setconfirmMission:ue,commandMission:be})=>F.jsx(q$e,{enable:he,onClose:()=>ue(!1),onSucces:()=>be()})}),S==="WebRTC"&&F.jsx(o7,{deviceId:s,deviceIp:D,camera_src:k+"_"+T,onClose:()=>e(eu.selectId(null))}),S==="WebRTC_env"&&F.jsx(o7,{deviceId:s,deviceIp:x,camera_src:T,onClose:()=>e(eu.selectId(null))}),S==="Websocket"&&F.jsx(FNe,{deviceId:s,datacamera:U,onClose:()=>e(eu.selectId(null))}),F.jsx(ENe,{toastlist:oe,position:"buttom-right",setList:pe})]})})},wU=Ze.createContext(),SU=({children:t})=>{const[e,n]=W.useState({route_id:-1,wp_id:-1});return F.jsx("div",{style:{width:"100%",height:"100%"},children:F.jsx(wU.Provider,{value:{changeWp:e,setChangeWp:n},children:t})})};class uje{constructor(){this.routes=[],this.selecwp={id:-1}}initroute(e){this.routes=JSON.parse(JSON.stringify(e))}getroute(){return this.routes}setroute(e){this.routes=e}getSelectwp(){return this.selecwp}setSelecwp(e){this.selecwp=e}}const dje=()=>{const t=W.useId(),e=`${t}-points`,n=`${t}-points-clusters`,r=pr(k=>k.mission.route);pr(k=>k.mission.selectpoint);const i=!0,o=.6,s=Yl(),[a,l]=W.useState(new uje),d=W.useContext(wU);let f=ht.getCanvasContainer();const p=()=>ht.getCanvas().style.cursor="move",g=()=>ht.getCanvas().style.cursor="",v=k=>{let O=k.lngLat;f.style.cursor="grabbing",console.log("on move point"+O.lng+"-"+O.lat);let D=a.getroute(),B=a.getSelectwp();B.id>=0&&(D[B.route_id].wp[B.id].pos[0]=k.lngLat.lat,D[B.route_id].wp[B.id].pos[1]=k.lngLat.lng);let U=C(D);ht.getSource(e).setData({type:"FeatureCollection",features:U.map(J=>({type:"Feature",geometry:{type:"Point",coordinates:[J.longitude,J.latitude]},properties:M(D,J)}))}),ht.getSource(t).setData({type:"FeatureCollection",features:D.map(J=>T(J))})},x=k=>{let O=k.lngLat;f.style.cursor="";let D=a.getSelectwp();console.log(`Longitude: ${O.lng} Latitude: ${O.lat}`),d.setChangeWp({wp_id:D.id,route_id:D.route_id,lng:k.lngLat.lng,lat:k.lngLat.lat}),a.setSelecwp({id:-1}),ht.off("mousemove",v),ht.off("touchmove",v)},b=k=>{k.preventDefault(),a.setSelecwp(k.features[0].properties),s(_f.selectpoint(k.features[0].properties)),f.style.cursor="grab",ht.on("mousemove",v),ht.once("mouseup",x)},S=k=>{k.points.length===1&&(console.log("touch start"),k.preventDefault(),ht.on("touchmove",v),ht.once("touchend",x))},M=(k,O)=>({id:O.id,route_id:O.routeid,name:k[O.routeid].name,uav:k[O.routeid].uav,latitude:k[O.routeid].wp[O.id].pos[0],longitude:k[O.routeid].wp[O.id].pos[1],altitud:k[O.routeid].wp[O.id].pos[2],yaw:k[O.routeid].wp[O.id].yaw,gimbal:k[O.routeid].wp[O.id].gimbal,actions:k[O.routeid].wp[O.id].action,attributes:k[O.routeid].attributes,category:"default",color:k[O.routeid].id});W.useEffect(()=>(console.log("render"),ht.addSource(e,{type:"geojson",data:{type:"FeatureCollection",features:[]},cluster:i,clusterMaxZoom:10,clusterRadius:50}),ht.addSource(t,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),ht.addLayer({source:t,id:"mission-line",type:"line",paint:{"line-color":["get","color"],"line-width":2}}),ht.addLayer({source:t,id:"mission-title",type:"symbol",layout:{"text-field":"{name}","text-font":Th(ht),"text-size":12},paint:{"text-halo-color":"white","text-halo-width":1}}),ht.addLayer({id:"mission-points",type:"symbol",source:e,filter:["!has","point_count"],layout:{"icon-image":"background-{color}","icon-size":o,"icon-allow-overlap":!0,"text-allow-overlap":!0,"text-field":"{id}","text-font":Th(ht),"text-size":14},paint:{"text-color":"white"}}),ht.addLayer({id:n,type:"symbol",source:e,filter:["has","point_count"],layout:{"icon-image":"background","icon-size":o,"text-field":"M","text-font":Th(ht),"text-size":14}}),ht.on("mouseenter","mission-points",p),ht.on("mouseleave","mission-points",g),ht.on("mousedown","mission-points",b),ht.on("touchstart","mission-points",S),()=>{ht.off("mouseenter","mission-points",p),ht.off("mouseleave","mission-points",g),ht.off("mousedown","mission-points",b),ht.off("touchstart","mission-points",S),ht.getLayer("mission-line")&&ht.removeLayer("mission-line"),ht.getLayer("mission-title")&&ht.removeLayer("mission-title"),ht.getLayer("mission-points")&&ht.removeLayer("mission-points"),ht.getLayer(n)&&ht.removeLayer(n),ht.getSource(t)&&ht.removeSource(t),ht.getSource(e)&&ht.removeSource(e)}),[]);function T(k){let O=Object.values(k.wp).map(function(D){return[D.pos[1],D.pos[0]]});return{id:k.id,type:"Feature",geometry:{type:"LineString",coordinates:O},properties:{name:k.uav,color:hy.colors_devices[k.id]}}}function C(k){let O=[];return k.map((D,B)=>{D.wp.map((U,J)=>{O.push({longitude:U.pos[1],latitude:U.pos[0],id:J,routeid:B})})}),O}return W.useEffect(()=>{console.log("Mapmission upload mission"),a.initroute(r);let k=C(r);ht.getSource(e).setData({type:"FeatureCollection",features:k.map(O=>({type:"Feature",geometry:{type:"Point",coordinates:[O.longitude,O.latitude]},properties:M(r,O)}))}),ht.getSource(t).setData({type:"FeatureCollection",features:r.map(O=>T(O))})},[r]),null};var MU={},hje=oi;Object.defineProperty(MU,"__esModule",{value:!0});var dse=MU.default=void 0,fje=hje(bi()),pje=F;dse=MU.default=(0,fje.default)((0,pje.jsx)("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7"}),"MyLocation");const mje=si(t=>({list:{maxHeight:"100%",overflow:"auto"},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},attributeName:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attributeValue:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),gje=({mission:t,setmission:e,index:n,index_wp:r,waypoint:i,expand_wp:o,AddnewWp:s})=>{const a=mje(),[l,d]=W.useState(!1),[f,p]=W.useState(!0),[g,v]=W.useState(0),[x,b]=W.useState(!1);W.useEffect(()=>{console.log("render waypoint"+n+"-"+r)},[]),W.useEffect(()=>{b(o)},[o]);const S=D=>(B,U)=>{b(U?D:!1)};async function M(D,B){let U;const J=await fetch("/api/category/actions/dji_M210_noetic");if(J.ok)U=await J.json();else throw Error(await J.text());let V=U.find(oe=>oe.id==g),X=JSON.parse(JSON.stringify(t.route));X[D].wp[B].hasOwnProperty("action")||(X[D].wp[B].action={}),V.param?X[D].wp[B].action[V.name]=0:X[D].wp[B].action[V.name]=!0,e({...t,route:X}),p(!0)}const T=(D,B)=>{console.log("remove wp"+D+"-"+B);let U=[...t.route],J=[...t.route[D].wp];J.splice(B,1);let V={...U[D],wp:J};U[D]=V,e({...t,route:U})},C=(D,B,U)=>{console.log("remove action"+D+"-"+B+"-"+U);let J=JSON.parse(JSON.stringify(t.route));delete J[D].wp[B].action[U],e({...t,route:J})},k=D=>(B,U)=>{d(U?D:!1)},O=D=>(B,U)=>{p(!1)};return F.jsxs(pl,{expanded:x==="wp "+r,onChange:S("wp "+r),children:[F.jsxs(gl,{expandIcon:F.jsx(La,{}),children:[F.jsx(Bn,{sx:{width:"33%",flexShrink:0},children:"WP "+r}),F.jsx(br,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>T(n,r),children:F.jsx(yu,{})})]}),F.jsx(ml,{className:a.details,children:x==="wp "+r&&F.jsxs(W.Fragment,{children:[F.jsxs(hs,{component:"form",sx:{"& .MuiTextField-root":{m:1}},children:[F.jsx("div",{children:F.jsx(Bn,{variant:"subtitle1",style:{display:"inline"},children:"Position"})}),F.jsx(gi,{required:!0,label:"Latitud ",type:"number",sx:{width:"15ch"},variant:"standard",inputProps:{maxLength:16,step:1e-4},value:i.pos?i.pos[0]:0,onChange:D=>e({...t,route:t.route.map(B=>{let U=JSON.parse(JSON.stringify(B));return B==t.route[n]?U.wp[r].pos[0]=+D.target.value:U=B,U})})}),F.jsx(gi,{required:!0,label:"Longitud ",type:"number",variant:"standard",sx:{width:"15ch"},inputProps:{maxLength:16,step:1e-4},value:i.pos?i.pos[1]:0,onChange:D=>e({...t,route:t.route.map(B=>{let U=JSON.parse(JSON.stringify(B));return B==t.route[n]?U.wp[r].pos[1]=+D.target.value:U=B,U})})}),F.jsx(gi,{required:!0,label:"altura ",type:"number",variant:"standard",sx:{width:"7ch"},value:i.pos?i.pos[2]:0,onChange:D=>e({...t,route:t.route.map(B=>{let U=JSON.parse(JSON.stringify(B));return B==t.route[n]?U.wp[r].pos[2]=+D.target.value:U=B,U})})})]}),F.jsx(gi,{required:!0,label:"Speed ",type:"number",variant:"standard",value:i.speed?i.speed:t.route[n].attributes.idle_vel,onChange:D=>e({...t,route:t.route.map(B=>{let U=JSON.parse(JSON.stringify(B));return t.route[n]?U.wp[r].speed=+D.target.value:U=B,U})})}),F.jsx(gi,{required:!0,label:"YAW ",type:"number",variant:"standard",value:i.yaw?i.yaw:0,onChange:D=>e({...t,route:t.route.map(B=>{let U=JSON.parse(JSON.stringify(B));return B==t.route[n]?U.wp[r].yaw=+D.target.value:U=B,U})})}),F.jsx(gi,{required:!0,label:"Gimbal ",type:"number",variant:"standard",value:i.gimbal?i.gimbal:0,onChange:D=>e({...t,route:t.route.map(B=>{let U=JSON.parse(JSON.stringify(B));return B==t.route[n]?U.wp[r].gimbal=+D.target.value:U=B,U})})}),F.jsxs(pl,{expanded:l==="wp "+r,onChange:k("wp "+r),children:[F.jsx(gl,{expandIcon:F.jsx(La,{}),children:F.jsx(Bn,{sx:{width:"33%",flexShrink:0},children:"Actions"})}),F.jsxs(ml,{className:a.details,children:[i.action&&Ze.Children.toArray(Object.keys(i.action).map((D,B,U)=>F.jsxs(W.Fragment,{children:[F.jsxs("div",{children:[F.jsx(Bn,{variant:"subtitle1",className:a.attributeName,children:D}),F.jsx("div",{className:a.actionValue,children:F.jsx(gi,{required:!0,fullWidth:!0,value:i.action[D]?i.action[D]:0,onChange:J=>e({...t,route:t.route.map(V=>{let X=JSON.parse(JSON.stringify(V));return V==t.route[n]?X.wp[r].action[D]=J.target.value:X=V,X})})})}),F.jsx(br,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>C(n,r,D),className:a.negative,children:F.jsx(yu,{})})]}),F.jsx(Tb,{})]},"fragment-action-"+B))),F.jsx(hs,{textAlign:"center",children:f?F.jsx(jr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:O(),children:"Add new action"}):F.jsxs("div",{children:[F.jsx(Bn,{variant:"subtitle1",children:"Tipo de acccion a aadir"}),F.jsx(sd,{emptyValue:null,fullWidth:!0,value:g,onChange:D=>v(D.target.value),endpoint:"/api/category/actions/dji_M210_noetic",keyGetter:D=>D.id,titleGetter:D=>D.description}),F.jsxs("div",{children:[F.jsx(jr,{onClick:()=>p(!0),children:"Cancel"}),F.jsx(jr,{onClick:()=>M(n,r),children:"Add"})]})]})})]})]}),F.jsx(hs,{textAlign:"center",children:F.jsx(jr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:()=>s(n,r),children:"Add new Waypoint"})})]})})]})},yje=si(t=>({list:{maxHeight:"100%",overflow:"auto"},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},attribute:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attributeValue:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),vje=({mission:t,setmission:e,setScrool:n})=>{const r=yje(),i=pr(O=>O.mission),o=pr(O=>O.mission.selectpoint),s=Yl(),[a,l]=W.useState(!1),[d,f]=W.useState(!1),[p,g]=W.useState(!1),[v,x]=W.useState(!0);W.useEffect(()=>{console.log("render Router list")},[]),W.useEffect(()=>{e(i),i.route.length>0?x(!1):x(!0),l(!0)},[i]),W.useEffect(()=>{a&&(console.log("update mission"),s(_f.reloadMission(t.route))),t.route.length>0?x(!1):x(!0)},[t.route]),W.useEffect(()=>{a&&s(_f.reloadName({name:t.name,description:t.description}))},[t.name,t.description]),W.useEffect(()=>{f("Rute "+o.route_id),g("wp "+o.id),n(500+o.route_id*50+o.id*50)},[o]);const b=()=>{e({name:"new Mission",description:"",route:[]}),x(!1),S(),console.log("add new mission")},S=()=>{let O=[...t.route],D=O.length>0?+O.slice(-1)[0].id+1:0,B={max_vel:12,idle_vel:3,mode_yaw:2,mode_gimbal:0,mode_trace:0,mode_landing:2};O.push({name:"",uav:"",id:D,attributes:B,wp:[]}),e({...t,route:O})},M=(O,D)=>{console.log("add new wp"+O);let B=JSON.parse(JSON.stringify(t.route)),U=ht.getCenter();D>0&&(U.lat=(B[O].wp[D].pos[0]+B[O].wp[D-1].pos[0])/2,U.lng=(B[O].wp[D].pos[1]+B[O].wp[D-1].pos[1])/2),D<0?B[O].wp.push({pos:[U.lat,U.lng,5],action:{}}):B[O].wp.splice(D,0,{pos:[U.lat,U.lng,5],action:{}}),e({...t,route:B})},T=O=>{console.log("remove route"+O);let D=JSON.parse(JSON.stringify(t.route));D.splice(O,1),e({...t,route:D})},C=O=>(D,B)=>{f(B?O:!1)},k=O=>(D,B)=>{g(B?O:!1)};return F.jsx(W.Fragment,{children:v?F.jsx(hs,{textAlign:"center",children:F.jsx(jr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:b,children:"Create New Mission"})}):F.jsx(W.Fragment,{children:F.jsxs(hs,{style:{display:"flex",gap:"10px",flexDirection:"column",margin:"20px"},children:[F.jsx(gi,{required:!0,label:"Name Mission",variant:"standard",value:t.name?t.name:" ",onChange:O=>e({...t,name:O.target.value})}),F.jsx(gi,{required:!0,label:"Description of mission",variant:"standard",value:t.description?t.description:" ",onChange:O=>e({...t,description:O.target.value})}),Ze.Children.toArray(Object.values(t.route).map((O,D,B)=>F.jsxs(W.Fragment,{children:[F.jsxs(pl,{expanded:d==="Rute "+D,onChange:C("Rute "+D),children:[F.jsxs(gl,{expandIcon:F.jsx(La,{}),children:[F.jsx(Bn,{sx:{width:"33%",flexShrink:0,color:hy.colors_devices[O.id]},children:"Rute "+D}),F.jsx(Bn,{sx:{color:"text.secondary"},children:O.name+"- "+O.uav}),F.jsx(br,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>T(D),children:F.jsx(yu,{})})]}),F.jsx(ml,{className:r.details,children:d==="Rute "+D&&F.jsxs(W.Fragment,{children:[F.jsx(gi,{required:!0,label:"Route Name",variant:"standard",value:O.name?O.name:"",onChange:U=>e({...t,route:t.route.map(J=>J==t.route[D]?{...O,name:U.target.value}:J)})}),F.jsx(gi,{required:!0,label:"UAV id",variant:"standard",value:O.uav?O.uav:"uav_",onChange:U=>e({...t,route:t.route.map(J=>J==t.route[D]?{...O,uav:U.target.value}:J)})}),F.jsx(sd,{emptyValue:null,value:O.uav_type?O.uav_type:"",onChange:U=>e({...t,route:t.route.map(J=>J==t.route[D]?{...O,uav_type:U.target.value}:J)}),endpoint:"/api/category",keyGetter:U=>U,titleGetter:U=>U,label:"Type UAV mission",style:{display:"inline",width:"200px"}}),F.jsxs(pl,{expanded:p==="wp -"+D,onChange:k("wp -"+D),children:[F.jsx(gl,{expandIcon:F.jsx(La,{}),children:F.jsx(Bn,{sx:{width:"53%",flexShrink:0},children:"Route Attributes"})}),F.jsx(ml,{className:r.details,children:O.attributes&&F.jsxs(W.Fragment,{children:[F.jsxs("div",{children:[F.jsx(Bn,{variant:"subtitle1",className:r.attribute,children:"Speed Mode"}),F.jsx("div",{className:r.attributeValue,children:F.jsx(sd,{emptyValue:null,fullWidth:!0,value:O.attributes.mode_speed?O.attributes.mode_speed:0,onChange:U=>e({...t,route:t.route.map(J=>{let V=JSON.parse(JSON.stringify(J));return J===t.route[D]?V.attributes.mode_speed=U.target.value:V=J,V})}),endpoint:"/api/category/atributesparam/dji_M300/mode_speed",keyGetter:U=>U.id,titleGetter:U=>U.name})})]}),F.jsxs("div",{children:[F.jsx(Bn,{variant:"subtitle1",className:r.attribute,children:"Speed idle (m/s):"}),F.jsx(gi,{fullWidth:!0,required:!0,type:"number",className:r.attributeValue,value:O.attributes.idle_vel?O.attributes.idle_vel:1.85,onChange:U=>e({...t,route:t.route.map(J=>{let V=JSON.parse(JSON.stringify(J));return J==t.route[D]?V.attributes.idle_vel=+U.target.value:V=J,V})})})]}),F.jsxs("div",{children:[F.jsx(Bn,{variant:"subtitle1",className:r.attribute,children:"Speed MAX (m/s):"}),F.jsx(gi,{fullWidth:!0,required:!0,type:"number",className:r.attributeValue,value:O.attributes.max_vel?O.attributes.max_vel:12,onChange:U=>e({...t,route:t.route.map(J=>{let V=JSON.parse(JSON.stringify(J));return J==t.route[D]?V.attributes.max_vel=+U.target.value:V=J,V})})})]}),F.jsxs("div",{children:[F.jsx(Bn,{variant:"subtitle1",className:r.attribute,children:"landing mode"}),F.jsx("div",{className:r.attributeValue,children:F.jsx(sd,{emptyValue:null,fullWidth:!0,value:O.attributes.mode_landing?O.attributes.mode_landing:0,onChange:U=>e({...t,route:t.route.map(J=>{let V=JSON.parse(JSON.stringify(J));return J===t.route[D]?V.attributes.mode_landing=U.target.value:V=J,V})}),endpoint:"/api/category/atributesparam/dji_M300/mode_landing",keyGetter:U=>U.id,titleGetter:U=>U.name})})]}),F.jsxs("div",{children:[F.jsx(Bn,{variant:"subtitle1",className:r.attribute,children:"Yaw mode"}),F.jsx("div",{className:r.attributeValue,children:F.jsx(sd,{emptyValue:null,fullWidth:!0,value:O.attributes.mode_yaw?O.attributes.mode_yaw:0,onChange:U=>e({...t,route:t.route.map(J=>{let V=JSON.parse(JSON.stringify(J));return J===t.route[D]?V.attributes.mode_yaw=U.target.value:V=J,V})}),endpoint:"/api/category/atributesparam/dji_M300/mode_yaw",keyGetter:U=>U.id,titleGetter:U=>U.name})})]}),F.jsxs("div",{children:[F.jsx(Bn,{variant:"subtitle1",className:r.attribute,children:"Gimbal mode"}),F.jsx("div",{className:r.attributeValue,children:F.jsx(sd,{emptyValue:null,fullWidth:!0,value:O.attributes.mode_gimbal?O.attributes.mode_gimbal:0,onChange:U=>e({...t,route:t.route.map(J=>{let V=JSON.parse(JSON.stringify(J));return J===t.route[D]?V.attributes.mode_gimbal=U.target.value:V=J,V})}),endpoint:"/api/category/atributesparam/dji_M300/mode_gimbal",keyGetter:U=>U.id,titleGetter:U=>U.name})})]}),F.jsxs("div",{children:[F.jsx(Bn,{variant:"subtitle1",className:r.attribute,children:"Trace mode:"}),F.jsx("div",{className:r.attributeValue,children:F.jsx(sd,{emptyValue:null,fullWidth:!0,value:O.attributes.mode_trace?O.attributes.mode_trace:0,onChange:U=>e({...t,route:t.route.map(J=>{let V=JSON.parse(JSON.stringify(J));return J===t.route[D]?V.attributes.mode_trace=U.target.value:V=J,V})}),endpoint:"/api/category/atributesparam/dji_M300/mode_trace",keyGetter:U=>U.id,titleGetter:U=>U.name})})]})]},"fragment-route-atri-"+O.id)})]}),F.jsx(Bn,{variant:"subtitle1",children:"Waypoints"}),Ze.Children.toArray(Object.values(O.wp).map((U,J,V)=>F.jsx(gje,{mission:t,setmission:e,index_wp:J,index:D,waypoint:U,AddnewWp:M,expand_wp:p}))),F.jsx(hs,{textAlign:"center",children:F.jsx(jr,{value:D,variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:U=>M(U.target.value,-1),children:"Add new Waypoint"})})]})})]}),D<B.length-1?F.jsx(Tb,{}):null]},"fragment-route-"+D))),F.jsx(hs,{textAlign:"center",children:F.jsx(jr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:S,children:"Add new Route"})})]})})})};var EU={},_je=oi;Object.defineProperty(EU,"__esModule",{value:!0});var bE=EU.default=void 0,xje=_je(bi()),bje=F;bE=EU.default=(0,xje.default)((0,bje.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack");var TU={},wje=oi;Object.defineProperty(TU,"__esModule",{value:!0});var CU=TU.default=void 0,Sje=wje(bi()),Mje=F;CU=TU.default=(0,Sje.default)((0,Mje.jsx)("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7zm-6 .67 2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"}),"SaveAlt");const Eje=si(t=>({toolbar:{display:"flex",gap:"10px 10px",height:"30px",borderBottom:"3px solid rgb(212, 212, 212)"},list:{maxHeight:"calc(100vh - 152px)",overflowY:"auto"},title:{flexGrow:1},fileInput:{display:"none"}})),hse=({SetOpenSave:t})=>{const e=Eje(),n=Sy(),r=W.useContext(gy),i=W.useRef(null),[o,s]=W.useState(!1),a=W.useContext(wU),l=()=>{s(b=>!b)},[d,f]=W.useState({name:"no mission",description:"",route:[]});W.useEffect(()=>{if(a.changeWp.route_id>=0)if(o){let b=JSON.parse(JSON.stringify(d.route)),S=a.changeWp.lat-b[a.changeWp.route_id].wp[a.changeWp.wp_id].pos[0],M=a.changeWp.lng-b[a.changeWp.route_id].wp[a.changeWp.wp_id].pos[1],T=b[a.changeWp.route_id].wp.map(C=>{let k=C;return k.pos[0]=S+C.pos[0],k.pos[1]=M+C.pos[1],k});b[a.changeWp.route_id].wp=T,f({...d,route:b})}else{let b=JSON.parse(JSON.stringify(d.route));b[a.changeWp.route_id].wp[a.changeWp.wp_id].pos[0]=a.changeWp.lat,b[a.changeWp.route_id].wp[a.changeWp.wp_id].pos[1]=a.changeWp.lng,f({...d,route:b})}},[a.changeWp]);const p=b=>{console.log("scrool"+b),i.current.scroll&&setTimeout(()=>{i.current.scroll(0,b)},1e3)},g=b=>{const S=b.target.files[0];if(!S)return;const M=new FileReader;M.readAsText(S),M.onload=()=>{console.log(M.result),console.log(S.name),r.openMision(S.name,M.result)},M.onerror=()=>{console.log(M.error)}},v=()=>{f({name:"no mission",description:"",route:[]})},x=()=>{console.log("save mission"),t(!0)};return F.jsxs(W.Fragment,{children:[F.jsxs(z0,{className:e.toolbar,children:[F.jsx(br,{edge:"start",sx:{mr:2},onClick:()=>n(-1),children:F.jsx(bE,{})}),F.jsx(Bn,{variant:"h6",className:e.title,children:"Mission Task"}),F.jsx(Bn,{children:"Group Route"}),F.jsx(Kne,{checked:o,onChange:l,name:"checkedA",inputProps:{"aria-label":"secondary checkbox"}}),F.jsx(br,{onClick:x,children:F.jsx(CU,{})}),F.jsx(br,{onClick:v,children:F.jsx(yu,{})}),F.jsxs("label",{htmlFor:"upload-gpx",children:[F.jsx("input",{accept:".yaml, .plan, .waypoint, .kml",id:"upload-gpx",type:"file",className:e.fileInput,onChange:g}),F.jsx(br,{edge:"end",component:"span",onClick:()=>{},children:F.jsx(yj,{})})]})]}),F.jsx("div",{ref:i,className:e.list,children:F.jsx(vje,{mission:d,setmission:f,setScrool:p})})]})};var Tje=Array.isArray,Ac=Tje,Cje=typeof cx=="object"&&cx&&cx.Object===Object&&cx,fse=Cje,Aje=fse,Pje=typeof self=="object"&&self&&self.Object===Object&&self,Ije=Aje||Pje||Function("return this")(),Gf=Ije,kje=Gf,Rje=kje.Symbol,wE=Rje,s7=wE,pse=Object.prototype,Oje=pse.hasOwnProperty,Lje=pse.toString,zw=s7?s7.toStringTag:void 0;function Dje(t){var e=Oje.call(t,zw),n=t[zw];try{t[zw]=void 0;var r=!0}catch{}var i=Lje.call(t);return r&&(e?t[zw]=n:delete t[zw]),i}var Nje=Dje,zje=Object.prototype,Fje=zje.toString;function Bje(t){return Fje.call(t)}var $je=Bje,a7=wE,jje=Nje,Uje=$je,Vje="[object Null]",Wje="[object Undefined]",l7=a7?a7.toStringTag:void 0;function Hje(t){return t==null?t===void 0?Wje:Vje:l7&&l7 in Object(t)?jje(t):Uje(t)}var Cm=Hje;function Gje(t){return t!=null&&typeof t=="object"}var Am=Gje,qje=Cm,Yje=Am,Xje="[object Symbol]";function Kje(t){return typeof t=="symbol"||Yje(t)&&qje(t)==Xje}var T1=Kje,Zje=Ac,Jje=T1,Qje=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,eUe=/^\w*$/;function tUe(t,e){if(Zje(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Jje(t)?!0:eUe.test(t)||!Qje.test(t)||e!=null&&t in Object(e)}var AU=tUe;function nUe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ty=nUe;const C1=xi(Ty);var rUe=Cm,iUe=Ty,oUe="[object AsyncFunction]",sUe="[object Function]",aUe="[object GeneratorFunction]",lUe="[object Proxy]";function cUe(t){if(!iUe(t))return!1;var e=rUe(t);return e==sUe||e==aUe||e==oUe||e==lUe}var PU=cUe;const qr=xi(PU);var uUe=Gf,dUe=uUe["__core-js_shared__"],hUe=dUe,b3=hUe,c7=function(){var t=/[^.]+$/.exec(b3&&b3.keys&&b3.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function fUe(t){return!!c7&&c7 in t}var pUe=fUe,mUe=Function.prototype,gUe=mUe.toString;function yUe(t){if(t!=null){try{return gUe.call(t)}catch{}try{return t+""}catch{}}return""}var mse=yUe,vUe=PU,_Ue=pUe,xUe=Ty,bUe=mse,wUe=/[\\^$.*+?()[\]{}|]/g,SUe=/^\[object .+?Constructor\]$/,MUe=Function.prototype,EUe=Object.prototype,TUe=MUe.toString,CUe=EUe.hasOwnProperty,AUe=RegExp("^"+TUe.call(CUe).replace(wUe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function PUe(t){if(!xUe(t)||_Ue(t))return!1;var e=vUe(t)?AUe:SUe;return e.test(bUe(t))}var IUe=PUe;function kUe(t,e){return t==null?void 0:t[e]}var RUe=kUe,OUe=IUe,LUe=RUe;function DUe(t,e){var n=LUe(t,e);return OUe(n)?n:void 0}var U0=DUe,NUe=U0,zUe=NUe(Object,"create"),YR=zUe,u7=YR;function FUe(){this.__data__=u7?u7(null):{},this.size=0}var BUe=FUe;function $Ue(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var jUe=$Ue,UUe=YR,VUe="__lodash_hash_undefined__",WUe=Object.prototype,HUe=WUe.hasOwnProperty;function GUe(t){var e=this.__data__;if(UUe){var n=e[t];return n===VUe?void 0:n}return HUe.call(e,t)?e[t]:void 0}var qUe=GUe,YUe=YR,XUe=Object.prototype,KUe=XUe.hasOwnProperty;function ZUe(t){var e=this.__data__;return YUe?e[t]!==void 0:KUe.call(e,t)}var JUe=ZUe,QUe=YR,e6e="__lodash_hash_undefined__";function t6e(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=QUe&&e===void 0?e6e:e,this}var n6e=t6e,r6e=BUe,i6e=jUe,o6e=qUe,s6e=JUe,a6e=n6e;function A1(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}A1.prototype.clear=r6e;A1.prototype.delete=i6e;A1.prototype.get=o6e;A1.prototype.has=s6e;A1.prototype.set=a6e;var l6e=A1;function c6e(){this.__data__=[],this.size=0}var u6e=c6e;function d6e(t,e){return t===e||t!==t&&e!==e}var IU=d6e,h6e=IU;function f6e(t,e){for(var n=t.length;n--;)if(h6e(t[n][0],e))return n;return-1}var XR=f6e,p6e=XR,m6e=Array.prototype,g6e=m6e.splice;function y6e(t){var e=this.__data__,n=p6e(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():g6e.call(e,n,1),--this.size,!0}var v6e=y6e,_6e=XR;function x6e(t){var e=this.__data__,n=_6e(e,t);return n<0?void 0:e[n][1]}var b6e=x6e,w6e=XR;function S6e(t){return w6e(this.__data__,t)>-1}var M6e=S6e,E6e=XR;function T6e(t,e){var n=this.__data__,r=E6e(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var C6e=T6e,A6e=u6e,P6e=v6e,I6e=b6e,k6e=M6e,R6e=C6e;function P1(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}P1.prototype.clear=A6e;P1.prototype.delete=P6e;P1.prototype.get=I6e;P1.prototype.has=k6e;P1.prototype.set=R6e;var KR=P1,O6e=U0,L6e=Gf,D6e=O6e(L6e,"Map"),kU=D6e,d7=l6e,N6e=KR,z6e=kU;function F6e(){this.size=0,this.__data__={hash:new d7,map:new(z6e||N6e),string:new d7}}var B6e=F6e;function $6e(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var j6e=$6e,U6e=j6e;function V6e(t,e){var n=t.__data__;return U6e(e)?n[typeof e=="string"?"string":"hash"]:n.map}var ZR=V6e,W6e=ZR;function H6e(t){var e=W6e(this,t).delete(t);return this.size-=e?1:0,e}var G6e=H6e,q6e=ZR;function Y6e(t){return q6e(this,t).get(t)}var X6e=Y6e,K6e=ZR;function Z6e(t){return K6e(this,t).has(t)}var J6e=Z6e,Q6e=ZR;function e8e(t,e){var n=Q6e(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var t8e=e8e,n8e=B6e,r8e=G6e,i8e=X6e,o8e=J6e,s8e=t8e;function I1(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}I1.prototype.clear=n8e;I1.prototype.delete=r8e;I1.prototype.get=i8e;I1.prototype.has=o8e;I1.prototype.set=s8e;var RU=I1,gse=RU,a8e="Expected a function";function OU(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(a8e);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(OU.Cache||gse),n}OU.Cache=gse;var yse=OU;const l8e=xi(yse);var c8e=yse,u8e=500;function d8e(t){var e=c8e(t,function(r){return n.size===u8e&&n.clear(),r}),n=e.cache;return e}var h8e=d8e,f8e=h8e,p8e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,m8e=/\\(\\)?/g,g8e=f8e(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(p8e,function(n,r,i,o){e.push(i?o.replace(m8e,"$1"):r||n)}),e}),y8e=g8e;function v8e(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var LU=v8e,h7=wE,_8e=LU,x8e=Ac,b8e=T1,w8e=1/0,f7=h7?h7.prototype:void 0,p7=f7?f7.toString:void 0;function vse(t){if(typeof t=="string")return t;if(x8e(t))return _8e(t,vse)+"";if(b8e(t))return p7?p7.call(t):"";var e=t+"";return e=="0"&&1/t==-w8e?"-0":e}var S8e=vse,M8e=S8e;function E8e(t){return t==null?"":M8e(t)}var _se=E8e,T8e=Ac,C8e=AU,A8e=y8e,P8e=_se;function I8e(t,e){return T8e(t)?t:C8e(t,e)?[t]:A8e(P8e(t))}var xse=I8e,k8e=T1,R8e=1/0;function O8e(t){if(typeof t=="string"||k8e(t))return t;var e=t+"";return e=="0"&&1/t==-R8e?"-0":e}var JR=O8e,L8e=xse,D8e=JR;function N8e(t,e){e=L8e(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[D8e(e[n++])];return n&&n==r?t:void 0}var DU=N8e,z8e=DU;function F8e(t,e,n){var r=t==null?void 0:z8e(t,e);return r===void 0?n:r}var bse=F8e;const md=xi(bse);function B8e(t){return t==null}var $8e=B8e;const ri=xi($8e);var j8e=Cm,U8e=Ac,V8e=Am,W8e="[object String]";function H8e(t){return typeof t=="string"||!U8e(t)&&V8e(t)&&j8e(t)==W8e}var G8e=H8e;const SE=xi(G8e);var wse={exports:{}},ji={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ha=typeof Symbol=="function"&&Symbol.for,NU=ha?Symbol.for("react.element"):60103,zU=ha?Symbol.for("react.portal"):60106,QR=ha?Symbol.for("react.fragment"):60107,eO=ha?Symbol.for("react.strict_mode"):60108,tO=ha?Symbol.for("react.profiler"):60114,nO=ha?Symbol.for("react.provider"):60109,rO=ha?Symbol.for("react.context"):60110,FU=ha?Symbol.for("react.async_mode"):60111,iO=ha?Symbol.for("react.concurrent_mode"):60111,oO=ha?Symbol.for("react.forward_ref"):60112,sO=ha?Symbol.for("react.suspense"):60113,q8e=ha?Symbol.for("react.suspense_list"):60120,aO=ha?Symbol.for("react.memo"):60115,lO=ha?Symbol.for("react.lazy"):60116,Y8e=ha?Symbol.for("react.block"):60121,X8e=ha?Symbol.for("react.fundamental"):60117,K8e=ha?Symbol.for("react.responder"):60118,Z8e=ha?Symbol.for("react.scope"):60119;function Mu(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case NU:switch(t=t.type,t){case FU:case iO:case QR:case tO:case eO:case sO:return t;default:switch(t=t&&t.$$typeof,t){case rO:case oO:case lO:case aO:case nO:return t;default:return e}}case zU:return e}}}function Sse(t){return Mu(t)===iO}ji.AsyncMode=FU;ji.ConcurrentMode=iO;ji.ContextConsumer=rO;ji.ContextProvider=nO;ji.Element=NU;ji.ForwardRef=oO;ji.Fragment=QR;ji.Lazy=lO;ji.Memo=aO;ji.Portal=zU;ji.Profiler=tO;ji.StrictMode=eO;ji.Suspense=sO;ji.isAsyncMode=function(t){return Sse(t)||Mu(t)===FU};ji.isConcurrentMode=Sse;ji.isContextConsumer=function(t){return Mu(t)===rO};ji.isContextProvider=function(t){return Mu(t)===nO};ji.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===NU};ji.isForwardRef=function(t){return Mu(t)===oO};ji.isFragment=function(t){return Mu(t)===QR};ji.isLazy=function(t){return Mu(t)===lO};ji.isMemo=function(t){return Mu(t)===aO};ji.isPortal=function(t){return Mu(t)===zU};ji.isProfiler=function(t){return Mu(t)===tO};ji.isStrictMode=function(t){return Mu(t)===eO};ji.isSuspense=function(t){return Mu(t)===sO};ji.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===QR||t===iO||t===tO||t===eO||t===sO||t===q8e||typeof t=="object"&&t!==null&&(t.$$typeof===lO||t.$$typeof===aO||t.$$typeof===nO||t.$$typeof===rO||t.$$typeof===oO||t.$$typeof===X8e||t.$$typeof===K8e||t.$$typeof===Z8e||t.$$typeof===Y8e)};ji.typeOf=Mu;wse.exports=ji;var FF=wse.exports,J8e=Cm,Q8e=Am,eVe="[object Number]";function tVe(t){return typeof t=="number"||Q8e(t)&&J8e(t)==eVe}var Mse=tVe;const nVe=xi(Mse);var rVe=Mse;function iVe(t){return rVe(t)&&t!=+t}var oVe=iVe;const ME=xi(oVe);var Sh=function(e){return e===0?0:e>0?1:-1},Gv=function(e){return SE(e)&&e.indexOf("%")===e.length-1},Cn=function(e){return nVe(e)&&!ME(e)},Ws=function(e){return Cn(e)||SE(e)},sVe=0,EE=function(e){var n=++sVe;return"".concat(e||"").concat(n)},kb=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Cn(e)&&!SE(e))return r;var o;if(Gv(e)){var s=e.indexOf("%");o=n*parseFloat(e.slice(0,s))/100}else o=+e;return ME(o)&&(o=r),i&&o>n&&(o=n),o},Ng=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},aVe=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},yh=function(e,n){return Cn(e)&&Cn(n)?function(r){return e+r*(n-e)}:function(){return n}};function tI(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):md(r,e))===n})}function tb(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function BF(t){"@babel/helpers - typeof";return BF=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BF(t)}var lVe=["viewBox","children"],cVe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],m7=["points","pathLength"],w3={svg:lVe,polygon:m7,polyline:m7},BU=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],nI=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(W.isValidElement(e)&&(r=e.props),!C1(r))return null;var i={};return Object.keys(r).forEach(function(o){BU.includes(o)&&(i[o]=n||function(s){return r[o](r,s)})}),i},uVe=function(e,n,r){return function(i){return e(n,r,i),null}},rI=function(e,n,r){if(!C1(e)||BF(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var s=e[o];BU.includes(o)&&typeof s=="function"&&(i||(i={}),i[o]=uVe(s,n,r))}),i},dVe=["children"],hVe=["children"];function g7(t,e){if(t==null)return{};var n=fVe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fVe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function $F(t){"@babel/helpers - typeof";return $F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$F(t)}var y7={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},em=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},v7=null,S3=null,$U=function t(e){if(e===v7&&Array.isArray(S3))return S3;var n=[];return W.Children.forEach(e,function(r){ri(r)||(FF.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),S3=n,v7=e,n};function gd(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return em(i)}):r=[em(e)],$U(t).forEach(function(i){var o=md(i,"type.displayName")||md(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}function Zc(t,e){var n=gd(t,e);return n&&n[0]}var _7=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!Cn(r)||r<=0||!Cn(i)||i<=0)},pVe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],mVe=function(e){return e&&e.type&&SE(e.type)&&pVe.indexOf(e.type)>=0},gVe=function(e){return e&&$F(e)==="object"&&"cx"in e&&"cy"in e&&"r"in e},yVe=function(e,n,r,i){var o,s=(o=w3==null?void 0:w3[i])!==null&&o!==void 0?o:[];return!qr(e)&&(i&&s.includes(n)||cVe.includes(n))||r&&BU.includes(n)},ni=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(W.isValidElement(e)&&(i=e.props),!C1(i))return null;var o={};return Object.keys(i).forEach(function(s){var a;yVe((a=i)===null||a===void 0?void 0:a[s],s,n,r)&&(o[s]=i[s])}),o},jF=function t(e,n){if(e===n)return!0;var r=W.Children.count(e);if(r!==W.Children.count(n))return!1;if(r===0)return!0;if(r===1)return x7(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=e[i],s=n[i];if(Array.isArray(o)||Array.isArray(s)){if(!t(o,s))return!1}else if(!x7(o,s))return!1}return!0},x7=function(e,n){if(ri(e)&&ri(n))return!0;if(!ri(e)&&!ri(n)){var r=e.props||{},i=r.children,o=g7(r,dVe),s=n.props||{},a=s.children,l=g7(s,hVe);return i&&a?tb(o,l)&&jF(i,a):!i&&!a?tb(o,l):!1}return!1},b7=function(e,n){var r=[],i={};return $U(e).forEach(function(o,s){if(mVe(o))r.push(o);else if(o){var a=em(o.type),l=n[a]||{},d=l.handler,f=l.once;if(d&&(!f||!i[a])){var p=d(o,a,s);r.push(p),i[a]=!0}}}),r},vVe=function(e){var n=e&&e.type;return n&&y7[n]?y7[n]:null},_Ve=function(e,n){return $U(n).indexOf(e)},xVe=["children","width","height","viewBox","className","style","title","desc"];function UF(){return UF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UF.apply(this,arguments)}function bVe(t,e){if(t==null)return{};var n=wVe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function wVe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function VF(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,o=t.className,s=t.style,a=t.title,l=t.desc,d=bVe(t,xVe),f=i||{width:n,height:r,x:0,y:0},p=qt("recharts-surface",o);return Ze.createElement("svg",UF({},ni(d,!0,"svg"),{className:p,width:n,height:r,style:s,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),Ze.createElement("title",null,a),Ze.createElement("desc",null,l),e)}var SVe=["children","className"];function WF(){return WF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WF.apply(this,arguments)}function MVe(t,e){if(t==null)return{};var n=EVe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function EVe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var ds=Ze.forwardRef(function(t,e){var n=t.children,r=t.className,i=MVe(t,SVe),o=qt("recharts-layer",r);return Ze.createElement("g",WF({className:o},ni(i,!0),{ref:e}),n)}),tm=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function TVe(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var CVe=TVe,AVe=CVe;function PVe(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:AVe(t,e,n)}var IVe=PVe,kVe="\\ud800-\\udfff",RVe="\\u0300-\\u036f",OVe="\\ufe20-\\ufe2f",LVe="\\u20d0-\\u20ff",DVe=RVe+OVe+LVe,NVe="\\ufe0e\\ufe0f",zVe="\\u200d",FVe=RegExp("["+zVe+kVe+DVe+NVe+"]");function BVe(t){return FVe.test(t)}var Ese=BVe;function $Ve(t){return t.split("")}var jVe=$Ve,Tse="\\ud800-\\udfff",UVe="\\u0300-\\u036f",VVe="\\ufe20-\\ufe2f",WVe="\\u20d0-\\u20ff",HVe=UVe+VVe+WVe,GVe="\\ufe0e\\ufe0f",qVe="["+Tse+"]",HF="["+HVe+"]",GF="\\ud83c[\\udffb-\\udfff]",YVe="(?:"+HF+"|"+GF+")",Cse="[^"+Tse+"]",Ase="(?:\\ud83c[\\udde6-\\uddff]){2}",Pse="[\\ud800-\\udbff][\\udc00-\\udfff]",XVe="\\u200d",Ise=YVe+"?",kse="["+GVe+"]?",KVe="(?:"+XVe+"(?:"+[Cse,Ase,Pse].join("|")+")"+kse+Ise+")*",ZVe=kse+Ise+KVe,JVe="(?:"+[Cse+HF+"?",HF,Ase,Pse,qVe].join("|")+")",QVe=RegExp(GF+"(?="+GF+")|"+JVe+ZVe,"g");function eWe(t){return t.match(QVe)||[]}var tWe=eWe,nWe=jVe,rWe=Ese,iWe=tWe;function oWe(t){return rWe(t)?iWe(t):nWe(t)}var sWe=oWe,aWe=IVe,lWe=Ese,cWe=sWe,uWe=_se;function dWe(t){return function(e){e=uWe(e);var n=lWe(e)?cWe(e):void 0,r=n?n[0]:e.charAt(0),i=n?aWe(n,1).join(""):e.slice(1);return r[t]()+i}}var hWe=dWe,fWe=hWe,pWe=fWe("toUpperCase"),mWe=pWe;const cO=xi(mWe);function ao(t){return function(){return t}}const Rse=Math.cos,iI=Math.sin,Lh=Math.sqrt,oI=Math.PI,uO=2*oI,qF=Math.PI,YF=2*qF,Av=1e-6,gWe=YF-Av;function Ose(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function yWe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ose;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let vWe=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ose:yWe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-e,d=i-n,f=s-e,p=a-n,g=f*f+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>Av)if(!(Math.abs(p*l-d*f)>Av)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let v=r-s,x=i-a,b=l*l+d*d,S=v*v+x*x,M=Math.sqrt(b),T=Math.sqrt(g),C=o*Math.tan((qF-Math.acos((b+g-S)/(2*M*T)))/2),k=C/T,O=C/M;Math.abs(k-1)>Av&&this._append`L${e+k*f},${n+k*p}`,this._append`A${o},${o},0,0,${+(p*v>f*x)},${this._x1=e+O*l},${this._y1=n+O*d}`}}arc(e,n,r,i,o,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),d=e+a,f=n+l,p=1^s,g=s?i-o:o-i;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>Av||Math.abs(this._y1-f)>Av)&&this._append`L${d},${f}`,r&&(g<0&&(g=g%YF+YF),g>gWe?this._append`A${r},${r},0,1,${p},${e-a},${n-l}A${r},${r},0,1,${p},${this._x1=d},${this._y1=f}`:g>Av&&this._append`A${r},${r},0,${+(g>=qF)},${p},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function jU(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new vWe(e)}function UU(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Lse(t){this._context=t}Lse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function dO(t){return new Lse(t)}function Dse(t){return t[0]}function Nse(t){return t[1]}function zse(t,e){var n=ao(!0),r=null,i=dO,o=null,s=jU(a);t=typeof t=="function"?t:t===void 0?Dse:ao(t),e=typeof e=="function"?e:e===void 0?Nse:ao(e);function a(l){var d,f=(l=UU(l)).length,p,g=!1,v;for(r==null&&(o=i(v=s())),d=0;d<=f;++d)!(d<f&&n(p=l[d],d,l))===g&&((g=!g)?o.lineStart():o.lineEnd()),g&&o.point(+t(p,d,l),+e(p,d,l));if(v)return o=null,v+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:ao(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:ao(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ao(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),a):r},a}function rC(t,e,n){var r=null,i=ao(!0),o=null,s=dO,a=null,l=jU(d);t=typeof t=="function"?t:t===void 0?Dse:ao(+t),e=typeof e=="function"?e:ao(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Nse:ao(+n);function d(p){var g,v,x,b=(p=UU(p)).length,S,M=!1,T,C=new Array(b),k=new Array(b);for(o==null&&(a=s(T=l())),g=0;g<=b;++g){if(!(g<b&&i(S=p[g],g,p))===M)if(M=!M)v=g,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),x=g-1;x>=v;--x)a.point(C[x],k[x]);a.lineEnd(),a.areaEnd()}M&&(C[g]=+t(S,g,p),k[g]=+e(S,g,p),a.point(r?+r(S,g,p):C[g],n?+n(S,g,p):k[g]))}if(T)return a=null,T+""||null}function f(){return zse().defined(i).curve(s).context(o)}return d.x=function(p){return arguments.length?(t=typeof p=="function"?p:ao(+p),r=null,d):t},d.x0=function(p){return arguments.length?(t=typeof p=="function"?p:ao(+p),d):t},d.x1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:ao(+p),d):r},d.y=function(p){return arguments.length?(e=typeof p=="function"?p:ao(+p),n=null,d):e},d.y0=function(p){return arguments.length?(e=typeof p=="function"?p:ao(+p),d):e},d.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:ao(+p),d):n},d.lineX0=d.lineY0=function(){return f().x(t).y(e)},d.lineY1=function(){return f().x(t).y(n)},d.lineX1=function(){return f().x(r).y(e)},d.defined=function(p){return arguments.length?(i=typeof p=="function"?p:ao(!!p),d):i},d.curve=function(p){return arguments.length?(s=p,o!=null&&(a=s(o)),d):s},d.context=function(p){return arguments.length?(p==null?o=a=null:a=s(o=p),d):o},d}class Fse{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function _We(t){return new Fse(t,!0)}function xWe(t){return new Fse(t,!1)}const VU={draw(t,e){const n=Lh(e/oI);t.moveTo(n,0),t.arc(0,0,n,0,uO)}},bWe={draw(t,e){const n=Lh(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Bse=Lh(1/3),wWe=Bse*2,SWe={draw(t,e){const n=Lh(e/wWe),r=n*Bse;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},MWe={draw(t,e){const n=Lh(e),r=-n/2;t.rect(r,r,n,n)}},EWe=.8908130915292852,$se=iI(oI/10)/iI(7*oI/10),TWe=iI(uO/10)*$se,CWe=-Rse(uO/10)*$se,AWe={draw(t,e){const n=Lh(e*EWe),r=TWe*n,i=CWe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const s=uO*o/5,a=Rse(s),l=iI(s);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*i,l*r+a*i)}t.closePath()}},M3=Lh(3),PWe={draw(t,e){const n=-Lh(e/(M3*3));t.moveTo(0,n*2),t.lineTo(-M3*n,-n),t.lineTo(M3*n,-n),t.closePath()}},Yu=-.5,Xu=Lh(3)/2,XF=1/Lh(12),IWe=(XF/2+1)*3,kWe={draw(t,e){const n=Lh(e/IWe),r=n/2,i=n*XF,o=r,s=n*XF+n,a=-o,l=s;t.moveTo(r,i),t.lineTo(o,s),t.lineTo(a,l),t.lineTo(Yu*r-Xu*i,Xu*r+Yu*i),t.lineTo(Yu*o-Xu*s,Xu*o+Yu*s),t.lineTo(Yu*a-Xu*l,Xu*a+Yu*l),t.lineTo(Yu*r+Xu*i,Yu*i-Xu*r),t.lineTo(Yu*o+Xu*s,Yu*s-Xu*o),t.lineTo(Yu*a+Xu*l,Yu*l-Xu*a),t.closePath()}};function RWe(t,e){let n=null,r=jU(i);t=typeof t=="function"?t:ao(t||VU),e=typeof e=="function"?e:ao(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:ao(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:ao(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function sI(){}function aI(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function jse(t){this._context=t}jse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:aI(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:aI(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function OWe(t){return new jse(t)}function Use(t){this._context=t}Use.prototype={areaStart:sI,areaEnd:sI,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:aI(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function LWe(t){return new Use(t)}function Vse(t){this._context=t}Vse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:aI(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function DWe(t){return new Vse(t)}function Wse(t){this._context=t}Wse.prototype={areaStart:sI,areaEnd:sI,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function NWe(t){return new Wse(t)}function w7(t){return t<0?-1:1}function S7(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(w7(o)+w7(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function M7(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function E3(t,e,n){var r=t._x0,i=t._y0,o=t._x1,s=t._y1,a=(o-r)/3;t._context.bezierCurveTo(r+a,i+a*e,o-a,s-a*n,o,s)}function lI(t){this._context=t}lI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:E3(this,this._t0,M7(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,E3(this,M7(this,n=S7(this,t,e)),n);break;default:E3(this,this._t0,n=S7(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Hse(t){this._context=new Gse(t)}(Hse.prototype=Object.create(lI.prototype)).point=function(t,e){lI.prototype.point.call(this,e,t)};function Gse(t){this._context=t}Gse.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function zWe(t){return new lI(t)}function FWe(t){return new Hse(t)}function qse(t){this._context=t}qse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=E7(t),i=E7(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function E7(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function BWe(t){return new qse(t)}function hO(t,e){this._context=t,this._t=e}hO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function $We(t){return new hO(t,.5)}function jWe(t){return new hO(t,0)}function UWe(t){return new hO(t,1)}function Rb(t,e){if((s=t.length)>1)for(var n=1,r,i,o=t[e[0]],s,a=o.length;n<s;++n)for(i=o,o=t[e[n]],r=0;r<a;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function KF(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function VWe(t,e){return t[e]}function WWe(t){const e=[];return e.key=t,e}function HWe(){var t=ao([]),e=KF,n=Rb,r=VWe;function i(o){var s=Array.from(t.apply(this,arguments),WWe),a,l=s.length,d=-1,f;for(const p of o)for(a=0,++d;a<l;++a)(s[a][d]=[0,+r(p,s[a].key,d,o)]).data=p;for(a=0,f=UU(e(s));a<l;++a)s[f[a]].index=a;return n(s,f),s}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:ao(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:ao(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?KF:typeof o=="function"?o:ao(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??Rb,i):n},i}function GWe(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,s;i<o;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}Rb(t,e)}}function qWe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var s=0,a=0;s<i;++s)a+=t[s][n][1]||0;r[n][1]+=r[n][0]=-a/2}Rb(t,e)}}function YWe(t,e){if(!(!((s=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,s;r<o;++r){for(var a=0,l=0,d=0;a<s;++a){for(var f=t[e[a]],p=f[r][1]||0,g=f[r-1][1]||0,v=(p-g)/2,x=0;x<a;++x){var b=t[e[x]],S=b[r][1]||0,M=b[r-1][1]||0;v+=S-M}l+=p,d+=v*p}i[r-1][1]+=i[r-1][0]=n,l&&(n-=d/l)}i[r-1][1]+=i[r-1][0]=n,Rb(t,e)}}function O2(t){"@babel/helpers - typeof";return O2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O2(t)}var XWe=["type","size","sizeType"];function ZF(){return ZF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZF.apply(this,arguments)}function T7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function C7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T7(Object(n),!0).forEach(function(r){KWe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KWe(t,e,n){return e=ZWe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZWe(t){var e=JWe(t,"string");return O2(e)=="symbol"?e:String(e)}function JWe(t,e){if(O2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(O2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QWe(t,e){if(t==null)return{};var n=eHe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function eHe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Yse={symbolCircle:VU,symbolCross:bWe,symbolDiamond:SWe,symbolSquare:MWe,symbolStar:AWe,symbolTriangle:PWe,symbolWye:kWe},tHe=Math.PI/180,nHe=function(e){var n="symbol".concat(cO(e));return Yse[n]||VU},rHe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*tHe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},iHe=function(e,n){Yse["symbol".concat(cO(e))]=n},WU=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,o=i===void 0?64:i,s=e.sizeType,a=s===void 0?"area":s,l=QWe(e,XWe),d=C7(C7({},l),{},{type:r,size:o,sizeType:a}),f=function(){var S=nHe(r),M=RWe().type(S).size(rHe(o,a,r));return M()},p=d.className,g=d.cx,v=d.cy,x=ni(d,!0);return g===+g&&v===+v&&o===+o?Ze.createElement("path",ZF({},x,{className:qt("recharts-symbols",p),transform:"translate(".concat(g,", ").concat(v,")"),d:f()})):null};WU.registerSymbol=iHe;function Ob(t){"@babel/helpers - typeof";return Ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ob(t)}function JF(){return JF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JF.apply(this,arguments)}function A7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oHe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A7(Object(n),!0).forEach(function(r){L2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kse(r.key),r)}}function aHe(t,e,n){return e&&P7(t.prototype,e),n&&P7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function lHe(t,e,n){return e=cI(e),cHe(t,Xse()?Reflect.construct(e,n||[],cI(t).constructor):e.apply(t,n))}function cHe(t,e){if(e&&(Ob(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uHe(t)}function uHe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xse=function(){return!!t})()}function cI(t){return cI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cI(t)}function dHe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QF(t,e)}function QF(t,e){return QF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},QF(t,e)}function L2(t,e,n){return e=Kse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kse(t){var e=hHe(t,"string");return Ob(e)=="symbol"?e:String(e)}function hHe(t,e){if(Ob(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ob(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ku=32,HU=function(t){dHe(e,t);function e(){return sHe(this,e),lHe(this,e,arguments)}return aHe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,o=Ku/2,s=Ku/6,a=Ku/3,l=r.inactive?i:r.color;if(r.type==="plainline")return Ze.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:o,x2:Ku,y2:o,className:"recharts-legend-icon"});if(r.type==="line")return Ze.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(o,"h").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*a,",").concat(o,`
            H`).concat(Ku,"M").concat(2*a,",").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(a,",").concat(o),className:"recharts-legend-icon"});if(r.type==="rect")return Ze.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Ku/8,"h").concat(Ku,"v").concat(Ku*3/4,"h").concat(-Ku,"z"),className:"recharts-legend-icon"});if(Ze.isValidElement(r.legendIcon)){var d=oHe({},r);return delete d.legendIcon,Ze.cloneElement(r.legendIcon,d)}return Ze.createElement(WU,{fill:l,cx:o,cy:o,size:Ku,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,o=i.payload,s=i.iconSize,a=i.layout,l=i.formatter,d=i.inactiveColor,f={x:0,y:0,width:Ku,height:Ku},p={display:a==="horizontal"?"inline-block":"block",marginRight:10},g={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(v,x){var b=v.formatter||l,S=qt(L2(L2({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",v.inactive));if(v.type==="none")return null;var M=qr(v.value)?null:v.value;tm(!qr(v.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var T=v.inactive?d:v.color;return Ze.createElement("li",JF({className:S,style:p,key:"legend-item-".concat(x)},rI(r.props,v,x)),Ze.createElement(VF,{width:s,height:s,viewBox:f,style:g},r.renderIcon(v)),Ze.createElement("span",{className:"recharts-legend-item-text",style:{color:T}},b?b(M,v,x):M))})}},{key:"render",value:function(){var r=this.props,i=r.payload,o=r.layout,s=r.align;if(!i||!i.length)return null;var a={padding:0,margin:0,textAlign:o==="horizontal"?s:"left"};return Ze.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}]),e}(W.PureComponent);L2(HU,"displayName","Legend");L2(HU,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var fHe=KR;function pHe(){this.__data__=new fHe,this.size=0}var mHe=pHe;function gHe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var yHe=gHe;function vHe(t){return this.__data__.get(t)}var _He=vHe;function xHe(t){return this.__data__.has(t)}var bHe=xHe,wHe=KR,SHe=kU,MHe=RU,EHe=200;function THe(t,e){var n=this.__data__;if(n instanceof wHe){var r=n.__data__;if(!SHe||r.length<EHe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new MHe(r)}return n.set(t,e),this.size=n.size,this}var CHe=THe,AHe=KR,PHe=mHe,IHe=yHe,kHe=_He,RHe=bHe,OHe=CHe;function k1(t){var e=this.__data__=new AHe(t);this.size=e.size}k1.prototype.clear=PHe;k1.prototype.delete=IHe;k1.prototype.get=kHe;k1.prototype.has=RHe;k1.prototype.set=OHe;var Zse=k1,LHe="__lodash_hash_undefined__";function DHe(t){return this.__data__.set(t,LHe),this}var NHe=DHe;function zHe(t){return this.__data__.has(t)}var FHe=zHe,BHe=RU,$He=NHe,jHe=FHe;function uI(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new BHe;++e<n;)this.add(t[e])}uI.prototype.add=uI.prototype.push=$He;uI.prototype.has=jHe;var Jse=uI;function UHe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Qse=UHe;function VHe(t,e){return t.has(e)}var eae=VHe,WHe=Jse,HHe=Qse,GHe=eae,qHe=1,YHe=2;function XHe(t,e,n,r,i,o){var s=n&qHe,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var d=o.get(t),f=o.get(e);if(d&&f)return d==e&&f==t;var p=-1,g=!0,v=n&YHe?new WHe:void 0;for(o.set(t,e),o.set(e,t);++p<a;){var x=t[p],b=e[p];if(r)var S=s?r(b,x,p,e,t,o):r(x,b,p,t,e,o);if(S!==void 0){if(S)continue;g=!1;break}if(v){if(!HHe(e,function(M,T){if(!GHe(v,T)&&(x===M||i(x,M,n,r,o)))return v.push(T)})){g=!1;break}}else if(!(x===b||i(x,b,n,r,o))){g=!1;break}}return o.delete(t),o.delete(e),g}var tae=XHe,KHe=Gf,ZHe=KHe.Uint8Array,JHe=ZHe;function QHe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var e9e=QHe;function t9e(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var GU=t9e,I7=wE,k7=JHe,n9e=IU,r9e=tae,i9e=e9e,o9e=GU,s9e=1,a9e=2,l9e="[object Boolean]",c9e="[object Date]",u9e="[object Error]",d9e="[object Map]",h9e="[object Number]",f9e="[object RegExp]",p9e="[object Set]",m9e="[object String]",g9e="[object Symbol]",y9e="[object ArrayBuffer]",v9e="[object DataView]",R7=I7?I7.prototype:void 0,T3=R7?R7.valueOf:void 0;function _9e(t,e,n,r,i,o,s){switch(n){case v9e:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case y9e:return!(t.byteLength!=e.byteLength||!o(new k7(t),new k7(e)));case l9e:case c9e:case h9e:return n9e(+t,+e);case u9e:return t.name==e.name&&t.message==e.message;case f9e:case m9e:return t==e+"";case d9e:var a=i9e;case p9e:var l=r&s9e;if(a||(a=o9e),t.size!=e.size&&!l)return!1;var d=s.get(t);if(d)return d==e;r|=a9e,s.set(t,e);var f=r9e(a(t),a(e),r,i,o,s);return s.delete(t),f;case g9e:if(T3)return T3.call(t)==T3.call(e)}return!1}var x9e=_9e;function b9e(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var nae=b9e,w9e=nae,S9e=Ac;function M9e(t,e,n){var r=e(t);return S9e(t)?r:w9e(r,n(t))}var E9e=M9e;function T9e(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}var C9e=T9e;function A9e(){return[]}var P9e=A9e,I9e=C9e,k9e=P9e,R9e=Object.prototype,O9e=R9e.propertyIsEnumerable,O7=Object.getOwnPropertySymbols,L9e=O7?function(t){return t==null?[]:(t=Object(t),I9e(O7(t),function(e){return O9e.call(t,e)}))}:k9e,D9e=L9e;function N9e(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var z9e=N9e,F9e=Cm,B9e=Am,$9e="[object Arguments]";function j9e(t){return B9e(t)&&F9e(t)==$9e}var U9e=j9e,L7=U9e,V9e=Am,rae=Object.prototype,W9e=rae.hasOwnProperty,H9e=rae.propertyIsEnumerable,G9e=L7(function(){return arguments}())?L7:function(t){return V9e(t)&&W9e.call(t,"callee")&&!H9e.call(t,"callee")},qU=G9e,dI={exports:{}};function q9e(){return!1}var Y9e=q9e;dI.exports;(function(t,e){var n=Gf,r=Y9e,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,s=o&&o.exports===i,a=s?n.Buffer:void 0,l=a?a.isBuffer:void 0,d=l||r;t.exports=d})(dI,dI.exports);var iae=dI.exports,X9e=9007199254740991,K9e=/^(?:0|[1-9]\d*)$/;function Z9e(t,e){var n=typeof t;return e=e??X9e,!!e&&(n=="number"||n!="symbol"&&K9e.test(t))&&t>-1&&t%1==0&&t<e}var YU=Z9e,J9e=9007199254740991;function Q9e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=J9e}var XU=Q9e,eGe=Cm,tGe=XU,nGe=Am,rGe="[object Arguments]",iGe="[object Array]",oGe="[object Boolean]",sGe="[object Date]",aGe="[object Error]",lGe="[object Function]",cGe="[object Map]",uGe="[object Number]",dGe="[object Object]",hGe="[object RegExp]",fGe="[object Set]",pGe="[object String]",mGe="[object WeakMap]",gGe="[object ArrayBuffer]",yGe="[object DataView]",vGe="[object Float32Array]",_Ge="[object Float64Array]",xGe="[object Int8Array]",bGe="[object Int16Array]",wGe="[object Int32Array]",SGe="[object Uint8Array]",MGe="[object Uint8ClampedArray]",EGe="[object Uint16Array]",TGe="[object Uint32Array]",mo={};mo[vGe]=mo[_Ge]=mo[xGe]=mo[bGe]=mo[wGe]=mo[SGe]=mo[MGe]=mo[EGe]=mo[TGe]=!0;mo[rGe]=mo[iGe]=mo[gGe]=mo[oGe]=mo[yGe]=mo[sGe]=mo[aGe]=mo[lGe]=mo[cGe]=mo[uGe]=mo[dGe]=mo[hGe]=mo[fGe]=mo[pGe]=mo[mGe]=!1;function CGe(t){return nGe(t)&&tGe(t.length)&&!!mo[eGe(t)]}var AGe=CGe;function PGe(t){return function(e){return t(e)}}var oae=PGe,hI={exports:{}};hI.exports;(function(t,e){var n=fse,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,s=o&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();t.exports=a})(hI,hI.exports);var IGe=hI.exports,kGe=AGe,RGe=oae,D7=IGe,N7=D7&&D7.isTypedArray,OGe=N7?RGe(N7):kGe,sae=OGe,LGe=z9e,DGe=qU,NGe=Ac,zGe=iae,FGe=YU,BGe=sae,$Ge=Object.prototype,jGe=$Ge.hasOwnProperty;function UGe(t,e){var n=NGe(t),r=!n&&DGe(t),i=!n&&!r&&zGe(t),o=!n&&!r&&!i&&BGe(t),s=n||r||i||o,a=s?LGe(t.length,String):[],l=a.length;for(var d in t)(e||jGe.call(t,d))&&!(s&&(d=="length"||i&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||FGe(d,l)))&&a.push(d);return a}var VGe=UGe,WGe=Object.prototype;function HGe(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||WGe;return t===n}var GGe=HGe;function qGe(t,e){return function(n){return t(e(n))}}var aae=qGe,YGe=aae,XGe=YGe(Object.keys,Object),KGe=XGe,ZGe=GGe,JGe=KGe,QGe=Object.prototype,e7e=QGe.hasOwnProperty;function t7e(t){if(!ZGe(t))return JGe(t);var e=[];for(var n in Object(t))e7e.call(t,n)&&n!="constructor"&&e.push(n);return e}var n7e=t7e,r7e=PU,i7e=XU;function o7e(t){return t!=null&&i7e(t.length)&&!r7e(t)}var TE=o7e,s7e=VGe,a7e=n7e,l7e=TE;function c7e(t){return l7e(t)?s7e(t):a7e(t)}var fO=c7e,u7e=E9e,d7e=D9e,h7e=fO;function f7e(t){return u7e(t,h7e,d7e)}var p7e=f7e,z7=p7e,m7e=1,g7e=Object.prototype,y7e=g7e.hasOwnProperty;function v7e(t,e,n,r,i,o){var s=n&m7e,a=z7(t),l=a.length,d=z7(e),f=d.length;if(l!=f&&!s)return!1;for(var p=l;p--;){var g=a[p];if(!(s?g in e:y7e.call(e,g)))return!1}var v=o.get(t),x=o.get(e);if(v&&x)return v==e&&x==t;var b=!0;o.set(t,e),o.set(e,t);for(var S=s;++p<l;){g=a[p];var M=t[g],T=e[g];if(r)var C=s?r(T,M,g,e,t,o):r(M,T,g,t,e,o);if(!(C===void 0?M===T||i(M,T,n,r,o):C)){b=!1;break}S||(S=g=="constructor")}if(b&&!S){var k=t.constructor,O=e.constructor;k!=O&&"constructor"in t&&"constructor"in e&&!(typeof k=="function"&&k instanceof k&&typeof O=="function"&&O instanceof O)&&(b=!1)}return o.delete(t),o.delete(e),b}var _7e=v7e,x7e=U0,b7e=Gf,w7e=x7e(b7e,"DataView"),S7e=w7e,M7e=U0,E7e=Gf,T7e=M7e(E7e,"Promise"),C7e=T7e,A7e=U0,P7e=Gf,I7e=A7e(P7e,"Set"),lae=I7e,k7e=U0,R7e=Gf,O7e=k7e(R7e,"WeakMap"),L7e=O7e,eB=S7e,tB=kU,nB=C7e,rB=lae,iB=L7e,cae=Cm,R1=mse,F7="[object Map]",D7e="[object Object]",B7="[object Promise]",$7="[object Set]",j7="[object WeakMap]",U7="[object DataView]",N7e=R1(eB),z7e=R1(tB),F7e=R1(nB),B7e=R1(rB),$7e=R1(iB),Pv=cae;(eB&&Pv(new eB(new ArrayBuffer(1)))!=U7||tB&&Pv(new tB)!=F7||nB&&Pv(nB.resolve())!=B7||rB&&Pv(new rB)!=$7||iB&&Pv(new iB)!=j7)&&(Pv=function(t){var e=cae(t),n=e==D7e?t.constructor:void 0,r=n?R1(n):"";if(r)switch(r){case N7e:return U7;case z7e:return F7;case F7e:return B7;case B7e:return $7;case $7e:return j7}return e});var j7e=Pv,C3=Zse,U7e=tae,V7e=x9e,W7e=_7e,V7=j7e,W7=Ac,H7=iae,H7e=sae,G7e=1,G7="[object Arguments]",q7="[object Array]",iC="[object Object]",q7e=Object.prototype,Y7=q7e.hasOwnProperty;function Y7e(t,e,n,r,i,o){var s=W7(t),a=W7(e),l=s?q7:V7(t),d=a?q7:V7(e);l=l==G7?iC:l,d=d==G7?iC:d;var f=l==iC,p=d==iC,g=l==d;if(g&&H7(t)){if(!H7(e))return!1;s=!0,f=!1}if(g&&!f)return o||(o=new C3),s||H7e(t)?U7e(t,e,n,r,i,o):V7e(t,e,l,n,r,i,o);if(!(n&G7e)){var v=f&&Y7.call(t,"__wrapped__"),x=p&&Y7.call(e,"__wrapped__");if(v||x){var b=v?t.value():t,S=x?e.value():e;return o||(o=new C3),i(b,S,n,r,o)}}return g?(o||(o=new C3),W7e(t,e,n,r,i,o)):!1}var X7e=Y7e,K7e=X7e,X7=Am;function uae(t,e,n,r,i){return t===e?!0:t==null||e==null||!X7(t)&&!X7(e)?t!==t&&e!==e:K7e(t,e,n,r,uae,i)}var KU=uae,Z7e=Zse,J7e=KU,Q7e=1,eqe=2;function tqe(t,e,n,r){var i=n.length,o=i,s=!r;if(t==null)return!o;for(t=Object(t);i--;){var a=n[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){a=n[i];var l=a[0],d=t[l],f=a[1];if(s&&a[2]){if(d===void 0&&!(l in t))return!1}else{var p=new Z7e;if(r)var g=r(d,f,l,t,e,p);if(!(g===void 0?J7e(f,d,Q7e|eqe,r,p):g))return!1}}return!0}var nqe=tqe,rqe=Ty;function iqe(t){return t===t&&!rqe(t)}var dae=iqe,oqe=dae,sqe=fO;function aqe(t){for(var e=sqe(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,oqe(i)]}return e}var lqe=aqe;function cqe(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var hae=cqe,uqe=nqe,dqe=lqe,hqe=hae;function fqe(t){var e=dqe(t);return e.length==1&&e[0][2]?hqe(e[0][0],e[0][1]):function(n){return n===t||uqe(n,t,e)}}var pqe=fqe;function mqe(t,e){return t!=null&&e in Object(t)}var gqe=mqe,yqe=xse,vqe=qU,_qe=Ac,xqe=YU,bqe=XU,wqe=JR;function Sqe(t,e,n){e=yqe(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var s=wqe(e[r]);if(!(o=t!=null&&n(t,s)))break;t=t[s]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&bqe(i)&&xqe(s,i)&&(_qe(t)||vqe(t)))}var Mqe=Sqe,Eqe=gqe,Tqe=Mqe;function Cqe(t,e){return t!=null&&Tqe(t,e,Eqe)}var Aqe=Cqe,Pqe=KU,Iqe=bse,kqe=Aqe,Rqe=AU,Oqe=dae,Lqe=hae,Dqe=JR,Nqe=1,zqe=2;function Fqe(t,e){return Rqe(t)&&Oqe(e)?Lqe(Dqe(t),e):function(n){var r=Iqe(n,t);return r===void 0&&r===e?kqe(n,t):Pqe(e,r,Nqe|zqe)}}var Bqe=Fqe;function $qe(t){return t}var O1=$qe;function jqe(t){return function(e){return e==null?void 0:e[t]}}var Uqe=jqe,Vqe=DU;function Wqe(t){return function(e){return Vqe(e,t)}}var Hqe=Wqe,Gqe=Uqe,qqe=Hqe,Yqe=AU,Xqe=JR;function Kqe(t){return Yqe(t)?Gqe(Xqe(t)):qqe(t)}var Zqe=Kqe,Jqe=pqe,Qqe=Bqe,eYe=O1,tYe=Ac,nYe=Zqe;function rYe(t){return typeof t=="function"?t:t==null?eYe:typeof t=="object"?tYe(t)?Qqe(t[0],t[1]):Jqe(t):nYe(t)}var Cy=rYe;function iYe(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var fae=iYe;function oYe(t){return t!==t}var sYe=oYe;function aYe(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var lYe=aYe,cYe=fae,uYe=sYe,dYe=lYe;function hYe(t,e,n){return e===e?dYe(t,e,n):cYe(t,uYe,n)}var fYe=hYe,pYe=fYe;function mYe(t,e){var n=t==null?0:t.length;return!!n&&pYe(t,e,0)>-1}var gYe=mYe;function yYe(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var vYe=yYe;function _Ye(){}var xYe=_Ye,A3=lae,bYe=xYe,wYe=GU,SYe=1/0,MYe=A3&&1/wYe(new A3([,-0]))[1]==SYe?function(t){return new A3(t)}:bYe,EYe=MYe,TYe=Jse,CYe=gYe,AYe=vYe,PYe=eae,IYe=EYe,kYe=GU,RYe=200;function OYe(t,e,n){var r=-1,i=CYe,o=t.length,s=!0,a=[],l=a;if(n)s=!1,i=AYe;else if(o>=RYe){var d=e?null:IYe(t);if(d)return kYe(d);s=!1,i=PYe,l=new TYe}else l=e?[]:a;e:for(;++r<o;){var f=t[r],p=e?e(f):f;if(f=n||f!==0?f:0,s&&p===p){for(var g=l.length;g--;)if(l[g]===p)continue e;e&&l.push(p),a.push(f)}else i(l,p,n)||(l!==a&&l.push(p),a.push(f))}return a}var LYe=OYe,DYe=Cy,NYe=LYe;function zYe(t,e){return t&&t.length?NYe(t,DYe(e)):[]}var FYe=zYe;const K7=xi(FYe);function pae(t,e,n){return e===!0?K7(t,n):qr(e)?K7(t,e):t}function Lb(t){"@babel/helpers - typeof";return Lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lb(t)}var BYe=["ref"];function Z7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z7(Object(n),!0).forEach(function(r){pO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Ye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yae(r.key),r)}}function jYe(t,e,n){return e&&J7(t.prototype,e),n&&J7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function UYe(t,e,n){return e=fI(e),VYe(t,mae()?Reflect.construct(e,n||[],fI(t).constructor):e.apply(t,n))}function VYe(t,e){if(e&&(Lb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gae(t)}function mae(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mae=function(){return!!t})()}function fI(t){return fI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fI(t)}function gae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oB(t,e)}function oB(t,e){return oB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},oB(t,e)}function pO(t,e,n){return e=yae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yae(t){var e=HYe(t,"string");return Lb(e)=="symbol"?e:String(e)}function HYe(t,e){if(Lb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Lb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GYe(t,e){if(t==null)return{};var n=qYe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qYe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function YYe(t){return t.value}function XYe(t,e){if(Ze.isValidElement(t))return Ze.cloneElement(t,e);if(typeof t=="function")return Ze.createElement(t,e);e.ref;var n=GYe(e,BYe);return Ze.createElement(HU,n)}var Q7=1,Db=function(t){WYe(e,t);function e(){var n;$Ye(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=UYe(this,e,[].concat(i)),pO(gae(n),"lastBoundingBox",{width:-1,height:-1}),n}return jYe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>Q7||Math.abs(i.height-this.lastBoundingBox.height)>Q7)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?lv({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,o=i.layout,s=i.align,a=i.verticalAlign,l=i.margin,d=i.chartWidth,f=i.chartHeight,p,g;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&o==="vertical"){var v=this.getBBoxSnapshot();p={left:((d||0)-v.width)/2}}else p=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(a==="middle"){var x=this.getBBoxSnapshot();g={top:((f||0)-x.height)/2}}else g=a==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return lv(lv({},p),g)}},{key:"render",value:function(){var r=this,i=this.props,o=i.content,s=i.width,a=i.height,l=i.wrapperStyle,d=i.payloadUniqBy,f=i.payload,p=lv(lv({position:"absolute",width:s||"auto",height:a||"auto"},this.getDefaultPosition(l)),l);return Ze.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(v){r.wrapperNode=v}},XYe(o,lv(lv({},this.props),{},{payload:pae(f,d,YYe)})))}}],[{key:"getWithHeight",value:function(r,i){var o=r.props.layout;return o==="vertical"&&Cn(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}]),e}(W.PureComponent);pO(Db,"displayName","Legend");pO(Db,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var eq=wE,KYe=qU,ZYe=Ac,tq=eq?eq.isConcatSpreadable:void 0;function JYe(t){return ZYe(t)||KYe(t)||!!(tq&&t&&t[tq])}var QYe=JYe,eXe=nae,tXe=QYe;function vae(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=tXe),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?vae(a,e-1,n,r,i):eXe(i,a):r||(i[i.length]=a)}return i}var _ae=vae;function nXe(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var l=s[t?a:++i];if(n(o[l],l,o)===!1)break}return e}}var rXe=nXe,iXe=rXe,oXe=iXe(),sXe=oXe,aXe=sXe,lXe=fO;function cXe(t,e){return t&&aXe(t,e,lXe)}var xae=cXe,uXe=TE;function dXe(t,e){return function(n,r){if(n==null)return n;if(!uXe(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Object(n);(e?o--:++o<i)&&r(s[o],o,s)!==!1;);return n}}var hXe=dXe,fXe=xae,pXe=hXe,mXe=pXe(fXe),ZU=mXe,gXe=ZU,yXe=TE;function vXe(t,e){var n=-1,r=yXe(t)?Array(t.length):[];return gXe(t,function(i,o,s){r[++n]=e(i,o,s)}),r}var bae=vXe;function _Xe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var xXe=_Xe,nq=T1;function bXe(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,o=nq(t),s=e!==void 0,a=e===null,l=e===e,d=nq(e);if(!a&&!d&&!o&&t>e||o&&s&&l&&!a&&!d||r&&s&&l||!n&&l||!i)return 1;if(!r&&!o&&!d&&t<e||d&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!l)return-1}return 0}var wXe=bXe,SXe=wXe;function MXe(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var l=SXe(i[r],o[r]);if(l){if(r>=a)return l;var d=n[r];return l*(d=="desc"?-1:1)}}return t.index-e.index}var EXe=MXe,P3=LU,TXe=DU,CXe=Cy,AXe=bae,PXe=xXe,IXe=oae,kXe=EXe,RXe=O1,OXe=Ac;function LXe(t,e,n){e.length?e=P3(e,function(o){return OXe(o)?function(s){return TXe(s,o.length===1?o[0]:o)}:o}):e=[RXe];var r=-1;e=P3(e,IXe(CXe));var i=AXe(t,function(o,s,a){var l=P3(e,function(d){return d(o)});return{criteria:l,index:++r,value:o}});return PXe(i,function(o,s){return kXe(o,s,n)})}var DXe=LXe;function NXe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var zXe=NXe,FXe=zXe,rq=Math.max;function BXe(t,e,n){return e=rq(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=rq(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),FXe(t,this,a)}}var $Xe=BXe;function jXe(t){return function(){return t}}var UXe=jXe,VXe=U0,WXe=function(){try{var t=VXe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),wae=WXe,HXe=UXe,iq=wae,GXe=O1,qXe=iq?function(t,e){return iq(t,"toString",{configurable:!0,enumerable:!1,value:HXe(e),writable:!0})}:GXe,YXe=qXe,XXe=800,KXe=16,ZXe=Date.now;function JXe(t){var e=0,n=0;return function(){var r=ZXe(),i=KXe-(r-n);if(n=r,i>0){if(++e>=XXe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var QXe=JXe,eKe=YXe,tKe=QXe,nKe=tKe(eKe),rKe=nKe,iKe=O1,oKe=$Xe,sKe=rKe;function aKe(t,e){return sKe(oKe(t,e,iKe),t+"")}var lKe=aKe,cKe=IU,uKe=TE,dKe=YU,hKe=Ty;function fKe(t,e,n){if(!hKe(n))return!1;var r=typeof e;return(r=="number"?uKe(n)&&dKe(e,n.length):r=="string"&&e in n)?cKe(n[e],t):!1}var mO=fKe,pKe=_ae,mKe=DXe,gKe=lKe,oq=mO,yKe=gKe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&oq(t,e[0],e[1])?e=[]:n>2&&oq(e[0],e[1],e[2])&&(e=[e[0]]),mKe(t,pKe(e,1),[])}),vKe=yKe;const JU=xi(vKe);function D2(t){"@babel/helpers - typeof";return D2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D2(t)}function sB(){return sB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sB.apply(this,arguments)}function _Ke(t,e){return SKe(t)||wKe(t,e)||bKe(t,e)||xKe()}function xKe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bKe(t,e){if(t){if(typeof t=="string")return sq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sq(t,e)}}function sq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wKe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){d=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function SKe(t){if(Array.isArray(t))return t}function aq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function I3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aq(Object(n),!0).forEach(function(r){MKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MKe(t,e,n){return e=EKe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EKe(t){var e=TKe(t,"string");return D2(e)=="symbol"?e:String(e)}function TKe(t,e){if(D2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(D2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CKe(t){return Array.isArray(t)&&Ws(t[0])&&Ws(t[1])?t.join(" ~ "):t}var AKe=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,o=i===void 0?{}:i,s=e.itemStyle,a=s===void 0?{}:s,l=e.labelStyle,d=l===void 0?{}:l,f=e.payload,p=e.formatter,g=e.itemSorter,v=e.wrapperClassName,x=e.labelClassName,b=e.label,S=e.labelFormatter,M=e.accessibilityLayer,T=M===void 0?!1:M,C=function(){if(f&&f.length){var oe={padding:0,margin:0},pe=(g?JU(f,g):f).map(function(re,he){if(re.type==="none")return null;var ue=I3({display:"block",paddingTop:4,paddingBottom:4,color:re.color||"#000"},a),be=re.formatter||p||CKe,ie=re.value,ve=re.name,Ee=ie,Ne=ve;if(be&&Ee!=null&&Ne!=null){var Ge=be(ie,ve,re,he,f);if(Array.isArray(Ge)){var dt=_Ke(Ge,2);Ee=dt[0],Ne=dt[1]}else Ee=Ge}return Ze.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(he),style:ue},Ws(Ne)?Ze.createElement("span",{className:"recharts-tooltip-item-name"},Ne):null,Ws(Ne)?Ze.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Ze.createElement("span",{className:"recharts-tooltip-item-value"},Ee),Ze.createElement("span",{className:"recharts-tooltip-item-unit"},re.unit||""))});return Ze.createElement("ul",{className:"recharts-tooltip-item-list",style:oe},pe)}return null},k=I3({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),O=I3({margin:0},d),D=!ri(b),B=D?b:"",U=qt("recharts-default-tooltip",v),J=qt("recharts-tooltip-label",x);D&&S&&f!==void 0&&f!==null&&(B=S(b,f));var V=T?{role:"status","aria-live":"assertive"}:{};return Ze.createElement("div",sB({className:U,style:k},V),Ze.createElement("p",{className:J,style:O},Ze.isValidElement(B)?B:"".concat(B)),C())};function N2(t){"@babel/helpers - typeof";return N2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N2(t)}function oC(t,e,n){return e=PKe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PKe(t){var e=IKe(t,"string");return N2(e)=="symbol"?e:String(e)}function IKe(t,e){if(N2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(N2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fw="recharts-tooltip-wrapper",kKe={visibility:"hidden"};function RKe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return qt(Fw,oC(oC(oC(oC({},"".concat(Fw,"-right"),Cn(n)&&e&&Cn(e.x)&&n>=e.x),"".concat(Fw,"-left"),Cn(n)&&e&&Cn(e.x)&&n<e.x),"".concat(Fw,"-bottom"),Cn(r)&&e&&Cn(e.y)&&r>=e.y),"".concat(Fw,"-top"),Cn(r)&&e&&Cn(e.y)&&r<e.y))}function lq(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,o=t.position,s=t.reverseDirection,a=t.tooltipDimension,l=t.viewBox,d=t.viewBoxDimension;if(o&&Cn(o[r]))return o[r];var f=n[r]-a-i,p=n[r]+i;if(e[r])return s[r]?f:p;if(s[r]){var g=f,v=l[r];return g<v?Math.max(p,l[r]):Math.max(f,l[r])}var x=p+a,b=l[r]+d;return x>b?Math.max(f,l[r]):Math.max(p,l[r])}function OKe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function LKe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,o=t.reverseDirection,s=t.tooltipBox,a=t.useTranslate3d,l=t.viewBox,d,f,p;return s.height>0&&s.width>0&&n?(f=lq({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),p=lq({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),d=OKe({translateX:f,translateY:p,useTranslate3d:a})):d=kKe,{cssProperties:d,cssClasses:RKe({translateX:f,translateY:p,coordinate:n})}}function Nb(t){"@babel/helpers - typeof";return Nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nb(t)}function cq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cq(Object(n),!0).forEach(function(r){UA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mae(r.key),r)}}function NKe(t,e,n){return e&&dq(t.prototype,e),n&&dq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function zKe(t,e,n){return e=pI(e),FKe(t,Sae()?Reflect.construct(e,n||[],pI(t).constructor):e.apply(t,n))}function FKe(t,e){if(e&&(Nb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jA(t)}function Sae(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Sae=function(){return!!t})()}function pI(t){return pI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pI(t)}function jA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BKe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aB(t,e)}function aB(t,e){return aB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},aB(t,e)}function UA(t,e,n){return e=Mae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mae(t){var e=$Ke(t,"string");return Nb(e)=="symbol"?e:String(e)}function $Ke(t,e){if(Nb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Nb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hq=1,jKe=function(t){BKe(e,t);function e(){var n;DKe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=zKe(this,e,[].concat(i)),UA(jA(n),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),UA(jA(n),"lastBoundingBox",{width:-1,height:-1}),UA(jA(n),"handleKeyDown",function(s){if(s.key==="Escape"){var a,l,d,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&a!==void 0?a:0,y:(d=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&d!==void 0?d:0}})}}),n}return NKe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.lastBoundingBox.width)>hq||Math.abs(r.height-this.lastBoundingBox.height)>hq)&&(this.lastBoundingBox.width=r.width,this.lastBoundingBox.height=r.height)}else(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1)}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,o=i.active,s=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,d=i.children,f=i.coordinate,p=i.hasPayload,g=i.isAnimationActive,v=i.offset,x=i.position,b=i.reverseDirection,S=i.useTranslate3d,M=i.viewBox,T=i.wrapperStyle,C=LKe({allowEscapeViewBox:s,coordinate:f,offsetTopLeft:v,position:x,reverseDirection:b,tooltipBox:{height:this.lastBoundingBox.height,width:this.lastBoundingBox.width},useTranslate3d:S,viewBox:M}),k=C.cssClasses,O=C.cssProperties,D=uq(uq({transition:g&&o?"transform ".concat(a,"ms ").concat(l):void 0},O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&p?"visible":"hidden",position:"absolute",top:0,left:0},T);return Ze.createElement("div",{tabIndex:-1,className:k,style:D,ref:function(U){r.wrapperNode=U}},d)}}]),e}(W.PureComponent),UKe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},nm={isSsr:UKe(),get:function(e){return nm[e]},set:function(e,n){if(typeof e=="string")nm[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(i){nm[i]=e[i]})}}};function zb(t){"@babel/helpers - typeof";return zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zb(t)}function fq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fq(Object(n),!0).forEach(function(r){QU(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tae(r.key),r)}}function WKe(t,e,n){return e&&mq(t.prototype,e),n&&mq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function HKe(t,e,n){return e=mI(e),GKe(t,Eae()?Reflect.construct(e,n||[],mI(t).constructor):e.apply(t,n))}function GKe(t,e){if(e&&(zb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qKe(t)}function qKe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Eae(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Eae=function(){return!!t})()}function mI(t){return mI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mI(t)}function YKe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lB(t,e)}function lB(t,e){return lB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},lB(t,e)}function QU(t,e,n){return e=Tae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tae(t){var e=XKe(t,"string");return zb(e)=="symbol"?e:String(e)}function XKe(t,e){if(zb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KKe(t){return t.dataKey}function ZKe(t,e){return Ze.isValidElement(t)?Ze.cloneElement(t,e):typeof t=="function"?Ze.createElement(t,e):Ze.createElement(AKe,e)}var ff=function(t){YKe(e,t);function e(){return VKe(this,e),HKe(this,e,arguments)}return WKe(e,[{key:"render",value:function(){var r=this,i=this.props,o=i.active,s=i.allowEscapeViewBox,a=i.animationDuration,l=i.animationEasing,d=i.content,f=i.coordinate,p=i.filterNull,g=i.isAnimationActive,v=i.offset,x=i.payload,b=i.payloadUniqBy,S=i.position,M=i.reverseDirection,T=i.useTranslate3d,C=i.viewBox,k=i.wrapperStyle,O=x??[];p&&O.length&&(O=pae(x.filter(function(B){return B.value!=null&&(B.hide!==!0||r.props.includeHidden)}),b,KKe));var D=O.length>0;return Ze.createElement(jKe,{allowEscapeViewBox:s,animationDuration:a,animationEasing:l,isAnimationActive:g,active:o,coordinate:f,hasPayload:D,offset:v,position:S,reverseDirection:M,useTranslate3d:T,viewBox:C,wrapperStyle:k},ZKe(d,pq(pq({},this.props),{},{payload:O})))}}]),e}(W.PureComponent);QU(ff,"displayName","Tooltip");QU(ff,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!nm.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var JKe=Gf,QKe=function(){return JKe.Date.now()},eZe=QKe,tZe=/\s/;function nZe(t){for(var e=t.length;e--&&tZe.test(t.charAt(e)););return e}var rZe=nZe,iZe=rZe,oZe=/^\s+/;function sZe(t){return t&&t.slice(0,iZe(t)+1).replace(oZe,"")}var aZe=sZe,lZe=aZe,gq=Ty,cZe=T1,yq=NaN,uZe=/^[-+]0x[0-9a-f]+$/i,dZe=/^0b[01]+$/i,hZe=/^0o[0-7]+$/i,fZe=parseInt;function pZe(t){if(typeof t=="number")return t;if(cZe(t))return yq;if(gq(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=gq(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=lZe(t);var n=dZe.test(t);return n||hZe.test(t)?fZe(t.slice(2),n?2:8):uZe.test(t)?yq:+t}var Cae=pZe,mZe=Ty,k3=eZe,vq=Cae,gZe="Expected a function",yZe=Math.max,vZe=Math.min;function _Ze(t,e,n){var r,i,o,s,a,l,d=0,f=!1,p=!1,g=!0;if(typeof t!="function")throw new TypeError(gZe);e=vq(e)||0,mZe(n)&&(f=!!n.leading,p="maxWait"in n,o=p?yZe(vq(n.maxWait)||0,e):o,g="trailing"in n?!!n.trailing:g);function v(D){var B=r,U=i;return r=i=void 0,d=D,s=t.apply(U,B),s}function x(D){return d=D,a=setTimeout(M,e),f?v(D):s}function b(D){var B=D-l,U=D-d,J=e-B;return p?vZe(J,o-U):J}function S(D){var B=D-l,U=D-d;return l===void 0||B>=e||B<0||p&&U>=o}function M(){var D=k3();if(S(D))return T(D);a=setTimeout(M,b(D))}function T(D){return a=void 0,g&&r?v(D):(r=i=void 0,s)}function C(){a!==void 0&&clearTimeout(a),d=0,r=l=i=a=void 0}function k(){return a===void 0?s:T(k3())}function O(){var D=k3(),B=S(D);if(r=arguments,i=this,l=D,B){if(a===void 0)return x(l);if(p)return clearTimeout(a),a=setTimeout(M,e),v(l)}return a===void 0&&(a=setTimeout(M,e)),s}return O.cancel=C,O.flush=k,O}var xZe=_Ze,bZe=xZe,wZe=Ty,SZe="Expected a function";function MZe(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(SZe);return wZe(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),bZe(t,e,{leading:r,maxWait:e,trailing:i})}var EZe=MZe;const Aae=xi(EZe);function z2(t){"@babel/helpers - typeof";return z2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z2(t)}function _q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_q(Object(n),!0).forEach(function(r){TZe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_q(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TZe(t,e,n){return e=CZe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CZe(t){var e=AZe(t,"string");return z2(e)=="symbol"?e:String(e)}function AZe(t,e){if(z2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(z2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PZe(t,e){return OZe(t)||RZe(t,e)||kZe(t,e)||IZe()}function IZe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kZe(t,e){if(t){if(typeof t=="string")return xq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xq(t,e)}}function xq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function RZe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){d=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function OZe(t){if(Array.isArray(t))return t}var LZe=W.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,o=t.width,s=o===void 0?"100%":o,a=t.height,l=a===void 0?"100%":a,d=t.minWidth,f=d===void 0?0:d,p=t.minHeight,g=t.maxHeight,v=t.children,x=t.debounce,b=x===void 0?0:x,S=t.id,M=t.className,T=t.onResize,C=t.style,k=C===void 0?{}:C,O=W.useRef(null),D=W.useRef();D.current=T,W.useImperativeHandle(e,function(){return Object.defineProperty(O.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),O.current},configurable:!0})});var B=W.useState({containerWidth:i.width,containerHeight:i.height}),U=PZe(B,2),J=U[0],V=U[1],X=W.useCallback(function(pe,re){V(function(he){var ue=Math.round(pe),be=Math.round(re);return he.containerWidth===ue&&he.containerHeight===be?he:{containerWidth:ue,containerHeight:be}})},[]);W.useEffect(function(){var pe=function(ve){var Ee,Ne=ve[0].contentRect,Ge=Ne.width,dt=Ne.height;X(Ge,dt),(Ee=D.current)===null||Ee===void 0||Ee.call(D,Ge,dt)};b>0&&(pe=Aae(pe,b,{trailing:!0,leading:!1}));var re=new ResizeObserver(pe),he=O.current.getBoundingClientRect(),ue=he.width,be=he.height;return X(ue,be),re.observe(O.current),function(){re.disconnect()}},[X,b]);var oe=W.useMemo(function(){var pe=J.containerWidth,re=J.containerHeight;if(pe<0||re<0)return null;tm(Gv(s)||Gv(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),tm(!n||n>0,"The aspect(%s) must be greater than zero.",n);var he=Gv(s)?pe:s,ue=Gv(l)?re:l;n&&n>0&&(he?ue=he/n:ue&&(he=ue*n),g&&ue>g&&(ue=g)),tm(he>0||ue>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,he,ue,s,l,f,p,n);var be=!Array.isArray(v)&&FF.isElement(v)&&em(v.type).endsWith("Chart");return Ze.Children.map(v,function(ie){return FF.isElement(ie)?W.cloneElement(ie,sC({width:he,height:ue},be?{style:sC({height:"100%",width:"100%",maxHeight:ue,maxWidth:he},ie.props.style)}:{})):ie})},[n,v,l,g,p,f,J,s]);return Ze.createElement("div",{id:S?"".concat(S):void 0,className:qt("recharts-responsive-container",M),style:sC(sC({},k),{},{width:s,height:l,minWidth:f,minHeight:p,maxHeight:g}),ref:O},oe)}),Pae=function(e){return null};Pae.displayName="Cell";function F2(t){"@babel/helpers - typeof";return F2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F2(t)}function bq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bq(Object(n),!0).forEach(function(r){DZe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DZe(t,e,n){return e=NZe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NZe(t){var e=zZe(t,"string");return F2(e)=="symbol"?e:String(e)}function zZe(t,e){if(F2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(F2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var R_={widthCache:{},cacheCount:0},FZe=2e3,BZe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},wq="recharts_measurement_span";function $Ze(t){var e=cB({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var FS=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||nm.isSsr)return{width:0,height:0};var r=$Ze(n),i=JSON.stringify({text:e,copyStyle:r});if(R_.widthCache[i])return R_.widthCache[i];try{var o=document.getElementById(wq);o||(o=document.createElement("span"),o.setAttribute("id",wq),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var s=cB(cB({},BZe),r);Object.assign(o.style,s),o.textContent="".concat(e);var a=o.getBoundingClientRect(),l={width:a.width,height:a.height};return R_.widthCache[i]=l,++R_.cacheCount>FZe&&(R_.cacheCount=0,R_.widthCache={}),l}catch{return{width:0,height:0}}},jZe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function B2(t){"@babel/helpers - typeof";return B2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B2(t)}function gI(t,e){return HZe(t)||WZe(t,e)||VZe(t,e)||UZe()}function UZe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VZe(t,e){if(t){if(typeof t=="string")return Sq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sq(t,e)}}function Sq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function WZe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){d=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function HZe(t){if(Array.isArray(t))return t}function GZe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YZe(r.key),r)}}function qZe(t,e,n){return e&&Mq(t.prototype,e),n&&Mq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function YZe(t){var e=XZe(t,"string");return B2(e)=="symbol"?e:String(e)}function XZe(t,e){if(B2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(B2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Eq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Tq=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,KZe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,ZZe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Iae={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},JZe=Object.keys(Iae),Rx="NaN";function QZe(t,e){return t*Iae[e]}var aC=function(){function t(e,n){GZe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!KZe.test(n)&&(this.num=NaN,this.unit=""),JZe.includes(n)&&(this.num=QZe(e,n),this.unit="px")}return qZe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=ZZe.exec(n))!==null&&r!==void 0?r:[],o=gI(i,3),s=o[1],a=o[2];return new t(parseFloat(s),a??"")}}]),t}();function kae(t){if(t.includes(Rx))return Rx;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=Eq.exec(e))!==null&&n!==void 0?n:[],i=gI(r,4),o=i[1],s=i[2],a=i[3],l=aC.parse(o??""),d=aC.parse(a??""),f=s==="*"?l.multiply(d):l.divide(d);if(f.isNaN())return Rx;e=e.replace(Eq,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var p,g=(p=Tq.exec(e))!==null&&p!==void 0?p:[],v=gI(g,4),x=v[1],b=v[2],S=v[3],M=aC.parse(x??""),T=aC.parse(S??""),C=b==="+"?M.add(T):M.subtract(T);if(C.isNaN())return Rx;e=e.replace(Tq,C.toString())}return e}var Cq=/\(([^()]*)\)/;function eJe(t){for(var e=t;e.includes("(");){var n=Cq.exec(e),r=gI(n,2),i=r[1];e=e.replace(Cq,kae(i))}return e}function tJe(t){var e=t.replace(/\s+/g,"");return e=eJe(e),e=kae(e),e}function nJe(t){try{return tJe(t)}catch{return Rx}}function R3(t){var e=nJe(t.slice(5,-1));return e===Rx?"":e}var rJe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],iJe=["dx","dy","angle","className","breakAll"];function uB(){return uB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uB.apply(this,arguments)}function Aq(t,e){if(t==null)return{};var n=oJe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function oJe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Pq(t,e){return cJe(t)||lJe(t,e)||aJe(t,e)||sJe()}function sJe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aJe(t,e){if(t){if(typeof t=="string")return Iq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Iq(t,e)}}function Iq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lJe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){d=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function cJe(t){if(Array.isArray(t))return t}var Rae=/[ \f\n\r\t\v\u2028\u2029]+/,Oae=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var o=[];ri(n)||(r?o=n.toString().split(""):o=n.toString().split(Rae));var s=o.map(function(l){return{word:l,width:FS(l,i).width}}),a=r?0:FS("",i).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}},uJe=function(e,n,r,i,o){var s=e.maxLines,a=e.children,l=e.style,d=e.breakAll,f=Cn(s),p=a,g=function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return he.reduce(function(ue,be){var ie=be.word,ve=be.width,Ee=ue[ue.length-1];if(Ee&&(i==null||o||Ee.width+ve+r<Number(i)))Ee.words.push(ie),Ee.width+=ve+r;else{var Ne={words:[ie],width:ve};ue.push(Ne)}return ue},[])},v=g(n),x=function(he){return he.reduce(function(ue,be){return ue.width>be.width?ue:be})};if(!f)return v;for(var b="",S=function(he){var ue=p.slice(0,he),be=Oae({breakAll:d,style:l,children:ue+b}).wordsWithComputedWidth,ie=g(be),ve=ie.length>s||x(ie).width>Number(i);return[ve,ie]},M=0,T=p.length-1,C=0,k;M<=T&&C<=p.length-1;){var O=Math.floor((M+T)/2),D=O-1,B=S(D),U=Pq(B,2),J=U[0],V=U[1],X=S(O),oe=Pq(X,1),pe=oe[0];if(!J&&!pe&&(M=O+1),J&&pe&&(T=O-1),!J&&pe){k=V;break}C++}return k||v},kq=function(e){var n=ri(e)?[]:e.toString().split(Rae);return[{words:n}]},dJe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,o=e.style,s=e.breakAll,a=e.maxLines;if((n||r)&&!nm.isSsr){var l,d,f=Oae({breakAll:s,children:i,style:o});if(f){var p=f.wordsWithComputedWidth,g=f.spaceWidth;l=p,d=g}else return kq(i);return uJe({breakAll:s,children:i,maxLines:a,style:o},l,d,n,r)}return kq(i)},Rq="#808080",yI=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,s=e.lineHeight,a=s===void 0?"1em":s,l=e.capHeight,d=l===void 0?"0.71em":l,f=e.scaleToFit,p=f===void 0?!1:f,g=e.textAnchor,v=g===void 0?"start":g,x=e.verticalAnchor,b=x===void 0?"end":x,S=e.fill,M=S===void 0?Rq:S,T=Aq(e,rJe),C=W.useMemo(function(){return dJe({breakAll:T.breakAll,children:T.children,maxLines:T.maxLines,scaleToFit:p,style:T.style,width:T.width})},[T.breakAll,T.children,T.maxLines,p,T.style,T.width]),k=T.dx,O=T.dy,D=T.angle,B=T.className,U=T.breakAll,J=Aq(T,iJe);if(!Ws(r)||!Ws(o))return null;var V=r+(Cn(k)?k:0),X=o+(Cn(O)?O:0),oe;switch(b){case"start":oe=R3("calc(".concat(d,")"));break;case"middle":oe=R3("calc(".concat((C.length-1)/2," * -").concat(a," + (").concat(d," / 2))"));break;default:oe=R3("calc(".concat(C.length-1," * -").concat(a,")"));break}var pe=[];if(p){var re=C[0].width,he=T.width;pe.push("scale(".concat((Cn(he)?he/re:1)/re,")"))}return D&&pe.push("rotate(".concat(D,", ").concat(V,", ").concat(X,")")),pe.length&&(J.transform=pe.join(" ")),Ze.createElement("text",uB({},ni(J,!0),{x:V,y:X,className:qt("recharts-text",B),textAnchor:v,fill:M.includes("url")?Rq:M}),C.map(function(ue,be){var ie=ue.words.join(U?"":" ");return Ze.createElement("tspan",{x:V,dy:be===0?oe:a,key:ie},ie)}))};function iy(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hJe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Lae(t){let e,n,r;t.length!==2?(e=iy,n=(a,l)=>iy(t(a),l),r=(a,l)=>t(a)-l):(e=t===iy||t===hJe?t:fJe,n=t,r=t);function i(a,l,d=0,f=a.length){if(d<f){if(e(l,l)!==0)return f;do{const p=d+f>>>1;n(a[p],l)<0?d=p+1:f=p}while(d<f)}return d}function o(a,l,d=0,f=a.length){if(d<f){if(e(l,l)!==0)return f;do{const p=d+f>>>1;n(a[p],l)<=0?d=p+1:f=p}while(d<f)}return d}function s(a,l,d=0,f=a.length){const p=i(a,l,d,f-1);return p>d&&r(a[p-1],l)>-r(a[p],l)?p-1:p}return{left:i,center:s,right:o}}function fJe(){return 0}function Dae(t){return t===null?NaN:+t}function*pJe(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const mJe=Lae(iy),CE=mJe.right;Lae(Dae).center;class Oq extends Map{constructor(e,n=vJe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Lq(this,e))}has(e){return super.has(Lq(this,e))}set(e,n){return super.set(gJe(this,e),n)}delete(e){return super.delete(yJe(this,e))}}function Lq({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function gJe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function yJe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function vJe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function _Je(t=iy){if(t===iy)return Nae;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Nae(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const xJe=Math.sqrt(50),bJe=Math.sqrt(10),wJe=Math.sqrt(2);function vI(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=xJe?10:o>=bJe?5:o>=wJe?2:1;let a,l,d;return i<0?(d=Math.pow(10,-i)/s,a=Math.round(t*d),l=Math.round(e*d),a/d<t&&++a,l/d>e&&--l,d=-d):(d=Math.pow(10,i)*s,a=Math.round(t/d),l=Math.round(e/d),a*d<t&&++a,l*d>e&&--l),l<a&&.5<=n&&n<2?vI(t,e,n*2):[a,l,d]}function dB(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,s]=r?vI(e,t,n):vI(t,e,n);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(r)if(s<0)for(let d=0;d<a;++d)l[d]=(o-d)/-s;else for(let d=0;d<a;++d)l[d]=(o-d)*s;else if(s<0)for(let d=0;d<a;++d)l[d]=(i+d)/-s;else for(let d=0;d<a;++d)l[d]=(i+d)*s;return l}function hB(t,e,n){return e=+e,t=+t,n=+n,vI(t,e,n)[2]}function SJe(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?hB(e,t,n):hB(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Dq(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Nq(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function zae(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Nae:_Je(i);r>n;){if(r-n>600){const l=r-n+1,d=e-n+1,f=Math.log(l),p=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*p*(l-p)/l)*(d-l/2<0?-1:1),v=Math.max(n,Math.floor(e-d*p/l+g)),x=Math.min(r,Math.floor(e+(l-d)*p/l+g));zae(t,e,v,x,i)}const o=t[e];let s=n,a=r;for(Bw(t,n,e),i(t[r],o)>0&&Bw(t,n,r);s<a;){for(Bw(t,s,a),++s,--a;i(t[s],o)<0;)++s;for(;i(t[a],o)>0;)--a}i(t[n],o)===0?Bw(t,n,a):(++a,Bw(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function Bw(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function MJe(t,e,n){if(t=Float64Array.from(pJe(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Nq(t);if(e>=1)return Dq(t);var r,i=(r-1)*e,o=Math.floor(i),s=Dq(zae(t,o).subarray(0,o+1)),a=Nq(t.subarray(o+1));return s+(a-s)*(i-o)}}function EJe(t,e,n=Dae){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),s=+n(t[o],o,t),a=+n(t[o+1],o+1,t);return s+(a-s)*(i-o)}}function TJe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Ad(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Pm(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const fB=Symbol("implicit");function e6(){var t=new Oq,e=[],n=[],r=fB;function i(o){let s=t.get(o);if(s===void 0){if(r!==fB)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new Oq;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return e6(e,n).unknown(r)},Ad.apply(i,arguments),i}function $2(){var t=e6().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,s,a=!1,l=0,d=0,f=.5;delete t.unknown;function p(){var g=e().length,v=i<r,x=v?i:r,b=v?r:i;o=(b-x)/Math.max(1,g-l+d*2),a&&(o=Math.floor(o)),x+=(b-x-o*(g-l))*f,s=o*(1-l),a&&(x=Math.round(x),s=Math.round(s));var S=TJe(g).map(function(M){return x+o*M});return n(v?S.reverse():S)}return t.domain=function(g){return arguments.length?(e(g),p()):e()},t.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,p()):[r,i]},t.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,a=!0,p()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(g){return arguments.length?(a=!!g,p()):a},t.padding=function(g){return arguments.length?(l=Math.min(1,d=+g),p()):l},t.paddingInner=function(g){return arguments.length?(l=Math.min(1,g),p()):l},t.paddingOuter=function(g){return arguments.length?(d=+g,p()):d},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),p()):f},t.copy=function(){return $2(e(),[r,i]).round(a).paddingInner(l).paddingOuter(d).align(f)},Ad.apply(p(),arguments)}function Fae(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Fae(e())},t}function BS(){return Fae($2.apply(null,arguments).paddingInner(1))}function t6(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Bae(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function AE(){}var j2=.7,_I=1/j2,nb="\\s*([+-]?\\d+)\\s*",U2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",CJe=/^#([0-9a-f]{3,8})$/,AJe=new RegExp(`^rgb\\(${nb},${nb},${nb}\\)$`),PJe=new RegExp(`^rgb\\(${Pf},${Pf},${Pf}\\)$`),IJe=new RegExp(`^rgba\\(${nb},${nb},${nb},${U2}\\)$`),kJe=new RegExp(`^rgba\\(${Pf},${Pf},${Pf},${U2}\\)$`),RJe=new RegExp(`^hsl\\(${U2},${Pf},${Pf}\\)$`),OJe=new RegExp(`^hsla\\(${U2},${Pf},${Pf},${U2}\\)$`),zq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};t6(AE,V2,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Fq,formatHex:Fq,formatHex8:LJe,formatHsl:DJe,formatRgb:Bq,toString:Bq});function Fq(){return this.rgb().formatHex()}function LJe(){return this.rgb().formatHex8()}function DJe(){return $ae(this).formatHsl()}function Bq(){return this.rgb().formatRgb()}function V2(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=CJe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?$q(e):n===3?new vc(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?lC(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?lC(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=AJe.exec(t))?new vc(e[1],e[2],e[3],1):(e=PJe.exec(t))?new vc(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=IJe.exec(t))?lC(e[1],e[2],e[3],e[4]):(e=kJe.exec(t))?lC(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=RJe.exec(t))?Vq(e[1],e[2]/100,e[3]/100,1):(e=OJe.exec(t))?Vq(e[1],e[2]/100,e[3]/100,e[4]):zq.hasOwnProperty(t)?$q(zq[t]):t==="transparent"?new vc(NaN,NaN,NaN,0):null}function $q(t){return new vc(t>>16&255,t>>8&255,t&255,1)}function lC(t,e,n,r){return r<=0&&(t=e=n=NaN),new vc(t,e,n,r)}function NJe(t){return t instanceof AE||(t=V2(t)),t?(t=t.rgb(),new vc(t.r,t.g,t.b,t.opacity)):new vc}function pB(t,e,n,r){return arguments.length===1?NJe(t):new vc(t,e,n,r??1)}function vc(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}t6(vc,pB,Bae(AE,{brighter(t){return t=t==null?_I:Math.pow(_I,t),new vc(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?j2:Math.pow(j2,t),new vc(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new vc(l0(this.r),l0(this.g),l0(this.b),xI(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jq,formatHex:jq,formatHex8:zJe,formatRgb:Uq,toString:Uq}));function jq(){return`#${qv(this.r)}${qv(this.g)}${qv(this.b)}`}function zJe(){return`#${qv(this.r)}${qv(this.g)}${qv(this.b)}${qv((isNaN(this.opacity)?1:this.opacity)*255)}`}function Uq(){const t=xI(this.opacity);return`${t===1?"rgb(":"rgba("}${l0(this.r)}, ${l0(this.g)}, ${l0(this.b)}${t===1?")":`, ${t})`}`}function xI(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function l0(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function qv(t){return t=l0(t),(t<16?"0":"")+t.toString(16)}function Vq(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new xh(t,e,n,r)}function $ae(t){if(t instanceof xh)return new xh(t.h,t.s,t.l,t.opacity);if(t instanceof AE||(t=V2(t)),!t)return new xh;if(t instanceof xh)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new xh(s,a,l,t.opacity)}function FJe(t,e,n,r){return arguments.length===1?$ae(t):new xh(t,e,n,r??1)}function xh(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}t6(xh,FJe,Bae(AE,{brighter(t){return t=t==null?_I:Math.pow(_I,t),new xh(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?j2:Math.pow(j2,t),new xh(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new vc(O3(t>=240?t-240:t+120,i,r),O3(t,i,r),O3(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new xh(Wq(this.h),cC(this.s),cC(this.l),xI(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=xI(this.opacity);return`${t===1?"hsl(":"hsla("}${Wq(this.h)}, ${cC(this.s)*100}%, ${cC(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Wq(t){return t=(t||0)%360,t<0?t+360:t}function cC(t){return Math.max(0,Math.min(1,t||0))}function O3(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const n6=t=>()=>t;function BJe(t,e){return function(n){return t+n*e}}function $Je(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function jJe(t){return(t=+t)==1?jae:function(e,n){return n-e?$Je(e,n,t):n6(isNaN(e)?n:e)}}function jae(t,e){var n=e-t;return n?BJe(t,n):n6(isNaN(t)?e:t)}const Hq=function t(e){var n=jJe(e);function r(i,o){var s=n((i=pB(i)).r,(o=pB(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),d=jae(i.opacity,o.opacity);return function(f){return i.r=s(f),i.g=a(f),i.b=l(f),i.opacity=d(f),i+""}}return r.gamma=t,r}(1);function UJe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function VJe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function WJe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=L1(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function HJe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function bI(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function GJe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=L1(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var mB=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,L3=new RegExp(mB.source,"g");function qJe(t){return function(){return t}}function YJe(t){return function(e){return t(e)+""}}function XJe(t,e){var n=mB.lastIndex=L3.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(t=t+"",e=e+"";(r=mB.exec(t))&&(i=L3.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:bI(r,i)})),n=L3.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?YJe(l[0].x):qJe(e):(e=l.length,function(d){for(var f=0,p;f<e;++f)a[(p=l[f]).i]=p.x(d);return a.join("")})}function L1(t,e){var n=typeof e,r;return e==null||n==="boolean"?n6(e):(n==="number"?bI:n==="string"?(r=V2(e))?(e=r,Hq):XJe:e instanceof V2?Hq:e instanceof Date?HJe:VJe(e)?UJe:Array.isArray(e)?WJe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?GJe:bI)(t,e)}function r6(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function KJe(t,e){e===void 0&&(e=t,t=L1);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function ZJe(t){return function(){return t}}function wI(t){return+t}var Gq=[0,1];function Ul(t){return t}function gB(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:ZJe(isNaN(e)?NaN:.5)}function JJe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function QJe(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=gB(i,r),o=n(s,o)):(r=gB(r,i),o=n(o,s)),function(a){return o(r(a))}}function eQe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=gB(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var l=CE(t,a,1,r)-1;return o[l](i[l](a))}}function PE(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function gO(){var t=Gq,e=Gq,n=L1,r,i,o,s=Ul,a,l,d;function f(){var g=Math.min(t.length,e.length);return s!==Ul&&(s=JJe(t[0],t[g-1])),a=g>2?eQe:QJe,l=d=null,p}function p(g){return g==null||isNaN(g=+g)?o:(l||(l=a(t.map(r),e,n)))(r(s(g)))}return p.invert=function(g){return s(i((d||(d=a(e,t.map(r),bI)))(g)))},p.domain=function(g){return arguments.length?(t=Array.from(g,wI),f()):t.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),n=r6,f()},p.clamp=function(g){return arguments.length?(s=g?!0:Ul,f()):s!==Ul},p.interpolate=function(g){return arguments.length?(n=g,f()):n},p.unknown=function(g){return arguments.length?(o=g,p):o},function(g,v){return r=g,i=v,f()}}function i6(){return gO()(Ul,Ul)}function tQe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function SI(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Fb(t){return t=SI(Math.abs(t)),t?t[1]:NaN}function nQe(t,e){return function(n,r){for(var i=n.length,o=[],s=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function rQe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var iQe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function W2(t){if(!(e=iQe.exec(t)))throw new Error("invalid format: "+t);var e;return new o6({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}W2.prototype=o6.prototype;function o6(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}o6.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function oQe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Uae;function sQe(t,e){var n=SI(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Uae=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+SI(t,Math.max(0,e+o-1))[0]}function qq(t,e){var n=SI(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Yq={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:tQe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>qq(t*100,e),r:qq,s:sQe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Xq(t){return t}var Kq=Array.prototype.map,Zq=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function aQe(t){var e=t.grouping===void 0||t.thousands===void 0?Xq:nQe(Kq.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Xq:rQe(Kq.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function d(p){p=W2(p);var g=p.fill,v=p.align,x=p.sign,b=p.symbol,S=p.zero,M=p.width,T=p.comma,C=p.precision,k=p.trim,O=p.type;O==="n"?(T=!0,O="g"):Yq[O]||(C===void 0&&(C=12),k=!0,O="g"),(S||g==="0"&&v==="=")&&(S=!0,g="0",v="=");var D=b==="$"?n:b==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",B=b==="$"?r:/[%p]/.test(O)?s:"",U=Yq[O],J=/[defgprs%]/.test(O);C=C===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function V(X){var oe=D,pe=B,re,he,ue;if(O==="c")pe=U(X)+pe,X="";else{X=+X;var be=X<0||1/X<0;if(X=isNaN(X)?l:U(Math.abs(X),C),k&&(X=oQe(X)),be&&+X==0&&x!=="+"&&(be=!1),oe=(be?x==="("?x:a:x==="-"||x==="("?"":x)+oe,pe=(O==="s"?Zq[8+Uae/3]:"")+pe+(be&&x==="("?")":""),J){for(re=-1,he=X.length;++re<he;)if(ue=X.charCodeAt(re),48>ue||ue>57){pe=(ue===46?i+X.slice(re+1):X.slice(re))+pe,X=X.slice(0,re);break}}}T&&!S&&(X=e(X,1/0));var ie=oe.length+X.length+pe.length,ve=ie<M?new Array(M-ie+1).join(g):"";switch(T&&S&&(X=e(ve+X,ve.length?M-pe.length:1/0),ve=""),v){case"<":X=oe+X+pe+ve;break;case"=":X=oe+ve+X+pe;break;case"^":X=ve.slice(0,ie=ve.length>>1)+oe+X+pe+ve.slice(ie);break;default:X=ve+oe+X+pe;break}return o(X)}return V.toString=function(){return p+""},V}function f(p,g){var v=d((p=W2(p),p.type="f",p)),x=Math.max(-8,Math.min(8,Math.floor(Fb(g)/3)))*3,b=Math.pow(10,-x),S=Zq[8+x/3];return function(M){return v(b*M)+S}}return{format:d,formatPrefix:f}}var uC,s6,Vae;lQe({thousands:",",grouping:[3],currency:["$",""]});function lQe(t){return uC=aQe(t),s6=uC.format,Vae=uC.formatPrefix,uC}function cQe(t){return Math.max(0,-Fb(Math.abs(t)))}function uQe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Fb(e)/3)))*3-Fb(Math.abs(t)))}function dQe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Fb(e)-Fb(t))+1}function Wae(t,e,n,r){var i=SJe(t,e,n),o;switch(r=W2(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=uQe(i,s))&&(r.precision=o),Vae(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=dQe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=cQe(i))&&(r.precision=o-(r.type==="%")*2);break}}return s6(r)}function Ay(t){var e=t.domain;return t.ticks=function(n){var r=e();return dB(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Wae(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],a=r[o],l,d,f=10;for(a<s&&(d=s,s=a,a=d,d=i,i=o,o=d);f-- >0;){if(d=hB(s,a,n),d===l)return r[i]=s,r[o]=a,e(r);if(d>0)s=Math.floor(s/d)*d,a=Math.ceil(a/d)*d;else if(d<0)s=Math.ceil(s*d)/d,a=Math.floor(a*d)/d;else break;l=d}return t},t}function MI(){var t=i6();return t.copy=function(){return PE(t,MI())},Ad.apply(t,arguments),Ay(t)}function Hae(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,wI),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Hae(t).unknown(e)},t=arguments.length?Array.from(t,wI):[0,1],Ay(n)}function Gae(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),t[n]=e.floor(i),t[r]=e.ceil(o),t}function Jq(t){return Math.log(t)}function Qq(t){return Math.exp(t)}function hQe(t){return-Math.log(-t)}function fQe(t){return-Math.exp(-t)}function pQe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function mQe(t){return t===10?pQe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function gQe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function eY(t){return(e,n)=>-t(-e,n)}function a6(t){const e=t(Jq,Qq),n=e.domain;let r=10,i,o;function s(){return i=gQe(r),o=mQe(r),n()[0]<0?(i=eY(i),o=eY(o),t(hQe,fQe)):t(Jq,Qq),e}return e.base=function(a){return arguments.length?(r=+a,s()):r},e.domain=function(a){return arguments.length?(n(a),s()):n()},e.ticks=a=>{const l=n();let d=l[0],f=l[l.length-1];const p=f<d;p&&([d,f]=[f,d]);let g=i(d),v=i(f),x,b;const S=a==null?10:+a;let M=[];if(!(r%1)&&v-g<S){if(g=Math.floor(g),v=Math.ceil(v),d>0){for(;g<=v;++g)for(x=1;x<r;++x)if(b=g<0?x/o(-g):x*o(g),!(b<d)){if(b>f)break;M.push(b)}}else for(;g<=v;++g)for(x=r-1;x>=1;--x)if(b=g>0?x/o(-g):x*o(g),!(b<d)){if(b>f)break;M.push(b)}M.length*2<S&&(M=dB(d,f,S))}else M=dB(g,v,Math.min(v-g,S)).map(o);return p?M.reverse():M},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=W2(l)).precision==null&&(l.trim=!0),l=s6(l)),a===1/0)return l;const d=Math.max(1,r*a/e.ticks().length);return f=>{let p=f/o(Math.round(i(f)));return p*r<r-.5&&(p*=r),p<=d?l(f):""}},e.nice=()=>n(Gae(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),e}function qae(){const t=a6(gO()).domain([1,10]);return t.copy=()=>PE(t,qae()).base(t.base()),Ad.apply(t,arguments),t}function tY(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function nY(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function l6(t){var e=1,n=t(tY(e),nY(e));return n.constant=function(r){return arguments.length?t(tY(e=+r),nY(e)):e},Ay(n)}function Yae(){var t=l6(gO());return t.copy=function(){return PE(t,Yae()).constant(t.constant())},Ad.apply(t,arguments)}function rY(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function yQe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function vQe(t){return t<0?-t*t:t*t}function c6(t){var e=t(Ul,Ul),n=1;function r(){return n===1?t(Ul,Ul):n===.5?t(yQe,vQe):t(rY(n),rY(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Ay(e)}function u6(){var t=c6(gO());return t.copy=function(){return PE(t,u6()).exponent(t.exponent())},Ad.apply(t,arguments),t}function _Qe(){return u6.apply(null,arguments).exponent(.5)}function iY(t){return Math.sign(t)*t*t}function xQe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Xae(){var t=i6(),e=[0,1],n=!1,r;function i(o){var s=xQe(t(o));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(o){return t.invert(iY(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,wI)).map(iY)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Xae(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Ad.apply(i,arguments),Ay(i)}function Kae(){var t=[],e=[],n=[],r;function i(){var s=0,a=Math.max(1,e.length);for(n=new Array(a-1);++s<a;)n[s-1]=EJe(t,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:e[CE(n,s)]}return o.invertExtent=function(s){var a=e.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},o.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let a of s)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(iy),i()},o.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return Kae().domain(t).range(e).unknown(r)},Ad.apply(o,arguments)}function Zae(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function s(l){return l!=null&&l<=l?i[CE(r,l,0,n)]:o}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},s.invertExtent=function(l){var d=i.indexOf(l);return d<0?[NaN,NaN]:d<1?[t,r[0]]:d>=n?[r[n-1],e]:[r[d-1],r[d]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return Zae().domain([t,e]).range(i).unknown(o)},Ad.apply(Ay(s),arguments)}function Jae(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[CE(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var s=e.indexOf(o);return[t[s-1],t[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return Jae().domain(t).range(e).unknown(n)},Ad.apply(i,arguments)}const D3=new Date,N3=new Date;function Xs(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let d;do l.push(d=new Date(+o)),e(o,a),t(o);while(d<o&&o<s);return l},i.filter=o=>Xs(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;e(s,-1),!o(s););else for(;--a>=0;)for(;e(s,1),!o(s););}),n&&(i.count=(o,s)=>(D3.setTime(+o),N3.setTime(+s),t(D3),t(N3),Math.floor(n(D3,N3))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const EI=Xs(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);EI.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Xs(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):EI);EI.range;const Hp=1e3,ud=Hp*60,Gp=ud*60,pm=Gp*24,d6=pm*7,oY=pm*30,z3=pm*365,Yv=Xs(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Hp)},(t,e)=>(e-t)/Hp,t=>t.getUTCSeconds());Yv.range;const h6=Xs(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Hp)},(t,e)=>{t.setTime(+t+e*ud)},(t,e)=>(e-t)/ud,t=>t.getMinutes());h6.range;const f6=Xs(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ud)},(t,e)=>(e-t)/ud,t=>t.getUTCMinutes());f6.range;const p6=Xs(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Hp-t.getMinutes()*ud)},(t,e)=>{t.setTime(+t+e*Gp)},(t,e)=>(e-t)/Gp,t=>t.getHours());p6.range;const m6=Xs(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Gp)},(t,e)=>(e-t)/Gp,t=>t.getUTCHours());m6.range;const IE=Xs(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ud)/pm,t=>t.getDate()-1);IE.range;const yO=Xs(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/pm,t=>t.getUTCDate()-1);yO.range;const Qae=Xs(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/pm,t=>Math.floor(t/pm));Qae.range;function V0(t){return Xs(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ud)/d6)}const vO=V0(0),TI=V0(1),bQe=V0(2),wQe=V0(3),Bb=V0(4),SQe=V0(5),MQe=V0(6);vO.range;TI.range;bQe.range;wQe.range;Bb.range;SQe.range;MQe.range;function W0(t){return Xs(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/d6)}const _O=W0(0),CI=W0(1),EQe=W0(2),TQe=W0(3),$b=W0(4),CQe=W0(5),AQe=W0(6);_O.range;CI.range;EQe.range;TQe.range;$b.range;CQe.range;AQe.range;const g6=Xs(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());g6.range;const y6=Xs(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());y6.range;const mm=Xs(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());mm.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Xs(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});mm.range;const gm=Xs(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());gm.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Xs(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});gm.range;function F3(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function PQe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function IQe(t){let e,n,r;t.length!==2?(e=F3,n=(a,l)=>F3(t(a),l),r=(a,l)=>t(a)-l):(e=t===F3||t===PQe?t:kQe,n=t,r=t);function i(a,l,d=0,f=a.length){if(d<f){if(e(l,l)!==0)return f;do{const p=d+f>>>1;n(a[p],l)<0?d=p+1:f=p}while(d<f)}return d}function o(a,l,d=0,f=a.length){if(d<f){if(e(l,l)!==0)return f;do{const p=d+f>>>1;n(a[p],l)<=0?d=p+1:f=p}while(d<f)}return d}function s(a,l,d=0,f=a.length){const p=i(a,l,d,f-1);return p>d&&r(a[p-1],l)>-r(a[p],l)?p-1:p}return{left:i,center:s,right:o}}function kQe(){return 0}const RQe=Math.sqrt(50),OQe=Math.sqrt(10),LQe=Math.sqrt(2);function ele(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=RQe?10:o>=OQe?5:o>=LQe?2:1;let a,l,d;return i<0?(d=Math.pow(10,-i)/s,a=Math.round(t*d),l=Math.round(e*d),a/d<t&&++a,l/d>e&&--l,d=-d):(d=Math.pow(10,i)*s,a=Math.round(t/d),l=Math.round(e/d),a*d<t&&++a,l*d>e&&--l),l<a&&.5<=n&&n<2?ele(t,e,n*2):[a,l,d]}function sY(t,e,n){return e=+e,t=+t,n=+n,ele(t,e,n)[2]}function aY(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?sY(e,t,n):sY(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function tle(t,e,n,r,i,o){const s=[[Yv,1,Hp],[Yv,5,5*Hp],[Yv,15,15*Hp],[Yv,30,30*Hp],[o,1,ud],[o,5,5*ud],[o,15,15*ud],[o,30,30*ud],[i,1,Gp],[i,3,3*Gp],[i,6,6*Gp],[i,12,12*Gp],[r,1,pm],[r,2,2*pm],[n,1,d6],[e,1,oY],[e,3,3*oY],[t,1,z3]];function a(d,f,p){const g=f<d;g&&([d,f]=[f,d]);const v=p&&typeof p.range=="function"?p:l(d,f,p),x=v?v.range(d,+f+1):[];return g?x.reverse():x}function l(d,f,p){const g=Math.abs(f-d)/p,v=IQe(([,,S])=>S).right(s,g);if(v===s.length)return t.every(aY(d/z3,f/z3,p));if(v===0)return EI.every(Math.max(aY(d,f,p),1));const[x,b]=s[g/s[v-1][2]<s[v][2]/g?v-1:v];return x.every(b)}return[a,l]}const[DQe,NQe]=tle(gm,y6,_O,Qae,m6,f6),[zQe,FQe]=tle(mm,g6,vO,IE,p6,h6);function B3(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function $3(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function $w(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function BQe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,d=jw(i),f=Uw(i),p=jw(o),g=Uw(o),v=jw(s),x=Uw(s),b=jw(a),S=Uw(a),M=jw(l),T=Uw(l),C={a:be,A:ie,b:ve,B:Ee,c:null,d:fY,e:fY,f:cet,g:_et,G:bet,H:oet,I:set,j:aet,L:nle,m:uet,M:det,p:Ne,q:Ge,Q:gY,s:yY,S:het,u:fet,U:pet,V:met,w:get,W:yet,x:null,X:null,y:vet,Y:xet,Z:wet,"%":mY},k={a:dt,A:Ue,b:st,B:lt,c:null,d:pY,e:pY,f:Cet,g:zet,G:Bet,H:Met,I:Eet,j:Tet,L:ile,m:Aet,M:Pet,p:Rt,q:Lt,Q:gY,s:yY,S:Iet,u:ket,U:Ret,V:Oet,w:Let,W:Det,x:null,X:null,y:Net,Y:Fet,Z:$et,"%":mY},O={a:V,A:X,b:oe,B:pe,c:re,d:dY,e:dY,f:tet,g:uY,G:cY,H:hY,I:hY,j:ZQe,L:eet,m:KQe,M:JQe,p:J,q:XQe,Q:ret,s:iet,S:QQe,u:WQe,U:HQe,V:GQe,w:VQe,W:qQe,x:he,X:ue,y:uY,Y:cY,Z:YQe,"%":net};C.x=D(n,C),C.X=D(r,C),C.c=D(e,C),k.x=D(n,k),k.X=D(r,k),k.c=D(e,k);function D(Fe,at){return function(nt){var ge=[],tt=-1,rt=0,vt=Fe.length,Tt,We,Vt;for(nt instanceof Date||(nt=new Date(+nt));++tt<vt;)Fe.charCodeAt(tt)===37&&(ge.push(Fe.slice(rt,tt)),(We=lY[Tt=Fe.charAt(++tt)])!=null?Tt=Fe.charAt(++tt):We=Tt==="e"?" ":"0",(Vt=at[Tt])&&(Tt=Vt(nt,We)),ge.push(Tt),rt=tt+1);return ge.push(Fe.slice(rt,tt)),ge.join("")}}function B(Fe,at){return function(nt){var ge=$w(1900,void 0,1),tt=U(ge,Fe,nt+="",0),rt,vt;if(tt!=nt.length)return null;if("Q"in ge)return new Date(ge.Q);if("s"in ge)return new Date(ge.s*1e3+("L"in ge?ge.L:0));if(at&&!("Z"in ge)&&(ge.Z=0),"p"in ge&&(ge.H=ge.H%12+ge.p*12),ge.m===void 0&&(ge.m="q"in ge?ge.q:0),"V"in ge){if(ge.V<1||ge.V>53)return null;"w"in ge||(ge.w=1),"Z"in ge?(rt=$3($w(ge.y,0,1)),vt=rt.getUTCDay(),rt=vt>4||vt===0?CI.ceil(rt):CI(rt),rt=yO.offset(rt,(ge.V-1)*7),ge.y=rt.getUTCFullYear(),ge.m=rt.getUTCMonth(),ge.d=rt.getUTCDate()+(ge.w+6)%7):(rt=B3($w(ge.y,0,1)),vt=rt.getDay(),rt=vt>4||vt===0?TI.ceil(rt):TI(rt),rt=IE.offset(rt,(ge.V-1)*7),ge.y=rt.getFullYear(),ge.m=rt.getMonth(),ge.d=rt.getDate()+(ge.w+6)%7)}else("W"in ge||"U"in ge)&&("w"in ge||(ge.w="u"in ge?ge.u%7:"W"in ge?1:0),vt="Z"in ge?$3($w(ge.y,0,1)).getUTCDay():B3($w(ge.y,0,1)).getDay(),ge.m=0,ge.d="W"in ge?(ge.w+6)%7+ge.W*7-(vt+5)%7:ge.w+ge.U*7-(vt+6)%7);return"Z"in ge?(ge.H+=ge.Z/100|0,ge.M+=ge.Z%100,$3(ge)):B3(ge)}}function U(Fe,at,nt,ge){for(var tt=0,rt=at.length,vt=nt.length,Tt,We;tt<rt;){if(ge>=vt)return-1;if(Tt=at.charCodeAt(tt++),Tt===37){if(Tt=at.charAt(tt++),We=O[Tt in lY?at.charAt(tt++):Tt],!We||(ge=We(Fe,nt,ge))<0)return-1}else if(Tt!=nt.charCodeAt(ge++))return-1}return ge}function J(Fe,at,nt){var ge=d.exec(at.slice(nt));return ge?(Fe.p=f.get(ge[0].toLowerCase()),nt+ge[0].length):-1}function V(Fe,at,nt){var ge=v.exec(at.slice(nt));return ge?(Fe.w=x.get(ge[0].toLowerCase()),nt+ge[0].length):-1}function X(Fe,at,nt){var ge=p.exec(at.slice(nt));return ge?(Fe.w=g.get(ge[0].toLowerCase()),nt+ge[0].length):-1}function oe(Fe,at,nt){var ge=M.exec(at.slice(nt));return ge?(Fe.m=T.get(ge[0].toLowerCase()),nt+ge[0].length):-1}function pe(Fe,at,nt){var ge=b.exec(at.slice(nt));return ge?(Fe.m=S.get(ge[0].toLowerCase()),nt+ge[0].length):-1}function re(Fe,at,nt){return U(Fe,e,at,nt)}function he(Fe,at,nt){return U(Fe,n,at,nt)}function ue(Fe,at,nt){return U(Fe,r,at,nt)}function be(Fe){return s[Fe.getDay()]}function ie(Fe){return o[Fe.getDay()]}function ve(Fe){return l[Fe.getMonth()]}function Ee(Fe){return a[Fe.getMonth()]}function Ne(Fe){return i[+(Fe.getHours()>=12)]}function Ge(Fe){return 1+~~(Fe.getMonth()/3)}function dt(Fe){return s[Fe.getUTCDay()]}function Ue(Fe){return o[Fe.getUTCDay()]}function st(Fe){return l[Fe.getUTCMonth()]}function lt(Fe){return a[Fe.getUTCMonth()]}function Rt(Fe){return i[+(Fe.getUTCHours()>=12)]}function Lt(Fe){return 1+~~(Fe.getUTCMonth()/3)}return{format:function(Fe){var at=D(Fe+="",C);return at.toString=function(){return Fe},at},parse:function(Fe){var at=B(Fe+="",!1);return at.toString=function(){return Fe},at},utcFormat:function(Fe){var at=D(Fe+="",k);return at.toString=function(){return Fe},at},utcParse:function(Fe){var at=B(Fe+="",!0);return at.toString=function(){return Fe},at}}}var lY={"-":"",_:" ",0:"0"},fa=/^\s*\d+/,$Qe=/^%/,jQe=/[\\^$*+?|[\]().{}]/g;function _i(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function UQe(t){return t.replace(jQe,"\\$&")}function jw(t){return new RegExp("^(?:"+t.map(UQe).join("|")+")","i")}function Uw(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function VQe(t,e,n){var r=fa.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function WQe(t,e,n){var r=fa.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function HQe(t,e,n){var r=fa.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function GQe(t,e,n){var r=fa.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function qQe(t,e,n){var r=fa.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function cY(t,e,n){var r=fa.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function uY(t,e,n){var r=fa.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function YQe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function XQe(t,e,n){var r=fa.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function KQe(t,e,n){var r=fa.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function dY(t,e,n){var r=fa.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ZQe(t,e,n){var r=fa.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function hY(t,e,n){var r=fa.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function JQe(t,e,n){var r=fa.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function QQe(t,e,n){var r=fa.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function eet(t,e,n){var r=fa.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function tet(t,e,n){var r=fa.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function net(t,e,n){var r=$Qe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ret(t,e,n){var r=fa.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function iet(t,e,n){var r=fa.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function fY(t,e){return _i(t.getDate(),e,2)}function oet(t,e){return _i(t.getHours(),e,2)}function set(t,e){return _i(t.getHours()%12||12,e,2)}function aet(t,e){return _i(1+IE.count(mm(t),t),e,3)}function nle(t,e){return _i(t.getMilliseconds(),e,3)}function cet(t,e){return nle(t,e)+"000"}function uet(t,e){return _i(t.getMonth()+1,e,2)}function det(t,e){return _i(t.getMinutes(),e,2)}function het(t,e){return _i(t.getSeconds(),e,2)}function fet(t){var e=t.getDay();return e===0?7:e}function pet(t,e){return _i(vO.count(mm(t)-1,t),e,2)}function rle(t){var e=t.getDay();return e>=4||e===0?Bb(t):Bb.ceil(t)}function met(t,e){return t=rle(t),_i(Bb.count(mm(t),t)+(mm(t).getDay()===4),e,2)}function get(t){return t.getDay()}function yet(t,e){return _i(TI.count(mm(t)-1,t),e,2)}function vet(t,e){return _i(t.getFullYear()%100,e,2)}function _et(t,e){return t=rle(t),_i(t.getFullYear()%100,e,2)}function xet(t,e){return _i(t.getFullYear()%1e4,e,4)}function bet(t,e){var n=t.getDay();return t=n>=4||n===0?Bb(t):Bb.ceil(t),_i(t.getFullYear()%1e4,e,4)}function wet(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+_i(e/60|0,"0",2)+_i(e%60,"0",2)}function pY(t,e){return _i(t.getUTCDate(),e,2)}function Met(t,e){return _i(t.getUTCHours(),e,2)}function Eet(t,e){return _i(t.getUTCHours()%12||12,e,2)}function Tet(t,e){return _i(1+yO.count(gm(t),t),e,3)}function ile(t,e){return _i(t.getUTCMilliseconds(),e,3)}function Cet(t,e){return ile(t,e)+"000"}function Aet(t,e){return _i(t.getUTCMonth()+1,e,2)}function Pet(t,e){return _i(t.getUTCMinutes(),e,2)}function Iet(t,e){return _i(t.getUTCSeconds(),e,2)}function ket(t){var e=t.getUTCDay();return e===0?7:e}function Ret(t,e){return _i(_O.count(gm(t)-1,t),e,2)}function ole(t){var e=t.getUTCDay();return e>=4||e===0?$b(t):$b.ceil(t)}function Oet(t,e){return t=ole(t),_i($b.count(gm(t),t)+(gm(t).getUTCDay()===4),e,2)}function Let(t){return t.getUTCDay()}function Det(t,e){return _i(CI.count(gm(t)-1,t),e,2)}function Net(t,e){return _i(t.getUTCFullYear()%100,e,2)}function zet(t,e){return t=ole(t),_i(t.getUTCFullYear()%100,e,2)}function Fet(t,e){return _i(t.getUTCFullYear()%1e4,e,4)}function Bet(t,e){var n=t.getUTCDay();return t=n>=4||n===0?$b(t):$b.ceil(t),_i(t.getUTCFullYear()%1e4,e,4)}function $et(){return"+0000"}function mY(){return"%"}function gY(t){return+t}function yY(t){return Math.floor(+t/1e3)}var O_,sle,ale;jet({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function jet(t){return O_=BQe(t),sle=O_.format,O_.parse,ale=O_.utcFormat,O_.utcParse,O_}function Uet(t){return new Date(t)}function Vet(t){return t instanceof Date?+t:+new Date(+t)}function v6(t,e,n,r,i,o,s,a,l,d){var f=i6(),p=f.invert,g=f.domain,v=d(".%L"),x=d(":%S"),b=d("%I:%M"),S=d("%I %p"),M=d("%a %d"),T=d("%b %d"),C=d("%B"),k=d("%Y");function O(D){return(l(D)<D?v:a(D)<D?x:s(D)<D?b:o(D)<D?S:r(D)<D?i(D)<D?M:T:n(D)<D?C:k)(D)}return f.invert=function(D){return new Date(p(D))},f.domain=function(D){return arguments.length?g(Array.from(D,Vet)):g().map(Uet)},f.ticks=function(D){var B=g();return t(B[0],B[B.length-1],D??10)},f.tickFormat=function(D,B){return B==null?O:d(B)},f.nice=function(D){var B=g();return(!D||typeof D.range!="function")&&(D=e(B[0],B[B.length-1],D??10)),D?g(Gae(B,D)):f},f.copy=function(){return PE(f,v6(t,e,n,r,i,o,s,a,l,d))},f}function Wet(){return Ad.apply(v6(zQe,FQe,mm,g6,vO,IE,p6,h6,Yv,sle).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Het(){return Ad.apply(v6(DQe,NQe,gm,y6,_O,yO,m6,f6,Yv,ale).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function xO(){var t=0,e=1,n,r,i,o,s=Ul,a=!1,l;function d(p){return p==null||isNaN(p=+p)?l:s(i===0?.5:(p=(o(p)-n)*i,a?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([t,e]=p,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),d):[t,e]},d.clamp=function(p){return arguments.length?(a=!!p,d):a},d.interpolator=function(p){return arguments.length?(s=p,d):s};function f(p){return function(g){var v,x;return arguments.length?([v,x]=g,s=p(v,x),d):[s(0),s(1)]}}return d.range=f(L1),d.rangeRound=f(r6),d.unknown=function(p){return arguments.length?(l=p,d):l},function(p){return o=p,n=p(t),r=p(e),i=n===r?0:1/(r-n),d}}function Py(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function lle(){var t=Ay(xO()(Ul));return t.copy=function(){return Py(t,lle())},Pm.apply(t,arguments)}function cle(){var t=a6(xO()).domain([1,10]);return t.copy=function(){return Py(t,cle()).base(t.base())},Pm.apply(t,arguments)}function ule(){var t=l6(xO());return t.copy=function(){return Py(t,ule()).constant(t.constant())},Pm.apply(t,arguments)}function _6(){var t=c6(xO());return t.copy=function(){return Py(t,_6()).exponent(t.exponent())},Pm.apply(t,arguments)}function Get(){return _6.apply(null,arguments).exponent(.5)}function dle(){var t=[],e=Ul;function n(r){if(r!=null&&!isNaN(r=+r))return e((CE(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(iy),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>MJe(t,o/r))},n.copy=function(){return dle(e).domain(t)},Pm.apply(n,arguments)}function bO(){var t=0,e=.5,n=1,r=1,i,o,s,a,l,d=Ul,f,p=!1,g;function v(b){return isNaN(b=+b)?g:(b=.5+((b=+f(b))-o)*(r*b<r*o?a:l),d(p?Math.max(0,Math.min(1,b)):b))}v.domain=function(b){return arguments.length?([t,e,n]=b,i=f(t=+t),o=f(e=+e),s=f(n=+n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,v):[t,e,n]},v.clamp=function(b){return arguments.length?(p=!!b,v):p},v.interpolator=function(b){return arguments.length?(d=b,v):d};function x(b){return function(S){var M,T,C;return arguments.length?([M,T,C]=S,d=KJe(b,[M,T,C]),v):[d(0),d(.5),d(1)]}}return v.range=x(L1),v.rangeRound=x(r6),v.unknown=function(b){return arguments.length?(g=b,v):g},function(b){return f=b,i=b(t),o=b(e),s=b(n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,v}}function hle(){var t=Ay(bO()(Ul));return t.copy=function(){return Py(t,hle())},Pm.apply(t,arguments)}function fle(){var t=a6(bO()).domain([.1,1,10]);return t.copy=function(){return Py(t,fle()).base(t.base())},Pm.apply(t,arguments)}function ple(){var t=l6(bO());return t.copy=function(){return Py(t,ple()).constant(t.constant())},Pm.apply(t,arguments)}function x6(){var t=c6(bO());return t.copy=function(){return Py(t,x6()).exponent(t.exponent())},Pm.apply(t,arguments)}function qet(){return x6.apply(null,arguments).exponent(.5)}const vY=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:$2,scaleDiverging:hle,scaleDivergingLog:fle,scaleDivergingPow:x6,scaleDivergingSqrt:qet,scaleDivergingSymlog:ple,scaleIdentity:Hae,scaleImplicit:fB,scaleLinear:MI,scaleLog:qae,scaleOrdinal:e6,scalePoint:BS,scalePow:u6,scaleQuantile:Kae,scaleQuantize:Zae,scaleRadial:Xae,scaleSequential:lle,scaleSequentialLog:cle,scaleSequentialPow:_6,scaleSequentialQuantile:dle,scaleSequentialSqrt:Get,scaleSequentialSymlog:ule,scaleSqrt:_Qe,scaleSymlog:Yae,scaleThreshold:Jae,scaleTime:Wet,scaleUtc:Het,tickFormat:Wae},Symbol.toStringTag,{value:"Module"}));var Yet=T1;function Xet(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],s=e(o);if(s!=null&&(a===void 0?s===s&&!Yet(s):n(s,a)))var a=s,l=o}return l}var mle=Xet;function Ket(t,e){return t>e}var Zet=Ket,Jet=mle,Qet=Zet,ett=O1;function ttt(t){return t&&t.length?Jet(t,ett,Qet):void 0}var ntt=ttt;const wO=xi(ntt);function rtt(t,e){return t<e}var itt=rtt,ott=mle,stt=itt,att=O1;function ltt(t){return t&&t.length?ott(t,att,stt):void 0}var ctt=ltt;const SO=xi(ctt);var utt=LU,dtt=Cy,htt=bae,ftt=Ac;function ptt(t,e){var n=ftt(t)?utt:htt;return n(t,dtt(e))}var mtt=ptt,gtt=_ae,ytt=mtt;function vtt(t,e){return gtt(ytt(t,e),1)}var _tt=vtt;const xtt=xi(_tt);var btt=KU;function wtt(t,e){return btt(t,e)}var Stt=wtt;const MO=xi(Stt);var D1=1e9,Mtt={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},w6,Co=!0,Sd="[DecimalError] ",c0=Sd+"Invalid argument: ",b6=Sd+"Exponent out of range: ",N1=Math.floor,Iv=Math.pow,Ett=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ru,aa=1e7,go=7,gle=9007199254740991,AI=N1(gle/go),Gn={};Gn.absoluteValue=Gn.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Gn.comparedTo=Gn.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};Gn.decimalPlaces=Gn.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*go;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Gn.dividedBy=Gn.div=function(t){return rm(this,new this.constructor(t))};Gn.dividedToIntegerBy=Gn.idiv=function(t){var e=this,n=e.constructor;return no(rm(e,new n(t),0,1),n.precision)};Gn.equals=Gn.eq=function(t){return!this.cmp(t)};Gn.exponent=function(){return Ps(this)};Gn.greaterThan=Gn.gt=function(t){return this.cmp(t)>0};Gn.greaterThanOrEqualTo=Gn.gte=function(t){return this.cmp(t)>=0};Gn.isInteger=Gn.isint=function(){return this.e>this.d.length-2};Gn.isNegative=Gn.isneg=function(){return this.s<0};Gn.isPositive=Gn.ispos=function(){return this.s>0};Gn.isZero=function(){return this.s===0};Gn.lessThan=Gn.lt=function(t){return this.cmp(t)<0};Gn.lessThanOrEqualTo=Gn.lte=function(t){return this.cmp(t)<1};Gn.logarithm=Gn.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(ru))throw Error(Sd+"NaN");if(n.s<1)throw Error(Sd+(n.s?"NaN":"-Infinity"));return n.eq(ru)?new r(0):(Co=!1,e=rm(H2(n,o),H2(t,o),o),Co=!0,no(e,i))};Gn.minus=Gn.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?_le(e,t):yle(e,(t.s=-t.s,t))};Gn.modulo=Gn.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Sd+"NaN");return n.s?(Co=!1,e=rm(n,t,0,1).times(t),Co=!0,n.minus(e)):no(new r(n),i)};Gn.naturalExponential=Gn.exp=function(){return vle(this)};Gn.naturalLogarithm=Gn.ln=function(){return H2(this)};Gn.negated=Gn.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Gn.plus=Gn.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?yle(e,t):_le(e,(t.s=-t.s,t))};Gn.precision=Gn.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(c0+t);if(e=Ps(i)+1,r=i.d.length-1,n=r*go+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Gn.squareRoot=Gn.sqrt=function(){var t,e,n,r,i,o,s,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Sd+"NaN")}for(t=Ps(a),Co=!1,i=Math.sqrt(+a),i==0||i==1/0?(e=xf(a.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=N1((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=s=n+3;;)if(o=r,r=o.plus(rm(a,o,s+2)).times(.5),xf(o.d).slice(0,s)===(e=xf(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(no(o,n+1,0),o.times(o).eq(a)){r=o;break}}else if(e!="9999")break;s+=4}return Co=!0,no(r,n)};Gn.times=Gn.mul=function(t){var e,n,r,i,o,s,a,l,d,f=this,p=f.constructor,g=f.d,v=(t=new p(t)).d;if(!f.s||!t.s)return new p(0);for(t.s*=f.s,n=f.e+t.e,l=g.length,d=v.length,l<d&&(o=g,g=v,v=o,s=l,l=d,d=s),o=[],s=l+d,r=s;r--;)o.push(0);for(r=d;--r>=0;){for(e=0,i=l+r;i>r;)a=o[i]+v[r]*g[i-r-1]+e,o[i--]=a%aa|0,e=a/aa|0;o[i]=(o[i]+e)%aa|0}for(;!o[--s];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,Co?no(t,p.precision):t};Gn.toDecimalPlaces=Gn.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Ff(t,0,D1),e===void 0?e=r.rounding:Ff(e,0,8),no(n,t+Ps(n)+1,e))};Gn.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=C0(r,!0):(Ff(t,0,D1),e===void 0?e=i.rounding:Ff(e,0,8),r=no(new i(r),t+1,e),n=C0(r,!0,t+1)),n};Gn.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?C0(i):(Ff(t,0,D1),e===void 0?e=o.rounding:Ff(e,0,8),r=no(new o(i),t+Ps(i)+1,e),n=C0(r.abs(),!1,t+Ps(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Gn.toInteger=Gn.toint=function(){var t=this,e=t.constructor;return no(new e(t),Ps(t)+1,e.rounding)};Gn.toNumber=function(){return+this};Gn.toPower=Gn.pow=function(t){var e,n,r,i,o,s,a=this,l=a.constructor,d=12,f=+(t=new l(t));if(!t.s)return new l(ru);if(a=new l(a),!a.s){if(t.s<1)throw Error(Sd+"Infinity");return a}if(a.eq(ru))return a;if(r=l.precision,t.eq(ru))return no(a,r);if(e=t.e,n=t.d.length-1,s=e>=n,o=a.s,s){if((n=f<0?-f:f)<=gle){for(i=new l(ru),e=Math.ceil(r/go+4),Co=!1;n%2&&(i=i.times(a),xY(i.d,e)),n=N1(n/2),n!==0;)a=a.times(a),xY(a.d,e);return Co=!0,t.s<0?new l(ru).div(i):no(i,r)}}else if(o<0)throw Error(Sd+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,Co=!1,i=t.times(H2(a,r+d)),Co=!0,i=vle(i),i.s=o,i};Gn.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=Ps(i),r=C0(i,n<=o.toExpNeg||n>=o.toExpPos)):(Ff(t,1,D1),e===void 0?e=o.rounding:Ff(e,0,8),i=no(new o(i),t,e),n=Ps(i),r=C0(i,t<=n||n<=o.toExpNeg,t)),r};Gn.toSignificantDigits=Gn.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Ff(t,1,D1),e===void 0?e=r.rounding:Ff(e,0,8)),no(new r(n),t,e)};Gn.toString=Gn.valueOf=Gn.val=Gn.toJSON=Gn[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ps(t),n=t.constructor;return C0(t,e<=n.toExpNeg||e>=n.toExpPos)};function yle(t,e){var n,r,i,o,s,a,l,d,f=t.constructor,p=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),Co?no(e,p):e;if(l=t.d,d=e.d,s=t.e,i=e.e,l=l.slice(),o=s-i,o){for(o<0?(r=l,o=-o,a=d.length):(r=d,i=s,a=l.length),s=Math.ceil(p/go),a=s>a?s+1:a+1,o>a&&(o=a,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(a=l.length,o=d.length,a-o<0&&(o=a,r=d,d=l,l=r),n=0;o;)n=(l[--o]=l[o]+d[o]+n)/aa|0,l[o]%=aa;for(n&&(l.unshift(n),++i),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=i,Co?no(e,p):e}function Ff(t,e,n){if(t!==~~t||t<e||t>n)throw Error(c0+t)}function xf(t){var e,n,r,i=t.length-1,o="",s=t[0];if(i>0){for(o+=s,e=1;e<i;e++)r=t[e]+"",n=go-r.length,n&&(o+=Rg(n)),o+=r;s=t[e],r=s+"",n=go-r.length,n&&(o+=Rg(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var rm=function(){function t(r,i){var o,s=0,a=r.length;for(r=r.slice();a--;)o=r[a]*i+s,r[a]=o%aa|0,s=o/aa|0;return s&&r.unshift(s),r}function e(r,i,o,s){var a,l;if(o!=s)l=o>s?1:-1;else for(a=l=0;a<o;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function n(r,i,o){for(var s=0;o--;)r[o]-=s,s=r[o]<i[o]?1:0,r[o]=s*aa+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s){var a,l,d,f,p,g,v,x,b,S,M,T,C,k,O,D,B,U,J=r.constructor,V=r.s==i.s?1:-1,X=r.d,oe=i.d;if(!r.s)return new J(r);if(!i.s)throw Error(Sd+"Division by zero");for(l=r.e-i.e,B=oe.length,O=X.length,v=new J(V),x=v.d=[],d=0;oe[d]==(X[d]||0);)++d;if(oe[d]>(X[d]||0)&&--l,o==null?T=o=J.precision:s?T=o+(Ps(r)-Ps(i))+1:T=o,T<0)return new J(0);if(T=T/go+2|0,d=0,B==1)for(f=0,oe=oe[0],T++;(d<O||f)&&T--;d++)C=f*aa+(X[d]||0),x[d]=C/oe|0,f=C%oe|0;else{for(f=aa/(oe[0]+1)|0,f>1&&(oe=t(oe,f),X=t(X,f),B=oe.length,O=X.length),k=B,b=X.slice(0,B),S=b.length;S<B;)b[S++]=0;U=oe.slice(),U.unshift(0),D=oe[0],oe[1]>=aa/2&&++D;do f=0,a=e(oe,b,B,S),a<0?(M=b[0],B!=S&&(M=M*aa+(b[1]||0)),f=M/D|0,f>1?(f>=aa&&(f=aa-1),p=t(oe,f),g=p.length,S=b.length,a=e(p,b,g,S),a==1&&(f--,n(p,B<g?U:oe,g))):(f==0&&(a=f=1),p=oe.slice()),g=p.length,g<S&&p.unshift(0),n(b,p,S),a==-1&&(S=b.length,a=e(oe,b,B,S),a<1&&(f++,n(b,B<S?U:oe,S))),S=b.length):a===0&&(f++,b=[0]),x[d++]=f,a&&b[0]?b[S++]=X[k]||0:(b=[X[k]],S=1);while((k++<O||b[0]!==void 0)&&T--)}return x[0]||x.shift(),v.e=l,no(v,s?o+Ps(v)+1:o)}}();function vle(t,e){var n,r,i,o,s,a,l=0,d=0,f=t.constructor,p=f.precision;if(Ps(t)>16)throw Error(b6+Ps(t));if(!t.s)return new f(ru);for(e==null?(Co=!1,a=p):a=e,s=new f(.03125);t.abs().gte(.1);)t=t.times(s),d+=5;for(r=Math.log(Iv(2,d))/Math.LN10*2+5|0,a+=r,n=i=o=new f(ru),f.precision=a;;){if(i=no(i.times(t),a),n=n.times(++l),s=o.plus(rm(i,n,a)),xf(s.d).slice(0,a)===xf(o.d).slice(0,a)){for(;d--;)o=no(o.times(o),a);return f.precision=p,e==null?(Co=!0,no(o,p)):o}o=s}}function Ps(t){for(var e=t.e*go,n=t.d[0];n>=10;n/=10)e++;return e}function j3(t,e,n){if(e>t.LN10.sd())throw Co=!0,n&&(t.precision=n),Error(Sd+"LN10 precision limit exceeded");return no(new t(t.LN10),e)}function Rg(t){for(var e="";t--;)e+="0";return e}function H2(t,e){var n,r,i,o,s,a,l,d,f,p=1,g=10,v=t,x=v.d,b=v.constructor,S=b.precision;if(v.s<1)throw Error(Sd+(v.s?"NaN":"-Infinity"));if(v.eq(ru))return new b(0);if(e==null?(Co=!1,d=S):d=e,v.eq(10))return e==null&&(Co=!0),j3(b,d);if(d+=g,b.precision=d,n=xf(x),r=n.charAt(0),o=Ps(v),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(t),n=xf(v.d),r=n.charAt(0),p++;o=Ps(v),r>1?(v=new b("0."+n),o++):v=new b(r+"."+n.slice(1))}else return l=j3(b,d+2,S).times(o+""),v=H2(new b(r+"."+n.slice(1)),d-g).plus(l),b.precision=S,e==null?(Co=!0,no(v,S)):v;for(a=s=v=rm(v.minus(ru),v.plus(ru),d),f=no(v.times(v),d),i=3;;){if(s=no(s.times(f),d),l=a.plus(rm(s,new b(i),d)),xf(l.d).slice(0,d)===xf(a.d).slice(0,d))return a=a.times(2),o!==0&&(a=a.plus(j3(b,d+2,S).times(o+""))),a=rm(a,new b(p),d),b.precision=S,e==null?(Co=!0,no(a,S)):a;a=l,i+=2}}function _Y(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=N1(n/go),t.d=[],r=(n+1)%go,n<0&&(r+=go),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=go;r<i;)t.d.push(+e.slice(r,r+=go));e=e.slice(r),r=go-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Co&&(t.e>AI||t.e<-AI))throw Error(b6+n)}else t.s=0,t.e=0,t.d=[0];return t}function no(t,e,n){var r,i,o,s,a,l,d,f,p=t.d;for(s=1,o=p[0];o>=10;o/=10)s++;if(r=e-s,r<0)r+=go,i=e,d=p[f=0];else{if(f=Math.ceil((r+1)/go),o=p.length,f>=o)return t;for(d=o=p[f],s=1;o>=10;o/=10)s++;r%=go,i=r-go+s}if(n!==void 0&&(o=Iv(10,s-i-1),a=d/o%10|0,l=e<0||p[f+1]!==void 0||d%o,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?i>0?d/Iv(10,s-i):0:p[f-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return l?(o=Ps(t),p.length=1,e=e-o-1,p[0]=Iv(10,(go-e%go)%go),t.e=N1(-e/go)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(r==0?(p.length=f,o=1,f--):(p.length=f+1,o=Iv(10,go-r),p[f]=i>0?(d/Iv(10,s-i)%Iv(10,i)|0)*o:0),l)for(;;)if(f==0){(p[0]+=o)==aa&&(p[0]=1,++t.e);break}else{if(p[f]+=o,p[f]!=aa)break;p[f--]=0,o=1}for(r=p.length;p[--r]===0;)p.pop();if(Co&&(t.e>AI||t.e<-AI))throw Error(b6+Ps(t));return t}function _le(t,e){var n,r,i,o,s,a,l,d,f,p,g=t.constructor,v=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),Co?no(e,v):e;if(l=t.d,p=e.d,r=e.e,d=t.e,l=l.slice(),s=d-r,s){for(f=s<0,f?(n=l,s=-s,a=p.length):(n=p,r=d,a=l.length),i=Math.max(Math.ceil(v/go),a)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=l.length,a=p.length,f=i<a,f&&(a=i),i=0;i<a;i++)if(l[i]!=p[i]){f=l[i]<p[i];break}s=0}for(f&&(n=l,l=p,p=n,e.s=-e.s),a=l.length,i=p.length-a;i>0;--i)l[a++]=0;for(i=p.length;i>s;){if(l[--i]<p[i]){for(o=i;o&&l[--o]===0;)l[o]=aa-1;--l[o],l[i]+=aa}l[i]-=p[i]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Co?no(e,v):e):new g(0)}function C0(t,e,n){var r,i=Ps(t),o=xf(t.d),s=o.length;return e?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+Rg(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+Rg(-i-1)+o,n&&(r=n-s)>0&&(o+=Rg(r))):i>=s?(o+=Rg(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+Rg(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=Rg(r))),t.s<0?"-"+o:o}function xY(t,e){if(t.length>e)return t.length=e,!0}function xle(t){var e,n,r;function i(o){var s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,o instanceof i){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(c0+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return _Y(s,o.toString())}else if(typeof o!="string")throw Error(c0+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,Ett.test(o))_Y(s,o);else throw Error(c0+o)}if(i.prototype=Gn,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=xle,i.config=i.set=Ttt,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Ttt(t){if(!t||typeof t!="object")throw Error(Sd+"Object expected");var e,n,r,i=["precision",1,D1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(N1(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(c0+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(c0+n+": "+r);return this}var w6=xle(Mtt);ru=new w6(1);const qi=w6;function Ctt(t){return ktt(t)||Itt(t)||Ptt(t)||Att()}function Att(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ptt(t,e){if(t){if(typeof t=="string")return yB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yB(t,e)}}function Itt(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function ktt(t){if(Array.isArray(t))return yB(t)}function yB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Rtt=function(e){return e},ble={"@@functional/placeholder":!0},wle=function(e){return e===ble},bY=function(e){return function n(){return arguments.length===0||arguments.length===1&&wle(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Ott=function t(e,n){return e===1?n:bY(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var s=i.filter(function(a){return a!==ble}).length;return s>=e?n.apply(void 0,i):t(e-s,bY(function(){for(var a=arguments.length,l=new Array(a),d=0;d<a;d++)l[d]=arguments[d];var f=i.map(function(p){return wle(p)?l.shift():p});return n.apply(void 0,Ctt(f).concat(l))}))})},EO=function(e){return Ott(e.length,e)},vB=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},Ltt=EO(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Dtt=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Rtt;var i=n.reverse(),o=i[0],s=i.slice(1);return function(){return s.reduce(function(a,l){return l(a)},o.apply(void 0,arguments))}},_B=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Sle=function(e){var n=null,r=null;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n&&o.every(function(a,l){return a===n[l]})||(n=o,r=e.apply(void 0,o)),r}};function Ntt(t){var e;return t===0?e=1:e=Math.floor(new qi(t).abs().log(10).toNumber())+1,e}function ztt(t,e,n){for(var r=new qi(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var Ftt=EO(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),Btt=EO(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),$tt=EO(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const TO={rangeStep:ztt,getDigitCount:Ntt,interpolateNumber:Ftt,uninterpolateNumber:Btt,uninterpolateTruncation:$tt};function xB(t){return Vtt(t)||Utt(t)||Mle(t)||jtt()}function jtt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Utt(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Vtt(t){if(Array.isArray(t))return bB(t)}function G2(t,e){return Gtt(t)||Htt(t,e)||Mle(t,e)||Wtt()}function Wtt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mle(t,e){if(t){if(typeof t=="string")return bB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bB(t,e)}}function bB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Htt(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var s=t[Symbol.iterator](),a;!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw o}}return n}}function Gtt(t){if(Array.isArray(t))return t}function Ele(t){var e=G2(t,2),n=e[0],r=e[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function Tle(t,e,n){if(t.lte(0))return new qi(0);var r=TO.getDigitCount(t.toNumber()),i=new qi(10).pow(r),o=t.div(i),s=r!==1?.05:.1,a=new qi(Math.ceil(o.div(s).toNumber())).add(n).mul(s),l=a.mul(i);return e?l:new qi(Math.ceil(l))}function qtt(t,e,n){var r=1,i=new qi(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new qi(10).pow(TO.getDigitCount(t)-1),i=new qi(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new qi(Math.floor(t)))}else t===0?i=new qi(Math.floor((e-1)/2)):n||(i=new qi(Math.floor(t)));var s=Math.floor((e-1)/2),a=Dtt(Ltt(function(l){return i.add(new qi(l-s).mul(r)).toNumber()}),vB);return a(0,e)}function Cle(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new qi(0),tickMin:new qi(0),tickMax:new qi(0)};var o=Tle(new qi(e).sub(t).div(n-1),r,i),s;t<=0&&e>=0?s=new qi(0):(s=new qi(t).add(e).div(2),s=s.sub(new qi(s).mod(o)));var a=Math.ceil(s.sub(t).div(o).toNumber()),l=Math.ceil(new qi(e).sub(s).div(o).toNumber()),d=a+l+1;return d>n?Cle(t,e,n,r,i+1):(d<n&&(l=e>0?l+(n-d):l,a=e>0?a:a+(n-d)),{step:o,tickMin:s.sub(new qi(a).mul(o)),tickMax:s.add(new qi(l).mul(o))})}function Ytt(t){var e=G2(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),a=Ele([n,r]),l=G2(a,2),d=l[0],f=l[1];if(d===-1/0||f===1/0){var p=f===1/0?[d].concat(xB(vB(0,i-1).map(function(){return 1/0}))):[].concat(xB(vB(0,i-1).map(function(){return-1/0})),[f]);return n>r?_B(p):p}if(d===f)return qtt(d,i,o);var g=Cle(d,f,s,o),v=g.step,x=g.tickMin,b=g.tickMax,S=TO.rangeStep(x,b.add(new qi(.1).mul(v)),v);return n>r?_B(S):S}function Xtt(t,e){var n=G2(t,2),r=n[0],i=n[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Ele([r,i]),a=G2(s,2),l=a[0],d=a[1];if(l===-1/0||d===1/0)return[r,i];if(l===d)return[l];var f=Math.max(e,2),p=Tle(new qi(d).sub(l).div(f-1),o,0),g=[].concat(xB(TO.rangeStep(new qi(l),new qi(d).sub(new qi(.99).mul(p)),p)),[d]);return r>i?_B(g):g}var Ktt=Sle(Ytt),Ztt=Sle(Xtt),Jtt="Invariant failed";function A0(t,e){if(!t)throw new Error(Jtt)}var Qtt=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function PI(){return PI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PI.apply(this,arguments)}function ent(t,e){return int(t)||rnt(t,e)||nnt(t,e)||tnt()}function tnt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nnt(t,e){if(t){if(typeof t=="string")return wY(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wY(t,e)}}function wY(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rnt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){d=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function int(t){if(Array.isArray(t))return t}function ont(t,e){if(t==null)return{};var n=snt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function snt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function kE(t){var e=t.offset,n=t.layout,r=t.width,i=t.dataKey,o=t.data,s=t.dataPointFormatter,a=t.xAxis,l=t.yAxis,d=ont(t,Qtt),f=ni(d,!1);t.direction==="x"&&a.type!=="number"&&A0(!1);var p=o.map(function(g){var v=s(g,i),x=v.x,b=v.y,S=v.value,M=v.errorVal;if(!M)return null;var T=[],C,k;if(Array.isArray(M)){var O=ent(M,2);C=O[0],k=O[1]}else C=k=M;if(n==="vertical"){var D=a.scale,B=b+e,U=B+r,J=B-r,V=D(S-C),X=D(S+k);T.push({x1:X,y1:U,x2:X,y2:J}),T.push({x1:V,y1:B,x2:X,y2:B}),T.push({x1:V,y1:U,x2:V,y2:J})}else if(n==="horizontal"){var oe=l.scale,pe=x+e,re=pe-r,he=pe+r,ue=oe(S-C),be=oe(S+k);T.push({x1:re,y1:be,x2:he,y2:be}),T.push({x1:pe,y1:ue,x2:pe,y2:be}),T.push({x1:re,y1:ue,x2:he,y2:ue})}return Ze.createElement(ds,PI({className:"recharts-errorBar",key:"bar-".concat(T.map(function(ie){return"".concat(ie.x1,"-").concat(ie.x2,"-").concat(ie.y1,"-").concat(ie.y2)}))},f),T.map(function(ie){return Ze.createElement("line",PI({},ie,{key:"line-".concat(ie.x1,"-").concat(ie.x2,"-").concat(ie.y1,"-").concat(ie.y2)}))}))});return Ze.createElement(ds,{className:"recharts-errorBars"},p)}kE.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"};kE.displayName="ErrorBar";function q2(t){"@babel/helpers - typeof";return q2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q2(t)}function SY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function U3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SY(Object(n),!0).forEach(function(r){ant(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ant(t,e,n){return e=lnt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lnt(t){var e=cnt(t,"string");return q2(e)=="symbol"?e:String(e)}function cnt(t,e){if(q2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(q2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ale=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,s=Zc(n,Db);if(!s)return null;var a;return s.props&&s.props.payload?a=s.props&&s.props.payload:o==="children"?a=(r||[]).reduce(function(l,d){var f=d.item,p=d.props,g=p.sectors||p.data||[];return l.concat(g.map(function(v){return{type:s.props.iconType||f.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):a=(r||[]).map(function(l){var d=l.item,f=d.props,p=f.dataKey,g=f.name,v=f.legendType,x=f.hide;return{inactive:x,dataKey:p,type:s.props.iconType||v||"square",color:S6(d),value:g||p,payload:d.props}}),U3(U3(U3({},s.props),Db.getWithHeight(s,i)),{},{payload:a,item:s})};function Y2(t){"@babel/helpers - typeof";return Y2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y2(t)}function MY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ld(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MY(Object(n),!0).forEach(function(r){rb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rb(t,e,n){return e=unt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function unt(t){var e=dnt(t,"string");return Y2(e)=="symbol"?e:String(e)}function dnt(t,e){if(Y2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Y2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EY(t){return mnt(t)||pnt(t)||fnt(t)||hnt()}function hnt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fnt(t,e){if(t){if(typeof t=="string")return wB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wB(t,e)}}function pnt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mnt(t){if(Array.isArray(t))return wB(t)}function wB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vu(t,e,n){return ri(t)||ri(e)?n:Ws(e)?md(t,e,n):qr(e)?e(t):n}function $S(t,e,n,r){var i=xtt(t,function(a){return vu(a,e)});if(n==="number"){var o=i.filter(function(a){return Cn(a)||parseFloat(a)});return o.length?[SO(o),wO(o)]:[1/0,-1/0]}var s=r?i.filter(function(a){return!ri(a)}):i;return s.map(function(a){return Ws(a)||a instanceof Date?a:""})}var gnt=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=-1,a=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(a<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,d=0;d<a;d++){var f=d>0?i[d-1].coordinate:i[a-1].coordinate,p=i[d].coordinate,g=d>=a-1?i[0].coordinate:i[d+1].coordinate,v=void 0;if(Sh(p-f)!==Sh(g-p)){var x=[];if(Sh(g-p)===Sh(l[1]-l[0])){v=g;var b=p+l[1]-l[0];x[0]=Math.min(b,(b+f)/2),x[1]=Math.max(b,(b+f)/2)}else{v=f;var S=g+l[1]-l[0];x[0]=Math.min(p,(S+p)/2),x[1]=Math.max(p,(S+p)/2)}var M=[Math.min(p,(v+p)/2),Math.max(p,(v+p)/2)];if(e>M[0]&&e<=M[1]||e>=x[0]&&e<=x[1]){s=i[d].index;break}}else{var T=Math.min(f,g),C=Math.max(f,g);if(e>(T+p)/2&&e<=(C+p)/2){s=i[d].index;break}}}else for(var k=0;k<a;k++)if(k===0&&e<=(r[k].coordinate+r[k+1].coordinate)/2||k>0&&k<a-1&&e>(r[k].coordinate+r[k-1].coordinate)/2&&e<=(r[k].coordinate+r[k+1].coordinate)/2||k===a-1&&e>(r[k].coordinate+r[k-1].coordinate)/2){s=r[k].index;break}return s},S6=function(e){var n=e,r=n.type.displayName,i=e.props,o=i.stroke,s=i.fill,a;switch(r){case"Line":a=o;break;case"Area":case"Radar":a=o&&o!=="none"?o:s;break;default:a=s;break}return a},ynt=function(e){var n=e.barSize,r=e.stackGroups,i=r===void 0?{}:r;if(!i)return{};for(var o={},s=Object.keys(i),a=0,l=s.length;a<l;a++)for(var d=i[s[a]].stackGroups,f=Object.keys(d),p=0,g=f.length;p<g;p++){var v=d[f[p]],x=v.items,b=v.cateAxisId,S=x.filter(function(C){return em(C.type).indexOf("Bar")>=0});if(S&&S.length){var M=S[0].props.barSize,T=S[0].props[b];o[T]||(o[T]=[]),o[T].push({item:S[0],stackList:S.slice(1),barSize:ri(M)?n:M})}}return o},vnt=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,o=e.sizeList,s=o===void 0?[]:o,a=e.maxBarSize,l=s.length;if(l<1)return null;var d=kb(n,i,0,!0),f,p=[];if(s[0].barSize===+s[0].barSize){var g=!1,v=i/l,x=s.reduce(function(k,O){return k+O.barSize||0},0);x+=(l-1)*d,x>=i&&(x-=(l-1)*d,d=0),x>=i&&v>0&&(g=!0,v*=.9,x=l*v);var b=(i-x)/2>>0,S={offset:b-d,size:0};f=s.reduce(function(k,O){var D={item:O.item,position:{offset:S.offset+S.size+d,size:g?v:O.barSize}},B=[].concat(EY(k),[D]);return S=B[B.length-1].position,O.stackList&&O.stackList.length&&O.stackList.forEach(function(U){B.push({item:U,position:S})}),B},p)}else{var M=kb(r,i,0,!0);i-2*M-(l-1)*d<=0&&(d=0);var T=(i-2*M-(l-1)*d)/l;T>1&&(T>>=0);var C=a===+a?Math.min(T,a):T;f=s.reduce(function(k,O,D){var B=[].concat(EY(k),[{item:O.item,position:{offset:M+(T+d)*D+(T-C)/2,size:C}}]);return O.stackList&&O.stackList.length&&O.stackList.forEach(function(U){B.push({item:U,position:B[B.length-1].position})}),B},p)}return f},_nt=function(e,n,r,i){var o=r.children,s=r.width,a=r.margin,l=s-(a.left||0)-(a.right||0),d=Ale({children:o,legendWidth:l});if(d){var f=i||{},p=f.width,g=f.height,v=d.align,x=d.verticalAlign,b=d.layout;if((b==="vertical"||b==="horizontal"&&x==="middle")&&v!=="center"&&Cn(e[v]))return ld(ld({},e),{},rb({},v,e[v]+(p||0)));if((b==="horizontal"||b==="vertical"&&v==="center")&&x!=="middle"&&Cn(e[x]))return ld(ld({},e),{},rb({},x,e[x]+(g||0)))}return e},xnt=function(e,n,r){return ri(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},Ple=function(e,n,r,i,o){var s=n.props.children,a=gd(s,kE).filter(function(d){return xnt(i,o,d.props.direction)});if(a&&a.length){var l=a.map(function(d){return d.props.dataKey});return e.reduce(function(d,f){var p=vu(f,r);if(ri(p))return d;var g=Array.isArray(p)?[SO(p),wO(p)]:[p,p],v=l.reduce(function(x,b){var S=vu(f,b,0),M=g[0]-Math.abs(Array.isArray(S)?S[0]:S),T=g[1]+Math.abs(Array.isArray(S)?S[1]:S);return[Math.min(M,x[0]),Math.max(T,x[1])]},[1/0,-1/0]);return[Math.min(v[0],d[0]),Math.max(v[1],d[1])]},[1/0,-1/0])}return null},bnt=function(e,n,r,i,o){var s=n.map(function(a){return Ple(e,a,r,o,i)}).filter(function(a){return!ri(a)});return s&&s.length?s.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},Ile=function(e,n,r,i,o){var s=n.map(function(l){var d=l.props.dataKey;return r==="number"&&d&&Ple(e,l,d,i)||$S(e,d,r,o)});if(r==="number")return s.reduce(function(l,d){return[Math.min(l[0],d[0]),Math.max(l[1],d[1])]},[1/0,-1/0]);var a={};return s.reduce(function(l,d){for(var f=0,p=d.length;f<p;f++)a[d[f]]||(a[d[f]]=!0,l.push(d[f]));return l},[])},kle=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},Rle=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var o,s,a=e.map(function(l){return l.coordinate===n&&(o=!0),l.coordinate===r&&(s=!0),l.coordinate});return o||a.push(n),s||a.push(r),a},qp=function(e,n,r){if(!e)return null;var i=e.scale,o=e.duplicateDomain,s=e.type,a=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,d=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(d=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?Sh(a[0]-a[1])*2*d:d,n&&(e.ticks||e.niceTicks)){var f=(e.ticks||e.niceTicks).map(function(p){var g=o?o.indexOf(p):p;return{coordinate:i(g)+d,value:p,offset:d}});return f.filter(function(p){return!ME(p.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(p,g){return{coordinate:i(p)+d,value:p,index:g,offset:d}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(p){return{coordinate:i(p)+d,value:p,offset:d}}):i.domain().map(function(p,g){return{coordinate:i(p)+d,value:o?o[p]:p,index:g,offset:d}})},V3=new WeakMap,dC=function(e,n){if(typeof n!="function")return e;V3.has(e)||V3.set(e,new WeakMap);var r=V3.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},wnt=function(e,n,r){var i=e.scale,o=e.type,s=e.layout,a=e.axisType;if(i==="auto")return s==="radial"&&a==="radiusAxis"?{scale:$2(),realScaleType:"band"}:s==="radial"&&a==="angleAxis"?{scale:MI(),realScaleType:"linear"}:o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:BS(),realScaleType:"point"}:o==="category"?{scale:$2(),realScaleType:"band"}:{scale:MI(),realScaleType:"linear"};if(SE(i)){var l="scale".concat(cO(i));return{scale:(vY[l]||BS)(),realScaleType:vY[l]?l:"point"}}return qr(i)?{scale:i}:{scale:BS(),realScaleType:"point"}},TY=1e-4,Snt=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),o=Math.min(i[0],i[1])-TY,s=Math.max(i[0],i[1])+TY,a=e(n[0]),l=e(n[r-1]);(a<o||a>s||l<o||l>s)&&e.domain([n[0],n[r-1]])}},Mnt=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},Ent=function(e,n){if(!n||n.length!==2||!Cn(n[0])||!Cn(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),o=[e[0],e[1]];return(!Cn(e[0])||e[0]<r)&&(o[0]=r),(!Cn(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<r&&(o[1]=r),o},Tnt=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,s=0,a=0;a<n;++a){var l=ME(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=o,e[a][r][1]=o+l,o=e[a][r][1]):(e[a][r][0]=s,e[a][r][1]=s+l,s=e[a][r][1])}},Cnt=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,s=0;s<n;++s){var a=ME(e[s][r][1])?e[s][r][0]:e[s][r][1];a>=0?(e[s][r][0]=o,e[s][r][1]=o+a,o=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},Ant={sign:Tnt,expand:GWe,none:Rb,silhouette:qWe,wiggle:YWe,positive:Cnt},Pnt=function(e,n,r){var i=n.map(function(a){return a.props.dataKey}),o=Ant[r],s=HWe().keys(i).value(function(a,l){return+vu(a,l,0)}).order(KF).offset(o);return s(e)},Int=function(e,n,r,i,o,s){if(!e)return null;var a=s?n.reverse():n,l={},d=a.reduce(function(p,g){var v=g.props,x=v.stackId,b=v.hide;if(b)return p;var S=g.props[r],M=p[S]||{hasStack:!1,stackGroups:{}};if(Ws(x)){var T=M.stackGroups[x]||{numericAxisId:r,cateAxisId:i,items:[]};T.items.push(g),M.hasStack=!0,M.stackGroups[x]=T}else M.stackGroups[EE("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[g]};return ld(ld({},p),{},rb({},S,M))},l),f={};return Object.keys(d).reduce(function(p,g){var v=d[g];if(v.hasStack){var x={};v.stackGroups=Object.keys(v.stackGroups).reduce(function(b,S){var M=v.stackGroups[S];return ld(ld({},b),{},rb({},S,{numericAxisId:r,cateAxisId:i,items:M.items,stackedData:Pnt(e,M.items,o)}))},x)}return ld(ld({},p),{},rb({},g,v))},f)},knt=function(e,n){var r=n.realScaleType,i=n.type,o=n.tickCount,s=n.originalDomain,a=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var d=e.domain();if(!d.length)return null;var f=Ktt(d,o,a);return e.domain([SO(f),wO(f)]),{niceTicks:f}}if(o&&i==="number"){var p=e.domain(),g=Ztt(p,o,a);return{niceTicks:g}}return null};function CY(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,o=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!ri(i[e.dataKey])){var a=tI(n,"value",i[e.dataKey]);if(a)return a.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var l=vu(i,ri(s)?e.dataKey:s);return ri(l)?null:e.scale(l)}var AY=function(e){var n=e.axis,r=e.ticks,i=e.offset,o=e.bandSize,s=e.entry,a=e.index;if(n.type==="category")return r[a]?r[a].coordinate+i:null;var l=vu(s,n.dataKey,n.domain[a]);return ri(l)?null:n.scale(l)-o/2+i},Rnt=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return i<=0&&o>=0?0:o<0?o:i}return r[0]},Ont=function(e,n){var r=e.props.stackId;if(Ws(r)){var i=n[r];if(i){var o=i.items.indexOf(e);return o>=0?i.stackedData[o]:null}}return null},Lnt=function(e){return e.reduce(function(n,r){return[SO(r.concat([n[0]]).filter(Cn)),wO(r.concat([n[1]]).filter(Cn))]},[1/0,-1/0])},Ole=function(e,n,r){return Object.keys(e).reduce(function(i,o){var s=e[o],a=s.stackedData,l=a.reduce(function(d,f){var p=Lnt(f.slice(n,r+1));return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},PY=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,IY=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,SB=function(e,n,r){if(qr(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(Cn(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(PY.test(e[0])){var o=+PY.exec(e[0])[1];i[0]=n[0]-o}else qr(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Cn(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(IY.test(e[1])){var s=+IY.exec(e[1])[1];i[1]=n[1]+s}else qr(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},II=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var o=JU(n,function(p){return p.coordinate}),s=1/0,a=1,l=o.length;a<l;a++){var d=o[a],f=o[a-1];s=Math.min((d.coordinate||0)-(f.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},kY=function(e,n,r){return!e||!e.length||MO(e,md(r,"type.defaultProps.domain"))?n:e},Lle=function(e,n){var r=e.props,i=r.dataKey,o=r.name,s=r.unit,a=r.formatter,l=r.tooltipType,d=r.chartType,f=r.hide;return ld(ld({},ni(e,!1)),{},{dataKey:i,unit:s,formatter:a,name:o||i,color:S6(e),value:vu(n,i),type:l,payload:n,chartType:d,hide:f})};function X2(t){"@babel/helpers - typeof";return X2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X2(t)}function RY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RY(Object(n),!0).forEach(function(r){Dnt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dnt(t,e,n){return e=Nnt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nnt(t){var e=znt(t,"string");return X2(e)=="symbol"?e:String(e)}function znt(t,e){if(X2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(X2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kI=Math.PI/180,Fnt=function(e){return e*180/Math.PI},Da=function(e,n,r,i){return{x:e+Math.cos(-kI*i)*r,y:n+Math.sin(-kI*i)*r}},Bnt=function(e,n){var r=e.x,i=e.y,o=n.x,s=n.y;return Math.sqrt(Math.pow(r-o,2)+Math.pow(i-s,2))},$nt=function(e,n){var r=e.x,i=e.y,o=n.cx,s=n.cy,a=Bnt({x:r,y:i},{x:o,y:s});if(a<=0)return{radius:a};var l=(r-o)/a,d=Math.acos(l);return i>s&&(d=2*Math.PI-d),{radius:a,angle:Fnt(d),angleInRadian:d}},jnt=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),o=Math.floor(r/360),s=Math.min(i,o);return{startAngle:n-s*360,endAngle:r-s*360}},Unt=function(e,n){var r=n.startAngle,i=n.endAngle,o=Math.floor(r/360),s=Math.floor(i/360),a=Math.min(o,s);return e+a*360},LY=function(e,n){var r=e.x,i=e.y,o=$nt({x:r,y:i},n),s=o.radius,a=o.angle,l=n.innerRadius,d=n.outerRadius;if(s<l||s>d)return!1;if(s===0)return!0;var f=jnt(n),p=f.startAngle,g=f.endAngle,v=a,x;if(p<=g){for(;v>g;)v-=360;for(;v<p;)v+=360;x=v>=p&&v<=g}else{for(;v>p;)v-=360;for(;v<g;)v+=360;x=v>=g&&v<=p}return x?OY(OY({},n),{},{radius:s,angle:Unt(v,n)}):null};function K2(t){"@babel/helpers - typeof";return K2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K2(t)}var Vnt=["offset"];function Wnt(t){return Ynt(t)||qnt(t)||Gnt(t)||Hnt()}function Hnt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gnt(t,e){if(t){if(typeof t=="string")return MB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MB(t,e)}}function qnt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ynt(t){if(Array.isArray(t))return MB(t)}function MB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xnt(t,e){if(t==null)return{};var n=Knt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Knt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function DY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $s(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DY(Object(n),!0).forEach(function(r){Znt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Znt(t,e,n){return e=Jnt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jnt(t){var e=Qnt(t,"string");return K2(e)=="symbol"?e:String(e)}function Qnt(t,e){if(K2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(K2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Z2(){return Z2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Z2.apply(this,arguments)}var ert=function(e){var n=e.value,r=e.formatter,i=ri(e.children)?n:e.children;return qr(r)?r(i):i},trt=function(e,n){var r=Sh(n-e),i=Math.min(Math.abs(n-e),360);return r*i},nrt=function(e,n,r){var i=e.position,o=e.viewBox,s=e.offset,a=e.className,l=o,d=l.cx,f=l.cy,p=l.innerRadius,g=l.outerRadius,v=l.startAngle,x=l.endAngle,b=l.clockWise,S=(p+g)/2,M=trt(v,x),T=M>=0?1:-1,C,k;i==="insideStart"?(C=v+T*s,k=b):i==="insideEnd"?(C=x-T*s,k=!b):i==="end"&&(C=x+T*s,k=b),k=M<=0?k:!k;var O=Da(d,f,S,C),D=Da(d,f,S,C+(k?1:-1)*359),B="M".concat(O.x,",").concat(O.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(k?0:1,`,
    `).concat(D.x,",").concat(D.y),U=ri(e.id)?EE("recharts-radial-line-"):e.id;return Ze.createElement("text",Z2({},r,{dominantBaseline:"central",className:qt("recharts-radial-bar-label",a)}),Ze.createElement("defs",null,Ze.createElement("path",{id:U,d:B})),Ze.createElement("textPath",{xlinkHref:"#".concat(U)},n))},rrt=function(e){var n=e.viewBox,r=e.offset,i=e.position,o=n,s=o.cx,a=o.cy,l=o.innerRadius,d=o.outerRadius,f=o.startAngle,p=o.endAngle,g=(f+p)/2;if(i==="outside"){var v=Da(s,a,d+r,g),x=v.x,b=v.y;return{x,y:b,textAnchor:x>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"end"};var S=(l+d)/2,M=Da(s,a,S,g),T=M.x,C=M.y;return{x:T,y:C,textAnchor:"middle",verticalAnchor:"middle"}},irt=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,o=e.position,s=n,a=s.x,l=s.y,d=s.width,f=s.height,p=f>=0?1:-1,g=p*i,v=p>0?"end":"start",x=p>0?"start":"end",b=d>=0?1:-1,S=b*i,M=b>0?"end":"start",T=b>0?"start":"end";if(o==="top"){var C={x:a+d/2,y:l-p*i,textAnchor:"middle",verticalAnchor:v};return $s($s({},C),r?{height:Math.max(l-r.y,0),width:d}:{})}if(o==="bottom"){var k={x:a+d/2,y:l+f+g,textAnchor:"middle",verticalAnchor:x};return $s($s({},k),r?{height:Math.max(r.y+r.height-(l+f),0),width:d}:{})}if(o==="left"){var O={x:a-S,y:l+f/2,textAnchor:M,verticalAnchor:"middle"};return $s($s({},O),r?{width:Math.max(O.x-r.x,0),height:f}:{})}if(o==="right"){var D={x:a+d+S,y:l+f/2,textAnchor:T,verticalAnchor:"middle"};return $s($s({},D),r?{width:Math.max(r.x+r.width-D.x,0),height:f}:{})}var B=r?{width:d,height:f}:{};return o==="insideLeft"?$s({x:a+S,y:l+f/2,textAnchor:T,verticalAnchor:"middle"},B):o==="insideRight"?$s({x:a+d-S,y:l+f/2,textAnchor:M,verticalAnchor:"middle"},B):o==="insideTop"?$s({x:a+d/2,y:l+g,textAnchor:"middle",verticalAnchor:x},B):o==="insideBottom"?$s({x:a+d/2,y:l+f-g,textAnchor:"middle",verticalAnchor:v},B):o==="insideTopLeft"?$s({x:a+S,y:l+g,textAnchor:T,verticalAnchor:x},B):o==="insideTopRight"?$s({x:a+d-S,y:l+g,textAnchor:M,verticalAnchor:x},B):o==="insideBottomLeft"?$s({x:a+S,y:l+f-g,textAnchor:T,verticalAnchor:v},B):o==="insideBottomRight"?$s({x:a+d-S,y:l+f-g,textAnchor:M,verticalAnchor:v},B):C1(o)&&(Cn(o.x)||Gv(o.x))&&(Cn(o.y)||Gv(o.y))?$s({x:a+kb(o.x,d),y:l+kb(o.y,f),textAnchor:"end",verticalAnchor:"end"},B):$s({x:a+d/2,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},B)},ort=function(e){return"cx"in e&&Cn(e.cx)};function dl(t){var e=t.offset,n=e===void 0?5:e,r=Xnt(t,Vnt),i=$s({offset:n},r),o=i.viewBox,s=i.position,a=i.value,l=i.children,d=i.content,f=i.className,p=f===void 0?"":f,g=i.textBreakAll;if(!o||ri(a)&&ri(l)&&!W.isValidElement(d)&&!qr(d))return null;if(W.isValidElement(d))return W.cloneElement(d,i);var v;if(qr(d)){if(v=W.createElement(d,i),W.isValidElement(v))return v}else v=ert(i);var x=ort(o),b=ni(i,!0);if(x&&(s==="insideStart"||s==="insideEnd"||s==="end"))return nrt(i,v,b);var S=x?rrt(i):irt(i);return Ze.createElement(yI,Z2({className:qt("recharts-label",p)},b,S,{breakAll:g}),v)}dl.displayName="Label";var Dle=function(e){var n=e.cx,r=e.cy,i=e.angle,o=e.startAngle,s=e.endAngle,a=e.r,l=e.radius,d=e.innerRadius,f=e.outerRadius,p=e.x,g=e.y,v=e.top,x=e.left,b=e.width,S=e.height,M=e.clockWise,T=e.labelViewBox;if(T)return T;if(Cn(b)&&Cn(S)){if(Cn(p)&&Cn(g))return{x:p,y:g,width:b,height:S};if(Cn(v)&&Cn(x))return{x:v,y:x,width:b,height:S}}return Cn(p)&&Cn(g)?{x:p,y:g,width:0,height:0}:Cn(n)&&Cn(r)?{cx:n,cy:r,startAngle:o||i||0,endAngle:s||i||0,innerRadius:d||0,outerRadius:f||l||a||0,clockWise:M}:e.viewBox?e.viewBox:{}},srt=function(e,n){return e?e===!0?Ze.createElement(dl,{key:"label-implicit",viewBox:n}):Ws(e)?Ze.createElement(dl,{key:"label-implicit",viewBox:n,value:e}):W.isValidElement(e)?e.type===dl?W.cloneElement(e,{key:"label-implicit",viewBox:n}):Ze.createElement(dl,{key:"label-implicit",content:e,viewBox:n}):qr(e)?Ze.createElement(dl,{key:"label-implicit",content:e,viewBox:n}):C1(e)?Ze.createElement(dl,Z2({viewBox:n},e,{key:"label-implicit"})):null:null},art=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,o=Dle(e),s=gd(i,dl).map(function(l,d){return W.cloneElement(l,{viewBox:n||o,key:"label-".concat(d)})});if(!r)return s;var a=srt(e.label,n||o);return[a].concat(Wnt(s))};dl.parseViewBox=Dle;dl.renderCallByParent=art;function lrt(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var crt=lrt;const urt=xi(crt);function J2(t){"@babel/helpers - typeof";return J2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J2(t)}var drt=["valueAccessor"],hrt=["data","dataKey","clockWise","id","textBreakAll"];function frt(t){return yrt(t)||grt(t)||mrt(t)||prt()}function prt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mrt(t,e){if(t){if(typeof t=="string")return EB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EB(t,e)}}function grt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yrt(t){if(Array.isArray(t))return EB(t)}function EB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function RI(){return RI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RI.apply(this,arguments)}function NY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NY(Object(n),!0).forEach(function(r){vrt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vrt(t,e,n){return e=_rt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _rt(t){var e=xrt(t,"string");return J2(e)=="symbol"?e:String(e)}function xrt(t,e){if(J2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(J2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FY(t,e){if(t==null)return{};var n=brt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function brt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var wrt=function(e){return Array.isArray(e.value)?urt(e.value):e.value};function oy(t){var e=t.valueAccessor,n=e===void 0?wrt:e,r=FY(t,drt),i=r.data,o=r.dataKey,s=r.clockWise,a=r.id,l=r.textBreakAll,d=FY(r,hrt);return!i||!i.length?null:Ze.createElement(ds,{className:"recharts-label-list"},i.map(function(f,p){var g=ri(o)?n(f,p):vu(f&&f.payload,o),v=ri(a)?{}:{id:"".concat(a,"-").concat(p)};return Ze.createElement(dl,RI({},ni(f,!0),d,v,{parentViewBox:f.parentViewBox,value:g,textBreakAll:l,viewBox:dl.parseViewBox(ri(s)?f:zY(zY({},f),{},{clockWise:s})),key:"label-".concat(p),index:p}))}))}oy.displayName="LabelList";function Srt(t,e){return t?t===!0?Ze.createElement(oy,{key:"labelList-implicit",data:e}):Ze.isValidElement(t)||qr(t)?Ze.createElement(oy,{key:"labelList-implicit",data:e,content:t}):C1(t)?Ze.createElement(oy,RI({data:e},t,{key:"labelList-implicit"})):null:null}function Mrt(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=gd(r,oy).map(function(s,a){return W.cloneElement(s,{data:e,key:"labelList-".concat(a)})});if(!n)return i;var o=Srt(t.label,e);return[o].concat(frt(i))}oy.renderCallByParent=Mrt;function Q2(t){"@babel/helpers - typeof";return Q2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q2(t)}function TB(){return TB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TB.apply(this,arguments)}function BY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $Y(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BY(Object(n),!0).forEach(function(r){Ert(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ert(t,e,n){return e=Trt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Trt(t){var e=Crt(t,"string");return Q2(e)=="symbol"?e:String(e)}function Crt(t,e){if(Q2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Q2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Art=function(e,n){var r=Sh(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},hC=function(e){var n=e.cx,r=e.cy,i=e.radius,o=e.angle,s=e.sign,a=e.isExternal,l=e.cornerRadius,d=e.cornerIsExternal,f=l*(a?1:-1)+i,p=Math.asin(l/f)/kI,g=d?o:o+s*p,v=Da(n,r,f,g),x=Da(n,r,i,g),b=d?o-s*p:o,S=Da(n,r,f*Math.cos(p*kI),b);return{center:v,circleTangency:x,lineTangency:S,theta:p}},Nle=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,s=e.startAngle,a=e.endAngle,l=Art(s,a),d=s+l,f=Da(n,r,o,s),p=Da(n,r,o,d),g="M ".concat(f.x,",").concat(f.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>d),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(i>0){var v=Da(n,r,i,s),x=Da(n,r,i,d);g+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=d),`,
            `).concat(v.x,",").concat(v.y," Z")}else g+="L ".concat(n,",").concat(r," Z");return g},Prt=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,s=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,d=e.startAngle,f=e.endAngle,p=Sh(f-d),g=hC({cx:n,cy:r,radius:o,angle:d,sign:p,cornerRadius:s,cornerIsExternal:l}),v=g.circleTangency,x=g.lineTangency,b=g.theta,S=hC({cx:n,cy:r,radius:o,angle:f,sign:-p,cornerRadius:s,cornerIsExternal:l}),M=S.circleTangency,T=S.lineTangency,C=S.theta,k=l?Math.abs(d-f):Math.abs(d-f)-b-C;if(k<0)return a?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):Nle({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:d,endAngle:f});var O="M ".concat(x.x,",").concat(x.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(k>180),",").concat(+(p<0),",").concat(M.x,",").concat(M.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(T.x,",").concat(T.y,`
  `);if(i>0){var D=hC({cx:n,cy:r,radius:i,angle:d,sign:p,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),B=D.circleTangency,U=D.lineTangency,J=D.theta,V=hC({cx:n,cy:r,radius:i,angle:f,sign:-p,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),X=V.circleTangency,oe=V.lineTangency,pe=V.theta,re=l?Math.abs(d-f):Math.abs(d-f)-J-pe;if(re<0&&s===0)return"".concat(O,"L").concat(n,",").concat(r,"Z");O+="L".concat(oe.x,",").concat(oe.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(X.x,",").concat(X.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(re>180),",").concat(+(p>0),",").concat(B.x,",").concat(B.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(U.x,",").concat(U.y,"Z")}else O+="L".concat(n,",").concat(r,"Z");return O},Irt={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},zle=function(e){var n=$Y($Y({},Irt),e),r=n.cx,i=n.cy,o=n.innerRadius,s=n.outerRadius,a=n.cornerRadius,l=n.forceCornerRadius,d=n.cornerIsExternal,f=n.startAngle,p=n.endAngle,g=n.className;if(s<o||f===p)return null;var v=qt("recharts-sector",g),x=s-o,b=kb(a,x,0,!0),S;return b>0&&Math.abs(f-p)<360?S=Prt({cx:r,cy:i,innerRadius:o,outerRadius:s,cornerRadius:Math.min(b,x/2),forceCornerRadius:l,cornerIsExternal:d,startAngle:f,endAngle:p}):S=Nle({cx:r,cy:i,innerRadius:o,outerRadius:s,startAngle:f,endAngle:p}),Ze.createElement("path",TB({},ni(n,!0),{className:v,d:S,role:"img"}))};function eM(t){"@babel/helpers - typeof";return eM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eM(t)}function CB(){return CB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CB.apply(this,arguments)}function jY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UY(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jY(Object(n),!0).forEach(function(r){krt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jY(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function krt(t,e,n){return e=Rrt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rrt(t){var e=Ort(t,"string");return eM(e)=="symbol"?e:String(e)}function Ort(t,e){if(eM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(eM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VY={curveBasisClosed:LWe,curveBasisOpen:DWe,curveBasis:OWe,curveBumpX:_We,curveBumpY:xWe,curveLinearClosed:NWe,curveLinear:dO,curveMonotoneX:zWe,curveMonotoneY:FWe,curveNatural:BWe,curveStep:$We,curveStepAfter:UWe,curveStepBefore:jWe},fC=function(e){return e.x===+e.x&&e.y===+e.y},Vw=function(e){return e.x},Ww=function(e){return e.y},Lrt=function(e,n){if(qr(e))return e;var r="curve".concat(cO(e));return(r==="curveMonotone"||r==="curveBump")&&n?VY["".concat(r).concat(n==="vertical"?"Y":"X")]:VY[r]||dO},Drt=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,o=i===void 0?[]:i,s=e.baseLine,a=e.layout,l=e.connectNulls,d=l===void 0?!1:l,f=Lrt(r,a),p=d?o.filter(function(b){return fC(b)}):o,g;if(Array.isArray(s)){var v=d?s.filter(function(b){return fC(b)}):s,x=p.map(function(b,S){return UY(UY({},b),{},{base:v[S]})});return a==="vertical"?g=rC().y(Ww).x1(Vw).x0(function(b){return b.base.x}):g=rC().x(Vw).y1(Ww).y0(function(b){return b.base.y}),g.defined(fC).curve(f),g(x)}return a==="vertical"&&Cn(s)?g=rC().y(Ww).x1(Vw).x0(s):Cn(s)?g=rC().x(Vw).y1(Ww).y0(s):g=zse().x(Vw).y(Ww),g.defined(fC).curve(f),g(p)},AB=function(e){var n=e.className,r=e.points,i=e.path,o=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?Drt(e):i;return Ze.createElement("path",CB({},ni(e,!1),nI(e),{className:qt("recharts-curve",n),d:s,ref:o}))},Nrt=Object.getOwnPropertyNames,zrt=Object.getOwnPropertySymbols,Frt=Object.prototype.hasOwnProperty;function WY(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function pC(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var o=i.cache,s=o.get(n),a=o.get(r);if(s&&a)return s===r&&a===n;o.set(n,r),o.set(r,n);var l=t(n,r,i);return o.delete(n),o.delete(r),l}}function HY(t){return Nrt(t).concat(zrt(t))}var Fle=Object.hasOwn||function(t,e){return Frt.call(t,e)};function z1(t,e){return t||e?t===e:t===e||t!==t&&e!==e}var Ble="_owner",GY=Object.getOwnPropertyDescriptor,qY=Object.keys;function Brt(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function $rt(t,e){return z1(t.getTime(),e.getTime())}function YY(t,e,n){if(t.size!==e.size)return!1;for(var r={},i=t.entries(),o=0,s,a;(s=i.next())&&!s.done;){for(var l=e.entries(),d=!1,f=0;(a=l.next())&&!a.done;){var p=s.value,g=p[0],v=p[1],x=a.value,b=x[0],S=x[1];!d&&!r[f]&&(d=n.equals(g,b,o,f,t,e,n)&&n.equals(v,S,g,b,t,e,n))&&(r[f]=!0),f++}if(!d)return!1;o++}return!0}function jrt(t,e,n){var r=qY(t),i=r.length;if(qY(e).length!==i)return!1;for(var o;i-- >0;)if(o=r[i],o===Ble&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!Fle(e,o)||!n.equals(t[o],e[o],o,o,t,e,n))return!1;return!0}function Hw(t,e,n){var r=HY(t),i=r.length;if(HY(e).length!==i)return!1;for(var o,s,a;i-- >0;)if(o=r[i],o===Ble&&(t.$$typeof||e.$$typeof)&&t.$$typeof!==e.$$typeof||!Fle(e,o)||!n.equals(t[o],e[o],o,o,t,e,n)||(s=GY(t,o),a=GY(e,o),(s||a)&&(!s||!a||s.configurable!==a.configurable||s.enumerable!==a.enumerable||s.writable!==a.writable)))return!1;return!0}function Urt(t,e){return z1(t.valueOf(),e.valueOf())}function Vrt(t,e){return t.source===e.source&&t.flags===e.flags}function XY(t,e,n){if(t.size!==e.size)return!1;for(var r={},i=t.values(),o,s;(o=i.next())&&!o.done;){for(var a=e.values(),l=!1,d=0;(s=a.next())&&!s.done;)!l&&!r[d]&&(l=n.equals(o.value,s.value,o.value,s.value,t,e,n))&&(r[d]=!0),d++;if(!l)return!1}return!0}function Wrt(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}var Hrt="[object Arguments]",Grt="[object Boolean]",qrt="[object Date]",Yrt="[object Map]",Xrt="[object Number]",Krt="[object Object]",Zrt="[object RegExp]",Jrt="[object Set]",Qrt="[object String]",eit=Array.isArray,KY=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,ZY=Object.assign,tit=Object.prototype.toString.call.bind(Object.prototype.toString);function nit(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areMapsEqual,i=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,s=t.areRegExpsEqual,a=t.areSetsEqual,l=t.areTypedArraysEqual;return function(f,p,g){if(f===p)return!0;if(f==null||p==null||typeof f!="object"||typeof p!="object")return f!==f&&p!==p;var v=f.constructor;if(v!==p.constructor)return!1;if(v===Object)return i(f,p,g);if(eit(f))return e(f,p,g);if(KY!=null&&KY(f))return l(f,p,g);if(v===Date)return n(f,p,g);if(v===RegExp)return s(f,p,g);if(v===Map)return r(f,p,g);if(v===Set)return a(f,p,g);var x=tit(f);return x===qrt?n(f,p,g):x===Zrt?s(f,p,g):x===Yrt?r(f,p,g):x===Jrt?a(f,p,g):x===Krt?typeof f.then!="function"&&typeof p.then!="function"&&i(f,p,g):x===Hrt?i(f,p,g):x===Grt||x===Xrt||x===Qrt?o(f,p,g):!1}}function rit(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Hw:Brt,areDatesEqual:$rt,areMapsEqual:r?WY(YY,Hw):YY,areObjectsEqual:r?Hw:jrt,arePrimitiveWrappersEqual:Urt,areRegExpsEqual:Vrt,areSetsEqual:r?WY(XY,Hw):XY,areTypedArraysEqual:r?Hw:Wrt};if(n&&(i=ZY({},i,n(i))),e){var o=pC(i.areArraysEqual),s=pC(i.areMapsEqual),a=pC(i.areObjectsEqual),l=pC(i.areSetsEqual);i=ZY({},i,{areArraysEqual:o,areMapsEqual:s,areObjectsEqual:a,areSetsEqual:l})}return i}function iit(t){return function(e,n,r,i,o,s,a){return t(e,n,a)}}function oit(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,o=t.strict;if(r)return function(l,d){var f=r(),p=f.cache,g=p===void 0?e?new WeakMap:void 0:p,v=f.meta;return n(l,d,{cache:g,equals:i,meta:v,strict:o})};if(e)return function(l,d){return n(l,d,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var s={cache:void 0,equals:i,meta:void 0,strict:o};return function(l,d){return n(l,d,s)}}var sit=Iy();Iy({strict:!0});Iy({circular:!0});Iy({circular:!0,strict:!0});Iy({createInternalComparator:function(){return z1}});Iy({strict:!0,createInternalComparator:function(){return z1}});Iy({circular:!0,createInternalComparator:function(){return z1}});Iy({circular:!0,createInternalComparator:function(){return z1},strict:!0});function Iy(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,o=t.strict,s=o===void 0?!1:o,a=rit(t),l=nit(a),d=r?r(l):iit(l);return oit({circular:n,comparator:l,createState:i,equals:d,strict:s})}function ait(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function JY(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(o){n<0&&(n=o),o-n>e?(t(o),n=-1):ait(i)};requestAnimationFrame(r)}function PB(t){"@babel/helpers - typeof";return PB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PB(t)}function lit(t){return hit(t)||dit(t)||uit(t)||cit()}function cit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uit(t,e){if(t){if(typeof t=="string")return QY(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QY(t,e)}}function QY(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dit(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hit(t){if(Array.isArray(t))return t}function fit(){var t={},e=function(){return null},n=!1,r=function i(o){if(!n){if(Array.isArray(o)){if(!o.length)return;var s=o,a=lit(s),l=a[0],d=a.slice(1);if(typeof l=="number"){JY(i.bind(null,d),l);return}i(l),JY(i.bind(null,d));return}PB(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function tM(t){"@babel/helpers - typeof";return tM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tM(t)}function eX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eX(Object(n),!0).forEach(function(r){$le(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $le(t,e,n){return e=pit(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pit(t){var e=mit(t,"string");return tM(e)==="symbol"?e:String(e)}function mit(t,e){if(tM(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(tM(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var git=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(o){return i.includes(o)})})},yit=function(e){return e},vit=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},jS=function(e,n){return Object.keys(n).reduce(function(r,i){return tX(tX({},r),{},$le({},i,e(i,n[i])))},{})},nX=function(e,n,r){return e.map(function(i){return"".concat(vit(i)," ").concat(n,"ms ").concat(r)}).join(",")};function _it(t,e){return wit(t)||bit(t,e)||jle(t,e)||xit()}function xit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bit(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){d=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function wit(t){if(Array.isArray(t))return t}function Sit(t){return Tit(t)||Eit(t)||jle(t)||Mit()}function Mit(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jle(t,e){if(t){if(typeof t=="string")return IB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IB(t,e)}}function Eit(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Tit(t){if(Array.isArray(t))return IB(t)}function IB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var OI=1e-4,Ule=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},Vle=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},rX=function(e,n){return function(r){var i=Ule(e,n);return Vle(i,r)}},Cit=function(e,n){return function(r){var i=Ule(e,n),o=[].concat(Sit(i.map(function(s,a){return s*a}).slice(1)),[0]);return Vle(o,r)}},iX=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n[1],s=n[2],a=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,o=0,s=1,a=1;break;case"ease":i=.25,o=.1,s=.25,a=1;break;case"ease-in":i=.42,o=0,s=1,a=1;break;case"ease-out":i=.42,o=0,s=.58,a=1;break;case"ease-in-out":i=0,o=0,s=.58,a=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var d=l[1].split(")")[0].split(",").map(function(S){return parseFloat(S)}),f=_it(d,4);i=f[0],o=f[1],s=f[2],a=f[3]}}}var p=rX(i,s),g=rX(o,a),v=Cit(i,s),x=function(M){return M>1?1:M<0?0:M},b=function(M){for(var T=M>1?1:M,C=T,k=0;k<8;++k){var O=p(C)-T,D=v(C);if(Math.abs(O-T)<OI||D<OI)return g(C);C=x(C-O/D)}return g(C)};return b.isStepper=!1,b},Ait=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,o=i===void 0?8:i,s=e.dt,a=s===void 0?17:s,l=function(f,p,g){var v=-(f-p)*r,x=g*o,b=g+(v-x)*a/1e3,S=g*a/1e3+f;return Math.abs(S-p)<OI&&Math.abs(b)<OI?[p,0]:[S,b]};return l.isStepper=!0,l.dt=a,l},Pit=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return iX(i);case"spring":return Ait();default:if(i.split("(")[0]==="cubic-bezier")return iX(i)}return typeof i=="function"?i:null};function nM(t){"@babel/helpers - typeof";return nM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nM(t)}function oX(t){return Rit(t)||kit(t)||Wle(t)||Iit()}function Iit(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kit(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Rit(t){if(Array.isArray(t))return RB(t)}function sX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ia(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sX(Object(n),!0).forEach(function(r){kB(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kB(t,e,n){return e=Oit(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oit(t){var e=Lit(t,"string");return nM(e)==="symbol"?e:String(e)}function Lit(t,e){if(nM(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(nM(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dit(t,e){return Fit(t)||zit(t,e)||Wle(t,e)||Nit()}function Nit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wle(t,e){if(t){if(typeof t=="string")return RB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RB(t,e)}}function RB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zit(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){d=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function Fit(t){if(Array.isArray(t))return t}var LI=function(e,n,r){return e+(n-e)*r},OB=function(e){var n=e.from,r=e.to;return n!==r},Bit=function t(e,n,r){var i=jS(function(o,s){if(OB(s)){var a=e(s.from,s.to,s.velocity),l=Dit(a,2),d=l[0],f=l[1];return Ia(Ia({},s),{},{from:d,velocity:f})}return s},n);return r<1?jS(function(o,s){return OB(s)?Ia(Ia({},s),{},{velocity:LI(s.velocity,i[o].velocity,r),from:LI(s.from,i[o].from,r)}):s},n):t(e,i,r-1)};const $it=function(t,e,n,r,i){var o=git(t,e),s=o.reduce(function(S,M){return Ia(Ia({},S),{},kB({},M,[t[M],e[M]]))},{}),a=o.reduce(function(S,M){return Ia(Ia({},S),{},kB({},M,{from:t[M],velocity:0,to:e[M]}))},{}),l=-1,d,f,p=function(){return null},g=function(){return jS(function(M,T){return T.from},a)},v=function(){return!Object.values(a).filter(OB).length},x=function(M){d||(d=M);var T=M-d,C=T/n.dt;a=Bit(n,a,C),i(Ia(Ia(Ia({},t),e),g())),d=M,v()||(l=requestAnimationFrame(p))},b=function(M){f||(f=M);var T=(M-f)/r,C=jS(function(O,D){return LI.apply(void 0,oX(D).concat([n(T)]))},s);if(i(Ia(Ia(Ia({},t),e),C)),T<1)l=requestAnimationFrame(p);else{var k=jS(function(O,D){return LI.apply(void 0,oX(D).concat([n(1)]))},s);i(Ia(Ia(Ia({},t),e),k))}};return p=n.isStepper?x:b,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(l)}}};function jb(t){"@babel/helpers - typeof";return jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jb(t)}var jit=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Uit(t,e){if(t==null)return{};var n=Vit(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Vit(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function W3(t){return qit(t)||Git(t)||Hit(t)||Wit()}function Wit(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hit(t,e){if(t){if(typeof t=="string")return LB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LB(t,e)}}function Git(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qit(t){if(Array.isArray(t))return LB(t)}function LB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aX(Object(n),!0).forEach(function(r){gS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gS(t,e,n){return e=Hle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yit(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hle(r.key),r)}}function Xit(t,e,n){return e&&lX(t.prototype,e),n&&lX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hle(t){var e=Kit(t,"string");return jb(e)==="symbol"?e:String(e)}function Kit(t,e){if(jb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(jb(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zit(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DB(t,e)}function DB(t,e){return DB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},DB(t,e)}function Jit(t){var e=Qit();return function(){var r=DI(t),i;if(e){var o=DI(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return NB(this,i)}}function NB(t,e){if(e&&(jb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zB(t)}function zB(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qit(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function DI(t){return DI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},DI(t)}var ym=function(t){Zit(n,t);var e=Jit(n);function n(r,i){var o;Yit(this,n),o=e.call(this,r,i);var s=o.props,a=s.isActive,l=s.attributeName,d=s.from,f=s.to,p=s.steps,g=s.children,v=s.duration;if(o.handleStyleChange=o.handleStyleChange.bind(zB(o)),o.changeStyle=o.changeStyle.bind(zB(o)),!a||v<=0)return o.state={style:{}},typeof g=="function"&&(o.state={style:f}),NB(o);if(p&&p.length)o.state={style:p[0].style};else if(d){if(typeof g=="function")return o.state={style:d},NB(o);o.state={style:l?gS({},l,d):d}}else o.state={style:{}};return o}return Xit(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,s=i.canBegin;this.mounted=!0,!(!o||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,s=o.isActive,a=o.canBegin,l=o.attributeName,d=o.shouldReAnimate,f=o.to,p=o.from,g=this.state.style;if(a){if(!s){var v={style:l?gS({},l,f):f};this.state&&g&&(l&&g[l]!==f||!l&&g!==f)&&this.setState(v);return}if(!(sit(i.to,f)&&i.canBegin&&i.isActive)){var x=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var b=x||d?p:i.to;if(this.state&&g){var S={style:l?gS({},l,b):b};(l&&g[l]!==b||!l&&g!==b)&&this.setState(S)}this.runAnimation(rh(rh({},this.props),{},{from:b,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,s=i.from,a=i.to,l=i.duration,d=i.easing,f=i.begin,p=i.onAnimationEnd,g=i.onAnimationStart,v=$it(s,a,Pit(d),l,this.changeStyle),x=function(){o.stopJSAnimation=v()};this.manager.start([g,f,x,l,p])}},{key:"runStepAnimation",value:function(i){var o=this,s=i.steps,a=i.begin,l=i.onAnimationStart,d=s[0],f=d.style,p=d.duration,g=p===void 0?0:p,v=function(b,S,M){if(M===0)return b;var T=S.duration,C=S.easing,k=C===void 0?"ease":C,O=S.style,D=S.properties,B=S.onAnimationEnd,U=M>0?s[M-1]:S,J=D||Object.keys(O);if(typeof k=="function"||k==="spring")return[].concat(W3(b),[o.runJSAnimation.bind(o,{from:U.style,to:O,duration:T,easing:k}),T]);var V=nX(J,T,k),X=rh(rh(rh({},U.style),O),{},{transition:V});return[].concat(W3(b),[X,T,B]).filter(yit)};return this.manager.start([l].concat(W3(s.reduce(v,[f,Math.max(g,a)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=fit());var o=i.begin,s=i.duration,a=i.attributeName,l=i.to,d=i.easing,f=i.onAnimationStart,p=i.onAnimationEnd,g=i.steps,v=i.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof d=="function"||typeof v=="function"||d==="spring"){this.runJSAnimation(i);return}if(g.length>1){this.runStepAnimation(i);return}var b=a?gS({},a,l):l,S=nX(Object.keys(b),s,d);x.start([f,o,rh(rh({},b),{},{transition:S}),s,p])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var a=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=Uit(i,jit),d=W.Children.count(o),f=this.state.style;if(typeof o=="function")return o(f);if(!a||d===0||s<=0)return o;var p=function(v){var x=v.props,b=x.style,S=b===void 0?{}:b,M=x.className,T=W.cloneElement(v,rh(rh({},l),{},{style:rh(rh({},S),f),className:M}));return T};return d===1?p(W.Children.only(o)):Ze.createElement("div",null,W.Children.map(o,function(g){return p(g)}))}}]),n}(W.PureComponent);ym.displayName="Animate";ym.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ym.propTypes={from:zr.oneOfType([zr.object,zr.string]),to:zr.oneOfType([zr.object,zr.string]),attributeName:zr.string,duration:zr.number,begin:zr.number,easing:zr.oneOfType([zr.string,zr.func]),steps:zr.arrayOf(zr.shape({duration:zr.number.isRequired,style:zr.object.isRequired,easing:zr.oneOfType([zr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),zr.func]),properties:zr.arrayOf("string"),onAnimationEnd:zr.func})),children:zr.oneOfType([zr.node,zr.func]),isActive:zr.bool,canBegin:zr.bool,onAnimationEnd:zr.func,shouldReAnimate:zr.bool,onAnimationStart:zr.func,onAnimationReStart:zr.func};zr.object,zr.object,zr.object,zr.element;zr.object,zr.object,zr.object,zr.oneOfType([zr.array,zr.element]),zr.any;function rM(t){"@babel/helpers - typeof";return rM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rM(t)}function NI(){return NI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NI.apply(this,arguments)}function eot(t,e){return iot(t)||rot(t,e)||not(t,e)||tot()}function tot(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function not(t,e){if(t){if(typeof t=="string")return cX(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cX(t,e)}}function cX(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rot(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){d=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function iot(t){if(Array.isArray(t))return t}function uX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uX(Object(n),!0).forEach(function(r){oot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oot(t,e,n){return e=sot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sot(t){var e=aot(t,"string");return rM(e)=="symbol"?e:String(e)}function aot(t,e){if(rM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hX=function(e,n,r,i,o){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),a=i>=0?1:-1,l=r>=0?1:-1,d=i>=0&&r>=0||i<0&&r<0?1:0,f;if(s>0&&o instanceof Array){for(var p=[0,0,0,0],g=0,v=4;g<v;g++)p[g]=o[g]>s?s:o[g];f="M".concat(e,",").concat(n+a*p[0]),p[0]>0&&(f+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(d,",").concat(e+l*p[0],",").concat(n)),f+="L ".concat(e+r-l*p[1],",").concat(n),p[1]>0&&(f+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(n+a*p[1])),f+="L ".concat(e+r,",").concat(n+i-a*p[2]),p[2]>0&&(f+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(d,`,
        `).concat(e+r-l*p[2],",").concat(n+i)),f+="L ".concat(e+l*p[3],",").concat(n+i),p[3]>0&&(f+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(n+i-a*p[3])),f+="Z"}else if(s>0&&o===+o&&o>0){var x=Math.min(s,o);f="M ".concat(e,",").concat(n+a*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+l*x,",").concat(n,`
            L `).concat(e+r-l*x,",").concat(n,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r,",").concat(n+a*x,`
            L `).concat(e+r,",").concat(n+i-a*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r-l*x,",").concat(n+i,`
            L `).concat(e+l*x,",").concat(n+i,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(n+i-a*x," Z")}else f="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return f},lot=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,o=n.x,s=n.y,a=n.width,l=n.height;if(Math.abs(a)>0&&Math.abs(l)>0){var d=Math.min(o,o+a),f=Math.max(o,o+a),p=Math.min(s,s+l),g=Math.max(s,s+l);return r>=d&&r<=f&&i>=p&&i<=g}return!1},cot={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},M6=function(e){var n=dX(dX({},cot),e),r=W.useRef(),i=W.useState(-1),o=eot(i,2),s=o[0],a=o[1];W.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var k=r.current.getTotalLength();k&&a(k)}catch{}},[]);var l=n.x,d=n.y,f=n.width,p=n.height,g=n.radius,v=n.className,x=n.animationEasing,b=n.animationDuration,S=n.animationBegin,M=n.isAnimationActive,T=n.isUpdateAnimationActive;if(l!==+l||d!==+d||f!==+f||p!==+p||f===0||p===0)return null;var C=qt("recharts-rectangle",v);return T?Ze.createElement(ym,{canBegin:s>0,from:{width:f,height:p,x:l,y:d},to:{width:f,height:p,x:l,y:d},duration:b,animationEasing:x,isActive:T},function(k){var O=k.width,D=k.height,B=k.x,U=k.y;return Ze.createElement(ym,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:S,duration:b,isActive:M,easing:x},Ze.createElement("path",NI({},ni(n,!0),{className:C,d:hX(B,U,O,D,g),ref:r})))}):Ze.createElement("path",NI({},ni(n,!0),{className:C,d:hX(l,d,f,p,g)}))};function FB(){return FB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FB.apply(this,arguments)}var E6=function(e){var n=e.cx,r=e.cy,i=e.r,o=e.className,s=qt("recharts-dot",o);return n===+n&&r===+r&&i===+i?Ze.createElement("circle",FB({},ni(e,!1),nI(e),{className:s,cx:n,cy:r,r:i})):null};function iM(t){"@babel/helpers - typeof";return iM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iM(t)}var uot=["x","y","top","left","width","height","className"];function BB(){return BB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BB.apply(this,arguments)}function fX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dot(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fX(Object(n),!0).forEach(function(r){hot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hot(t,e,n){return e=fot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fot(t){var e=pot(t,"string");return iM(e)=="symbol"?e:String(e)}function pot(t,e){if(iM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(iM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mot(t,e){if(t==null)return{};var n=got(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function got(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var yot=function(e,n,r,i,o,s){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},vot=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,s=e.top,a=s===void 0?0:s,l=e.left,d=l===void 0?0:l,f=e.width,p=f===void 0?0:f,g=e.height,v=g===void 0?0:g,x=e.className,b=mot(e,uot),S=dot({x:r,y:o,top:a,left:d,width:p,height:v},b);return!Cn(r)||!Cn(o)||!Cn(p)||!Cn(v)||!Cn(a)||!Cn(d)?null:Ze.createElement("path",BB({},ni(S,!0),{className:qt("recharts-cross",x),d:yot(r,o,p,v,a,d)}))},_ot=aae,xot=_ot(Object.getPrototypeOf,Object),bot=xot,wot=Cm,Sot=bot,Mot=Am,Eot="[object Object]",Tot=Function.prototype,Cot=Object.prototype,Gle=Tot.toString,Aot=Cot.hasOwnProperty,Pot=Gle.call(Object);function Iot(t){if(!Mot(t)||wot(t)!=Eot)return!1;var e=Sot(t);if(e===null)return!0;var n=Aot.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Gle.call(n)==Pot}var kot=Iot;const Rot=xi(kot);var Oot=Cm,Lot=Am,Dot="[object Boolean]";function Not(t){return t===!0||t===!1||Lot(t)&&Oot(t)==Dot}var zot=Not;const Fot=xi(zot);function oM(t){"@babel/helpers - typeof";return oM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oM(t)}function zI(){return zI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zI.apply(this,arguments)}function Bot(t,e){return Vot(t)||Uot(t,e)||jot(t,e)||$ot()}function $ot(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jot(t,e){if(t){if(typeof t=="string")return pX(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pX(t,e)}}function pX(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Uot(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){d=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function Vot(t){if(Array.isArray(t))return t}function mX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mX(Object(n),!0).forEach(function(r){Wot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wot(t,e,n){return e=Hot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hot(t){var e=Got(t,"string");return oM(e)=="symbol"?e:String(e)}function Got(t,e){if(oM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(oM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yX=function(e,n,r,i,o){var s=r-i,a;return a="M ".concat(e,",").concat(n),a+="L ".concat(e+r,",").concat(n),a+="L ".concat(e+r-s/2,",").concat(n+o),a+="L ".concat(e+r-s/2-i,",").concat(n+o),a+="L ".concat(e,",").concat(n," Z"),a},qot={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Yot=function(e){var n=gX(gX({},qot),e),r=W.useRef(),i=W.useState(-1),o=Bot(i,2),s=o[0],a=o[1];W.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var C=r.current.getTotalLength();C&&a(C)}catch{}},[]);var l=n.x,d=n.y,f=n.upperWidth,p=n.lowerWidth,g=n.height,v=n.className,x=n.animationEasing,b=n.animationDuration,S=n.animationBegin,M=n.isUpdateAnimationActive;if(l!==+l||d!==+d||f!==+f||p!==+p||g!==+g||f===0&&p===0||g===0)return null;var T=qt("recharts-trapezoid",v);return M?Ze.createElement(ym,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:g,x:l,y:d},to:{upperWidth:f,lowerWidth:p,height:g,x:l,y:d},duration:b,animationEasing:x,isActive:M},function(C){var k=C.upperWidth,O=C.lowerWidth,D=C.height,B=C.x,U=C.y;return Ze.createElement(ym,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:S,duration:b,easing:x},Ze.createElement("path",zI({},ni(n,!0),{className:T,d:yX(B,U,k,O,D),ref:r})))}):Ze.createElement("g",null,Ze.createElement("path",zI({},ni(n,!0),{className:T,d:yX(l,d,f,p,g)})))},Xot=["option","shapeType","propTransformer","activeClassName","isActive"];function sM(t){"@babel/helpers - typeof";return sM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sM(t)}function Kot(t,e){if(t==null)return{};var n=Zot(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Zot(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function vX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vX(Object(n),!0).forEach(function(r){Jot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jot(t,e,n){return e=Qot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qot(t){var e=est(t,"string");return sM(e)=="symbol"?e:String(e)}function est(t,e){if(sM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(sM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tst(t,e){return FI(FI({},e),t)}function nst(t,e){return t==="symbols"}function _X(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return Ze.createElement(M6,n);case"trapezoid":return Ze.createElement(Yot,n);case"sector":return Ze.createElement(zle,n);case"symbols":if(nst(e))return Ze.createElement(WU,n);break;default:return null}}function rst(t){return W.isValidElement(t)?t.props:t}function ist(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?tst:r,o=t.activeClassName,s=o===void 0?"recharts-active-shape":o,a=t.isActive,l=Kot(t,Xot),d;if(W.isValidElement(e))d=W.cloneElement(e,FI(FI({},l),rst(e)));else if(qr(e))d=e(l);else if(Rot(e)&&!Fot(e)){var f=i(e,l);d=Ze.createElement(_X,{shapeType:n,elementProps:f})}else{var p=l;d=Ze.createElement(_X,{shapeType:n,elementProps:p})}return a?Ze.createElement(ds,{className:s},d):d}function CO(t,e){return e!=null&&"trapezoids"in t.props}function AO(t,e){return e!=null&&"sectors"in t.props}function aM(t,e){return e!=null&&"points"in t.props}function ost(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,o=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&o}function sst(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function ast(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function lst(t,e){var n;return CO(t,e)?n=ost:AO(t,e)?n=sst:aM(t,e)&&(n=ast),n}function cst(t,e){var n;return CO(t,e)?n="trapezoids":AO(t,e)?n="sectors":aM(t,e)&&(n="points"),n}function ust(t,e){if(CO(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(AO(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return aM(t,e)?e.payload:{}}function dst(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=cst(n,e),o=ust(n,e),s=r.filter(function(l,d){var f=MO(o,l),p=n.props[i].filter(function(x){var b=lst(n,e);return b(x,e)}),g=n.props[i].indexOf(p[p.length-1]),v=d===g;return f&&v}),a=r.indexOf(s[s.length-1]);return a}var hst=Math.ceil,fst=Math.max;function pst(t,e,n,r){for(var i=-1,o=fst(hst((e-t)/(n||1)),0),s=Array(o);o--;)s[r?o:++i]=t,t+=n;return s}var mst=pst,gst=Cae,xX=1/0,yst=17976931348623157e292;function vst(t){if(!t)return t===0?t:0;if(t=gst(t),t===xX||t===-xX){var e=t<0?-1:1;return e*yst}return t===t?t:0}var qle=vst,_st=mst,xst=mO,H3=qle;function bst(t){return function(e,n,r){return r&&typeof r!="number"&&xst(e,n,r)&&(n=r=void 0),e=H3(e),n===void 0?(n=e,e=0):n=H3(n),r=r===void 0?e<n?1:-1:H3(r),_st(e,n,r,t)}}var wst=bst,Sst=wst,Mst=Sst(),Est=Mst;const BI=xi(Est);function lM(t){"@babel/helpers - typeof";return lM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lM(t)}function bX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bX(Object(n),!0).forEach(function(r){Yle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yle(t,e,n){return e=Tst(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tst(t){var e=Cst(t,"string");return lM(e)=="symbol"?e:String(e)}function Cst(t,e){if(lM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ast=["Webkit","Moz","O","ms"],Pst=function(e,n){if(!e)return null;var r=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=Ast.reduce(function(o,s){return wX(wX({},o),{},Yle({},s+r,n))},{});return i[e]=n,i};function Ub(t){"@babel/helpers - typeof";return Ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ub(t)}function $I(){return $I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$I.apply(this,arguments)}function SX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function G3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SX(Object(n),!0).forEach(function(r){Xc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ist(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kle(r.key),r)}}function kst(t,e,n){return e&&MX(t.prototype,e),n&&MX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rst(t,e,n){return e=jI(e),Ost(t,Xle()?Reflect.construct(e,n||[],jI(t).constructor):e.apply(t,n))}function Ost(t,e){if(e&&(Ub(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return df(t)}function Xle(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xle=function(){return!!t})()}function jI(t){return jI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jI(t)}function df(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lst(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$B(t,e)}function $B(t,e){return $B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$B(t,e)}function Xc(t,e,n){return e=Kle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kle(t){var e=Dst(t,"string");return Ub(e)=="symbol"?e:String(e)}function Dst(t,e){if(Ub(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ub(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Nst=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,o=e.x,s=e.width,a=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,d=BS().domain(BI(0,l)).range([o,o+s-a]),f=d.domain().map(function(p){return d(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(r),endX:d(i),scale:d,scaleValues:f}},EX=function(e){return e.changedTouches&&!!e.changedTouches.length},Vb=function(t){Lst(e,t);function e(n){var r;return Ist(this,e),r=Rst(this,e,[n]),Xc(df(r),"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Xc(df(r),"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Xc(df(r),"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,o=i.endIndex,s=i.onDragEnd,a=i.startIndex;s==null||s({endIndex:o,startIndex:a})}),r.detachDragEndListener()}),Xc(df(r),"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Xc(df(r),"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Xc(df(r),"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Xc(df(r),"handleSlideDragStart",function(i){var o=EX(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(df(r),"startX"),endX:r.handleTravellerDragStart.bind(df(r),"endX")},r.state={},r}return kst(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,o=r.endX,s=this.state.scaleValues,a=this.props,l=a.gap,d=a.data,f=d.length-1,p=Math.min(i,o),g=Math.max(i,o),v=e.getIndexInRange(s,p),x=e.getIndexInRange(s,g);return{startIndex:v-v%l,endIndex:x===f?f:x-x%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,o=i.data,s=i.tickFormatter,a=i.dataKey,l=vu(o[r],a,r);return qr(s)?s(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,o=i.slideMoveStartX,s=i.startX,a=i.endX,l=this.props,d=l.x,f=l.width,p=l.travellerWidth,g=l.startIndex,v=l.endIndex,x=l.onChange,b=r.pageX-o;b>0?b=Math.min(b,d+f-p-a,d+f-p-s):b<0&&(b=Math.max(b,d-s,d-a));var S=this.getIndex({startX:s+b,endX:a+b});(S.startIndex!==g||S.endIndex!==v)&&x&&x(S),this.setState({startX:s+b,endX:a+b,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var o=EX(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,o=i.brushMoveStartX,s=i.movingTravellerId,a=i.endX,l=i.startX,d=this.state[s],f=this.props,p=f.x,g=f.width,v=f.travellerWidth,x=f.onChange,b=f.gap,S=f.data,M={startX:this.state.startX,endX:this.state.endX},T=r.pageX-o;T>0?T=Math.min(T,p+g-v-d):T<0&&(T=Math.max(T,p-d)),M[s]=d+T;var C=this.getIndex(M),k=C.startIndex,O=C.endIndex,D=function(){var U=S.length-1;return s==="startX"&&(a>l?k%b===0:O%b===0)||a<l&&O===U||s==="endX"&&(a>l?O%b===0:k%b===0)||a>l&&O===U};this.setState(Xc(Xc({},s,d+T),"brushMoveStartX",r.pageX),function(){x&&D()&&x(C)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var o=this,s=this.state,a=s.scaleValues,l=s.startX,d=s.endX,f=this.state[i],p=a.indexOf(f);if(p!==-1){var g=p+r;if(!(g===-1||g>=a.length)){var v=a[g];i==="startX"&&v>=d||i==="endX"&&v<=l||this.setState(Xc({},i,v),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,a=r.height,l=r.fill,d=r.stroke;return Ze.createElement("rect",{stroke:d,fill:l,x:i,y:o,width:s,height:a})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,a=r.height,l=r.data,d=r.children,f=r.padding,p=W.Children.only(d);return p?Ze.cloneElement(p,{x:i,y:o,width:s,height:a,margin:f,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var o=this,s=this.props,a=s.y,l=s.travellerWidth,d=s.height,f=s.traveller,p=s.ariaLabel,g=s.data,v=s.startIndex,x=s.endIndex,b=Math.max(r,this.props.x),S=G3(G3({},ni(this.props,!1)),{},{x:b,y:a,width:l,height:d}),M=p||"Min value: ".concat(g[v].name,", Max value: ").concat(g[x].name);return Ze.createElement(ds,{tabIndex:0,role:"slider","aria-label":M,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(C){["ArrowLeft","ArrowRight"].includes(C.key)&&(C.preventDefault(),C.stopPropagation(),o.handleTravellerMoveKeyboard(C.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,S))}},{key:"renderSlide",value:function(r,i){var o=this.props,s=o.y,a=o.height,l=o.stroke,d=o.travellerWidth,f=Math.min(r,i)+d,p=Math.max(Math.abs(i-r)-d,0);return Ze.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:f,y:s,width:p,height:a})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,o=r.endIndex,s=r.y,a=r.height,l=r.travellerWidth,d=r.stroke,f=this.state,p=f.startX,g=f.endX,v=5,x={pointerEvents:"none",fill:d};return Ze.createElement(ds,{className:"recharts-brush-texts"},Ze.createElement(yI,$I({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,g)-v,y:s+a/2},x),this.getTextOfTick(i)),Ze.createElement(yI,$I({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,g)+l+v,y:s+a/2},x),this.getTextOfTick(o)))}},{key:"render",value:function(){var r=this.props,i=r.data,o=r.className,s=r.children,a=r.x,l=r.y,d=r.width,f=r.height,p=r.alwaysShowText,g=this.state,v=g.startX,x=g.endX,b=g.isTextActive,S=g.isSlideMoving,M=g.isTravellerMoving,T=g.isTravellerFocused;if(!i||!i.length||!Cn(a)||!Cn(l)||!Cn(d)||!Cn(f)||d<=0||f<=0)return null;var C=qt("recharts-brush",o),k=Ze.Children.count(s)===1,O=Pst("userSelect","none");return Ze.createElement(ds,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:O},this.renderBackground(),k&&this.renderPanorama(),this.renderSlide(v,x),this.renderTravellerLayer(v,"startX"),this.renderTravellerLayer(x,"endX"),(b||S||M||T||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,o=r.y,s=r.width,a=r.height,l=r.stroke,d=Math.floor(o+a/2)-1;return Ze.createElement(Ze.Fragment,null,Ze.createElement("rect",{x:i,y:o,width:s,height:a,fill:l,stroke:"none"}),Ze.createElement("line",{x1:i+1,y1:d,x2:i+s-1,y2:d,fill:"none",stroke:"#fff"}),Ze.createElement("line",{x1:i+1,y1:d+2,x2:i+s-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var o;return Ze.isValidElement(r)?o=Ze.cloneElement(r,i):qr(r)?o=r(i):o=e.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(r,i){var o=r.data,s=r.width,a=r.x,l=r.travellerWidth,d=r.updateId,f=r.startIndex,p=r.endIndex;if(o!==i.prevData||d!==i.prevUpdateId)return G3({prevData:o,prevTravellerWidth:l,prevUpdateId:d,prevX:a,prevWidth:s},o&&o.length?Nst({data:o,width:s,x:a,travellerWidth:l,startIndex:f,endIndex:p}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||a!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([a,a+s-l]);var g=i.scale.domain().map(function(v){return i.scale(v)});return{prevData:o,prevTravellerWidth:l,prevUpdateId:d,prevX:a,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:g}}return null}},{key:"getIndexInRange",value:function(r,i){for(var o=r.length,s=0,a=o-1;a-s>1;){var l=Math.floor((s+a)/2);r[l]>i?a=l:s=l}return i>=r[a]?a:s}}]),e}(W.PureComponent);Xc(Vb,"displayName","Brush");Xc(Vb,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var zst=ZU;function Fst(t,e){var n;return zst(t,function(r,i,o){return n=e(r,i,o),!n}),!!n}var Bst=Fst,$st=Qse,jst=Cy,Ust=Bst,Vst=Ac,Wst=mO;function Hst(t,e,n){var r=Vst(t)?$st:Ust;return n&&Wst(t,e,n)&&(e=void 0),r(t,jst(e))}var Gst=Hst;const qst=xi(Gst);var If=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},TX=wae;function Yst(t,e,n){e=="__proto__"&&TX?TX(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Xst=Yst,Kst=Xst,Zst=xae,Jst=Cy;function Qst(t,e){var n={};return e=Jst(e),Zst(t,function(r,i,o){Kst(n,i,e(r,i,o))}),n}var eat=Qst;const tat=xi(eat);function nat(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var rat=nat,iat=ZU;function oat(t,e){var n=!0;return iat(t,function(r,i,o){return n=!!e(r,i,o),n}),n}var sat=oat,aat=rat,lat=sat,cat=Cy,uat=Ac,dat=mO;function hat(t,e,n){var r=uat(t)?aat:lat;return n&&dat(t,e,n)&&(e=void 0),r(t,cat(e))}var fat=hat;const Zle=xi(fat);var pat=["x","y"];function cM(t){"@babel/helpers - typeof";return cM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cM(t)}function jB(){return jB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jB.apply(this,arguments)}function CX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CX(Object(n),!0).forEach(function(r){mat(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mat(t,e,n){return e=gat(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gat(t){var e=yat(t,"string");return cM(e)=="symbol"?e:String(e)}function yat(t,e){if(cM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vat(t,e){if(t==null)return{};var n=_at(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _at(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function xat(t,e){var n=t.x,r=t.y,i=vat(t,pat),o="".concat(n),s=parseInt(o,10),a="".concat(r),l=parseInt(a,10),d="".concat(e.height||i.height),f=parseInt(d,10),p="".concat(e.width||i.width),g=parseInt(p,10);return Gw(Gw(Gw(Gw(Gw({},e),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:f,width:g,name:e.name,radius:e.radius})}function AX(t){return Ze.createElement(ist,jB({shapeType:"rectangle",propTransformer:xat,activeClassName:"recharts-active-bar"},t))}var bat=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var o=typeof r=="number";return o?e(r,i):(o||A0(!1),n)}},wat=["value","background"],Jle;function Wb(t){"@babel/helpers - typeof";return Wb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wb(t)}function Sat(t,e){if(t==null)return{};var n=Mat(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Mat(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function UI(){return UI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UI.apply(this,arguments)}function PX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PX(Object(n),!0).forEach(function(r){Gg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eat(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ece(r.key),r)}}function Tat(t,e,n){return e&&IX(t.prototype,e),n&&IX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cat(t,e,n){return e=VI(e),Aat(t,Qle()?Reflect.construct(e,n||[],VI(t).constructor):e.apply(t,n))}function Aat(t,e){if(e&&(Wb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yS(t)}function Qle(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qle=function(){return!!t})()}function VI(t){return VI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},VI(t)}function yS(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pat(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UB(t,e)}function UB(t,e){return UB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},UB(t,e)}function Gg(t,e,n){return e=ece(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ece(t){var e=Iat(t,"string");return Wb(e)=="symbol"?e:String(e)}function Iat(t,e){if(Wb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RE=function(t){Pat(e,t);function e(){var n;Eat(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=Cat(this,e,[].concat(i)),Gg(yS(n),"state",{isAnimationFinished:!1}),Gg(yS(n),"id",EE("recharts-bar-")),Gg(yS(n),"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),Gg(yS(n),"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return Tat(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,o=this.props,s=o.shape,a=o.dataKey,l=o.activeIndex,d=o.activeBar,f=ni(this.props,!1);return r&&r.map(function(p,g){var v=g===l,x=v?d:s,b=sa(sa(sa({},f),p),{},{isActive:v,option:x,index:g,dataKey:a,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Ze.createElement(ds,UI({className:"recharts-bar-rectangle"},rI(i.props,p,g),{key:"rectangle-".concat(p==null?void 0:p.x,"-").concat(p==null?void 0:p.y,"-").concat(p==null?void 0:p.value)}),Ze.createElement(AX,b))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,o=i.data,s=i.layout,a=i.isAnimationActive,l=i.animationBegin,d=i.animationDuration,f=i.animationEasing,p=i.animationId,g=this.state.prevData;return Ze.createElement(ym,{begin:l,duration:d,isActive:a,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var x=v.t,b=o.map(function(S,M){var T=g&&g[M];if(T){var C=yh(T.x,S.x),k=yh(T.y,S.y),O=yh(T.width,S.width),D=yh(T.height,S.height);return sa(sa({},S),{},{x:C(x),y:k(x),width:O(x),height:D(x)})}if(s==="horizontal"){var B=yh(0,S.height),U=B(x);return sa(sa({},S),{},{y:S.y+S.height-U,height:U})}var J=yh(0,S.width),V=J(x);return sa(sa({},S),{},{width:V})});return Ze.createElement(ds,null,r.renderRectanglesStatically(b))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,o=r.isAnimationActive,s=this.state.prevData;return o&&i&&i.length&&(!s||!MO(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,o=i.data,s=i.dataKey,a=i.activeIndex,l=ni(this.props.background,!1);return o.map(function(d,f){d.value;var p=d.background,g=Sat(d,wat);if(!p)return null;var v=sa(sa(sa(sa(sa({},g),{},{fill:"#eee"},p),l),rI(r.props,d,f)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:f,key:"background-bar-".concat(f),className:"recharts-bar-background-rectangle"});return Ze.createElement(AX,UI({option:r.props.background,isActive:f===a},v))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.data,a=o.xAxis,l=o.yAxis,d=o.layout,f=o.children,p=gd(f,kE);if(!p)return null;var g=d==="vertical"?s[0].height/2:s[0].width/2,v=function(S,M){var T=Array.isArray(S.value)?S.value[1]:S.value;return{x:S.x,y:S.y,value:T,errorVal:vu(S,M)}},x={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Ze.createElement(ds,x,p.map(function(b){return Ze.cloneElement(b,{key:"error-bar-".concat(i,"-").concat(b.props.dataKey),data:s,xAxis:a,yAxis:l,layout:d,offset:g,dataPointFormatter:v})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,o=r.data,s=r.className,a=r.xAxis,l=r.yAxis,d=r.left,f=r.top,p=r.width,g=r.height,v=r.isAnimationActive,x=r.background,b=r.id;if(i||!o||!o.length)return null;var S=this.state.isAnimationFinished,M=qt("recharts-bar",s),T=a&&a.allowDataOverflow,C=l&&l.allowDataOverflow,k=T||C,O=ri(b)?this.id:b;return Ze.createElement(ds,{className:M},T||C?Ze.createElement("defs",null,Ze.createElement("clipPath",{id:"clipPath-".concat(O)},Ze.createElement("rect",{x:T?d:d-p/2,y:C?f:f-g/2,width:T?p:p*2,height:C?g:g*2}))):null,Ze.createElement(ds,{className:"recharts-bar-rectangles",clipPath:k?"url(#clipPath-".concat(O,")"):null},x?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(k,O),(!v||S)&&oy.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}]),e}(W.PureComponent);Jle=RE;Gg(RE,"displayName","Bar");Gg(RE,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!nm.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Gg(RE,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,o=t.xAxis,s=t.yAxis,a=t.xAxisTicks,l=t.yAxisTicks,d=t.stackedData,f=t.dataStartIndex,p=t.displayedData,g=t.offset,v=Mnt(r,n);if(!v)return null;var x=e.layout,b=n.props,S=b.dataKey,M=b.children,T=b.minPointSize,C=x==="horizontal"?s:o,k=d?C.scale.domain():null,O=Rnt({numericAxis:C}),D=gd(M,Pae),B=p.map(function(U,J){var V,X,oe,pe,re,he;d?V=Ent(d[f+J],k):(V=vu(U,S),Array.isArray(V)||(V=[O,V]));var ue=bat(T,Jle.defaultProps.minPointSize)(V[1],J);if(x==="horizontal"){var be,ie=[s.scale(V[0]),s.scale(V[1])],ve=ie[0],Ee=ie[1];X=AY({axis:o,ticks:a,bandSize:i,offset:v.offset,entry:U,index:J}),oe=(be=Ee??ve)!==null&&be!==void 0?be:void 0,pe=v.size;var Ne=ve-Ee;if(re=Number.isNaN(Ne)?0:Ne,he={x:X,y:s.y,width:pe,height:s.height},Math.abs(ue)>0&&Math.abs(re)<Math.abs(ue)){var Ge=Sh(re||ue)*(Math.abs(ue)-Math.abs(re));oe-=Ge,re+=Ge}}else{var dt=[o.scale(V[0]),o.scale(V[1])],Ue=dt[0],st=dt[1];if(X=Ue,oe=AY({axis:s,ticks:l,bandSize:i,offset:v.offset,entry:U,index:J}),pe=st-Ue,re=v.size,he={x:o.x,y:oe,width:o.width,height:re},Math.abs(ue)>0&&Math.abs(pe)<Math.abs(ue)){var lt=Sh(pe||ue)*(Math.abs(ue)-Math.abs(pe));pe+=lt}}return sa(sa(sa({},U),{},{x:X,y:oe,width:pe,height:re,value:d?V:V[1],payload:U,background:he},D&&D[J]&&D[J].props),{},{tooltipPayload:[Lle(n,U)],tooltipPosition:{x:X+pe/2,y:oe+re/2}})});return sa({data:B,layout:x},g)});function uM(t){"@babel/helpers - typeof";return uM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uM(t)}function kat(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tce(r.key),r)}}function Rat(t,e,n){return e&&kX(t.prototype,e),n&&kX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function RX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RX(Object(n),!0).forEach(function(r){PO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PO(t,e,n){return e=tce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tce(t){var e=Oat(t,"string");return uM(e)=="symbol"?e:String(e)}function Oat(t,e){if(uM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(uM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Lat=function(e,n,r,i,o){var s=e.width,a=e.height,l=e.layout,d=e.children,f=Object.keys(n),p={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},g=!!Zc(d,RE);return f.reduce(function(v,x){var b=n[x],S=b.orientation,M=b.domain,T=b.padding,C=T===void 0?{}:T,k=b.mirror,O=b.reversed,D="".concat(S).concat(k?"Mirror":""),B,U,J,V,X;if(b.type==="number"&&(b.padding==="gap"||b.padding==="no-gap")){var oe=M[1]-M[0],pe=1/0,re=b.categoricalDomain.sort();re.forEach(function(Ue,st){st>0&&(pe=Math.min((Ue||0)-(re[st-1]||0),pe))});var he=pe/oe,ue=b.layout==="vertical"?r.height:r.width;if(b.padding==="gap"&&(B=he*ue/2),b.padding==="no-gap"){var be=kb(e.barCategoryGap,he*ue),ie=he*ue/2;B=ie-be-(ie-be)/ue*be}}i==="xAxis"?U=[r.left+(C.left||0)+(B||0),r.left+r.width-(C.right||0)-(B||0)]:i==="yAxis"?U=l==="horizontal"?[r.top+r.height-(C.bottom||0),r.top+(C.top||0)]:[r.top+(C.top||0)+(B||0),r.top+r.height-(C.bottom||0)-(B||0)]:U=b.range,O&&(U=[U[1],U[0]]);var ve=wnt(b,o,g),Ee=ve.scale,Ne=ve.realScaleType;Ee.domain(M).range(U),Snt(Ee);var Ge=knt(Ee,hh(hh({},b),{},{realScaleType:Ne}));i==="xAxis"?(X=S==="top"&&!k||S==="bottom"&&k,J=r.left,V=p[D]-X*b.height):i==="yAxis"&&(X=S==="left"&&!k||S==="right"&&k,J=p[D]-X*b.width,V=r.top);var dt=hh(hh(hh({},b),Ge),{},{realScaleType:Ne,x:J,y:V,scale:Ee,width:i==="xAxis"?r.width:b.width,height:i==="yAxis"?r.height:b.height});return dt.bandSize=II(dt,Ge),!b.hide&&i==="xAxis"?p[D]+=(X?-1:1)*dt.height:b.hide||(p[D]+=(X?-1:1)*dt.width),hh(hh({},v),{},PO({},x,dt))},{})},nce=function(e,n){var r=e.x,i=e.y,o=n.x,s=n.y;return{x:Math.min(r,o),y:Math.min(i,s),width:Math.abs(o-r),height:Math.abs(s-i)}},Dat=function(e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2;return nce({x:n,y:r},{x:i,y:o})},rce=function(){function t(e){kat(this,t),this.scale=e}return Rat(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,o=r.position;if(n!==void 0){if(o)switch(o){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(n)+a}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],o=r[r.length-1];return i<=o?n>=i&&n<=o:n>=o&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}]),t}();PO(rce,"EPS",1e-4);var T6=function(e){var n=Object.keys(e).reduce(function(r,i){return hh(hh({},r),{},PO({},i,rce.create(e[i])))},{});return hh(hh({},n),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.bandAware,a=o.position;return tat(i,function(l,d){return n[d].apply(l,{bandAware:s,position:a})})},isInRange:function(i){return Zle(i,function(o,s){return n[s].isInRange(o)})}})};function Nat(t){return(t%180+180)%180}var zat=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Nat(i),s=o*Math.PI/180,a=Math.atan(r/n),l=s>a&&s<Math.PI-a?r/Math.sin(s):n/Math.cos(s);return Math.abs(l)},Fat=Cy,Bat=TE,$at=fO;function jat(t){return function(e,n,r){var i=Object(e);if(!Bat(e)){var o=Fat(n);e=$at(e),n=function(a){return o(i[a],a,i)}}var s=t(e,n,r);return s>-1?i[o?e[s]:s]:void 0}}var Uat=jat,Vat=qle;function Wat(t){var e=Vat(t),n=e%1;return e===e?n?e-n:e:0}var Hat=Wat,Gat=fae,qat=Cy,Yat=Hat,Xat=Math.max;function Kat(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:Yat(n);return i<0&&(i=Xat(r+i,0)),Gat(t,qat(e),i)}var Zat=Kat,Jat=Uat,Qat=Zat,elt=Jat(Qat),tlt=elt;const nlt=xi(tlt);var rlt=l8e(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),C6=W.createContext(void 0),A6=W.createContext(void 0),ice=W.createContext(void 0),oce=W.createContext({}),sce=W.createContext(void 0),ace=W.createContext(0),lce=W.createContext(0),OX=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,o=n.offset,s=e.clipPathId,a=e.children,l=e.width,d=e.height,f=rlt(o);return Ze.createElement(C6.Provider,{value:r},Ze.createElement(A6.Provider,{value:i},Ze.createElement(oce.Provider,{value:o},Ze.createElement(ice.Provider,{value:f},Ze.createElement(sce.Provider,{value:s},Ze.createElement(ace.Provider,{value:d},Ze.createElement(lce.Provider,{value:l},a)))))))},ilt=function(){return W.useContext(sce)},cce=function(e){var n=W.useContext(C6);n==null&&A0(!1);var r=n[e];return r==null&&A0(!1),r},olt=function(){var e=W.useContext(C6);return Ng(e)},slt=function(){var e=W.useContext(A6),n=nlt(e,function(r){return Zle(r.domain,Number.isFinite)});return n||Ng(e)},uce=function(e){var n=W.useContext(A6);n==null&&A0(!1);var r=n[e];return r==null&&A0(!1),r},alt=function(){var e=W.useContext(ice);return e},llt=function(){return W.useContext(oce)},P6=function(){return W.useContext(lce)},I6=function(){return W.useContext(ace)};function dM(t){"@babel/helpers - typeof";return dM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dM(t)}function LX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function DX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LX(Object(n),!0).forEach(function(r){clt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function clt(t,e,n){return e=ult(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ult(t){var e=dlt(t,"string");return dM(e)=="symbol"?e:String(e)}function dlt(t,e){if(dM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(dM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hlt(t,e){return glt(t)||mlt(t,e)||plt(t,e)||flt()}function flt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function plt(t,e){if(t){if(typeof t=="string")return NX(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NX(t,e)}}function NX(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mlt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){d=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function glt(t){if(Array.isArray(t))return t}function VB(){return VB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VB.apply(this,arguments)}var ylt=function(e,n){var r;return Ze.isValidElement(e)?r=Ze.cloneElement(e,n):qr(e)?r=e(n):r=Ze.createElement("line",VB({},n,{className:"recharts-reference-line-line"})),r},vlt=function(e,n,r,i,o,s,a,l,d){var f=o.x,p=o.y,g=o.width,v=o.height;if(r){var x=d.y,b=e.y.apply(x,{position:s});if(If(d,"discard")&&!e.y.isInRange(b))return null;var S=[{x:f+g,y:b},{x:f,y:b}];return l==="left"?S.reverse():S}if(n){var M=d.x,T=e.x.apply(M,{position:s});if(If(d,"discard")&&!e.x.isInRange(T))return null;var C=[{x:T,y:p+v},{x:T,y:p}];return a==="top"?C.reverse():C}if(i){var k=d.segment,O=k.map(function(D){return e.apply(D,{position:s})});return If(d,"discard")&&qst(O,function(D){return!e.isInRange(D)})?null:O}return null};function k6(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,o=t.yAxisId,s=t.shape,a=t.className,l=t.alwaysShow,d=ilt(),f=cce(i),p=uce(o),g=alt();if(!d||!g)return null;tm(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var v=T6({x:f.scale,y:p.scale}),x=Ws(e),b=Ws(n),S=r&&r.length===2,M=vlt(v,x,b,S,g,t.position,f.orientation,p.orientation,t);if(!M)return null;var T=hlt(M,2),C=T[0],k=C.x,O=C.y,D=T[1],B=D.x,U=D.y,J=If(t,"hidden")?"url(#".concat(d,")"):void 0,V=DX(DX({clipPath:J},ni(t,!0)),{},{x1:k,y1:O,x2:B,y2:U});return Ze.createElement(ds,{className:qt("recharts-reference-line",a)},ylt(s,V),dl.renderCallByParent(t,Dat({x1:k,y1:O,x2:B,y2:U})))}k6.displayName="ReferenceLine";k6.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function hM(t){"@babel/helpers - typeof";return hM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hM(t)}function WB(){return WB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WB.apply(this,arguments)}function zX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FX(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zX(Object(n),!0).forEach(function(r){_lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _lt(t,e,n){return e=xlt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xlt(t){var e=blt(t,"string");return hM(e)=="symbol"?e:String(e)}function blt(t,e){if(hM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wlt=function(e){var n=e.x,r=e.y,i=e.xAxis,o=e.yAxis,s=T6({x:i.scale,y:o.scale}),a=s.apply({x:n,y:r},{bandAware:!0});return If(e,"discard")&&!s.isInRange(a)?null:a};function OE(t){var e=t.x,n=t.y,r=t.r,i=t.alwaysShow,o=t.clipPathId,s=Ws(e),a=Ws(n);if(tm(i===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!s||!a)return null;var l=wlt(t);if(!l)return null;var d=l.x,f=l.y,p=t.shape,g=t.className,v=If(t,"hidden")?"url(#".concat(o,")"):void 0,x=FX(FX({clipPath:v},ni(t,!0)),{},{cx:d,cy:f});return Ze.createElement(ds,{className:qt("recharts-reference-dot",g)},OE.renderDot(p,x),dl.renderCallByParent(t,{x:d-r,y:f-r,width:2*r,height:2*r}))}OE.displayName="ReferenceDot";OE.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1};OE.renderDot=function(t,e){var n;return Ze.isValidElement(t)?n=Ze.cloneElement(t,e):qr(t)?n=t(e):n=Ze.createElement(E6,WB({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n};function fM(t){"@babel/helpers - typeof";return fM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fM(t)}function HB(){return HB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HB.apply(this,arguments)}function BX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $X(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BX(Object(n),!0).forEach(function(r){Slt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Slt(t,e,n){return e=Mlt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mlt(t){var e=Elt(t,"string");return fM(e)=="symbol"?e:String(e)}function Elt(t,e){if(fM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tlt=function(e,n,r,i,o){var s=o.x1,a=o.x2,l=o.y1,d=o.y2,f=o.xAxis,p=o.yAxis;if(!f||!p)return null;var g=T6({x:f.scale,y:p.scale}),v={x:e?g.x.apply(s,{position:"start"}):g.x.rangeMin,y:r?g.y.apply(l,{position:"start"}):g.y.rangeMin},x={x:n?g.x.apply(a,{position:"end"}):g.x.rangeMax,y:i?g.y.apply(d,{position:"end"}):g.y.rangeMax};return If(o,"discard")&&(!g.isInRange(v)||!g.isInRange(x))?null:nce(v,x)};function LE(t){var e=t.x1,n=t.x2,r=t.y1,i=t.y2,o=t.className,s=t.alwaysShow,a=t.clipPathId;tm(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var l=Ws(e),d=Ws(n),f=Ws(r),p=Ws(i),g=t.shape;if(!l&&!d&&!f&&!p&&!g)return null;var v=Tlt(l,d,f,p,t);if(!v&&!g)return null;var x=If(t,"hidden")?"url(#".concat(a,")"):void 0;return Ze.createElement(ds,{className:qt("recharts-reference-area",o)},LE.renderRect(g,$X($X({clipPath:x},ni(t,!0)),v)),dl.renderCallByParent(t,v))}LE.displayName="ReferenceArea";LE.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1};LE.renderRect=function(t,e){var n;return Ze.isValidElement(t)?n=Ze.cloneElement(t,e):qr(t)?n=t(e):n=Ze.createElement(M6,HB({},e,{className:"recharts-reference-area-rect"})),n};function dce(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)if(n===void 0||n(t[i])===!0)r.push(t[i]);else return;return r}function Clt(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return zat(r,n)}function Alt(t,e,n){var r=n==="width",i=t.x,o=t.y,s=t.width,a=t.height;return e===1?{start:r?i:o,end:r?i+s:o+a}:{start:r?i+s:o+a,end:r?i:o}}function WI(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function Plt(t,e){return dce(t,e+1)}function Ilt(t,e,n,r,i){for(var o=(r||[]).slice(),s=e.start,a=e.end,l=0,d=1,f=s,p=function(){var x=r==null?void 0:r[l];if(x===void 0)return{v:dce(r,d)};var b=l,S,M=function(){return S===void 0&&(S=n(x,b)),S},T=x.coordinate,C=l===0||WI(t,T,M,f,a);C||(l=0,f=s,d+=1),C&&(f=T+t*(M()/2+i),l+=d)},g;d<=o.length;)if(g=p(),g)return g.v;return[]}function pM(t){"@babel/helpers - typeof";return pM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pM(t)}function jX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jX(Object(n),!0).forEach(function(r){klt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function klt(t,e,n){return e=Rlt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rlt(t){var e=Olt(t,"string");return pM(e)=="symbol"?e:String(e)}function Olt(t,e){if(pM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(pM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Llt(t,e,n,r,i){for(var o=(r||[]).slice(),s=o.length,a=e.start,l=e.end,d=function(g){var v=o[g],x,b=function(){return x===void 0&&(x=n(v,g)),x};if(g===s-1){var S=t*(v.coordinate+t*b()/2-l);o[g]=v=cl(cl({},v),{},{tickCoord:S>0?v.coordinate-S*t:v.coordinate})}else o[g]=v=cl(cl({},v),{},{tickCoord:v.coordinate});var M=WI(t,v.tickCoord,b,a,l);M&&(l=v.tickCoord-t*(b()/2+i),o[g]=cl(cl({},v),{},{isShow:!0}))},f=s-1;f>=0;f--)d(f);return o}function Dlt(t,e,n,r,i,o){var s=(r||[]).slice(),a=s.length,l=e.start,d=e.end;if(o){var f=r[a-1],p=n(f,a-1),g=t*(f.coordinate+t*p/2-d);s[a-1]=f=cl(cl({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate});var v=WI(t,f.tickCoord,function(){return p},l,d);v&&(d=f.tickCoord-t*(p/2+i),s[a-1]=cl(cl({},f),{},{isShow:!0}))}for(var x=o?a-1:a,b=function(T){var C=s[T],k,O=function(){return k===void 0&&(k=n(C,T)),k};if(T===0){var D=t*(C.coordinate-t*O()/2-l);s[T]=C=cl(cl({},C),{},{tickCoord:D<0?C.coordinate-D*t:C.coordinate})}else s[T]=C=cl(cl({},C),{},{tickCoord:C.coordinate});var B=WI(t,C.tickCoord,O,l,d);B&&(l=C.tickCoord+t*(O()/2+i),s[T]=cl(cl({},C),{},{isShow:!0}))},S=0;S<x;S++)b(S);return s}function R6(t,e,n){var r=t.tick,i=t.ticks,o=t.viewBox,s=t.minTickGap,a=t.orientation,l=t.interval,d=t.tickFormatter,f=t.unit,p=t.angle;if(!i||!i.length||!r)return[];if(Cn(l)||nm.isSsr)return Plt(i,typeof l=="number"&&Cn(l)?l:0);var g=[],v=a==="top"||a==="bottom"?"width":"height",x=f&&v==="width"?FS(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},b=function(C,k){var O=qr(d)?d(C.value,k):C.value;return v==="width"?Clt(FS(O,{fontSize:e,letterSpacing:n}),x,p):FS(O,{fontSize:e,letterSpacing:n})[v]},S=i.length>=2?Sh(i[1].coordinate-i[0].coordinate):1,M=Alt(o,S,v);return l==="equidistantPreserveStart"?Ilt(S,M,b,i,s):(l==="preserveStart"||l==="preserveStartEnd"?g=Dlt(S,M,b,i,s,l==="preserveStartEnd"):g=Llt(S,M,b,i,s),g.filter(function(T){return T.isShow}))}var Nlt=["viewBox"],zlt=["viewBox"],Flt=["ticks"];function Hb(t){"@babel/helpers - typeof";return Hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hb(t)}function Ox(){return Ox=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ox.apply(this,arguments)}function UX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UX(Object(n),!0).forEach(function(r){O6(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function q3(t,e){if(t==null)return{};var n=Blt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Blt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function $lt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fce(r.key),r)}}function jlt(t,e,n){return e&&VX(t.prototype,e),n&&VX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ult(t,e,n){return e=HI(e),Vlt(t,hce()?Reflect.construct(e,n||[],HI(t).constructor):e.apply(t,n))}function Vlt(t,e){if(e&&(Hb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wlt(t)}function Wlt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hce(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hce=function(){return!!t})()}function HI(t){return HI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},HI(t)}function Hlt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GB(t,e)}function GB(t,e){return GB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},GB(t,e)}function O6(t,e,n){return e=fce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fce(t){var e=Glt(t,"string");return Hb(e)=="symbol"?e:String(e)}function Glt(t,e){if(Hb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var F1=function(t){Hlt(e,t);function e(n){var r;return $lt(this,e),r=Ult(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return jlt(e,[{key:"shouldComponentUpdate",value:function(r,i){var o=r.viewBox,s=q3(r,Nlt),a=this.props,l=a.viewBox,d=q3(a,zlt);return!tb(o,l)||!tb(s,d)||!tb(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.x,s=i.y,a=i.width,l=i.height,d=i.orientation,f=i.tickSize,p=i.mirror,g=i.tickMargin,v,x,b,S,M,T,C=p?-1:1,k=r.tickSize||f,O=Cn(r.tickCoord)?r.tickCoord:r.coordinate;switch(d){case"top":v=x=r.coordinate,S=s+ +!p*l,b=S-C*k,T=b-C*g,M=O;break;case"left":b=S=r.coordinate,x=o+ +!p*a,v=x-C*k,M=v-C*g,T=O;break;case"right":b=S=r.coordinate,x=o+ +p*a,v=x+C*k,M=v+C*g,T=O;break;default:v=x=r.coordinate,S=s+ +p*l,b=S+C*k,T=b+C*g,M=O;break}return{line:{x1:v,y1:b,x2:x,y2:S},tick:{x:M,y:T}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,s;switch(i){case"left":s=o?"start":"end";break;case"right":s=o?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=o?"start":"end";break;default:s=o?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,o=r.y,s=r.width,a=r.height,l=r.orientation,d=r.mirror,f=r.axisLine,p=Rl(Rl(Rl({},ni(this.props,!1)),ni(f,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var g=+(l==="top"&&!d||l==="bottom"&&d);p=Rl(Rl({},p),{},{x1:i,y1:o+g*a,x2:i+s,y2:o+g*a})}else{var v=+(l==="left"&&!d||l==="right"&&d);p=Rl(Rl({},p),{},{x1:i+v*s,y1:o,x2:i+v*s,y2:o+a})}return Ze.createElement("line",Ox({},p,{className:qt("recharts-cartesian-axis-line",md(f,"className"))}))}},{key:"renderTicks",value:function(r,i,o){var s=this,a=this.props,l=a.tickLine,d=a.stroke,f=a.tick,p=a.tickFormatter,g=a.unit,v=R6(Rl(Rl({},this.props),{},{ticks:r}),i,o),x=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),S=ni(this.props,!1),M=ni(f,!1),T=Rl(Rl({},S),{},{fill:"none"},ni(l,!1)),C=v.map(function(k,O){var D=s.getTickLineCoord(k),B=D.line,U=D.tick,J=Rl(Rl(Rl(Rl({textAnchor:x,verticalAnchor:b},S),{},{stroke:"none",fill:d},M),U),{},{index:O,payload:k,visibleTicksCount:v.length,tickFormatter:p});return Ze.createElement(ds,Ox({className:"recharts-cartesian-axis-tick",key:"tick-".concat(k.value,"-").concat(k.coordinate,"-").concat(k.tickCoord)},rI(s.props,k,O)),l&&Ze.createElement("line",Ox({},T,B,{className:qt("recharts-cartesian-axis-tick-line",md(l,"className"))})),f&&e.renderTickItem(f,J,"".concat(qr(p)?p(k.value,O):k.value).concat(g||"")))});return Ze.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var r=this,i=this.props,o=i.axisLine,s=i.width,a=i.height,l=i.ticksGenerator,d=i.className,f=i.hide;if(f)return null;var p=this.props,g=p.ticks,v=q3(p,Flt),x=g;return qr(l)&&(x=g&&g.length>0?l(this.props):l(v)),s<=0||a<=0||!x||!x.length?null:Ze.createElement(ds,{className:qt("recharts-cartesian-axis",d),ref:function(S){r.layerReference=S}},o&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),dl.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,o){var s;return Ze.isValidElement(r)?s=Ze.cloneElement(r,i):qr(r)?s=r(i):s=Ze.createElement(yI,Ox({},i,{className:"recharts-cartesian-axis-tick-value"}),o),s}}]),e}(W.Component);O6(F1,"displayName","CartesianAxis");O6(F1,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var qlt=["x1","y1","x2","y2","key"],Ylt=["offset"];function P0(t){"@babel/helpers - typeof";return P0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P0(t)}function WX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WX(Object(n),!0).forEach(function(r){Xlt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xlt(t,e,n){return e=Klt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Klt(t){var e=Zlt(t,"string");return P0(e)=="symbol"?e:String(e)}function Zlt(t,e){if(P0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(P0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xv(){return Xv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xv.apply(this,arguments)}function HX(t,e){if(t==null)return{};var n=Jlt(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Jlt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Qlt=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,o=e.y,s=e.width,a=e.height;return Ze.createElement("rect",{x:i,y:o,width:s,height:a,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function pce(t,e){var n;if(Ze.isValidElement(t))n=Ze.cloneElement(t,e);else if(qr(t))n=t(e);else{var r=e.x1,i=e.y1,o=e.x2,s=e.y2,a=e.key,l=HX(e,qlt),d=ni(l,!1);d.offset;var f=HX(d,Ylt);n=Ze.createElement("line",Xv({},f,{x1:r,y1:i,x2:o,y2:s,fill:"none",key:a}))}return n}function ect(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,o=t.horizontalPoints;if(!i||!o||!o.length)return null;var s=o.map(function(a,l){var d=hl(hl({},t),{},{x1:e,y1:a,x2:e+n,y2:a,key:"line-".concat(l),index:l});return pce(i,d)});return Ze.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function tct(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,o=t.verticalPoints;if(!i||!o||!o.length)return null;var s=o.map(function(a,l){var d=hl(hl({},t),{},{x1:a,y1:e,x2:a,y2:e+n,key:"line-".concat(l),index:l});return pce(i,d)});return Ze.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function nct(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,o=t.width,s=t.height,a=t.horizontalPoints,l=t.horizontal,d=l===void 0?!0:l;if(!d||!e||!e.length)return null;var f=a.map(function(g){return Math.round(g+i-i)}).sort(function(g,v){return g-v});i!==f[0]&&f.unshift(0);var p=f.map(function(g,v){var x=!f[v+1],b=x?i+s-g:f[v+1]-g;if(b<=0)return null;var S=v%e.length;return Ze.createElement("rect",{key:"react-".concat(v),y:g,x:r,height:b,width:o,stroke:"none",fill:e[S],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Ze.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function rct(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,o=t.x,s=t.y,a=t.width,l=t.height,d=t.verticalPoints;if(!n||!r||!r.length)return null;var f=d.map(function(g){return Math.round(g+o-o)}).sort(function(g,v){return g-v});o!==f[0]&&f.unshift(0);var p=f.map(function(g,v){var x=!f[v+1],b=x?o+a-g:f[v+1]-g;if(b<=0)return null;var S=v%r.length;return Ze.createElement("rect",{key:"react-".concat(v),x:g,y:s,width:b,height:l,stroke:"none",fill:r[S],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Ze.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var ict=function(e,n){var r=e.xAxis,i=e.width,o=e.height,s=e.offset;return Rle(R6(hl(hl(hl({},F1.defaultProps),r),{},{ticks:qp(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),s.left,s.left+s.width,n)},oct=function(e,n){var r=e.yAxis,i=e.width,o=e.height,s=e.offset;return Rle(R6(hl(hl(hl({},F1.defaultProps),r),{},{ticks:qp(r,!0),viewBox:{x:0,y:0,width:i,height:o}})),s.top,s.top+s.height,n)},L_={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function mce(t){var e,n,r,i,o,s,a=P6(),l=I6(),d=llt(),f=hl(hl({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:L_.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:L_.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:L_.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:L_.horizontalFill,vertical:(o=t.vertical)!==null&&o!==void 0?o:L_.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:L_.verticalFill,x:Cn(t.x)?t.x:d.left,y:Cn(t.y)?t.y:d.top,width:Cn(t.width)?t.width:d.width,height:Cn(t.height)?t.height:d.height}),p=f.x,g=f.y,v=f.width,x=f.height,b=f.syncWithTicks,S=f.horizontalValues,M=f.verticalValues,T=olt(),C=slt();if(!Cn(v)||v<=0||!Cn(x)||x<=0||!Cn(p)||p!==+p||!Cn(g)||g!==+g)return null;var k=f.verticalCoordinatesGenerator||ict,O=f.horizontalCoordinatesGenerator||oct,D=f.horizontalPoints,B=f.verticalPoints;if((!D||!D.length)&&qr(O)){var U=S&&S.length,J=O({yAxis:C?hl(hl({},C),{},{ticks:U?S:C.ticks}):void 0,width:a,height:l,offset:d},U?!0:b);tm(Array.isArray(J),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(P0(J),"]")),Array.isArray(J)&&(D=J)}if((!B||!B.length)&&qr(k)){var V=M&&M.length,X=k({xAxis:T?hl(hl({},T),{},{ticks:V?M:T.ticks}):void 0,width:a,height:l,offset:d},V?!0:b);tm(Array.isArray(X),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(P0(X),"]")),Array.isArray(X)&&(B=X)}return Ze.createElement("g",{className:"recharts-cartesian-grid"},Ze.createElement(Qlt,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height}),Ze.createElement(ect,Xv({},f,{offset:d,horizontalPoints:D,xAxis:T,yAxis:C})),Ze.createElement(tct,Xv({},f,{offset:d,verticalPoints:B,xAxis:T,yAxis:C})),Ze.createElement(nct,Xv({},f,{horizontalPoints:D})),Ze.createElement(rct,Xv({},f,{verticalPoints:B})))}mce.displayName="CartesianGrid";var sct=["type","layout","connectNulls","ref"];function Gb(t){"@babel/helpers - typeof";return Gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gb(t)}function act(t,e){if(t==null)return{};var n=lct(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lct(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function US(){return US=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},US.apply(this,arguments)}function GX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GX(Object(n),!0).forEach(function(r){fh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function D_(t){return hct(t)||dct(t)||uct(t)||cct()}function cct(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uct(t,e){if(t){if(typeof t=="string")return qB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qB(t,e)}}function dct(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hct(t){if(Array.isArray(t))return qB(t)}function qB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yce(r.key),r)}}function pct(t,e,n){return e&&qX(t.prototype,e),n&&qX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mct(t,e,n){return e=GI(e),gct(t,gce()?Reflect.construct(e,n||[],GI(t).constructor):e.apply(t,n))}function gct(t,e){if(e&&(Gb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pg(t)}function gce(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gce=function(){return!!t})()}function GI(t){return GI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},GI(t)}function Pg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yct(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YB(t,e)}function YB(t,e){return YB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},YB(t,e)}function fh(t,e,n){return e=yce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yce(t){var e=vct(t,"string");return Gb(e)=="symbol"?e:String(e)}function vct(t,e){if(Gb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qb=function(t){yct(e,t);function e(){var n;fct(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=mct(this,e,[].concat(i)),fh(Pg(n),"state",{isAnimationFinished:!0,totalLength:0}),fh(Pg(n),"generateSimpleStrokeDasharray",function(s,a){return"".concat(a,"px ").concat(s-a,"px")}),fh(Pg(n),"getStrokeDasharray",function(s,a,l){var d=l.reduce(function(M,T){return M+T});if(!d)return n.generateSimpleStrokeDasharray(a,s);for(var f=Math.floor(s/d),p=s%d,g=a-s,v=[],x=0,b=0;x<l.length;b+=l[x],++x)if(b+l[x]>p){v=[].concat(D_(l.slice(0,x)),[p-b]);break}var S=v.length%2===0?[0,g]:[g];return[].concat(D_(e.repeat(l,f)),D_(v),S).map(function(M){return"".concat(M,"px")}).join(", ")}),fh(Pg(n),"id",EE("recharts-line-")),fh(Pg(n),"pathRef",function(s){n.mainCurve=s}),fh(Pg(n),"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),fh(Pg(n),"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return pct(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.points,a=o.xAxis,l=o.yAxis,d=o.layout,f=o.children,p=gd(f,kE);if(!p)return null;var g=function(b,S){return{x:b.x,y:b.y,value:b.value,errorVal:vu(b.payload,S)}},v={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Ze.createElement(ds,v,p.map(function(x){return Ze.cloneElement(x,{key:"bar-".concat(x.props.dataKey),data:s,xAxis:a,yAxis:l,layout:d,dataPointFormatter:g})}))}},{key:"renderDots",value:function(r,i,o){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var a=this.props,l=a.dot,d=a.points,f=a.dataKey,p=ni(this.props,!1),g=ni(l,!0),v=d.map(function(b,S){var M=Yc(Yc(Yc({key:"dot-".concat(S),r:3},p),g),{},{value:b.value,dataKey:f,cx:b.x,cy:b.y,index:S,payload:b.payload});return e.renderDotItem(l,M)}),x={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return Ze.createElement(ds,US({className:"recharts-line-dots",key:"dots"},x),v)}},{key:"renderCurveStatically",value:function(r,i,o,s){var a=this.props,l=a.type,d=a.layout,f=a.connectNulls;a.ref;var p=act(a,sct),g=Yc(Yc(Yc({},ni(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:r},s),{},{type:l,layout:d,connectNulls:f});return Ze.createElement(AB,US({},g,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var o=this,s=this.props,a=s.points,l=s.strokeDasharray,d=s.isAnimationActive,f=s.animationBegin,p=s.animationDuration,g=s.animationEasing,v=s.animationId,x=s.animateNewValues,b=s.width,S=s.height,M=this.state,T=M.prevPoints,C=M.totalLength;return Ze.createElement(ym,{begin:f,duration:p,isActive:d,easing:g,from:{t:0},to:{t:1},key:"line-".concat(v),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(k){var O=k.t;if(T){var D=T.length/a.length,B=a.map(function(oe,pe){var re=Math.floor(pe*D);if(T[re]){var he=T[re],ue=yh(he.x,oe.x),be=yh(he.y,oe.y);return Yc(Yc({},oe),{},{x:ue(O),y:be(O)})}if(x){var ie=yh(b*2,oe.x),ve=yh(S/2,oe.y);return Yc(Yc({},oe),{},{x:ie(O),y:ve(O)})}return Yc(Yc({},oe),{},{x:oe.x,y:oe.y})});return o.renderCurveStatically(B,r,i)}var U=yh(0,C),J=U(O),V;if(l){var X="".concat(l).split(/[,\s]+/gim).map(function(oe){return parseFloat(oe)});V=o.getStrokeDasharray(J,C,X)}else V=o.generateSimpleStrokeDasharray(C,J);return o.renderCurveStatically(a,r,i,{strokeDasharray:V})})}},{key:"renderCurve",value:function(r,i){var o=this.props,s=o.points,a=o.isAnimationActive,l=this.state,d=l.prevPoints,f=l.totalLength;return a&&s&&s.length&&(!d&&f>0||!MO(d,s))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(s,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,s=i.dot,a=i.points,l=i.className,d=i.xAxis,f=i.yAxis,p=i.top,g=i.left,v=i.width,x=i.height,b=i.isAnimationActive,S=i.id;if(o||!a||!a.length)return null;var M=this.state.isAnimationFinished,T=a.length===1,C=qt("recharts-line",l),k=d&&d.allowDataOverflow,O=f&&f.allowDataOverflow,D=k||O,B=ri(S)?this.id:S,U=(r=ni(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},J=U.r,V=J===void 0?3:J,X=U.strokeWidth,oe=X===void 0?2:X,pe=gVe(s)?s:{},re=pe.clipDot,he=re===void 0?!0:re,ue=V*2+oe;return Ze.createElement(ds,{className:C},k||O?Ze.createElement("defs",null,Ze.createElement("clipPath",{id:"clipPath-".concat(B)},Ze.createElement("rect",{x:k?g:g-v/2,y:O?p:p-x/2,width:k?v:v*2,height:O?x:x*2})),!he&&Ze.createElement("clipPath",{id:"clipPath-dots-".concat(B)},Ze.createElement("rect",{x:g-ue/2,y:p-ue/2,width:v+ue,height:x+ue}))):null,!T&&this.renderCurve(D,B),this.renderErrorBar(D,B),(T||s)&&this.renderDots(D,he,B),(!b||M)&&oy.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var o=r.length%2!==0?[].concat(D_(r),[0]):r,s=[],a=0;a<i;++a)s=[].concat(D_(s),D_(o));return s}},{key:"renderDotItem",value:function(r,i){var o;if(Ze.isValidElement(r))o=Ze.cloneElement(r,i);else if(qr(r))o=r(i);else{var s=qt("recharts-line-dot",typeof r!="boolean"?r.className:"");o=Ze.createElement(E6,US({},i,{className:s}))}return o}}]),e}(W.PureComponent);fh(qb,"displayName","Line");fh(qb,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!nm.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});fh(qb,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,s=t.dataKey,a=t.bandSize,l=t.displayedData,d=t.offset,f=e.layout,p=l.map(function(g,v){var x=vu(g,s);return f==="horizontal"?{x:CY({axis:n,ticks:i,bandSize:a,entry:g,index:v}),y:ri(x)?null:r.scale(x),value:x,payload:g}:{x:ri(x)?null:n.scale(x),y:CY({axis:r,ticks:o,bandSize:a,entry:g,index:v}),value:x,payload:g}});return Yc({points:p,layout:f},d)});function XB(){return XB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XB.apply(this,arguments)}var IO=function(e){var n=e.xAxisId,r=P6(),i=I6(),o=cce(n);return o==null?null:Ze.createElement(F1,XB({},o,{className:qt("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(a){return qp(a,!0)}}))};IO.displayName="XAxis";IO.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};function KB(){return KB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KB.apply(this,arguments)}var kO=function(e){var n=e.yAxisId,r=P6(),i=I6(),o=uce(n);return o==null?null:Ze.createElement(F1,KB({},o,{className:qt("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(a){return qp(a,!0)}}))};kO.displayName="YAxis";kO.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};function YX(t){return wct(t)||bct(t)||xct(t)||_ct()}function _ct(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xct(t,e){if(t){if(typeof t=="string")return ZB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZB(t,e)}}function bct(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wct(t){if(Array.isArray(t))return ZB(t)}function ZB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var JB=function(e,n,r,i,o){var s=gd(e,k6),a=gd(e,OE),l=[].concat(YX(s),YX(a)),d=gd(e,LE),f="".concat(i,"Id"),p=i[0],g=n;if(l.length&&(g=l.reduce(function(b,S){if(S.props[f]===r&&If(S.props,"extendDomain")&&Cn(S.props[p])){var M=S.props[p];return[Math.min(b[0],M),Math.max(b[1],M)]}return b},g)),d.length){var v="".concat(p,"1"),x="".concat(p,"2");g=d.reduce(function(b,S){if(S.props[f]===r&&If(S.props,"extendDomain")&&Cn(S.props[v])&&Cn(S.props[x])){var M=S.props[v],T=S.props[x];return[Math.min(b[0],M,T),Math.max(b[1],M,T)]}return b},g)}return o&&o.length&&(g=o.reduce(function(b,S){return Cn(S)?[Math.min(b[0],S),Math.max(b[1],S)]:b},g)),g},vce={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,d,f){this.fn=l,this.context=d,this.once=f||!1}function o(l,d,f,p,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var v=new i(f,p||l,g),x=n?n+d:d;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],v]:l._events[x].push(v):(l._events[x]=v,l._eventsCount++),l}function s(l,d){--l._eventsCount===0?l._events=new r:delete l._events[d]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var d=[],f,p;if(this._eventsCount===0)return d;for(p in f=this._events)e.call(f,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},a.prototype.listeners=function(d){var f=n?n+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,v=p.length,x=new Array(v);g<v;g++)x[g]=p[g].fn;return x},a.prototype.listenerCount=function(d){var f=n?n+d:d,p=this._events[f];return p?p.fn?1:p.length:0},a.prototype.emit=function(d,f,p,g,v,x){var b=n?n+d:d;if(!this._events[b])return!1;var S=this._events[b],M=arguments.length,T,C;if(S.fn){switch(S.once&&this.removeListener(d,S.fn,void 0,!0),M){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,p),!0;case 4:return S.fn.call(S.context,f,p,g),!0;case 5:return S.fn.call(S.context,f,p,g,v),!0;case 6:return S.fn.call(S.context,f,p,g,v,x),!0}for(C=1,T=new Array(M-1);C<M;C++)T[C-1]=arguments[C];S.fn.apply(S.context,T)}else{var k=S.length,O;for(C=0;C<k;C++)switch(S[C].once&&this.removeListener(d,S[C].fn,void 0,!0),M){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,f);break;case 3:S[C].fn.call(S[C].context,f,p);break;case 4:S[C].fn.call(S[C].context,f,p,g);break;default:if(!T)for(O=1,T=new Array(M-1);O<M;O++)T[O-1]=arguments[O];S[C].fn.apply(S[C].context,T)}}return!0},a.prototype.on=function(d,f,p){return o(this,d,f,p,!1)},a.prototype.once=function(d,f,p){return o(this,d,f,p,!0)},a.prototype.removeListener=function(d,f,p,g){var v=n?n+d:d;if(!this._events[v])return this;if(!f)return s(this,v),this;var x=this._events[v];if(x.fn)x.fn===f&&(!g||x.once)&&(!p||x.context===p)&&s(this,v);else{for(var b=0,S=[],M=x.length;b<M;b++)(x[b].fn!==f||g&&!x[b].once||p&&x[b].context!==p)&&S.push(x[b]);S.length?this._events[v]=S.length===1?S[0]:S:s(this,v)}return this},a.prototype.removeAllListeners=function(d){var f;return d?(f=n?n+d:d,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(vce);var Sct=vce.exports;const Mct=xi(Sct);var Y3=new Mct,X3="recharts.syncMouseEvents";function mM(t){"@babel/helpers - typeof";return mM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mM(t)}function Ect(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_ce(r.key),r)}}function Tct(t,e,n){return e&&XX(t.prototype,e),n&&XX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function K3(t,e,n){return e=_ce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ce(t){var e=Cct(t,"string");return mM(e)=="symbol"?e:String(e)}function Cct(t,e){if(mM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Act=function(){function t(){Ect(this,t),K3(this,"activeIndex",0),K3(this,"coordinateList",[]),K3(this,"layout","horizontal")}return Tct(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,o=i===void 0?null:i,s=n.container,a=s===void 0?null:s,l=n.layout,d=l===void 0?null:l,f=n.offset,p=f===void 0?null:f,g=n.mouseHandlerCallback,v=g===void 0?null:g;this.coordinateList=(r=o??this.coordinateList)!==null&&r!==void 0?r:[],this.container=a??this.container,this.layout=d??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=v??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,s=i.y,a=i.height,l=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((r=window)===null||r===void 0?void 0:r.scrollY)||0,p=o+l+d,g=s+this.offset.top+a/2+f;this.mouseHandlerCallback({pageX:p,pageY:g})}}}]),t}();function Pct(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&Cn(r)&&Cn(i))return!0}return!1}function Ict(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function xce(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,o=t.endAngle,s=Da(e,n,r,i),a=Da(e,n,r,o);return{points:[s,a],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function kct(t,e,n){var r,i,o,s;if(t==="horizontal")r=e.x,o=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var a=e.cx,l=e.cy,d=e.innerRadius,f=e.outerRadius,p=e.angle,g=Da(a,l,d,p),v=Da(a,l,f,p);r=g.x,i=g.y,o=v.x,s=v.y}else return xce(e);return[{x:r,y:i},{x:o,y:s}]}function gM(t){"@babel/helpers - typeof";return gM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gM(t)}function KX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KX(Object(n),!0).forEach(function(r){Rct(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KX(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rct(t,e,n){return e=Oct(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oct(t){var e=Lct(t,"string");return gM(e)=="symbol"?e:String(e)}function Lct(t,e){if(gM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dct(t){var e=t.element,n=t.tooltipEventType,r=t.isActive,i=t.activeCoordinate,o=t.activePayload,s=t.offset,a=t.activeTooltipIndex,l=t.tooltipAxisBandSize,d=t.layout,f=t.chartName;if(!e||!e.props.cursor||!r||!i||f!=="ScatterChart"&&n!=="axis")return null;var p,g=AB;if(f==="ScatterChart")p=i,g=vot;else if(f==="BarChart")p=Ict(d,i,s,l),g=M6;else if(d==="radial"){var v=xce(i),x=v.cx,b=v.cy,S=v.radius,M=v.startAngle,T=v.endAngle;p={cx:x,cy:b,startAngle:M,endAngle:T,innerRadius:S,outerRadius:S},g=zle}else p={points:kct(d,i,s)},g=AB;var C=mC(mC(mC(mC({stroke:"#ccc",pointerEvents:"none"},s),p),ni(e.props.cursor,!1)),{},{payload:o,payloadIndex:a,className:"recharts-tooltip-cursor"});return W.isValidElement(e.props.cursor)?W.cloneElement(e.props.cursor,C):W.createElement(g,C)}var Nct=["item"],zct=["children","className","width","height","style","compact","title","desc"];function Yb(t){"@babel/helpers - typeof";return Yb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yb(t)}function VS(){return VS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VS.apply(this,arguments)}function ZX(t,e){return $ct(t)||Bct(t,e)||wce(t,e)||Fct()}function Fct(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bct(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,d=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){d=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(d)throw i}}return a}}function $ct(t){if(Array.isArray(t))return t}function JX(t,e){if(t==null)return{};var n=jct(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jct(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Uct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Sce(r.key),r)}}function Vct(t,e,n){return e&&QX(t.prototype,e),n&&QX(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wct(t,e,n){return e=qI(e),Hct(t,bce()?Reflect.construct(e,n||[],qI(t).constructor):e.apply(t,n))}function Hct(t,e){if(e&&(Yb(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ui(t)}function bce(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bce=function(){return!!t})()}function qI(t){return qI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qI(t)}function ui(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gct(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QB(t,e)}function QB(t,e){return QB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},QB(t,e)}function Xb(t){return Xct(t)||Yct(t)||wce(t)||qct()}function qct(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wce(t,e){if(t){if(typeof t=="string")return e4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e4(t,e)}}function Yct(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Xct(t){if(Array.isArray(t))return e4(t)}function e4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function eK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eK(Object(n),!0).forEach(function(r){xr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eK(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xr(t,e,n){return e=Sce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sce(t){var e=Kct(t,"string");return Yb(e)=="symbol"?e:String(e)}function Kct(t,e){if(Yb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Yb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Zct={xAxis:["bottom","top"],yAxis:["left","right"]},Jct={width:"100%",height:"100%"},Mce={x:0,y:0};function gC(t){return t}var Qct=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},eut=function(e,n,r,i){var o=n.find(function(f){return f&&f.index===r});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var s=o.coordinate,a=i.radius;return nn(nn(nn({},i),Da(i.cx,i.cy,a,s)),{},{angle:s,radius:a})}var l=o.coordinate,d=i.angle;return nn(nn(nn({},i),Da(i.cx,i.cy,l,d)),{},{angle:d,radius:l})}return Mce},RO=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,o=n.dataEndIndex,s=(r??[]).reduce(function(a,l){var d=l.props.data;return d&&d.length?[].concat(Xb(a),Xb(d)):a},[]);return s.length>0?s:e&&e.length&&Cn(i)&&Cn(o)?e.slice(i,o+1):[]};function Ece(t){return t==="number"?[0,"auto"]:void 0}var t4=function(e,n,r,i){var o=e.graphicalItems,s=e.tooltipAxis,a=RO(n,e);return r<0||!o||!o.length||r>=a.length?null:o.reduce(function(l,d){var f,p=(f=d.props.data)!==null&&f!==void 0?f:n;p&&e.dataStartIndex+e.dataEndIndex!==0&&(p=p.slice(e.dataStartIndex,e.dataEndIndex+1));var g;if(s.dataKey&&!s.allowDuplicatedCategory){var v=p===void 0?a:p;g=tI(v,s.dataKey,i)}else g=p&&p[r]||a[r];return g?[].concat(Xb(l),[Lle(d,g)]):l},[])},tK=function(e,n,r,i){var o=i||{x:e.chartX,y:e.chartY},s=Qct(o,r),a=e.orderedTooltipTicks,l=e.tooltipAxis,d=e.tooltipTicks,f=gnt(s,a,d,l);if(f>=0&&d){var p=d[f]&&d[f].value,g=t4(e,n,f,p),v=eut(r,a,f,o);return{activeTooltipIndex:f,activeLabel:p,activePayload:g,activeCoordinate:v}}return null},tut=function(e,n){var r=n.axes,i=n.graphicalItems,o=n.axisType,s=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,d=n.dataEndIndex,f=e.layout,p=e.children,g=e.stackOffset,v=kle(f,o);return r.reduce(function(x,b){var S,M=b.props,T=M.type,C=M.dataKey,k=M.allowDataOverflow,O=M.allowDuplicatedCategory,D=M.scale,B=M.ticks,U=M.includeHidden,J=b.props[s];if(x[J])return x;var V=RO(e.data,{graphicalItems:i.filter(function(Ge){return Ge.props[s]===J}),dataStartIndex:l,dataEndIndex:d}),X=V.length,oe,pe,re;Pct(b.props.domain,k,T)&&(oe=SB(b.props.domain,null,k),v&&(T==="number"||D!=="auto")&&(re=$S(V,C,"category")));var he=Ece(T);if(!oe||oe.length===0){var ue,be=(ue=b.props.domain)!==null&&ue!==void 0?ue:he;if(C){if(oe=$S(V,C,T),T==="category"&&v){var ie=aVe(oe);O&&ie?(pe=oe,oe=BI(0,X)):O||(oe=kY(be,oe,b).reduce(function(Ge,dt){return Ge.indexOf(dt)>=0?Ge:[].concat(Xb(Ge),[dt])},[]))}else if(T==="category")O?oe=oe.filter(function(Ge){return Ge!==""&&!ri(Ge)}):oe=kY(be,oe,b).reduce(function(Ge,dt){return Ge.indexOf(dt)>=0||dt===""||ri(dt)?Ge:[].concat(Xb(Ge),[dt])},[]);else if(T==="number"){var ve=bnt(V,i.filter(function(Ge){return Ge.props[s]===J&&(U||!Ge.props.hide)}),C,o,f);ve&&(oe=ve)}v&&(T==="number"||D!=="auto")&&(re=$S(V,C,"category"))}else v?oe=BI(0,X):a&&a[J]&&a[J].hasStack&&T==="number"?oe=g==="expand"?[0,1]:Ole(a[J].stackGroups,l,d):oe=Ile(V,i.filter(function(Ge){return Ge.props[s]===J&&(U||!Ge.props.hide)}),T,f,!0);if(T==="number")oe=JB(p,oe,J,o,B),be&&(oe=SB(be,oe,k));else if(T==="category"&&be){var Ee=be,Ne=oe.every(function(Ge){return Ee.indexOf(Ge)>=0});Ne&&(oe=Ee)}}return nn(nn({},x),{},xr({},J,nn(nn({},b.props),{},{axisType:o,domain:oe,categoricalDomain:re,duplicateDomain:pe,originalDomain:(S=b.props.domain)!==null&&S!==void 0?S:he,isCategorical:v,layout:f})))},{})},nut=function(e,n){var r=n.graphicalItems,i=n.Axis,o=n.axisType,s=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,d=n.dataEndIndex,f=e.layout,p=e.children,g=RO(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:d}),v=g.length,x=kle(f,o),b=-1;return r.reduce(function(S,M){var T=M.props[s],C=Ece("number");if(!S[T]){b++;var k;return x?k=BI(0,v):a&&a[T]&&a[T].hasStack?(k=Ole(a[T].stackGroups,l,d),k=JB(p,k,T,o)):(k=SB(C,Ile(g,r.filter(function(O){return O.props[s]===T&&!O.props.hide}),"number",f),i.defaultProps.allowDataOverflow),k=JB(p,k,T,o)),nn(nn({},S),{},xr({},T,nn(nn({axisType:o},i.defaultProps),{},{hide:!0,orientation:md(Zct,"".concat(o,".").concat(b%2),null),domain:k,originalDomain:C,isCategorical:x,layout:f})))}return S},{})},rut=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,o=n.AxisComp,s=n.graphicalItems,a=n.stackGroups,l=n.dataStartIndex,d=n.dataEndIndex,f=e.children,p="".concat(i,"Id"),g=gd(f,o),v={};return g&&g.length?v=tut(e,{axes:g,graphicalItems:s,axisType:i,axisIdKey:p,stackGroups:a,dataStartIndex:l,dataEndIndex:d}):s&&s.length&&(v=nut(e,{Axis:o,graphicalItems:s,axisType:i,axisIdKey:p,stackGroups:a,dataStartIndex:l,dataEndIndex:d})),v},iut=function(e){var n=Ng(e),r=qp(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:JU(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:II(n,r)}},nK=function(e){var n=e.children,r=e.defaultShowTooltip,i=Zc(n,Vb),o=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},out=function(e){return!e||!e.length?!1:e.some(function(n){var r=em(n&&n.type);return r&&r.indexOf("Bar")>=0})},rK=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},sut=function(e,n){var r=e.props,i=e.graphicalItems,o=e.xAxisMap,s=o===void 0?{}:o,a=e.yAxisMap,l=a===void 0?{}:a,d=r.width,f=r.height,p=r.children,g=r.margin||{},v=Zc(p,Vb),x=Zc(p,Db),b=Object.keys(l).reduce(function(O,D){var B=l[D],U=B.orientation;return!B.mirror&&!B.hide?nn(nn({},O),{},xr({},U,O[U]+B.width)):O},{left:g.left||0,right:g.right||0}),S=Object.keys(s).reduce(function(O,D){var B=s[D],U=B.orientation;return!B.mirror&&!B.hide?nn(nn({},O),{},xr({},U,md(O,"".concat(U))+B.height)):O},{top:g.top||0,bottom:g.bottom||0}),M=nn(nn({},S),b),T=M.bottom;v&&(M.bottom+=v.props.height||Vb.defaultProps.height),x&&n&&(M=_nt(M,i,r,n));var C=d-M.left-M.right,k=f-M.top-M.bottom;return nn(nn({brushBottom:T},M),{},{width:Math.max(C,0),height:Math.max(k,0)})},aut=function(e){var n,r=e.chartName,i=e.GraphicalChild,o=e.defaultTooltipEventType,s=o===void 0?"axis":o,a=e.validateTooltipEventTypes,l=a===void 0?["axis"]:a,d=e.axisComponents,f=e.legendContent,p=e.formatAxisMap,g=e.defaultProps,v=function(S,M){var T=M.graphicalItems,C=M.stackGroups,k=M.offset,O=M.updateId,D=M.dataStartIndex,B=M.dataEndIndex,U=S.barSize,J=S.layout,V=S.barGap,X=S.barCategoryGap,oe=S.maxBarSize,pe=rK(J),re=pe.numericAxisName,he=pe.cateAxisName,ue=out(T),be=ue&&ynt({barSize:U,stackGroups:C}),ie=[];return T.forEach(function(ve,Ee){var Ne=RO(S.data,{graphicalItems:[ve],dataStartIndex:D,dataEndIndex:B}),Ge=ve.props,dt=Ge.dataKey,Ue=Ge.maxBarSize,st=ve.props["".concat(re,"Id")],lt=ve.props["".concat(he,"Id")],Rt={},Lt=d.reduce(function(Ut,Pe){var _e=M["".concat(Pe.axisType,"Map")],Mt=ve.props["".concat(Pe.axisType,"Id")];_e&&_e[Mt]||Pe.axisType==="zAxis"||A0(!1);var wt=_e[Mt];return nn(nn({},Ut),{},xr(xr({},Pe.axisType,wt),"".concat(Pe.axisType,"Ticks"),qp(wt)))},Rt),Fe=Lt[he],at=Lt["".concat(he,"Ticks")],nt=C&&C[st]&&C[st].hasStack&&Ont(ve,C[st].stackGroups),ge=em(ve.type).indexOf("Bar")>=0,tt=II(Fe,at),rt=[];if(ge){var vt,Tt,We=ri(Ue)?oe:Ue,Vt=(vt=(Tt=II(Fe,at,!0))!==null&&Tt!==void 0?Tt:We)!==null&&vt!==void 0?vt:0;rt=vnt({barGap:V,barCategoryGap:X,bandSize:Vt!==tt?Vt:tt,sizeList:be[lt],maxBarSize:We}),Vt!==tt&&(rt=rt.map(function(Ut){return nn(nn({},Ut),{},{position:nn(nn({},Ut.position),{},{offset:Ut.position.offset-Vt/2})})}))}var sn=ve&&ve.type&&ve.type.getComposedData;sn&&ie.push({props:nn(nn({},sn(nn(nn({},Lt),{},{displayedData:Ne,props:S,dataKey:dt,item:ve,bandSize:tt,barPosition:rt,offset:k,stackedData:nt,layout:J,dataStartIndex:D,dataEndIndex:B}))),{},xr(xr(xr({key:ve.key||"item-".concat(Ee)},re,Lt[re]),he,Lt[he]),"animationId",O)),childIndex:_Ve(ve,S.children),item:ve})}),ie},x=function(S,M){var T=S.props,C=S.dataStartIndex,k=S.dataEndIndex,O=S.updateId;if(!_7({props:T}))return null;var D=T.children,B=T.layout,U=T.stackOffset,J=T.data,V=T.reverseStackOrder,X=rK(B),oe=X.numericAxisName,pe=X.cateAxisName,re=gd(D,i),he=Int(J,re,"".concat(oe,"Id"),"".concat(pe,"Id"),U,V),ue=d.reduce(function(Ne,Ge){var dt="".concat(Ge.axisType,"Map");return nn(nn({},Ne),{},xr({},dt,rut(T,nn(nn({},Ge),{},{graphicalItems:re,stackGroups:Ge.axisType===oe&&he,dataStartIndex:C,dataEndIndex:k}))))},{}),be=sut(nn(nn({},ue),{},{props:T,graphicalItems:re}),M==null?void 0:M.legendBBox);Object.keys(ue).forEach(function(Ne){ue[Ne]=p(T,ue[Ne],be,Ne.replace("Map",""),r)});var ie=ue["".concat(pe,"Map")],ve=iut(ie),Ee=v(T,nn(nn({},ue),{},{dataStartIndex:C,dataEndIndex:k,updateId:O,graphicalItems:re,stackGroups:he,offset:be}));return nn(nn({formattedGraphicalItems:Ee,graphicalItems:re,offset:be,stackGroups:he},ve),ue)};return n=function(b){Gct(S,b);function S(M){var T,C,k;return Uct(this,S),k=Wct(this,S,[M]),xr(ui(k),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),xr(ui(k),"accessibilityManager",new Act),xr(ui(k),"handleLegendBBoxUpdate",function(O){if(O){var D=k.state,B=D.dataStartIndex,U=D.dataEndIndex,J=D.updateId;k.setState(nn({legendBBox:O},x({props:k.props,dataStartIndex:B,dataEndIndex:U,updateId:J},nn(nn({},k.state),{},{legendBBox:O}))))}}),xr(ui(k),"handleReceiveSyncEvent",function(O,D,B){if(k.props.syncId===O){if(B===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(D)}}),xr(ui(k),"handleBrushChange",function(O){var D=O.startIndex,B=O.endIndex;if(D!==k.state.dataStartIndex||B!==k.state.dataEndIndex){var U=k.state.updateId;k.setState(function(){return nn({dataStartIndex:D,dataEndIndex:B},x({props:k.props,dataStartIndex:D,dataEndIndex:B,updateId:U},k.state))}),k.triggerSyncEvent({dataStartIndex:D,dataEndIndex:B})}}),xr(ui(k),"handleMouseEnter",function(O){var D=k.getMouseInfo(O);if(D){var B=nn(nn({},D),{},{isTooltipActive:!0});k.setState(B),k.triggerSyncEvent(B);var U=k.props.onMouseEnter;qr(U)&&U(B,O)}}),xr(ui(k),"triggeredAfterMouseMove",function(O){var D=k.getMouseInfo(O),B=D?nn(nn({},D),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(B),k.triggerSyncEvent(B);var U=k.props.onMouseMove;qr(U)&&U(B,O)}),xr(ui(k),"handleItemMouseEnter",function(O){k.setState(function(){return{isTooltipActive:!0,activeItem:O,activePayload:O.tooltipPayload,activeCoordinate:O.tooltipPosition||{x:O.cx,y:O.cy}}})}),xr(ui(k),"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),xr(ui(k),"handleMouseMove",function(O){O.persist(),k.throttleTriggeredAfterMouseMove(O)}),xr(ui(k),"handleMouseLeave",function(O){k.throttleTriggeredAfterMouseMove.cancel();var D={isTooltipActive:!1};k.setState(D),k.triggerSyncEvent(D);var B=k.props.onMouseLeave;qr(B)&&B(D,O)}),xr(ui(k),"handleOuterEvent",function(O){var D=vVe(O),B=md(k.props,"".concat(D));if(D&&qr(B)){var U,J;/.*touch.*/i.test(D)?J=k.getMouseInfo(O.changedTouches[0]):J=k.getMouseInfo(O),B((U=J)!==null&&U!==void 0?U:{},O)}}),xr(ui(k),"handleClick",function(O){var D=k.getMouseInfo(O);if(D){var B=nn(nn({},D),{},{isTooltipActive:!0});k.setState(B),k.triggerSyncEvent(B);var U=k.props.onClick;qr(U)&&U(B,O)}}),xr(ui(k),"handleMouseDown",function(O){var D=k.props.onMouseDown;if(qr(D)){var B=k.getMouseInfo(O);D(B,O)}}),xr(ui(k),"handleMouseUp",function(O){var D=k.props.onMouseUp;if(qr(D)){var B=k.getMouseInfo(O);D(B,O)}}),xr(ui(k),"handleTouchMove",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(O.changedTouches[0])}),xr(ui(k),"handleTouchStart",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&k.handleMouseDown(O.changedTouches[0])}),xr(ui(k),"handleTouchEnd",function(O){O.changedTouches!=null&&O.changedTouches.length>0&&k.handleMouseUp(O.changedTouches[0])}),xr(ui(k),"triggerSyncEvent",function(O){k.props.syncId!==void 0&&Y3.emit(X3,k.props.syncId,O,k.eventEmitterSymbol)}),xr(ui(k),"applySyncEvent",function(O){var D=k.props,B=D.layout,U=D.syncMethod,J=k.state.updateId,V=O.dataStartIndex,X=O.dataEndIndex;if(O.dataStartIndex!==void 0||O.dataEndIndex!==void 0)k.setState(nn({dataStartIndex:V,dataEndIndex:X},x({props:k.props,dataStartIndex:V,dataEndIndex:X,updateId:J},k.state)));else if(O.activeTooltipIndex!==void 0){var oe=O.chartX,pe=O.chartY,re=O.activeTooltipIndex,he=k.state,ue=he.offset,be=he.tooltipTicks;if(!ue)return;if(typeof U=="function")re=U(be,O);else if(U==="value"){re=-1;for(var ie=0;ie<be.length;ie++)if(be[ie].value===O.activeLabel){re=ie;break}}var ve=nn(nn({},ue),{},{x:ue.left,y:ue.top}),Ee=Math.min(oe,ve.x+ve.width),Ne=Math.min(pe,ve.y+ve.height),Ge=be[re]&&be[re].value,dt=t4(k.state,k.props.data,re),Ue=be[re]?{x:B==="horizontal"?be[re].coordinate:Ee,y:B==="horizontal"?Ne:be[re].coordinate}:Mce;k.setState(nn(nn({},O),{},{activeLabel:Ge,activeCoordinate:Ue,activePayload:dt,activeTooltipIndex:re}))}else k.setState(O)}),xr(ui(k),"renderCursor",function(O){var D,B=k.state,U=B.isTooltipActive,J=B.activeCoordinate,V=B.activePayload,X=B.offset,oe=B.activeTooltipIndex,pe=B.tooltipAxisBandSize,re=k.getTooltipEventType(),he=(D=O.props.active)!==null&&D!==void 0?D:U,ue=k.props.layout,be=O.key||"_recharts-cursor";return Ze.createElement(Dct,{key:be,activeCoordinate:J,activePayload:V,activeTooltipIndex:oe,chartName:r,element:O,isActive:he,layout:ue,offset:X,tooltipAxisBandSize:pe,tooltipEventType:re})}),xr(ui(k),"renderPolarAxis",function(O,D,B){var U=md(O,"type.axisType"),J=md(k.state,"".concat(U,"Map")),V=J&&J[O.props["".concat(U,"Id")]];return W.cloneElement(O,nn(nn({},V),{},{className:U,key:O.key||"".concat(D,"-").concat(B),ticks:qp(V,!0)}))}),xr(ui(k),"renderPolarGrid",function(O){var D=O.props,B=D.radialLines,U=D.polarAngles,J=D.polarRadius,V=k.state,X=V.radiusAxisMap,oe=V.angleAxisMap,pe=Ng(X),re=Ng(oe),he=re.cx,ue=re.cy,be=re.innerRadius,ie=re.outerRadius;return W.cloneElement(O,{polarAngles:Array.isArray(U)?U:qp(re,!0).map(function(ve){return ve.coordinate}),polarRadius:Array.isArray(J)?J:qp(pe,!0).map(function(ve){return ve.coordinate}),cx:he,cy:ue,innerRadius:be,outerRadius:ie,key:O.key||"polar-grid",radialLines:B})}),xr(ui(k),"renderLegend",function(){var O=k.state.formattedGraphicalItems,D=k.props,B=D.children,U=D.width,J=D.height,V=k.props.margin||{},X=U-(V.left||0)-(V.right||0),oe=Ale({children:B,formattedGraphicalItems:O,legendWidth:X,legendContent:f});if(!oe)return null;var pe=oe.item,re=JX(oe,Nct);return W.cloneElement(pe,nn(nn({},re),{},{chartWidth:U,chartHeight:J,margin:V,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),xr(ui(k),"renderTooltip",function(){var O,D=k.props,B=D.children,U=D.accessibilityLayer,J=Zc(B,ff);if(!J)return null;var V=k.state,X=V.isTooltipActive,oe=V.activeCoordinate,pe=V.activePayload,re=V.activeLabel,he=V.offset,ue=(O=J.props.active)!==null&&O!==void 0?O:X;return W.cloneElement(J,{viewBox:nn(nn({},he),{},{x:he.left,y:he.top}),active:ue,label:re,payload:ue?pe:[],coordinate:oe,accessibilityLayer:U})}),xr(ui(k),"renderBrush",function(O){var D=k.props,B=D.margin,U=D.data,J=k.state,V=J.offset,X=J.dataStartIndex,oe=J.dataEndIndex,pe=J.updateId;return W.cloneElement(O,{key:O.key||"_recharts-brush",onChange:dC(k.handleBrushChange,O.props.onChange),data:U,x:Cn(O.props.x)?O.props.x:V.left,y:Cn(O.props.y)?O.props.y:V.top+V.height+V.brushBottom-(B.bottom||0),width:Cn(O.props.width)?O.props.width:V.width,startIndex:X,endIndex:oe,updateId:"brush-".concat(pe)})}),xr(ui(k),"renderReferenceElement",function(O,D,B){if(!O)return null;var U=ui(k),J=U.clipPathId,V=k.state,X=V.xAxisMap,oe=V.yAxisMap,pe=V.offset,re=O.props,he=re.xAxisId,ue=re.yAxisId;return W.cloneElement(O,{key:O.key||"".concat(D,"-").concat(B),xAxis:X[he],yAxis:oe[ue],viewBox:{x:pe.left,y:pe.top,width:pe.width,height:pe.height},clipPathId:J})}),xr(ui(k),"renderActivePoints",function(O){var D=O.item,B=O.activePoint,U=O.basePoint,J=O.childIndex,V=O.isRange,X=[],oe=D.props.key,pe=D.item.props,re=pe.activeDot,he=pe.dataKey,ue=nn(nn({index:J,dataKey:he,cx:B.x,cy:B.y,r:4,fill:S6(D.item),strokeWidth:2,stroke:"#fff",payload:B.payload,value:B.value,key:"".concat(oe,"-activePoint-").concat(J)},ni(re,!1)),nI(re));return X.push(S.renderActiveDot(re,ue)),U?X.push(S.renderActiveDot(re,nn(nn({},ue),{},{cx:U.x,cy:U.y,key:"".concat(oe,"-basePoint-").concat(J)}))):V&&X.push(null),X}),xr(ui(k),"renderGraphicChild",function(O,D,B){var U=k.filterFormatItem(O,D,B);if(!U)return null;var J=k.getTooltipEventType(),V=k.state,X=V.isTooltipActive,oe=V.tooltipAxis,pe=V.activeTooltipIndex,re=V.activeLabel,he=k.props.children,ue=Zc(he,ff),be=U.props,ie=be.points,ve=be.isRange,Ee=be.baseLine,Ne=U.item.props,Ge=Ne.activeDot,dt=Ne.hide,Ue=Ne.activeBar,st=Ne.activeShape,lt=!!(!dt&&X&&ue&&(Ge||Ue||st)),Rt={};J!=="axis"&&ue&&ue.props.trigger==="click"?Rt={onClick:dC(k.handleItemMouseEnter,O.props.onClick)}:J!=="axis"&&(Rt={onMouseLeave:dC(k.handleItemMouseLeave,O.props.onMouseLeave),onMouseEnter:dC(k.handleItemMouseEnter,O.props.onMouseEnter)});var Lt=W.cloneElement(O,nn(nn({},U.props),Rt));function Fe(Pe){return typeof oe.dataKey=="function"?oe.dataKey(Pe.payload):null}if(lt)if(pe>=0){var at,nt;if(oe.dataKey&&!oe.allowDuplicatedCategory){var ge=typeof oe.dataKey=="function"?Fe:"payload.".concat(oe.dataKey.toString());at=tI(ie,ge,re),nt=ve&&Ee&&tI(Ee,ge,re)}else at=ie==null?void 0:ie[pe],nt=ve&&Ee&&Ee[pe];if(st||Ue){var tt=O.props.activeIndex!==void 0?O.props.activeIndex:pe;return[W.cloneElement(O,nn(nn(nn({},U.props),Rt),{},{activeIndex:tt})),null,null]}if(!ri(at))return[Lt].concat(Xb(k.renderActivePoints({item:U,activePoint:at,basePoint:nt,childIndex:pe,isRange:ve})))}else{var rt,vt=(rt=k.getItemByXY(k.state.activeCoordinate))!==null&&rt!==void 0?rt:{graphicalItem:Lt},Tt=vt.graphicalItem,We=Tt.item,Vt=We===void 0?O:We,sn=Tt.childIndex,Ut=nn(nn(nn({},U.props),Rt),{},{activeIndex:sn});return[W.cloneElement(Vt,Ut),null,null]}return ve?[Lt,null,null]:[Lt,null]}),xr(ui(k),"renderCustomized",function(O,D,B){return W.cloneElement(O,nn(nn({key:"recharts-customized-".concat(B)},k.props),k.state))}),xr(ui(k),"renderMap",{CartesianGrid:{handler:gC,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:gC},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:gC},YAxis:{handler:gC},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((T=M.id)!==null&&T!==void 0?T:EE("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=Aae(k.triggeredAfterMouseMove,(C=M.throttleDelay)!==null&&C!==void 0?C:1e3/60),k.state={},k}return Vct(S,[{key:"componentDidMount",value:function(){var T,C;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(T=this.props.margin.left)!==null&&T!==void 0?T:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var T=this.props,C=T.children,k=T.data,O=T.height,D=T.layout,B=Zc(C,ff);if(B){var U=B.props.defaultIndex;if(!(typeof U!="number"||U<0||U>this.state.tooltipTicks.length)){var J=this.state.tooltipTicks[U]&&this.state.tooltipTicks[U].value,V=t4(this.state,k,U,J),X=this.state.tooltipTicks[U].coordinate,oe=(this.state.offset.top+O)/2,pe=D==="horizontal",re=pe?{x:X,y:oe}:{y:X,x:oe},he=this.state.formattedGraphicalItems.find(function(be){var ie=be.item;return ie.type.name==="Scatter"});he&&(re=nn(nn({},re),he.props.points[U].tooltipPosition),V=he.props.points[U].tooltipPayload);var ue={activeTooltipIndex:U,isTooltipActive:!0,activeLabel:J,activePayload:V,activeCoordinate:re};this.setState(ue),this.renderCursor(B),this.accessibilityManager.setIndex(U)}}}},{key:"getSnapshotBeforeUpdate",value:function(T,C){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==C.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==T.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==T.margin){var k,O;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(O=this.props.margin.top)!==null&&O!==void 0?O:0}})}return null}},{key:"componentDidUpdate",value:function(T){jF([Zc(T.children,ff)],[Zc(this.props.children,ff)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var T=Zc(this.props.children,ff);if(T&&typeof T.props.shared=="boolean"){var C=T.props.shared?"axis":"item";return l.indexOf(C)>=0?C:s}return s}},{key:"getMouseInfo",value:function(T){if(!this.container)return null;var C=this.container,k=C.getBoundingClientRect(),O=jZe(k),D={chartX:Math.round(T.pageX-O.left),chartY:Math.round(T.pageY-O.top)},B=k.width/C.offsetWidth||1,U=this.inRange(D.chartX,D.chartY,B);if(!U)return null;var J=this.state,V=J.xAxisMap,X=J.yAxisMap,oe=this.getTooltipEventType();if(oe!=="axis"&&V&&X){var pe=Ng(V).scale,re=Ng(X).scale,he=pe&&pe.invert?pe.invert(D.chartX):null,ue=re&&re.invert?re.invert(D.chartY):null;return nn(nn({},D),{},{xValue:he,yValue:ue})}var be=tK(this.state,this.props.data,this.props.layout,U);return be?nn(nn({},D),be):null}},{key:"inRange",value:function(T,C){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,O=this.props.layout,D=T/k,B=C/k;if(O==="horizontal"||O==="vertical"){var U=this.state.offset,J=D>=U.left&&D<=U.left+U.width&&B>=U.top&&B<=U.top+U.height;return J?{x:D,y:B}:null}var V=this.state,X=V.angleAxisMap,oe=V.radiusAxisMap;if(X&&oe){var pe=Ng(X);return LY({x:D,y:B},pe)}return null}},{key:"parseEventsOfWrapper",value:function(){var T=this.props.children,C=this.getTooltipEventType(),k=Zc(T,ff),O={};k&&C==="axis"&&(k.props.trigger==="click"?O={onClick:this.handleClick}:O={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var D=nI(this.props,this.handleOuterEvent);return nn(nn({},D),O)}},{key:"addListener",value:function(){Y3.on(X3,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Y3.removeListener(X3,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(T,C,k){for(var O=this.state.formattedGraphicalItems,D=0,B=O.length;D<B;D++){var U=O[D];if(U.item===T||U.props.key===T.key||C===em(U.item.type)&&k===U.childIndex)return U}return null}},{key:"renderClipPath",value:function(){var T=this.clipPathId,C=this.state.offset,k=C.left,O=C.top,D=C.height,B=C.width;return Ze.createElement("defs",null,Ze.createElement("clipPath",{id:T},Ze.createElement("rect",{x:k,y:O,height:D,width:B})))}},{key:"getXScales",value:function(){var T=this.state.xAxisMap;return T?Object.entries(T).reduce(function(C,k){var O=ZX(k,2),D=O[0],B=O[1];return nn(nn({},C),{},xr({},D,B.scale))},{}):null}},{key:"getYScales",value:function(){var T=this.state.yAxisMap;return T?Object.entries(T).reduce(function(C,k){var O=ZX(k,2),D=O[0],B=O[1];return nn(nn({},C),{},xr({},D,B.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(T){var C;return(C=this.state.xAxisMap)===null||C===void 0||(C=C[T])===null||C===void 0?void 0:C.scale}},{key:"getYScaleByAxisId",value:function(T){var C;return(C=this.state.yAxisMap)===null||C===void 0||(C=C[T])===null||C===void 0?void 0:C.scale}},{key:"getItemByXY",value:function(T){var C=this.state,k=C.formattedGraphicalItems,O=C.activeItem;if(k&&k.length)for(var D=0,B=k.length;D<B;D++){var U=k[D],J=U.props,V=U.item,X=em(V.type);if(X==="Bar"){var oe=(J.data||[]).find(function(ue){return lot(T,ue)});if(oe)return{graphicalItem:U,payload:oe}}else if(X==="RadialBar"){var pe=(J.data||[]).find(function(ue){return LY(T,ue)});if(pe)return{graphicalItem:U,payload:pe}}else if(CO(U,O)||AO(U,O)||aM(U,O)){var re=dst({graphicalItem:U,activeTooltipItem:O,itemData:V.props.data}),he=V.props.activeIndex===void 0?re:V.props.activeIndex;return{graphicalItem:nn(nn({},U),{},{childIndex:he}),payload:aM(U,O)?V.props.data[re]:U.props.data[re]}}}return null}},{key:"render",value:function(){var T=this,C;if(!_7(this))return null;var k=this.props,O=k.children,D=k.className,B=k.width,U=k.height,J=k.style,V=k.compact,X=k.title,oe=k.desc,pe=JX(k,zct),re=ni(pe,!1);if(V)return Ze.createElement(OX,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ze.createElement(VF,VS({},re,{width:B,height:U,title:X,desc:oe}),this.renderClipPath(),b7(O,this.renderMap)));if(this.props.accessibilityLayer){var he,ue;re.tabIndex=(he=this.props.tabIndex)!==null&&he!==void 0?he:0,re.role=(ue=this.props.role)!==null&&ue!==void 0?ue:"application",re.onKeyDown=function(ie){T.accessibilityManager.keyboardEvent(ie)},re.onFocus=function(){T.accessibilityManager.focus()}}var be=this.parseEventsOfWrapper();return Ze.createElement(OX,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ze.createElement("div",VS({className:qt("recharts-wrapper",D),style:nn({position:"relative",cursor:"default",width:B,height:U},J)},be,{ref:function(ve){T.container=ve},role:(C=re.role)!==null&&C!==void 0?C:"region"}),Ze.createElement(VF,VS({},re,{width:B,height:U,title:X,desc:oe,style:Jct}),this.renderClipPath(),b7(O,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}]),S}(W.Component),xr(n,"displayName",r),xr(n,"defaultProps",nn({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},g)),xr(n,"getDerivedStateFromProps",function(b,S){var M=b.dataKey,T=b.data,C=b.children,k=b.width,O=b.height,D=b.layout,B=b.stackOffset,U=b.margin,J=S.dataStartIndex,V=S.dataEndIndex;if(S.updateId===void 0){var X=nK(b);return nn(nn(nn({},X),{},{updateId:0},x(nn(nn({props:b},X),{},{updateId:0}),S)),{},{prevDataKey:M,prevData:T,prevWidth:k,prevHeight:O,prevLayout:D,prevStackOffset:B,prevMargin:U,prevChildren:C})}if(M!==S.prevDataKey||T!==S.prevData||k!==S.prevWidth||O!==S.prevHeight||D!==S.prevLayout||B!==S.prevStackOffset||!tb(U,S.prevMargin)){var oe=nK(b),pe={chartX:S.chartX,chartY:S.chartY,isTooltipActive:S.isTooltipActive},re=nn(nn({},tK(S,T,D)),{},{updateId:S.updateId+1}),he=nn(nn(nn({},oe),pe),re);return nn(nn(nn({},he),x(nn({props:b},he),S)),{},{prevDataKey:M,prevData:T,prevWidth:k,prevHeight:O,prevLayout:D,prevStackOffset:B,prevMargin:U,prevChildren:C})}if(!jF(C,S.prevChildren)){var ue,be,ie,ve,Ee=Zc(C,Vb),Ne=Ee&&(ue=(be=Ee.props)===null||be===void 0?void 0:be.startIndex)!==null&&ue!==void 0?ue:J,Ge=Ee&&(ie=(ve=Ee.props)===null||ve===void 0?void 0:ve.endIndex)!==null&&ie!==void 0?ie:V,dt=Ne!==J||Ge!==V,Ue=!ri(T),st=Ue&&!dt?S.updateId:S.updateId+1;return nn(nn({updateId:st},x(nn(nn({props:b},S),{},{updateId:st,dataStartIndex:Ne,dataEndIndex:Ge}),S)),{},{prevChildren:C,dataStartIndex:Ne,dataEndIndex:Ge})}return null}),xr(n,"renderActiveDot",function(b,S){var M;return W.isValidElement(b)?M=W.cloneElement(b,S):qr(b)?M=b(S):M=Ze.createElement(E6,S),Ze.createElement(ds,{className:"recharts-active-dot",key:S.key},M)}),n},lut=aut({chartName:"LineChart",GraphicalChild:qb,axisComponents:[{axisType:"xAxis",AxisComp:IO},{axisType:"yAxis",AxisComp:kO}],formatAxisMap:Lat});const cut=si(t=>({chart:{flexGrow:1,overflow:"hidden"},content:{height:"100%",flexGrow:1,alignItems:"stretch",display:"flex",flexDirection:"column",overflowY:"auto"}})),L6=()=>{const t=cut(),[e,n]=W.useState([]),[r,i]=W.useState([]),[o,s]=W.useState([]),a=Ze.createRef();a.current=o;const[l,d]=W.useState(-1),f=pr(k=>k.mission.route),[p,g]=W.useState(0),[v,x]=W.useState(0),[b,S]=W.useState(0);W.useEffect(()=>{console.log(e);const k=e.map(J=>J.data);console.log(k.flat());const O=k.flat().map(J=>J.elevation),D=k.flat().map(J=>J.uavheight?Number(J.uavheight):0);console.log(O),console.log(D);const B=Math.min(...O),U=Math.max(...D);console.log("value"+B+"max"+U),g(B),x(U),S(U-B)},[e]);const M=k=>{let O=[];return k.length>0&&k.forEach(D=>{let B=[];D.wp.forEach(U=>{B.push([U.pos[0],U.pos[1],U.pos[2]])}),O.push(B)}),O};async function T(){if(console.log("--------------   LLAMANDO A ELEVATION"),f.length>0){let k=JSON.parse(JSON.stringify(f)),O=k.map(U=>U.id),D=M(k);i(D);let B;try{const U=await fetch("/api/map/elevation",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({routes:D})});if(U.ok)B=await U.json();else throw new Error(U.status)}catch(U){console.log(U)}if(B.status){let U=B.elevation.map((J,V)=>({name:"RT"+V,data:J,color:hy.colors_devices[O[V]]}));d(-1),s(U)}else console.log("no get elevation of point")}}W.useEffect(()=>{console.log("mission Elevation")},[]),W.useEffect(()=>{let k=!1,O=M(f);if(console.log("update elevation"),O.length>r.length)console.log("ruta mayour"),O[+O.length+-1].length>0?k=!0:i(O);else if(O.length<r.length){console.log(" se ha eliminado  una ruta");let D=[],B=[];r.map((U,J)=>{let V=!1;O.map(X=>{JSON.stringify(U)===JSON.stringify(X)&&(V=!0)}),V&&(D.push(U),B.push(a.current[J]))}),s(B),i(D)}else{console.log("ruta de la misma longitud");for(let D=0;D<O.length;D=D+1)if(JSON.stringify(O[D])!=JSON.stringify(r[D])){console.log("latitude longitude no equals");let B=r[D].map(J=>[J[0],J[1]]),U=O[D].map(J=>[J[0],J[1]]);if(JSON.stringify(B)===JSON.stringify(U)){for(let J=0;J<r[D].length;J=J+1)if(r[D][J][2]!==O[D][J][2]){console.log("diferent elevation");let V=JSON.parse(JSON.stringify(a.current));for(let X=0;X<V[D].data.length;X=X+1)V[D].data[X].hasOwnProperty("wp")&&V[D].data[X].wp==J&&(console.log("encontrado elev profile wp"),V[D].data[X].uavheight=+V[D].data[X].uavheight-+V[D].data[X].uav+ +O[D][J][2],V[D].data[X].uav=+O[D][J][2]);console.log(V),s(V)}i(O);break}else{console.log("nuevas posiciones"),k=!0;break}}}k&&T()},[f]),W.useEffect(()=>{l==-1?n(o):n([o[l]])},[l,o]);const C=({active:k,payload:O,label:D})=>{if(k&&O&&O.length){let B=[O[0].payload];return B[0].color=O[0].color,O.map(U=>{let J=!0;B.map(V=>{U.payload.rt==V.rt&&(J=!1)}),U.payload.color=U.color,J&&B.push(U.payload)}),B[0].uavheight?F.jsxs("div",{style:{background:"#FFFFFF"},children:[F.jsx("div",{children:`distancia ${D} m `}),B.map(U=>F.jsxs(W.Fragment,{children:[F.jsx("div",{style:{color:U.color,fontSize:16},children:`Ruta ${U.rt} - wp ${U.wp}`},`tr${U.rt}`),F.jsx("div",{style:{color:U.color,fontSize:16},children:`Terreno:${U.elevation} - UAV: ${U.uavheight}`},`dr${U.rt}`)]},"s-"+U.rt))]}):F.jsxs("div",{style:{background:"#FFFFFF"},children:[F.jsx("div",{children:`distancia ${D} m `}),B.map(U=>F.jsxs(W.Fragment,{children:[F.jsx("div",{style:{color:U.color,fontSize:16},children:`Ruta ${U.rt}`},`tr${U.rt}`),F.jsx("div",{style:{color:U.color,fontSize:16},children:`Terreno:${U.elevation} `},`dr${U.rt}`)]},"s-"+U.rt))]})}return null};return F.jsxs("div",{className:t.content,children:[F.jsxs(hs,{style:{display:"flex",margin:"10px",alignItems:"center"},children:[F.jsx("a",{style:{marginInline:"20px"},children:"Elevation Profile"}),F.jsxs(sE,{children:[F.jsx(aE,{id:"demo-simple-select-label",children:"Route"}),F.jsxs(lE,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:l,label:"Elevation Profile",onChange:k=>d(k.target.value),children:[F.jsx(au,{value:-1,children:"All Routes"}),o.map((k,O,D)=>F.jsx(au,{value:O,children:`Route${O}`},`sel${O}`))]})]})]}),e.length>0&&F.jsx("div",{className:t.chart,children:F.jsx(LZe,{width:"100%",height:"100%",children:F.jsxs(lut,{data:e,margin:{top:10,right:40,left:0,bottom:10},children:[F.jsx(IO,{dataKey:"length",type:"number",domain:["dataMin","dataMax"]}),F.jsx(kO,{type:"number",tickFormatter:k=>k.toFixed(2),domain:[p-b/5,v+b/5]}),F.jsx(mce,{strokeDasharray:"3 3"}),F.jsx(ff,{content:F.jsx(C,{})}),F.jsx(Db,{}),e.map((k,O,D)=>F.jsxs(W.Fragment,{children:[F.jsx(qb,{type:"monotone",dataKey:"elevation",data:k.data,name:k.name,stroke:k.color,activeDot:{r:8,onClick:(B,U)=>{console.log(U);let J=`https://www.google.com/maps?q=${U.payload.lat},${U.payload.lng}`;window.open(J,"_blank")}}},k.name),F.jsx(qb,{connectNulls:!0,dataKey:"uavheight",data:k.data,name:k.name+"-v",stroke:k.color,strokeDasharray:"5 5",activeDot:{onClick:(B,U)=>{console.log(U)}}},k.name+"-v")]},"s-"+O))]})})})]})},uut=si(t=>({card:{pointerEvents:"auto",width:"500px",height:"180px"},media:{height:t.dimensions.popupImageHeight,display:"flex",justifyContent:"flex-end",alignItems:"flex-start"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},content:{paddingTop:"15px",paddingBottom:t.spacing(1)},negative:{color:t.palette.colors.negative},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},table:{"& .MuiTableCell-sizeSmall":{paddingLeft:0,paddingRight:0}},cell:{borderBottom:"none"},actions:{justifyContent:"center"},root:{pointerEvents:"none",position:"fixed",zIndex:6,left:"50%",top:"40%",transform:"translateX(-50%)"}})),Tce=({SetOpenSave:t,OpenSave:e})=>{const n=uut(),r=pr(f=>f.mission),[i,o]=W.useState("yaml"),[s,a]=W.useState(r.name),l=async()=>{let f,p="text/plain";if(i=="yaml"){let b={version:"3"};b.name=r.name,b.route=r.route,f=YP.stringify(b)}if(i=="kml"){p="application/xml";let b=`<?xml version="1.0" encoding="UTF-8"?>
`;b+=`<kml>
`,b+=`<Document>
`,r.route.map((M,T,C)=>{b+=`<Style id="sn_ylw-pushpin1${T}">
`,b+=`<LineStyle>
`,b+=`<color>ff${hy.colors_devices[T].substr(-6)}</color>
`,b+=`<width>3</width>
`,b+=`</LineStyle>
`,b+=`</Style>
`});let S=[];for(const M of r.route)if(M.wp.length){let T=await fetch(`/api/map/elevation?locations=[[${M.wp[0].pos[0]},${M.wp[0].pos[1]}]]`);if(T.ok){let C=await T.json();S.push(C.results[0].elevation)}else S.push(0)}else S.push(0);r.route.map((M,T)=>{b+=`<Placemark>
`,b+=`<name>${M.uav}-${M.name}</name>
`,b+=`<styleUrl>#sn_ylw-pushpin1${T}</styleUrl>
`,b+=`<open>1</open>
`,b+=`<LineString>
`;let C="";M.wp.map(k=>{C=C+k.pos[1]+","+k.pos[0]+","+(+k.pos[2]+ +S[T])+" "}),b+=`<tessellate>1</tessellate>
`,b+=`<altitudeMode>absolute</altitudeMode>
`,b+=`<coordinates>
`,b+=C+`
`,b+=`</coordinates>
`,b+=`</LineString>
`,b+=`</Placemark>
`}),b+=`</Document>
`,b+="</kml>",f=b}if(i=="plan"){p="application/json";let b={fileType:"Plan"};b.geoFence={circles:[],polygons:[],version:2},b.groundStation="QGroundControl",b.mission={},b.mission.cruiseSpeed=r.route[0].attributes.idle_vel,b.mission.firmwareType=12,b.mission.globalPlanAltitudeMode=0,b.mission.hoverSpeed=5,b.mission.items=[],r.route.map((S,M,T)=>{S.wp.map((C,k,O)=>{let D={AMSLAltAboveTerrain:null,Altitude:C.pos[2],AltitudeMode:1,autoContinue:!0,command:16,doJumpId:1,frame:3,params:[0,0,0,null,C.pos[0],C.pos[1],C.pos[2]],type:"SimpleItem"};k==0&&(D.command=84,b.mission.plannedHomePosition=[C.pos[0],C.pos[1],C.pos[2]]),k+1==O.length&&(D.command=84),b.mission.items.push(D)})}),b.mission.vehicleType=20,b.mission.version=2,b.rallyPoints={points:[],version:2},b.version=1,f=JSON.stringify(b)}if(i=="waypoint"){let b=`QGC WPL 110
`;r.route.map(S=>{S.wp.map((M,T,C)=>{T==0?b+=`${T}	1	0	16	0	0	0	0	${M.pos[0]}	${M.pos[1]}	${M.pos[2]}	1
`:b+=`${T}	0	0	16	0	0	0	0	${M.pos[0]}	${M.pos[1]}	${M.pos[2]}	1
`})}),f=b}const g=new Blob([f],{type:p}),v=URL.createObjectURL(g),x=document.createElement("a");x.download=r.name+"."+i,x.href=v,x.click()},d=()=>{t(!1)};return F.jsx("div",{className:n.root,children:F.jsxs(jf,{elevation:3,className:n.card,children:[F.jsxs("div",{className:n.header,children:[F.jsx(Bn,{variant:"body2",color:"textSecondary",children:"Save Mission"}),F.jsx(br,{size:"small",onClick:d,onTouchStart:d,children:F.jsx(Nf,{fontSize:"small"})})]}),F.jsxs(N$,{className:n.content,children:[F.jsx(gi,{required:!0,label:"Name Mission",variant:"standard",value:s||" ",onChange:f=>a(f.target.value),style:{width:"300px",marginRight:"5px"}}),F.jsxs(sE,{children:[F.jsx(aE,{children:"Type file mission"}),F.jsx(lE,{label:"Type file mission",value:i,onChange:f=>o(f.target.value),sx:{width:"120px"},children:["yaml","kml","waypoint","plan"].map(f=>F.jsx(au,{value:f,children:f},f))})]})]}),F.jsx(Lne,{classes:{root:n.actions},disableSpacing:!0,children:F.jsx(jr,{onClick:l,children:"Save Mission"})})]})})},dut=si(t=>({root:{margin:"0",height:"100vh"},sidebarStyle:{display:"flex",flexDirection:"column",position:"fixed",left:0,top:"88px",height:"calc(100% - 95px)",width:"560px",margin:"0px",zIndex:3},middleStyle:{flex:1,display:"grid"},panelElevation:{display:"flex",flexDirection:"column",position:"fixed",right:0,bottom:0,height:"50vh",width:"calc(100% - 560px)",margin:"0px",zIndex:3}})),hut=(t,e)=>{setList([...list,toastProperties])},fut=()=>{const t=dut(),[e,n]=W.useState(!1),r=pr(s=>s.data.positions),[i,o]=W.useState([]);return W.useEffect(()=>{o(Object.values(r))},[r]),F.jsx("div",{className:t.root,children:F.jsx(SU,{children:F.jsxs(mE,{notification:hut,children:[F.jsx(RR,{}),F.jsx(gE,{}),F.jsxs("div",{style:{float:"right",width:"calc(100% - 560px)",height:"calc(70vh - 95px)",right:"0px",margin:"auto"},children:[F.jsxs(Q$,{children:[F.jsx(bU,{}),F.jsx(dje,{}),F.jsx(cse,{positions:i,onClick:null,selectedPosition:null,showStatus:!0})]}),F.jsx(xU,{})]}),F.jsx("div",{className:t.sidebarStyle,children:F.jsx("div",{className:t.middleStyle,children:F.jsx(Gs,{square:!0,children:F.jsx(hse,{SetOpenSave:n})})})}),F.jsx("div",{className:t.panelElevation,children:F.jsx("div",{className:t.middleStyle,children:F.jsx(Gs,{square:!0,children:F.jsx(L6,{})})})}),e&&F.jsx(Tce,{SetOpenSave:n})]})})})},put=()=>F.jsx("div",{children:"EventPage"}),mut=()=>F.jsx("div",{children:"ReplayPage"}),gut=si(t=>({root:{position:"relative",width:"200px",height:"200px",backgroundColor:"#F7F9F9",overflow:"hidden",margin:"auto"},box_down:{width:"100%",height:"50%",backgroundColor:"#5D6D7E",position:"absolute",transition:"bottom 0.3s ease-in-out",bottom:0,left:"50%",transform:"translate(-50%, 100%)",borderTop:"6px solid #1B2631 "},box_right:{width:"50%",height:"100%",backgroundColor:"#5D6D7E",position:"absolute",transition:"right 0.3s ease-in-out",top:"50%",right:0,transform:"translate(100%, -50%)",borderLeft:"6px solid #1B2631 "},box_up:{width:"100%",height:"50%",backgroundColor:"#5D6D7E",position:"absolute",transition:"top 0.3s ease-in-out",top:0,left:"50%",transform:"translate(-50%, -100%)",borderBottom:"6px solid #1B2631 "},box_left:{width:"50%",height:"100%",backgroundColor:"#5D6D7E",position:"absolute",transition:"left 0.3s ease-in-out",top:"50%",left:0,transform:"translate(-100%, -50%)",borderRight:"6px solid #1B2631 "},text_right:{position:"absolute",right:"15%",top:"50%"},text_left:{position:"absolute",left:"15%",top:"50%"},text_down:{position:"absolute",right:"50%",bottom:"15%",transform:"translate(50%, 50%)"},text_up:{position:"absolute",right:"50%",top:"15%",transform:"translate(50%, -50%)"},icon:{position:"absolute",width:"25%",height:"25%",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},centerContent:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})),YI=({device:t,data:e=[10,15,11,0,12,20],sensors:n={down:[0,15],front:[0,15],left:[0,12],back:[0,12],right:[0,12],up:[0,20]},front_view:r=!1,test:i=!1})=>{const o=gut(),[s,a]=W.useState(0),[l,d]=W.useState(0),[f,p]=W.useState(0),[g,v]=W.useState(0);W.useEffect(()=>{r?(n.hasOwnProperty("down")&&v(40-40*e[0]/n.down[1]),n.hasOwnProperty("left")&&d(40-40*e[2]/n.left[1]),n.hasOwnProperty("right")&&a(40-40*e[4]/n.right[1]),n.hasOwnProperty("up")&&p(40-40*e[5]/n.up[1])):(n.hasOwnProperty("front")&&p(40-40*e[1]/n.front[1]),n.hasOwnProperty("left")&&a(40-40*e[2]/n.left[1]),n.hasOwnProperty("back")&&v(40-40*e[3]/n.down[1]),n.hasOwnProperty("right")&&d(40-50*e[4]/n.right[1]))},[e,t,n]);const x=()=>{a(S=>S-10),d(S=>S-10),p(S=>S-10),v(S=>S-10)},b=()=>{a(S=>S+10),d(S=>S+10),p(S=>S+10),v(S=>S+10)};return F.jsxs("div",{style:{flex:1,margin:"10px"},children:[F.jsxs("div",{className:o.root,children:[F.jsx("div",{className:o.box_left,style:{left:`${s}%`}}),F.jsx("div",{className:o.box_right,style:{right:`${l}%`}}),F.jsx("div",{className:o.box_up,style:{top:`${f}%`}}),F.jsx("div",{className:o.box_down,style:{bottom:`${g}%`}}),!r&&F.jsxs(F.Fragment,{children:[s<50&&F.jsxs("div",{className:o.text_left,children:[" ",`${e[2]}m`]}),l<50&&F.jsxs("div",{className:o.text_right,children:[" ",`${e[4]}m`]}),f<50&&F.jsxs("div",{className:o.text_up,children:[" ",`${e[1]}m`]}),g<50&&F.jsxs("div",{className:o.text_down,children:[" ",`${e[3]}m`]}),F.jsx("img",{className:o.icon,src:g2[PP("dji_M210_melodic")],alt:""})]}),r&&F.jsxs(F.Fragment,{children:[s<50&&F.jsxs("div",{className:o.text_left,children:[" ",`${e[4]}m`]}),l<50&&F.jsxs("div",{className:o.text_right,children:[" ",`${e[2]}m`]}),f<50&&F.jsxs("div",{className:o.text_up,children:[" ",`${e[5]}m`]}),g<50&&F.jsxs("div",{className:o.text_down,children:[" ",`${e[0]}m`]}),F.jsx("img",{className:o.icon,src:T0e[PP("dji_M210_melodic")],alt:""})]})]}),!r&&F.jsx(Bn,{align:"center",children:"Top view"}),r&&F.jsx(Bn,{align:"center",children:"Front view"}),i&&F.jsxs("div",{children:[F.jsx("button",{onClick:x,children:"Move Left"}),F.jsx("button",{onClick:b,children:"Move Right"})]})]})};var Cce={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(cx,function(){var n=1e3,r=6e4,i=36e5,o="millisecond",s="second",a="minute",l="hour",d="day",f="week",p="month",g="quarter",v="year",x="date",b="Invalid Date",S=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,M=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,T={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(re){var he=["th","st","nd","rd"],ue=re%100;return"["+re+(he[(ue-20)%10]||he[ue]||he[0])+"]"}},C=function(re,he,ue){var be=String(re);return!be||be.length>=he?re:""+Array(he+1-be.length).join(ue)+re},k={s:C,z:function(re){var he=-re.utcOffset(),ue=Math.abs(he),be=Math.floor(ue/60),ie=ue%60;return(he<=0?"+":"-")+C(be,2,"0")+":"+C(ie,2,"0")},m:function re(he,ue){if(he.date()<ue.date())return-re(ue,he);var be=12*(ue.year()-he.year())+(ue.month()-he.month()),ie=he.clone().add(be,p),ve=ue-ie<0,Ee=he.clone().add(be+(ve?-1:1),p);return+(-(be+(ue-ie)/(ve?ie-Ee:Ee-ie))||0)},a:function(re){return re<0?Math.ceil(re)||0:Math.floor(re)},p:function(re){return{M:p,y:v,w:f,d,D:x,h:l,m:a,s,ms:o,Q:g}[re]||String(re||"").toLowerCase().replace(/s$/,"")},u:function(re){return re===void 0}},O="en",D={};D[O]=T;var B="$isDayjsObject",U=function(re){return re instanceof oe||!(!re||!re[B])},J=function re(he,ue,be){var ie;if(!he)return O;if(typeof he=="string"){var ve=he.toLowerCase();D[ve]&&(ie=ve),ue&&(D[ve]=ue,ie=ve);var Ee=he.split("-");if(!ie&&Ee.length>1)return re(Ee[0])}else{var Ne=he.name;D[Ne]=he,ie=Ne}return!be&&ie&&(O=ie),ie||!be&&O},V=function(re,he){if(U(re))return re.clone();var ue=typeof he=="object"?he:{};return ue.date=re,ue.args=arguments,new oe(ue)},X=k;X.l=J,X.i=U,X.w=function(re,he){return V(re,{locale:he.$L,utc:he.$u,x:he.$x,$offset:he.$offset})};var oe=function(){function re(ue){this.$L=J(ue.locale,null,!0),this.parse(ue),this.$x=this.$x||ue.x||{},this[B]=!0}var he=re.prototype;return he.parse=function(ue){this.$d=function(be){var ie=be.date,ve=be.utc;if(ie===null)return new Date(NaN);if(X.u(ie))return new Date;if(ie instanceof Date)return new Date(ie);if(typeof ie=="string"&&!/Z$/i.test(ie)){var Ee=ie.match(S);if(Ee){var Ne=Ee[2]-1||0,Ge=(Ee[7]||"0").substring(0,3);return ve?new Date(Date.UTC(Ee[1],Ne,Ee[3]||1,Ee[4]||0,Ee[5]||0,Ee[6]||0,Ge)):new Date(Ee[1],Ne,Ee[3]||1,Ee[4]||0,Ee[5]||0,Ee[6]||0,Ge)}}return new Date(ie)}(ue),this.init()},he.init=function(){var ue=this.$d;this.$y=ue.getFullYear(),this.$M=ue.getMonth(),this.$D=ue.getDate(),this.$W=ue.getDay(),this.$H=ue.getHours(),this.$m=ue.getMinutes(),this.$s=ue.getSeconds(),this.$ms=ue.getMilliseconds()},he.$utils=function(){return X},he.isValid=function(){return this.$d.toString()!==b},he.isSame=function(ue,be){var ie=V(ue);return this.startOf(be)<=ie&&ie<=this.endOf(be)},he.isAfter=function(ue,be){return V(ue)<this.startOf(be)},he.isBefore=function(ue,be){return this.endOf(be)<V(ue)},he.$g=function(ue,be,ie){return X.u(ue)?this[be]:this.set(ie,ue)},he.unix=function(){return Math.floor(this.valueOf()/1e3)},he.valueOf=function(){return this.$d.getTime()},he.startOf=function(ue,be){var ie=this,ve=!!X.u(be)||be,Ee=X.p(ue),Ne=function(Fe,at){var nt=X.w(ie.$u?Date.UTC(ie.$y,at,Fe):new Date(ie.$y,at,Fe),ie);return ve?nt:nt.endOf(d)},Ge=function(Fe,at){return X.w(ie.toDate()[Fe].apply(ie.toDate("s"),(ve?[0,0,0,0]:[23,59,59,999]).slice(at)),ie)},dt=this.$W,Ue=this.$M,st=this.$D,lt="set"+(this.$u?"UTC":"");switch(Ee){case v:return ve?Ne(1,0):Ne(31,11);case p:return ve?Ne(1,Ue):Ne(0,Ue+1);case f:var Rt=this.$locale().weekStart||0,Lt=(dt<Rt?dt+7:dt)-Rt;return Ne(ve?st-Lt:st+(6-Lt),Ue);case d:case x:return Ge(lt+"Hours",0);case l:return Ge(lt+"Minutes",1);case a:return Ge(lt+"Seconds",2);case s:return Ge(lt+"Milliseconds",3);default:return this.clone()}},he.endOf=function(ue){return this.startOf(ue,!1)},he.$set=function(ue,be){var ie,ve=X.p(ue),Ee="set"+(this.$u?"UTC":""),Ne=(ie={},ie[d]=Ee+"Date",ie[x]=Ee+"Date",ie[p]=Ee+"Month",ie[v]=Ee+"FullYear",ie[l]=Ee+"Hours",ie[a]=Ee+"Minutes",ie[s]=Ee+"Seconds",ie[o]=Ee+"Milliseconds",ie)[ve],Ge=ve===d?this.$D+(be-this.$W):be;if(ve===p||ve===v){var dt=this.clone().set(x,1);dt.$d[Ne](Ge),dt.init(),this.$d=dt.set(x,Math.min(this.$D,dt.daysInMonth())).$d}else Ne&&this.$d[Ne](Ge);return this.init(),this},he.set=function(ue,be){return this.clone().$set(ue,be)},he.get=function(ue){return this[X.p(ue)]()},he.add=function(ue,be){var ie,ve=this;ue=Number(ue);var Ee=X.p(be),Ne=function(Ue){var st=V(ve);return X.w(st.date(st.date()+Math.round(Ue*ue)),ve)};if(Ee===p)return this.set(p,this.$M+ue);if(Ee===v)return this.set(v,this.$y+ue);if(Ee===d)return Ne(1);if(Ee===f)return Ne(7);var Ge=(ie={},ie[a]=r,ie[l]=i,ie[s]=n,ie)[Ee]||1,dt=this.$d.getTime()+ue*Ge;return X.w(dt,this)},he.subtract=function(ue,be){return this.add(-1*ue,be)},he.format=function(ue){var be=this,ie=this.$locale();if(!this.isValid())return ie.invalidDate||b;var ve=ue||"YYYY-MM-DDTHH:mm:ssZ",Ee=X.z(this),Ne=this.$H,Ge=this.$m,dt=this.$M,Ue=ie.weekdays,st=ie.months,lt=ie.meridiem,Rt=function(at,nt,ge,tt){return at&&(at[nt]||at(be,ve))||ge[nt].slice(0,tt)},Lt=function(at){return X.s(Ne%12||12,at,"0")},Fe=lt||function(at,nt,ge){var tt=at<12?"AM":"PM";return ge?tt.toLowerCase():tt};return ve.replace(M,function(at,nt){return nt||function(ge){switch(ge){case"YY":return String(be.$y).slice(-2);case"YYYY":return X.s(be.$y,4,"0");case"M":return dt+1;case"MM":return X.s(dt+1,2,"0");case"MMM":return Rt(ie.monthsShort,dt,st,3);case"MMMM":return Rt(st,dt);case"D":return be.$D;case"DD":return X.s(be.$D,2,"0");case"d":return String(be.$W);case"dd":return Rt(ie.weekdaysMin,be.$W,Ue,2);case"ddd":return Rt(ie.weekdaysShort,be.$W,Ue,3);case"dddd":return Ue[be.$W];case"H":return String(Ne);case"HH":return X.s(Ne,2,"0");case"h":return Lt(1);case"hh":return Lt(2);case"a":return Fe(Ne,Ge,!0);case"A":return Fe(Ne,Ge,!1);case"m":return String(Ge);case"mm":return X.s(Ge,2,"0");case"s":return String(be.$s);case"ss":return X.s(be.$s,2,"0");case"SSS":return X.s(be.$ms,3,"0");case"Z":return Ee}return null}(at)||Ee.replace(":","")})},he.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},he.diff=function(ue,be,ie){var ve,Ee=this,Ne=X.p(be),Ge=V(ue),dt=(Ge.utcOffset()-this.utcOffset())*r,Ue=this-Ge,st=function(){return X.m(Ee,Ge)};switch(Ne){case v:ve=st()/12;break;case p:ve=st();break;case g:ve=st()/3;break;case f:ve=(Ue-dt)/6048e5;break;case d:ve=(Ue-dt)/864e5;break;case l:ve=Ue/i;break;case a:ve=Ue/r;break;case s:ve=Ue/n;break;default:ve=Ue}return ie?ve:X.a(ve)},he.daysInMonth=function(){return this.endOf(p).$D},he.$locale=function(){return D[this.$L]},he.locale=function(ue,be){if(!ue)return this.$L;var ie=this.clone(),ve=J(ue,be,!0);return ve&&(ie.$L=ve),ie},he.clone=function(){return X.w(this.$d,this)},he.toDate=function(){return new Date(this.valueOf())},he.toJSON=function(){return this.isValid()?this.toISOString():null},he.toISOString=function(){return this.$d.toISOString()},he.toString=function(){return this.$d.toUTCString()},re}(),pe=oe.prototype;return V.prototype=pe,[["$ms",o],["$s",s],["$m",a],["$H",l],["$W",d],["$M",p],["$y",v],["$D",x]].forEach(function(re){pe[re[1]]=function(he){return this.$g(he,re[0],re[1])}}),V.extend=function(re,he){return re.$i||(re(he,oe,V),re.$i=!0),V},V.locale=J,V.isDayjs=U,V.unix=function(re){return V(1e3*re)},V.en=D[O],V.Ls=D,V.p={},V})})(Cce);var yut=Cce.exports;const iK=xi(yut),vut=(t,e,n,r,i,o,s)=>{const a=pr(l=>l.devices.items);W.useEffect(()=>{const l=Object.values(a).filter(d=>!e.statuses.length||e.statuses.includes(d.status)).filter(d=>{const f=t.toLowerCase();return[d.name,d.uniqueId,d.phone,d.model,d.contact].some(p=>p&&p.toLowerCase().includes(f))});switch(n){case"name":l.sort((d,f)=>d.name.localeCompare(f.name));break;case"lastUpdate":l.sort((d,f)=>{const p=d.lastUpdate?iK(d.lastUpdate).valueOf():0;return(f.lastUpdate?iK(f.lastUpdate).valueOf():0)-p});break}o(l),s(r?l.map(d=>i[d.id]).filter(Boolean):Object.values(i))},[t,e,n,r,a,i,o,s])},_ut=si(t=>({card:{pointerEvents:"auto"},media:{height:"20vw",width:"100%",background:"black"},media1:{width:"100%",height:"100%",display:"flex",justifyContent:"flex-end",alignItems:"flex-start",background:"black"},gruopBtn:{float:"right",height:"40px"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},tittle:{display:"block",width:"calc( 100% - 60pt )",paddingLeft:"15pt",paddingTop:"10pt",paddingBottom:"10pt",textAlign:"left"},root:{pointerEvents:"none"},root_max:{pointerEvents:"none"}})),XI=({deviceId:t,deviceIp:e="127.0.0.1",camera_src:n="video0",onClose:r})=>{const i=_ut(),o=t?pr(f=>f.devices.items[t]):{name:"test"},s="http://"+e+":8889/"+n;W.useState(!1);let a=i.card,l=i.root_max,d=i.media;return W.useRef(),F.jsx("div",{className:l,children:o&&F.jsxs(jf,{className:a,children:[F.jsx("div",{children:F.jsx("div",{className:i.tittle,children:"Id: "+o.name})}),F.jsx("iframe",{src:s,className:d})]})})},xut=si(t=>({card:{pointerEvents:"auto"},media:{width:"100%",height:"20vw",justifyContent:"flex-end",alignItems:"flex-start"},mediaButton:{color:t.palette.colors.white,mixBlendMode:"difference"},tittle:{display:"block",width:"calc( 100% - 60pt )",paddingLeft:"15pt",paddingTop:"10pt",paddingBottom:"10pt",textAlign:"left"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},root:{pointerEvents:"none"},root_max:{pointerEvents:"none"}})),Ace=({deviceId:t,datacamera:e,onClose:n})=>{const r=xut(),[i,o]=W.useState(XP),s=pr(f=>f.devices.items[t]);W.useState(!1);let a=r.card,l=r.root_max;const d=pr(f=>f.data.camera[t]);return W.useEffect(()=>{t!=null&&(d!=null?o("data:image/bgr8;base64,"+d.camera):o(XP))},[d]),F.jsx("div",{className:l,children:s&&F.jsxs(jf,{className:a,children:[F.jsx("div",{children:F.jsxs("div",{className:r.tittle,children:["Image "+s.name," "]})}),F.jsx("img",{src:i,className:r.media})]})})},but=()=>W.useMemo(()=>({custom:[{key:"data",name:"commandData",type:"string"}],positionPeriodic:[{key:"frequency",name:"commandFrequency",type:"number"}],setTimezone:[{key:"timezone",name:"commandTimezone",type:"string"}],sendSms:[{key:"phone",name:"commandPhone",type:"string"},{key:"message",name:"commandMessage",type:"string"}],message:[{key:"message",name:"commandMessage",type:"string"}],sendUssd:[{key:"phone",name:"commandPhone",type:"string"}],sosNumber:[{key:"index",name:"commandIndex",type:"number"},{key:"phone",name:"commandPhone",type:"string"}],silenceTime:[{key:"data",name:"commandData",type:"string"}],setPhonebook:[{key:"data",name:"commandData",type:"string"}],voiceMessage:[{key:"data",name:"commandData",type:"string"}],outputControl:[{key:"index",name:"commandIndex",type:"number"},{key:"data",name:"commandData",type:"string"}],voiceMonitoring:[{key:"enable",name:"commandEnable",type:"boolean"}],setAgps:[{key:"enable",name:"commandEnable",type:"boolean"}],setIndicator:[{key:"data",name:"commandData",type:"string"}],configuration:[{key:"data",name:"commandData",type:"string"}],setConnection:[{key:"server",name:"commandServer",type:"string"},{key:"port",name:"commandPort",type:"number"}],setOdometer:[{key:"data",name:"commandData",type:"string"}],modePowerSaving:[{key:"enable",name:"commandEnable",type:"boolean"}],modeDeepSleep:[{key:"enable",name:"commandEnable",type:"boolean"}],alarmGeofence:[{key:"radius",name:"commandRadius",type:"number"}],alarmBattery:[{key:"enable",name:"commandEnable",type:"boolean"}],alarmSos:[{key:"enable",name:"commandEnable",type:"boolean"}],alarmRemove:[{key:"enable",name:"commandEnable",type:"boolean"}],alarmClock:[{key:"data",name:"commandData",type:"string"}],alarmSpeed:[{key:"data",name:"commandData",type:"string"}],alarmFall:[{key:"enable",name:"commandEnable",type:"boolean"}],alarmVibration:[{key:"data",name:"commandData",type:"string"}],SetupCamera:[{key:"type",name:"Type",type:"number"},{key:"enable",name:"Enable",type:"number"}],Gimbal:[{key:"roll",name:"Roll",type:"number"},{key:"pitch",name:"Pitch",type:"number"},{key:"yaw",name:"Yaw",type:"number"}],GimbalPitch:[{key:"pitch",name:"Pitch",type:"number"}],treat:[{key:"enable",name:"commandEnable",type:"boolean"}],setupcamera:[{key:"cameraType",name:"cameraType",type:"number"},{key:"start",name:"start",type:"number"}]}),[]),wut=({deviceId:t,item:e,setItem:n})=>{const r=pr(a=>a.session.server.textEnabled),i=but(),[o,s]=W.useState([]);return W.useEffect(()=>{e&&e.type?s(i[e.type]||[]):s([])},[i,e]),F.jsxs(W.Fragment,{children:[F.jsx(sd,{value:e.type||"",onChange:a=>n({...e,type:a.target.value,attributes:{}}),endpoint:t?`/api/commands/types?${new URLSearchParams({deviceId:t}).toString()}`:"/api/commands/types",keyGetter:a=>a.type,titleGetter:a=>Boe("command_",a.type),label:"Command type",getItems:a=>console.log(a)}),o.map(({key:a,name:l,type:d})=>d==="boolean"?F.jsx(y9,{control:F.jsx(m9,{checked:e.attributes[a],onChange:f=>{const p={...e,attributes:{...e.attributes}};p.attributes[a]=f.target.checked,n(p)}}),label:l}):F.jsx(gi,{type:d==="number"?"number":"text",value:e.attributes[a],onChange:f=>{const p={...e,attributes:{...e.attributes}};p.attributes[a]=d==="number"?Number(f.target.value):f.target.value,n(p)},label:l})),r&&F.jsx(y9,{control:F.jsx(m9,{checked:e.textChannel,onChange:a=>n({...e,textChannel:a.target.checked})}),label:"commandSendSms"})]},"sdf")};si(t=>({root:{height:"100%",display:"flex",flexDirection:"column"},content:{overflow:"auto",paddingTop:t.spacing(2),paddingBottom:t.spacing(2)},buttons:{marginTop:t.spacing(2),marginBottom:t.spacing(2),display:"flex",justifyContent:"space-evenly","& > *":{flexBasis:"33%"}},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)}}));const Sut=si(t=>({root:{pointerEvents:"none",position:"fixed",zIndex:6,left:"50%",top:"20%",transform:"translateX(-50%)"},card:{pointerEvents:"auto",width:t.dimensions.popupMaxWidth},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:t.spacing(1,1,0,2)},content:{overflow:"auto",paddingTop:t.spacing(2),paddingBottom:t.spacing(2)},buttons:{marginTop:t.spacing(2),marginBottom:t.spacing(2),display:"flex",justifyContent:"space-evenly","& > *":{flexBasis:"33%"}},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)}})),Mut=({id:t,onClose:e})=>{const n=Sut(),[r,i]=W.useState({}),[o,s]=W.useState(0),a=ere(async()=>{let d;if(o){const p=await fetch(`/api/commands/${o}`);if(p.ok)d=await p.json();else throw Error(await p.text())}else d=r;d.deviceId=parseInt(t,10);const f=await fetch("/api/commands/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(f.ok)console.log("ok");else throw Error(await f.text())}),l=()=>o||r&&r.type;return F.jsx("div",{className:n.root,children:F.jsxs(jf,{elevation:3,className:n.card,children:[F.jsxs("div",{className:n.header,children:[F.jsx(Bn,{variant:"body2",color:"textSecondary",children:"Send Commands"}),F.jsx(br,{size:"small",onClick:e,onTouchStart:e,children:F.jsx(Nf,{fontSize:"small"})})]}),F.jsxs(oE,{maxWidth:"xs",className:n.container,children:[F.jsxs(pl,{defaultExpanded:!0,children:[F.jsx(gl,{expandIcon:F.jsx(La,{}),children:F.jsx(Bn,{variant:"subtitle1",children:"Command"})}),F.jsx(ml,{className:n.details,children:!o&&F.jsx(wut,{deviceId:t,item:r,setItem:i})})]}),F.jsxs("div",{className:n.buttons,children:[F.jsx(jr,{type:"button",color:"primary",variant:"outlined",onClick:e,children:"Cancel"}),F.jsx(jr,{type:"button",color:"primary",variant:"contained",onClick:a,disabled:!l(),children:"Send"})]})]})]})})},Eut=si(t=>({root:{margin:"0",height:"100vh",display:"flex",flexDirection:"column"},content:{overflow:"auto",paddingTop:t.spacing(2),paddingBottom:t.spacing(2)},buttons:{marginTop:t.spacing(2),marginBottom:t.spacing(2),display:"flex",justifyContent:"space-evenly","& > *":{flexBasis:"33%"}},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)}})),Tut=({device:t,myhostname:e})=>{const n=t.camera&&t.camera.length>0?t.camera[0]:{type:""};return F.jsxs(F.Fragment,{children:[n.type==="WebRTC"&&F.jsx(XI,{deviceId:t.id,deviceIp:e,devicename:t.name,camera_src:t.name+"_"+n.source,onClose:()=>{console.log("cerrar ")}}),n.type==="WebRTC_env"&&F.jsx(XI,{deviceId:t.id,deviceIp:t.ip,devicename:t.name,camera_src:n.source,onClose:()=>{console.log("cerrar ")}}),n.type==="Websocket"&&F.jsx(Ace,{deviceId:t.id,datacamera:null,onClose:()=>console.log("cerrar ")})]})},Cut=()=>{const t=Eut(),e=Sy(),{id:n}=Pge(),[r,i]=Ze.useState(0),[o,s]=W.useState(),[a,l]=W.useState({}),d=pr(pe=>pe.data.positions),f=pr(pe=>pe.devices.items),p=pr(pe=>pe.session.markers);W.useState(0);const[g,v]=W.useState([]),x=`${window.location.hostname}`,[b,S]=W.useState([]),[M,T]=W.useState([]),[C,k]=W.useState(""),[O,D]=OA("filter",{statuses:[],groups:[]}),[B,U]=OA("filterSort",""),[J,V]=OA("filterMap",!1),[X,oe]=W.useState(!1);return vut(C,O,B,J,d,T,S),W.useEffect(()=>{v(p)},[p]),W.useEffect(()=>{n&&s(d[n])},[n,d]),W.useEffect(()=>{n&&(l(f[n]),console.log(f[n]))},[n]),F.jsxs("div",{className:t.root,children:[F.jsx(lR,{position:"sticky",color:"inherit",children:F.jsxs(z0,{children:[F.jsx(br,{color:"inherit",edge:"start",sx:{mr:2},onClick:()=>e(-1),children:F.jsx(bE,{})}),F.jsx(Bn,{variant:"h6",children:a.name})]})}),F.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[F.jsxs("div",{style:{flex:1},children:[F.jsx("div",{style:{height:"50vh"},children:F.jsx(use,{filteredPositions:b,markers:g,selectedPosition:n,filteredMissiondeviceid:n})}),F.jsx("div",{children:Object.keys(a).length>0&&F.jsx(Tut,{device:a,myhostname:x})})]}),F.jsxs("div",{style:{flex:1,justifyContent:"space-between",display:"flex",flexDirection:"column"},children:[F.jsx("div",{style:{height:"50vh"},className:t.content,children:F.jsx(oE,{maxWidth:"false",children:F.jsx(Gs,{children:F.jsxs(U$,{"aria-label":"simple table",children:[F.jsx(Jne,{children:F.jsxs(Xx,{children:[F.jsx(mc,{sx:{fontWeight:"bold"},children:"Attributes"}),F.jsx(mc,{sx:{fontWeight:"bold"},children:"Value"})]})}),F.jsxs(V$,{children:[o&&Object.getOwnPropertyNames(o).filter(pe=>pe!=="attributes").map(pe=>F.jsxs(Xx,{children:[F.jsx(mc,{children:pe}),F.jsx(mc,{children:F.jsx(zF,{position:o,property:pe})})]},pe)),o&&Object.getOwnPropertyNames(o.attributes).map(pe=>F.jsxs(Xx,{children:[F.jsx(mc,{children:pe}),F.jsx(mc,{children:F.jsx(zF,{position:o,attribute:pe})})]},pe))]})]})})})}),F.jsx("div",{style:{padding:"15px",margin:"10px"},children:F.jsxs(Gs,{children:[F.jsx(Bn,{align:"center",variant:"h5",component:"div",style:{padding:"15px"},children:"Avoidance sensor"}),o&&o.attributes&&F.jsxs("div",{style:{display:"flex",flex:1},children:[F.jsx(YI,{front_view:!0,data:o.attributes.obstacle_info}),F.jsx(YI,{front_view:!1,data:o.attributes.obstacle_info})]})]})}),F.jsx("div",{style:{padding:"15px",marginTop:"auto"},children:F.jsx(Gs,{children:F.jsxs(zEe,{showLabels:!0,value:r,onChange:(pe,re)=>{i(re)},children:[F.jsx(FT,{label:"Edit",icon:F.jsx(mU,{})}),F.jsx(FT,{label:"Result",icon:F.jsx(qR,{})}),F.jsx(FT,{label:"Command",icon:F.jsx(fU,{}),onClick:()=>oe(!0)}),F.jsx(FT,{label:"Delete",icon:F.jsx(yu,{})})]})})})]})]}),X&&F.jsx(Mut,{id:n,onClose:()=>oe(!1)})]})},Aut=si(()=>({root:{height:"100%"},sidebarStyle:{pointerEvents:"none",display:"flex",flexDirection:"column",position:"fixed",left:0,top:"88px",height:"calc(100% - 88px)",width:"360px",margin:"0px",zIndex:3},middleStyle:{flex:1,display:"grid"},contentListStyle:{pointerEvents:"auto",gridArea:"1 / 1",zIndex:4}})),Put=(t,e)=>{switch(t){case"success":toastProperties={id:list.length+1,title:"Success",description:e,backgroundColor:"#5cb85c"};break;case"danger":toastProperties={id:list.length+1,title:"Danger",description:e,backgroundColor:"#d9534f"};break;case"info":toastProperties={id:list.length+1,title:"Info",description:e,backgroundColor:"#5bc0de"};break;case"warning":toastProperties={id:list.length+1,title:"Warning",description:e,backgroundColor:"#f0ad4e"};break;default:toastProperties=[]}setList([...list,toastProperties])},Iut=()=>{const[t,e]=W.useState(!1),n=pr(s=>s.devices.items);let r=Object.values(n);const i=`${window.location.hostname}`,o=Aut();return F.jsx("div",{className:o.root,children:F.jsxs(mE,{notification:Put,children:[F.jsx(RR,{}),F.jsx(gE,{}),F.jsx("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 90px)"},children:F.jsx(hs,{component:"div",sx:{overflow:"auto"},style:{backgroundColor:"#000000",width:"calc(100vw - 360px)",height:"calc(100vh - 90px",padding:"20px",float:"right"},children:F.jsx(b9,{container:!0,spacing:2,justifyContent:"space-around",children:Ze.Children.toArray(Object.values(n).map(s=>F.jsx(W.Fragment,{children:s.camera.map((a,l)=>F.jsxs(b9,{item:!0,xs:12,sm:6,children:[a.type==="WebRTC"&&F.jsx(XI,{deviceId:s.id,deviceIp:i,devicename:s.name,camera_src:s.name+"_"+a.source,onClose:()=>{console.log("cerrar ")}}),a.type==="WebRTC_env"&&F.jsx(XI,{deviceId:s.id,deviceIp:s.ip,devicename:s.name,camera_src:a.source,onClose:()=>{console.log("cerrar ")}}),a.type==="Websocket"&&F.jsx(Ace,{deviceId:s.id,datacamera:null,onClose:()=>console.log("cerrar ")})]},"card-"+s.id+"-"+l))},"dev"+s.id)))})})}),F.jsx("div",{className:o.sidebarStyle,children:F.jsx("div",{className:o.middleStyle,children:F.jsxs(Gs,{square:!0,className:o.contentListStyle,children:[F.jsx(ase,{SetAddUAVOpen:e}),F.jsx(Hoe,{devices:r})]})})})]})})},kut=si(t=>({root:{height:"100%",display:"flex",flexDirection:"column"},content:{overflow:"auto",paddingTop:t.spacing(2),paddingBottom:t.spacing(2)},buttons:{marginTop:t.spacing(2),marginBottom:t.spacing(2),display:"flex",justifyContent:"space-evenly","& > *":{flexBasis:"33%"}},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)}})),Rut=()=>{const t=kut(),e=Sy(),[n,r]=W.useState([]),[i,o]=W.useState(),s=pr(l=>l.events.items),a=pr(l=>l.devices.items);return W.useEffect(()=>{r(s)},[s]),W.useEffect(()=>{o({...a,"-1":{name:"GCS"}})},[a]),pr(l=>{if(n){const d=l.devices.items[n.deviceId];if(d)return d.name}return null}),F.jsxs("div",{className:t.root,children:[F.jsx(lR,{position:"sticky",color:"inherit",children:F.jsxs(z0,{children:[F.jsx(br,{color:"inherit",edge:"start",sx:{mr:2},onClick:()=>e(-1),children:F.jsx(bE,{})}),F.jsx(Bn,{variant:"h6",children:"Events"})]})}),F.jsx("div",{className:t.content,children:F.jsx(oE,{maxWidth:"sm",children:F.jsx(Gs,{children:F.jsxs(U$,{children:[F.jsx(Jne,{children:F.jsxs(Xx,{children:[F.jsx(mc,{children:"UAV"}),F.jsx(mc,{children:"Fecha"}),F.jsx(mc,{children:"Valor"})]})}),F.jsx(V$,{children:n&&n.map(l=>F.jsxs(Xx,{children:[F.jsx(mc,{children:i[l.deviceId].name}),F.jsx(mc,{children:l.eventTime}),F.jsx(mc,{children:l.attributes.message})]},l.id))})]})})})})]})},Out=()=>F.jsxs("div",{children:[F.jsx("h3",{children:"Move the Square"}),F.jsx(YI,{}),F.jsx(Tb,{}),F.jsx(YI,{front_view:!0})]}),Pce=W.createContext(null);function Lut(){const[t,e]=W.useState(null);return W.useEffect(()=>{e(`mui-p-${Math.round(Math.random()*1e5)}`)},[]),t}function Dut(t){const{children:e,value:n}=t,r=Lut(),i=W.useMemo(()=>({idPrefix:r,value:n}),[r,n]);return F.jsx(Pce.Provider,{value:i,children:e})}function Ice(){return W.useContext(Pce)}function kce(t,e){const{idPrefix:n}=t;return n===null?null:`${t.idPrefix}-P-${e}`}function Rce(t,e){const{idPrefix:n}=t;return n===null?null:`${t.idPrefix}-T-${e}`}const Nut=["children"],zut=W.forwardRef(function(e,n){const{children:r}=e,i=on(e,Nut),o=Ice();if(o===null)throw new TypeError("No TabContext provided");const s=W.Children.map(r,a=>W.isValidElement(a)?W.cloneElement(a,{"aria-controls":kce(o,a.props.value),id:Rce(o,a.props.value)}):null);return F.jsx(Qne,fe({},i,{ref:n,value:o.value,children:s}))}),Fut=zut;function But(t){return jn("MuiTabPanel",t)}Un("MuiTabPanel",["root"]);const $ut=["children","className","value"],jut=t=>{const{classes:e}=t;return Vn({root:["root"]},But,e)},Uut=Qt("div",{name:"MuiTabPanel",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({padding:t.spacing(3)})),Vut=W.forwardRef(function(e,n){const r=er({props:e,name:"MuiTabPanel"}),{children:i,className:o,value:s}=r,a=on(r,$ut),l=fe({},r),d=jut(l),f=Ice();if(f===null)throw new TypeError("No TabContext provided");const p=kce(f,s),g=Rce(f,s);return F.jsx(Uut,fe({"aria-labelledby":g,className:qt(d.root,o),hidden:s!==f.value,id:p,ref:n,role:"tabpanel",ownerState:l},a,{children:s===f.value&&i}))}),Z3=Vut,Wut=si(t=>({list:{maxHeight:"100%",overflow:"auto"},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},attributeName:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attribute:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),Oce=({markers:t,setMarkers:e,type:n="Base"})=>{const r=Wut(),[i,o]=W.useState(!1),[s,a]=W.useState(!0),l=v=>(x,b)=>{o(b?v:!1)},d=()=>{let v=ht.getCenter(),x=JSON.parse(JSON.stringify(t));x.push({latitude:v.lat,longitude:v.lng}),e(x,{meth:"add",index:-1})},f=v=>{let x=JSON.parse(JSON.stringify(t));x.splice(v,1),e(x,{meth:"del",index:v})},p=(v,x)=>{let b=JSON.parse(JSON.stringify(t));b[v].latitude=x,e(b,{meth:"mod",index:v})},g=(v,x)=>{let b=JSON.parse(JSON.stringify(t));b[v].longitude=x,e(b,{meth:"mod",index:v})};return W.useEffect(()=>{t&&(t.length>0?a(!1):a(!0))},[t]),F.jsx(W.Fragment,{children:s?F.jsx(hs,{textAlign:"center",children:F.jsx(jr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:d,children:"Create New Base"})}):F.jsxs("div",{className:r.details,children:[Ze.Children.toArray(Object.values(t).map((v,x,b)=>F.jsxs(pl,{expanded:i==="wp "+x,onChange:l("wp "+x),children:[F.jsxs(gl,{expandIcon:F.jsx(La,{}),children:[F.jsx(Bn,{sx:{width:"33%",flexShrink:0},children:n+" "+x}),F.jsx(br,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>f(x),children:F.jsx(yu,{})})]}),F.jsx(ml,{className:r.details,children:i==="wp "+x&&F.jsx(W.Fragment,{children:F.jsxs(hs,{component:"form",sx:{"& .MuiTextField-root":{m:1}},children:[F.jsx("div",{children:F.jsx(Bn,{variant:"subtitle1",style:{display:"inline"},children:"Position"})}),F.jsx(gi,{required:!0,label:"Latitude ",type:"number",sx:{width:"15ch"},variant:"standard",inputProps:{maxLength:8,step:1e-4},value:v.latitude,onChange:S=>{p(x,S.target.value)}}),F.jsx(gi,{required:!0,label:"Longitud ",type:"number",variant:"standard",sx:{width:"15ch"},inputProps:{maxLength:8,step:1e-4},value:v.longitude,onChange:S=>{g(x,S.target.value)}})]})})})]}))),F.jsx(hs,{textAlign:"center",children:F.jsxs(jr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:d,children:["Create new ",n]})})]})})},Hut=si(t=>({list:{maxHeight:"100%",overflow:"auto"},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},attributeName:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attribute:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),Gut=({data:t,param:e,setData:n,type:r="Base"})=>{const i=Hut(),[o,s]=W.useState(!1),[a,l]=W.useState(!1),d=p=>(g,v)=>{s(v?p:!1)},f=(p=0,g="mission",v,x)=>{let b=JSON.parse(JSON.stringify(t));b[p][g][v]=Number(x),n(b)};return W.useEffect(()=>{t&&(t.length>0?l(!1):l(!0)),console.log(t),console.log(e)},[t]),F.jsx("div",{children:a?F.jsx(hs,{textAlign:"center",children:F.jsx(Bn,{children:"dont exits base"})}):F.jsx("div",{className:i.details,children:Ze.Children.toArray(Object.values(t).map((p,g,v)=>F.jsxs(pl,{expanded:o===`wp ${g}`,onChange:d(`wp ${g}`),children:[F.jsxs(gl,{expandIcon:F.jsx(La,{}),children:[F.jsx(Bn,{sx:{width:"33%",flexShrink:0},children:`${r} ${g}`}),F.jsx(br,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>console.log("button"),children:F.jsx(dse,{})})]}),F.jsx(ml,{className:i.details,children:o===`wp ${g}`&&F.jsxs(hs,{component:"form",sx:{"& .MuiTextField-root":{m:1}},children:[F.jsx("div",{children:F.jsx(Bn,{variant:"subtitle1",style:{display:"inline"},children:"Device params"})}),F.jsx("div",{children:e.devices&&Ze.Children.toArray(Object.keys(e.devices).map((x,b,S)=>F.jsx("div",{children:x=="id"&&F.jsx(sd,{emptyValue:null,fullWidth:!0,label:"device",value:p.devices[x],endpoint:"/api/devices",keyGetter:M=>M.id,titleGetter:M=>`${M.name} - ${M.category}`,onChange:M=>{f(g,"devices",x,M.target.value)}})})))}),F.jsx("div",{children:F.jsx(Bn,{variant:"subtitle1",style:{display:"inline"},children:"Settings"})}),F.jsx("div",{children:e.settings&&Ze.Children.toArray(Object.keys(e.settings).map(x=>F.jsx("div",{children:e.settings[x].name&&F.jsxs(W.Fragment,{children:[F.jsx(Bn,{variant:"subtitle1",className:i.attributeName,children:e.settings[x].name}),F.jsx("div",{className:i.actionValue,children:F.jsx(gi,{required:!0,fullWidth:!0,type:"number",value:p.settings[x]?p.settings[x]:e.settings[x].default,onChange:b=>{f(g,"settings",x,b.target.value)}})})]})})))})]})})]})))})})};class qut{constructor(){this.markers={},this.select={id:-1}}initMarkers(e){this.markers=JSON.parse(JSON.stringify(e))}getMarkers(){return this.markers}setMarkers(e){this.markers=e}getSelect(){return this.select}setSelect(e){this.select=e}}const Yut=({markers:t,selectMarkers:e=[],showTitles:n,showLines:r,moveMarkers:i,setMarkers:o,SelectItems:s,CreateItems:a,setLocations:l})=>{const d=W.useId(),f=`${d}-lines`,p=`${d}-select`,g=.4,[v,x]=W.useState(new qut),b=()=>ht.getCanvas().style.cursor="move",S=()=>ht.getCanvas().style.cursor="pointer",M=()=>ht.getCanvas().style.cursor="",T=V=>{V.hasOwnProperty("features")?V.features[0].properties.type=="element"&&l({...V.features[0].properties,type:"object"}):l({latitude:V.lngLat.lat,longitude:V.lngLat.lng,groupId:0,id:0,type:"point"})},C=V=>{var re;ht.getCanvas().style.cursor="grabbing",console.log("on move point"+V.lngLat.lng+"-"+V.lngLat.lat);let X=v.getMarkers(),oe=v.getSelect();console.log(X),console.log(oe),oe.id>=0&&(oe.type=="base"&&(X.bases[oe.id].latitude=V.lngLat.lat,X.bases[oe.id].longitude=V.lngLat.lng),oe.type=="element"&&(X.elements[oe.groupId].items[oe.id].latitude=V.lngLat.lat,X.elements[oe.groupId].items[oe.id].longitude=V.lngLat.lng));let pe=B(X);(re=ht.getSource(d))==null||re.setData({type:"FeatureCollection",features:pe.map(he=>({type:"Feature",geometry:{type:"Point",coordinates:[he.longitude,he.latitude]},properties:{...he}}))})},k=V=>{let X=V.lngLat;ht.getCanvas().style.cursor="";let oe=v.getMarkers(),pe=v.getSelect();console.log(oe),console.log(pe),pe.id>=0&&(pe.type=="base"&&(oe.bases[pe.id].latitude=V.lngLat.lat,oe.bases[pe.id].longitude=V.lngLat.lng),pe.type=="element"&&(oe.elements[pe.groupId].items[pe.id].latitude=V.lngLat.lat,oe.elements[pe.groupId].items[pe.id].longitude=V.lngLat.lng)),v.getSelect({id:-1}),o(oe),console.log(`Longitude: ${X.lng} Latitude: ${X.lat}`),ht.off("mousemove",C),ht.off("touchmove",C)},O=V=>{V.preventDefault(),v.setSelect(V.features[0].properties),ht.getCanvas().style.cursor="grab",ht.on("mousemove",C),ht.once("mouseup",k)},D=V=>{V.points.length===1&&(console.log("touch start"),V.preventDefault(),ht.on("touchmove",C),ht.once("touchend",k))};W.useEffect(()=>(ht.addSource(d,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),ht.addSource(f,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),ht.addSource(p,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),ht.addLayer({id:p,type:"symbol",source:p,filter:["!has","point_count"],layout:{"icon-image":"background-{groupId}","icon-size":g*1.2,"icon-allow-overlap":!0,"text-allow-overlap":!0,"text-field":"{title}","text-font":Th(ht),"text-size":14},paint:{"text-color":"white"}}),r&&ht.addLayer({source:f,id:f,type:"line",paint:{"line-color":["get","color"],"line-width":2}}),n?ht.addLayer({id:d,type:"symbol",source:d,filter:["!has","point_count"],layout:{"icon-image":"{image}","icon-size":g,"icon-allow-overlap":!0,"text-field":"{title}","text-allow-overlap":!0,"text-anchor":"bottom","text-offset":[0,-2*g],"text-font":Th(ht),"text-size":12},paint:{"text-halo-color":"white","text-halo-width":1}}):ht.addLayer({id:d,type:"symbol",source:d,layout:{"icon-image":"{image}","icon-size":g,"icon-allow-overlap":!0}}),s&&(ht.on("mouseenter",d,S),ht.on("mouseleave",d,M),ht.on("click",d,T)),a&&ht.on("click",T),i&&(ht.on("mouseenter",d,b),ht.on("mouseleave",d,M),ht.on("mousedown",d,O),ht.on("touchstart",d,D)),()=>{ht.off("click",T),ht.off("click",d,T),ht.off("mouseenter",d,S),ht.off("mouseenter",d,b),ht.off("mouseleave",d,M),ht.off("mousedown",d,O),ht.off("touchstart",d,D),ht.getLayer(d)&&ht.removeLayer(d),ht.getLayer(p)&&ht.removeLayer(p),ht.getLayer(f)&&ht.removeLayer(f),ht.getSource(d)&&ht.removeSource(d),ht.getSource(f)&&ht.removeSource(f),ht.getSource(p)&&ht.removeSource(p)}),[n,r,i,s,a]);function B(V){const X=[];return V.elements&&V.elements.forEach((oe,pe)=>{oe.items.forEach((re,he)=>{X.push({...re,type:"element",groupId:pe,id:he,image:oe.type,title:`${pe}-${he}`})})}),V.bases&&V.bases.forEach((oe,pe)=>{X.push({...oe,type:"base",groupId:0,id:pe,image:"base",title:`b-${pe}`})}),X}function U(V,X){let oe=Object.values(V.items).map(pe=>[pe.longitude,pe.latitude]);return{id:V.id,type:"Feature",geometry:{type:"LineString",coordinates:oe},properties:{name:V.name,color:hy.colors_devices[X]}}}function J(V){console.log(V);const X=[];return V.length>0&&V.forEach((oe,pe)=>{oe.items.forEach((re,he)=>{X.push({...re,type:"element",groupId:pe,id:he,image:oe.type,title:`${pe}-${he}`})})}),X}return W.useEffect(()=>{var X;v.initMarkers(t);let V=B(t);(X=ht.getSource(d))==null||X.setData({type:"FeatureCollection",features:V.map(oe=>({type:"Feature",geometry:{type:"Point",coordinates:[oe.longitude,oe.latitude]},properties:{...oe}}))}),ht.getSource(f).setData({type:"FeatureCollection",features:t.elements.map((oe,pe)=>U(oe,pe))})},[t,n,r,i,s,a]),W.useEffect(()=>{let V=J(e);ht.getSource(p).setData({type:"FeatureCollection",features:V.map(X=>({type:"Feature",geometry:{type:"Point",coordinates:[X.longitude,X.latitude]},properties:{...X}}))})},[e,n,r,i,s,a]),null},Xut=si(t=>({list:{maxHeight:"100%",overflow:"auto"},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},attributeName:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attributeValue:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),Kut=({markers:t,setMarkers:e})=>{const n=Xut();Yl(),W.useState(!1),W.useState(!1);const[r,i]=W.useState(!1),[o,s]=W.useState(!0),a=(p,g)=>{let v=JSON.parse(JSON.stringify(t));v[p].items=g,e(v)},l=p=>{let g=JSON.parse(JSON.stringify(t));g.splice(p,1),e(g)},d=()=>{let p=JSON.parse(JSON.stringify(t));p.push({type:"powerTower",name:"Elements",linea:!0,items:[]}),e(p)},f=p=>(g,v)=>{i(v?p:!1)};return W.useEffect(()=>{t&&(t.length>0?s(!1):s(!0)),console.log(t)},[t]),F.jsx(W.Fragment,{children:o?F.jsx(hs,{textAlign:"center",children:F.jsx(jr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:d,children:"Create New Group"})}):F.jsxs("div",{className:n.details,children:[Ze.Children.toArray(Object.values(t).map((p,g,v)=>F.jsxs(pl,{expanded:r==="Elements "+g,onChange:f("Elements "+g),children:[F.jsxs(gl,{expandIcon:F.jsx(La,{}),children:[F.jsx(Bn,{sx:{width:"33%",flexShrink:0},children:"Group "+g}),F.jsx(br,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>l(g),children:F.jsx(yu,{})})]}),F.jsx(ml,{className:n.details,children:r==="Elements "+g&&F.jsxs(W.Fragment,{children:[F.jsx(gi,{required:!0,label:"Name",variant:"standard",value:p.name?p.name:""}),F.jsx(sd,{emptyValue:null,value:0,data:[{id:0,name:"Power Tower"},{id:1,name:"wind turbine"},{id:2,name:"Solar Panel"}],label:"Type",style:{display:"inline",width:"200px"}}),F.jsx(Oce,{markers:p.items,setMarkers:x=>a(g,x),type:"Element"})]})})]}))),F.jsx(hs,{textAlign:"center",children:F.jsx(jr,{variant:"contained",size:"large",sx:{width:"80%",flexShrink:0},style:{marginTop:"15px"},onClick:d,children:"Create List of Elements"})})]})})},Zut=si(t=>({list:{maxHeight:"100%",overflow:"auto"},icon:{width:"25px",height:"25px",filter:"brightness(0) invert(1)"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},attributeName:{display:"inline-block",width:"40%",textAlign:"left",verticalAlign:"middle"},attributeValue:{display:"inline-block",width:"58%"},actionValue:{display:"inline-block",width:"40%"}})),Jut=({Data:t,setData:e})=>{const n=Zut(),[r,i]=W.useState(!1),[o,s]=W.useState(!1),[a,l]=W.useState(!1),d=v=>{let x=JSON.parse(JSON.stringify(t));x.splice(v,1),e(x)},f=(v,x)=>{let b=JSON.parse(JSON.stringify(t));b[v].items.splice(x,1),e(b)},p=v=>(x,b)=>{s(b?v:!1)},g=v=>(x,b)=>{i(b?v:!1)};return W.useEffect(()=>{t&&(t.length>0?l(!0):l(!1))},[t]),F.jsx("div",{children:a&&F.jsx("div",{className:n.details,children:Ze.Children.toArray(Object.values(t).map((v,x,b)=>F.jsxs(pl,{expanded:r===`Elements ${x}`,onChange:g(`Elements ${x}`),children:[F.jsxs(gl,{expandIcon:F.jsx(La,{}),children:[F.jsx(Bn,{sx:{width:"33%",flexShrink:0},children:`Group ${x}`}),F.jsx(br,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>d(x),children:F.jsx(yu,{})})]}),F.jsx(ml,{className:n.details,children:r===`Elements ${x}`&&F.jsxs(F.Fragment,{children:[F.jsx(gi,{required:!0,label:"Name",variant:"standard",value:v.name?v.name:""}),F.jsx("div",{className:n.details,children:Ze.Children.toArray(Object.values(v.items).map((S,M,T)=>F.jsxs(pl,{expanded:o===`Elements ${M}`,onChange:p(`Elements ${M}`),children:[F.jsxs(gl,{expandIcon:F.jsx(La,{}),children:[S.title?F.jsx(Bn,{sx:{width:"33%",flexShrink:0},children:`Element ${S.title}`}):F.jsx(Bn,{sx:{width:"33%",flexShrink:0},children:`Element ${M}`}),F.jsx(br,{sx:{py:0,pr:2,marginLeft:"auto"},onClick:()=>f(x,M),children:F.jsx(yu,{})})]}),F.jsx(ml,{className:n.details,children:o===`Elements ${M}`&&F.jsxs(hs,{component:"form",sx:{"& .MuiTextField-root":{m:1}},children:[F.jsx(gi,{disabled:!0,label:"Latitude ",type:"number",sx:{width:"15ch"},variant:"standard",inputProps:{maxLength:8,step:1e-4},value:S.latitude}),F.jsx(gi,{disabled:!0,label:"Longitud ",type:"number",variant:"standard",sx:{width:"15ch"},inputProps:{maxLength:8,step:1e-4},value:S.longitude})]})})]})))})]})})]})))})})},Qut=si(t=>({root:{margin:"0",height:"100vh"},sidebarStyle:{display:"flex",flexDirection:"column",position:"fixed",left:0,top:"88px",height:"calc(100% - 95px)",width:"560px",margin:"0px",zIndex:3},middleStyle:{flex:1,display:"grid"},panelElevation:{display:"flex",flexDirection:"column",position:"fixed",right:0,bottom:0,height:"30vh",width:"calc(100% - 560px)",margin:"0px",zIndex:3},toolbar:{display:"flex",gap:"10px 10px",height:"30px",borderBottom:"3px solid rgb(212, 212, 212)"},list:{maxHeight:"calc(100vh - 152px)",overflowY:"auto",display:"flex",gap:"10px",flexDirection:"column",margin:"20px"},title:{flexGrow:1},fileInput:{display:"none"},details:{display:"flex",flexDirection:"column",gap:t.spacing(2),paddingBottom:t.spacing(3)},panelButton:{width:"80%",flexShrink:0,marginTop:"15px"},mapContainer:{float:"right",width:"calc(100% - 560px)",height:"calc(70vh - 95px)",right:"0px",margin:"auto"}})),edt=(t,e)=>{console.log(t+e)},tdt=()=>{const t=Qut(),e=Sy(),n=Yl(),[r,i]=W.useState(!0),[o,s]=W.useState(!1),[a,l]=W.useState(!1),[d,f]=W.useState(!1),[p,g]=W.useState(!1),[v,x]=W.useState(100),b=pr(Fe=>Fe.session.markers),S=pr(Fe=>Fe.session.planning),[M,T]=W.useState(b),[C,k]=W.useState(S),[O,D]=W.useState(-1),[B,U]=W.useState("2"),[J,V]=W.useState(""),[X,oe]=W.useState(!0),pe=ere(async()=>{console.log("send planning");let Fe={};Fe.id=C.id,Fe.name=C.name,Fe.case=C.objetivo.case,Fe.meteo=C.meteo,Fe.locations=C.loc.map(vt=>{let Tt=vt.items.map(We=>({latitude:We.latitude,longitude:We.longitude}));return{name:vt.name,items:Tt}});let nt=C.bases.map(vt=>vt.devices.id).some((vt,Tt,We)=>We.indexOf(vt)!==Tt);if(V(""),nt)return V("the device is repeated please change"),null;if(C.loc.length===0)return V("No elements to inspection"),null;let ge=[];const tt=await fetch("/api/devices");if(tt.ok)ge=await tt.json();else throw Error(await tt.text());Fe.devices=C.bases.map((vt,Tt)=>{let We=JSON.parse(JSON.stringify(vt)),Vt=ge.find(sn=>sn.id==vt.devices.id);return delete We.devices,We.id=Vt.name,We.category=Vt.category,We.settings.base=Object.values(M.bases[Tt]),We.settings.landing_mode=2,We}),console.log(Fe);const rt=await fetch("http://127.0.0.1:8004/mission_request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fe)});if(rt.ok){const vt=await rt.json();console.log(vt),x(0)}else throw Error(await tt.text());return!0}),re=()=>{console.log("uno")},he=Fe=>{let at=YP.stringify(Fe);const nt=new Blob([at],{type:"text/plain"}),ge=URL.createObjectURL(nt),tt=document.createElement("a");tt.download=`${Fe.name}.yaml`,tt.href=ge,tt.click()},ue=async()=>{const Fe={};Fe.id=C.id,Fe.name=C.name,Fe.objetivo=C.objetivo.id,Fe.meteo=C.meteo,Fe.locations=C.loc.map(nt=>{let ge=nt.items.map(tt=>({latitude:tt.latitude,longitude:tt.longitude}));return{name:nt.name,items:ge}}),console.log(Fe);const at=await fetch("/api/missions/sendTask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fe)});if(at.ok){const nt=await at.json();console.log(nt)}else throw Error(await at.text())},be=Fe=>{const at=Fe.target.files[0];if(!at)return;const nt=new FileReader;nt.readAsText(at),nt.onload=()=>{let ge=YP.parse(nt.result);T(tt=>({...tt,bases:ge.markersbase,elements:ge.elements})),ge.hasOwnProperty("markersbase")&&delete ge.markersbase,ge.hasOwnProperty("elements")&&delete ge.elements,k(ge)},nt.onerror=()=>{console.log(nt.error)}},ie=async Fe=>{console.log("Setdefault");const at=await fetch("api/planning/setDefault",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fe)});if(at.ok)await at.json();else throw Error(await at.text())},ve=Fe=>{k({...C,bases:Fe})},Ee=(Fe,at)=>{U(at),at==2||at==1?i(!0):i(!1),at==1?s(!0):s(!1),at==1?l(!0):l(!1)},Ne=(Fe,at={})=>{T({...M,bases:Fe}),at.hasOwnProperty("meth")&&(at.meth=="add"&&k(nt=>{let ge=JSON.parse(JSON.stringify(nt.bases)),tt={};return Object.keys(nt.settings).forEach(rt=>{tt[rt]={},Object.keys(nt.settings[rt]).forEach(vt=>{tt[rt][vt]=nt.settings[rt][vt].default})}),ge.push(tt),{...nt,bases:ge}}),at.meth=="del"&&k(nt=>{let ge=JSON.parse(JSON.stringify(nt.bases));return console.log(ge),ge.splice(at.index,1),{...nt,bases:ge}}))},Ge=Fe=>{T({...M,elements:Fe})},dt=Fe=>{T(Fe)},Ue=Fe=>{k({...C,loc:Fe})},st=(Fe,at,nt)=>(nt=="path-object"&&(Fe.length==0?Fe.push({type:"powerTower",name:"Elements",linea:!0,items:[at]}):Fe.find(tt=>tt.items[0].groupId==at.groupId)===void 0?Fe.push({type:"powerTower",name:"Elements",linea:!0,items:[at]}):Fe[+Fe.length-1].items.push(at)),nt=="object"&&Fe.push({type:"powerTower",name:"Elements",linea:!0,items:[at]}),nt=="point"&&Fe.push({type:"powerTower",name:"Elements",linea:!0,items:[at]}),Fe),lt=Fe=>{console.log(Fe),k(at=>{let nt=JSON.parse(JSON.stringify(at.loc));return console.log(at.objetivo.type),{...at,loc:st(nt,Fe,at.objetivo.type)}})},Rt=Fe=>{console.log("update objetivo"),k(at=>{let nt=JSON.parse(JSON.stringify(at));return nt.objetivo=Fe,Fe.type!==at.objetivo.type&&(nt.loc=[]),nt})},Lt=()=>{oe(Fe=>!Fe)};return f1(async()=>{if(console.log("change objetivo"),O!==C.objetivo.id){console.log("are different"),D(C.objetivo.id);const Fe=await fetch(`/api/planning/missionparam/${C.objetivo.id}`);if(Fe.ok){console.log("response ok");const at=await Fe.json();if(console.log(at),at.hasOwnProperty("settings"))if(C.bases.length==0){console.log("settings base lenght  zero");let nt=M.bases.map(()=>{let ge={};return Object.keys(at).forEach(tt=>{ge[tt]={},Object.keys(at[tt]).forEach(rt=>{ge[tt][rt]=at[tt][rt].default})}),ge});k(ge=>{const tt=JSON.parse(JSON.stringify(ge));return tt.bases=nt,tt.settings=at,tt})}else{console.log("change basesss");let nt={};Object.keys(at.settings).forEach(ge=>{nt[ge]=at.settings[ge].default}),console.log(nt),k(ge=>{const tt=JSON.parse(JSON.stringify(ge));return tt.bases=tt.bases.map(rt=>({...rt,settings:nt})),tt.settings=at,console.log(tt),tt})}}else throw Error(await Fe.text())}else console.log("are equal")},[C.objetivo,O]),W.useEffect(()=>{B==2&&C.objetivo.id!=3?f(!0):f(!1),B==2&&C.objetivo.id==3?g(!0):g(!1)},[B,C.objetivo]),W.useEffect(()=>{T(b)},[b]),W.useEffect(()=>{k(S)},[S]),W.useEffect(()=>{n(mh.updateMarker(M))},[M]),W.useEffect(()=>{n(mh.updatePlanning(C))},[C]),W.useEffect(()=>{const Fe=setInterval(()=>{console.log("response Planning"),x(nt=>nt+1)},5e3),at=async()=>{const nt=await fetch(`http://127.0.0.1:8004/get_plan?IDs=${C.id}`);if(nt.ok){const ge=await nt.json();console.log(ge),Array.isArray(ge.results)&&ge.results.length>0&&ge.results[0].hasOwnProperty("route")&&(console.log("response to check planning"),x(10),n(_f.updateMission({...ge.results[0],version:"3"})))}else throw Error(await nt.text())};return v<4?at():clearInterval(Fe),()=>clearInterval(Fe)},[v]),F.jsx("div",{className:t.root,children:F.jsx(SU,{children:F.jsxs(mE,{notification:edt,children:[F.jsx(RR,{}),F.jsx(gE,{}),F.jsxs("div",{className:t.mapContainer,children:[F.jsxs(Q$,{children:[X&&F.jsx(lse,{}),F.jsx(Yut,{markers:M,selectMarkers:C.loc,showTitles:r,showLines:o,moveMarkers:a,setMarkers:dt,SelectItems:d,CreateItems:p,setLocations:lt}),F.jsx(bU,{})]}),F.jsx(xU,{})]}),F.jsx("div",{className:t.sidebarStyle,children:F.jsx("div",{className:t.middleStyle,children:F.jsxs(Gs,{square:!0,children:[F.jsxs(z0,{className:t.toolbar,children:[F.jsx(br,{edge:"start",sx:{mr:2},onClick:()=>e(-1),children:F.jsx(bE,{})}),F.jsx(Bn,{variant:"h6",className:t.title,children:"Planning"}),F.jsx(Bn,{children:"Show Mission"}),F.jsx(Kne,{checked:X,onChange:Lt,name:"checkedA",inputProps:{"aria-label":"secondary checkbox"}}),F.jsx(br,{onClick:()=>{he({...C,markersbase:M.bases,elements:M.elements})},children:F.jsx(CU,{})}),F.jsx(br,{onClick:re,children:F.jsx(yu,{})}),F.jsx(Tie,{readFile:Fe=>{be(Fe)},typefiles:".yaml, .plan, .waypoint, .kml"})]}),F.jsx("div",{className:t.list,children:F.jsxs(Dut,{value:B,children:[F.jsx(hs,{sx:{borderBottom:1,borderColor:"divider"},children:F.jsxs(Fut,{onChange:Ee,"aria-label":"lab API tabs example",children:[F.jsx(jv,{label:"Elements",value:"1"}),F.jsx(jv,{label:"Planning",value:"2"}),F.jsx(jv,{label:"Settings",value:"3"})]})}),F.jsx(Z3,{value:"1",children:F.jsxs("div",{className:t.details,children:[F.jsxs(pl,{children:[F.jsx(gl,{expandIcon:F.jsx(La,{}),children:F.jsx(Bn,{children:"Base elements"})}),F.jsx(ml,{className:t.details,children:F.jsx(Oce,{markers:M.bases,setMarkers:Ne})})]}),F.jsx(Tb,{}),F.jsxs(pl,{children:[F.jsx(gl,{expandIcon:F.jsx(La,{}),children:F.jsx(Bn,{children:"Interest Elements"})}),F.jsx(ml,{className:t.details,children:F.jsx(Kut,{markers:M.elements,setMarkers:Ge})})]}),F.jsx(hs,{textAlign:"center",children:F.jsx(jr,{variant:"contained",size:"large",className:t.panelButton,onClick:pe,children:"Save Global Markers"})})]})}),F.jsx(Z3,{value:"2",children:F.jsxs(hs,{className:t.details,children:[F.jsx(gi,{required:!0,fullWidth:!0,label:"id",type:"number",variant:"standard",value:C.id?C.id:123,onChange:Fe=>k({...C,id:Fe.target.value})}),F.jsx(gi,{required:!0,fullWidth:!0,label:"Name Mission",variant:"standard",value:C.name?C.name:" ",onChange:Fe=>k({...C,name:Fe.target.value})}),F.jsx(sd,{emptyValue:null,fullWidth:!0,label:"objetive",value:C.objetivo.id,endpoint:"/api/planning/missionstype",keyGetter:Fe=>Fe.id,titleGetter:Fe=>Fe.name,onChange:(Fe,at)=>{Rt(at[Fe.target.value])},getItems:Fe=>{console.log(Fe),k({...C,objetivo:Fe})}}),F.jsxs(pl,{children:[F.jsx(gl,{expandIcon:F.jsx(La,{}),children:F.jsx(Bn,{children:"Points to inspect "})}),F.jsx(ml,{className:t.details,children:F.jsxs("div",{className:t.details,children:[C.objetivo.hasOwnProperty("description")?F.jsx(Bn,{children:C.objetivo.description}):F.jsx(Bn,{children:"select doing click in the map"}),F.jsx(Jut,{Data:C.loc,setData:Ue})]})})]}),F.jsx(Tb,{}),F.jsxs(pl,{children:[F.jsx(gl,{expandIcon:F.jsx(La,{}),children:F.jsx(Bn,{children:"Meteo"})}),F.jsxs(ml,{className:t.details,children:[F.jsx(gi,{required:!0,fullWidth:!0,label:"wind speed",type:"number",variant:"standard",value:12}),F.jsx(gi,{required:!0,fullWidth:!0,label:"Wind direction",type:"number",variant:"standard",value:12}),F.jsx(gi,{required:!0,fullWidth:!0,label:"Temperature",type:"number",variant:"standard",value:12}),F.jsx(gi,{required:!0,fullWidth:!0,label:"Humidity",type:"number",variant:"standard",value:12}),F.jsx(gi,{required:!0,fullWidth:!0,label:"Pressure",type:"number",variant:"standard",value:12})]})]})]})}),F.jsx(Z3,{value:"3",children:F.jsxs("div",{className:t.details,children:[F.jsx(Gut,{data:C.bases,param:C.settings,setData:ve}),F.jsxs(hs,{textAlign:"center",children:[F.jsx(jr,{variant:"contained",size:"large",className:t.panelButton,onClick:pe,children:"Plannig"}),F.jsx(jr,{variant:"contained",size:"large",className:t.panelButton,onClick:ue,children:"Planing with Global Setting"}),F.jsx(jr,{variant:"contained",size:"large",className:t.panelButton,onClick:()=>ie({...C,markersbase:M.bases,elements:M.elements}),children:"Save Global Settings"})]}),F.jsx(Bn,{children:J})]})})]})})]})})}),F.jsx("div",{className:t.panelElevation,children:F.jsx("div",{className:t.middleStyle,children:F.jsx(Gs,{square:!0,children:F.jsx(L6,{})})})})]})})})};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const OO="162",Jc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Qc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Lce=0,n4=1,Dce=2,ndt=3,Nce=0,LO=1,WS=2,uh=3,vm=0,Wl=1,bh=2,im=0,u0=1,r4=2,i4=3,o4=4,zce=5,zg=100,Fce=101,Bce=102,s4=103,a4=104,$ce=200,jce=201,Uce=202,Vce=203,KI=204,ZI=205,Wce=206,Hce=207,Gce=208,qce=209,Yce=210,Xce=211,Kce=212,Zce=213,Jce=214,Qce=0,eue=1,tue=2,yM=3,nue=4,rue=5,iue=6,oue=7,DE=0,sue=1,aue=2,kf=0,lue=1,cue=2,uue=3,D6=4,due=5,hue=6,fue=7,l4="attached",pue="detached",DO=300,_m=301,yy=302,vM=303,_M=304,B1=306,xM=1e3,fl=1001,bM=1002,cs=1003,JI=1004,rdt=1004,Dv=1005,idt=1005,Lo=1006,HS=1007,odt=1007,bf=1008,sdt=1008,Rf=1009,mue=1010,gue=1011,NO=1012,N6=1013,Yp=1014,iu=1015,Kb=1016,z6=1017,F6=1018,sy=1020,yue=1021,Bl=1023,vue=1024,_ue=1025,ay=1026,I0=1027,B6=1028,$6=1029,xue=1030,j6=1031,U6=1033,VA=33776,WA=33777,HA=33778,GA=33779,c4=35840,u4=35841,d4=35842,h4=35843,V6=36196,f4=37492,p4=37496,m4=37808,g4=37809,y4=37810,v4=37811,_4=37812,x4=37813,b4=37814,w4=37815,S4=37816,M4=37817,E4=37818,T4=37819,C4=37820,A4=37821,qA=36492,P4=36494,I4=36495,bue=36283,k4=36284,R4=36285,O4=36286,wue=2200,Sue=2201,Mue=2202,wM=2300,SM=2301,YA=2302,Kv=2400,Zv=2401,MM=2402,zO=2500,W6=2501,adt=0,ldt=1,cdt=2,Eue=3200,Tue=3201,ky=0,Cue=1,Fp="",td="srgb",Im="srgb-linear",FO="display-p3",NE="display-p3-linear",EM="linear",so="srgb",TM="rec709",CM="p3",udt=0,kv=7680,ddt=7681,hdt=7682,fdt=7683,pdt=34055,mdt=34056,gdt=5386,ydt=512,vdt=513,_dt=514,xdt=515,bdt=516,wdt=517,Sdt=518,L4=519,Aue=512,Pue=513,Iue=514,H6=515,kue=516,Rue=517,Oue=518,Lue=519,AM=35044,Mdt=35048,Edt=35040,Tdt=35045,Cdt=35049,Adt=35041,Pdt=35046,Idt=35050,kdt=35042,Rdt="100",D4="300 es",QI=1035,wf=2e3,PM=2001;class Dh{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,s=i.length;o<s;o++)i[o].call(this,e);e.target=null}}}const ol=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let oK=1234567;const d0=Math.PI/180,Zb=180/Math.PI;function du(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ol[t&255]+ol[t>>8&255]+ol[t>>16&255]+ol[t>>24&255]+"-"+ol[e&255]+ol[e>>8&255]+"-"+ol[e>>16&15|64]+ol[e>>24&255]+"-"+ol[n&63|128]+ol[n>>8&255]+"-"+ol[n>>16&255]+ol[n>>24&255]+ol[r&255]+ol[r>>8&255]+ol[r>>16&255]+ol[r>>24&255]).toLowerCase()}function Yo(t,e,n){return Math.max(e,Math.min(n,t))}function G6(t,e){return(t%e+e)%e}function Odt(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function Ldt(t,e,n){return t!==e?(n-t)/(e-t):0}function GS(t,e,n){return(1-n)*t+n*e}function Ddt(t,e,n,r){return GS(t,e,1-Math.exp(-n*r))}function Ndt(t,e=1){return e-Math.abs(G6(t,e*2)-e)}function zdt(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function Fdt(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function Bdt(t,e){return t+Math.floor(Math.random()*(e-t+1))}function $dt(t,e){return t+Math.random()*(e-t)}function jdt(t){return t*(.5-Math.random())}function Udt(t){t!==void 0&&(oK=t);let e=oK+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Vdt(t){return t*d0}function Wdt(t){return t*Zb}function N4(t){return(t&t-1)===0&&t!==0}function Hdt(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function ek(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function Gdt(t,e,n,r,i){const o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),d=o((e+r)/2),f=s((e+r)/2),p=o((e-r)/2),g=s((e-r)/2),v=o((r-e)/2),x=s((r-e)/2);switch(i){case"XYX":t.set(a*f,l*p,l*g,a*d);break;case"YZY":t.set(l*g,a*f,l*p,a*d);break;case"ZXZ":t.set(l*p,l*g,a*f,a*d);break;case"XZX":t.set(a*f,l*x,l*v,a*d);break;case"YXY":t.set(l*v,a*f,l*x,a*d);break;case"ZYZ":t.set(l*x,l*v,a*f,a*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function $l(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function kr(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const Due={DEG2RAD:d0,RAD2DEG:Zb,generateUUID:du,clamp:Yo,euclideanModulo:G6,mapLinear:Odt,inverseLerp:Ldt,lerp:GS,damp:Ddt,pingpong:Ndt,smoothstep:zdt,smootherstep:Fdt,randInt:Bdt,randFloat:$dt,randFloatSpread:jdt,seededRandom:Udt,degToRad:Vdt,radToDeg:Wdt,isPowerOfTwo:N4,ceilPowerOfTwo:Hdt,floorPowerOfTwo:ek,setQuaternionFromProperEuler:Gdt,normalize:kr,denormalize:$l};class $t{constructor(e=0,n=0){$t.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Yo(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),o=this.x-e.x,s=this.y-e.y;return this.x=o*r-s*i+e.x,this.y=o*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ir{constructor(e,n,r,i,o,s,a,l,d){Ir.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,s,a,l,d)}set(e,n,r,i,o,s,a,l,d){const f=this.elements;return f[0]=e,f[1]=i,f[2]=a,f[3]=n,f[4]=o,f[5]=l,f[6]=r,f[7]=s,f[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,s=r[0],a=r[3],l=r[6],d=r[1],f=r[4],p=r[7],g=r[2],v=r[5],x=r[8],b=i[0],S=i[3],M=i[6],T=i[1],C=i[4],k=i[7],O=i[2],D=i[5],B=i[8];return o[0]=s*b+a*T+l*O,o[3]=s*S+a*C+l*D,o[6]=s*M+a*k+l*B,o[1]=d*b+f*T+p*O,o[4]=d*S+f*C+p*D,o[7]=d*M+f*k+p*B,o[2]=g*b+v*T+x*O,o[5]=g*S+v*C+x*D,o[8]=g*M+v*k+x*B,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],d=e[7],f=e[8];return n*s*f-n*a*d-r*o*f+r*a*l+i*o*d-i*s*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],d=e[7],f=e[8],p=f*s-a*d,g=a*l-f*o,v=d*o-s*l,x=n*p+r*g+i*v;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const b=1/x;return e[0]=p*b,e[1]=(i*d-f*r)*b,e[2]=(a*r-i*s)*b,e[3]=g*b,e[4]=(f*n-i*l)*b,e[5]=(i*o-a*n)*b,e[6]=v*b,e[7]=(r*l-d*n)*b,e[8]=(s*n-r*o)*b,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,o,s,a){const l=Math.cos(o),d=Math.sin(o);return this.set(r*l,r*d,-r*(l*s+d*a)+s+e,-i*d,i*l,-i*(-d*s+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(J3.makeScale(e,n)),this}rotate(e){return this.premultiply(J3.makeRotation(-e)),this}translate(e,n){return this.premultiply(J3.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const J3=new Ir;function Nue(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const qdt={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Lx(t,e){return new qdt[t](e)}function IM(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function zue(){const t=IM("canvas");return t.style.display="block",t}const sK={};function Fue(t){t in sK||(sK[t]=!0,console.warn(t))}const aK=new Ir().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),lK=new Ir().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),yC={[Im]:{transfer:EM,primaries:TM,toReference:t=>t,fromReference:t=>t},[td]:{transfer:so,primaries:TM,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[NE]:{transfer:EM,primaries:CM,toReference:t=>t.applyMatrix3(lK),fromReference:t=>t.applyMatrix3(aK)},[FO]:{transfer:so,primaries:CM,toReference:t=>t.convertSRGBToLinear().applyMatrix3(lK),fromReference:t=>t.applyMatrix3(aK).convertLinearToSRGB()}},Ydt=new Set([Im,NE]),Ni={enabled:!0,_workingColorSpace:Im,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!Ydt.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=yC[e].toReference,i=yC[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return yC[t].primaries},getTransfer:function(t){return t===Fp?EM:yC[t].transfer}};function ib(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function Q3(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let N_;class q6{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{N_===void 0&&(N_=IM("canvas")),N_.width=e.width,N_.height=e.height;const r=N_.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=N_}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=IM("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let s=0;s<o.length;s++)o[s]=ib(o[s]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(ib(n[r]/255)*255):n[r]=ib(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Xdt=0;class Jv{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Xdt++}),this.uuid=du(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let s=0,a=i.length;s<a;s++)i[s].isDataTexture?o.push(eN(i[s].image)):o.push(eN(i[s]))}else o=eN(i);r.url=o}return n||(e.images[this.uuid]=r),r}}function eN(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?q6.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Kdt=0;class Fo extends Dh{constructor(e=Fo.DEFAULT_IMAGE,n=Fo.DEFAULT_MAPPING,r=fl,i=fl,o=Lo,s=bf,a=Bl,l=Rf,d=Fo.DEFAULT_ANISOTROPY,f=Fp){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Kdt++}),this.uuid=du(),this.name="",this.source=new Jv(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=s,this.anisotropy=d,this.format=a,this.internalFormat=null,this.type=l,this.offset=new $t(0,0),this.repeat=new $t(1,1),this.center=new $t(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ir,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==DO)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case xM:e.x=e.x-Math.floor(e.x);break;case fl:e.x=e.x<0?0:1;break;case bM:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case xM:e.y=e.y-Math.floor(e.y);break;case fl:e.y=e.y<0?0:1;break;case bM:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Fo.DEFAULT_IMAGE=null;Fo.DEFAULT_MAPPING=DO;Fo.DEFAULT_ANISOTROPY=1;class zi{constructor(e=0,n=0,r=0,i=1){zi.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=this.w,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i+s[12]*o,this.y=s[1]*n+s[5]*r+s[9]*i+s[13]*o,this.z=s[2]*n+s[6]*r+s[10]*i+s[14]*o,this.w=s[3]*n+s[7]*r+s[11]*i+s[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,o;const l=e.elements,d=l[0],f=l[4],p=l[8],g=l[1],v=l[5],x=l[9],b=l[2],S=l[6],M=l[10];if(Math.abs(f-g)<.01&&Math.abs(p-b)<.01&&Math.abs(x-S)<.01){if(Math.abs(f+g)<.1&&Math.abs(p+b)<.1&&Math.abs(x+S)<.1&&Math.abs(d+v+M-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const C=(d+1)/2,k=(v+1)/2,O=(M+1)/2,D=(f+g)/4,B=(p+b)/4,U=(x+S)/4;return C>k&&C>O?C<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(C),i=D/r,o=B/r):k>O?k<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(k),r=D/i,o=U/i):O<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(O),r=B/o,i=U/o),this.set(r,i,o,n),this}let T=Math.sqrt((S-x)*(S-x)+(p-b)*(p-b)+(g-f)*(g-f));return Math.abs(T)<.001&&(T=1),this.x=(S-x)/T,this.y=(p-b)/T,this.z=(g-f)/T,this.w=Math.acos((d+v+M-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Bue extends Dh{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new zi(0,0,e,n),this.scissorTest=!1,this.viewport=new zi(0,0,e,n);const i={width:e,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Lo,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0,count:1},r);const o=new Fo(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);o.flipY=!1,o.generateMipmaps=r.generateMipmaps,o.internalFormat=r.internalFormat,this.textures=[];const s=r.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,o=this.textures.length;i<o;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Jv(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ih extends Bue{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class BO extends Fo{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=cs,this.minFilter=cs,this.wrapR=fl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Zdt extends Ih{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new BO(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class Y6 extends Fo{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=cs,this.minFilter=cs,this.wrapR=fl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Jdt extends Ih{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new Y6(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class ua{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,o,s,a){let l=r[i+0],d=r[i+1],f=r[i+2],p=r[i+3];const g=o[s+0],v=o[s+1],x=o[s+2],b=o[s+3];if(a===0){e[n+0]=l,e[n+1]=d,e[n+2]=f,e[n+3]=p;return}if(a===1){e[n+0]=g,e[n+1]=v,e[n+2]=x,e[n+3]=b;return}if(p!==b||l!==g||d!==v||f!==x){let S=1-a;const M=l*g+d*v+f*x+p*b,T=M>=0?1:-1,C=1-M*M;if(C>Number.EPSILON){const O=Math.sqrt(C),D=Math.atan2(O,M*T);S=Math.sin(S*D)/O,a=Math.sin(a*D)/O}const k=a*T;if(l=l*S+g*k,d=d*S+v*k,f=f*S+x*k,p=p*S+b*k,S===1-a){const O=1/Math.sqrt(l*l+d*d+f*f+p*p);l*=O,d*=O,f*=O,p*=O}}e[n]=l,e[n+1]=d,e[n+2]=f,e[n+3]=p}static multiplyQuaternionsFlat(e,n,r,i,o,s){const a=r[i],l=r[i+1],d=r[i+2],f=r[i+3],p=o[s],g=o[s+1],v=o[s+2],x=o[s+3];return e[n]=a*x+f*p+l*v-d*g,e[n+1]=l*x+f*g+d*p-a*v,e[n+2]=d*x+f*v+a*g-l*p,e[n+3]=f*x-a*p-l*g-d*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,d=a(r/2),f=a(i/2),p=a(o/2),g=l(r/2),v=l(i/2),x=l(o/2);switch(s){case"XYZ":this._x=g*f*p+d*v*x,this._y=d*v*p-g*f*x,this._z=d*f*x+g*v*p,this._w=d*f*p-g*v*x;break;case"YXZ":this._x=g*f*p+d*v*x,this._y=d*v*p-g*f*x,this._z=d*f*x-g*v*p,this._w=d*f*p+g*v*x;break;case"ZXY":this._x=g*f*p-d*v*x,this._y=d*v*p+g*f*x,this._z=d*f*x+g*v*p,this._w=d*f*p-g*v*x;break;case"ZYX":this._x=g*f*p-d*v*x,this._y=d*v*p+g*f*x,this._z=d*f*x-g*v*p,this._w=d*f*p+g*v*x;break;case"YZX":this._x=g*f*p+d*v*x,this._y=d*v*p+g*f*x,this._z=d*f*x-g*v*p,this._w=d*f*p-g*v*x;break;case"XZY":this._x=g*f*p-d*v*x,this._y=d*v*p-g*f*x,this._z=d*f*x+g*v*p,this._w=d*f*p+g*v*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],o=n[8],s=n[1],a=n[5],l=n[9],d=n[2],f=n[6],p=n[10],g=r+a+p;if(g>0){const v=.5/Math.sqrt(g+1);this._w=.25/v,this._x=(f-l)*v,this._y=(o-d)*v,this._z=(s-i)*v}else if(r>a&&r>p){const v=2*Math.sqrt(1+r-a-p);this._w=(f-l)/v,this._x=.25*v,this._y=(i+s)/v,this._z=(o+d)/v}else if(a>p){const v=2*Math.sqrt(1+a-r-p);this._w=(o-d)/v,this._x=(i+s)/v,this._y=.25*v,this._z=(l+f)/v}else{const v=2*Math.sqrt(1+p-r-a);this._w=(s-i)/v,this._x=(o+d)/v,this._y=(l+f)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Yo(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,o=e._z,s=e._w,a=n._x,l=n._y,d=n._z,f=n._w;return this._x=r*f+s*a+i*d-o*l,this._y=i*f+s*l+o*a-r*d,this._z=o*f+s*d+r*l-i*a,this._w=s*f-r*a-i*l-o*d,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,o=this._z,s=this._w;let a=s*e._w+r*e._x+i*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=r,this._y=i,this._z=o,this;const l=1-a*a;if(l<=Number.EPSILON){const v=1-n;return this._w=v*s+n*this._w,this._x=v*r+n*this._x,this._y=v*i+n*this._y,this._z=v*o+n*this._z,this.normalize(),this}const d=Math.sqrt(l),f=Math.atan2(d,a),p=Math.sin((1-n)*f)/d,g=Math.sin(n*f)/d;return this._w=s*p+this._w*g,this._x=r*p+this._x*g,this._y=i*p+this._y*g,this._z=o*p+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),o=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),o*Math.sin(n),o*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Oe{constructor(e=0,n=0,r=0){Oe.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(cK.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(cK.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6]*i,this.y=o[1]*n+o[4]*r+o[7]*i,this.z=o[2]*n+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=e.elements,s=1/(o[3]*n+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*i+o[12])*s,this.y=(o[1]*n+o[5]*r+o[9]*i+o[13])*s,this.z=(o[2]*n+o[6]*r+o[10]*i+o[14])*s,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,o=e.x,s=e.y,a=e.z,l=e.w,d=2*(s*i-a*r),f=2*(a*n-o*i),p=2*(o*r-s*n);return this.x=n+l*d+s*p-a*f,this.y=r+l*f+a*d-o*p,this.z=i+l*p+o*f-s*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i,this.y=o[1]*n+o[5]*r+o[9]*i,this.z=o[2]*n+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,o=e.z,s=n.x,a=n.y,l=n.z;return this.x=i*l-o*a,this.y=o*s-r*l,this.z=r*a-i*s,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return tN.copy(this).projectOnVector(e),this.sub(tN)}reflect(e){return this.sub(tN.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Yo(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const tN=new Oe,cK=new ua;class Hl{constructor(e=new Oe(1/0,1/0,1/0),n=new Oe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(ih.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(ih.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=ih.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const o=r.getAttribute("position");if(n===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,ih):ih.fromBufferAttribute(o,s),ih.applyMatrix4(e.matrixWorld),this.expandByPoint(ih);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),vC.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),vC.copy(r.boundingBox)),vC.applyMatrix4(e.matrixWorld),this.union(vC)}const i=e.children;for(let o=0,s=i.length;o<s;o++)this.expandByObject(i[o],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ih),ih.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(qw),_C.subVectors(this.max,qw),z_.subVectors(e.a,qw),F_.subVectors(e.b,qw),B_.subVectors(e.c,qw),_g.subVectors(F_,z_),xg.subVectors(B_,F_),cv.subVectors(z_,B_);let n=[0,-_g.z,_g.y,0,-xg.z,xg.y,0,-cv.z,cv.y,_g.z,0,-_g.x,xg.z,0,-xg.x,cv.z,0,-cv.x,-_g.y,_g.x,0,-xg.y,xg.x,0,-cv.y,cv.x,0];return!nN(n,z_,F_,B_,_C)||(n=[1,0,0,0,1,0,0,0,1],!nN(n,z_,F_,B_,_C))?!1:(xC.crossVectors(_g,xg),n=[xC.x,xC.y,xC.z],nN(n,z_,F_,B_,_C))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ih).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ih).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Tp[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Tp[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Tp[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Tp[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Tp[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Tp[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Tp[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Tp[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Tp),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Tp=[new Oe,new Oe,new Oe,new Oe,new Oe,new Oe,new Oe,new Oe],ih=new Oe,vC=new Hl,z_=new Oe,F_=new Oe,B_=new Oe,_g=new Oe,xg=new Oe,cv=new Oe,qw=new Oe,_C=new Oe,xC=new Oe,uv=new Oe;function nN(t,e,n,r,i){for(let o=0,s=t.length-3;o<=s;o+=3){uv.fromArray(t,o);const a=i.x*Math.abs(uv.x)+i.y*Math.abs(uv.y)+i.z*Math.abs(uv.z),l=e.dot(uv),d=n.dot(uv),f=r.dot(uv);if(Math.max(-Math.max(l,d,f),Math.min(l,d,f))>a)return!1}return!0}const Qdt=new Hl,Yw=new Oe,rN=new Oe;class _l{constructor(e=new Oe,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):Qdt.setFromPoints(e).getCenter(r);let i=0;for(let o=0,s=e.length;o<s;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Yw.subVectors(e,this.center);const n=Yw.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(Yw,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(rN.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Yw.copy(e.center).add(rN)),this.expandByPoint(Yw.copy(e.center).sub(rN))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Cp=new Oe,iN=new Oe,bC=new Oe,bg=new Oe,oN=new Oe,wC=new Oe,sN=new Oe;class Ry{constructor(e=new Oe,n=new Oe(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Cp)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Cp.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Cp.copy(this.origin).addScaledVector(this.direction,n),Cp.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){iN.copy(e).add(n).multiplyScalar(.5),bC.copy(n).sub(e).normalize(),bg.copy(this.origin).sub(iN);const o=e.distanceTo(n)*.5,s=-this.direction.dot(bC),a=bg.dot(this.direction),l=-bg.dot(bC),d=bg.lengthSq(),f=Math.abs(1-s*s);let p,g,v,x;if(f>0)if(p=s*l-a,g=s*a-l,x=o*f,p>=0)if(g>=-x)if(g<=x){const b=1/f;p*=b,g*=b,v=p*(p+s*g+2*a)+g*(s*p+g+2*l)+d}else g=o,p=Math.max(0,-(s*g+a)),v=-p*p+g*(g+2*l)+d;else g=-o,p=Math.max(0,-(s*g+a)),v=-p*p+g*(g+2*l)+d;else g<=-x?(p=Math.max(0,-(-s*o+a)),g=p>0?-o:Math.min(Math.max(-o,-l),o),v=-p*p+g*(g+2*l)+d):g<=x?(p=0,g=Math.min(Math.max(-o,-l),o),v=g*(g+2*l)+d):(p=Math.max(0,-(s*o+a)),g=p>0?o:Math.min(Math.max(-o,-l),o),v=-p*p+g*(g+2*l)+d);else g=s>0?-o:o,p=Math.max(0,-(s*g+a)),v=-p*p+g*(g+2*l)+d;return r&&r.copy(this.origin).addScaledVector(this.direction,p),i&&i.copy(iN).addScaledVector(bC,g),v}intersectSphere(e,n){Cp.subVectors(e.center,this.origin);const r=Cp.dot(this.direction),i=Cp.dot(Cp)-r*r,o=e.radius*e.radius;if(i>o)return null;const s=Math.sqrt(o-i),a=r-s,l=r+s;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,o,s,a,l;const d=1/this.direction.x,f=1/this.direction.y,p=1/this.direction.z,g=this.origin;return d>=0?(r=(e.min.x-g.x)*d,i=(e.max.x-g.x)*d):(r=(e.max.x-g.x)*d,i=(e.min.x-g.x)*d),f>=0?(o=(e.min.y-g.y)*f,s=(e.max.y-g.y)*f):(o=(e.max.y-g.y)*f,s=(e.min.y-g.y)*f),r>s||o>i||((o>r||isNaN(r))&&(r=o),(s<i||isNaN(i))&&(i=s),p>=0?(a=(e.min.z-g.z)*p,l=(e.max.z-g.z)*p):(a=(e.max.z-g.z)*p,l=(e.min.z-g.z)*p),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Cp)!==null}intersectTriangle(e,n,r,i,o){oN.subVectors(n,e),wC.subVectors(r,e),sN.crossVectors(oN,wC);let s=this.direction.dot(sN),a;if(s>0){if(i)return null;a=1}else if(s<0)a=-1,s=-s;else return null;bg.subVectors(this.origin,e);const l=a*this.direction.dot(wC.crossVectors(bg,wC));if(l<0)return null;const d=a*this.direction.dot(oN.cross(bg));if(d<0||l+d>s)return null;const f=-a*bg.dot(sN);return f<0?null:this.at(f/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class mr{constructor(e,n,r,i,o,s,a,l,d,f,p,g,v,x,b,S){mr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,s,a,l,d,f,p,g,v,x,b,S)}set(e,n,r,i,o,s,a,l,d,f,p,g,v,x,b,S){const M=this.elements;return M[0]=e,M[4]=n,M[8]=r,M[12]=i,M[1]=o,M[5]=s,M[9]=a,M[13]=l,M[2]=d,M[6]=f,M[10]=p,M[14]=g,M[3]=v,M[7]=x,M[11]=b,M[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new mr().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/$_.setFromMatrixColumn(e,0).length(),o=1/$_.setFromMatrixColumn(e,1).length(),s=1/$_.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,o=e.z,s=Math.cos(r),a=Math.sin(r),l=Math.cos(i),d=Math.sin(i),f=Math.cos(o),p=Math.sin(o);if(e.order==="XYZ"){const g=s*f,v=s*p,x=a*f,b=a*p;n[0]=l*f,n[4]=-l*p,n[8]=d,n[1]=v+x*d,n[5]=g-b*d,n[9]=-a*l,n[2]=b-g*d,n[6]=x+v*d,n[10]=s*l}else if(e.order==="YXZ"){const g=l*f,v=l*p,x=d*f,b=d*p;n[0]=g+b*a,n[4]=x*a-v,n[8]=s*d,n[1]=s*p,n[5]=s*f,n[9]=-a,n[2]=v*a-x,n[6]=b+g*a,n[10]=s*l}else if(e.order==="ZXY"){const g=l*f,v=l*p,x=d*f,b=d*p;n[0]=g-b*a,n[4]=-s*p,n[8]=x+v*a,n[1]=v+x*a,n[5]=s*f,n[9]=b-g*a,n[2]=-s*d,n[6]=a,n[10]=s*l}else if(e.order==="ZYX"){const g=s*f,v=s*p,x=a*f,b=a*p;n[0]=l*f,n[4]=x*d-v,n[8]=g*d+b,n[1]=l*p,n[5]=b*d+g,n[9]=v*d-x,n[2]=-d,n[6]=a*l,n[10]=s*l}else if(e.order==="YZX"){const g=s*l,v=s*d,x=a*l,b=a*d;n[0]=l*f,n[4]=b-g*p,n[8]=x*p+v,n[1]=p,n[5]=s*f,n[9]=-a*f,n[2]=-d*f,n[6]=v*p+x,n[10]=g-b*p}else if(e.order==="XZY"){const g=s*l,v=s*d,x=a*l,b=a*d;n[0]=l*f,n[4]=-p,n[8]=d*f,n[1]=g*p+b,n[5]=s*f,n[9]=v*p-x,n[2]=x*p-v,n[6]=a*f,n[10]=b*p+g}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(eht,e,tht)}lookAt(e,n,r){const i=this.elements;return Hc.subVectors(e,n),Hc.lengthSq()===0&&(Hc.z=1),Hc.normalize(),wg.crossVectors(r,Hc),wg.lengthSq()===0&&(Math.abs(r.z)===1?Hc.x+=1e-4:Hc.z+=1e-4,Hc.normalize(),wg.crossVectors(r,Hc)),wg.normalize(),SC.crossVectors(Hc,wg),i[0]=wg.x,i[4]=SC.x,i[8]=Hc.x,i[1]=wg.y,i[5]=SC.y,i[9]=Hc.y,i[2]=wg.z,i[6]=SC.z,i[10]=Hc.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,s=r[0],a=r[4],l=r[8],d=r[12],f=r[1],p=r[5],g=r[9],v=r[13],x=r[2],b=r[6],S=r[10],M=r[14],T=r[3],C=r[7],k=r[11],O=r[15],D=i[0],B=i[4],U=i[8],J=i[12],V=i[1],X=i[5],oe=i[9],pe=i[13],re=i[2],he=i[6],ue=i[10],be=i[14],ie=i[3],ve=i[7],Ee=i[11],Ne=i[15];return o[0]=s*D+a*V+l*re+d*ie,o[4]=s*B+a*X+l*he+d*ve,o[8]=s*U+a*oe+l*ue+d*Ee,o[12]=s*J+a*pe+l*be+d*Ne,o[1]=f*D+p*V+g*re+v*ie,o[5]=f*B+p*X+g*he+v*ve,o[9]=f*U+p*oe+g*ue+v*Ee,o[13]=f*J+p*pe+g*be+v*Ne,o[2]=x*D+b*V+S*re+M*ie,o[6]=x*B+b*X+S*he+M*ve,o[10]=x*U+b*oe+S*ue+M*Ee,o[14]=x*J+b*pe+S*be+M*Ne,o[3]=T*D+C*V+k*re+O*ie,o[7]=T*B+C*X+k*he+O*ve,o[11]=T*U+C*oe+k*ue+O*Ee,o[15]=T*J+C*pe+k*be+O*Ne,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],o=e[12],s=e[1],a=e[5],l=e[9],d=e[13],f=e[2],p=e[6],g=e[10],v=e[14],x=e[3],b=e[7],S=e[11],M=e[15];return x*(+o*l*p-i*d*p-o*a*g+r*d*g+i*a*v-r*l*v)+b*(+n*l*v-n*d*g+o*s*g-i*s*v+i*d*f-o*l*f)+S*(+n*d*p-n*a*v-o*s*p+r*s*v+o*a*f-r*d*f)+M*(-i*a*f-n*l*p+n*a*g+i*s*p-r*s*g+r*l*f)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],d=e[7],f=e[8],p=e[9],g=e[10],v=e[11],x=e[12],b=e[13],S=e[14],M=e[15],T=p*S*d-b*g*d+b*l*v-a*S*v-p*l*M+a*g*M,C=x*g*d-f*S*d-x*l*v+s*S*v+f*l*M-s*g*M,k=f*b*d-x*p*d+x*a*v-s*b*v-f*a*M+s*p*M,O=x*p*l-f*b*l-x*a*g+s*b*g+f*a*S-s*p*S,D=n*T+r*C+i*k+o*O;if(D===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const B=1/D;return e[0]=T*B,e[1]=(b*g*o-p*S*o-b*i*v+r*S*v+p*i*M-r*g*M)*B,e[2]=(a*S*o-b*l*o+b*i*d-r*S*d-a*i*M+r*l*M)*B,e[3]=(p*l*o-a*g*o-p*i*d+r*g*d+a*i*v-r*l*v)*B,e[4]=C*B,e[5]=(f*S*o-x*g*o+x*i*v-n*S*v-f*i*M+n*g*M)*B,e[6]=(x*l*o-s*S*o-x*i*d+n*S*d+s*i*M-n*l*M)*B,e[7]=(s*g*o-f*l*o+f*i*d-n*g*d-s*i*v+n*l*v)*B,e[8]=k*B,e[9]=(x*p*o-f*b*o-x*r*v+n*b*v+f*r*M-n*p*M)*B,e[10]=(s*b*o-x*a*o+x*r*d-n*b*d-s*r*M+n*a*M)*B,e[11]=(f*a*o-s*p*o-f*r*d+n*p*d+s*r*v-n*a*v)*B,e[12]=O*B,e[13]=(f*b*i-x*p*i+x*r*g-n*b*g-f*r*S+n*p*S)*B,e[14]=(x*a*i-s*b*i-x*r*l+n*b*l+s*r*S-n*a*S)*B,e[15]=(s*p*i-f*a*i+f*r*l-n*p*l-s*r*g+n*a*g)*B,this}scale(e){const n=this.elements,r=e.x,i=e.y,o=e.z;return n[0]*=r,n[4]*=i,n[8]*=o,n[1]*=r,n[5]*=i,n[9]*=o,n[2]*=r,n[6]*=i,n[10]*=o,n[3]*=r,n[7]*=i,n[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),o=1-r,s=e.x,a=e.y,l=e.z,d=o*s,f=o*a;return this.set(d*s+r,d*a-i*l,d*l+i*a,0,d*a+i*l,f*a+r,f*l-i*s,0,d*l-i*a,f*l+i*s,o*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,o,s){return this.set(1,r,o,0,e,1,s,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,o=n._x,s=n._y,a=n._z,l=n._w,d=o+o,f=s+s,p=a+a,g=o*d,v=o*f,x=o*p,b=s*f,S=s*p,M=a*p,T=l*d,C=l*f,k=l*p,O=r.x,D=r.y,B=r.z;return i[0]=(1-(b+M))*O,i[1]=(v+k)*O,i[2]=(x-C)*O,i[3]=0,i[4]=(v-k)*D,i[5]=(1-(g+M))*D,i[6]=(S+T)*D,i[7]=0,i[8]=(x+C)*B,i[9]=(S-T)*B,i[10]=(1-(g+b))*B,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let o=$_.set(i[0],i[1],i[2]).length();const s=$_.set(i[4],i[5],i[6]).length(),a=$_.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],oh.copy(this);const d=1/o,f=1/s,p=1/a;return oh.elements[0]*=d,oh.elements[1]*=d,oh.elements[2]*=d,oh.elements[4]*=f,oh.elements[5]*=f,oh.elements[6]*=f,oh.elements[8]*=p,oh.elements[9]*=p,oh.elements[10]*=p,n.setFromRotationMatrix(oh),r.x=o,r.y=s,r.z=a,this}makePerspective(e,n,r,i,o,s,a=wf){const l=this.elements,d=2*o/(n-e),f=2*o/(r-i),p=(n+e)/(n-e),g=(r+i)/(r-i);let v,x;if(a===wf)v=-(s+o)/(s-o),x=-2*s*o/(s-o);else if(a===PM)v=-s/(s-o),x=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=d,l[4]=0,l[8]=p,l[12]=0,l[1]=0,l[5]=f,l[9]=g,l[13]=0,l[2]=0,l[6]=0,l[10]=v,l[14]=x,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,o,s,a=wf){const l=this.elements,d=1/(n-e),f=1/(r-i),p=1/(s-o),g=(n+e)*d,v=(r+i)*f;let x,b;if(a===wf)x=(s+o)*p,b=-2*p;else if(a===PM)x=o*p,b=-1*p;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*d,l[4]=0,l[8]=0,l[12]=-g,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-v,l[2]=0,l[6]=0,l[10]=b,l[14]=-x,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const $_=new Oe,oh=new mr,eht=new Oe(0,0,0),tht=new Oe(1,1,1),wg=new Oe,SC=new Oe,Hc=new Oe,uK=new mr,dK=new ua;class _u{constructor(e=0,n=0,r=0,i=_u.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,o=i[0],s=i[4],a=i[8],l=i[1],d=i[5],f=i[9],p=i[2],g=i[6],v=i[10];switch(n){case"XYZ":this._y=Math.asin(Yo(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-f,v),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(g,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Yo(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(a,v),this._z=Math.atan2(l,d)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(Yo(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-p,v),this._z=Math.atan2(-s,d)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-Yo(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(g,v),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,d));break;case"YZX":this._z=Math.asin(Yo(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,d),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(a,v));break;case"XZY":this._z=Math.asin(-Yo(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(g,d),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-f,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return uK.makeRotationFromQuaternion(e),this.setFromRotationMatrix(uK,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return dK.setFromEuler(this),this.setFromQuaternion(dK,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}_u.DEFAULT_ORDER="XYZ";class h0{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let nht=0;const hK=new Oe,j_=new ua,Ap=new mr,MC=new Oe,Xw=new Oe,rht=new Oe,iht=new ua,fK=new Oe(1,0,0),pK=new Oe(0,1,0),mK=new Oe(0,0,1),oht={type:"added"},sht={type:"removed"},aN={type:"childadded",child:null},lN={type:"childremoved",child:null};class vi extends Dh{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:nht++}),this.uuid=du(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=vi.DEFAULT_UP.clone();const e=new Oe,n=new _u,r=new ua,i=new Oe(1,1,1);function o(){r.setFromEuler(n,!1)}function s(){n.setFromQuaternion(r,void 0,!1)}n._onChange(o),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new mr},normalMatrix:{value:new Ir}}),this.matrix=new mr,this.matrixWorld=new mr,this.matrixAutoUpdate=vi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=vi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new h0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return j_.setFromAxisAngle(e,n),this.quaternion.multiply(j_),this}rotateOnWorldAxis(e,n){return j_.setFromAxisAngle(e,n),this.quaternion.premultiply(j_),this}rotateX(e){return this.rotateOnAxis(fK,e)}rotateY(e){return this.rotateOnAxis(pK,e)}rotateZ(e){return this.rotateOnAxis(mK,e)}translateOnAxis(e,n){return hK.copy(e).applyQuaternion(this.quaternion),this.position.add(hK.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(fK,e)}translateY(e){return this.translateOnAxis(pK,e)}translateZ(e){return this.translateOnAxis(mK,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ap.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?MC.copy(e):MC.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Xw.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ap.lookAt(Xw,MC,this.up):Ap.lookAt(MC,Xw,this.up),this.quaternion.setFromRotationMatrix(Ap),i&&(Ap.extractRotation(i.matrixWorld),j_.setFromRotationMatrix(Ap),this.quaternion.premultiply(j_.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(oht),aN.child=e,this.dispatchEvent(aN),aN.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(sht),lN.child=e,this.dispatchEvent(lN),lN.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ap.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ap.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ap),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,n);if(s!==void 0)return s}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let o=0,s=i.length;o<s;o++)i[o].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xw,e,rht),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xw,iht,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const o=n[r];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let o=0,s=i.length;o<s;o++){const a=i[o];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function o(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let d=0,f=l.length;d<f;d++){const p=l[d];o(e.shapes,p)}else o(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,d=this.material.length;l<d;l++)a.push(o(e.materials,this.material[l]));i.material=a}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(o(e.animations,l))}}if(n){const a=s(e.geometries),l=s(e.materials),d=s(e.textures),f=s(e.images),p=s(e.shapes),g=s(e.skeletons),v=s(e.animations),x=s(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),d.length>0&&(r.textures=d),f.length>0&&(r.images=f),p.length>0&&(r.shapes=p),g.length>0&&(r.skeletons=g),v.length>0&&(r.animations=v),x.length>0&&(r.nodes=x)}return r.object=i,r;function s(a){const l=[];for(const d in a){const f=a[d];delete f.metadata,l.push(f)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}vi.DEFAULT_UP=new Oe(0,1,0);vi.DEFAULT_MATRIX_AUTO_UPDATE=!0;vi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const sh=new Oe,Pp=new Oe,cN=new Oe,Ip=new Oe,U_=new Oe,V_=new Oe,gK=new Oe,uN=new Oe,dN=new Oe,hN=new Oe;class ou{constructor(e=new Oe,n=new Oe,r=new Oe){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),sh.subVectors(e,n),i.cross(sh);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,n,r,i,o){sh.subVectors(i,n),Pp.subVectors(r,n),cN.subVectors(e,n);const s=sh.dot(sh),a=sh.dot(Pp),l=sh.dot(cN),d=Pp.dot(Pp),f=Pp.dot(cN),p=s*d-a*a;if(p===0)return o.set(0,0,0),null;const g=1/p,v=(d*l-a*f)*g,x=(s*f-a*l)*g;return o.set(1-v-x,x,v)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Ip)===null?!1:Ip.x>=0&&Ip.y>=0&&Ip.x+Ip.y<=1}static getInterpolation(e,n,r,i,o,s,a,l){return this.getBarycoord(e,n,r,i,Ip)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,Ip.x),l.addScaledVector(s,Ip.y),l.addScaledVector(a,Ip.z),l)}static isFrontFacing(e,n,r,i){return sh.subVectors(r,n),Pp.subVectors(e,n),sh.cross(Pp).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return sh.subVectors(this.c,this.b),Pp.subVectors(this.a,this.b),sh.cross(Pp).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ou.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return ou.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,o){return ou.getInterpolation(e,this.a,this.b,this.c,n,r,i,o)}containsPoint(e){return ou.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ou.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,o=this.c;let s,a;U_.subVectors(i,r),V_.subVectors(o,r),uN.subVectors(e,r);const l=U_.dot(uN),d=V_.dot(uN);if(l<=0&&d<=0)return n.copy(r);dN.subVectors(e,i);const f=U_.dot(dN),p=V_.dot(dN);if(f>=0&&p<=f)return n.copy(i);const g=l*p-f*d;if(g<=0&&l>=0&&f<=0)return s=l/(l-f),n.copy(r).addScaledVector(U_,s);hN.subVectors(e,o);const v=U_.dot(hN),x=V_.dot(hN);if(x>=0&&v<=x)return n.copy(o);const b=v*d-l*x;if(b<=0&&d>=0&&x<=0)return a=d/(d-x),n.copy(r).addScaledVector(V_,a);const S=f*x-v*p;if(S<=0&&p-f>=0&&v-x>=0)return gK.subVectors(o,i),a=(p-f)/(p-f+(v-x)),n.copy(i).addScaledVector(gK,a);const M=1/(S+b+g);return s=b*M,a=g*M,n.copy(r).addScaledVector(U_,s).addScaledVector(V_,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const $ue={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Sg={h:0,s:0,l:0},EC={h:0,s:0,l:0};function fN(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class Dn{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=td){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ni.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=Ni.workingColorSpace){return this.r=e,this.g=n,this.b=r,Ni.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=Ni.workingColorSpace){if(e=G6(e,1),n=Yo(n,0,1),r=Yo(r,0,1),n===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,s=2*r-o;this.r=fN(s,o,e+1/3),this.g=fN(s,o,e),this.b=fN(s,o,e-1/3)}return Ni.toWorkingColorSpace(this,i),this}setStyle(e,n=td){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const s=i[1],a=i[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=i[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(s===6)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=td){const r=$ue[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ib(e.r),this.g=ib(e.g),this.b=ib(e.b),this}copyLinearToSRGB(e){return this.r=Q3(e.r),this.g=Q3(e.g),this.b=Q3(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=td){return Ni.fromWorkingColorSpace(sl.copy(this),e),Math.round(Yo(sl.r*255,0,255))*65536+Math.round(Yo(sl.g*255,0,255))*256+Math.round(Yo(sl.b*255,0,255))}getHexString(e=td){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Ni.workingColorSpace){Ni.fromWorkingColorSpace(sl.copy(this),n);const r=sl.r,i=sl.g,o=sl.b,s=Math.max(r,i,o),a=Math.min(r,i,o);let l,d;const f=(a+s)/2;if(a===s)l=0,d=0;else{const p=s-a;switch(d=f<=.5?p/(s+a):p/(2-s-a),s){case r:l=(i-o)/p+(i<o?6:0);break;case i:l=(o-r)/p+2;break;case o:l=(r-i)/p+4;break}l/=6}return e.h=l,e.s=d,e.l=f,e}getRGB(e,n=Ni.workingColorSpace){return Ni.fromWorkingColorSpace(sl.copy(this),n),e.r=sl.r,e.g=sl.g,e.b=sl.b,e}getStyle(e=td){Ni.fromWorkingColorSpace(sl.copy(this),e);const n=sl.r,r=sl.g,i=sl.b;return e!==td?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(Sg),this.setHSL(Sg.h+e,Sg.s+n,Sg.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Sg),e.getHSL(EC);const r=GS(Sg.h,EC.h,n),i=GS(Sg.s,EC.s,n),o=GS(Sg.l,EC.l,n);return this.setHSL(r,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,o=e.elements;return this.r=o[0]*n+o[3]*r+o[6]*i,this.g=o[1]*n+o[4]*r+o[7]*i,this.b=o[2]*n+o[5]*r+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const sl=new Dn;Dn.NAMES=$ue;let aht=0;class $a extends Dh{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:aht++}),this.uuid=du(),this.name="",this.type="Material",this.blending=u0,this.side=vm,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=KI,this.blendDst=ZI,this.blendEquation=zg,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Dn(0,0,0),this.blendAlpha=0,this.depthFunc=yM,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=L4,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=kv,this.stencilZFail=kv,this.stencilZPass=kv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==u0&&(r.blending=this.blending),this.side!==vm&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==KI&&(r.blendSrc=this.blendSrc),this.blendDst!==ZI&&(r.blendDst=this.blendDst),this.blendEquation!==zg&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==yM&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==L4&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==kv&&(r.stencilFail=this.stencilFail),this.stencilZFail!==kv&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==kv&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const s=[];for(const a in o){const l=o[a];delete l.metadata,s.push(l)}return s}if(n){const o=i(e.textures),s=i(e.images);o.length>0&&(r.textures=o),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=n[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Oy extends $a{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Dn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new _u,this.combine=DE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Bp=lht();function lht(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const d=l-127;d<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):d<-14?(r[l]=1024>>-d-14,r[l|256]=1024>>-d-14|32768,i[l]=-d-1,i[l|256]=-d-1):d<=15?(r[l]=d+15<<10,r[l|256]=d+15<<10|32768,i[l]=13,i[l|256]=13):d<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const o=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let d=l<<13,f=0;for(;!(d&8388608);)d<<=1,f-=8388608;d&=-8388609,f+=947912704,o[l]=d|f}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:o,exponentTable:s,offsetTable:a}}function hc(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Yo(t,-65504,65504),Bp.floatView[0]=t;const e=Bp.uint32View[0],n=e>>23&511;return Bp.baseTable[n]+((e&8388607)>>Bp.shiftTable[n])}function vS(t){const e=t>>10;return Bp.uint32View[0]=Bp.mantissaTable[Bp.offsetTable[e]+(t&1023)]+Bp.exponentTable[e],Bp.floatView[0]}const cht={toHalfFloat:hc,fromHalfFloat:vS},Ms=new Oe,TC=new $t;class Xi{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=AM,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=iu,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return Fue("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)TC.fromBufferAttribute(this,n),TC.applyMatrix3(e),this.setXY(n,TC.x,TC.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Ms.fromBufferAttribute(this,n),Ms.applyMatrix3(e),this.setXYZ(n,Ms.x,Ms.y,Ms.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Ms.fromBufferAttribute(this,n),Ms.applyMatrix4(e),this.setXYZ(n,Ms.x,Ms.y,Ms.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Ms.fromBufferAttribute(this,n),Ms.applyNormalMatrix(e),this.setXYZ(n,Ms.x,Ms.y,Ms.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Ms.fromBufferAttribute(this,n),Ms.transformDirection(e),this.setXYZ(n,Ms.x,Ms.y,Ms.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=$l(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=kr(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=$l(n,this.array)),n}setX(e,n){return this.normalized&&(n=kr(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=$l(n,this.array)),n}setY(e,n){return this.normalized&&(n=kr(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=$l(n,this.array)),n}setZ(e,n){return this.normalized&&(n=kr(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=$l(n,this.array)),n}setW(e,n){return this.normalized&&(n=kr(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=kr(n,this.array),r=kr(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=kr(n,this.array),r=kr(r,this.array),i=kr(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e*=this.itemSize,this.normalized&&(n=kr(n,this.array),r=kr(r,this.array),i=kr(i,this.array),o=kr(o,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==AM&&(e.usage=this.usage),e}}class uht extends Xi{constructor(e,n,r){super(new Int8Array(e),n,r)}}class dht extends Xi{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class hht extends Xi{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class fht extends Xi{constructor(e,n,r){super(new Int16Array(e),n,r)}}class X6 extends Xi{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class pht extends Xi{constructor(e,n,r){super(new Int32Array(e),n,r)}}class K6 extends Xi{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class mht extends Xi{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=vS(this.array[e*this.itemSize]);return this.normalized&&(n=$l(n,this.array)),n}setX(e,n){return this.normalized&&(n=kr(n,this.array)),this.array[e*this.itemSize]=hc(n),this}getY(e){let n=vS(this.array[e*this.itemSize+1]);return this.normalized&&(n=$l(n,this.array)),n}setY(e,n){return this.normalized&&(n=kr(n,this.array)),this.array[e*this.itemSize+1]=hc(n),this}getZ(e){let n=vS(this.array[e*this.itemSize+2]);return this.normalized&&(n=$l(n,this.array)),n}setZ(e,n){return this.normalized&&(n=kr(n,this.array)),this.array[e*this.itemSize+2]=hc(n),this}getW(e){let n=vS(this.array[e*this.itemSize+3]);return this.normalized&&(n=$l(n,this.array)),n}setW(e,n){return this.normalized&&(n=kr(n,this.array)),this.array[e*this.itemSize+3]=hc(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=kr(n,this.array),r=kr(r,this.array)),this.array[e+0]=hc(n),this.array[e+1]=hc(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=kr(n,this.array),r=kr(r,this.array),i=kr(i,this.array)),this.array[e+0]=hc(n),this.array[e+1]=hc(r),this.array[e+2]=hc(i),this}setXYZW(e,n,r,i,o){return e*=this.itemSize,this.normalized&&(n=kr(n,this.array),r=kr(r,this.array),i=kr(i,this.array),o=kr(o,this.array)),this.array[e+0]=hc(n),this.array[e+1]=hc(r),this.array[e+2]=hc(i),this.array[e+3]=hc(o),this}}class Qn extends Xi{constructor(e,n,r){super(new Float32Array(e),n,r)}}let ght=0;const Zu=new mr,pN=new vi,W_=new Oe,Gc=new Hl,Kw=new Hl,oa=new Oe;class Lr extends Dh{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ght++}),this.uuid=du(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Nue(e)?K6:X6)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new Ir().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Zu.makeRotationFromQuaternion(e),this.applyMatrix4(Zu),this}rotateX(e){return Zu.makeRotationX(e),this.applyMatrix4(Zu),this}rotateY(e){return Zu.makeRotationY(e),this.applyMatrix4(Zu),this}rotateZ(e){return Zu.makeRotationZ(e),this.applyMatrix4(Zu),this}translate(e,n,r){return Zu.makeTranslation(e,n,r),this.applyMatrix4(Zu),this}scale(e,n,r){return Zu.makeScale(e,n,r),this.applyMatrix4(Zu),this}lookAt(e){return pN.lookAt(e),pN.updateMatrix(),this.applyMatrix4(pN.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(W_).negate(),this.translate(W_.x,W_.y,W_.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Qn(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Hl);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Oe(-1/0,-1/0,-1/0),new Oe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const o=n[r];Gc.setFromBufferAttribute(o),this.morphTargetsRelative?(oa.addVectors(this.boundingBox.min,Gc.min),this.boundingBox.expandByPoint(oa),oa.addVectors(this.boundingBox.max,Gc.max),this.boundingBox.expandByPoint(oa)):(this.boundingBox.expandByPoint(Gc.min),this.boundingBox.expandByPoint(Gc.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new _l);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Oe,1/0);return}if(e){const r=this.boundingSphere.center;if(Gc.setFromBufferAttribute(e),n)for(let o=0,s=n.length;o<s;o++){const a=n[o];Kw.setFromBufferAttribute(a),this.morphTargetsRelative?(oa.addVectors(Gc.min,Kw.min),Gc.expandByPoint(oa),oa.addVectors(Gc.max,Kw.max),Gc.expandByPoint(oa)):(Gc.expandByPoint(Kw.min),Gc.expandByPoint(Kw.max))}Gc.getCenter(r);let i=0;for(let o=0,s=e.count;o<s;o++)oa.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(oa));if(n)for(let o=0,s=n.length;o<s;o++){const a=n[o],l=this.morphTargetsRelative;for(let d=0,f=a.count;d<f;d++)oa.fromBufferAttribute(a,d),l&&(W_.fromBufferAttribute(e,d),oa.add(W_)),i=Math.max(i,r.distanceToSquared(oa))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,o=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Xi(new Float32Array(4*r.count),4));const s=this.getAttribute("tangent"),a=[],l=[];for(let U=0;U<r.count;U++)a[U]=new Oe,l[U]=new Oe;const d=new Oe,f=new Oe,p=new Oe,g=new $t,v=new $t,x=new $t,b=new Oe,S=new Oe;function M(U,J,V){d.fromBufferAttribute(r,U),f.fromBufferAttribute(r,J),p.fromBufferAttribute(r,V),g.fromBufferAttribute(o,U),v.fromBufferAttribute(o,J),x.fromBufferAttribute(o,V),f.sub(d),p.sub(d),v.sub(g),x.sub(g);const X=1/(v.x*x.y-x.x*v.y);isFinite(X)&&(b.copy(f).multiplyScalar(x.y).addScaledVector(p,-v.y).multiplyScalar(X),S.copy(p).multiplyScalar(v.x).addScaledVector(f,-x.x).multiplyScalar(X),a[U].add(b),a[J].add(b),a[V].add(b),l[U].add(S),l[J].add(S),l[V].add(S))}let T=this.groups;T.length===0&&(T=[{start:0,count:e.count}]);for(let U=0,J=T.length;U<J;++U){const V=T[U],X=V.start,oe=V.count;for(let pe=X,re=X+oe;pe<re;pe+=3)M(e.getX(pe+0),e.getX(pe+1),e.getX(pe+2))}const C=new Oe,k=new Oe,O=new Oe,D=new Oe;function B(U){O.fromBufferAttribute(i,U),D.copy(O);const J=a[U];C.copy(J),C.sub(O.multiplyScalar(O.dot(J))).normalize(),k.crossVectors(D,J);const X=k.dot(l[U])<0?-1:1;s.setXYZW(U,C.x,C.y,C.z,X)}for(let U=0,J=T.length;U<J;++U){const V=T[U],X=V.start,oe=V.count;for(let pe=X,re=X+oe;pe<re;pe+=3)B(e.getX(pe+0)),B(e.getX(pe+1)),B(e.getX(pe+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Xi(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let g=0,v=r.count;g<v;g++)r.setXYZ(g,0,0,0);const i=new Oe,o=new Oe,s=new Oe,a=new Oe,l=new Oe,d=new Oe,f=new Oe,p=new Oe;if(e)for(let g=0,v=e.count;g<v;g+=3){const x=e.getX(g+0),b=e.getX(g+1),S=e.getX(g+2);i.fromBufferAttribute(n,x),o.fromBufferAttribute(n,b),s.fromBufferAttribute(n,S),f.subVectors(s,o),p.subVectors(i,o),f.cross(p),a.fromBufferAttribute(r,x),l.fromBufferAttribute(r,b),d.fromBufferAttribute(r,S),a.add(f),l.add(f),d.add(f),r.setXYZ(x,a.x,a.y,a.z),r.setXYZ(b,l.x,l.y,l.z),r.setXYZ(S,d.x,d.y,d.z)}else for(let g=0,v=n.count;g<v;g+=3)i.fromBufferAttribute(n,g+0),o.fromBufferAttribute(n,g+1),s.fromBufferAttribute(n,g+2),f.subVectors(s,o),p.subVectors(i,o),f.cross(p),r.setXYZ(g+0,f.x,f.y,f.z),r.setXYZ(g+1,f.x,f.y,f.z),r.setXYZ(g+2,f.x,f.y,f.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)oa.fromBufferAttribute(e,n),oa.normalize(),e.setXYZ(n,oa.x,oa.y,oa.z)}toNonIndexed(){function e(a,l){const d=a.array,f=a.itemSize,p=a.normalized,g=new d.constructor(l.length*f);let v=0,x=0;for(let b=0,S=l.length;b<S;b++){a.isInterleavedBufferAttribute?v=l[b]*a.data.stride+a.offset:v=l[b]*f;for(let M=0;M<f;M++)g[x++]=d[v++]}return new Xi(g,f,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Lr,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],d=e(l,r);n.setAttribute(a,d)}const o=this.morphAttributes;for(const a in o){const l=[],d=o[a];for(let f=0,p=d.length;f<p;f++){const g=d[f],v=e(g,r);l.push(v)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,l=s.length;a<l;a++){const d=s[a];n.addGroup(d.start,d.count,d.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const d in l)l[d]!==void 0&&(e[d]=l[d]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const d=r[l];e.data.attributes[l]=d.toJSON(e.data)}const i={};let o=!1;for(const l in this.morphAttributes){const d=this.morphAttributes[l],f=[];for(let p=0,g=d.length;p<g;p++){const v=d[p];f.push(v.toJSON(e.data))}f.length>0&&(i[l]=f,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const d in i){const f=i[d];this.setAttribute(d,f.clone(n))}const o=e.morphAttributes;for(const d in o){const f=[],p=o[d];for(let g=0,v=p.length;g<v;g++)f.push(p[g].clone(n));this.morphAttributes[d]=f}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let d=0,f=s.length;d<f;d++){const p=s[d];this.addGroup(p.start,p.count,p.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const yK=new mr,dv=new Ry,CC=new _l,vK=new Oe,H_=new Oe,G_=new Oe,q_=new Oe,mN=new Oe,AC=new Oe,PC=new $t,IC=new $t,kC=new $t,_K=new Oe,xK=new Oe,bK=new Oe,RC=new Oe,OC=new Oe;class Cs extends vi{constructor(e=new Lr,n=new Oy){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,s=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(o&&a){AC.set(0,0,0);for(let l=0,d=o.length;l<d;l++){const f=a[l],p=o[l];f!==0&&(mN.fromBufferAttribute(p,e),s?AC.addScaledVector(mN,f):AC.addScaledVector(mN.sub(n),f))}n.add(AC)}return n}raycast(e,n){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),CC.copy(r.boundingSphere),CC.applyMatrix4(o),dv.copy(e.ray).recast(e.near),!(CC.containsPoint(dv.origin)===!1&&(dv.intersectSphere(CC,vK)===null||dv.origin.distanceToSquared(vK)>(e.far-e.near)**2))&&(yK.copy(o).invert(),dv.copy(e.ray).applyMatrix4(yK),!(r.boundingBox!==null&&dv.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,dv)))}_computeIntersections(e,n,r){let i;const o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,d=o.attributes.uv,f=o.attributes.uv1,p=o.attributes.normal,g=o.groups,v=o.drawRange;if(a!==null)if(Array.isArray(s))for(let x=0,b=g.length;x<b;x++){const S=g[x],M=s[S.materialIndex],T=Math.max(S.start,v.start),C=Math.min(a.count,Math.min(S.start+S.count,v.start+v.count));for(let k=T,O=C;k<O;k+=3){const D=a.getX(k),B=a.getX(k+1),U=a.getX(k+2);i=LC(this,M,e,r,d,f,p,D,B,U),i&&(i.faceIndex=Math.floor(k/3),i.face.materialIndex=S.materialIndex,n.push(i))}}else{const x=Math.max(0,v.start),b=Math.min(a.count,v.start+v.count);for(let S=x,M=b;S<M;S+=3){const T=a.getX(S),C=a.getX(S+1),k=a.getX(S+2);i=LC(this,s,e,r,d,f,p,T,C,k),i&&(i.faceIndex=Math.floor(S/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(s))for(let x=0,b=g.length;x<b;x++){const S=g[x],M=s[S.materialIndex],T=Math.max(S.start,v.start),C=Math.min(l.count,Math.min(S.start+S.count,v.start+v.count));for(let k=T,O=C;k<O;k+=3){const D=k,B=k+1,U=k+2;i=LC(this,M,e,r,d,f,p,D,B,U),i&&(i.faceIndex=Math.floor(k/3),i.face.materialIndex=S.materialIndex,n.push(i))}}else{const x=Math.max(0,v.start),b=Math.min(l.count,v.start+v.count);for(let S=x,M=b;S<M;S+=3){const T=S,C=S+1,k=S+2;i=LC(this,s,e,r,d,f,p,T,C,k),i&&(i.faceIndex=Math.floor(S/3),n.push(i))}}}}function yht(t,e,n,r,i,o,s,a){let l;if(e.side===Wl?l=r.intersectTriangle(s,o,i,!0,a):l=r.intersectTriangle(i,o,s,e.side===vm,a),l===null)return null;OC.copy(a),OC.applyMatrix4(t.matrixWorld);const d=n.ray.origin.distanceTo(OC);return d<n.near||d>n.far?null:{distance:d,point:OC.clone(),object:t}}function LC(t,e,n,r,i,o,s,a,l,d){t.getVertexPosition(a,H_),t.getVertexPosition(l,G_),t.getVertexPosition(d,q_);const f=yht(t,e,n,r,H_,G_,q_,RC);if(f){i&&(PC.fromBufferAttribute(i,a),IC.fromBufferAttribute(i,l),kC.fromBufferAttribute(i,d),f.uv=ou.getInterpolation(RC,H_,G_,q_,PC,IC,kC,new $t)),o&&(PC.fromBufferAttribute(o,a),IC.fromBufferAttribute(o,l),kC.fromBufferAttribute(o,d),f.uv1=ou.getInterpolation(RC,H_,G_,q_,PC,IC,kC,new $t)),s&&(_K.fromBufferAttribute(s,a),xK.fromBufferAttribute(s,l),bK.fromBufferAttribute(s,d),f.normal=ou.getInterpolation(RC,H_,G_,q_,_K,xK,bK,new Oe),f.normal.dot(r.direction)>0&&f.normal.multiplyScalar(-1));const p={a,b:l,c:d,normal:new Oe,materialIndex:0};ou.getNormal(H_,G_,q_,p.normal),f.face=p}return f}class Ly extends Lr{constructor(e=1,n=1,r=1,i=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:s};const a=this;i=Math.floor(i),o=Math.floor(o),s=Math.floor(s);const l=[],d=[],f=[],p=[];let g=0,v=0;x("z","y","x",-1,-1,r,n,e,s,o,0),x("z","y","x",1,-1,r,n,-e,s,o,1),x("x","z","y",1,1,e,r,n,i,s,2),x("x","z","y",1,-1,e,r,-n,i,s,3),x("x","y","z",1,-1,e,n,r,i,o,4),x("x","y","z",-1,-1,e,n,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new Qn(d,3)),this.setAttribute("normal",new Qn(f,3)),this.setAttribute("uv",new Qn(p,2));function x(b,S,M,T,C,k,O,D,B,U,J){const V=k/B,X=O/U,oe=k/2,pe=O/2,re=D/2,he=B+1,ue=U+1;let be=0,ie=0;const ve=new Oe;for(let Ee=0;Ee<ue;Ee++){const Ne=Ee*X-pe;for(let Ge=0;Ge<he;Ge++){const dt=Ge*V-oe;ve[b]=dt*T,ve[S]=Ne*C,ve[M]=re,d.push(ve.x,ve.y,ve.z),ve[b]=0,ve[S]=0,ve[M]=D>0?1:-1,f.push(ve.x,ve.y,ve.z),p.push(Ge/B),p.push(1-Ee/U),be+=1}}for(let Ee=0;Ee<U;Ee++)for(let Ne=0;Ne<B;Ne++){const Ge=g+Ne+he*Ee,dt=g+Ne+he*(Ee+1),Ue=g+(Ne+1)+he*(Ee+1),st=g+(Ne+1)+he*Ee;l.push(Ge,dt,st),l.push(dt,Ue,st),ie+=6}a.addGroup(v,ie,J),v+=ie,g+=be}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ly(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Jb(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Ll(t){const e={};for(let n=0;n<t.length;n++){const r=Jb(t[n]);for(const i in r)e[i]=r[i]}return e}function vht(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function jue(t){return t.getRenderTarget()===null?t.outputColorSpace:Ni.workingColorSpace}const Uue={clone:Jb,merge:Ll};var _ht=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,xht=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class kh extends $a{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=_ht,this.fragmentShader=xht,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Jb(e.uniforms),this.uniformsGroups=vht(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?n.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?n.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?n.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?n.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?n.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?n.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?n.uniforms[i]={type:"m4",value:s.toArray()}:n.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class zE extends vi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new mr,this.projectionMatrix=new mr,this.projectionMatrixInverse=new mr,this.coordinateSystem=wf}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Mg=new Oe,wK=new $t,SK=new $t;class Xo extends zE{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Zb*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(d0*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Zb*2*Math.atan(Math.tan(d0*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){Mg.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Mg.x,Mg.y).multiplyScalar(-e/Mg.z),Mg.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Mg.x,Mg.y).multiplyScalar(-e/Mg.z)}getViewSize(e,n){return this.getViewBounds(e,wK,SK),n.subVectors(SK,wK)}setViewOffset(e,n,r,i,o,s){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(d0*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,o=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,d=s.fullHeight;o+=s.offsetX*i/l,n-=s.offsetY*r/d,i*=s.width/l,r*=s.height/d}const a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Y_=-90,X_=1;class Vue extends vi{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Xo(Y_,X_,e,n);i.layers=this.layers,this.add(i);const o=new Xo(Y_,X_,e,n);o.layers=this.layers,this.add(o);const s=new Xo(Y_,X_,e,n);s.layers=this.layers,this.add(s);const a=new Xo(Y_,X_,e,n);a.layers=this.layers,this.add(a);const l=new Xo(Y_,X_,e,n);l.layers=this.layers,this.add(l);const d=new Xo(Y_,X_,e,n);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,o,s,a,l]=n;for(const d of n)this.remove(d);if(e===wf)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===PM)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const d of n)this.add(d),d.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,s,a,l,d,f]=this.children,p=e.getRenderTarget(),g=e.getActiveCubeFace(),v=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const b=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,o),e.setRenderTarget(r,1,i),e.render(n,s),e.setRenderTarget(r,2,i),e.render(n,a),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,d),r.texture.generateMipmaps=b,e.setRenderTarget(r,5,i),e.render(n,f),e.setRenderTarget(p,g,v),e.xr.enabled=x,r.texture.needsPMREMUpdate=!0}}class FE extends Fo{constructor(e,n,r,i,o,s,a,l,d,f){e=e!==void 0?e:[],n=n!==void 0?n:_m,super(e,n,r,i,o,s,a,l,d,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Wue extends Ih{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new FE(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Lo}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Ly(5,5,5),o=new kh({name:"CubemapFromEquirect",uniforms:Jb(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Wl,blending:im});o.uniforms.tEquirect.value=n;const s=new Cs(i,o),a=n.minFilter;return n.minFilter===bf&&(n.minFilter=Lo),new Vue(1,10,this).update(e,s),n.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,n,r,i){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(n,r,i);e.setRenderTarget(o)}}const gN=new Oe,bht=new Oe,wht=new Ir;class gf{constructor(e=new Oe(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=gN.subVectors(r,n).cross(bht.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(gN),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:n.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||wht.getNormalMatrix(e),i=this.coplanarPoint(gN).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const hv=new _l,DC=new Oe;class BE{constructor(e=new gf,n=new gf,r=new gf,i=new gf,o=new gf,s=new gf){this.planes=[e,n,r,i,o,s]}set(e,n,r,i,o,s){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(o),a[5].copy(s),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=wf){const r=this.planes,i=e.elements,o=i[0],s=i[1],a=i[2],l=i[3],d=i[4],f=i[5],p=i[6],g=i[7],v=i[8],x=i[9],b=i[10],S=i[11],M=i[12],T=i[13],C=i[14],k=i[15];if(r[0].setComponents(l-o,g-d,S-v,k-M).normalize(),r[1].setComponents(l+o,g+d,S+v,k+M).normalize(),r[2].setComponents(l+s,g+f,S+x,k+T).normalize(),r[3].setComponents(l-s,g-f,S-x,k-T).normalize(),r[4].setComponents(l-a,g-p,S-b,k-C).normalize(),n===wf)r[5].setComponents(l+a,g+p,S+b,k+C).normalize();else if(n===PM)r[5].setComponents(a,p,b,C).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),hv.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),hv.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(hv)}intersectsSprite(e){return hv.center.set(0,0,0),hv.radius=.7071067811865476,hv.applyMatrix4(e.matrixWorld),this.intersectsSphere(hv)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(DC.x=i.normal.x>0?e.max.x:e.min.x,DC.y=i.normal.y>0?e.max.y:e.min.y,DC.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(DC)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Hue(){let t=null,e=!1,n=null,r=null;function i(o,s){n(o,s),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){n=o},setContext:function(o){t=o}}}function Sht(t,e){const n=e.isWebGL2,r=new WeakMap;function i(d,f){const p=d.array,g=d.usage,v=p.byteLength,x=t.createBuffer();t.bindBuffer(f,x),t.bufferData(f,p,g),d.onUploadCallback();let b;if(p instanceof Float32Array)b=t.FLOAT;else if(p instanceof Uint16Array)if(d.isFloat16BufferAttribute)if(n)b=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else b=t.UNSIGNED_SHORT;else if(p instanceof Int16Array)b=t.SHORT;else if(p instanceof Uint32Array)b=t.UNSIGNED_INT;else if(p instanceof Int32Array)b=t.INT;else if(p instanceof Int8Array)b=t.BYTE;else if(p instanceof Uint8Array)b=t.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)b=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:x,type:b,bytesPerElement:p.BYTES_PER_ELEMENT,version:d.version,size:v}}function o(d,f,p){const g=f.array,v=f._updateRange,x=f.updateRanges;if(t.bindBuffer(p,d),v.count===-1&&x.length===0&&t.bufferSubData(p,0,g),x.length!==0){for(let b=0,S=x.length;b<S;b++){const M=x[b];n?t.bufferSubData(p,M.start*g.BYTES_PER_ELEMENT,g,M.start,M.count):t.bufferSubData(p,M.start*g.BYTES_PER_ELEMENT,g.subarray(M.start,M.start+M.count))}f.clearUpdateRanges()}v.count!==-1&&(n?t.bufferSubData(p,v.offset*g.BYTES_PER_ELEMENT,g,v.offset,v.count):t.bufferSubData(p,v.offset*g.BYTES_PER_ELEMENT,g.subarray(v.offset,v.offset+v.count)),v.count=-1),f.onUploadCallback()}function s(d){return d.isInterleavedBufferAttribute&&(d=d.data),r.get(d)}function a(d){d.isInterleavedBufferAttribute&&(d=d.data);const f=r.get(d);f&&(t.deleteBuffer(f.buffer),r.delete(d))}function l(d,f){if(d.isGLBufferAttribute){const g=r.get(d);(!g||g.version<d.version)&&r.set(d,{buffer:d.buffer,type:d.type,bytesPerElement:d.elementSize,version:d.version});return}d.isInterleavedBufferAttribute&&(d=d.data);const p=r.get(d);if(p===void 0)r.set(d,i(d,f));else if(p.version<d.version){if(p.size!==d.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");o(p.buffer,d,f),p.version=d.version}}return{get:s,remove:a,update:l}}class $1 extends Lr{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const o=e/2,s=n/2,a=Math.floor(r),l=Math.floor(i),d=a+1,f=l+1,p=e/a,g=n/l,v=[],x=[],b=[],S=[];for(let M=0;M<f;M++){const T=M*g-s;for(let C=0;C<d;C++){const k=C*p-o;x.push(k,-T,0),b.push(0,0,1),S.push(C/a),S.push(1-M/l)}}for(let M=0;M<l;M++)for(let T=0;T<a;T++){const C=T+d*M,k=T+d*(M+1),O=T+1+d*(M+1),D=T+1+d*M;v.push(C,k,D),v.push(k,O,D)}this.setIndex(v),this.setAttribute("position",new Qn(x,3)),this.setAttribute("normal",new Qn(b,3)),this.setAttribute("uv",new Qn(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $1(e.width,e.height,e.widthSegments,e.heightSegments)}}var Mht=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Eht=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Tht=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Cht=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Aht=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Pht=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Iht=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,kht=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Rht=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Oht=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,Lht=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Dht=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Nht=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,zht=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Fht=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Bht=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,$ht=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,jht=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Uht=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Vht=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Wht=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Hht=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Ght=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,qht=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Yht=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Xht=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Kht=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Zht=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Jht=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Qht=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,eft="gl_FragColor = linearToOutputTexel( gl_FragColor );",tft=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,nft=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,rft=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,ift=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,oft=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,sft=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,aft=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,lft=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,cft=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,uft=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,dft=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,hft=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,fft=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,pft=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,mft=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,gft=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,yft=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,vft=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,_ft=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,xft=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,bft=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,wft=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Sft=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Mft=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Eft=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Tft=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Cft=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Aft=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Pft=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Ift=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,kft=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Rft=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Oft=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Lft=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Dft=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Nft=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,zft=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Fft=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Bft=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,$ft=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,jft=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Uft=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Vft=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Wft=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Hft=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Gft=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,qft=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Yft=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Xft=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Kft=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Zft=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Jft=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Qft=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,ept=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,tpt=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,npt=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,rpt=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,ipt=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,opt=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,spt=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,apt=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,lpt=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,cpt=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,upt=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,dpt=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,hpt=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,fpt=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,ppt=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,mpt=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,gpt=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ypt=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	float startCompression = 0.8 - 0.04;
	float desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min(color.r, min(color.g, color.b));
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max(color.r, max(color.g, color.b));
	if (peak < startCompression) return color;
	float d = 1. - startCompression;
	float newPeak = 1. - d * d / (peak + d - startCompression);
	color *= newPeak / peak;
	float g = 1. - 1. / (desaturation * (peak - newPeak) + 1.);
	return mix(color, vec3(1, 1, 1), g);
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,vpt=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,_pt=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,xpt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,bpt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,wpt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Spt=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Mpt=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Ept=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Tpt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Cpt=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Apt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Ppt=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ipt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,kpt=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Rpt=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Opt=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Lpt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Dpt=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Npt=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,zpt=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Fpt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Bpt=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$pt=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jpt=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Upt=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Vpt=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wpt=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Hpt=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Gpt=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qpt=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ypt=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Xpt=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Kpt=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Zpt=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Jpt=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Qpt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,emt=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tmt=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,nmt=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,rmt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Nr={alphahash_fragment:Mht,alphahash_pars_fragment:Eht,alphamap_fragment:Tht,alphamap_pars_fragment:Cht,alphatest_fragment:Aht,alphatest_pars_fragment:Pht,aomap_fragment:Iht,aomap_pars_fragment:kht,batching_pars_vertex:Rht,batching_vertex:Oht,begin_vertex:Lht,beginnormal_vertex:Dht,bsdfs:Nht,iridescence_fragment:zht,bumpmap_pars_fragment:Fht,clipping_planes_fragment:Bht,clipping_planes_pars_fragment:$ht,clipping_planes_pars_vertex:jht,clipping_planes_vertex:Uht,color_fragment:Vht,color_pars_fragment:Wht,color_pars_vertex:Hht,color_vertex:Ght,common:qht,cube_uv_reflection_fragment:Yht,defaultnormal_vertex:Xht,displacementmap_pars_vertex:Kht,displacementmap_vertex:Zht,emissivemap_fragment:Jht,emissivemap_pars_fragment:Qht,colorspace_fragment:eft,colorspace_pars_fragment:tft,envmap_fragment:nft,envmap_common_pars_fragment:rft,envmap_pars_fragment:ift,envmap_pars_vertex:oft,envmap_physical_pars_fragment:yft,envmap_vertex:sft,fog_vertex:aft,fog_pars_vertex:lft,fog_fragment:cft,fog_pars_fragment:uft,gradientmap_pars_fragment:dft,lightmap_fragment:hft,lightmap_pars_fragment:fft,lights_lambert_fragment:pft,lights_lambert_pars_fragment:mft,lights_pars_begin:gft,lights_toon_fragment:vft,lights_toon_pars_fragment:_ft,lights_phong_fragment:xft,lights_phong_pars_fragment:bft,lights_physical_fragment:wft,lights_physical_pars_fragment:Sft,lights_fragment_begin:Mft,lights_fragment_maps:Eft,lights_fragment_end:Tft,logdepthbuf_fragment:Cft,logdepthbuf_pars_fragment:Aft,logdepthbuf_pars_vertex:Pft,logdepthbuf_vertex:Ift,map_fragment:kft,map_pars_fragment:Rft,map_particle_fragment:Oft,map_particle_pars_fragment:Lft,metalnessmap_fragment:Dft,metalnessmap_pars_fragment:Nft,morphinstance_vertex:zft,morphcolor_vertex:Fft,morphnormal_vertex:Bft,morphtarget_pars_vertex:$ft,morphtarget_vertex:jft,normal_fragment_begin:Uft,normal_fragment_maps:Vft,normal_pars_fragment:Wft,normal_pars_vertex:Hft,normal_vertex:Gft,normalmap_pars_fragment:qft,clearcoat_normal_fragment_begin:Yft,clearcoat_normal_fragment_maps:Xft,clearcoat_pars_fragment:Kft,iridescence_pars_fragment:Zft,opaque_fragment:Jft,packing:Qft,premultiplied_alpha_fragment:ept,project_vertex:tpt,dithering_fragment:npt,dithering_pars_fragment:rpt,roughnessmap_fragment:ipt,roughnessmap_pars_fragment:opt,shadowmap_pars_fragment:spt,shadowmap_pars_vertex:apt,shadowmap_vertex:lpt,shadowmask_pars_fragment:cpt,skinbase_vertex:upt,skinning_pars_vertex:dpt,skinning_vertex:hpt,skinnormal_vertex:fpt,specularmap_fragment:ppt,specularmap_pars_fragment:mpt,tonemapping_fragment:gpt,tonemapping_pars_fragment:ypt,transmission_fragment:vpt,transmission_pars_fragment:_pt,uv_pars_fragment:xpt,uv_pars_vertex:bpt,uv_vertex:wpt,worldpos_vertex:Spt,background_vert:Mpt,background_frag:Ept,backgroundCube_vert:Tpt,backgroundCube_frag:Cpt,cube_vert:Apt,cube_frag:Ppt,depth_vert:Ipt,depth_frag:kpt,distanceRGBA_vert:Rpt,distanceRGBA_frag:Opt,equirect_vert:Lpt,equirect_frag:Dpt,linedashed_vert:Npt,linedashed_frag:zpt,meshbasic_vert:Fpt,meshbasic_frag:Bpt,meshlambert_vert:$pt,meshlambert_frag:jpt,meshmatcap_vert:Upt,meshmatcap_frag:Vpt,meshnormal_vert:Wpt,meshnormal_frag:Hpt,meshphong_vert:Gpt,meshphong_frag:qpt,meshphysical_vert:Ypt,meshphysical_frag:Xpt,meshtoon_vert:Kpt,meshtoon_frag:Zpt,points_vert:Jpt,points_frag:Qpt,shadow_vert:emt,shadow_frag:tmt,sprite_vert:nmt,sprite_frag:rmt},Sn={common:{diffuse:{value:new Dn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ir},alphaMap:{value:null},alphaMapTransform:{value:new Ir},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ir}},envmap:{envMap:{value:null},envMapRotation:{value:new Ir},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ir}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ir}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ir},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ir},normalScale:{value:new $t(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ir},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ir}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ir}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ir}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Dn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Dn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ir},alphaTest:{value:0},uvTransform:{value:new Ir}},sprite:{diffuse:{value:new Dn(16777215)},opacity:{value:1},center:{value:new $t(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ir},alphaMap:{value:null},alphaMapTransform:{value:new Ir},alphaTest:{value:0}}},vh={basic:{uniforms:Ll([Sn.common,Sn.specularmap,Sn.envmap,Sn.aomap,Sn.lightmap,Sn.fog]),vertexShader:Nr.meshbasic_vert,fragmentShader:Nr.meshbasic_frag},lambert:{uniforms:Ll([Sn.common,Sn.specularmap,Sn.envmap,Sn.aomap,Sn.lightmap,Sn.emissivemap,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,Sn.fog,Sn.lights,{emissive:{value:new Dn(0)}}]),vertexShader:Nr.meshlambert_vert,fragmentShader:Nr.meshlambert_frag},phong:{uniforms:Ll([Sn.common,Sn.specularmap,Sn.envmap,Sn.aomap,Sn.lightmap,Sn.emissivemap,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,Sn.fog,Sn.lights,{emissive:{value:new Dn(0)},specular:{value:new Dn(1118481)},shininess:{value:30}}]),vertexShader:Nr.meshphong_vert,fragmentShader:Nr.meshphong_frag},standard:{uniforms:Ll([Sn.common,Sn.envmap,Sn.aomap,Sn.lightmap,Sn.emissivemap,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,Sn.roughnessmap,Sn.metalnessmap,Sn.fog,Sn.lights,{emissive:{value:new Dn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Nr.meshphysical_vert,fragmentShader:Nr.meshphysical_frag},toon:{uniforms:Ll([Sn.common,Sn.aomap,Sn.lightmap,Sn.emissivemap,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,Sn.gradientmap,Sn.fog,Sn.lights,{emissive:{value:new Dn(0)}}]),vertexShader:Nr.meshtoon_vert,fragmentShader:Nr.meshtoon_frag},matcap:{uniforms:Ll([Sn.common,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,Sn.fog,{matcap:{value:null}}]),vertexShader:Nr.meshmatcap_vert,fragmentShader:Nr.meshmatcap_frag},points:{uniforms:Ll([Sn.points,Sn.fog]),vertexShader:Nr.points_vert,fragmentShader:Nr.points_frag},dashed:{uniforms:Ll([Sn.common,Sn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Nr.linedashed_vert,fragmentShader:Nr.linedashed_frag},depth:{uniforms:Ll([Sn.common,Sn.displacementmap]),vertexShader:Nr.depth_vert,fragmentShader:Nr.depth_frag},normal:{uniforms:Ll([Sn.common,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,{opacity:{value:1}}]),vertexShader:Nr.meshnormal_vert,fragmentShader:Nr.meshnormal_frag},sprite:{uniforms:Ll([Sn.sprite,Sn.fog]),vertexShader:Nr.sprite_vert,fragmentShader:Nr.sprite_frag},background:{uniforms:{uvTransform:{value:new Ir},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Nr.background_vert,fragmentShader:Nr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ir}},vertexShader:Nr.backgroundCube_vert,fragmentShader:Nr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Nr.cube_vert,fragmentShader:Nr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Nr.equirect_vert,fragmentShader:Nr.equirect_frag},distanceRGBA:{uniforms:Ll([Sn.common,Sn.displacementmap,{referencePosition:{value:new Oe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Nr.distanceRGBA_vert,fragmentShader:Nr.distanceRGBA_frag},shadow:{uniforms:Ll([Sn.lights,Sn.fog,{color:{value:new Dn(0)},opacity:{value:1}}]),vertexShader:Nr.shadow_vert,fragmentShader:Nr.shadow_frag}};vh.physical={uniforms:Ll([vh.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ir},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ir},clearcoatNormalScale:{value:new $t(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ir},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ir},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ir},sheen:{value:0},sheenColor:{value:new Dn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ir},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ir},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ir},transmissionSamplerSize:{value:new $t},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ir},attenuationDistance:{value:0},attenuationColor:{value:new Dn(0)},specularColor:{value:new Dn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ir},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ir},anisotropyVector:{value:new $t},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ir}}]),vertexShader:Nr.meshphysical_vert,fragmentShader:Nr.meshphysical_frag};const NC={r:0,b:0,g:0},fv=new _u,imt=new mr;function omt(t,e,n,r,i,o,s){const a=new Dn(0);let l=o===!0?0:1,d,f,p=null,g=0,v=null;function x(S,M){let T=!1,C=M.isScene===!0?M.background:null;C&&C.isTexture&&(C=(M.backgroundBlurriness>0?n:e).get(C)),C===null?b(a,l):C&&C.isColor&&(b(C,1),T=!0);const k=t.xr.getEnvironmentBlendMode();k==="additive"?r.buffers.color.setClear(0,0,0,1,s):k==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(t.autoClear||T)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),C&&(C.isCubeTexture||C.mapping===B1)?(f===void 0&&(f=new Cs(new Ly(1,1,1),new kh({name:"BackgroundCubeMaterial",uniforms:Jb(vh.backgroundCube.uniforms),vertexShader:vh.backgroundCube.vertexShader,fragmentShader:vh.backgroundCube.fragmentShader,side:Wl,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(O,D,B){this.matrixWorld.copyPosition(B.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(f)),fv.copy(M.backgroundRotation),fv.x*=-1,fv.y*=-1,fv.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(fv.y*=-1,fv.z*=-1),f.material.uniforms.envMap.value=C,f.material.uniforms.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=M.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(imt.makeRotationFromEuler(fv)),f.material.toneMapped=Ni.getTransfer(C.colorSpace)!==so,(p!==C||g!==C.version||v!==t.toneMapping)&&(f.material.needsUpdate=!0,p=C,g=C.version,v=t.toneMapping),f.layers.enableAll(),S.unshift(f,f.geometry,f.material,0,0,null)):C&&C.isTexture&&(d===void 0&&(d=new Cs(new $1(2,2),new kh({name:"BackgroundMaterial",uniforms:Jb(vh.background.uniforms),vertexShader:vh.background.vertexShader,fragmentShader:vh.background.fragmentShader,side:vm,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(d)),d.material.uniforms.t2D.value=C,d.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,d.material.toneMapped=Ni.getTransfer(C.colorSpace)!==so,C.matrixAutoUpdate===!0&&C.updateMatrix(),d.material.uniforms.uvTransform.value.copy(C.matrix),(p!==C||g!==C.version||v!==t.toneMapping)&&(d.material.needsUpdate=!0,p=C,g=C.version,v=t.toneMapping),d.layers.enableAll(),S.unshift(d,d.geometry,d.material,0,0,null))}function b(S,M){S.getRGB(NC,jue(t)),r.buffers.color.setClear(NC.r,NC.g,NC.b,M,s)}return{getClearColor:function(){return a},setClearColor:function(S,M=1){a.set(S),l=M,b(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(S){l=S,b(a,l)},render:x}}function smt(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),s=r.isWebGL2||o!==null,a={},l=S(null);let d=l,f=!1;function p(re,he,ue,be,ie){let ve=!1;if(s){const Ee=b(be,ue,he);d!==Ee&&(d=Ee,v(d.object)),ve=M(re,be,ue,ie),ve&&T(re,be,ue,ie)}else{const Ee=he.wireframe===!0;(d.geometry!==be.id||d.program!==ue.id||d.wireframe!==Ee)&&(d.geometry=be.id,d.program=ue.id,d.wireframe=Ee,ve=!0)}ie!==null&&n.update(ie,t.ELEMENT_ARRAY_BUFFER),(ve||f)&&(f=!1,U(re,he,ue,be),ie!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(ie).buffer))}function g(){return r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()}function v(re){return r.isWebGL2?t.bindVertexArray(re):o.bindVertexArrayOES(re)}function x(re){return r.isWebGL2?t.deleteVertexArray(re):o.deleteVertexArrayOES(re)}function b(re,he,ue){const be=ue.wireframe===!0;let ie=a[re.id];ie===void 0&&(ie={},a[re.id]=ie);let ve=ie[he.id];ve===void 0&&(ve={},ie[he.id]=ve);let Ee=ve[be];return Ee===void 0&&(Ee=S(g()),ve[be]=Ee),Ee}function S(re){const he=[],ue=[],be=[];for(let ie=0;ie<i;ie++)he[ie]=0,ue[ie]=0,be[ie]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:he,enabledAttributes:ue,attributeDivisors:be,object:re,attributes:{},index:null}}function M(re,he,ue,be){const ie=d.attributes,ve=he.attributes;let Ee=0;const Ne=ue.getAttributes();for(const Ge in Ne)if(Ne[Ge].location>=0){const Ue=ie[Ge];let st=ve[Ge];if(st===void 0&&(Ge==="instanceMatrix"&&re.instanceMatrix&&(st=re.instanceMatrix),Ge==="instanceColor"&&re.instanceColor&&(st=re.instanceColor)),Ue===void 0||Ue.attribute!==st||st&&Ue.data!==st.data)return!0;Ee++}return d.attributesNum!==Ee||d.index!==be}function T(re,he,ue,be){const ie={},ve=he.attributes;let Ee=0;const Ne=ue.getAttributes();for(const Ge in Ne)if(Ne[Ge].location>=0){let Ue=ve[Ge];Ue===void 0&&(Ge==="instanceMatrix"&&re.instanceMatrix&&(Ue=re.instanceMatrix),Ge==="instanceColor"&&re.instanceColor&&(Ue=re.instanceColor));const st={};st.attribute=Ue,Ue&&Ue.data&&(st.data=Ue.data),ie[Ge]=st,Ee++}d.attributes=ie,d.attributesNum=Ee,d.index=be}function C(){const re=d.newAttributes;for(let he=0,ue=re.length;he<ue;he++)re[he]=0}function k(re){O(re,0)}function O(re,he){const ue=d.newAttributes,be=d.enabledAttributes,ie=d.attributeDivisors;ue[re]=1,be[re]===0&&(t.enableVertexAttribArray(re),be[re]=1),ie[re]!==he&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](re,he),ie[re]=he)}function D(){const re=d.newAttributes,he=d.enabledAttributes;for(let ue=0,be=he.length;ue<be;ue++)he[ue]!==re[ue]&&(t.disableVertexAttribArray(ue),he[ue]=0)}function B(re,he,ue,be,ie,ve,Ee){Ee===!0?t.vertexAttribIPointer(re,he,ue,ie,ve):t.vertexAttribPointer(re,he,ue,be,ie,ve)}function U(re,he,ue,be){if(r.isWebGL2===!1&&(re.isInstancedMesh||be.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;C();const ie=be.attributes,ve=ue.getAttributes(),Ee=he.defaultAttributeValues;for(const Ne in ve){const Ge=ve[Ne];if(Ge.location>=0){let dt=ie[Ne];if(dt===void 0&&(Ne==="instanceMatrix"&&re.instanceMatrix&&(dt=re.instanceMatrix),Ne==="instanceColor"&&re.instanceColor&&(dt=re.instanceColor)),dt!==void 0){const Ue=dt.normalized,st=dt.itemSize,lt=n.get(dt);if(lt===void 0)continue;const Rt=lt.buffer,Lt=lt.type,Fe=lt.bytesPerElement,at=r.isWebGL2===!0&&(Lt===t.INT||Lt===t.UNSIGNED_INT||dt.gpuType===N6);if(dt.isInterleavedBufferAttribute){const nt=dt.data,ge=nt.stride,tt=dt.offset;if(nt.isInstancedInterleavedBuffer){for(let rt=0;rt<Ge.locationSize;rt++)O(Ge.location+rt,nt.meshPerAttribute);re.isInstancedMesh!==!0&&be._maxInstanceCount===void 0&&(be._maxInstanceCount=nt.meshPerAttribute*nt.count)}else for(let rt=0;rt<Ge.locationSize;rt++)k(Ge.location+rt);t.bindBuffer(t.ARRAY_BUFFER,Rt);for(let rt=0;rt<Ge.locationSize;rt++)B(Ge.location+rt,st/Ge.locationSize,Lt,Ue,ge*Fe,(tt+st/Ge.locationSize*rt)*Fe,at)}else{if(dt.isInstancedBufferAttribute){for(let nt=0;nt<Ge.locationSize;nt++)O(Ge.location+nt,dt.meshPerAttribute);re.isInstancedMesh!==!0&&be._maxInstanceCount===void 0&&(be._maxInstanceCount=dt.meshPerAttribute*dt.count)}else for(let nt=0;nt<Ge.locationSize;nt++)k(Ge.location+nt);t.bindBuffer(t.ARRAY_BUFFER,Rt);for(let nt=0;nt<Ge.locationSize;nt++)B(Ge.location+nt,st/Ge.locationSize,Lt,Ue,st*Fe,st/Ge.locationSize*nt*Fe,at)}}else if(Ee!==void 0){const Ue=Ee[Ne];if(Ue!==void 0)switch(Ue.length){case 2:t.vertexAttrib2fv(Ge.location,Ue);break;case 3:t.vertexAttrib3fv(Ge.location,Ue);break;case 4:t.vertexAttrib4fv(Ge.location,Ue);break;default:t.vertexAttrib1fv(Ge.location,Ue)}}}}D()}function J(){oe();for(const re in a){const he=a[re];for(const ue in he){const be=he[ue];for(const ie in be)x(be[ie].object),delete be[ie];delete he[ue]}delete a[re]}}function V(re){if(a[re.id]===void 0)return;const he=a[re.id];for(const ue in he){const be=he[ue];for(const ie in be)x(be[ie].object),delete be[ie];delete he[ue]}delete a[re.id]}function X(re){for(const he in a){const ue=a[he];if(ue[re.id]===void 0)continue;const be=ue[re.id];for(const ie in be)x(be[ie].object),delete be[ie];delete ue[re.id]}}function oe(){pe(),f=!0,d!==l&&(d=l,v(d.object))}function pe(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:p,reset:oe,resetDefaultState:pe,dispose:J,releaseStatesOfGeometry:V,releaseStatesOfProgram:X,initAttributes:C,enableAttribute:k,disableUnusedAttributes:D}}function amt(t,e,n,r){const i=r.isWebGL2;let o;function s(f){o=f}function a(f,p){t.drawArrays(o,f,p),n.update(p,o,1)}function l(f,p,g){if(g===0)return;let v,x;if(i)v=t,x="drawArraysInstanced";else if(v=e.get("ANGLE_instanced_arrays"),x="drawArraysInstancedANGLE",v===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[x](o,f,p,g),n.update(p,o,g)}function d(f,p,g){if(g===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let x=0;x<g;x++)this.render(f[x],p[x]);else{v.multiDrawArraysWEBGL(o,f,0,p,0,g);let x=0;for(let b=0;b<g;b++)x+=p[b];n.update(x,o,1)}}this.setMode=s,this.render=a,this.renderInstances=l,this.renderMultiDraw=d}function lmt(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const B=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(B.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(B){if(B==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";B="mediump"}return B==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let a=n.precision!==void 0?n.precision:"highp";const l=o(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const d=s||e.has("WEBGL_draw_buffers"),f=n.logarithmicDepthBuffer===!0,p=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),g=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=t.getParameter(t.MAX_TEXTURE_SIZE),x=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),b=t.getParameter(t.MAX_VERTEX_ATTRIBS),S=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),M=t.getParameter(t.MAX_VARYING_VECTORS),T=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),C=g>0,k=s||e.has("OES_texture_float"),O=C&&k,D=s?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:s,drawBuffers:d,getMaxAnisotropy:i,getMaxPrecision:o,precision:a,logarithmicDepthBuffer:f,maxTextures:p,maxVertexTextures:g,maxTextureSize:v,maxCubemapSize:x,maxAttributes:b,maxVertexUniforms:S,maxVaryings:M,maxFragmentUniforms:T,vertexTextures:C,floatFragmentTextures:k,floatVertexTextures:O,maxSamples:D}}function cmt(t){const e=this;let n=null,r=0,i=!1,o=!1;const s=new gf,a=new Ir,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(p,g){const v=p.length!==0||g||r!==0||i;return i=g,r=p.length,v},this.beginShadows=function(){o=!0,f(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(p,g){n=f(p,g,0)},this.setState=function(p,g,v){const x=p.clippingPlanes,b=p.clipIntersection,S=p.clipShadows,M=t.get(p);if(!i||x===null||x.length===0||o&&!S)o?f(null):d();else{const T=o?0:r,C=T*4;let k=M.clippingState||null;l.value=k,k=f(x,g,C,v);for(let O=0;O!==C;++O)k[O]=n[O];M.clippingState=k,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=T}};function d(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function f(p,g,v,x){const b=p!==null?p.length:0;let S=null;if(b!==0){if(S=l.value,x!==!0||S===null){const M=v+b*4,T=g.matrixWorldInverse;a.getNormalMatrix(T),(S===null||S.length<M)&&(S=new Float32Array(M));for(let C=0,k=v;C!==b;++C,k+=4)s.copy(p[C]).applyMatrix4(T,a),s.normal.toArray(S,k),S[k+3]=s.constant}l.value=S,l.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,S}}function umt(t){let e=new WeakMap;function n(s,a){return a===vM?s.mapping=_m:a===_M&&(s.mapping=yy),s}function r(s){if(s&&s.isTexture){const a=s.mapping;if(a===vM||a===_M)if(e.has(s)){const l=e.get(s).texture;return n(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const d=new Wue(l.height);return d.fromEquirectangularTexture(t,s),e.set(s,d),s.addEventListener("dispose",i),n(d.texture,s.mapping)}else return null}}return s}function i(s){const a=s.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}class Xp extends zE{constructor(e=-1,n=1,r=1,i=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,s=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=d*this.view.offsetX,s=o+d*this.view.width,a-=f*this.view.offsetY,l=a-f*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Dx=4,MK=[.125,.215,.35,.446,.526,.582],Nv=20,yN=new Xp,EK=new Dn;let vN=null,_N=0,xN=0;const Rv=(1+Math.sqrt(5))/2,K_=1/Rv,TK=[new Oe(1,1,1),new Oe(-1,1,1),new Oe(1,1,-1),new Oe(-1,1,-1),new Oe(0,Rv,K_),new Oe(0,Rv,-K_),new Oe(K_,0,Rv),new Oe(-K_,0,Rv),new Oe(Rv,K_,0),new Oe(-Rv,K_,0)];class z4{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){vN=this._renderer.getRenderTarget(),_N=this._renderer.getActiveCubeFace(),xN=this._renderer.getActiveMipmapLevel(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,i,o),n>0&&this._blur(o,0,0,n),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=PK(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=AK(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(vN,_N,xN),e.scissorTest=!1,zC(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===_m||e.mapping===yy?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),vN=this._renderer.getRenderTarget(),_N=this._renderer.getActiveCubeFace(),xN=this._renderer.getActiveMipmapLevel();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Lo,minFilter:Lo,generateMipmaps:!1,type:Kb,format:Bl,colorSpace:Im,depthBuffer:!1},i=CK(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=CK(e,n,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=dmt(o)),this._blurMaterial=hmt(o,e,n)}return i}_compileMaterial(e){const n=new Cs(this._lodPlanes[0],e);this._renderer.compile(n,yN)}_sceneToCubeUV(e,n,r,i){const a=new Xo(90,1,n,r),l=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],f=this._renderer,p=f.autoClear,g=f.toneMapping;f.getClearColor(EK),f.toneMapping=kf,f.autoClear=!1;const v=new Oy({name:"PMREM.Background",side:Wl,depthWrite:!1,depthTest:!1}),x=new Cs(new Ly,v);let b=!1;const S=e.background;S?S.isColor&&(v.color.copy(S),e.background=null,b=!0):(v.color.copy(EK),b=!0);for(let M=0;M<6;M++){const T=M%3;T===0?(a.up.set(0,l[M],0),a.lookAt(d[M],0,0)):T===1?(a.up.set(0,0,l[M]),a.lookAt(0,d[M],0)):(a.up.set(0,l[M],0),a.lookAt(0,0,d[M]));const C=this._cubeSize;zC(i,T*C,M>2?C:0,C,C),f.setRenderTarget(i),b&&f.render(x,a),f.render(e,a)}x.geometry.dispose(),x.material.dispose(),f.toneMapping=g,f.autoClear=p,e.background=S}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===_m||e.mapping===yy;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=PK()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=AK());const o=i?this._cubemapMaterial:this._equirectMaterial,s=new Cs(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;const l=this._cubeSize;zC(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(s,yN)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const o=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),s=TK[(i-1)%TK.length];this._blur(e,i-1,i,o,s)}n.autoClear=r}_blur(e,n,r,i,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,n,r,i,"latitudinal",o),this._halfBlur(s,e,r,r,i,"longitudinal",o)}_halfBlur(e,n,r,i,o,s,a){const l=this._renderer,d=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,p=new Cs(this._lodPlanes[i],d),g=d.uniforms,v=this._sizeLods[r]-1,x=isFinite(o)?Math.PI/(2*v):2*Math.PI/(2*Nv-1),b=o/x,S=isFinite(o)?1+Math.floor(f*b):Nv;S>Nv&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${Nv}`);const M=[];let T=0;for(let B=0;B<Nv;++B){const U=B/b,J=Math.exp(-U*U/2);M.push(J),B===0?T+=J:B<S&&(T+=2*J)}for(let B=0;B<M.length;B++)M[B]=M[B]/T;g.envMap.value=e.texture,g.samples.value=S,g.weights.value=M,g.latitudinal.value=s==="latitudinal",a&&(g.poleAxis.value=a);const{_lodMax:C}=this;g.dTheta.value=x,g.mipInt.value=C-r;const k=this._sizeLods[i],O=3*k*(i>C-Dx?i-C+Dx:0),D=4*(this._cubeSize-k);zC(n,O,D,3*k,2*k),l.setRenderTarget(n),l.render(p,yN)}}function dmt(t){const e=[],n=[],r=[];let i=t;const o=t-Dx+1+MK.length;for(let s=0;s<o;s++){const a=Math.pow(2,i);n.push(a);let l=1/a;s>t-Dx?l=MK[s-t+Dx-1]:s===0&&(l=0),r.push(l);const d=1/(a-2),f=-d,p=1+d,g=[f,f,p,f,p,p,f,f,p,p,f,p],v=6,x=6,b=3,S=2,M=1,T=new Float32Array(b*x*v),C=new Float32Array(S*x*v),k=new Float32Array(M*x*v);for(let D=0;D<v;D++){const B=D%3*2/3-1,U=D>2?0:-1,J=[B,U,0,B+2/3,U,0,B+2/3,U+1,0,B,U,0,B+2/3,U+1,0,B,U+1,0];T.set(J,b*x*D),C.set(g,S*x*D);const V=[D,D,D,D,D,D];k.set(V,M*x*D)}const O=new Lr;O.setAttribute("position",new Xi(T,b)),O.setAttribute("uv",new Xi(C,S)),O.setAttribute("faceIndex",new Xi(k,M)),e.push(O),i>Dx&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function CK(t,e,n){const r=new Ih(t,e,n);return r.texture.mapping=B1,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function zC(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function hmt(t,e,n){const r=new Float32Array(Nv),i=new Oe(0,1,0);return new kh({name:"SphericalGaussianBlur",defines:{n:Nv,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Z6(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:im,depthTest:!1,depthWrite:!1})}function AK(){return new kh({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Z6(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:im,depthTest:!1,depthWrite:!1})}function PK(){return new kh({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Z6(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:im,depthTest:!1,depthWrite:!1})}function Z6(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function fmt(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,d=l===vM||l===_M,f=l===_m||l===yy;if(d||f)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let p=e.get(a);return n===null&&(n=new z4(t)),p=d?n.fromEquirectangular(a,p):n.fromCubemap(a,p),e.set(a,p),p.texture}else{if(e.has(a))return e.get(a).texture;{const p=a.image;if(d&&p&&p.height>0||f&&p&&i(p)){n===null&&(n=new z4(t));const g=d?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,g),a.addEventListener("dispose",o),g.texture}else return null}}}return a}function i(a){let l=0;const d=6;for(let f=0;f<d;f++)a[f]!==void 0&&l++;return l===d}function o(a){const l=a.target;l.removeEventListener("dispose",o);const d=e.get(l);d!==void 0&&(e.delete(l),d.dispose())}function s(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:s}}function pmt(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function mmt(t,e,n,r){const i={},o=new WeakMap;function s(p){const g=p.target;g.index!==null&&e.remove(g.index);for(const x in g.attributes)e.remove(g.attributes[x]);for(const x in g.morphAttributes){const b=g.morphAttributes[x];for(let S=0,M=b.length;S<M;S++)e.remove(b[S])}g.removeEventListener("dispose",s),delete i[g.id];const v=o.get(g);v&&(e.remove(v),o.delete(g)),r.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,n.memory.geometries--}function a(p,g){return i[g.id]===!0||(g.addEventListener("dispose",s),i[g.id]=!0,n.memory.geometries++),g}function l(p){const g=p.attributes;for(const x in g)e.update(g[x],t.ARRAY_BUFFER);const v=p.morphAttributes;for(const x in v){const b=v[x];for(let S=0,M=b.length;S<M;S++)e.update(b[S],t.ARRAY_BUFFER)}}function d(p){const g=[],v=p.index,x=p.attributes.position;let b=0;if(v!==null){const T=v.array;b=v.version;for(let C=0,k=T.length;C<k;C+=3){const O=T[C+0],D=T[C+1],B=T[C+2];g.push(O,D,D,B,B,O)}}else if(x!==void 0){const T=x.array;b=x.version;for(let C=0,k=T.length/3-1;C<k;C+=3){const O=C+0,D=C+1,B=C+2;g.push(O,D,D,B,B,O)}}else return;const S=new(Nue(g)?K6:X6)(g,1);S.version=b;const M=o.get(p);M&&e.remove(M),o.set(p,S)}function f(p){const g=o.get(p);if(g){const v=p.index;v!==null&&g.version<v.version&&d(p)}else d(p);return o.get(p)}return{get:a,update:l,getWireframeAttribute:f}}function gmt(t,e,n,r){const i=r.isWebGL2;let o;function s(v){o=v}let a,l;function d(v){a=v.type,l=v.bytesPerElement}function f(v,x){t.drawElements(o,x,a,v*l),n.update(x,o,1)}function p(v,x,b){if(b===0)return;let S,M;if(i)S=t,M="drawElementsInstanced";else if(S=e.get("ANGLE_instanced_arrays"),M="drawElementsInstancedANGLE",S===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}S[M](o,x,a,v*l,b),n.update(x,o,b)}function g(v,x,b){if(b===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let M=0;M<b;M++)this.render(v[M]/l,x[M]);else{S.multiDrawElementsWEBGL(o,x,0,a,v,0,b);let M=0;for(let T=0;T<b;T++)M+=x[T];n.update(M,o,1)}}this.setMode=s,this.setIndex=d,this.render=f,this.renderInstances=p,this.renderMultiDraw=g}function ymt(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,s,a){switch(n.calls++,s){case t.TRIANGLES:n.triangles+=a*(o/3);break;case t.LINES:n.lines+=a*(o/2);break;case t.LINE_STRIP:n.lines+=a*(o-1);break;case t.LINE_LOOP:n.lines+=a*o;break;case t.POINTS:n.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function vmt(t,e){return t[0]-e[0]}function _mt(t,e){return Math.abs(e[1])-Math.abs(t[1])}function xmt(t,e,n){const r={},i=new Float32Array(8),o=new WeakMap,s=new zi,a=[];for(let d=0;d<8;d++)a[d]=[d,0];function l(d,f,p){const g=d.morphTargetInfluences;if(e.isWebGL2===!0){const x=f.morphAttributes.position||f.morphAttributes.normal||f.morphAttributes.color,b=x!==void 0?x.length:0;let S=o.get(f);if(S===void 0||S.count!==b){let pe=function(){X.dispose(),o.delete(f),f.removeEventListener("dispose",pe)};var v=pe;S!==void 0&&S.texture.dispose();const M=f.morphAttributes.position!==void 0,T=f.morphAttributes.normal!==void 0,C=f.morphAttributes.color!==void 0,k=f.morphAttributes.position||[],O=f.morphAttributes.normal||[],D=f.morphAttributes.color||[];let B=0;M===!0&&(B=1),T===!0&&(B=2),C===!0&&(B=3);let U=f.attributes.position.count*B,J=1;U>e.maxTextureSize&&(J=Math.ceil(U/e.maxTextureSize),U=e.maxTextureSize);const V=new Float32Array(U*J*4*b),X=new BO(V,U,J,b);X.type=iu,X.needsUpdate=!0;const oe=B*4;for(let re=0;re<b;re++){const he=k[re],ue=O[re],be=D[re],ie=U*J*4*re;for(let ve=0;ve<he.count;ve++){const Ee=ve*oe;M===!0&&(s.fromBufferAttribute(he,ve),V[ie+Ee+0]=s.x,V[ie+Ee+1]=s.y,V[ie+Ee+2]=s.z,V[ie+Ee+3]=0),T===!0&&(s.fromBufferAttribute(ue,ve),V[ie+Ee+4]=s.x,V[ie+Ee+5]=s.y,V[ie+Ee+6]=s.z,V[ie+Ee+7]=0),C===!0&&(s.fromBufferAttribute(be,ve),V[ie+Ee+8]=s.x,V[ie+Ee+9]=s.y,V[ie+Ee+10]=s.z,V[ie+Ee+11]=be.itemSize===4?s.w:1)}}S={count:b,texture:X,size:new $t(U,J)},o.set(f,S),f.addEventListener("dispose",pe)}if(d.isInstancedMesh===!0&&d.morphTexture!==null)p.getUniforms().setValue(t,"morphTexture",d.morphTexture,n);else{let M=0;for(let C=0;C<g.length;C++)M+=g[C];const T=f.morphTargetsRelative?1:1-M;p.getUniforms().setValue(t,"morphTargetBaseInfluence",T),p.getUniforms().setValue(t,"morphTargetInfluences",g)}p.getUniforms().setValue(t,"morphTargetsTexture",S.texture,n),p.getUniforms().setValue(t,"morphTargetsTextureSize",S.size)}else{const x=g===void 0?0:g.length;let b=r[f.id];if(b===void 0||b.length!==x){b=[];for(let k=0;k<x;k++)b[k]=[k,0];r[f.id]=b}for(let k=0;k<x;k++){const O=b[k];O[0]=k,O[1]=g[k]}b.sort(_mt);for(let k=0;k<8;k++)k<x&&b[k][1]?(a[k][0]=b[k][0],a[k][1]=b[k][1]):(a[k][0]=Number.MAX_SAFE_INTEGER,a[k][1]=0);a.sort(vmt);const S=f.morphAttributes.position,M=f.morphAttributes.normal;let T=0;for(let k=0;k<8;k++){const O=a[k],D=O[0],B=O[1];D!==Number.MAX_SAFE_INTEGER&&B?(S&&f.getAttribute("morphTarget"+k)!==S[D]&&f.setAttribute("morphTarget"+k,S[D]),M&&f.getAttribute("morphNormal"+k)!==M[D]&&f.setAttribute("morphNormal"+k,M[D]),i[k]=B,T+=B):(S&&f.hasAttribute("morphTarget"+k)===!0&&f.deleteAttribute("morphTarget"+k),M&&f.hasAttribute("morphNormal"+k)===!0&&f.deleteAttribute("morphNormal"+k),i[k]=0)}const C=f.morphTargetsRelative?1:1-T;p.getUniforms().setValue(t,"morphTargetBaseInfluence",C),p.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function bmt(t,e,n,r){let i=new WeakMap;function o(l){const d=r.render.frame,f=l.geometry,p=e.get(l,f);if(i.get(p)!==d&&(e.update(p),i.set(p,d)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==d&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,d))),l.isSkinnedMesh){const g=l.skeleton;i.get(g)!==d&&(g.update(),i.set(g,d))}return p}function s(){i=new WeakMap}function a(l){const d=l.target;d.removeEventListener("dispose",a),n.remove(d.instanceMatrix),d.instanceColor!==null&&n.remove(d.instanceColor)}return{update:o,dispose:s}}class J6 extends Fo{constructor(e,n,r,i,o,s,a,l,d,f){if(f=f!==void 0?f:ay,f!==ay&&f!==I0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&f===ay&&(r=Yp),r===void 0&&f===I0&&(r=sy),super(null,i,o,s,a,l,f,r,d),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:cs,this.minFilter=l!==void 0?l:cs,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const Gue=new Fo,que=new J6(1,1);que.compareFunction=H6;const Yue=new BO,Xue=new Y6,Kue=new FE,IK=[],kK=[],RK=new Float32Array(16),OK=new Float32Array(9),LK=new Float32Array(4);function j1(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=IK[i];if(o===void 0&&(o=new Float32Array(i),IK[i]=o),e!==0){r.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=n,t[s].toArray(o,a)}return o}function qs(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Ys(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function $O(t,e){let n=kK[e];n===void 0&&(n=new Int32Array(e),kK[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function wmt(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Smt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(qs(n,e))return;t.uniform2fv(this.addr,e),Ys(n,e)}}function Mmt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(qs(n,e))return;t.uniform3fv(this.addr,e),Ys(n,e)}}function Emt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(qs(n,e))return;t.uniform4fv(this.addr,e),Ys(n,e)}}function Tmt(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(qs(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ys(n,e)}else{if(qs(n,r))return;LK.set(r),t.uniformMatrix2fv(this.addr,!1,LK),Ys(n,r)}}function Cmt(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(qs(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ys(n,e)}else{if(qs(n,r))return;OK.set(r),t.uniformMatrix3fv(this.addr,!1,OK),Ys(n,r)}}function Amt(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(qs(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ys(n,e)}else{if(qs(n,r))return;RK.set(r),t.uniformMatrix4fv(this.addr,!1,RK),Ys(n,r)}}function Pmt(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Imt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(qs(n,e))return;t.uniform2iv(this.addr,e),Ys(n,e)}}function kmt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(qs(n,e))return;t.uniform3iv(this.addr,e),Ys(n,e)}}function Rmt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(qs(n,e))return;t.uniform4iv(this.addr,e),Ys(n,e)}}function Omt(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Lmt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(qs(n,e))return;t.uniform2uiv(this.addr,e),Ys(n,e)}}function Dmt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(qs(n,e))return;t.uniform3uiv(this.addr,e),Ys(n,e)}}function Nmt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(qs(n,e))return;t.uniform4uiv(this.addr,e),Ys(n,e)}}function zmt(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);const o=this.type===t.SAMPLER_2D_SHADOW?que:Gue;n.setTexture2D(e||o,i)}function Fmt(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Xue,i)}function Bmt(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Kue,i)}function $mt(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Yue,i)}function jmt(t){switch(t){case 5126:return wmt;case 35664:return Smt;case 35665:return Mmt;case 35666:return Emt;case 35674:return Tmt;case 35675:return Cmt;case 35676:return Amt;case 5124:case 35670:return Pmt;case 35667:case 35671:return Imt;case 35668:case 35672:return kmt;case 35669:case 35673:return Rmt;case 5125:return Omt;case 36294:return Lmt;case 36295:return Dmt;case 36296:return Nmt;case 35678:case 36198:case 36298:case 36306:case 35682:return zmt;case 35679:case 36299:case 36307:return Fmt;case 35680:case 36300:case 36308:case 36293:return Bmt;case 36289:case 36303:case 36311:case 36292:return $mt}}function Umt(t,e){t.uniform1fv(this.addr,e)}function Vmt(t,e){const n=j1(e,this.size,2);t.uniform2fv(this.addr,n)}function Wmt(t,e){const n=j1(e,this.size,3);t.uniform3fv(this.addr,n)}function Hmt(t,e){const n=j1(e,this.size,4);t.uniform4fv(this.addr,n)}function Gmt(t,e){const n=j1(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function qmt(t,e){const n=j1(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Ymt(t,e){const n=j1(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Xmt(t,e){t.uniform1iv(this.addr,e)}function Kmt(t,e){t.uniform2iv(this.addr,e)}function Zmt(t,e){t.uniform3iv(this.addr,e)}function Jmt(t,e){t.uniform4iv(this.addr,e)}function Qmt(t,e){t.uniform1uiv(this.addr,e)}function egt(t,e){t.uniform2uiv(this.addr,e)}function tgt(t,e){t.uniform3uiv(this.addr,e)}function ngt(t,e){t.uniform4uiv(this.addr,e)}function rgt(t,e,n){const r=this.cache,i=e.length,o=$O(n,i);qs(r,o)||(t.uniform1iv(this.addr,o),Ys(r,o));for(let s=0;s!==i;++s)n.setTexture2D(e[s]||Gue,o[s])}function igt(t,e,n){const r=this.cache,i=e.length,o=$O(n,i);qs(r,o)||(t.uniform1iv(this.addr,o),Ys(r,o));for(let s=0;s!==i;++s)n.setTexture3D(e[s]||Xue,o[s])}function ogt(t,e,n){const r=this.cache,i=e.length,o=$O(n,i);qs(r,o)||(t.uniform1iv(this.addr,o),Ys(r,o));for(let s=0;s!==i;++s)n.setTextureCube(e[s]||Kue,o[s])}function sgt(t,e,n){const r=this.cache,i=e.length,o=$O(n,i);qs(r,o)||(t.uniform1iv(this.addr,o),Ys(r,o));for(let s=0;s!==i;++s)n.setTexture2DArray(e[s]||Yue,o[s])}function agt(t){switch(t){case 5126:return Umt;case 35664:return Vmt;case 35665:return Wmt;case 35666:return Hmt;case 35674:return Gmt;case 35675:return qmt;case 35676:return Ymt;case 5124:case 35670:return Xmt;case 35667:case 35671:return Kmt;case 35668:case 35672:return Zmt;case 35669:case 35673:return Jmt;case 5125:return Qmt;case 36294:return egt;case 36295:return tgt;case 36296:return ngt;case 35678:case 36198:case 36298:case 36306:case 35682:return rgt;case 35679:case 36299:case 36307:return igt;case 35680:case 36300:case 36308:case 36293:return ogt;case 36289:case 36303:case 36311:case 36292:return sgt}}class lgt{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=jmt(n.type)}}class cgt{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=agt(n.type)}}class ugt{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let o=0,s=i.length;o!==s;++o){const a=i[o];a.setValue(e,n[a.id],r)}}}const bN=/(\w+)(\])?(\[|\.)?/g;function DK(t,e){t.seq.push(e),t.map[e.id]=e}function dgt(t,e,n){const r=t.name,i=r.length;for(bN.lastIndex=0;;){const o=bN.exec(r),s=bN.lastIndex;let a=o[1];const l=o[2]==="]",d=o[3];if(l&&(a=a|0),d===void 0||d==="["&&s+2===i){DK(n,d===void 0?new lgt(a,t,e):new cgt(a,t,e));break}else{let p=n.map[a];p===void 0&&(p=new ugt(a),DK(n,p)),n=p}}}class XA{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=e.getActiveUniform(n,i),s=e.getUniformLocation(n,o.name);dgt(o,s,this)}}setValue(e,n,r,i){const o=this.map[n];o!==void 0&&o.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let o=0,s=n.length;o!==s;++o){const a=n[o],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,o=e.length;i!==o;++i){const s=e[i];s.id in n&&r.push(s)}return r}}function NK(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const hgt=37297;let fgt=0;function pgt(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let s=i;s<o;s++){const a=s+1;r.push(`${a===e?">":" "} ${a}: ${n[s]}`)}return r.join(`
`)}function mgt(t){const e=Ni.getPrimaries(Ni.workingColorSpace),n=Ni.getPrimaries(t);let r;switch(e===n?r="":e===CM&&n===TM?r="LinearDisplayP3ToLinearSRGB":e===TM&&n===CM&&(r="LinearSRGBToLinearDisplayP3"),t){case Im:case NE:return[r,"LinearTransferOETF"];case td:case FO:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function zK(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const s=parseInt(o[1]);return n.toUpperCase()+`

`+i+`

`+pgt(t.getShaderSource(e),s)}else return i}function ggt(t,e){const n=mgt(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function ygt(t,e){let n;switch(e){case lue:n="Linear";break;case cue:n="Reinhard";break;case uue:n="OptimizedCineon";break;case D6:n="ACESFilmic";break;case hue:n="AgX";break;case fue:n="Neutral";break;case due:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function vgt(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.alphaToCoverage||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Nx).join(`
`)}function _gt(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Nx).join(`
`)}function xgt(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function bgt(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=t.getActiveAttrib(e,i),s=o.name;let a=1;o.type===t.FLOAT_MAT2&&(a=2),o.type===t.FLOAT_MAT3&&(a=3),o.type===t.FLOAT_MAT4&&(a=4),n[s]={type:o.type,location:t.getAttribLocation(e,s),locationSize:a}}return n}function Nx(t){return t!==""}function FK(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function BK(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const wgt=/^[ \t]*#include +<([\w\d./]+)>/gm;function F4(t){return t.replace(wgt,Mgt)}const Sgt=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Mgt(t,e){let n=Nr[e];if(n===void 0){const r=Sgt.get(e);if(r!==void 0)n=Nr[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return F4(n)}const Egt=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function $K(t){return t.replace(Egt,Tgt)}function Tgt(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function jK(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	`;return t.isWebGL2&&(e+=`precision ${t.precision} sampler3D;
		precision ${t.precision} sampler2DArray;
		precision ${t.precision} sampler2DShadow;
		precision ${t.precision} samplerCubeShadow;
		precision ${t.precision} sampler2DArrayShadow;
		precision ${t.precision} isampler2D;
		precision ${t.precision} isampler3D;
		precision ${t.precision} isamplerCube;
		precision ${t.precision} isampler2DArray;
		precision ${t.precision} usampler2D;
		precision ${t.precision} usampler3D;
		precision ${t.precision} usamplerCube;
		precision ${t.precision} usampler2DArray;
		`),t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Cgt(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===LO?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===WS?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===uh&&(e="SHADOWMAP_TYPE_VSM"),e}function Agt(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case _m:case yy:e="ENVMAP_TYPE_CUBE";break;case B1:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Pgt(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case yy:e="ENVMAP_MODE_REFRACTION";break}return e}function Igt(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case DE:e="ENVMAP_BLENDING_MULTIPLY";break;case sue:e="ENVMAP_BLENDING_MIX";break;case aue:e="ENVMAP_BLENDING_ADD";break}return e}function kgt(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function Rgt(t,e,n,r){const i=t.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const l=Cgt(n),d=Agt(n),f=Pgt(n),p=Igt(n),g=kgt(n),v=n.isWebGL2?"":vgt(n),x=_gt(n),b=xgt(o),S=i.createProgram();let M,T,C=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(M=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b].filter(Nx).join(`
`),M.length>0&&(M+=`
`),T=[v,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b].filter(Nx).join(`
`),T.length>0&&(T+=`
`)):(M=[jK(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Nx).join(`
`),T=[v,jK(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.envMap?"#define "+f:"",n.envMap?"#define "+p:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==kf?"#define TONE_MAPPING":"",n.toneMapping!==kf?Nr.tonemapping_pars_fragment:"",n.toneMapping!==kf?ygt("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Nr.colorspace_pars_fragment,ggt("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Nx).join(`
`)),s=F4(s),s=FK(s,n),s=BK(s,n),a=F4(a),a=FK(a,n),a=BK(a,n),s=$K(s),a=$K(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,M=[x,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,T=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===D4?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===D4?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+T);const k=C+M+s,O=C+T+a,D=NK(i,i.VERTEX_SHADER,k),B=NK(i,i.FRAGMENT_SHADER,O);i.attachShader(S,D),i.attachShader(S,B),n.index0AttributeName!==void 0?i.bindAttribLocation(S,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(S,0,"position"),i.linkProgram(S);function U(oe){if(t.debug.checkShaderErrors){const pe=i.getProgramInfoLog(S).trim(),re=i.getShaderInfoLog(D).trim(),he=i.getShaderInfoLog(B).trim();let ue=!0,be=!0;if(i.getProgramParameter(S,i.LINK_STATUS)===!1)if(ue=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,S,D,B);else{const ie=zK(i,D,"vertex"),ve=zK(i,B,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(S,i.VALIDATE_STATUS)+`

Material Name: `+oe.name+`
Material Type: `+oe.type+`

Program Info Log: `+pe+`
`+ie+`
`+ve)}else pe!==""?console.warn("THREE.WebGLProgram: Program Info Log:",pe):(re===""||he==="")&&(be=!1);be&&(oe.diagnostics={runnable:ue,programLog:pe,vertexShader:{log:re,prefix:M},fragmentShader:{log:he,prefix:T}})}i.deleteShader(D),i.deleteShader(B),J=new XA(i,S),V=bgt(i,S)}let J;this.getUniforms=function(){return J===void 0&&U(this),J};let V;this.getAttributes=function(){return V===void 0&&U(this),V};let X=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return X===!1&&(X=i.getProgramParameter(S,hgt)),X},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(S),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=fgt++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=D,this.fragmentShader=B,this}let Ogt=0;class Lgt{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),o=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new Dgt(e),n.set(e,r)),r}}class Dgt{constructor(e){this.id=Ogt++,this.code=e,this.usedTimes=0}}function Ngt(t,e,n,r,i,o,s){const a=new h0,l=new Lgt,d=new Set,f=[],p=i.isWebGL2,g=i.logarithmicDepthBuffer,v=i.vertexTextures;let x=i.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(V){return d.add(V),V===0?"uv":`uv${V}`}function M(V,X,oe,pe,re){const he=pe.fog,ue=re.geometry,be=V.isMeshStandardMaterial?pe.environment:null,ie=(V.isMeshStandardMaterial?n:e).get(V.envMap||be),ve=ie&&ie.mapping===B1?ie.image.height:null,Ee=b[V.type];V.precision!==null&&(x=i.getMaxPrecision(V.precision),x!==V.precision&&console.warn("THREE.WebGLProgram.getParameters:",V.precision,"not supported, using",x,"instead."));const Ne=ue.morphAttributes.position||ue.morphAttributes.normal||ue.morphAttributes.color,Ge=Ne!==void 0?Ne.length:0;let dt=0;ue.morphAttributes.position!==void 0&&(dt=1),ue.morphAttributes.normal!==void 0&&(dt=2),ue.morphAttributes.color!==void 0&&(dt=3);let Ue,st,lt,Rt;if(Ee){const qe=vh[Ee];Ue=qe.vertexShader,st=qe.fragmentShader}else Ue=V.vertexShader,st=V.fragmentShader,l.update(V),lt=l.getVertexShaderID(V),Rt=l.getFragmentShaderID(V);const Lt=t.getRenderTarget(),Fe=re.isInstancedMesh===!0,at=re.isBatchedMesh===!0,nt=!!V.map,ge=!!V.matcap,tt=!!ie,rt=!!V.aoMap,vt=!!V.lightMap,Tt=!!V.bumpMap,We=!!V.normalMap,Vt=!!V.displacementMap,sn=!!V.emissiveMap,Ut=!!V.metalnessMap,Pe=!!V.roughnessMap,_e=V.anisotropy>0,Mt=V.clearcoat>0,wt=V.iridescence>0,Wt=V.sheen>0,Bt=V.transmission>0,Mn=_e&&!!V.anisotropyMap,an=Mt&&!!V.clearcoatMap,Je=Mt&&!!V.clearcoatNormalMap,Yt=Mt&&!!V.clearcoatRoughnessMap,xn=wt&&!!V.iridescenceMap,en=wt&&!!V.iridescenceThicknessMap,un=Wt&&!!V.sheenColorMap,St=Wt&&!!V.sheenRoughnessMap,gt=!!V.specularMap,Ae=!!V.specularColorMap,ft=!!V.specularIntensityMap,Ie=Bt&&!!V.transmissionMap,it=Bt&&!!V.thicknessMap,tn=!!V.gradientMap,Xe=!!V.alphaMap,xe=V.alphaTest>0,ee=!!V.alphaHash,se=!!V.extensions;let me=kf;V.toneMapped&&(Lt===null||Lt.isXRRenderTarget===!0)&&(me=t.toneMapping);const Ce={isWebGL2:p,shaderID:Ee,shaderType:V.type,shaderName:V.name,vertexShader:Ue,fragmentShader:st,defines:V.defines,customVertexShaderID:lt,customFragmentShaderID:Rt,isRawShaderMaterial:V.isRawShaderMaterial===!0,glslVersion:V.glslVersion,precision:x,batching:at,instancing:Fe,instancingColor:Fe&&re.instanceColor!==null,instancingMorph:Fe&&re.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:Lt===null?t.outputColorSpace:Lt.isXRRenderTarget===!0?Lt.texture.colorSpace:Im,alphaToCoverage:!!V.alphaToCoverage,map:nt,matcap:ge,envMap:tt,envMapMode:tt&&ie.mapping,envMapCubeUVHeight:ve,aoMap:rt,lightMap:vt,bumpMap:Tt,normalMap:We,displacementMap:v&&Vt,emissiveMap:sn,normalMapObjectSpace:We&&V.normalMapType===Cue,normalMapTangentSpace:We&&V.normalMapType===ky,metalnessMap:Ut,roughnessMap:Pe,anisotropy:_e,anisotropyMap:Mn,clearcoat:Mt,clearcoatMap:an,clearcoatNormalMap:Je,clearcoatRoughnessMap:Yt,iridescence:wt,iridescenceMap:xn,iridescenceThicknessMap:en,sheen:Wt,sheenColorMap:un,sheenRoughnessMap:St,specularMap:gt,specularColorMap:Ae,specularIntensityMap:ft,transmission:Bt,transmissionMap:Ie,thicknessMap:it,gradientMap:tn,opaque:V.transparent===!1&&V.blending===u0&&V.alphaToCoverage===!1,alphaMap:Xe,alphaTest:xe,alphaHash:ee,combine:V.combine,mapUv:nt&&S(V.map.channel),aoMapUv:rt&&S(V.aoMap.channel),lightMapUv:vt&&S(V.lightMap.channel),bumpMapUv:Tt&&S(V.bumpMap.channel),normalMapUv:We&&S(V.normalMap.channel),displacementMapUv:Vt&&S(V.displacementMap.channel),emissiveMapUv:sn&&S(V.emissiveMap.channel),metalnessMapUv:Ut&&S(V.metalnessMap.channel),roughnessMapUv:Pe&&S(V.roughnessMap.channel),anisotropyMapUv:Mn&&S(V.anisotropyMap.channel),clearcoatMapUv:an&&S(V.clearcoatMap.channel),clearcoatNormalMapUv:Je&&S(V.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Yt&&S(V.clearcoatRoughnessMap.channel),iridescenceMapUv:xn&&S(V.iridescenceMap.channel),iridescenceThicknessMapUv:en&&S(V.iridescenceThicknessMap.channel),sheenColorMapUv:un&&S(V.sheenColorMap.channel),sheenRoughnessMapUv:St&&S(V.sheenRoughnessMap.channel),specularMapUv:gt&&S(V.specularMap.channel),specularColorMapUv:Ae&&S(V.specularColorMap.channel),specularIntensityMapUv:ft&&S(V.specularIntensityMap.channel),transmissionMapUv:Ie&&S(V.transmissionMap.channel),thicknessMapUv:it&&S(V.thicknessMap.channel),alphaMapUv:Xe&&S(V.alphaMap.channel),vertexTangents:!!ue.attributes.tangent&&(We||_e),vertexColors:V.vertexColors,vertexAlphas:V.vertexColors===!0&&!!ue.attributes.color&&ue.attributes.color.itemSize===4,pointsUvs:re.isPoints===!0&&!!ue.attributes.uv&&(nt||Xe),fog:!!he,useFog:V.fog===!0,fogExp2:!!he&&he.isFogExp2,flatShading:V.flatShading===!0,sizeAttenuation:V.sizeAttenuation===!0,logarithmicDepthBuffer:g,skinning:re.isSkinnedMesh===!0,morphTargets:ue.morphAttributes.position!==void 0,morphNormals:ue.morphAttributes.normal!==void 0,morphColors:ue.morphAttributes.color!==void 0,morphTargetsCount:Ge,morphTextureStride:dt,numDirLights:X.directional.length,numPointLights:X.point.length,numSpotLights:X.spot.length,numSpotLightMaps:X.spotLightMap.length,numRectAreaLights:X.rectArea.length,numHemiLights:X.hemi.length,numDirLightShadows:X.directionalShadowMap.length,numPointLightShadows:X.pointShadowMap.length,numSpotLightShadows:X.spotShadowMap.length,numSpotLightShadowsWithMaps:X.numSpotLightShadowsWithMaps,numLightProbes:X.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:V.dithering,shadowMapEnabled:t.shadowMap.enabled&&oe.length>0,shadowMapType:t.shadowMap.type,toneMapping:me,useLegacyLights:t._useLegacyLights,decodeVideoTexture:nt&&V.map.isVideoTexture===!0&&Ni.getTransfer(V.map.colorSpace)===so,premultipliedAlpha:V.premultipliedAlpha,doubleSided:V.side===bh,flipSided:V.side===Wl,useDepthPacking:V.depthPacking>=0,depthPacking:V.depthPacking||0,index0AttributeName:V.index0AttributeName,extensionDerivatives:se&&V.extensions.derivatives===!0,extensionFragDepth:se&&V.extensions.fragDepth===!0,extensionDrawBuffers:se&&V.extensions.drawBuffers===!0,extensionShaderTextureLOD:se&&V.extensions.shaderTextureLOD===!0,extensionClipCullDistance:se&&V.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:se&&V.extensions.multiDraw===!0&&r.has("WEBGL_multi_draw"),rendererExtensionFragDepth:p||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:p||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:p||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:V.customProgramCacheKey()};return Ce.vertexUv1s=d.has(1),Ce.vertexUv2s=d.has(2),Ce.vertexUv3s=d.has(3),d.clear(),Ce}function T(V){const X=[];if(V.shaderID?X.push(V.shaderID):(X.push(V.customVertexShaderID),X.push(V.customFragmentShaderID)),V.defines!==void 0)for(const oe in V.defines)X.push(oe),X.push(V.defines[oe]);return V.isRawShaderMaterial===!1&&(C(X,V),k(X,V),X.push(t.outputColorSpace)),X.push(V.customProgramCacheKey),X.join()}function C(V,X){V.push(X.precision),V.push(X.outputColorSpace),V.push(X.envMapMode),V.push(X.envMapCubeUVHeight),V.push(X.mapUv),V.push(X.alphaMapUv),V.push(X.lightMapUv),V.push(X.aoMapUv),V.push(X.bumpMapUv),V.push(X.normalMapUv),V.push(X.displacementMapUv),V.push(X.emissiveMapUv),V.push(X.metalnessMapUv),V.push(X.roughnessMapUv),V.push(X.anisotropyMapUv),V.push(X.clearcoatMapUv),V.push(X.clearcoatNormalMapUv),V.push(X.clearcoatRoughnessMapUv),V.push(X.iridescenceMapUv),V.push(X.iridescenceThicknessMapUv),V.push(X.sheenColorMapUv),V.push(X.sheenRoughnessMapUv),V.push(X.specularMapUv),V.push(X.specularColorMapUv),V.push(X.specularIntensityMapUv),V.push(X.transmissionMapUv),V.push(X.thicknessMapUv),V.push(X.combine),V.push(X.fogExp2),V.push(X.sizeAttenuation),V.push(X.morphTargetsCount),V.push(X.morphAttributeCount),V.push(X.numDirLights),V.push(X.numPointLights),V.push(X.numSpotLights),V.push(X.numSpotLightMaps),V.push(X.numHemiLights),V.push(X.numRectAreaLights),V.push(X.numDirLightShadows),V.push(X.numPointLightShadows),V.push(X.numSpotLightShadows),V.push(X.numSpotLightShadowsWithMaps),V.push(X.numLightProbes),V.push(X.shadowMapType),V.push(X.toneMapping),V.push(X.numClippingPlanes),V.push(X.numClipIntersection),V.push(X.depthPacking)}function k(V,X){a.disableAll(),X.isWebGL2&&a.enable(0),X.supportsVertexTextures&&a.enable(1),X.instancing&&a.enable(2),X.instancingColor&&a.enable(3),X.instancingMorph&&a.enable(4),X.matcap&&a.enable(5),X.envMap&&a.enable(6),X.normalMapObjectSpace&&a.enable(7),X.normalMapTangentSpace&&a.enable(8),X.clearcoat&&a.enable(9),X.iridescence&&a.enable(10),X.alphaTest&&a.enable(11),X.vertexColors&&a.enable(12),X.vertexAlphas&&a.enable(13),X.vertexUv1s&&a.enable(14),X.vertexUv2s&&a.enable(15),X.vertexUv3s&&a.enable(16),X.vertexTangents&&a.enable(17),X.anisotropy&&a.enable(18),X.alphaHash&&a.enable(19),X.batching&&a.enable(20),V.push(a.mask),a.disableAll(),X.fog&&a.enable(0),X.useFog&&a.enable(1),X.flatShading&&a.enable(2),X.logarithmicDepthBuffer&&a.enable(3),X.skinning&&a.enable(4),X.morphTargets&&a.enable(5),X.morphNormals&&a.enable(6),X.morphColors&&a.enable(7),X.premultipliedAlpha&&a.enable(8),X.shadowMapEnabled&&a.enable(9),X.useLegacyLights&&a.enable(10),X.doubleSided&&a.enable(11),X.flipSided&&a.enable(12),X.useDepthPacking&&a.enable(13),X.dithering&&a.enable(14),X.transmission&&a.enable(15),X.sheen&&a.enable(16),X.opaque&&a.enable(17),X.pointsUvs&&a.enable(18),X.decodeVideoTexture&&a.enable(19),X.alphaToCoverage&&a.enable(20),V.push(a.mask)}function O(V){const X=b[V.type];let oe;if(X){const pe=vh[X];oe=Uue.clone(pe.uniforms)}else oe=V.uniforms;return oe}function D(V,X){let oe;for(let pe=0,re=f.length;pe<re;pe++){const he=f[pe];if(he.cacheKey===X){oe=he,++oe.usedTimes;break}}return oe===void 0&&(oe=new Rgt(t,X,V,o),f.push(oe)),oe}function B(V){if(--V.usedTimes===0){const X=f.indexOf(V);f[X]=f[f.length-1],f.pop(),V.destroy()}}function U(V){l.remove(V)}function J(){l.dispose()}return{getParameters:M,getProgramCacheKey:T,getUniforms:O,acquireProgram:D,releaseProgram:B,releaseShaderCache:U,programs:f,dispose:J}}function zgt(){let t=new WeakMap;function e(o){let s=t.get(o);return s===void 0&&(s={},t.set(o,s)),s}function n(o){t.delete(o)}function r(o,s,a){t.get(o)[s]=a}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function Fgt(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function UK(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function VK(){const t=[];let e=0;const n=[],r=[],i=[];function o(){e=0,n.length=0,r.length=0,i.length=0}function s(p,g,v,x,b,S){let M=t[e];return M===void 0?(M={id:p.id,object:p,geometry:g,material:v,groupOrder:x,renderOrder:p.renderOrder,z:b,group:S},t[e]=M):(M.id=p.id,M.object=p,M.geometry=g,M.material=v,M.groupOrder=x,M.renderOrder=p.renderOrder,M.z=b,M.group=S),e++,M}function a(p,g,v,x,b,S){const M=s(p,g,v,x,b,S);v.transmission>0?r.push(M):v.transparent===!0?i.push(M):n.push(M)}function l(p,g,v,x,b,S){const M=s(p,g,v,x,b,S);v.transmission>0?r.unshift(M):v.transparent===!0?i.unshift(M):n.unshift(M)}function d(p,g){n.length>1&&n.sort(p||Fgt),r.length>1&&r.sort(g||UK),i.length>1&&i.sort(g||UK)}function f(){for(let p=e,g=t.length;p<g;p++){const v=t[p];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:a,unshift:l,finish:f,sort:d}}function Bgt(){let t=new WeakMap;function e(r,i){const o=t.get(r);let s;return o===void 0?(s=new VK,t.set(r,[s])):i>=o.length?(s=new VK,o.push(s)):s=o[i],s}function n(){t=new WeakMap}return{get:e,dispose:n}}function $gt(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Oe,color:new Dn};break;case"SpotLight":n={position:new Oe,direction:new Oe,color:new Dn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Oe,color:new Dn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Oe,skyColor:new Dn,groundColor:new Dn};break;case"RectAreaLight":n={color:new Dn,position:new Oe,halfWidth:new Oe,halfHeight:new Oe};break}return t[e.id]=n,n}}}function jgt(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $t};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $t};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $t,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Ugt=0;function Vgt(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Wgt(t,e){const n=new $gt,r=jgt(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)i.probe.push(new Oe);const o=new Oe,s=new mr,a=new mr;function l(f,p){let g=0,v=0,x=0;for(let oe=0;oe<9;oe++)i.probe[oe].set(0,0,0);let b=0,S=0,M=0,T=0,C=0,k=0,O=0,D=0,B=0,U=0,J=0;f.sort(Vgt);const V=p===!0?Math.PI:1;for(let oe=0,pe=f.length;oe<pe;oe++){const re=f[oe],he=re.color,ue=re.intensity,be=re.distance,ie=re.shadow&&re.shadow.map?re.shadow.map.texture:null;if(re.isAmbientLight)g+=he.r*ue*V,v+=he.g*ue*V,x+=he.b*ue*V;else if(re.isLightProbe){for(let ve=0;ve<9;ve++)i.probe[ve].addScaledVector(re.sh.coefficients[ve],ue);J++}else if(re.isDirectionalLight){const ve=n.get(re);if(ve.color.copy(re.color).multiplyScalar(re.intensity*V),re.castShadow){const Ee=re.shadow,Ne=r.get(re);Ne.shadowBias=Ee.bias,Ne.shadowNormalBias=Ee.normalBias,Ne.shadowRadius=Ee.radius,Ne.shadowMapSize=Ee.mapSize,i.directionalShadow[b]=Ne,i.directionalShadowMap[b]=ie,i.directionalShadowMatrix[b]=re.shadow.matrix,k++}i.directional[b]=ve,b++}else if(re.isSpotLight){const ve=n.get(re);ve.position.setFromMatrixPosition(re.matrixWorld),ve.color.copy(he).multiplyScalar(ue*V),ve.distance=be,ve.coneCos=Math.cos(re.angle),ve.penumbraCos=Math.cos(re.angle*(1-re.penumbra)),ve.decay=re.decay,i.spot[M]=ve;const Ee=re.shadow;if(re.map&&(i.spotLightMap[B]=re.map,B++,Ee.updateMatrices(re),re.castShadow&&U++),i.spotLightMatrix[M]=Ee.matrix,re.castShadow){const Ne=r.get(re);Ne.shadowBias=Ee.bias,Ne.shadowNormalBias=Ee.normalBias,Ne.shadowRadius=Ee.radius,Ne.shadowMapSize=Ee.mapSize,i.spotShadow[M]=Ne,i.spotShadowMap[M]=ie,D++}M++}else if(re.isRectAreaLight){const ve=n.get(re);ve.color.copy(he).multiplyScalar(ue),ve.halfWidth.set(re.width*.5,0,0),ve.halfHeight.set(0,re.height*.5,0),i.rectArea[T]=ve,T++}else if(re.isPointLight){const ve=n.get(re);if(ve.color.copy(re.color).multiplyScalar(re.intensity*V),ve.distance=re.distance,ve.decay=re.decay,re.castShadow){const Ee=re.shadow,Ne=r.get(re);Ne.shadowBias=Ee.bias,Ne.shadowNormalBias=Ee.normalBias,Ne.shadowRadius=Ee.radius,Ne.shadowMapSize=Ee.mapSize,Ne.shadowCameraNear=Ee.camera.near,Ne.shadowCameraFar=Ee.camera.far,i.pointShadow[S]=Ne,i.pointShadowMap[S]=ie,i.pointShadowMatrix[S]=re.shadow.matrix,O++}i.point[S]=ve,S++}else if(re.isHemisphereLight){const ve=n.get(re);ve.skyColor.copy(re.color).multiplyScalar(ue*V),ve.groundColor.copy(re.groundColor).multiplyScalar(ue*V),i.hemi[C]=ve,C++}}T>0&&(e.isWebGL2?t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Sn.LTC_FLOAT_1,i.rectAreaLTC2=Sn.LTC_FLOAT_2):(i.rectAreaLTC1=Sn.LTC_HALF_1,i.rectAreaLTC2=Sn.LTC_HALF_2):t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Sn.LTC_FLOAT_1,i.rectAreaLTC2=Sn.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Sn.LTC_HALF_1,i.rectAreaLTC2=Sn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=g,i.ambient[1]=v,i.ambient[2]=x;const X=i.hash;(X.directionalLength!==b||X.pointLength!==S||X.spotLength!==M||X.rectAreaLength!==T||X.hemiLength!==C||X.numDirectionalShadows!==k||X.numPointShadows!==O||X.numSpotShadows!==D||X.numSpotMaps!==B||X.numLightProbes!==J)&&(i.directional.length=b,i.spot.length=M,i.rectArea.length=T,i.point.length=S,i.hemi.length=C,i.directionalShadow.length=k,i.directionalShadowMap.length=k,i.pointShadow.length=O,i.pointShadowMap.length=O,i.spotShadow.length=D,i.spotShadowMap.length=D,i.directionalShadowMatrix.length=k,i.pointShadowMatrix.length=O,i.spotLightMatrix.length=D+B-U,i.spotLightMap.length=B,i.numSpotLightShadowsWithMaps=U,i.numLightProbes=J,X.directionalLength=b,X.pointLength=S,X.spotLength=M,X.rectAreaLength=T,X.hemiLength=C,X.numDirectionalShadows=k,X.numPointShadows=O,X.numSpotShadows=D,X.numSpotMaps=B,X.numLightProbes=J,i.version=Ugt++)}function d(f,p){let g=0,v=0,x=0,b=0,S=0;const M=p.matrixWorldInverse;for(let T=0,C=f.length;T<C;T++){const k=f[T];if(k.isDirectionalLight){const O=i.directional[g];O.direction.setFromMatrixPosition(k.matrixWorld),o.setFromMatrixPosition(k.target.matrixWorld),O.direction.sub(o),O.direction.transformDirection(M),g++}else if(k.isSpotLight){const O=i.spot[x];O.position.setFromMatrixPosition(k.matrixWorld),O.position.applyMatrix4(M),O.direction.setFromMatrixPosition(k.matrixWorld),o.setFromMatrixPosition(k.target.matrixWorld),O.direction.sub(o),O.direction.transformDirection(M),x++}else if(k.isRectAreaLight){const O=i.rectArea[b];O.position.setFromMatrixPosition(k.matrixWorld),O.position.applyMatrix4(M),a.identity(),s.copy(k.matrixWorld),s.premultiply(M),a.extractRotation(s),O.halfWidth.set(k.width*.5,0,0),O.halfHeight.set(0,k.height*.5,0),O.halfWidth.applyMatrix4(a),O.halfHeight.applyMatrix4(a),b++}else if(k.isPointLight){const O=i.point[v];O.position.setFromMatrixPosition(k.matrixWorld),O.position.applyMatrix4(M),v++}else if(k.isHemisphereLight){const O=i.hemi[S];O.direction.setFromMatrixPosition(k.matrixWorld),O.direction.transformDirection(M),S++}}}return{setup:l,setupView:d,state:i}}function WK(t,e){const n=new Wgt(t,e),r=[],i=[];function o(){r.length=0,i.length=0}function s(p){r.push(p)}function a(p){i.push(p)}function l(p){n.setup(r,p)}function d(p){n.setupView(r,p)}return{init:o,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:d,pushLight:s,pushShadow:a}}function Hgt(t,e){let n=new WeakMap;function r(o,s=0){const a=n.get(o);let l;return a===void 0?(l=new WK(t,e),n.set(o,[l])):s>=a.length?(l=new WK(t,e),a.push(l)):l=a[s],l}function i(){n=new WeakMap}return{get:r,dispose:i}}class Q6 extends $a{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Eue,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class e8 extends $a{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Ggt=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,qgt=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Ygt(t,e,n){let r=new BE;const i=new $t,o=new $t,s=new zi,a=new Q6({depthPacking:Tue}),l=new e8,d={},f=n.maxTextureSize,p={[vm]:Wl,[Wl]:vm,[bh]:bh},g=new kh({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new $t},radius:{value:4}},vertexShader:Ggt,fragmentShader:qgt}),v=g.clone();v.defines.HORIZONTAL_PASS=1;const x=new Lr;x.setAttribute("position",new Xi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new Cs(x,g),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=LO;let M=this.type;this.render=function(D,B,U){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||D.length===0)return;const J=t.getRenderTarget(),V=t.getActiveCubeFace(),X=t.getActiveMipmapLevel(),oe=t.state;oe.setBlending(im),oe.buffers.color.setClear(1,1,1,1),oe.buffers.depth.setTest(!0),oe.setScissorTest(!1);const pe=M!==uh&&this.type===uh,re=M===uh&&this.type!==uh;for(let he=0,ue=D.length;he<ue;he++){const be=D[he],ie=be.shadow;if(ie===void 0){console.warn("THREE.WebGLShadowMap:",be,"has no shadow.");continue}if(ie.autoUpdate===!1&&ie.needsUpdate===!1)continue;i.copy(ie.mapSize);const ve=ie.getFrameExtents();if(i.multiply(ve),o.copy(ie.mapSize),(i.x>f||i.y>f)&&(i.x>f&&(o.x=Math.floor(f/ve.x),i.x=o.x*ve.x,ie.mapSize.x=o.x),i.y>f&&(o.y=Math.floor(f/ve.y),i.y=o.y*ve.y,ie.mapSize.y=o.y)),ie.map===null||pe===!0||re===!0){const Ne=this.type!==uh?{minFilter:cs,magFilter:cs}:{};ie.map!==null&&ie.map.dispose(),ie.map=new Ih(i.x,i.y,Ne),ie.map.texture.name=be.name+".shadowMap",ie.camera.updateProjectionMatrix()}t.setRenderTarget(ie.map),t.clear();const Ee=ie.getViewportCount();for(let Ne=0;Ne<Ee;Ne++){const Ge=ie.getViewport(Ne);s.set(o.x*Ge.x,o.y*Ge.y,o.x*Ge.z,o.y*Ge.w),oe.viewport(s),ie.updateMatrices(be,Ne),r=ie.getFrustum(),k(B,U,ie.camera,be,this.type)}ie.isPointLightShadow!==!0&&this.type===uh&&T(ie,U),ie.needsUpdate=!1}M=this.type,S.needsUpdate=!1,t.setRenderTarget(J,V,X)};function T(D,B){const U=e.update(b);g.defines.VSM_SAMPLES!==D.blurSamples&&(g.defines.VSM_SAMPLES=D.blurSamples,v.defines.VSM_SAMPLES=D.blurSamples,g.needsUpdate=!0,v.needsUpdate=!0),D.mapPass===null&&(D.mapPass=new Ih(i.x,i.y)),g.uniforms.shadow_pass.value=D.map.texture,g.uniforms.resolution.value=D.mapSize,g.uniforms.radius.value=D.radius,t.setRenderTarget(D.mapPass),t.clear(),t.renderBufferDirect(B,null,U,g,b,null),v.uniforms.shadow_pass.value=D.mapPass.texture,v.uniforms.resolution.value=D.mapSize,v.uniforms.radius.value=D.radius,t.setRenderTarget(D.map),t.clear(),t.renderBufferDirect(B,null,U,v,b,null)}function C(D,B,U,J){let V=null;const X=U.isPointLight===!0?D.customDistanceMaterial:D.customDepthMaterial;if(X!==void 0)V=X;else if(V=U.isPointLight===!0?l:a,t.localClippingEnabled&&B.clipShadows===!0&&Array.isArray(B.clippingPlanes)&&B.clippingPlanes.length!==0||B.displacementMap&&B.displacementScale!==0||B.alphaMap&&B.alphaTest>0||B.map&&B.alphaTest>0){const oe=V.uuid,pe=B.uuid;let re=d[oe];re===void 0&&(re={},d[oe]=re);let he=re[pe];he===void 0&&(he=V.clone(),re[pe]=he,B.addEventListener("dispose",O)),V=he}if(V.visible=B.visible,V.wireframe=B.wireframe,J===uh?V.side=B.shadowSide!==null?B.shadowSide:B.side:V.side=B.shadowSide!==null?B.shadowSide:p[B.side],V.alphaMap=B.alphaMap,V.alphaTest=B.alphaTest,V.map=B.map,V.clipShadows=B.clipShadows,V.clippingPlanes=B.clippingPlanes,V.clipIntersection=B.clipIntersection,V.displacementMap=B.displacementMap,V.displacementScale=B.displacementScale,V.displacementBias=B.displacementBias,V.wireframeLinewidth=B.wireframeLinewidth,V.linewidth=B.linewidth,U.isPointLight===!0&&V.isMeshDistanceMaterial===!0){const oe=t.properties.get(V);oe.light=U}return V}function k(D,B,U,J,V){if(D.visible===!1)return;if(D.layers.test(B.layers)&&(D.isMesh||D.isLine||D.isPoints)&&(D.castShadow||D.receiveShadow&&V===uh)&&(!D.frustumCulled||r.intersectsObject(D))){D.modelViewMatrix.multiplyMatrices(U.matrixWorldInverse,D.matrixWorld);const pe=e.update(D),re=D.material;if(Array.isArray(re)){const he=pe.groups;for(let ue=0,be=he.length;ue<be;ue++){const ie=he[ue],ve=re[ie.materialIndex];if(ve&&ve.visible){const Ee=C(D,ve,J,V);D.onBeforeShadow(t,D,B,U,pe,Ee,ie),t.renderBufferDirect(U,null,pe,Ee,D,ie),D.onAfterShadow(t,D,B,U,pe,Ee,ie)}}}else if(re.visible){const he=C(D,re,J,V);D.onBeforeShadow(t,D,B,U,pe,he,null),t.renderBufferDirect(U,null,pe,he,D,null),D.onAfterShadow(t,D,B,U,pe,he,null)}}const oe=D.children;for(let pe=0,re=oe.length;pe<re;pe++)k(oe[pe],B,U,J,V)}function O(D){D.target.removeEventListener("dispose",O);for(const U in d){const J=d[U],V=D.target.uuid;V in J&&(J[V].dispose(),delete J[V])}}}function Xgt(t,e,n){const r=n.isWebGL2;function i(){let Xe=!1;const xe=new zi;let ee=null;const se=new zi(0,0,0,0);return{setMask:function(me){ee!==me&&!Xe&&(t.colorMask(me,me,me,me),ee=me)},setLocked:function(me){Xe=me},setClear:function(me,Ce,qe,Ye,et){et===!0&&(me*=Ye,Ce*=Ye,qe*=Ye),xe.set(me,Ce,qe,Ye),se.equals(xe)===!1&&(t.clearColor(me,Ce,qe,Ye),se.copy(xe))},reset:function(){Xe=!1,ee=null,se.set(-1,0,0,0)}}}function o(){let Xe=!1,xe=null,ee=null,se=null;return{setTest:function(me){me?Fe(t.DEPTH_TEST):at(t.DEPTH_TEST)},setMask:function(me){xe!==me&&!Xe&&(t.depthMask(me),xe=me)},setFunc:function(me){if(ee!==me){switch(me){case Qce:t.depthFunc(t.NEVER);break;case eue:t.depthFunc(t.ALWAYS);break;case tue:t.depthFunc(t.LESS);break;case yM:t.depthFunc(t.LEQUAL);break;case nue:t.depthFunc(t.EQUAL);break;case rue:t.depthFunc(t.GEQUAL);break;case iue:t.depthFunc(t.GREATER);break;case oue:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}ee=me}},setLocked:function(me){Xe=me},setClear:function(me){se!==me&&(t.clearDepth(me),se=me)},reset:function(){Xe=!1,xe=null,ee=null,se=null}}}function s(){let Xe=!1,xe=null,ee=null,se=null,me=null,Ce=null,qe=null,Ye=null,et=null;return{setTest:function(je){Xe||(je?Fe(t.STENCIL_TEST):at(t.STENCIL_TEST))},setMask:function(je){xe!==je&&!Xe&&(t.stencilMask(je),xe=je)},setFunc:function(je,ot,Dt){(ee!==je||se!==ot||me!==Dt)&&(t.stencilFunc(je,ot,Dt),ee=je,se=ot,me=Dt)},setOp:function(je,ot,Dt){(Ce!==je||qe!==ot||Ye!==Dt)&&(t.stencilOp(je,ot,Dt),Ce=je,qe=ot,Ye=Dt)},setLocked:function(je){Xe=je},setClear:function(je){et!==je&&(t.clearStencil(je),et=je)},reset:function(){Xe=!1,xe=null,ee=null,se=null,me=null,Ce=null,qe=null,Ye=null,et=null}}}const a=new i,l=new o,d=new s,f=new WeakMap,p=new WeakMap;let g={},v={},x=new WeakMap,b=[],S=null,M=!1,T=null,C=null,k=null,O=null,D=null,B=null,U=null,J=new Dn(0,0,0),V=0,X=!1,oe=null,pe=null,re=null,he=null,ue=null;const be=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ie=!1,ve=0;const Ee=t.getParameter(t.VERSION);Ee.indexOf("WebGL")!==-1?(ve=parseFloat(/^WebGL (\d)/.exec(Ee)[1]),ie=ve>=1):Ee.indexOf("OpenGL ES")!==-1&&(ve=parseFloat(/^OpenGL ES (\d)/.exec(Ee)[1]),ie=ve>=2);let Ne=null,Ge={};const dt=t.getParameter(t.SCISSOR_BOX),Ue=t.getParameter(t.VIEWPORT),st=new zi().fromArray(dt),lt=new zi().fromArray(Ue);function Rt(Xe,xe,ee,se){const me=new Uint8Array(4),Ce=t.createTexture();t.bindTexture(Xe,Ce),t.texParameteri(Xe,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Xe,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let qe=0;qe<ee;qe++)r&&(Xe===t.TEXTURE_3D||Xe===t.TEXTURE_2D_ARRAY)?t.texImage3D(xe,0,t.RGBA,1,1,se,0,t.RGBA,t.UNSIGNED_BYTE,me):t.texImage2D(xe+qe,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,me);return Ce}const Lt={};Lt[t.TEXTURE_2D]=Rt(t.TEXTURE_2D,t.TEXTURE_2D,1),Lt[t.TEXTURE_CUBE_MAP]=Rt(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(Lt[t.TEXTURE_2D_ARRAY]=Rt(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),Lt[t.TEXTURE_3D]=Rt(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),d.setClear(0),Fe(t.DEPTH_TEST),l.setFunc(yM),Vt(!1),sn(n4),Fe(t.CULL_FACE),Tt(im);function Fe(Xe){g[Xe]!==!0&&(t.enable(Xe),g[Xe]=!0)}function at(Xe){g[Xe]!==!1&&(t.disable(Xe),g[Xe]=!1)}function nt(Xe,xe){return v[Xe]!==xe?(t.bindFramebuffer(Xe,xe),v[Xe]=xe,r&&(Xe===t.DRAW_FRAMEBUFFER&&(v[t.FRAMEBUFFER]=xe),Xe===t.FRAMEBUFFER&&(v[t.DRAW_FRAMEBUFFER]=xe)),!0):!1}function ge(Xe,xe){let ee=b,se=!1;if(Xe){ee=x.get(xe),ee===void 0&&(ee=[],x.set(xe,ee));const me=Xe.textures;if(ee.length!==me.length||ee[0]!==t.COLOR_ATTACHMENT0){for(let Ce=0,qe=me.length;Ce<qe;Ce++)ee[Ce]=t.COLOR_ATTACHMENT0+Ce;ee.length=me.length,se=!0}}else ee[0]!==t.BACK&&(ee[0]=t.BACK,se=!0);if(se)if(n.isWebGL2)t.drawBuffers(ee);else if(e.has("WEBGL_draw_buffers")===!0)e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ee);else throw new Error("THREE.WebGLState: Usage of gl.drawBuffers() require WebGL2 or WEBGL_draw_buffers extension")}function tt(Xe){return S!==Xe?(t.useProgram(Xe),S=Xe,!0):!1}const rt={[zg]:t.FUNC_ADD,[Fce]:t.FUNC_SUBTRACT,[Bce]:t.FUNC_REVERSE_SUBTRACT};if(r)rt[s4]=t.MIN,rt[a4]=t.MAX;else{const Xe=e.get("EXT_blend_minmax");Xe!==null&&(rt[s4]=Xe.MIN_EXT,rt[a4]=Xe.MAX_EXT)}const vt={[$ce]:t.ZERO,[jce]:t.ONE,[Uce]:t.SRC_COLOR,[KI]:t.SRC_ALPHA,[Yce]:t.SRC_ALPHA_SATURATE,[Gce]:t.DST_COLOR,[Wce]:t.DST_ALPHA,[Vce]:t.ONE_MINUS_SRC_COLOR,[ZI]:t.ONE_MINUS_SRC_ALPHA,[qce]:t.ONE_MINUS_DST_COLOR,[Hce]:t.ONE_MINUS_DST_ALPHA,[Xce]:t.CONSTANT_COLOR,[Kce]:t.ONE_MINUS_CONSTANT_COLOR,[Zce]:t.CONSTANT_ALPHA,[Jce]:t.ONE_MINUS_CONSTANT_ALPHA};function Tt(Xe,xe,ee,se,me,Ce,qe,Ye,et,je){if(Xe===im){M===!0&&(at(t.BLEND),M=!1);return}if(M===!1&&(Fe(t.BLEND),M=!0),Xe!==zce){if(Xe!==T||je!==X){if((C!==zg||D!==zg)&&(t.blendEquation(t.FUNC_ADD),C=zg,D=zg),je)switch(Xe){case u0:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case r4:t.blendFunc(t.ONE,t.ONE);break;case i4:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case o4:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Xe);break}else switch(Xe){case u0:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case r4:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case i4:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case o4:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Xe);break}k=null,O=null,B=null,U=null,J.set(0,0,0),V=0,T=Xe,X=je}return}me=me||xe,Ce=Ce||ee,qe=qe||se,(xe!==C||me!==D)&&(t.blendEquationSeparate(rt[xe],rt[me]),C=xe,D=me),(ee!==k||se!==O||Ce!==B||qe!==U)&&(t.blendFuncSeparate(vt[ee],vt[se],vt[Ce],vt[qe]),k=ee,O=se,B=Ce,U=qe),(Ye.equals(J)===!1||et!==V)&&(t.blendColor(Ye.r,Ye.g,Ye.b,et),J.copy(Ye),V=et),T=Xe,X=!1}function We(Xe,xe){Xe.side===bh?at(t.CULL_FACE):Fe(t.CULL_FACE);let ee=Xe.side===Wl;xe&&(ee=!ee),Vt(ee),Xe.blending===u0&&Xe.transparent===!1?Tt(im):Tt(Xe.blending,Xe.blendEquation,Xe.blendSrc,Xe.blendDst,Xe.blendEquationAlpha,Xe.blendSrcAlpha,Xe.blendDstAlpha,Xe.blendColor,Xe.blendAlpha,Xe.premultipliedAlpha),l.setFunc(Xe.depthFunc),l.setTest(Xe.depthTest),l.setMask(Xe.depthWrite),a.setMask(Xe.colorWrite);const se=Xe.stencilWrite;d.setTest(se),se&&(d.setMask(Xe.stencilWriteMask),d.setFunc(Xe.stencilFunc,Xe.stencilRef,Xe.stencilFuncMask),d.setOp(Xe.stencilFail,Xe.stencilZFail,Xe.stencilZPass)),Pe(Xe.polygonOffset,Xe.polygonOffsetFactor,Xe.polygonOffsetUnits),Xe.alphaToCoverage===!0?Fe(t.SAMPLE_ALPHA_TO_COVERAGE):at(t.SAMPLE_ALPHA_TO_COVERAGE)}function Vt(Xe){oe!==Xe&&(Xe?t.frontFace(t.CW):t.frontFace(t.CCW),oe=Xe)}function sn(Xe){Xe!==Lce?(Fe(t.CULL_FACE),Xe!==pe&&(Xe===n4?t.cullFace(t.BACK):Xe===Dce?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):at(t.CULL_FACE),pe=Xe}function Ut(Xe){Xe!==re&&(ie&&t.lineWidth(Xe),re=Xe)}function Pe(Xe,xe,ee){Xe?(Fe(t.POLYGON_OFFSET_FILL),(he!==xe||ue!==ee)&&(t.polygonOffset(xe,ee),he=xe,ue=ee)):at(t.POLYGON_OFFSET_FILL)}function _e(Xe){Xe?Fe(t.SCISSOR_TEST):at(t.SCISSOR_TEST)}function Mt(Xe){Xe===void 0&&(Xe=t.TEXTURE0+be-1),Ne!==Xe&&(t.activeTexture(Xe),Ne=Xe)}function wt(Xe,xe,ee){ee===void 0&&(Ne===null?ee=t.TEXTURE0+be-1:ee=Ne);let se=Ge[ee];se===void 0&&(se={type:void 0,texture:void 0},Ge[ee]=se),(se.type!==Xe||se.texture!==xe)&&(Ne!==ee&&(t.activeTexture(ee),Ne=ee),t.bindTexture(Xe,xe||Lt[Xe]),se.type=Xe,se.texture=xe)}function Wt(){const Xe=Ge[Ne];Xe!==void 0&&Xe.type!==void 0&&(t.bindTexture(Xe.type,null),Xe.type=void 0,Xe.texture=void 0)}function Bt(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function Mn(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function an(){try{t.texSubImage2D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function Je(){try{t.texSubImage3D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function Yt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function xn(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function en(){try{t.texStorage2D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function un(){try{t.texStorage3D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function St(){try{t.texImage2D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function gt(){try{t.texImage3D.apply(t,arguments)}catch(Xe){console.error("THREE.WebGLState:",Xe)}}function Ae(Xe){st.equals(Xe)===!1&&(t.scissor(Xe.x,Xe.y,Xe.z,Xe.w),st.copy(Xe))}function ft(Xe){lt.equals(Xe)===!1&&(t.viewport(Xe.x,Xe.y,Xe.z,Xe.w),lt.copy(Xe))}function Ie(Xe,xe){let ee=p.get(xe);ee===void 0&&(ee=new WeakMap,p.set(xe,ee));let se=ee.get(Xe);se===void 0&&(se=t.getUniformBlockIndex(xe,Xe.name),ee.set(Xe,se))}function it(Xe,xe){const se=p.get(xe).get(Xe);f.get(xe)!==se&&(t.uniformBlockBinding(xe,se,Xe.__bindingPointIndex),f.set(xe,se))}function tn(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),g={},Ne=null,Ge={},v={},x=new WeakMap,b=[],S=null,M=!1,T=null,C=null,k=null,O=null,D=null,B=null,U=null,J=new Dn(0,0,0),V=0,X=!1,oe=null,pe=null,re=null,he=null,ue=null,st.set(0,0,t.canvas.width,t.canvas.height),lt.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),d.reset()}return{buffers:{color:a,depth:l,stencil:d},enable:Fe,disable:at,bindFramebuffer:nt,drawBuffers:ge,useProgram:tt,setBlending:Tt,setMaterial:We,setFlipSided:Vt,setCullFace:sn,setLineWidth:Ut,setPolygonOffset:Pe,setScissorTest:_e,activeTexture:Mt,bindTexture:wt,unbindTexture:Wt,compressedTexImage2D:Bt,compressedTexImage3D:Mn,texImage2D:St,texImage3D:gt,updateUBOMapping:Ie,uniformBlockBinding:it,texStorage2D:en,texStorage3D:un,texSubImage2D:an,texSubImage3D:Je,compressedTexSubImage2D:Yt,compressedTexSubImage3D:xn,scissor:Ae,viewport:ft,reset:tn}}function Kgt(t,e,n,r,i,o,s){const a=i.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new $t,p=new WeakMap;let g;const v=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(Pe,_e){return x?new OffscreenCanvas(Pe,_e):IM("canvas")}function S(Pe,_e,Mt,wt){let Wt=1;const Bt=Ut(Pe);if((Bt.width>wt||Bt.height>wt)&&(Wt=wt/Math.max(Bt.width,Bt.height)),Wt<1||_e===!0)if(typeof HTMLImageElement<"u"&&Pe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Pe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Pe instanceof ImageBitmap||typeof VideoFrame<"u"&&Pe instanceof VideoFrame){const Mn=_e?ek:Math.floor,an=Mn(Wt*Bt.width),Je=Mn(Wt*Bt.height);g===void 0&&(g=b(an,Je));const Yt=Mt?b(an,Je):g;return Yt.width=an,Yt.height=Je,Yt.getContext("2d").drawImage(Pe,0,0,an,Je),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Bt.width+"x"+Bt.height+") to ("+an+"x"+Je+")."),Yt}else return"data"in Pe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Bt.width+"x"+Bt.height+")."),Pe;return Pe}function M(Pe){const _e=Ut(Pe);return N4(_e.width)&&N4(_e.height)}function T(Pe){return a?!1:Pe.wrapS!==fl||Pe.wrapT!==fl||Pe.minFilter!==cs&&Pe.minFilter!==Lo}function C(Pe,_e){return Pe.generateMipmaps&&_e&&Pe.minFilter!==cs&&Pe.minFilter!==Lo}function k(Pe){t.generateMipmap(Pe)}function O(Pe,_e,Mt,wt,Wt=!1){if(a===!1)return _e;if(Pe!==null){if(t[Pe]!==void 0)return t[Pe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Pe+"'")}let Bt=_e;if(_e===t.RED&&(Mt===t.FLOAT&&(Bt=t.R32F),Mt===t.HALF_FLOAT&&(Bt=t.R16F),Mt===t.UNSIGNED_BYTE&&(Bt=t.R8)),_e===t.RED_INTEGER&&(Mt===t.UNSIGNED_BYTE&&(Bt=t.R8UI),Mt===t.UNSIGNED_SHORT&&(Bt=t.R16UI),Mt===t.UNSIGNED_INT&&(Bt=t.R32UI),Mt===t.BYTE&&(Bt=t.R8I),Mt===t.SHORT&&(Bt=t.R16I),Mt===t.INT&&(Bt=t.R32I)),_e===t.RG&&(Mt===t.FLOAT&&(Bt=t.RG32F),Mt===t.HALF_FLOAT&&(Bt=t.RG16F),Mt===t.UNSIGNED_BYTE&&(Bt=t.RG8)),_e===t.RG_INTEGER&&(Mt===t.UNSIGNED_BYTE&&(Bt=t.RG8UI),Mt===t.UNSIGNED_SHORT&&(Bt=t.RG16UI),Mt===t.UNSIGNED_INT&&(Bt=t.RG32UI),Mt===t.BYTE&&(Bt=t.RG8I),Mt===t.SHORT&&(Bt=t.RG16I),Mt===t.INT&&(Bt=t.RG32I)),_e===t.RGBA){const Mn=Wt?EM:Ni.getTransfer(wt);Mt===t.FLOAT&&(Bt=t.RGBA32F),Mt===t.HALF_FLOAT&&(Bt=t.RGBA16F),Mt===t.UNSIGNED_BYTE&&(Bt=Mn===so?t.SRGB8_ALPHA8:t.RGBA8),Mt===t.UNSIGNED_SHORT_4_4_4_4&&(Bt=t.RGBA4),Mt===t.UNSIGNED_SHORT_5_5_5_1&&(Bt=t.RGB5_A1)}return(Bt===t.R16F||Bt===t.R32F||Bt===t.RG16F||Bt===t.RG32F||Bt===t.RGBA16F||Bt===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Bt}function D(Pe,_e,Mt){return C(Pe,Mt)===!0||Pe.isFramebufferTexture&&Pe.minFilter!==cs&&Pe.minFilter!==Lo?Math.log2(Math.max(_e.width,_e.height))+1:Pe.mipmaps!==void 0&&Pe.mipmaps.length>0?Pe.mipmaps.length:Pe.isCompressedTexture&&Array.isArray(Pe.image)?_e.mipmaps.length:1}function B(Pe){return Pe===cs||Pe===JI||Pe===Dv?t.NEAREST:t.LINEAR}function U(Pe){const _e=Pe.target;_e.removeEventListener("dispose",U),V(_e),_e.isVideoTexture&&p.delete(_e)}function J(Pe){const _e=Pe.target;_e.removeEventListener("dispose",J),oe(_e)}function V(Pe){const _e=r.get(Pe);if(_e.__webglInit===void 0)return;const Mt=Pe.source,wt=v.get(Mt);if(wt){const Wt=wt[_e.__cacheKey];Wt.usedTimes--,Wt.usedTimes===0&&X(Pe),Object.keys(wt).length===0&&v.delete(Mt)}r.remove(Pe)}function X(Pe){const _e=r.get(Pe);t.deleteTexture(_e.__webglTexture);const Mt=Pe.source,wt=v.get(Mt);delete wt[_e.__cacheKey],s.memory.textures--}function oe(Pe){const _e=r.get(Pe);if(Pe.depthTexture&&Pe.depthTexture.dispose(),Pe.isWebGLCubeRenderTarget)for(let wt=0;wt<6;wt++){if(Array.isArray(_e.__webglFramebuffer[wt]))for(let Wt=0;Wt<_e.__webglFramebuffer[wt].length;Wt++)t.deleteFramebuffer(_e.__webglFramebuffer[wt][Wt]);else t.deleteFramebuffer(_e.__webglFramebuffer[wt]);_e.__webglDepthbuffer&&t.deleteRenderbuffer(_e.__webglDepthbuffer[wt])}else{if(Array.isArray(_e.__webglFramebuffer))for(let wt=0;wt<_e.__webglFramebuffer.length;wt++)t.deleteFramebuffer(_e.__webglFramebuffer[wt]);else t.deleteFramebuffer(_e.__webglFramebuffer);if(_e.__webglDepthbuffer&&t.deleteRenderbuffer(_e.__webglDepthbuffer),_e.__webglMultisampledFramebuffer&&t.deleteFramebuffer(_e.__webglMultisampledFramebuffer),_e.__webglColorRenderbuffer)for(let wt=0;wt<_e.__webglColorRenderbuffer.length;wt++)_e.__webglColorRenderbuffer[wt]&&t.deleteRenderbuffer(_e.__webglColorRenderbuffer[wt]);_e.__webglDepthRenderbuffer&&t.deleteRenderbuffer(_e.__webglDepthRenderbuffer)}const Mt=Pe.textures;for(let wt=0,Wt=Mt.length;wt<Wt;wt++){const Bt=r.get(Mt[wt]);Bt.__webglTexture&&(t.deleteTexture(Bt.__webglTexture),s.memory.textures--),r.remove(Mt[wt])}r.remove(Pe)}let pe=0;function re(){pe=0}function he(){const Pe=pe;return Pe>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Pe+" texture units while this GPU supports only "+i.maxTextures),pe+=1,Pe}function ue(Pe){const _e=[];return _e.push(Pe.wrapS),_e.push(Pe.wrapT),_e.push(Pe.wrapR||0),_e.push(Pe.magFilter),_e.push(Pe.minFilter),_e.push(Pe.anisotropy),_e.push(Pe.internalFormat),_e.push(Pe.format),_e.push(Pe.type),_e.push(Pe.generateMipmaps),_e.push(Pe.premultiplyAlpha),_e.push(Pe.flipY),_e.push(Pe.unpackAlignment),_e.push(Pe.colorSpace),_e.join()}function be(Pe,_e){const Mt=r.get(Pe);if(Pe.isVideoTexture&&Vt(Pe),Pe.isRenderTargetTexture===!1&&Pe.version>0&&Mt.__version!==Pe.version){const wt=Pe.image;if(wt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(wt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{lt(Mt,Pe,_e);return}}n.bindTexture(t.TEXTURE_2D,Mt.__webglTexture,t.TEXTURE0+_e)}function ie(Pe,_e){const Mt=r.get(Pe);if(Pe.version>0&&Mt.__version!==Pe.version){lt(Mt,Pe,_e);return}n.bindTexture(t.TEXTURE_2D_ARRAY,Mt.__webglTexture,t.TEXTURE0+_e)}function ve(Pe,_e){const Mt=r.get(Pe);if(Pe.version>0&&Mt.__version!==Pe.version){lt(Mt,Pe,_e);return}n.bindTexture(t.TEXTURE_3D,Mt.__webglTexture,t.TEXTURE0+_e)}function Ee(Pe,_e){const Mt=r.get(Pe);if(Pe.version>0&&Mt.__version!==Pe.version){Rt(Mt,Pe,_e);return}n.bindTexture(t.TEXTURE_CUBE_MAP,Mt.__webglTexture,t.TEXTURE0+_e)}const Ne={[xM]:t.REPEAT,[fl]:t.CLAMP_TO_EDGE,[bM]:t.MIRRORED_REPEAT},Ge={[cs]:t.NEAREST,[JI]:t.NEAREST_MIPMAP_NEAREST,[Dv]:t.NEAREST_MIPMAP_LINEAR,[Lo]:t.LINEAR,[HS]:t.LINEAR_MIPMAP_NEAREST,[bf]:t.LINEAR_MIPMAP_LINEAR},dt={[Aue]:t.NEVER,[Lue]:t.ALWAYS,[Pue]:t.LESS,[H6]:t.LEQUAL,[Iue]:t.EQUAL,[Oue]:t.GEQUAL,[kue]:t.GREATER,[Rue]:t.NOTEQUAL};function Ue(Pe,_e,Mt){if(_e.type===iu&&e.has("OES_texture_float_linear")===!1&&(_e.magFilter===Lo||_e.magFilter===HS||_e.magFilter===Dv||_e.magFilter===bf||_e.minFilter===Lo||_e.minFilter===HS||_e.minFilter===Dv||_e.minFilter===bf)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),Mt?(t.texParameteri(Pe,t.TEXTURE_WRAP_S,Ne[_e.wrapS]),t.texParameteri(Pe,t.TEXTURE_WRAP_T,Ne[_e.wrapT]),(Pe===t.TEXTURE_3D||Pe===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Pe,t.TEXTURE_WRAP_R,Ne[_e.wrapR]),t.texParameteri(Pe,t.TEXTURE_MAG_FILTER,Ge[_e.magFilter]),t.texParameteri(Pe,t.TEXTURE_MIN_FILTER,Ge[_e.minFilter])):(t.texParameteri(Pe,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(Pe,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(Pe===t.TEXTURE_3D||Pe===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Pe,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(_e.wrapS!==fl||_e.wrapT!==fl)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(Pe,t.TEXTURE_MAG_FILTER,B(_e.magFilter)),t.texParameteri(Pe,t.TEXTURE_MIN_FILTER,B(_e.minFilter)),_e.minFilter!==cs&&_e.minFilter!==Lo&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),_e.compareFunction&&(t.texParameteri(Pe,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(Pe,t.TEXTURE_COMPARE_FUNC,dt[_e.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(_e.magFilter===cs||_e.minFilter!==Dv&&_e.minFilter!==bf||_e.type===iu&&e.has("OES_texture_float_linear")===!1||a===!1&&_e.type===Kb&&e.has("OES_texture_half_float_linear")===!1)return;if(_e.anisotropy>1||r.get(_e).__currentAnisotropy){const wt=e.get("EXT_texture_filter_anisotropic");t.texParameterf(Pe,wt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(_e.anisotropy,i.getMaxAnisotropy())),r.get(_e).__currentAnisotropy=_e.anisotropy}}}function st(Pe,_e){let Mt=!1;Pe.__webglInit===void 0&&(Pe.__webglInit=!0,_e.addEventListener("dispose",U));const wt=_e.source;let Wt=v.get(wt);Wt===void 0&&(Wt={},v.set(wt,Wt));const Bt=ue(_e);if(Bt!==Pe.__cacheKey){Wt[Bt]===void 0&&(Wt[Bt]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,Mt=!0),Wt[Bt].usedTimes++;const Mn=Wt[Pe.__cacheKey];Mn!==void 0&&(Wt[Pe.__cacheKey].usedTimes--,Mn.usedTimes===0&&X(_e)),Pe.__cacheKey=Bt,Pe.__webglTexture=Wt[Bt].texture}return Mt}function lt(Pe,_e,Mt){let wt=t.TEXTURE_2D;(_e.isDataArrayTexture||_e.isCompressedArrayTexture)&&(wt=t.TEXTURE_2D_ARRAY),_e.isData3DTexture&&(wt=t.TEXTURE_3D);const Wt=st(Pe,_e),Bt=_e.source;n.bindTexture(wt,Pe.__webglTexture,t.TEXTURE0+Mt);const Mn=r.get(Bt);if(Bt.version!==Mn.__version||Wt===!0){n.activeTexture(t.TEXTURE0+Mt);const an=Ni.getPrimaries(Ni.workingColorSpace),Je=_e.colorSpace===Fp?null:Ni.getPrimaries(_e.colorSpace),Yt=_e.colorSpace===Fp||an===Je?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,_e.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_e.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,_e.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Yt);const xn=T(_e)&&M(_e.image)===!1;let en=S(_e.image,xn,!1,i.maxTextureSize);en=sn(_e,en);const un=M(en)||a,St=o.convert(_e.format,_e.colorSpace);let gt=o.convert(_e.type),Ae=O(_e.internalFormat,St,gt,_e.colorSpace,_e.isVideoTexture);Ue(wt,_e,un);let ft;const Ie=_e.mipmaps,it=a&&_e.isVideoTexture!==!0&&Ae!==V6,tn=Mn.__version===void 0||Wt===!0,Xe=Bt.dataReady,xe=D(_e,en,un);if(_e.isDepthTexture)Ae=t.DEPTH_COMPONENT,a?_e.type===iu?Ae=t.DEPTH_COMPONENT32F:_e.type===Yp?Ae=t.DEPTH_COMPONENT24:_e.type===sy?Ae=t.DEPTH24_STENCIL8:Ae=t.DEPTH_COMPONENT16:_e.type===iu&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),_e.format===ay&&Ae===t.DEPTH_COMPONENT&&_e.type!==NO&&_e.type!==Yp&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),_e.type=Yp,gt=o.convert(_e.type)),_e.format===I0&&Ae===t.DEPTH_COMPONENT&&(Ae=t.DEPTH_STENCIL,_e.type!==sy&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),_e.type=sy,gt=o.convert(_e.type))),tn&&(it?n.texStorage2D(t.TEXTURE_2D,1,Ae,en.width,en.height):n.texImage2D(t.TEXTURE_2D,0,Ae,en.width,en.height,0,St,gt,null));else if(_e.isDataTexture)if(Ie.length>0&&un){it&&tn&&n.texStorage2D(t.TEXTURE_2D,xe,Ae,Ie[0].width,Ie[0].height);for(let ee=0,se=Ie.length;ee<se;ee++)ft=Ie[ee],it?Xe&&n.texSubImage2D(t.TEXTURE_2D,ee,0,0,ft.width,ft.height,St,gt,ft.data):n.texImage2D(t.TEXTURE_2D,ee,Ae,ft.width,ft.height,0,St,gt,ft.data);_e.generateMipmaps=!1}else it?(tn&&n.texStorage2D(t.TEXTURE_2D,xe,Ae,en.width,en.height),Xe&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,en.width,en.height,St,gt,en.data)):n.texImage2D(t.TEXTURE_2D,0,Ae,en.width,en.height,0,St,gt,en.data);else if(_e.isCompressedTexture)if(_e.isCompressedArrayTexture){it&&tn&&n.texStorage3D(t.TEXTURE_2D_ARRAY,xe,Ae,Ie[0].width,Ie[0].height,en.depth);for(let ee=0,se=Ie.length;ee<se;ee++)ft=Ie[ee],_e.format!==Bl?St!==null?it?Xe&&n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,ee,0,0,0,ft.width,ft.height,en.depth,St,ft.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,ee,Ae,ft.width,ft.height,en.depth,0,ft.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):it?Xe&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,ee,0,0,0,ft.width,ft.height,en.depth,St,gt,ft.data):n.texImage3D(t.TEXTURE_2D_ARRAY,ee,Ae,ft.width,ft.height,en.depth,0,St,gt,ft.data)}else{it&&tn&&n.texStorage2D(t.TEXTURE_2D,xe,Ae,Ie[0].width,Ie[0].height);for(let ee=0,se=Ie.length;ee<se;ee++)ft=Ie[ee],_e.format!==Bl?St!==null?it?Xe&&n.compressedTexSubImage2D(t.TEXTURE_2D,ee,0,0,ft.width,ft.height,St,ft.data):n.compressedTexImage2D(t.TEXTURE_2D,ee,Ae,ft.width,ft.height,0,ft.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):it?Xe&&n.texSubImage2D(t.TEXTURE_2D,ee,0,0,ft.width,ft.height,St,gt,ft.data):n.texImage2D(t.TEXTURE_2D,ee,Ae,ft.width,ft.height,0,St,gt,ft.data)}else if(_e.isDataArrayTexture)it?(tn&&n.texStorage3D(t.TEXTURE_2D_ARRAY,xe,Ae,en.width,en.height,en.depth),Xe&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,en.width,en.height,en.depth,St,gt,en.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,Ae,en.width,en.height,en.depth,0,St,gt,en.data);else if(_e.isData3DTexture)it?(tn&&n.texStorage3D(t.TEXTURE_3D,xe,Ae,en.width,en.height,en.depth),Xe&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,en.width,en.height,en.depth,St,gt,en.data)):n.texImage3D(t.TEXTURE_3D,0,Ae,en.width,en.height,en.depth,0,St,gt,en.data);else if(_e.isFramebufferTexture){if(tn)if(it)n.texStorage2D(t.TEXTURE_2D,xe,Ae,en.width,en.height);else{let ee=en.width,se=en.height;for(let me=0;me<xe;me++)n.texImage2D(t.TEXTURE_2D,me,Ae,ee,se,0,St,gt,null),ee>>=1,se>>=1}}else if(Ie.length>0&&un){if(it&&tn){const ee=Ut(Ie[0]);n.texStorage2D(t.TEXTURE_2D,xe,Ae,ee.width,ee.height)}for(let ee=0,se=Ie.length;ee<se;ee++)ft=Ie[ee],it?Xe&&n.texSubImage2D(t.TEXTURE_2D,ee,0,0,St,gt,ft):n.texImage2D(t.TEXTURE_2D,ee,Ae,St,gt,ft);_e.generateMipmaps=!1}else if(it){if(tn){const ee=Ut(en);n.texStorage2D(t.TEXTURE_2D,xe,Ae,ee.width,ee.height)}Xe&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,St,gt,en)}else n.texImage2D(t.TEXTURE_2D,0,Ae,St,gt,en);C(_e,un)&&k(wt),Mn.__version=Bt.version,_e.onUpdate&&_e.onUpdate(_e)}Pe.__version=_e.version}function Rt(Pe,_e,Mt){if(_e.image.length!==6)return;const wt=st(Pe,_e),Wt=_e.source;n.bindTexture(t.TEXTURE_CUBE_MAP,Pe.__webglTexture,t.TEXTURE0+Mt);const Bt=r.get(Wt);if(Wt.version!==Bt.__version||wt===!0){n.activeTexture(t.TEXTURE0+Mt);const Mn=Ni.getPrimaries(Ni.workingColorSpace),an=_e.colorSpace===Fp?null:Ni.getPrimaries(_e.colorSpace),Je=_e.colorSpace===Fp||Mn===an?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,_e.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_e.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,_e.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Je);const Yt=_e.isCompressedTexture||_e.image[0].isCompressedTexture,xn=_e.image[0]&&_e.image[0].isDataTexture,en=[];for(let ee=0;ee<6;ee++)!Yt&&!xn?en[ee]=S(_e.image[ee],!1,!0,i.maxCubemapSize):en[ee]=xn?_e.image[ee].image:_e.image[ee],en[ee]=sn(_e,en[ee]);const un=en[0],St=M(un)||a,gt=o.convert(_e.format,_e.colorSpace),Ae=o.convert(_e.type),ft=O(_e.internalFormat,gt,Ae,_e.colorSpace),Ie=a&&_e.isVideoTexture!==!0,it=Bt.__version===void 0||wt===!0,tn=Wt.dataReady;let Xe=D(_e,un,St);Ue(t.TEXTURE_CUBE_MAP,_e,St);let xe;if(Yt){Ie&&it&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Xe,ft,un.width,un.height);for(let ee=0;ee<6;ee++){xe=en[ee].mipmaps;for(let se=0;se<xe.length;se++){const me=xe[se];_e.format!==Bl?gt!==null?Ie?tn&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ee,se,0,0,me.width,me.height,gt,me.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ee,se,ft,me.width,me.height,0,me.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ie?tn&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ee,se,0,0,me.width,me.height,gt,Ae,me.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ee,se,ft,me.width,me.height,0,gt,Ae,me.data)}}}else{if(xe=_e.mipmaps,Ie&&it){xe.length>0&&Xe++;const ee=Ut(en[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,Xe,ft,ee.width,ee.height)}for(let ee=0;ee<6;ee++)if(xn){Ie?tn&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ee,0,0,0,en[ee].width,en[ee].height,gt,Ae,en[ee].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ee,0,ft,en[ee].width,en[ee].height,0,gt,Ae,en[ee].data);for(let se=0;se<xe.length;se++){const Ce=xe[se].image[ee].image;Ie?tn&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ee,se+1,0,0,Ce.width,Ce.height,gt,Ae,Ce.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ee,se+1,ft,Ce.width,Ce.height,0,gt,Ae,Ce.data)}}else{Ie?tn&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ee,0,0,0,gt,Ae,en[ee]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ee,0,ft,gt,Ae,en[ee]);for(let se=0;se<xe.length;se++){const me=xe[se];Ie?tn&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ee,se+1,0,0,gt,Ae,me.image[ee]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ee,se+1,ft,gt,Ae,me.image[ee])}}}C(_e,St)&&k(t.TEXTURE_CUBE_MAP),Bt.__version=Wt.version,_e.onUpdate&&_e.onUpdate(_e)}Pe.__version=_e.version}function Lt(Pe,_e,Mt,wt,Wt,Bt){const Mn=o.convert(Mt.format,Mt.colorSpace),an=o.convert(Mt.type),Je=O(Mt.internalFormat,Mn,an,Mt.colorSpace);if(!r.get(_e).__hasExternalTextures){const xn=Math.max(1,_e.width>>Bt),en=Math.max(1,_e.height>>Bt);Wt===t.TEXTURE_3D||Wt===t.TEXTURE_2D_ARRAY?n.texImage3D(Wt,Bt,Je,xn,en,_e.depth,0,Mn,an,null):n.texImage2D(Wt,Bt,Je,xn,en,0,Mn,an,null)}n.bindFramebuffer(t.FRAMEBUFFER,Pe),We(_e)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,wt,Wt,r.get(Mt).__webglTexture,0,Tt(_e)):(Wt===t.TEXTURE_2D||Wt>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Wt<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,wt,Wt,r.get(Mt).__webglTexture,Bt),n.bindFramebuffer(t.FRAMEBUFFER,null)}function Fe(Pe,_e,Mt){if(t.bindRenderbuffer(t.RENDERBUFFER,Pe),_e.depthBuffer&&!_e.stencilBuffer){let wt=a===!0?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(Mt||We(_e)){const Wt=_e.depthTexture;Wt&&Wt.isDepthTexture&&(Wt.type===iu?wt=t.DEPTH_COMPONENT32F:Wt.type===Yp&&(wt=t.DEPTH_COMPONENT24));const Bt=Tt(_e);We(_e)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Bt,wt,_e.width,_e.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,Bt,wt,_e.width,_e.height)}else t.renderbufferStorage(t.RENDERBUFFER,wt,_e.width,_e.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,Pe)}else if(_e.depthBuffer&&_e.stencilBuffer){const wt=Tt(_e);Mt&&We(_e)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,wt,t.DEPTH24_STENCIL8,_e.width,_e.height):We(_e)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,wt,t.DEPTH24_STENCIL8,_e.width,_e.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,_e.width,_e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,Pe)}else{const wt=_e.textures;for(let Wt=0;Wt<wt.length;Wt++){const Bt=wt[Wt],Mn=o.convert(Bt.format,Bt.colorSpace),an=o.convert(Bt.type),Je=O(Bt.internalFormat,Mn,an,Bt.colorSpace),Yt=Tt(_e);Mt&&We(_e)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Yt,Je,_e.width,_e.height):We(_e)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Yt,Je,_e.width,_e.height):t.renderbufferStorage(t.RENDERBUFFER,Je,_e.width,_e.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function at(Pe,_e){if(_e&&_e.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,Pe),!(_e.depthTexture&&_e.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(_e.depthTexture).__webglTexture||_e.depthTexture.image.width!==_e.width||_e.depthTexture.image.height!==_e.height)&&(_e.depthTexture.image.width=_e.width,_e.depthTexture.image.height=_e.height,_e.depthTexture.needsUpdate=!0),be(_e.depthTexture,0);const wt=r.get(_e.depthTexture).__webglTexture,Wt=Tt(_e);if(_e.depthTexture.format===ay)We(_e)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,wt,0,Wt):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,wt,0);else if(_e.depthTexture.format===I0)We(_e)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,wt,0,Wt):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,wt,0);else throw new Error("Unknown depthTexture format")}function nt(Pe){const _e=r.get(Pe),Mt=Pe.isWebGLCubeRenderTarget===!0;if(Pe.depthTexture&&!_e.__autoAllocateDepthBuffer){if(Mt)throw new Error("target.depthTexture not supported in Cube render targets");at(_e.__webglFramebuffer,Pe)}else if(Mt){_e.__webglDepthbuffer=[];for(let wt=0;wt<6;wt++)n.bindFramebuffer(t.FRAMEBUFFER,_e.__webglFramebuffer[wt]),_e.__webglDepthbuffer[wt]=t.createRenderbuffer(),Fe(_e.__webglDepthbuffer[wt],Pe,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,_e.__webglFramebuffer),_e.__webglDepthbuffer=t.createRenderbuffer(),Fe(_e.__webglDepthbuffer,Pe,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function ge(Pe,_e,Mt){const wt=r.get(Pe);_e!==void 0&&Lt(wt.__webglFramebuffer,Pe,Pe.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),Mt!==void 0&&nt(Pe)}function tt(Pe){const _e=Pe.texture,Mt=r.get(Pe),wt=r.get(_e);Pe.addEventListener("dispose",J);const Wt=Pe.textures,Bt=Pe.isWebGLCubeRenderTarget===!0,Mn=Wt.length>1,an=M(Pe)||a;if(Mn||(wt.__webglTexture===void 0&&(wt.__webglTexture=t.createTexture()),wt.__version=_e.version,s.memory.textures++),Bt){Mt.__webglFramebuffer=[];for(let Je=0;Je<6;Je++)if(a&&_e.mipmaps&&_e.mipmaps.length>0){Mt.__webglFramebuffer[Je]=[];for(let Yt=0;Yt<_e.mipmaps.length;Yt++)Mt.__webglFramebuffer[Je][Yt]=t.createFramebuffer()}else Mt.__webglFramebuffer[Je]=t.createFramebuffer()}else{if(a&&_e.mipmaps&&_e.mipmaps.length>0){Mt.__webglFramebuffer=[];for(let Je=0;Je<_e.mipmaps.length;Je++)Mt.__webglFramebuffer[Je]=t.createFramebuffer()}else Mt.__webglFramebuffer=t.createFramebuffer();if(Mn)if(i.drawBuffers)for(let Je=0,Yt=Wt.length;Je<Yt;Je++){const xn=r.get(Wt[Je]);xn.__webglTexture===void 0&&(xn.__webglTexture=t.createTexture(),s.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&Pe.samples>0&&We(Pe)===!1){Mt.__webglMultisampledFramebuffer=t.createFramebuffer(),Mt.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,Mt.__webglMultisampledFramebuffer);for(let Je=0;Je<Wt.length;Je++){const Yt=Wt[Je];Mt.__webglColorRenderbuffer[Je]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,Mt.__webglColorRenderbuffer[Je]);const xn=o.convert(Yt.format,Yt.colorSpace),en=o.convert(Yt.type),un=O(Yt.internalFormat,xn,en,Yt.colorSpace,Pe.isXRRenderTarget===!0),St=Tt(Pe);t.renderbufferStorageMultisample(t.RENDERBUFFER,St,un,Pe.width,Pe.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Je,t.RENDERBUFFER,Mt.__webglColorRenderbuffer[Je])}t.bindRenderbuffer(t.RENDERBUFFER,null),Pe.depthBuffer&&(Mt.__webglDepthRenderbuffer=t.createRenderbuffer(),Fe(Mt.__webglDepthRenderbuffer,Pe,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Bt){n.bindTexture(t.TEXTURE_CUBE_MAP,wt.__webglTexture),Ue(t.TEXTURE_CUBE_MAP,_e,an);for(let Je=0;Je<6;Je++)if(a&&_e.mipmaps&&_e.mipmaps.length>0)for(let Yt=0;Yt<_e.mipmaps.length;Yt++)Lt(Mt.__webglFramebuffer[Je][Yt],Pe,_e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Je,Yt);else Lt(Mt.__webglFramebuffer[Je],Pe,_e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Je,0);C(_e,an)&&k(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Mn){for(let Je=0,Yt=Wt.length;Je<Yt;Je++){const xn=Wt[Je],en=r.get(xn);n.bindTexture(t.TEXTURE_2D,en.__webglTexture),Ue(t.TEXTURE_2D,xn,an),Lt(Mt.__webglFramebuffer,Pe,xn,t.COLOR_ATTACHMENT0+Je,t.TEXTURE_2D,0),C(xn,an)&&k(t.TEXTURE_2D)}n.unbindTexture()}else{let Je=t.TEXTURE_2D;if((Pe.isWebGL3DRenderTarget||Pe.isWebGLArrayRenderTarget)&&(a?Je=Pe.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Je,wt.__webglTexture),Ue(Je,_e,an),a&&_e.mipmaps&&_e.mipmaps.length>0)for(let Yt=0;Yt<_e.mipmaps.length;Yt++)Lt(Mt.__webglFramebuffer[Yt],Pe,_e,t.COLOR_ATTACHMENT0,Je,Yt);else Lt(Mt.__webglFramebuffer,Pe,_e,t.COLOR_ATTACHMENT0,Je,0);C(_e,an)&&k(Je),n.unbindTexture()}Pe.depthBuffer&&nt(Pe)}function rt(Pe){const _e=M(Pe)||a,Mt=Pe.textures;for(let wt=0,Wt=Mt.length;wt<Wt;wt++){const Bt=Mt[wt];if(C(Bt,_e)){const Mn=Pe.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,an=r.get(Bt).__webglTexture;n.bindTexture(Mn,an),k(Mn),n.unbindTexture()}}}function vt(Pe){if(a&&Pe.samples>0&&We(Pe)===!1){const _e=Pe.textures,Mt=Pe.width,wt=Pe.height;let Wt=t.COLOR_BUFFER_BIT;const Bt=[],Mn=Pe.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,an=r.get(Pe),Je=_e.length>1;if(Je)for(let Yt=0;Yt<_e.length;Yt++)n.bindFramebuffer(t.FRAMEBUFFER,an.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Yt,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,an.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Yt,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,an.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,an.__webglFramebuffer);for(let Yt=0;Yt<_e.length;Yt++){Bt.push(t.COLOR_ATTACHMENT0+Yt),Pe.depthBuffer&&Bt.push(Mn);const xn=an.__ignoreDepthValues!==void 0?an.__ignoreDepthValues:!1;if(xn===!1&&(Pe.depthBuffer&&(Wt|=t.DEPTH_BUFFER_BIT),Pe.stencilBuffer&&(Wt|=t.STENCIL_BUFFER_BIT)),Je&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,an.__webglColorRenderbuffer[Yt]),xn===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[Mn]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Mn])),Je){const en=r.get(_e[Yt]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,en,0)}t.blitFramebuffer(0,0,Mt,wt,0,0,Mt,wt,Wt,t.NEAREST),d&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Bt)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Je)for(let Yt=0;Yt<_e.length;Yt++){n.bindFramebuffer(t.FRAMEBUFFER,an.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Yt,t.RENDERBUFFER,an.__webglColorRenderbuffer[Yt]);const xn=r.get(_e[Yt]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,an.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Yt,t.TEXTURE_2D,xn,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,an.__webglMultisampledFramebuffer)}}function Tt(Pe){return Math.min(i.maxSamples,Pe.samples)}function We(Pe){const _e=r.get(Pe);return a&&Pe.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&_e.__useRenderToTexture!==!1}function Vt(Pe){const _e=s.render.frame;p.get(Pe)!==_e&&(p.set(Pe,_e),Pe.update())}function sn(Pe,_e){const Mt=Pe.colorSpace,wt=Pe.format,Wt=Pe.type;return Pe.isCompressedTexture===!0||Pe.isVideoTexture===!0||Pe.format===QI||Mt!==Im&&Mt!==Fp&&(Ni.getTransfer(Mt)===so?a===!1?e.has("EXT_sRGB")===!0&&wt===Bl?(Pe.format=QI,Pe.minFilter=Lo,Pe.generateMipmaps=!1):_e=q6.sRGBToLinear(_e):(wt!==Bl||Wt!==Rf)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Mt)),_e}function Ut(Pe){return typeof HTMLImageElement<"u"&&Pe instanceof HTMLImageElement?(f.width=Pe.naturalWidth||Pe.width,f.height=Pe.naturalHeight||Pe.height):typeof VideoFrame<"u"&&Pe instanceof VideoFrame?(f.width=Pe.displayWidth,f.height=Pe.displayHeight):(f.width=Pe.width,f.height=Pe.height),f}this.allocateTextureUnit=he,this.resetTextureUnits=re,this.setTexture2D=be,this.setTexture2DArray=ie,this.setTexture3D=ve,this.setTextureCube=Ee,this.rebindTextures=ge,this.setupRenderTarget=tt,this.updateRenderTargetMipmap=rt,this.updateMultisampleRenderTarget=vt,this.setupDepthRenderbuffer=nt,this.setupFrameBufferTexture=Lt,this.useMultisampledRTT=We}function Zue(t,e,n){const r=n.isWebGL2;function i(o,s=Fp){let a;const l=Ni.getTransfer(s);if(o===Rf)return t.UNSIGNED_BYTE;if(o===z6)return t.UNSIGNED_SHORT_4_4_4_4;if(o===F6)return t.UNSIGNED_SHORT_5_5_5_1;if(o===mue)return t.BYTE;if(o===gue)return t.SHORT;if(o===NO)return t.UNSIGNED_SHORT;if(o===N6)return t.INT;if(o===Yp)return t.UNSIGNED_INT;if(o===iu)return t.FLOAT;if(o===Kb)return r?t.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(o===yue)return t.ALPHA;if(o===Bl)return t.RGBA;if(o===vue)return t.LUMINANCE;if(o===_ue)return t.LUMINANCE_ALPHA;if(o===ay)return t.DEPTH_COMPONENT;if(o===I0)return t.DEPTH_STENCIL;if(o===QI)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(o===B6)return t.RED;if(o===$6)return t.RED_INTEGER;if(o===xue)return t.RG;if(o===j6)return t.RG_INTEGER;if(o===U6)return t.RGBA_INTEGER;if(o===VA||o===WA||o===HA||o===GA)if(l===so)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(o===VA)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===WA)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===HA)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===GA)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(o===VA)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===WA)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===HA)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===GA)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===c4||o===u4||o===d4||o===h4)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(o===c4)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===u4)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===d4)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===h4)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===V6)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===f4||o===p4)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(o===f4)return l===so?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(o===p4)return l===so?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===m4||o===g4||o===y4||o===v4||o===_4||o===x4||o===b4||o===w4||o===S4||o===M4||o===E4||o===T4||o===C4||o===A4)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(o===m4)return l===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===g4)return l===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===y4)return l===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===v4)return l===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===_4)return l===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===x4)return l===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===b4)return l===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===w4)return l===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===S4)return l===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===M4)return l===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===E4)return l===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===T4)return l===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===C4)return l===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===A4)return l===so?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===qA||o===P4||o===I4)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(o===qA)return l===so?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(o===P4)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(o===I4)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(o===bue||o===k4||o===R4||o===O4)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(o===qA)return a.COMPRESSED_RED_RGTC1_EXT;if(o===k4)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===R4)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===O4)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===sy?r?t.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[o]!==void 0?t[o]:null}return{convert:i}}class Jue extends Xo{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class zx extends vi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Zgt={type:"move"};class wN{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new zx,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new zx,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Oe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Oe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new zx,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Oe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Oe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,o=null,s=null;const a=this._targetRay,l=this._grip,d=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(d&&e.hand){s=!0;for(const b of e.hand.values()){const S=n.getJointPose(b,r),M=this._getHandJoint(d,b);S!==null&&(M.matrix.fromArray(S.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,M.jointRadius=S.radius),M.visible=S!==null}const f=d.joints["index-finger-tip"],p=d.joints["thumb-tip"],g=f.position.distanceTo(p.position),v=.02,x=.005;d.inputState.pinching&&g>v+x?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&g<=v-x&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=n.getPose(e.gripSpace,r),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Zgt)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=o!==null),d!==null&&(d.visible=s!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new zx;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}const Jgt=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Qgt=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class eyt{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new Fo,o=e.properties.get(i);o.__webglTexture=n.texture,(n.depthNear!=r.depthNear||n.depthFar!=r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}render(e,n){if(this.texture!==null){if(this.mesh===null){const r=n.cameras[0].viewport,i=new kh({extensions:{fragDepth:!0},vertexShader:Jgt,fragmentShader:Qgt,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new Cs(new $1(20,20),i)}e.render(this.mesh,n)}}reset(){this.texture=null,this.mesh=null}}class tyt extends Dh{constructor(e,n){super();const r=this;let i=null,o=1,s=null,a="local-floor",l=1,d=null,f=null,p=null,g=null,v=null,x=null;const b=new eyt,S=n.getContextAttributes();let M=null,T=null;const C=[],k=[],O=new $t;let D=null;const B=new Xo;B.layers.enable(1),B.viewport=new zi;const U=new Xo;U.layers.enable(2),U.viewport=new zi;const J=[B,U],V=new Jue;V.layers.enable(1),V.layers.enable(2);let X=null,oe=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ue){let st=C[Ue];return st===void 0&&(st=new wN,C[Ue]=st),st.getTargetRaySpace()},this.getControllerGrip=function(Ue){let st=C[Ue];return st===void 0&&(st=new wN,C[Ue]=st),st.getGripSpace()},this.getHand=function(Ue){let st=C[Ue];return st===void 0&&(st=new wN,C[Ue]=st),st.getHandSpace()};function pe(Ue){const st=k.indexOf(Ue.inputSource);if(st===-1)return;const lt=C[st];lt!==void 0&&(lt.update(Ue.inputSource,Ue.frame,d||s),lt.dispatchEvent({type:Ue.type,data:Ue.inputSource}))}function re(){i.removeEventListener("select",pe),i.removeEventListener("selectstart",pe),i.removeEventListener("selectend",pe),i.removeEventListener("squeeze",pe),i.removeEventListener("squeezestart",pe),i.removeEventListener("squeezeend",pe),i.removeEventListener("end",re),i.removeEventListener("inputsourceschange",he);for(let Ue=0;Ue<C.length;Ue++){const st=k[Ue];st!==null&&(k[Ue]=null,C[Ue].disconnect(st))}X=null,oe=null,b.reset(),e.setRenderTarget(M),v=null,g=null,p=null,i=null,T=null,dt.stop(),r.isPresenting=!1,e.setPixelRatio(D),e.setSize(O.width,O.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Ue){o=Ue,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ue){a=Ue,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||s},this.setReferenceSpace=function(Ue){d=Ue},this.getBaseLayer=function(){return g!==null?g:v},this.getBinding=function(){return p},this.getFrame=function(){return x},this.getSession=function(){return i},this.setSession=async function(Ue){if(i=Ue,i!==null){if(M=e.getRenderTarget(),i.addEventListener("select",pe),i.addEventListener("selectstart",pe),i.addEventListener("selectend",pe),i.addEventListener("squeeze",pe),i.addEventListener("squeezestart",pe),i.addEventListener("squeezeend",pe),i.addEventListener("end",re),i.addEventListener("inputsourceschange",he),S.xrCompatible!==!0&&await n.makeXRCompatible(),D=e.getPixelRatio(),e.getSize(O),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const st={antialias:i.renderState.layers===void 0?S.antialias:!0,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:o};v=new XRWebGLLayer(i,n,st),i.updateRenderState({baseLayer:v}),e.setPixelRatio(1),e.setSize(v.framebufferWidth,v.framebufferHeight,!1),T=new Ih(v.framebufferWidth,v.framebufferHeight,{format:Bl,type:Rf,colorSpace:e.outputColorSpace,stencilBuffer:S.stencil})}else{let st=null,lt=null,Rt=null;S.depth&&(Rt=S.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,st=S.stencil?I0:ay,lt=S.stencil?sy:Yp);const Lt={colorFormat:n.RGBA8,depthFormat:Rt,scaleFactor:o};p=new XRWebGLBinding(i,n),g=p.createProjectionLayer(Lt),i.updateRenderState({layers:[g]}),e.setPixelRatio(1),e.setSize(g.textureWidth,g.textureHeight,!1),T=new Ih(g.textureWidth,g.textureHeight,{format:Bl,type:Rf,depthTexture:new J6(g.textureWidth,g.textureHeight,lt,void 0,void 0,void 0,void 0,void 0,void 0,st),stencilBuffer:S.stencil,colorSpace:e.outputColorSpace,samples:S.antialias?4:0});const Fe=e.properties.get(T);Fe.__ignoreDepthValues=g.ignoreDepthValues}T.isXRRenderTarget=!0,this.setFoveation(l),d=null,s=await i.requestReferenceSpace(a),dt.setContext(i),dt.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function he(Ue){for(let st=0;st<Ue.removed.length;st++){const lt=Ue.removed[st],Rt=k.indexOf(lt);Rt>=0&&(k[Rt]=null,C[Rt].disconnect(lt))}for(let st=0;st<Ue.added.length;st++){const lt=Ue.added[st];let Rt=k.indexOf(lt);if(Rt===-1){for(let Fe=0;Fe<C.length;Fe++)if(Fe>=k.length){k.push(lt),Rt=Fe;break}else if(k[Fe]===null){k[Fe]=lt,Rt=Fe;break}if(Rt===-1)break}const Lt=C[Rt];Lt&&Lt.connect(lt)}}const ue=new Oe,be=new Oe;function ie(Ue,st,lt){ue.setFromMatrixPosition(st.matrixWorld),be.setFromMatrixPosition(lt.matrixWorld);const Rt=ue.distanceTo(be),Lt=st.projectionMatrix.elements,Fe=lt.projectionMatrix.elements,at=Lt[14]/(Lt[10]-1),nt=Lt[14]/(Lt[10]+1),ge=(Lt[9]+1)/Lt[5],tt=(Lt[9]-1)/Lt[5],rt=(Lt[8]-1)/Lt[0],vt=(Fe[8]+1)/Fe[0],Tt=at*rt,We=at*vt,Vt=Rt/(-rt+vt),sn=Vt*-rt;st.matrixWorld.decompose(Ue.position,Ue.quaternion,Ue.scale),Ue.translateX(sn),Ue.translateZ(Vt),Ue.matrixWorld.compose(Ue.position,Ue.quaternion,Ue.scale),Ue.matrixWorldInverse.copy(Ue.matrixWorld).invert();const Ut=at+Vt,Pe=nt+Vt,_e=Tt-sn,Mt=We+(Rt-sn),wt=ge*nt/Pe*Ut,Wt=tt*nt/Pe*Ut;Ue.projectionMatrix.makePerspective(_e,Mt,wt,Wt,Ut,Pe),Ue.projectionMatrixInverse.copy(Ue.projectionMatrix).invert()}function ve(Ue,st){st===null?Ue.matrixWorld.copy(Ue.matrix):Ue.matrixWorld.multiplyMatrices(st.matrixWorld,Ue.matrix),Ue.matrixWorldInverse.copy(Ue.matrixWorld).invert()}this.updateCamera=function(Ue){if(i===null)return;b.texture!==null&&(Ue.near=b.depthNear,Ue.far=b.depthFar),V.near=U.near=B.near=Ue.near,V.far=U.far=B.far=Ue.far,(X!==V.near||oe!==V.far)&&(i.updateRenderState({depthNear:V.near,depthFar:V.far}),X=V.near,oe=V.far,B.near=X,B.far=oe,U.near=X,U.far=oe,B.updateProjectionMatrix(),U.updateProjectionMatrix(),Ue.updateProjectionMatrix());const st=Ue.parent,lt=V.cameras;ve(V,st);for(let Rt=0;Rt<lt.length;Rt++)ve(lt[Rt],st);lt.length===2?ie(V,B,U):V.projectionMatrix.copy(B.projectionMatrix),Ee(Ue,V,st)};function Ee(Ue,st,lt){lt===null?Ue.matrix.copy(st.matrixWorld):(Ue.matrix.copy(lt.matrixWorld),Ue.matrix.invert(),Ue.matrix.multiply(st.matrixWorld)),Ue.matrix.decompose(Ue.position,Ue.quaternion,Ue.scale),Ue.updateMatrixWorld(!0),Ue.projectionMatrix.copy(st.projectionMatrix),Ue.projectionMatrixInverse.copy(st.projectionMatrixInverse),Ue.isPerspectiveCamera&&(Ue.fov=Zb*2*Math.atan(1/Ue.projectionMatrix.elements[5]),Ue.zoom=1)}this.getCamera=function(){return V},this.getFoveation=function(){if(!(g===null&&v===null))return l},this.setFoveation=function(Ue){l=Ue,g!==null&&(g.fixedFoveation=Ue),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=Ue)},this.hasDepthSensing=function(){return b.texture!==null};let Ne=null;function Ge(Ue,st){if(f=st.getViewerPose(d||s),x=st,f!==null){const lt=f.views;v!==null&&(e.setRenderTargetFramebuffer(T,v.framebuffer),e.setRenderTarget(T));let Rt=!1;lt.length!==V.cameras.length&&(V.cameras.length=0,Rt=!0);for(let Fe=0;Fe<lt.length;Fe++){const at=lt[Fe];let nt=null;if(v!==null)nt=v.getViewport(at);else{const tt=p.getViewSubImage(g,at);nt=tt.viewport,Fe===0&&(e.setRenderTargetTextures(T,tt.colorTexture,g.ignoreDepthValues?void 0:tt.depthStencilTexture),e.setRenderTarget(T))}let ge=J[Fe];ge===void 0&&(ge=new Xo,ge.layers.enable(Fe),ge.viewport=new zi,J[Fe]=ge),ge.matrix.fromArray(at.transform.matrix),ge.matrix.decompose(ge.position,ge.quaternion,ge.scale),ge.projectionMatrix.fromArray(at.projectionMatrix),ge.projectionMatrixInverse.copy(ge.projectionMatrix).invert(),ge.viewport.set(nt.x,nt.y,nt.width,nt.height),Fe===0&&(V.matrix.copy(ge.matrix),V.matrix.decompose(V.position,V.quaternion,V.scale)),Rt===!0&&V.cameras.push(ge)}const Lt=i.enabledFeatures;if(Lt&&Lt.includes("depth-sensing")){const Fe=p.getDepthInformation(lt[0]);Fe&&Fe.isValid&&Fe.texture&&b.init(e,Fe,i.renderState)}}for(let lt=0;lt<C.length;lt++){const Rt=k[lt],Lt=C[lt];Rt!==null&&Lt!==void 0&&Lt.update(Rt,st,d||s)}b.render(e,V),Ne&&Ne(Ue,st),st.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:st}),x=null}const dt=new Hue;dt.setAnimationLoop(Ge),this.setAnimationLoop=function(Ue){Ne=Ue},this.dispose=function(){}}}const pv=new _u,nyt=new mr;function ryt(t,e){function n(S,M){S.matrixAutoUpdate===!0&&S.updateMatrix(),M.value.copy(S.matrix)}function r(S,M){M.color.getRGB(S.fogColor.value,jue(t)),M.isFog?(S.fogNear.value=M.near,S.fogFar.value=M.far):M.isFogExp2&&(S.fogDensity.value=M.density)}function i(S,M,T,C,k){M.isMeshBasicMaterial||M.isMeshLambertMaterial?o(S,M):M.isMeshToonMaterial?(o(S,M),p(S,M)):M.isMeshPhongMaterial?(o(S,M),f(S,M)):M.isMeshStandardMaterial?(o(S,M),g(S,M),M.isMeshPhysicalMaterial&&v(S,M,k)):M.isMeshMatcapMaterial?(o(S,M),x(S,M)):M.isMeshDepthMaterial?o(S,M):M.isMeshDistanceMaterial?(o(S,M),b(S,M)):M.isMeshNormalMaterial?o(S,M):M.isLineBasicMaterial?(s(S,M),M.isLineDashedMaterial&&a(S,M)):M.isPointsMaterial?l(S,M,T,C):M.isSpriteMaterial?d(S,M):M.isShadowMaterial?(S.color.value.copy(M.color),S.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function o(S,M){S.opacity.value=M.opacity,M.color&&S.diffuse.value.copy(M.color),M.emissive&&S.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(S.map.value=M.map,n(M.map,S.mapTransform)),M.alphaMap&&(S.alphaMap.value=M.alphaMap,n(M.alphaMap,S.alphaMapTransform)),M.bumpMap&&(S.bumpMap.value=M.bumpMap,n(M.bumpMap,S.bumpMapTransform),S.bumpScale.value=M.bumpScale,M.side===Wl&&(S.bumpScale.value*=-1)),M.normalMap&&(S.normalMap.value=M.normalMap,n(M.normalMap,S.normalMapTransform),S.normalScale.value.copy(M.normalScale),M.side===Wl&&S.normalScale.value.negate()),M.displacementMap&&(S.displacementMap.value=M.displacementMap,n(M.displacementMap,S.displacementMapTransform),S.displacementScale.value=M.displacementScale,S.displacementBias.value=M.displacementBias),M.emissiveMap&&(S.emissiveMap.value=M.emissiveMap,n(M.emissiveMap,S.emissiveMapTransform)),M.specularMap&&(S.specularMap.value=M.specularMap,n(M.specularMap,S.specularMapTransform)),M.alphaTest>0&&(S.alphaTest.value=M.alphaTest);const T=e.get(M),C=T.envMap,k=T.envMapRotation;if(C&&(S.envMap.value=C,pv.copy(k),pv.x*=-1,pv.y*=-1,pv.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(pv.y*=-1,pv.z*=-1),S.envMapRotation.value.setFromMatrix4(nyt.makeRotationFromEuler(pv)),S.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=M.reflectivity,S.ior.value=M.ior,S.refractionRatio.value=M.refractionRatio),M.lightMap){S.lightMap.value=M.lightMap;const O=t._useLegacyLights===!0?Math.PI:1;S.lightMapIntensity.value=M.lightMapIntensity*O,n(M.lightMap,S.lightMapTransform)}M.aoMap&&(S.aoMap.value=M.aoMap,S.aoMapIntensity.value=M.aoMapIntensity,n(M.aoMap,S.aoMapTransform))}function s(S,M){S.diffuse.value.copy(M.color),S.opacity.value=M.opacity,M.map&&(S.map.value=M.map,n(M.map,S.mapTransform))}function a(S,M){S.dashSize.value=M.dashSize,S.totalSize.value=M.dashSize+M.gapSize,S.scale.value=M.scale}function l(S,M,T,C){S.diffuse.value.copy(M.color),S.opacity.value=M.opacity,S.size.value=M.size*T,S.scale.value=C*.5,M.map&&(S.map.value=M.map,n(M.map,S.uvTransform)),M.alphaMap&&(S.alphaMap.value=M.alphaMap,n(M.alphaMap,S.alphaMapTransform)),M.alphaTest>0&&(S.alphaTest.value=M.alphaTest)}function d(S,M){S.diffuse.value.copy(M.color),S.opacity.value=M.opacity,S.rotation.value=M.rotation,M.map&&(S.map.value=M.map,n(M.map,S.mapTransform)),M.alphaMap&&(S.alphaMap.value=M.alphaMap,n(M.alphaMap,S.alphaMapTransform)),M.alphaTest>0&&(S.alphaTest.value=M.alphaTest)}function f(S,M){S.specular.value.copy(M.specular),S.shininess.value=Math.max(M.shininess,1e-4)}function p(S,M){M.gradientMap&&(S.gradientMap.value=M.gradientMap)}function g(S,M){S.metalness.value=M.metalness,M.metalnessMap&&(S.metalnessMap.value=M.metalnessMap,n(M.metalnessMap,S.metalnessMapTransform)),S.roughness.value=M.roughness,M.roughnessMap&&(S.roughnessMap.value=M.roughnessMap,n(M.roughnessMap,S.roughnessMapTransform)),e.get(M).envMap&&(S.envMapIntensity.value=M.envMapIntensity)}function v(S,M,T){S.ior.value=M.ior,M.sheen>0&&(S.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),S.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(S.sheenColorMap.value=M.sheenColorMap,n(M.sheenColorMap,S.sheenColorMapTransform)),M.sheenRoughnessMap&&(S.sheenRoughnessMap.value=M.sheenRoughnessMap,n(M.sheenRoughnessMap,S.sheenRoughnessMapTransform))),M.clearcoat>0&&(S.clearcoat.value=M.clearcoat,S.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(S.clearcoatMap.value=M.clearcoatMap,n(M.clearcoatMap,S.clearcoatMapTransform)),M.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap,n(M.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),M.clearcoatNormalMap&&(S.clearcoatNormalMap.value=M.clearcoatNormalMap,n(M.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),M.side===Wl&&S.clearcoatNormalScale.value.negate())),M.iridescence>0&&(S.iridescence.value=M.iridescence,S.iridescenceIOR.value=M.iridescenceIOR,S.iridescenceThicknessMinimum.value=M.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=M.iridescenceThicknessRange[1],M.iridescenceMap&&(S.iridescenceMap.value=M.iridescenceMap,n(M.iridescenceMap,S.iridescenceMapTransform)),M.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=M.iridescenceThicknessMap,n(M.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),M.transmission>0&&(S.transmission.value=M.transmission,S.transmissionSamplerMap.value=T.texture,S.transmissionSamplerSize.value.set(T.width,T.height),M.transmissionMap&&(S.transmissionMap.value=M.transmissionMap,n(M.transmissionMap,S.transmissionMapTransform)),S.thickness.value=M.thickness,M.thicknessMap&&(S.thicknessMap.value=M.thicknessMap,n(M.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=M.attenuationDistance,S.attenuationColor.value.copy(M.attenuationColor)),M.anisotropy>0&&(S.anisotropyVector.value.set(M.anisotropy*Math.cos(M.anisotropyRotation),M.anisotropy*Math.sin(M.anisotropyRotation)),M.anisotropyMap&&(S.anisotropyMap.value=M.anisotropyMap,n(M.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=M.specularIntensity,S.specularColor.value.copy(M.specularColor),M.specularColorMap&&(S.specularColorMap.value=M.specularColorMap,n(M.specularColorMap,S.specularColorMapTransform)),M.specularIntensityMap&&(S.specularIntensityMap.value=M.specularIntensityMap,n(M.specularIntensityMap,S.specularIntensityMapTransform))}function x(S,M){M.matcap&&(S.matcap.value=M.matcap)}function b(S,M){const T=e.get(M).light;S.referencePosition.value.setFromMatrixPosition(T.matrixWorld),S.nearDistance.value=T.shadow.camera.near,S.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function iyt(t,e,n,r){let i={},o={},s=[];const a=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(T,C){const k=C.program;r.uniformBlockBinding(T,k)}function d(T,C){let k=i[T.id];k===void 0&&(x(T),k=f(T),i[T.id]=k,T.addEventListener("dispose",S));const O=C.program;r.updateUBOMapping(T,O);const D=e.render.frame;o[T.id]!==D&&(g(T),o[T.id]=D)}function f(T){const C=p();T.__bindingPointIndex=C;const k=t.createBuffer(),O=T.__size,D=T.usage;return t.bindBuffer(t.UNIFORM_BUFFER,k),t.bufferData(t.UNIFORM_BUFFER,O,D),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,C,k),k}function p(){for(let T=0;T<a;T++)if(s.indexOf(T)===-1)return s.push(T),T;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(T){const C=i[T.id],k=T.uniforms,O=T.__cache;t.bindBuffer(t.UNIFORM_BUFFER,C);for(let D=0,B=k.length;D<B;D++){const U=Array.isArray(k[D])?k[D]:[k[D]];for(let J=0,V=U.length;J<V;J++){const X=U[J];if(v(X,D,J,O)===!0){const oe=X.__offset,pe=Array.isArray(X.value)?X.value:[X.value];let re=0;for(let he=0;he<pe.length;he++){const ue=pe[he],be=b(ue);typeof ue=="number"||typeof ue=="boolean"?(X.__data[0]=ue,t.bufferSubData(t.UNIFORM_BUFFER,oe+re,X.__data)):ue.isMatrix3?(X.__data[0]=ue.elements[0],X.__data[1]=ue.elements[1],X.__data[2]=ue.elements[2],X.__data[3]=0,X.__data[4]=ue.elements[3],X.__data[5]=ue.elements[4],X.__data[6]=ue.elements[5],X.__data[7]=0,X.__data[8]=ue.elements[6],X.__data[9]=ue.elements[7],X.__data[10]=ue.elements[8],X.__data[11]=0):(ue.toArray(X.__data,re),re+=be.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,oe,X.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function v(T,C,k,O){const D=T.value,B=C+"_"+k;if(O[B]===void 0)return typeof D=="number"||typeof D=="boolean"?O[B]=D:O[B]=D.clone(),!0;{const U=O[B];if(typeof D=="number"||typeof D=="boolean"){if(U!==D)return O[B]=D,!0}else if(U.equals(D)===!1)return U.copy(D),!0}return!1}function x(T){const C=T.uniforms;let k=0;const O=16;for(let B=0,U=C.length;B<U;B++){const J=Array.isArray(C[B])?C[B]:[C[B]];for(let V=0,X=J.length;V<X;V++){const oe=J[V],pe=Array.isArray(oe.value)?oe.value:[oe.value];for(let re=0,he=pe.length;re<he;re++){const ue=pe[re],be=b(ue),ie=k%O;ie!==0&&O-ie<be.boundary&&(k+=O-ie),oe.__data=new Float32Array(be.storage/Float32Array.BYTES_PER_ELEMENT),oe.__offset=k,k+=be.storage}}}const D=k%O;return D>0&&(k+=O-D),T.__size=k,T.__cache={},this}function b(T){const C={boundary:0,storage:0};return typeof T=="number"||typeof T=="boolean"?(C.boundary=4,C.storage=4):T.isVector2?(C.boundary=8,C.storage=8):T.isVector3||T.isColor?(C.boundary=16,C.storage=12):T.isVector4?(C.boundary=16,C.storage=16):T.isMatrix3?(C.boundary=48,C.storage=48):T.isMatrix4?(C.boundary=64,C.storage=64):T.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",T),C}function S(T){const C=T.target;C.removeEventListener("dispose",S);const k=s.indexOf(C.__bindingPointIndex);s.splice(k,1),t.deleteBuffer(i[C.id]),delete i[C.id],delete o[C.id]}function M(){for(const T in i)t.deleteBuffer(i[T]);s=[],i={},o={}}return{bind:l,update:d,dispose:M}}class t8{constructor(e={}){const{canvas:n=zue(),context:r=null,depth:i=!0,stencil:o=!0,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:d=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:p=!1}=e;this.isWebGLRenderer=!0;let g;r!==null?g=r.getContextAttributes().alpha:g=s;const v=new Uint32Array(4),x=new Int32Array(4);let b=null,S=null;const M=[],T=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=td,this._useLegacyLights=!1,this.toneMapping=kf,this.toneMappingExposure=1;const C=this;let k=!1,O=0,D=0,B=null,U=-1,J=null;const V=new zi,X=new zi;let oe=null;const pe=new Dn(0);let re=0,he=n.width,ue=n.height,be=1,ie=null,ve=null;const Ee=new zi(0,0,he,ue),Ne=new zi(0,0,he,ue);let Ge=!1;const dt=new BE;let Ue=!1,st=!1,lt=null;const Rt=new mr,Lt=new $t,Fe=new Oe,at={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function nt(){return B===null?be:1}let ge=r;function tt(Te,pt){for(let At=0;At<Te.length;At++){const mt=Te[At],xt=n.getContext(mt,pt);if(xt!==null)return xt}return null}try{const Te={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:d,powerPreference:f,failIfMajorPerformanceCaveat:p};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${OO}`),n.addEventListener("webglcontextlost",tn,!1),n.addEventListener("webglcontextrestored",Xe,!1),n.addEventListener("webglcontextcreationerror",xe,!1),ge===null){const pt=["webgl2","webgl","experimental-webgl"];if(C.isWebGL1Renderer===!0&&pt.shift(),ge=tt(pt,Te),ge===null)throw tt(pt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&ge instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),ge.getShaderPrecisionFormat===void 0&&(ge.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Te){throw console.error("THREE.WebGLRenderer: "+Te.message),Te}let rt,vt,Tt,We,Vt,sn,Ut,Pe,_e,Mt,wt,Wt,Bt,Mn,an,Je,Yt,xn,en,un,St,gt,Ae,ft;function Ie(){rt=new pmt(ge),vt=new lmt(ge,rt,e),rt.init(vt),gt=new Zue(ge,rt,vt),Tt=new Xgt(ge,rt,vt),We=new ymt(ge),Vt=new zgt,sn=new Kgt(ge,rt,Tt,Vt,vt,gt,We),Ut=new umt(C),Pe=new fmt(C),_e=new Sht(ge,vt),Ae=new smt(ge,rt,_e,vt),Mt=new mmt(ge,_e,We,Ae),wt=new bmt(ge,Mt,_e,We),en=new xmt(ge,vt,sn),Je=new cmt(Vt),Wt=new Ngt(C,Ut,Pe,rt,vt,Ae,Je),Bt=new ryt(C,Vt),Mn=new Bgt,an=new Hgt(rt,vt),xn=new omt(C,Ut,Pe,Tt,wt,g,l),Yt=new Ygt(C,wt,vt),ft=new iyt(ge,We,vt,Tt),un=new amt(ge,rt,We,vt),St=new gmt(ge,rt,We,vt),We.programs=Wt.programs,C.capabilities=vt,C.extensions=rt,C.properties=Vt,C.renderLists=Mn,C.shadowMap=Yt,C.state=Tt,C.info=We}Ie();const it=new tyt(C,ge);this.xr=it,this.getContext=function(){return ge},this.getContextAttributes=function(){return ge.getContextAttributes()},this.forceContextLoss=function(){const Te=rt.get("WEBGL_lose_context");Te&&Te.loseContext()},this.forceContextRestore=function(){const Te=rt.get("WEBGL_lose_context");Te&&Te.restoreContext()},this.getPixelRatio=function(){return be},this.setPixelRatio=function(Te){Te!==void 0&&(be=Te,this.setSize(he,ue,!1))},this.getSize=function(Te){return Te.set(he,ue)},this.setSize=function(Te,pt,At=!0){if(it.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}he=Te,ue=pt,n.width=Math.floor(Te*be),n.height=Math.floor(pt*be),At===!0&&(n.style.width=Te+"px",n.style.height=pt+"px"),this.setViewport(0,0,Te,pt)},this.getDrawingBufferSize=function(Te){return Te.set(he*be,ue*be).floor()},this.setDrawingBufferSize=function(Te,pt,At){he=Te,ue=pt,be=At,n.width=Math.floor(Te*At),n.height=Math.floor(pt*At),this.setViewport(0,0,Te,pt)},this.getCurrentViewport=function(Te){return Te.copy(V)},this.getViewport=function(Te){return Te.copy(Ee)},this.setViewport=function(Te,pt,At,mt){Te.isVector4?Ee.set(Te.x,Te.y,Te.z,Te.w):Ee.set(Te,pt,At,mt),Tt.viewport(V.copy(Ee).multiplyScalar(be).round())},this.getScissor=function(Te){return Te.copy(Ne)},this.setScissor=function(Te,pt,At,mt){Te.isVector4?Ne.set(Te.x,Te.y,Te.z,Te.w):Ne.set(Te,pt,At,mt),Tt.scissor(X.copy(Ne).multiplyScalar(be).round())},this.getScissorTest=function(){return Ge},this.setScissorTest=function(Te){Tt.setScissorTest(Ge=Te)},this.setOpaqueSort=function(Te){ie=Te},this.setTransparentSort=function(Te){ve=Te},this.getClearColor=function(Te){return Te.copy(xn.getClearColor())},this.setClearColor=function(){xn.setClearColor.apply(xn,arguments)},this.getClearAlpha=function(){return xn.getClearAlpha()},this.setClearAlpha=function(){xn.setClearAlpha.apply(xn,arguments)},this.clear=function(Te=!0,pt=!0,At=!0){let mt=0;if(Te){let xt=!1;if(B!==null){const gn=B.texture.format;xt=gn===U6||gn===j6||gn===$6}if(xt){const gn=B.texture.type,In=gn===Rf||gn===Yp||gn===NO||gn===sy||gn===z6||gn===F6,ir=xn.getClearColor(),lr=xn.getClearAlpha(),Tn=ir.r,cr=ir.g,hr=ir.b;In?(v[0]=Tn,v[1]=cr,v[2]=hr,v[3]=lr,ge.clearBufferuiv(ge.COLOR,0,v)):(x[0]=Tn,x[1]=cr,x[2]=hr,x[3]=lr,ge.clearBufferiv(ge.COLOR,0,x))}else mt|=ge.COLOR_BUFFER_BIT}pt&&(mt|=ge.DEPTH_BUFFER_BIT),At&&(mt|=ge.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ge.clear(mt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",tn,!1),n.removeEventListener("webglcontextrestored",Xe,!1),n.removeEventListener("webglcontextcreationerror",xe,!1),Mn.dispose(),an.dispose(),Vt.dispose(),Ut.dispose(),Pe.dispose(),wt.dispose(),Ae.dispose(),ft.dispose(),Wt.dispose(),it.dispose(),it.removeEventListener("sessionstart",et),it.removeEventListener("sessionend",je),lt&&(lt.dispose(),lt=null),ot.stop()};function tn(Te){Te.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),k=!0}function Xe(){console.log("THREE.WebGLRenderer: Context Restored."),k=!1;const Te=We.autoReset,pt=Yt.enabled,At=Yt.autoUpdate,mt=Yt.needsUpdate,xt=Yt.type;Ie(),We.autoReset=Te,Yt.enabled=pt,Yt.autoUpdate=At,Yt.needsUpdate=mt,Yt.type=xt}function xe(Te){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Te.statusMessage)}function ee(Te){const pt=Te.target;pt.removeEventListener("dispose",ee),se(pt)}function se(Te){me(Te),Vt.remove(Te)}function me(Te){const pt=Vt.get(Te).programs;pt!==void 0&&(pt.forEach(function(At){Wt.releaseProgram(At)}),Te.isShaderMaterial&&Wt.releaseShaderCache(Te))}this.renderBufferDirect=function(Te,pt,At,mt,xt,gn){pt===null&&(pt=at);const In=xt.isMesh&&xt.matrixWorld.determinant()<0,ir=Qr(Te,pt,At,mt,xt);Tt.setMaterial(mt,In);let lr=At.index,Tn=1;if(mt.wireframe===!0){if(lr=Mt.getWireframeAttribute(At),lr===void 0)return;Tn=2}const cr=At.drawRange,hr=At.attributes.position;let $r=cr.start*Tn,li=(cr.start+cr.count)*Tn;gn!==null&&($r=Math.max($r,gn.start*Tn),li=Math.min(li,(gn.start+gn.count)*Tn)),lr!==null?($r=Math.max($r,0),li=Math.min(li,lr.count)):hr!=null&&($r=Math.max($r,0),li=Math.min(li,hr.count));const Pi=li-$r;if(Pi<0||Pi===1/0)return;Ae.setup(xt,mt,ir,At,lr);let Vr,qn=un;if(lr!==null&&(Vr=_e.get(lr),qn=St,qn.setIndex(Vr)),xt.isMesh)mt.wireframe===!0?(Tt.setLineWidth(mt.wireframeLinewidth*nt()),qn.setMode(ge.LINES)):qn.setMode(ge.TRIANGLES);else if(xt.isLine){let Rn=mt.linewidth;Rn===void 0&&(Rn=1),Tt.setLineWidth(Rn*nt()),xt.isLineSegments?qn.setMode(ge.LINES):xt.isLineLoop?qn.setMode(ge.LINE_LOOP):qn.setMode(ge.LINE_STRIP)}else xt.isPoints?qn.setMode(ge.POINTS):xt.isSprite&&qn.setMode(ge.TRIANGLES);if(xt.isBatchedMesh)qn.renderMultiDraw(xt._multiDrawStarts,xt._multiDrawCounts,xt._multiDrawCount);else if(xt.isInstancedMesh)qn.renderInstances($r,Pi,xt.count);else if(At.isInstancedBufferGeometry){const Rn=At._maxInstanceCount!==void 0?At._maxInstanceCount:1/0,Io=Math.min(At.instanceCount,Rn);qn.renderInstances($r,Pi,Io)}else qn.render($r,Pi)};function Ce(Te,pt,At){Te.transparent===!0&&Te.side===bh&&Te.forceSinglePass===!1?(Te.side=Wl,Te.needsUpdate=!0,zn(Te,pt,At),Te.side=vm,Te.needsUpdate=!0,zn(Te,pt,At),Te.side=bh):zn(Te,pt,At)}this.compile=function(Te,pt,At=null){At===null&&(At=Te),S=an.get(At),S.init(),T.push(S),At.traverseVisible(function(xt){xt.isLight&&xt.layers.test(pt.layers)&&(S.pushLight(xt),xt.castShadow&&S.pushShadow(xt))}),Te!==At&&Te.traverseVisible(function(xt){xt.isLight&&xt.layers.test(pt.layers)&&(S.pushLight(xt),xt.castShadow&&S.pushShadow(xt))}),S.setupLights(C._useLegacyLights);const mt=new Set;return Te.traverse(function(xt){const gn=xt.material;if(gn)if(Array.isArray(gn))for(let In=0;In<gn.length;In++){const ir=gn[In];Ce(ir,At,xt),mt.add(ir)}else Ce(gn,At,xt),mt.add(gn)}),T.pop(),S=null,mt},this.compileAsync=function(Te,pt,At=null){const mt=this.compile(Te,pt,At);return new Promise(xt=>{function gn(){if(mt.forEach(function(In){Vt.get(In).currentProgram.isReady()&&mt.delete(In)}),mt.size===0){xt(Te);return}setTimeout(gn,10)}rt.get("KHR_parallel_shader_compile")!==null?gn():setTimeout(gn,10)})};let qe=null;function Ye(Te){qe&&qe(Te)}function et(){ot.stop()}function je(){ot.start()}const ot=new Hue;ot.setAnimationLoop(Ye),typeof self<"u"&&ot.setContext(self),this.setAnimationLoop=function(Te){qe=Te,it.setAnimationLoop(Te),Te===null?ot.stop():ot.start()},it.addEventListener("sessionstart",et),it.addEventListener("sessionend",je),this.render=function(Te,pt){if(pt!==void 0&&pt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(k===!0)return;Te.matrixWorldAutoUpdate===!0&&Te.updateMatrixWorld(),pt.parent===null&&pt.matrixWorldAutoUpdate===!0&&pt.updateMatrixWorld(),it.enabled===!0&&it.isPresenting===!0&&(it.cameraAutoUpdate===!0&&it.updateCamera(pt),pt=it.getCamera()),Te.isScene===!0&&Te.onBeforeRender(C,Te,pt,B),S=an.get(Te,T.length),S.init(),T.push(S),Rt.multiplyMatrices(pt.projectionMatrix,pt.matrixWorldInverse),dt.setFromProjectionMatrix(Rt),st=this.localClippingEnabled,Ue=Je.init(this.clippingPlanes,st),b=Mn.get(Te,M.length),b.init(),M.push(b),Dt(Te,pt,0,C.sortObjects),b.finish(),C.sortObjects===!0&&b.sort(ie,ve),this.info.render.frame++,Ue===!0&&Je.beginShadows();const At=S.state.shadowsArray;if(Yt.render(At,Te,pt),Ue===!0&&Je.endShadows(),this.info.autoReset===!0&&this.info.reset(),(it.enabled===!1||it.isPresenting===!1||it.hasDepthSensing()===!1)&&xn.render(b,Te),S.setupLights(C._useLegacyLights),pt.isArrayCamera){const mt=pt.cameras;for(let xt=0,gn=mt.length;xt<gn;xt++){const In=mt[xt];It(b,Te,In,In.viewport)}}else It(b,Te,pt);B!==null&&(sn.updateMultisampleRenderTarget(B),sn.updateRenderTargetMipmap(B)),Te.isScene===!0&&Te.onAfterRender(C,Te,pt),Ae.resetDefaultState(),U=-1,J=null,T.pop(),T.length>0?S=T[T.length-1]:S=null,M.pop(),M.length>0?b=M[M.length-1]:b=null};function Dt(Te,pt,At,mt){if(Te.visible===!1)return;if(Te.layers.test(pt.layers)){if(Te.isGroup)At=Te.renderOrder;else if(Te.isLOD)Te.autoUpdate===!0&&Te.update(pt);else if(Te.isLight)S.pushLight(Te),Te.castShadow&&S.pushShadow(Te);else if(Te.isSprite){if(!Te.frustumCulled||dt.intersectsSprite(Te)){mt&&Fe.setFromMatrixPosition(Te.matrixWorld).applyMatrix4(Rt);const In=wt.update(Te),ir=Te.material;ir.visible&&b.push(Te,In,ir,At,Fe.z,null)}}else if((Te.isMesh||Te.isLine||Te.isPoints)&&(!Te.frustumCulled||dt.intersectsObject(Te))){const In=wt.update(Te),ir=Te.material;if(mt&&(Te.boundingSphere!==void 0?(Te.boundingSphere===null&&Te.computeBoundingSphere(),Fe.copy(Te.boundingSphere.center)):(In.boundingSphere===null&&In.computeBoundingSphere(),Fe.copy(In.boundingSphere.center)),Fe.applyMatrix4(Te.matrixWorld).applyMatrix4(Rt)),Array.isArray(ir)){const lr=In.groups;for(let Tn=0,cr=lr.length;Tn<cr;Tn++){const hr=lr[Tn],$r=ir[hr.materialIndex];$r&&$r.visible&&b.push(Te,In,$r,At,Fe.z,hr)}}else ir.visible&&b.push(Te,In,ir,At,Fe.z,null)}}const gn=Te.children;for(let In=0,ir=gn.length;In<ir;In++)Dt(gn[In],pt,At,mt)}function It(Te,pt,At,mt){const xt=Te.opaque,gn=Te.transmissive,In=Te.transparent;S.setupLightsView(At),Ue===!0&&Je.setGlobalState(C.clippingPlanes,At),gn.length>0&&Nt(xt,gn,pt,At),mt&&Tt.viewport(V.copy(mt)),xt.length>0&&En(xt,pt,At),gn.length>0&&En(gn,pt,At),In.length>0&&En(In,pt,At),Tt.buffers.depth.setTest(!0),Tt.buffers.depth.setMask(!0),Tt.buffers.color.setMask(!0),Tt.setPolygonOffset(!1)}function Nt(Te,pt,At,mt){if((At.isScene===!0?At.overrideMaterial:null)!==null)return;const gn=vt.isWebGL2;lt===null&&(lt=new Ih(1,1,{generateMipmaps:!0,type:rt.has("EXT_color_buffer_half_float")?Kb:Rf,minFilter:bf,samples:gn?4:0})),C.getDrawingBufferSize(Lt),gn?lt.setSize(Lt.x,Lt.y):lt.setSize(ek(Lt.x),ek(Lt.y));const In=C.getRenderTarget();C.setRenderTarget(lt),C.getClearColor(pe),re=C.getClearAlpha(),re<1&&C.setClearColor(16777215,.5),C.clear();const ir=C.toneMapping;C.toneMapping=kf,En(Te,At,mt),sn.updateMultisampleRenderTarget(lt),sn.updateRenderTargetMipmap(lt);let lr=!1;for(let Tn=0,cr=pt.length;Tn<cr;Tn++){const hr=pt[Tn],$r=hr.object,li=hr.geometry,Pi=hr.material,Vr=hr.group;if(Pi.side===bh&&$r.layers.test(mt.layers)){const qn=Pi.side;Pi.side=Wl,Pi.needsUpdate=!0,Nn($r,At,mt,li,Pi,Vr),Pi.side=qn,Pi.needsUpdate=!0,lr=!0}}lr===!0&&(sn.updateMultisampleRenderTarget(lt),sn.updateRenderTargetMipmap(lt)),C.setRenderTarget(In),C.setClearColor(pe,re),C.toneMapping=ir}function En(Te,pt,At){const mt=pt.isScene===!0?pt.overrideMaterial:null;for(let xt=0,gn=Te.length;xt<gn;xt++){const In=Te[xt],ir=In.object,lr=In.geometry,Tn=mt===null?In.material:mt,cr=In.group;ir.layers.test(At.layers)&&Nn(ir,pt,At,lr,Tn,cr)}}function Nn(Te,pt,At,mt,xt,gn){Te.onBeforeRender(C,pt,At,mt,xt,gn),Te.modelViewMatrix.multiplyMatrices(At.matrixWorldInverse,Te.matrixWorld),Te.normalMatrix.getNormalMatrix(Te.modelViewMatrix),xt.onBeforeRender(C,pt,At,mt,Te,gn),xt.transparent===!0&&xt.side===bh&&xt.forceSinglePass===!1?(xt.side=Wl,xt.needsUpdate=!0,C.renderBufferDirect(At,pt,mt,xt,Te,gn),xt.side=vm,xt.needsUpdate=!0,C.renderBufferDirect(At,pt,mt,xt,Te,gn),xt.side=bh):C.renderBufferDirect(At,pt,mt,xt,Te,gn),Te.onAfterRender(C,pt,At,mt,xt,gn)}function zn(Te,pt,At){pt.isScene!==!0&&(pt=at);const mt=Vt.get(Te),xt=S.state.lights,gn=S.state.shadowsArray,In=xt.state.version,ir=Wt.getParameters(Te,xt.state,gn,pt,At),lr=Wt.getProgramCacheKey(ir);let Tn=mt.programs;mt.environment=Te.isMeshStandardMaterial?pt.environment:null,mt.fog=pt.fog,mt.envMap=(Te.isMeshStandardMaterial?Pe:Ut).get(Te.envMap||mt.environment),mt.envMapRotation=mt.environment!==null&&Te.envMap===null?pt.environmentRotation:Te.envMapRotation,Tn===void 0&&(Te.addEventListener("dispose",ee),Tn=new Map,mt.programs=Tn);let cr=Tn.get(lr);if(cr!==void 0){if(mt.currentProgram===cr&&mt.lightsStateVersion===In)return tr(Te,ir),cr}else ir.uniforms=Wt.getUniforms(Te),Te.onBuild(At,ir,C),Te.onBeforeCompile(ir,C),cr=Wt.acquireProgram(ir,lr),Tn.set(lr,cr),mt.uniforms=ir.uniforms;const hr=mt.uniforms;return(!Te.isShaderMaterial&&!Te.isRawShaderMaterial||Te.clipping===!0)&&(hr.clippingPlanes=Je.uniform),tr(Te,ir),mt.needsLights=Oi(Te),mt.lightsStateVersion=In,mt.needsLights&&(hr.ambientLightColor.value=xt.state.ambient,hr.lightProbe.value=xt.state.probe,hr.directionalLights.value=xt.state.directional,hr.directionalLightShadows.value=xt.state.directionalShadow,hr.spotLights.value=xt.state.spot,hr.spotLightShadows.value=xt.state.spotShadow,hr.rectAreaLights.value=xt.state.rectArea,hr.ltc_1.value=xt.state.rectAreaLTC1,hr.ltc_2.value=xt.state.rectAreaLTC2,hr.pointLights.value=xt.state.point,hr.pointLightShadows.value=xt.state.pointShadow,hr.hemisphereLights.value=xt.state.hemi,hr.directionalShadowMap.value=xt.state.directionalShadowMap,hr.directionalShadowMatrix.value=xt.state.directionalShadowMatrix,hr.spotShadowMap.value=xt.state.spotShadowMap,hr.spotLightMatrix.value=xt.state.spotLightMatrix,hr.spotLightMap.value=xt.state.spotLightMap,hr.pointShadowMap.value=xt.state.pointShadowMap,hr.pointShadowMatrix.value=xt.state.pointShadowMatrix),mt.currentProgram=cr,mt.uniformsList=null,cr}function yr(Te){if(Te.uniformsList===null){const pt=Te.currentProgram.getUniforms();Te.uniformsList=XA.seqWithValue(pt.seq,Te.uniforms)}return Te.uniformsList}function tr(Te,pt){const At=Vt.get(Te);At.outputColorSpace=pt.outputColorSpace,At.batching=pt.batching,At.instancing=pt.instancing,At.instancingColor=pt.instancingColor,At.instancingMorph=pt.instancingMorph,At.skinning=pt.skinning,At.morphTargets=pt.morphTargets,At.morphNormals=pt.morphNormals,At.morphColors=pt.morphColors,At.morphTargetsCount=pt.morphTargetsCount,At.numClippingPlanes=pt.numClippingPlanes,At.numIntersection=pt.numClipIntersection,At.vertexAlphas=pt.vertexAlphas,At.vertexTangents=pt.vertexTangents,At.toneMapping=pt.toneMapping}function Qr(Te,pt,At,mt,xt){pt.isScene!==!0&&(pt=at),sn.resetTextureUnits();const gn=pt.fog,In=mt.isMeshStandardMaterial?pt.environment:null,ir=B===null?C.outputColorSpace:B.isXRRenderTarget===!0?B.texture.colorSpace:Im,lr=(mt.isMeshStandardMaterial?Pe:Ut).get(mt.envMap||In),Tn=mt.vertexColors===!0&&!!At.attributes.color&&At.attributes.color.itemSize===4,cr=!!At.attributes.tangent&&(!!mt.normalMap||mt.anisotropy>0),hr=!!At.morphAttributes.position,$r=!!At.morphAttributes.normal,li=!!At.morphAttributes.color;let Pi=kf;mt.toneMapped&&(B===null||B.isXRRenderTarget===!0)&&(Pi=C.toneMapping);const Vr=At.morphAttributes.position||At.morphAttributes.normal||At.morphAttributes.color,qn=Vr!==void 0?Vr.length:0,Rn=Vt.get(mt),Io=S.state.lights;if(Ue===!0&&(st===!0||Te!==J)){const ko=Te===J&&mt.id===U;Je.setState(mt,Te,ko)}let Yn=!1;mt.version===Rn.__version?(Rn.needsLights&&Rn.lightsStateVersion!==Io.state.version||Rn.outputColorSpace!==ir||xt.isBatchedMesh&&Rn.batching===!1||!xt.isBatchedMesh&&Rn.batching===!0||xt.isInstancedMesh&&Rn.instancing===!1||!xt.isInstancedMesh&&Rn.instancing===!0||xt.isSkinnedMesh&&Rn.skinning===!1||!xt.isSkinnedMesh&&Rn.skinning===!0||xt.isInstancedMesh&&Rn.instancingColor===!0&&xt.instanceColor===null||xt.isInstancedMesh&&Rn.instancingColor===!1&&xt.instanceColor!==null||xt.isInstancedMesh&&Rn.instancingMorph===!0&&xt.morphTexture===null||xt.isInstancedMesh&&Rn.instancingMorph===!1&&xt.morphTexture!==null||Rn.envMap!==lr||mt.fog===!0&&Rn.fog!==gn||Rn.numClippingPlanes!==void 0&&(Rn.numClippingPlanes!==Je.numPlanes||Rn.numIntersection!==Je.numIntersection)||Rn.vertexAlphas!==Tn||Rn.vertexTangents!==cr||Rn.morphTargets!==hr||Rn.morphNormals!==$r||Rn.morphColors!==li||Rn.toneMapping!==Pi||vt.isWebGL2===!0&&Rn.morphTargetsCount!==qn)&&(Yn=!0):(Yn=!0,Rn.__version=mt.version);let Ii=Rn.currentProgram;Yn===!0&&(Ii=zn(mt,pt,xt));let gs=!1,Wr=!1,Ui=!1;const ei=Ii.getUniforms(),pa=Rn.uniforms;if(Tt.useProgram(Ii.program)&&(gs=!0,Wr=!0,Ui=!0),mt.id!==U&&(U=mt.id,Wr=!0),gs||J!==Te){ei.setValue(ge,"projectionMatrix",Te.projectionMatrix),ei.setValue(ge,"viewMatrix",Te.matrixWorldInverse);const ko=ei.map.cameraPosition;ko!==void 0&&ko.setValue(ge,Fe.setFromMatrixPosition(Te.matrixWorld)),vt.logarithmicDepthBuffer&&ei.setValue(ge,"logDepthBufFC",2/(Math.log(Te.far+1)/Math.LN2)),(mt.isMeshPhongMaterial||mt.isMeshToonMaterial||mt.isMeshLambertMaterial||mt.isMeshBasicMaterial||mt.isMeshStandardMaterial||mt.isShaderMaterial)&&ei.setValue(ge,"isOrthographic",Te.isOrthographicCamera===!0),J!==Te&&(J=Te,Wr=!0,Ui=!0)}if(xt.isSkinnedMesh){ei.setOptional(ge,xt,"bindMatrix"),ei.setOptional(ge,xt,"bindMatrixInverse");const ko=xt.skeleton;ko&&(vt.floatVertexTextures?(ko.boneTexture===null&&ko.computeBoneTexture(),ei.setValue(ge,"boneTexture",ko.boneTexture,sn)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}xt.isBatchedMesh&&(ei.setOptional(ge,xt,"batchingTexture"),ei.setValue(ge,"batchingTexture",xt._matricesTexture,sn));const Is=At.morphAttributes;if((Is.position!==void 0||Is.normal!==void 0||Is.color!==void 0&&vt.isWebGL2===!0)&&en.update(xt,At,Ii),(Wr||Rn.receiveShadow!==xt.receiveShadow)&&(Rn.receiveShadow=xt.receiveShadow,ei.setValue(ge,"receiveShadow",xt.receiveShadow)),mt.isMeshGouraudMaterial&&mt.envMap!==null&&(pa.envMap.value=lr,pa.flipEnvMap.value=lr.isCubeTexture&&lr.isRenderTargetTexture===!1?-1:1),Wr&&(ei.setValue(ge,"toneMappingExposure",C.toneMappingExposure),Rn.needsLights&&Ur(pa,Ui),gn&&mt.fog===!0&&Bt.refreshFogUniforms(pa,gn),Bt.refreshMaterialUniforms(pa,mt,be,ue,lt),XA.upload(ge,yr(Rn),pa,sn)),mt.isShaderMaterial&&mt.uniformsNeedUpdate===!0&&(XA.upload(ge,yr(Rn),pa,sn),mt.uniformsNeedUpdate=!1),mt.isSpriteMaterial&&ei.setValue(ge,"center",xt.center),ei.setValue(ge,"modelViewMatrix",xt.modelViewMatrix),ei.setValue(ge,"normalMatrix",xt.normalMatrix),ei.setValue(ge,"modelMatrix",xt.matrixWorld),mt.isShaderMaterial||mt.isRawShaderMaterial){const ko=mt.uniformsGroups;for(let bl=0,vr=ko.length;bl<vr;bl++)if(vt.isWebGL2){const Pd=ko[bl];ft.update(Pd,Ii),ft.bind(Pd,Ii)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ii}function Ur(Te,pt){Te.ambientLightColor.needsUpdate=pt,Te.lightProbe.needsUpdate=pt,Te.directionalLights.needsUpdate=pt,Te.directionalLightShadows.needsUpdate=pt,Te.pointLights.needsUpdate=pt,Te.pointLightShadows.needsUpdate=pt,Te.spotLights.needsUpdate=pt,Te.spotLightShadows.needsUpdate=pt,Te.rectAreaLights.needsUpdate=pt,Te.hemisphereLights.needsUpdate=pt}function Oi(Te){return Te.isMeshLambertMaterial||Te.isMeshToonMaterial||Te.isMeshPhongMaterial||Te.isMeshStandardMaterial||Te.isShadowMaterial||Te.isShaderMaterial&&Te.lights===!0}this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function(Te,pt,At){Vt.get(Te.texture).__webglTexture=pt,Vt.get(Te.depthTexture).__webglTexture=At;const mt=Vt.get(Te);mt.__hasExternalTextures=!0,mt.__autoAllocateDepthBuffer=At===void 0,mt.__autoAllocateDepthBuffer||rt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),mt.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Te,pt){const At=Vt.get(Te);At.__webglFramebuffer=pt,At.__useDefaultFramebuffer=pt===void 0},this.setRenderTarget=function(Te,pt=0,At=0){B=Te,O=pt,D=At;let mt=!0,xt=null,gn=!1,In=!1;if(Te){const lr=Vt.get(Te);lr.__useDefaultFramebuffer!==void 0?(Tt.bindFramebuffer(ge.FRAMEBUFFER,null),mt=!1):lr.__webglFramebuffer===void 0?sn.setupRenderTarget(Te):lr.__hasExternalTextures&&sn.rebindTextures(Te,Vt.get(Te.texture).__webglTexture,Vt.get(Te.depthTexture).__webglTexture);const Tn=Te.texture;(Tn.isData3DTexture||Tn.isDataArrayTexture||Tn.isCompressedArrayTexture)&&(In=!0);const cr=Vt.get(Te).__webglFramebuffer;Te.isWebGLCubeRenderTarget?(Array.isArray(cr[pt])?xt=cr[pt][At]:xt=cr[pt],gn=!0):vt.isWebGL2&&Te.samples>0&&sn.useMultisampledRTT(Te)===!1?xt=Vt.get(Te).__webglMultisampledFramebuffer:Array.isArray(cr)?xt=cr[At]:xt=cr,V.copy(Te.viewport),X.copy(Te.scissor),oe=Te.scissorTest}else V.copy(Ee).multiplyScalar(be).floor(),X.copy(Ne).multiplyScalar(be).floor(),oe=Ge;if(Tt.bindFramebuffer(ge.FRAMEBUFFER,xt)&&vt.drawBuffers&&mt&&Tt.drawBuffers(Te,xt),Tt.viewport(V),Tt.scissor(X),Tt.setScissorTest(oe),gn){const lr=Vt.get(Te.texture);ge.framebufferTexture2D(ge.FRAMEBUFFER,ge.COLOR_ATTACHMENT0,ge.TEXTURE_CUBE_MAP_POSITIVE_X+pt,lr.__webglTexture,At)}else if(In){const lr=Vt.get(Te.texture),Tn=pt||0;ge.framebufferTextureLayer(ge.FRAMEBUFFER,ge.COLOR_ATTACHMENT0,lr.__webglTexture,At||0,Tn)}U=-1},this.readRenderTargetPixels=function(Te,pt,At,mt,xt,gn,In){if(!(Te&&Te.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ir=Vt.get(Te).__webglFramebuffer;if(Te.isWebGLCubeRenderTarget&&In!==void 0&&(ir=ir[In]),ir){Tt.bindFramebuffer(ge.FRAMEBUFFER,ir);try{const lr=Te.texture,Tn=lr.format,cr=lr.type;if(Tn!==Bl&&gt.convert(Tn)!==ge.getParameter(ge.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const hr=cr===Kb&&(rt.has("EXT_color_buffer_half_float")||vt.isWebGL2&&rt.has("EXT_color_buffer_float"));if(cr!==Rf&&gt.convert(cr)!==ge.getParameter(ge.IMPLEMENTATION_COLOR_READ_TYPE)&&!(cr===iu&&(vt.isWebGL2||rt.has("OES_texture_float")||rt.has("WEBGL_color_buffer_float")))&&!hr){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}pt>=0&&pt<=Te.width-mt&&At>=0&&At<=Te.height-xt&&ge.readPixels(pt,At,mt,xt,gt.convert(Tn),gt.convert(cr),gn)}finally{const lr=B!==null?Vt.get(B).__webglFramebuffer:null;Tt.bindFramebuffer(ge.FRAMEBUFFER,lr)}}},this.copyFramebufferToTexture=function(Te,pt,At=0){const mt=Math.pow(2,-At),xt=Math.floor(pt.image.width*mt),gn=Math.floor(pt.image.height*mt);sn.setTexture2D(pt,0),ge.copyTexSubImage2D(ge.TEXTURE_2D,At,0,0,Te.x,Te.y,xt,gn),Tt.unbindTexture()},this.copyTextureToTexture=function(Te,pt,At,mt=0){const xt=pt.image.width,gn=pt.image.height,In=gt.convert(At.format),ir=gt.convert(At.type);sn.setTexture2D(At,0),ge.pixelStorei(ge.UNPACK_FLIP_Y_WEBGL,At.flipY),ge.pixelStorei(ge.UNPACK_PREMULTIPLY_ALPHA_WEBGL,At.premultiplyAlpha),ge.pixelStorei(ge.UNPACK_ALIGNMENT,At.unpackAlignment),pt.isDataTexture?ge.texSubImage2D(ge.TEXTURE_2D,mt,Te.x,Te.y,xt,gn,In,ir,pt.image.data):pt.isCompressedTexture?ge.compressedTexSubImage2D(ge.TEXTURE_2D,mt,Te.x,Te.y,pt.mipmaps[0].width,pt.mipmaps[0].height,In,pt.mipmaps[0].data):ge.texSubImage2D(ge.TEXTURE_2D,mt,Te.x,Te.y,In,ir,pt.image),mt===0&&At.generateMipmaps&&ge.generateMipmap(ge.TEXTURE_2D),Tt.unbindTexture()},this.copyTextureToTexture3D=function(Te,pt,At,mt,xt=0){if(C.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const gn=Math.round(Te.max.x-Te.min.x),In=Math.round(Te.max.y-Te.min.y),ir=Te.max.z-Te.min.z+1,lr=gt.convert(mt.format),Tn=gt.convert(mt.type);let cr;if(mt.isData3DTexture)sn.setTexture3D(mt,0),cr=ge.TEXTURE_3D;else if(mt.isDataArrayTexture||mt.isCompressedArrayTexture)sn.setTexture2DArray(mt,0),cr=ge.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ge.pixelStorei(ge.UNPACK_FLIP_Y_WEBGL,mt.flipY),ge.pixelStorei(ge.UNPACK_PREMULTIPLY_ALPHA_WEBGL,mt.premultiplyAlpha),ge.pixelStorei(ge.UNPACK_ALIGNMENT,mt.unpackAlignment);const hr=ge.getParameter(ge.UNPACK_ROW_LENGTH),$r=ge.getParameter(ge.UNPACK_IMAGE_HEIGHT),li=ge.getParameter(ge.UNPACK_SKIP_PIXELS),Pi=ge.getParameter(ge.UNPACK_SKIP_ROWS),Vr=ge.getParameter(ge.UNPACK_SKIP_IMAGES),qn=At.isCompressedTexture?At.mipmaps[xt]:At.image;ge.pixelStorei(ge.UNPACK_ROW_LENGTH,qn.width),ge.pixelStorei(ge.UNPACK_IMAGE_HEIGHT,qn.height),ge.pixelStorei(ge.UNPACK_SKIP_PIXELS,Te.min.x),ge.pixelStorei(ge.UNPACK_SKIP_ROWS,Te.min.y),ge.pixelStorei(ge.UNPACK_SKIP_IMAGES,Te.min.z),At.isDataTexture||At.isData3DTexture?ge.texSubImage3D(cr,xt,pt.x,pt.y,pt.z,gn,In,ir,lr,Tn,qn.data):mt.isCompressedArrayTexture?ge.compressedTexSubImage3D(cr,xt,pt.x,pt.y,pt.z,gn,In,ir,lr,qn.data):ge.texSubImage3D(cr,xt,pt.x,pt.y,pt.z,gn,In,ir,lr,Tn,qn),ge.pixelStorei(ge.UNPACK_ROW_LENGTH,hr),ge.pixelStorei(ge.UNPACK_IMAGE_HEIGHT,$r),ge.pixelStorei(ge.UNPACK_SKIP_PIXELS,li),ge.pixelStorei(ge.UNPACK_SKIP_ROWS,Pi),ge.pixelStorei(ge.UNPACK_SKIP_IMAGES,Vr),xt===0&&mt.generateMipmaps&&ge.generateMipmap(cr),Tt.unbindTexture()},this.initTexture=function(Te){Te.isCubeTexture?sn.setTextureCube(Te,0):Te.isData3DTexture?sn.setTexture3D(Te,0):Te.isDataArrayTexture||Te.isCompressedArrayTexture?sn.setTexture2DArray(Te,0):sn.setTexture2D(Te,0),Tt.unbindTexture()},this.resetState=function(){O=0,D=0,B=null,Tt.reset(),Ae.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return wf}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===FO?"display-p3":"srgb",n.unpackColorSpace=Ni.workingColorSpace===NE?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class Que extends t8{}Que.prototype.isWebGL1Renderer=!0;class jO{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Dn(e),this.density=n}clone(){return new jO(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class UO{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new Dn(e),this.near=n,this.far=r}clone(){return new UO(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class tk extends vi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new _u,this.environmentRotation=new _u,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class VO{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=AM,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=du()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return Fue("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,o=this.stride;i<o;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=du()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=du()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ol=new Oe;class k0{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)Ol.fromBufferAttribute(this,n),Ol.applyMatrix4(e),this.setXYZ(n,Ol.x,Ol.y,Ol.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Ol.fromBufferAttribute(this,n),Ol.applyNormalMatrix(e),this.setXYZ(n,Ol.x,Ol.y,Ol.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Ol.fromBufferAttribute(this,n),Ol.transformDirection(e),this.setXYZ(n,Ol.x,Ol.y,Ol.z);return this}getComponent(e,n){let r=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(r=$l(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=kr(r,this.array)),this.data.array[e*this.data.stride+this.offset+n]=r,this}setX(e,n){return this.normalized&&(n=kr(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=kr(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=kr(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=kr(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=$l(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=$l(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=$l(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=$l(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=kr(n,this.array),r=kr(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=kr(n,this.array),r=kr(r,this.array),i=kr(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e=e*this.data.stride+this.offset,this.normalized&&(n=kr(n,this.array),r=kr(r,this.array),i=kr(i,this.array),o=kr(o,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[i+o])}return new Xi(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new k0(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)n.push(this.data.array[i+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class n8 extends $a{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Dn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Z_;const Zw=new Oe,J_=new Oe,Q_=new Oe,ex=new $t,Jw=new $t,ede=new mr,FC=new Oe,Qw=new Oe,BC=new Oe,HK=new $t,SN=new $t,GK=new $t;class tde extends vi{constructor(e=new n8){if(super(),this.isSprite=!0,this.type="Sprite",Z_===void 0){Z_=new Lr;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new VO(n,5);Z_.setIndex([0,1,2,0,2,3]),Z_.setAttribute("position",new k0(r,3,0,!1)),Z_.setAttribute("uv",new k0(r,2,3,!1))}this.geometry=Z_,this.material=e,this.center=new $t(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),J_.setFromMatrixScale(this.matrixWorld),ede.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Q_.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&J_.multiplyScalar(-Q_.z);const r=this.material.rotation;let i,o;r!==0&&(o=Math.cos(r),i=Math.sin(r));const s=this.center;$C(FC.set(-.5,-.5,0),Q_,s,J_,i,o),$C(Qw.set(.5,-.5,0),Q_,s,J_,i,o),$C(BC.set(.5,.5,0),Q_,s,J_,i,o),HK.set(0,0),SN.set(1,0),GK.set(1,1);let a=e.ray.intersectTriangle(FC,Qw,BC,!1,Zw);if(a===null&&($C(Qw.set(-.5,.5,0),Q_,s,J_,i,o),SN.set(0,1),a=e.ray.intersectTriangle(FC,BC,Qw,!1,Zw),a===null))return;const l=e.ray.origin.distanceTo(Zw);l<e.near||l>e.far||n.push({distance:l,point:Zw.clone(),uv:ou.getInterpolation(Zw,FC,Qw,BC,HK,SN,GK,new $t),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function $C(t,e,n,r,i,o){ex.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(Jw.x=o*ex.x-i*ex.y,Jw.y=i*ex.x+o*ex.y):Jw.copy(ex),t.copy(e),t.x+=Jw.x,t.y+=Jw.y,t.applyMatrix4(ede)}const jC=new Oe,qK=new Oe;class nde extends vi{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const o=n[r];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let o;for(o=0;o<i.length&&!(n<i[o].distance);o++);return i.splice(o,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let o=n[r].distance;if(n[r].object.visible&&(o-=o*n[r].hysteresis),e<o)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){jC.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(jC);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){jC.setFromMatrixPosition(e.matrixWorld),qK.setFromMatrixPosition(this.matrixWorld);const r=jC.distanceTo(qK)/e.zoom;n[0].object.visible=!0;let i,o;for(i=1,o=n.length;i<o;i++){let s=n[i].distance;if(n[i].object.visible&&(s-=s*n[i].hysteresis),r>=s)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<o;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,o=r.length;i<o;i++){const s=r[i];n.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return n}}const YK=new Oe,XK=new zi,KK=new zi,oyt=new Oe,ZK=new mr,UC=new Oe,MN=new _l,JK=new mr,EN=new Ry;class rde extends Cs{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=l4,this.bindMatrix=new mr,this.bindMatrixInverse=new mr,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Hl),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,UC),this.boundingBox.expandByPoint(UC)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new _l),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,UC),this.boundingSphere.expandByPoint(UC)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),MN.copy(this.boundingSphere),MN.applyMatrix4(i),e.ray.intersectsSphere(MN)!==!1&&(JK.copy(i).invert(),EN.copy(e.ray).applyMatrix4(JK),!(this.boundingBox!==null&&EN.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,EN)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new zi,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===l4?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===pue?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;XK.fromBufferAttribute(i.attributes.skinIndex,e),KK.fromBufferAttribute(i.attributes.skinWeight,e),YK.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let o=0;o<4;o++){const s=KK.getComponent(o);if(s!==0){const a=XK.getComponent(o);ZK.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),n.addScaledVector(oyt.copy(YK).applyMatrix4(ZK),s)}}return n.applyMatrix4(this.bindMatrixInverse)}}class r8 extends vi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ly extends Fo{constructor(e=null,n=1,r=1,i,o,s,a,l,d=cs,f=cs,p,g){super(null,s,a,l,d,f,i,o,p,g),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const QK=new mr,syt=new mr;class WO{constructor(e=[],n=[]){this.uuid=du(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new mr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new mr;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let o=0,s=e.length;o<s;o++){const a=e[o]?e[o].matrixWorld:syt;QK.multiplyMatrices(a,n[o]),QK.toArray(r,o*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new WO(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new ly(n,e,e,Bl,iu);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const o=e.bones[r];let s=n[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new r8),this.bones.push(s),this.boneInverses.push(new mr().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,o=n.length;i<o;i++){const s=n[i];e.bones.push(s.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Qb extends Xi{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const tx=new mr,eZ=new mr,VC=[],tZ=new Hl,ayt=new mr,eS=new Cs,tS=new _l;class ide extends Cs{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Qb(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,ayt)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Hl),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,tx),tZ.copy(e.boundingBox).applyMatrix4(tx),this.boundingBox.union(tZ)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new _l),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,tx),tS.copy(e.boundingSphere).applyMatrix4(tx),this.boundingSphere.union(tS)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const r=n.morphTargetInfluences,i=this.morphTexture.source.data.data,o=r.length+1,s=e*o+1;for(let a=0;a<r.length;a++)r[a]=i[s+a]}raycast(e,n){const r=this.matrixWorld,i=this.count;if(eS.geometry=this.geometry,eS.material=this.material,eS.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),tS.copy(this.boundingSphere),tS.applyMatrix4(r),e.ray.intersectsSphere(tS)!==!1))for(let o=0;o<i;o++){this.getMatrixAt(o,tx),eZ.multiplyMatrices(r,tx),eS.matrixWorld=eZ,eS.raycast(e,VC);for(let s=0,a=VC.length;s<a;s++){const l=VC[s];l.instanceId=o,l.object=this,n.push(l)}VC.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Qb(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const r=n.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new ly(new Float32Array(i*this.count),i,this.count,B6,iu));const o=this.morphTexture.source.data.data;let s=0;for(let d=0;d<r.length;d++)s+=r[d];const a=this.geometry.morphTargetsRelative?1:1-s,l=i*e;o[l]=a,o.set(r,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function lyt(t,e){return t.z-e.z}function cyt(t,e){return e.z-t.z}class uyt{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const o=r[this.index];i.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=n}reset(){this.list.length=0,this.index=0}}const nx="batchId",Eg=new mr,nZ=new mr,dyt=new mr,rZ=new mr,TN=new BE,WC=new Hl,mv=new _l,nS=new Oe,CN=new uyt,al=new Cs,HC=[];function hyt(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let o=0;o<i;o++)for(let s=0;s<r;s++)e.setComponent(o+n,s,t.getComponent(o,s))}else e.array.set(t.array,n*r);e.needsUpdate=!0}class ode extends Cs{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,n,r=n*2,i){super(new Lr,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new ly(n,e,e,Bl,iu);this._matricesTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,o=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:d,itemSize:f,normalized:p}=l,g=new d.constructor(r*f),v=new l.constructor(g,f,p);v.setUsage(l.usage),n.setAttribute(a,v)}if(e.getIndex()!==null){const a=r>65536?new Uint32Array(o):new Uint16Array(o);n.setIndex(new Xi(a,1))}const s=i>65536?new Uint32Array(r):new Uint16Array(r);n.setAttribute(nx,new Xi(s,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(nx))throw new Error(`BatchedMesh: Geometry cannot use attribute "${nx}"`);const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(r===nx)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),o=n.getAttribute(r);if(i.itemSize!==o.itemSize||i.normalized!==o.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Hl);const e=this._geometryCount,n=this.boundingBox,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Eg),this.getBoundingBoxAt(i,WC).applyMatrix4(Eg),n.union(WC))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new _l);const e=this._geometryCount,n=this.boundingSphere,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Eg),this.getBoundingSphereAt(i,mv).applyMatrix4(Eg),n.union(mv))}addGeometry(e,n=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let o=null;const s=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(o=s[s.length-1]),n===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=n,o===null?i.vertexStart=0:i.vertexStart=o.vertexStart+o.vertexCount;const d=e.getIndex(),f=d!==null;if(f&&(r===-1?i.indexCount=d.count:i.indexCount=r,o===null?i.indexStart=0:i.indexStart=o.indexStart+o.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const p=this._visibility,g=this._active,v=this._matricesTexture,x=this._matricesTexture.image.data;p.push(!0),g.push(!0);const b=this._geometryCount;this._geometryCount++,dyt.toArray(x,b*16),v.needsUpdate=!0,s.push(i),a.push({start:f?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Hl,sphereInitialized:!1,sphere:new _l});const S=this.geometry.getAttribute(nx);for(let M=0;M<i.vertexCount;M++)S.setX(i.vertexStart+M,b);return S.needsUpdate=!0,this.setGeometryAt(b,e),b}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,i=r.getIndex()!==null,o=r.getIndex(),s=n.getIndex(),a=this._reservedRanges[e];if(i&&s.count>a.indexCount||n.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,d=a.vertexCount;for(const v in r.attributes){if(v===nx)continue;const x=n.getAttribute(v),b=r.getAttribute(v);hyt(x,b,l);const S=x.itemSize;for(let M=x.count,T=d;M<T;M++){const C=l+M;for(let k=0;k<S;k++)b.setComponent(C,k,0)}b.needsUpdate=!0}if(i){const v=a.indexStart;for(let x=0;x<s.count;x++)o.setX(v+x,l+s.getX(x));for(let x=s.count,b=a.indexCount;x<b;x++)o.setX(v+x,l);o.needsUpdate=!0}const f=this._bounds[e];n.boundingBox!==null?(f.box.copy(n.boundingBox),f.boxInitialized=!0):f.boxInitialized=!1,n.boundingSphere!==null?(f.sphere.copy(n.boundingSphere),f.sphereInitialized=!0):f.sphereInitialized=!1;const p=this._drawRanges[e],g=n.getAttribute("position");return p.count=i?s.count:g.count,this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._active;return e>=n.length||n[e]===!1?this:(n[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,n){if(this._active[e]===!1)return null;const i=this._bounds[e],o=i.box,s=this.geometry;if(i.boxInitialized===!1){o.makeEmpty();const a=s.index,l=s.attributes.position,d=this._drawRanges[e];for(let f=d.start,p=d.start+d.count;f<p;f++){let g=f;a&&(g=a.getX(g)),o.expandByPoint(nS.fromBufferAttribute(l,g))}i.boxInitialized=!0}return n.copy(o),n}getBoundingSphereAt(e,n){if(this._active[e]===!1)return null;const i=this._bounds[e],o=i.sphere,s=this.geometry;if(i.sphereInitialized===!1){o.makeEmpty(),this.getBoundingBoxAt(e,WC),WC.getCenter(o.center);const a=s.index,l=s.attributes.position,d=this._drawRanges[e];let f=0;for(let p=d.start,g=d.start+d.count;p<g;p++){let v=p;a&&(v=a.getX(v)),nS.fromBufferAttribute(l,v),f=Math.max(f,o.center.distanceToSquared(nS))}o.radius=Math.sqrt(f),i.sphereInitialized=!0}return n.copy(o),n}setMatrixAt(e,n){const r=this._active,i=this._matricesTexture,o=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?this:(n.toArray(o,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,n){const r=this._active,i=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?null:n.fromArray(i,e*16)}setVisibleAt(e,n){const r=this._visibility,i=this._active,o=this._geometryCount;return e>=o||i[e]===!1||r[e]===n?this:(r[e]=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:n[e]}raycast(e,n){const r=this._visibility,i=this._active,o=this._drawRanges,s=this._geometryCount,a=this.matrixWorld,l=this.geometry;al.material=this.material,al.geometry.index=l.index,al.geometry.attributes=l.attributes,al.geometry.boundingBox===null&&(al.geometry.boundingBox=new Hl),al.geometry.boundingSphere===null&&(al.geometry.boundingSphere=new _l);for(let d=0;d<s;d++){if(!r[d]||!i[d])continue;const f=o[d];al.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(d,al.matrixWorld).premultiply(a),this.getBoundingBoxAt(d,al.geometry.boundingBox),this.getBoundingSphereAt(d,al.geometry.boundingSphere),al.raycast(e,HC);for(let p=0,g=HC.length;p<g;p++){const v=HC[p];v.object=this,v.batchId=d,n.push(v)}HC.length=0}al.material=null,al.geometry.index=null,al.geometry.attributes={},al.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,n,r,i,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=i.getIndex(),a=s===null?1:s.array.BYTES_PER_ELEMENT,l=this._active,d=this._visibility,f=this._multiDrawStarts,p=this._multiDrawCounts,g=this._drawRanges,v=this.perObjectFrustumCulled;v&&(rZ.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),TN.setFromProjectionMatrix(rZ,e.coordinateSystem));let x=0;if(this.sortObjects){nZ.copy(this.matrixWorld).invert(),nS.setFromMatrixPosition(r.matrixWorld).applyMatrix4(nZ);for(let M=0,T=d.length;M<T;M++)if(d[M]&&l[M]){this.getMatrixAt(M,Eg),this.getBoundingSphereAt(M,mv).applyMatrix4(Eg);let C=!1;if(v&&(C=!TN.intersectsSphere(mv)),!C){const k=nS.distanceTo(mv.center);CN.push(g[M],k)}}const b=CN.list,S=this.customSort;S===null?b.sort(o.transparent?cyt:lyt):S.call(this,b,r);for(let M=0,T=b.length;M<T;M++){const C=b[M];f[x]=C.start*a,p[x]=C.count,x++}CN.reset()}else for(let b=0,S=d.length;b<S;b++)if(d[b]&&l[b]){let M=!1;if(v&&(this.getMatrixAt(b,Eg),this.getBoundingSphereAt(b,mv).applyMatrix4(Eg),M=!TN.intersectsSphere(mv)),!M){const T=g[b];f[x]=T.start*a,p[x]=T.count,x++}}this._multiDrawCount=x,this._visibilityChanged=!1}onBeforeShadow(e,n,r,i,o,s){this.onBeforeRender(e,null,i,o,s)}}class Kl extends $a{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Dn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const iZ=new Oe,oZ=new Oe,sZ=new mr,AN=new Ry,GC=new _l;class vy extends vi{constructor(e=new Lr,n=new Kl){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,o=n.count;i<o;i++)iZ.fromBufferAttribute(n,i-1),oZ.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=iZ.distanceTo(oZ);e.setAttribute("lineDistance",new Qn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),GC.copy(r.boundingSphere),GC.applyMatrix4(i),GC.radius+=o,e.ray.intersectsSphere(GC)===!1)return;sZ.copy(i).invert(),AN.copy(e.ray).applyMatrix4(sZ);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,d=new Oe,f=new Oe,p=new Oe,g=new Oe,v=this.isLineSegments?2:1,x=r.index,S=r.attributes.position;if(x!==null){const M=Math.max(0,s.start),T=Math.min(x.count,s.start+s.count);for(let C=M,k=T-1;C<k;C+=v){const O=x.getX(C),D=x.getX(C+1);if(d.fromBufferAttribute(S,O),f.fromBufferAttribute(S,D),AN.distanceSqToSegment(d,f,g,p)>l)continue;g.applyMatrix4(this.matrixWorld);const U=e.ray.origin.distanceTo(g);U<e.near||U>e.far||n.push({distance:U,point:p.clone().applyMatrix4(this.matrixWorld),index:C,face:null,faceIndex:null,object:this})}}else{const M=Math.max(0,s.start),T=Math.min(S.count,s.start+s.count);for(let C=M,k=T-1;C<k;C+=v){if(d.fromBufferAttribute(S,C),f.fromBufferAttribute(S,C+1),AN.distanceSqToSegment(d,f,g,p)>l)continue;g.applyMatrix4(this.matrixWorld);const D=e.ray.origin.distanceTo(g);D<e.near||D>e.far||n.push({distance:D,point:p.clone().applyMatrix4(this.matrixWorld),index:C,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}const aZ=new Oe,lZ=new Oe;class qf extends vy{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,o=n.count;i<o;i+=2)aZ.fromBufferAttribute(n,i),lZ.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+aZ.distanceTo(lZ);e.setAttribute("lineDistance",new Qn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class sde extends vy{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class i8 extends $a{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Dn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const cZ=new mr,B4=new Ry,qC=new _l,YC=new Oe;class ade extends vi{constructor(e=new Lr,n=new i8){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Points.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),qC.copy(r.boundingSphere),qC.applyMatrix4(i),qC.radius+=o,e.ray.intersectsSphere(qC)===!1)return;cZ.copy(i).invert(),B4.copy(e.ray).applyMatrix4(cZ);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,d=r.index,p=r.attributes.position;if(d!==null){const g=Math.max(0,s.start),v=Math.min(d.count,s.start+s.count);for(let x=g,b=v;x<b;x++){const S=d.getX(x);YC.fromBufferAttribute(p,S),uZ(YC,S,l,i,e,n,this)}}else{const g=Math.max(0,s.start),v=Math.min(p.count,s.start+s.count);for(let x=g,b=v;x<b;x++)YC.fromBufferAttribute(p,x),uZ(YC,x,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}function uZ(t,e,n,r,i,o,s){const a=B4.distanceSqToPoint(t);if(a<n){const l=new Oe;B4.closestPointToPoint(t,l),l.applyMatrix4(r);const d=i.ray.origin.distanceTo(l);if(d<i.near||d>i.far)return;o.push({distance:d,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:s})}}class fyt extends Fo{constructor(e,n,r,i,o,s,a,l,d){super(e,n,r,i,o,s,a,l,d),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:Lo,this.magFilter=o!==void 0?o:Lo,this.generateMipmaps=!1;const f=this;function p(){f.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class pyt extends Fo{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=cs,this.minFilter=cs,this.generateMipmaps=!1,this.needsUpdate=!0}}class HO extends Fo{constructor(e,n,r,i,o,s,a,l,d,f,p,g){super(null,s,a,l,d,f,i,o,p,g),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class myt extends HO{constructor(e,n,r,i,o,s){super(e,n,r,o,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=fl}}class gyt extends HO{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,_m),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class yyt extends Fo{constructor(e,n,r,i,o,s,a,l,d){super(e,n,r,i,o,s,a,l,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Nh{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),o=0;n.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),o+=r.distanceTo(i),n.push(o),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const o=r.length;let s;n?s=n:s=e*r[o-1];let a=0,l=o-1,d;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),d=r[i]-s,d<0)a=i+1;else if(d>0)l=i-1;else{l=i;break}if(i=l,r[i]===s)return i/(o-1);const f=r[i],g=r[i+1]-f,v=(s-f)/g;return(i+v)/(o-1)}getTangent(e,n){let i=e-1e-4,o=e+1e-4;i<0&&(i=0),o>1&&(o=1);const s=this.getPoint(i),a=this.getPoint(o),l=n||(s.isVector2?new $t:new Oe);return l.copy(a).sub(s).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new Oe,i=[],o=[],s=[],a=new Oe,l=new mr;for(let v=0;v<=e;v++){const x=v/e;i[v]=this.getTangentAt(x,new Oe)}o[0]=new Oe,s[0]=new Oe;let d=Number.MAX_VALUE;const f=Math.abs(i[0].x),p=Math.abs(i[0].y),g=Math.abs(i[0].z);f<=d&&(d=f,r.set(1,0,0)),p<=d&&(d=p,r.set(0,1,0)),g<=d&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],a),s[0].crossVectors(i[0],o[0]);for(let v=1;v<=e;v++){if(o[v]=o[v-1].clone(),s[v]=s[v-1].clone(),a.crossVectors(i[v-1],i[v]),a.length()>Number.EPSILON){a.normalize();const x=Math.acos(Yo(i[v-1].dot(i[v]),-1,1));o[v].applyMatrix4(l.makeRotationAxis(a,x))}s[v].crossVectors(i[v],o[v])}if(n===!0){let v=Math.acos(Yo(o[0].dot(o[e]),-1,1));v/=e,i[0].dot(a.crossVectors(o[0],o[e]))>0&&(v=-v);for(let x=1;x<=e;x++)o[x].applyMatrix4(l.makeRotationAxis(i[x],v*x)),s[x].crossVectors(i[x],o[x])}return{tangents:i,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class GO extends Nh{constructor(e=0,n=0,r=1,i=1,o=0,s=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(e,n=new $t){const r=n,i=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(s?o=0:o=i),this.aClockwise===!0&&!s&&(o===i?o=-i:o=o-i);const a=this.aStartAngle+e*o;let l=this.aX+this.xRadius*Math.cos(a),d=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const f=Math.cos(this.aRotation),p=Math.sin(this.aRotation),g=l-this.aX,v=d-this.aY;l=g*f-v*p+this.aX,d=g*p+v*f+this.aY}return r.set(l,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class lde extends GO{constructor(e,n,r,i,o,s){super(e,n,r,r,i,o,s),this.isArcCurve=!0,this.type="ArcCurve"}}function o8(){let t=0,e=0,n=0,r=0;function i(o,s,a,l){t=o,e=a,n=-3*o+3*s-2*a-l,r=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,d){i(s,a,d*(a-o),d*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,d,f,p){let g=(s-o)/d-(a-o)/(d+f)+(a-s)/f,v=(a-s)/f-(l-s)/(f+p)+(l-a)/p;g*=f,v*=f,i(s,a,g,v)},calc:function(o){const s=o*o,a=s*o;return t+e*o+n*s+r*a}}}const XC=new Oe,PN=new o8,IN=new o8,kN=new o8;class cde extends Nh{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new Oe){const r=n,i=this.points,o=i.length,s=(o-(this.closed?0:1))*e;let a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:l===0&&a===o-1&&(a=o-2,l=1);let d,f;this.closed||a>0?d=i[(a-1)%o]:(XC.subVectors(i[0],i[1]).add(i[0]),d=XC);const p=i[a%o],g=i[(a+1)%o];if(this.closed||a+2<o?f=i[(a+2)%o]:(XC.subVectors(i[o-1],i[o-2]).add(i[o-1]),f=XC),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let x=Math.pow(d.distanceToSquared(p),v),b=Math.pow(p.distanceToSquared(g),v),S=Math.pow(g.distanceToSquared(f),v);b<1e-4&&(b=1),x<1e-4&&(x=b),S<1e-4&&(S=b),PN.initNonuniformCatmullRom(d.x,p.x,g.x,f.x,x,b,S),IN.initNonuniformCatmullRom(d.y,p.y,g.y,f.y,x,b,S),kN.initNonuniformCatmullRom(d.z,p.z,g.z,f.z,x,b,S)}else this.curveType==="catmullrom"&&(PN.initCatmullRom(d.x,p.x,g.x,f.x,this.tension),IN.initCatmullRom(d.y,p.y,g.y,f.y,this.tension),kN.initCatmullRom(d.z,p.z,g.z,f.z,this.tension));return r.set(PN.calc(l),IN.calc(l),kN.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new Oe().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function dZ(t,e,n,r,i){const o=(r-e)*.5,s=(i-n)*.5,a=t*t,l=t*a;return(2*n-2*r+o+s)*l+(-3*n+3*r-2*o-s)*a+o*t+n}function vyt(t,e){const n=1-t;return n*n*e}function _yt(t,e){return 2*(1-t)*t*e}function xyt(t,e){return t*t*e}function qS(t,e,n,r){return vyt(t,e)+_yt(t,n)+xyt(t,r)}function byt(t,e){const n=1-t;return n*n*n*e}function wyt(t,e){const n=1-t;return 3*n*n*t*e}function Syt(t,e){return 3*(1-t)*t*t*e}function Myt(t,e){return t*t*t*e}function YS(t,e,n,r,i){return byt(t,e)+wyt(t,n)+Syt(t,r)+Myt(t,i)}class s8 extends Nh{constructor(e=new $t,n=new $t,r=new $t,i=new $t){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new $t){const r=n,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(YS(e,i.x,o.x,s.x,a.x),YS(e,i.y,o.y,s.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ude extends Nh{constructor(e=new Oe,n=new Oe,r=new Oe,i=new Oe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new Oe){const r=n,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(YS(e,i.x,o.x,s.x,a.x),YS(e,i.y,o.y,s.y,a.y),YS(e,i.z,o.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class a8 extends Nh{constructor(e=new $t,n=new $t){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new $t){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new $t){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class dde extends Nh{constructor(e=new Oe,n=new Oe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new Oe){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Oe){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class l8 extends Nh{constructor(e=new $t,n=new $t,r=new $t){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new $t){const r=n,i=this.v0,o=this.v1,s=this.v2;return r.set(qS(e,i.x,o.x,s.x),qS(e,i.y,o.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class c8 extends Nh{constructor(e=new Oe,n=new Oe,r=new Oe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new Oe){const r=n,i=this.v0,o=this.v1,s=this.v2;return r.set(qS(e,i.x,o.x,s.x),qS(e,i.y,o.y,s.y),qS(e,i.z,o.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class u8 extends Nh{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new $t){const r=n,i=this.points,o=(i.length-1)*e,s=Math.floor(o),a=o-s,l=i[s===0?s:s-1],d=i[s],f=i[s>i.length-2?i.length-1:s+1],p=i[s>i.length-3?i.length-1:s+2];return r.set(dZ(a,l.x,d.x,f.x,p.x),dZ(a,l.y,d.y,f.y,p.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new $t().fromArray(i))}return this}}var nk=Object.freeze({__proto__:null,ArcCurve:lde,CatmullRomCurve3:cde,CubicBezierCurve:s8,CubicBezierCurve3:ude,EllipseCurve:GO,LineCurve:a8,LineCurve3:dde,QuadraticBezierCurve:l8,QuadraticBezierCurve3:c8,SplineCurve:u8});class hde extends Nh{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new nk[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let o=0;for(;o<i.length;){if(i[o]>=r){const s=i[o]-r,a=this.curves[o],l=a.getLength(),d=l===0?0:1-s/l;return a.getPointAt(d,n)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,o=this.curves;i<o.length;i++){const s=o[i],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(a);for(let d=0;d<l.length;d++){const f=l[d];r&&r.equals(f)||(n.push(f),r=f)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new nk[i.type]().fromJSON(i))}return this}}class kM extends hde{constructor(e){super(),this.type="Path",this.currentPoint=new $t,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new a8(this.currentPoint.clone(),new $t(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const o=new l8(this.currentPoint.clone(),new $t(e,n),new $t(r,i));return this.curves.push(o),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,o,s){const a=new s8(this.currentPoint.clone(),new $t(e,n),new $t(r,i),new $t(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new u8(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,o,s){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,i,o,s),this}absarc(e,n,r,i,o,s){return this.absellipse(e,n,r,r,i,o,s),this}ellipse(e,n,r,i,o,s,a,l){const d=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+d,n+f,r,i,o,s,a,l),this}absellipse(e,n,r,i,o,s,a,l){const d=new GO(e,n,r,i,o,s,a,l);if(this.curves.length>0){const p=d.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(d);const f=d.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class $E extends Lr{constructor(e=[new $t(0,-.5),new $t(.5,0),new $t(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=Yo(i,0,Math.PI*2);const o=[],s=[],a=[],l=[],d=[],f=1/n,p=new Oe,g=new $t,v=new Oe,x=new Oe,b=new Oe;let S=0,M=0;for(let T=0;T<=e.length-1;T++)switch(T){case 0:S=e[T+1].x-e[T].x,M=e[T+1].y-e[T].y,v.x=M*1,v.y=-S,v.z=M*0,b.copy(v),v.normalize(),l.push(v.x,v.y,v.z);break;case e.length-1:l.push(b.x,b.y,b.z);break;default:S=e[T+1].x-e[T].x,M=e[T+1].y-e[T].y,v.x=M*1,v.y=-S,v.z=M*0,x.copy(v),v.x+=b.x,v.y+=b.y,v.z+=b.z,v.normalize(),l.push(v.x,v.y,v.z),b.copy(x)}for(let T=0;T<=n;T++){const C=r+T*f*i,k=Math.sin(C),O=Math.cos(C);for(let D=0;D<=e.length-1;D++){p.x=e[D].x*k,p.y=e[D].y,p.z=e[D].x*O,s.push(p.x,p.y,p.z),g.x=T/n,g.y=D/(e.length-1),a.push(g.x,g.y);const B=l[3*D+0]*k,U=l[3*D+1],J=l[3*D+0]*O;d.push(B,U,J)}}for(let T=0;T<n;T++)for(let C=0;C<e.length-1;C++){const k=C+T*e.length,O=k,D=k+e.length,B=k+e.length+1,U=k+1;o.push(O,D,U),o.push(B,U,D)}this.setIndex(o),this.setAttribute("position",new Qn(s,3)),this.setAttribute("uv",new Qn(a,2)),this.setAttribute("normal",new Qn(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $E(e.points,e.segments,e.phiStart,e.phiLength)}}class qO extends $E{constructor(e=1,n=1,r=4,i=8){const o=new kM;o.absarc(0,-n/2,e,Math.PI*1.5,0),o.absarc(0,n/2,e,0,Math.PI*.5),super(o.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new qO(e.radius,e.length,e.capSegments,e.radialSegments)}}class YO extends Lr{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const o=[],s=[],a=[],l=[],d=new Oe,f=new $t;s.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let p=0,g=3;p<=n;p++,g+=3){const v=r+p/n*i;d.x=e*Math.cos(v),d.y=e*Math.sin(v),s.push(d.x,d.y,d.z),a.push(0,0,1),f.x=(s[g]/e+1)/2,f.y=(s[g+1]/e+1)/2,l.push(f.x,f.y)}for(let p=1;p<=n;p++)o.push(p,p+1,0);this.setIndex(o),this.setAttribute("position",new Qn(s,3)),this.setAttribute("normal",new Qn(a,3)),this.setAttribute("uv",new Qn(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new YO(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class U1 extends Lr{constructor(e=1,n=1,r=1,i=32,o=1,s=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l};const d=this;i=Math.floor(i),o=Math.floor(o);const f=[],p=[],g=[],v=[];let x=0;const b=[],S=r/2;let M=0;T(),s===!1&&(e>0&&C(!0),n>0&&C(!1)),this.setIndex(f),this.setAttribute("position",new Qn(p,3)),this.setAttribute("normal",new Qn(g,3)),this.setAttribute("uv",new Qn(v,2));function T(){const k=new Oe,O=new Oe;let D=0;const B=(n-e)/r;for(let U=0;U<=o;U++){const J=[],V=U/o,X=V*(n-e)+e;for(let oe=0;oe<=i;oe++){const pe=oe/i,re=pe*l+a,he=Math.sin(re),ue=Math.cos(re);O.x=X*he,O.y=-V*r+S,O.z=X*ue,p.push(O.x,O.y,O.z),k.set(he,B,ue).normalize(),g.push(k.x,k.y,k.z),v.push(pe,1-V),J.push(x++)}b.push(J)}for(let U=0;U<i;U++)for(let J=0;J<o;J++){const V=b[J][U],X=b[J+1][U],oe=b[J+1][U+1],pe=b[J][U+1];f.push(V,X,pe),f.push(X,oe,pe),D+=6}d.addGroup(M,D,0),M+=D}function C(k){const O=x,D=new $t,B=new Oe;let U=0;const J=k===!0?e:n,V=k===!0?1:-1;for(let oe=1;oe<=i;oe++)p.push(0,S*V,0),g.push(0,V,0),v.push(.5,.5),x++;const X=x;for(let oe=0;oe<=i;oe++){const re=oe/i*l+a,he=Math.cos(re),ue=Math.sin(re);B.x=J*ue,B.y=S*V,B.z=J*he,p.push(B.x,B.y,B.z),g.push(0,V,0),D.x=he*.5+.5,D.y=ue*.5*V+.5,v.push(D.x,D.y),x++}for(let oe=0;oe<i;oe++){const pe=O+oe,re=X+oe;k===!0?f.push(re,re+1,pe):f.push(re+1,re,pe),U+=3}d.addGroup(M,U,k===!0?1:2),M+=U}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new U1(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class XO extends U1{constructor(e=1,n=1,r=32,i=1,o=!1,s=0,a=Math.PI*2){super(0,e,n,r,i,o,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a}}static fromJSON(e){return new XO(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Dy extends Lr{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const o=[],s=[];a(i),d(r),f(),this.setAttribute("position",new Qn(o,3)),this.setAttribute("normal",new Qn(o.slice(),3)),this.setAttribute("uv",new Qn(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(T){const C=new Oe,k=new Oe,O=new Oe;for(let D=0;D<n.length;D+=3)v(n[D+0],C),v(n[D+1],k),v(n[D+2],O),l(C,k,O,T)}function l(T,C,k,O){const D=O+1,B=[];for(let U=0;U<=D;U++){B[U]=[];const J=T.clone().lerp(k,U/D),V=C.clone().lerp(k,U/D),X=D-U;for(let oe=0;oe<=X;oe++)oe===0&&U===D?B[U][oe]=J:B[U][oe]=J.clone().lerp(V,oe/X)}for(let U=0;U<D;U++)for(let J=0;J<2*(D-U)-1;J++){const V=Math.floor(J/2);J%2===0?(g(B[U][V+1]),g(B[U+1][V]),g(B[U][V])):(g(B[U][V+1]),g(B[U+1][V+1]),g(B[U+1][V]))}}function d(T){const C=new Oe;for(let k=0;k<o.length;k+=3)C.x=o[k+0],C.y=o[k+1],C.z=o[k+2],C.normalize().multiplyScalar(T),o[k+0]=C.x,o[k+1]=C.y,o[k+2]=C.z}function f(){const T=new Oe;for(let C=0;C<o.length;C+=3){T.x=o[C+0],T.y=o[C+1],T.z=o[C+2];const k=S(T)/2/Math.PI+.5,O=M(T)/Math.PI+.5;s.push(k,1-O)}x(),p()}function p(){for(let T=0;T<s.length;T+=6){const C=s[T+0],k=s[T+2],O=s[T+4],D=Math.max(C,k,O),B=Math.min(C,k,O);D>.9&&B<.1&&(C<.2&&(s[T+0]+=1),k<.2&&(s[T+2]+=1),O<.2&&(s[T+4]+=1))}}function g(T){o.push(T.x,T.y,T.z)}function v(T,C){const k=T*3;C.x=e[k+0],C.y=e[k+1],C.z=e[k+2]}function x(){const T=new Oe,C=new Oe,k=new Oe,O=new Oe,D=new $t,B=new $t,U=new $t;for(let J=0,V=0;J<o.length;J+=9,V+=6){T.set(o[J+0],o[J+1],o[J+2]),C.set(o[J+3],o[J+4],o[J+5]),k.set(o[J+6],o[J+7],o[J+8]),D.set(s[V+0],s[V+1]),B.set(s[V+2],s[V+3]),U.set(s[V+4],s[V+5]),O.copy(T).add(C).add(k).divideScalar(3);const X=S(O);b(D,V+0,T,X),b(B,V+2,C,X),b(U,V+4,k,X)}}function b(T,C,k,O){O<0&&T.x===1&&(s[C]=T.x-1),k.x===0&&k.z===0&&(s[C]=O/2/Math.PI+.5)}function S(T){return Math.atan2(T.z,-T.x)}function M(T){return Math.atan2(-T.y,Math.sqrt(T.x*T.x+T.z*T.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dy(e.vertices,e.indices,e.radius,e.details)}}class jE extends Dy{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,s,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new jE(e.radius,e.detail)}}const KC=new Oe,ZC=new Oe,RN=new Oe,JC=new ou;class fde extends Lr{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),o=Math.cos(d0*n),s=e.getIndex(),a=e.getAttribute("position"),l=s?s.count:a.count,d=[0,0,0],f=["a","b","c"],p=new Array(3),g={},v=[];for(let x=0;x<l;x+=3){s?(d[0]=s.getX(x),d[1]=s.getX(x+1),d[2]=s.getX(x+2)):(d[0]=x,d[1]=x+1,d[2]=x+2);const{a:b,b:S,c:M}=JC;if(b.fromBufferAttribute(a,d[0]),S.fromBufferAttribute(a,d[1]),M.fromBufferAttribute(a,d[2]),JC.getNormal(RN),p[0]=`${Math.round(b.x*i)},${Math.round(b.y*i)},${Math.round(b.z*i)}`,p[1]=`${Math.round(S.x*i)},${Math.round(S.y*i)},${Math.round(S.z*i)}`,p[2]=`${Math.round(M.x*i)},${Math.round(M.y*i)},${Math.round(M.z*i)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let T=0;T<3;T++){const C=(T+1)%3,k=p[T],O=p[C],D=JC[f[T]],B=JC[f[C]],U=`${k}_${O}`,J=`${O}_${k}`;J in g&&g[J]?(RN.dot(g[J].normal)<=o&&(v.push(D.x,D.y,D.z),v.push(B.x,B.y,B.z)),g[J]=null):U in g||(g[U]={index0:d[T],index1:d[C],normal:RN.clone()})}}for(const x in g)if(g[x]){const{index0:b,index1:S}=g[x];KC.fromBufferAttribute(a,b),ZC.fromBufferAttribute(a,S),v.push(KC.x,KC.y,KC.z),v.push(ZC.x,ZC.y,ZC.z)}this.setAttribute("position",new Qn(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class f0 extends kM{constructor(e){super(e),this.uuid=du(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new kM().fromJSON(i))}return this}}const Eyt={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let o=pde(t,0,i,n,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,d,f,p,g,v;if(r&&(o=Iyt(t,e,o,n)),t.length>80*n){a=d=t[0],l=f=t[1];for(let x=n;x<i;x+=n)p=t[x],g=t[x+1],p<a&&(a=p),g<l&&(l=g),p>d&&(d=p),g>f&&(f=g);v=Math.max(d-a,f-l),v=v!==0?32767/v:0}return RM(o,s,n,a,l,v,0),s}};function pde(t,e,n,r,i){let o,s;if(i===jyt(t,e,n,r)>0)for(o=e;o<n;o+=r)s=hZ(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=hZ(o,t[o],t[o+1],s);return s&&KO(s,s.next)&&(LM(s),s=s.next),s}function R0(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(KO(n,n.next)||No(n.prev,n,n.next)===0)){if(LM(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function RM(t,e,n,r,i,o,s){if(!t)return;!s&&o&&Dyt(t,r,i,o);let a=t,l,d;for(;t.prev!==t.next;){if(l=t.prev,d=t.next,o?Cyt(t,r,i,o):Tyt(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(d.i/n|0),LM(t),t=d.next,a=d.next;continue}if(t=d,t===a){s?s===1?(t=Ayt(R0(t),e,n),RM(t,e,n,r,i,o,2)):s===2&&Pyt(t,e,n,r,i,o):RM(R0(t),e,n,r,i,o,1);break}}}function Tyt(t){const e=t.prev,n=t,r=t.next;if(No(e,n,r)>=0)return!1;const i=e.x,o=n.x,s=r.x,a=e.y,l=n.y,d=r.y,f=i<o?i<s?i:s:o<s?o:s,p=a<l?a<d?a:d:l<d?l:d,g=i>o?i>s?i:s:o>s?o:s,v=a>l?a>d?a:d:l>d?l:d;let x=r.next;for(;x!==e;){if(x.x>=f&&x.x<=g&&x.y>=p&&x.y<=v&&Fx(i,a,o,l,s,d,x.x,x.y)&&No(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function Cyt(t,e,n,r){const i=t.prev,o=t,s=t.next;if(No(i,o,s)>=0)return!1;const a=i.x,l=o.x,d=s.x,f=i.y,p=o.y,g=s.y,v=a<l?a<d?a:d:l<d?l:d,x=f<p?f<g?f:g:p<g?p:g,b=a>l?a>d?a:d:l>d?l:d,S=f>p?f>g?f:g:p>g?p:g,M=$4(v,x,e,n,r),T=$4(b,S,e,n,r);let C=t.prevZ,k=t.nextZ;for(;C&&C.z>=M&&k&&k.z<=T;){if(C.x>=v&&C.x<=b&&C.y>=x&&C.y<=S&&C!==i&&C!==s&&Fx(a,f,l,p,d,g,C.x,C.y)&&No(C.prev,C,C.next)>=0||(C=C.prevZ,k.x>=v&&k.x<=b&&k.y>=x&&k.y<=S&&k!==i&&k!==s&&Fx(a,f,l,p,d,g,k.x,k.y)&&No(k.prev,k,k.next)>=0))return!1;k=k.nextZ}for(;C&&C.z>=M;){if(C.x>=v&&C.x<=b&&C.y>=x&&C.y<=S&&C!==i&&C!==s&&Fx(a,f,l,p,d,g,C.x,C.y)&&No(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;k&&k.z<=T;){if(k.x>=v&&k.x<=b&&k.y>=x&&k.y<=S&&k!==i&&k!==s&&Fx(a,f,l,p,d,g,k.x,k.y)&&No(k.prev,k,k.next)>=0)return!1;k=k.nextZ}return!0}function Ayt(t,e,n){let r=t;do{const i=r.prev,o=r.next.next;!KO(i,o)&&mde(i,r,r.next,o)&&OM(i,o)&&OM(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),LM(r),LM(r.next),r=t=o),r=r.next}while(r!==t);return R0(r)}function Pyt(t,e,n,r,i,o){let s=t;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&Fyt(s,a)){let l=gde(s,a);s=R0(s,s.next),l=R0(l,l.next),RM(s,e,n,r,i,o,0),RM(l,e,n,r,i,o,0);return}a=a.next}s=s.next}while(s!==t)}function Iyt(t,e,n,r){const i=[];let o,s,a,l,d;for(o=0,s=e.length;o<s;o++)a=e[o]*r,l=o<s-1?e[o+1]*r:t.length,d=pde(t,a,l,r,!1),d===d.next&&(d.steiner=!0),i.push(zyt(d));for(i.sort(kyt),o=0;o<i.length;o++)n=Ryt(i[o],n);return n}function kyt(t,e){return t.x-e.x}function Ryt(t,e){const n=Oyt(t,e);if(!n)return e;const r=gde(n,t);return R0(r,r.next),R0(n,n.next)}function Oyt(t,e){let n=e,r=-1/0,i;const o=t.x,s=t.y;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){const g=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(g<=o&&g>r&&(r=g,i=n.x<n.next.x?n:n.next,g===o))return i}n=n.next}while(n!==e);if(!i)return null;const a=i,l=i.x,d=i.y;let f=1/0,p;n=i;do o>=n.x&&n.x>=l&&o!==n.x&&Fx(s<d?o:r,s,l,d,s<d?r:o,s,n.x,n.y)&&(p=Math.abs(s-n.y)/(o-n.x),OM(n,t)&&(p<f||p===f&&(n.x>i.x||n.x===i.x&&Lyt(i,n)))&&(i=n,f=p)),n=n.next;while(n!==a);return i}function Lyt(t,e){return No(t.prev,t,e.prev)<0&&No(e.next,t,t.next)<0}function Dyt(t,e,n,r){let i=t;do i.z===0&&(i.z=$4(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Nyt(i)}function Nyt(t){let e,n,r,i,o,s,a,l,d=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<d&&(a++,r=r.nextZ,!!r);e++);for(l=d;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,d*=2}while(s>1);return t}function $4(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function zyt(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Fx(t,e,n,r,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(r-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function Fyt(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Byt(t,e)&&(OM(t,e)&&OM(e,t)&&$yt(t,e)&&(No(t.prev,t,e.prev)||No(t,e.prev,e))||KO(t,e)&&No(t.prev,t,t.next)>0&&No(e.prev,e,e.next)>0)}function No(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function KO(t,e){return t.x===e.x&&t.y===e.y}function mde(t,e,n,r){const i=eA(No(t,e,n)),o=eA(No(t,e,r)),s=eA(No(n,r,t)),a=eA(No(n,r,e));return!!(i!==o&&s!==a||i===0&&QC(t,n,e)||o===0&&QC(t,r,e)||s===0&&QC(n,t,r)||a===0&&QC(n,e,r))}function QC(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function eA(t){return t>0?1:t<0?-1:0}function Byt(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&mde(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function OM(t,e){return No(t.prev,t,t.next)<0?No(t,e,t.next)>=0&&No(t,t.prev,e)>=0:No(t,e,t.prev)<0||No(t,t.next,e)<0}function $yt(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function gde(t,e){const n=new j4(t.i,t.x,t.y),r=new j4(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function hZ(t,e,n,r){const i=new j4(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function LM(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function j4(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function jyt(t,e,n,r){let i=0;for(let o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}class Of{static area(e){const n=e.length;let r=0;for(let i=n-1,o=0;o<n;i=o++)r+=e[i].x*e[o].y-e[o].x*e[i].y;return r*.5}static isClockWise(e){return Of.area(e)<0}static triangulateShape(e,n){const r=[],i=[],o=[];fZ(e),pZ(r,e);let s=e.length;n.forEach(fZ);for(let l=0;l<n.length;l++)i.push(s),s+=n[l].length,pZ(r,n[l]);const a=Eyt.triangulate(r,i);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}}function fZ(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function pZ(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class ZO extends Lr{constructor(e=new f0([new $t(.5,.5),new $t(-.5,.5),new $t(-.5,-.5),new $t(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],o=[];for(let a=0,l=e.length;a<l;a++){const d=e[a];s(d)}this.setAttribute("position",new Qn(i,3)),this.setAttribute("uv",new Qn(o,2)),this.computeVertexNormals();function s(a){const l=[],d=n.curveSegments!==void 0?n.curveSegments:12,f=n.steps!==void 0?n.steps:1,p=n.depth!==void 0?n.depth:1;let g=n.bevelEnabled!==void 0?n.bevelEnabled:!0,v=n.bevelThickness!==void 0?n.bevelThickness:.2,x=n.bevelSize!==void 0?n.bevelSize:v-.1,b=n.bevelOffset!==void 0?n.bevelOffset:0,S=n.bevelSegments!==void 0?n.bevelSegments:3;const M=n.extrudePath,T=n.UVGenerator!==void 0?n.UVGenerator:Uyt;let C,k=!1,O,D,B,U;M&&(C=M.getSpacedPoints(f),k=!0,g=!1,O=M.computeFrenetFrames(f,!1),D=new Oe,B=new Oe,U=new Oe),g||(S=0,v=0,x=0,b=0);const J=a.extractPoints(d);let V=J.shape;const X=J.holes;if(!Of.isClockWise(V)){V=V.reverse();for(let ge=0,tt=X.length;ge<tt;ge++){const rt=X[ge];Of.isClockWise(rt)&&(X[ge]=rt.reverse())}}const pe=Of.triangulateShape(V,X),re=V;for(let ge=0,tt=X.length;ge<tt;ge++){const rt=X[ge];V=V.concat(rt)}function he(ge,tt,rt){return tt||console.error("THREE.ExtrudeGeometry: vec does not exist"),ge.clone().addScaledVector(tt,rt)}const ue=V.length,be=pe.length;function ie(ge,tt,rt){let vt,Tt,We;const Vt=ge.x-tt.x,sn=ge.y-tt.y,Ut=rt.x-ge.x,Pe=rt.y-ge.y,_e=Vt*Vt+sn*sn,Mt=Vt*Pe-sn*Ut;if(Math.abs(Mt)>Number.EPSILON){const wt=Math.sqrt(_e),Wt=Math.sqrt(Ut*Ut+Pe*Pe),Bt=tt.x-sn/wt,Mn=tt.y+Vt/wt,an=rt.x-Pe/Wt,Je=rt.y+Ut/Wt,Yt=((an-Bt)*Pe-(Je-Mn)*Ut)/(Vt*Pe-sn*Ut);vt=Bt+Vt*Yt-ge.x,Tt=Mn+sn*Yt-ge.y;const xn=vt*vt+Tt*Tt;if(xn<=2)return new $t(vt,Tt);We=Math.sqrt(xn/2)}else{let wt=!1;Vt>Number.EPSILON?Ut>Number.EPSILON&&(wt=!0):Vt<-Number.EPSILON?Ut<-Number.EPSILON&&(wt=!0):Math.sign(sn)===Math.sign(Pe)&&(wt=!0),wt?(vt=-sn,Tt=Vt,We=Math.sqrt(_e)):(vt=Vt,Tt=sn,We=Math.sqrt(_e/2))}return new $t(vt/We,Tt/We)}const ve=[];for(let ge=0,tt=re.length,rt=tt-1,vt=ge+1;ge<tt;ge++,rt++,vt++)rt===tt&&(rt=0),vt===tt&&(vt=0),ve[ge]=ie(re[ge],re[rt],re[vt]);const Ee=[];let Ne,Ge=ve.concat();for(let ge=0,tt=X.length;ge<tt;ge++){const rt=X[ge];Ne=[];for(let vt=0,Tt=rt.length,We=Tt-1,Vt=vt+1;vt<Tt;vt++,We++,Vt++)We===Tt&&(We=0),Vt===Tt&&(Vt=0),Ne[vt]=ie(rt[vt],rt[We],rt[Vt]);Ee.push(Ne),Ge=Ge.concat(Ne)}for(let ge=0;ge<S;ge++){const tt=ge/S,rt=v*Math.cos(tt*Math.PI/2),vt=x*Math.sin(tt*Math.PI/2)+b;for(let Tt=0,We=re.length;Tt<We;Tt++){const Vt=he(re[Tt],ve[Tt],vt);Rt(Vt.x,Vt.y,-rt)}for(let Tt=0,We=X.length;Tt<We;Tt++){const Vt=X[Tt];Ne=Ee[Tt];for(let sn=0,Ut=Vt.length;sn<Ut;sn++){const Pe=he(Vt[sn],Ne[sn],vt);Rt(Pe.x,Pe.y,-rt)}}}const dt=x+b;for(let ge=0;ge<ue;ge++){const tt=g?he(V[ge],Ge[ge],dt):V[ge];k?(B.copy(O.normals[0]).multiplyScalar(tt.x),D.copy(O.binormals[0]).multiplyScalar(tt.y),U.copy(C[0]).add(B).add(D),Rt(U.x,U.y,U.z)):Rt(tt.x,tt.y,0)}for(let ge=1;ge<=f;ge++)for(let tt=0;tt<ue;tt++){const rt=g?he(V[tt],Ge[tt],dt):V[tt];k?(B.copy(O.normals[ge]).multiplyScalar(rt.x),D.copy(O.binormals[ge]).multiplyScalar(rt.y),U.copy(C[ge]).add(B).add(D),Rt(U.x,U.y,U.z)):Rt(rt.x,rt.y,p/f*ge)}for(let ge=S-1;ge>=0;ge--){const tt=ge/S,rt=v*Math.cos(tt*Math.PI/2),vt=x*Math.sin(tt*Math.PI/2)+b;for(let Tt=0,We=re.length;Tt<We;Tt++){const Vt=he(re[Tt],ve[Tt],vt);Rt(Vt.x,Vt.y,p+rt)}for(let Tt=0,We=X.length;Tt<We;Tt++){const Vt=X[Tt];Ne=Ee[Tt];for(let sn=0,Ut=Vt.length;sn<Ut;sn++){const Pe=he(Vt[sn],Ne[sn],vt);k?Rt(Pe.x,Pe.y+C[f-1].y,C[f-1].x+rt):Rt(Pe.x,Pe.y,p+rt)}}}Ue(),st();function Ue(){const ge=i.length/3;if(g){let tt=0,rt=ue*tt;for(let vt=0;vt<be;vt++){const Tt=pe[vt];Lt(Tt[2]+rt,Tt[1]+rt,Tt[0]+rt)}tt=f+S*2,rt=ue*tt;for(let vt=0;vt<be;vt++){const Tt=pe[vt];Lt(Tt[0]+rt,Tt[1]+rt,Tt[2]+rt)}}else{for(let tt=0;tt<be;tt++){const rt=pe[tt];Lt(rt[2],rt[1],rt[0])}for(let tt=0;tt<be;tt++){const rt=pe[tt];Lt(rt[0]+ue*f,rt[1]+ue*f,rt[2]+ue*f)}}r.addGroup(ge,i.length/3-ge,0)}function st(){const ge=i.length/3;let tt=0;lt(re,tt),tt+=re.length;for(let rt=0,vt=X.length;rt<vt;rt++){const Tt=X[rt];lt(Tt,tt),tt+=Tt.length}r.addGroup(ge,i.length/3-ge,1)}function lt(ge,tt){let rt=ge.length;for(;--rt>=0;){const vt=rt;let Tt=rt-1;Tt<0&&(Tt=ge.length-1);for(let We=0,Vt=f+S*2;We<Vt;We++){const sn=ue*We,Ut=ue*(We+1),Pe=tt+vt+sn,_e=tt+Tt+sn,Mt=tt+Tt+Ut,wt=tt+vt+Ut;Fe(Pe,_e,Mt,wt)}}}function Rt(ge,tt,rt){l.push(ge),l.push(tt),l.push(rt)}function Lt(ge,tt,rt){at(ge),at(tt),at(rt);const vt=i.length/3,Tt=T.generateTopUV(r,i,vt-3,vt-2,vt-1);nt(Tt[0]),nt(Tt[1]),nt(Tt[2])}function Fe(ge,tt,rt,vt){at(ge),at(tt),at(vt),at(tt),at(rt),at(vt);const Tt=i.length/3,We=T.generateSideWallUV(r,i,Tt-6,Tt-3,Tt-2,Tt-1);nt(We[0]),nt(We[1]),nt(We[3]),nt(We[1]),nt(We[2]),nt(We[3])}function at(ge){i.push(l[ge*3+0]),i.push(l[ge*3+1]),i.push(l[ge*3+2])}function nt(ge){o.push(ge.x),o.push(ge.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return Vyt(n,r,e)}static fromJSON(e,n){const r=[];for(let o=0,s=e.shapes.length;o<s;o++){const a=n[e.shapes[o]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new nk[i.type]().fromJSON(i)),new ZO(r,e.options)}}const Uyt={generateTopUV:function(t,e,n,r,i){const o=e[n*3],s=e[n*3+1],a=e[r*3],l=e[r*3+1],d=e[i*3],f=e[i*3+1];return[new $t(o,s),new $t(a,l),new $t(d,f)]},generateSideWallUV:function(t,e,n,r,i,o){const s=e[n*3],a=e[n*3+1],l=e[n*3+2],d=e[r*3],f=e[r*3+1],p=e[r*3+2],g=e[i*3],v=e[i*3+1],x=e[i*3+2],b=e[o*3],S=e[o*3+1],M=e[o*3+2];return Math.abs(a-f)<Math.abs(s-d)?[new $t(s,1-l),new $t(d,1-p),new $t(g,1-x),new $t(b,1-M)]:[new $t(a,1-l),new $t(f,1-p),new $t(v,1-x),new $t(S,1-M)]}};function Vyt(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const o=t[r];n.shapes.push(o.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class JO extends Dy{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,o,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new JO(e.radius,e.detail)}}class UE extends Dy{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new UE(e.radius,e.detail)}}class QO extends Lr{constructor(e=.5,n=1,r=32,i=1,o=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:o,thetaLength:s},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],d=[],f=[];let p=e;const g=(n-e)/i,v=new Oe,x=new $t;for(let b=0;b<=i;b++){for(let S=0;S<=r;S++){const M=o+S/r*s;v.x=p*Math.cos(M),v.y=p*Math.sin(M),l.push(v.x,v.y,v.z),d.push(0,0,1),x.x=(v.x/n+1)/2,x.y=(v.y/n+1)/2,f.push(x.x,x.y)}p+=g}for(let b=0;b<i;b++){const S=b*(r+1);for(let M=0;M<r;M++){const T=M+S,C=T,k=T+r+1,O=T+r+2,D=T+1;a.push(C,k,D),a.push(k,O,D)}}this.setIndex(a),this.setAttribute("position",new Qn(l,3)),this.setAttribute("normal",new Qn(d,3)),this.setAttribute("uv",new Qn(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new QO(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class eL extends Lr{constructor(e=new f0([new $t(0,.5),new $t(-.5,-.5),new $t(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],o=[],s=[];let a=0,l=0;if(Array.isArray(e)===!1)d(e);else for(let f=0;f<e.length;f++)d(e[f]),this.addGroup(a,l,f),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Qn(i,3)),this.setAttribute("normal",new Qn(o,3)),this.setAttribute("uv",new Qn(s,2));function d(f){const p=i.length/3,g=f.extractPoints(n);let v=g.shape;const x=g.holes;Of.isClockWise(v)===!1&&(v=v.reverse());for(let S=0,M=x.length;S<M;S++){const T=x[S];Of.isClockWise(T)===!0&&(x[S]=T.reverse())}const b=Of.triangulateShape(v,x);for(let S=0,M=x.length;S<M;S++){const T=x[S];v=v.concat(T)}for(let S=0,M=v.length;S<M;S++){const T=v[S];i.push(T.x,T.y,0),o.push(0,0,1),s.push(T.x,T.y)}for(let S=0,M=b.length;S<M;S++){const T=b[S],C=T[0]+p,k=T[1]+p,O=T[2]+p;r.push(C,k,O),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return Wyt(n,e)}static fromJSON(e,n){const r=[];for(let i=0,o=e.shapes.length;i<o;i++){const s=n[e.shapes[i]];r.push(s)}return new eL(r,e.curveSegments)}}function Wyt(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class V1 extends Lr{constructor(e=1,n=32,r=16,i=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:o,thetaStart:s,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(s+a,Math.PI);let d=0;const f=[],p=new Oe,g=new Oe,v=[],x=[],b=[],S=[];for(let M=0;M<=r;M++){const T=[],C=M/r;let k=0;M===0&&s===0?k=.5/n:M===r&&l===Math.PI&&(k=-.5/n);for(let O=0;O<=n;O++){const D=O/n;p.x=-e*Math.cos(i+D*o)*Math.sin(s+C*a),p.y=e*Math.cos(s+C*a),p.z=e*Math.sin(i+D*o)*Math.sin(s+C*a),x.push(p.x,p.y,p.z),g.copy(p).normalize(),b.push(g.x,g.y,g.z),S.push(D+k,1-C),T.push(d++)}f.push(T)}for(let M=0;M<r;M++)for(let T=0;T<n;T++){const C=f[M][T+1],k=f[M][T],O=f[M+1][T],D=f[M+1][T+1];(M!==0||s>0)&&v.push(C,k,D),(M!==r-1||l<Math.PI)&&v.push(k,O,D)}this.setIndex(v),this.setAttribute("position",new Qn(x,3)),this.setAttribute("normal",new Qn(b,3)),this.setAttribute("uv",new Qn(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new V1(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class tL extends Dy{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new tL(e.radius,e.detail)}}class nL extends Lr{constructor(e=1,n=.4,r=12,i=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:o},r=Math.floor(r),i=Math.floor(i);const s=[],a=[],l=[],d=[],f=new Oe,p=new Oe,g=new Oe;for(let v=0;v<=r;v++)for(let x=0;x<=i;x++){const b=x/i*o,S=v/r*Math.PI*2;p.x=(e+n*Math.cos(S))*Math.cos(b),p.y=(e+n*Math.cos(S))*Math.sin(b),p.z=n*Math.sin(S),a.push(p.x,p.y,p.z),f.x=e*Math.cos(b),f.y=e*Math.sin(b),g.subVectors(p,f).normalize(),l.push(g.x,g.y,g.z),d.push(x/i),d.push(v/r)}for(let v=1;v<=r;v++)for(let x=1;x<=i;x++){const b=(i+1)*v+x-1,S=(i+1)*(v-1)+x-1,M=(i+1)*(v-1)+x,T=(i+1)*v+x;s.push(b,S,T),s.push(S,M,T)}this.setIndex(s),this.setAttribute("position",new Qn(a,3)),this.setAttribute("normal",new Qn(l,3)),this.setAttribute("uv",new Qn(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nL(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class rL extends Lr{constructor(e=1,n=.4,r=64,i=8,o=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:o,q:s},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],d=[],f=[],p=new Oe,g=new Oe,v=new Oe,x=new Oe,b=new Oe,S=new Oe,M=new Oe;for(let C=0;C<=r;++C){const k=C/r*o*Math.PI*2;T(k,o,s,e,v),T(k+.01,o,s,e,x),S.subVectors(x,v),M.addVectors(x,v),b.crossVectors(S,M),M.crossVectors(b,S),b.normalize(),M.normalize();for(let O=0;O<=i;++O){const D=O/i*Math.PI*2,B=-n*Math.cos(D),U=n*Math.sin(D);p.x=v.x+(B*M.x+U*b.x),p.y=v.y+(B*M.y+U*b.y),p.z=v.z+(B*M.z+U*b.z),l.push(p.x,p.y,p.z),g.subVectors(p,v).normalize(),d.push(g.x,g.y,g.z),f.push(C/r),f.push(O/i)}}for(let C=1;C<=r;C++)for(let k=1;k<=i;k++){const O=(i+1)*(C-1)+(k-1),D=(i+1)*C+(k-1),B=(i+1)*C+k,U=(i+1)*(C-1)+k;a.push(O,D,U),a.push(D,B,U)}this.setIndex(a),this.setAttribute("position",new Qn(l,3)),this.setAttribute("normal",new Qn(d,3)),this.setAttribute("uv",new Qn(f,2));function T(C,k,O,D,B){const U=Math.cos(C),J=Math.sin(C),V=O/k*C,X=Math.cos(V);B.x=D*(2+X)*.5*U,B.y=D*(2+X)*J*.5,B.z=D*Math.sin(V)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rL(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class iL extends Lr{constructor(e=new c8(new Oe(-1,-1,0),new Oe(-1,1,0),new Oe(1,1,0)),n=64,r=1,i=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:o};const s=e.computeFrenetFrames(n,o);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const a=new Oe,l=new Oe,d=new $t;let f=new Oe;const p=[],g=[],v=[],x=[];b(),this.setIndex(x),this.setAttribute("position",new Qn(p,3)),this.setAttribute("normal",new Qn(g,3)),this.setAttribute("uv",new Qn(v,2));function b(){for(let C=0;C<n;C++)S(C);S(o===!1?n:0),T(),M()}function S(C){f=e.getPointAt(C/n,f);const k=s.normals[C],O=s.binormals[C];for(let D=0;D<=i;D++){const B=D/i*Math.PI*2,U=Math.sin(B),J=-Math.cos(B);l.x=J*k.x+U*O.x,l.y=J*k.y+U*O.y,l.z=J*k.z+U*O.z,l.normalize(),g.push(l.x,l.y,l.z),a.x=f.x+r*l.x,a.y=f.y+r*l.y,a.z=f.z+r*l.z,p.push(a.x,a.y,a.z)}}function M(){for(let C=1;C<=n;C++)for(let k=1;k<=i;k++){const O=(i+1)*(C-1)+(k-1),D=(i+1)*C+(k-1),B=(i+1)*C+k,U=(i+1)*(C-1)+k;x.push(O,D,U),x.push(D,B,U)}}function T(){for(let C=0;C<=n;C++)for(let k=0;k<=i;k++)d.x=C/n,d.y=k/i,v.push(d.x,d.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new iL(new nk[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class yde extends Lr{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new Oe,o=new Oe;if(e.index!==null){const s=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let d=0,f=l.length;d<f;++d){const p=l[d],g=p.start,v=p.count;for(let x=g,b=g+v;x<b;x+=3)for(let S=0;S<3;S++){const M=a.getX(x+S),T=a.getX(x+(S+1)%3);i.fromBufferAttribute(s,M),o.fromBufferAttribute(s,T),mZ(i,o,r)===!0&&(n.push(i.x,i.y,i.z),n.push(o.x,o.y,o.z))}}}else{const s=e.attributes.position;for(let a=0,l=s.count/3;a<l;a++)for(let d=0;d<3;d++){const f=3*a+d,p=3*a+(d+1)%3;i.fromBufferAttribute(s,f),o.fromBufferAttribute(s,p),mZ(i,o,r)===!0&&(n.push(i.x,i.y,i.z),n.push(o.x,o.y,o.z))}}this.setAttribute("position",new Qn(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function mZ(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var gZ=Object.freeze({__proto__:null,BoxGeometry:Ly,CapsuleGeometry:qO,CircleGeometry:YO,ConeGeometry:XO,CylinderGeometry:U1,DodecahedronGeometry:jE,EdgesGeometry:fde,ExtrudeGeometry:ZO,IcosahedronGeometry:JO,LatheGeometry:$E,OctahedronGeometry:UE,PlaneGeometry:$1,PolyhedronGeometry:Dy,RingGeometry:QO,ShapeGeometry:eL,SphereGeometry:V1,TetrahedronGeometry:tL,TorusGeometry:nL,TorusKnotGeometry:rL,TubeGeometry:iL,WireframeGeometry:yde});class vde extends $a{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Dn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class _de extends kh{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class d8 extends $a{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Dn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ky,this.normalScale=new $t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new _u,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xde extends d8{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new $t(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Yo(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Dn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Dn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Dn(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class bde extends $a{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Dn(16777215),this.specular=new Dn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ky,this.normalScale=new $t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new _u,this.combine=DE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class wde extends $a{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Dn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ky,this.normalScale=new $t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Sde extends $a{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ky,this.normalScale=new $t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Mde extends $a{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Dn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ky,this.normalScale=new $t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new _u,this.combine=DE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ede extends $a{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Dn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ky,this.normalScale=new $t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Tde extends Kl{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Qv(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function Cde(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ade(t){function e(i,o){return t[i]-t[o]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function U4(t,e,n){const r=t.length,i=new t.constructor(r);for(let o=0,s=0;s!==r;++o){const a=n[o]*e;for(let l=0;l!==e;++l)i[s++]=t[a+l]}return i}function h8(t,e,n,r){let i=1,o=t[0];for(;o!==void 0&&o[r]===void 0;)o=t[i++];if(o===void 0)return;let s=o[r];if(s!==void 0)if(Array.isArray(s))do s=o[r],s!==void 0&&(e.push(o.time),n.push.apply(n,s)),o=t[i++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[r],s!==void 0&&(e.push(o.time),s.toArray(n,n.length)),o=t[i++];while(o!==void 0);else do s=o[r],s!==void 0&&(e.push(o.time),n.push(s)),o=t[i++];while(o!==void 0)}function Hyt(t,e,n,r,i=30){const o=t.clone();o.name=e;const s=[];for(let l=0;l<o.tracks.length;++l){const d=o.tracks[l],f=d.getValueSize(),p=[],g=[];for(let v=0;v<d.times.length;++v){const x=d.times[v]*i;if(!(x<n||x>=r)){p.push(d.times[v]);for(let b=0;b<f;++b)g.push(d.values[v*f+b])}}p.length!==0&&(d.times=Qv(p,d.times.constructor),d.values=Qv(g,d.values.constructor),s.push(d))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o}function Gyt(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,o=e/r;for(let s=0;s<i;++s){const a=n.tracks[s],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const d=t.tracks.find(function(M){return M.name===a.name&&M.ValueTypeName===l});if(d===void 0)continue;let f=0;const p=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=p/3);let g=0;const v=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=v/3);const x=a.times.length-1;let b;if(o<=a.times[0]){const M=f,T=p-f;b=a.values.slice(M,T)}else if(o>=a.times[x]){const M=x*p+f,T=M+p-f;b=a.values.slice(M,T)}else{const M=a.createInterpolant(),T=f,C=p-f;M.evaluate(o),b=M.resultBuffer.slice(T,C)}l==="quaternion"&&new ua().fromArray(b).normalize().conjugate().toArray(b);const S=d.times.length;for(let M=0;M<S;++M){const T=M*v+g;if(l==="quaternion")ua.multiplyQuaternionsFlat(d.values,T,b,0,d.values,T);else{const C=v-g*2;for(let k=0;k<C;++k)d.values[T+k]-=b[k]}}}return t.blendMode=W6,t}const qyt={convertArray:Qv,isTypedArray:Cde,getKeyframeOrder:Ade,sortedArray:U4,flattenJSON:h8,subclip:Hyt,makeClipAdditive:Gyt};class VE{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],o=n[r-1];e:{t:{let s;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<o)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(o=i,i=n[++r],e<i)break t}s=n.length;break n}if(!(e>=o)){const a=n[1];e<a&&(r=2,o=a);for(let l=r-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=o,o=n[--r-1],e>=o)break t}s=r,r=0;break n}break e}for(;r<s;){const a=r+s>>>1;e<n[a]?s=a:r=a+1}if(i=n[r],o=n[r-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,i)}return this.interpolate_(r,o,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,o=e*i;for(let s=0;s!==i;++s)n[s]=r[o+s];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Pde extends VE{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Kv,endingEnd:Kv}}intervalChanged_(e,n,r){const i=this.parameterPositions;let o=e-2,s=e+1,a=i[o],l=i[s];if(a===void 0)switch(this.getSettings_().endingStart){case Zv:o=e,a=2*n-r;break;case MM:o=i.length-2,a=n+i[o]-i[o+1];break;default:o=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Zv:s=e,l=2*r-n;break;case MM:s=1,l=r+i[1]-i[0];break;default:s=e-1,l=n}const d=(r-n)*.5,f=this.valueSize;this._weightPrev=d/(n-a),this._weightNext=d/(l-r),this._offsetPrev=o*f,this._offsetNext=s*f}interpolate_(e,n,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,d=l-a,f=this._offsetPrev,p=this._offsetNext,g=this._weightPrev,v=this._weightNext,x=(r-n)/(i-n),b=x*x,S=b*x,M=-g*S+2*g*b-g*x,T=(1+g)*S+(-1.5-2*g)*b+(-.5+g)*x+1,C=(-1-v)*S+(1.5+v)*b+.5*x,k=v*S-v*b;for(let O=0;O!==a;++O)o[O]=M*s[f+O]+T*s[d+O]+C*s[l+O]+k*s[p+O];return o}}class f8 extends VE{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,d=l-a,f=(r-n)/(i-n),p=1-f;for(let g=0;g!==a;++g)o[g]=s[d+g]*p+s[l+g]*f;return o}}class Ide extends VE{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class zh{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Qv(n,this.TimeBufferType),this.values=Qv(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:Qv(e.times,Array),values:Qv(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new Ide(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new f8(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Pde(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case wM:n=this.InterpolantFactoryMethodDiscrete;break;case SM:n=this.InterpolantFactoryMethodLinear;break;case YA:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return wM;case this.InterpolantFactoryMethodLinear:return SM;case this.InterpolantFactoryMethodSmooth:return YA}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let o=0,s=i-1;for(;o!==i&&r[o]<e;)++o;for(;s!==-1&&r[s]>n;)--s;if(++s,o!==0||s!==i){o>=s&&(s=Math.max(s,1),o=s-1);const a=this.getValueSize();this.times=r.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),e=!1;break}s=l}if(i!==void 0&&Cde(i))for(let a=0,l=i.length;a!==l;++a){const d=i[a];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===YA,o=e.length-1;let s=1;for(let a=1;a<o;++a){let l=!1;const d=e[a],f=e[a+1];if(d!==f&&(a!==1||d!==e[0]))if(i)l=!0;else{const p=a*r,g=p-r,v=p+r;for(let x=0;x!==r;++x){const b=n[p+x];if(b!==n[g+x]||b!==n[v+x]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];const p=a*r,g=s*r;for(let v=0;v!==r;++v)n[g+v]=n[p+v]}++s}}if(o>0){e[s]=e[o];for(let a=o*r,l=s*r,d=0;d!==r;++d)n[l+d]=n[a+d];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=n.slice(0,s*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}zh.prototype.TimeBufferType=Float32Array;zh.prototype.ValueBufferType=Float32Array;zh.prototype.DefaultInterpolation=SM;class H0 extends zh{}H0.prototype.ValueTypeName="bool";H0.prototype.ValueBufferType=Array;H0.prototype.DefaultInterpolation=wM;H0.prototype.InterpolantFactoryMethodLinear=void 0;H0.prototype.InterpolantFactoryMethodSmooth=void 0;class p8 extends zh{}p8.prototype.ValueTypeName="color";class DM extends zh{}DM.prototype.ValueTypeName="number";class kde extends VE{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(r-n)/(i-n);let d=e*a;for(let f=d+a;d!==f;d+=4)ua.slerpFlat(o,0,s,d-a,s,d,l);return o}}class W1 extends zh{InterpolantFactoryMethodLinear(e){return new kde(this.times,this.values,this.getValueSize(),e)}}W1.prototype.ValueTypeName="quaternion";W1.prototype.DefaultInterpolation=SM;W1.prototype.InterpolantFactoryMethodSmooth=void 0;class G0 extends zh{}G0.prototype.ValueTypeName="string";G0.prototype.ValueBufferType=Array;G0.prototype.DefaultInterpolation=wM;G0.prototype.InterpolantFactoryMethodLinear=void 0;G0.prototype.InterpolantFactoryMethodSmooth=void 0;class NM extends zh{}NM.prototype.ValueTypeName="vector";class zM{constructor(e,n=-1,r,i=zO){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=du(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,a=r.length;s!==a;++s)n.push(Xyt(r[s]).scale(i));const o=new this(e.name,e.duration,n,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=r.length;o!==s;++o)n.push(zh.toJSON(r[o]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const o=n.length,s=[];for(let a=0;a<o;a++){let l=[],d=[];l.push((a+o-1)%o,a,(a+1)%o),d.push(0,1,0);const f=Ade(l);l=U4(l,1,f),d=U4(d,1,f),!i&&l[0]===0&&(l.push(o),d.push(d[0])),s.push(new DM(".morphTargetInfluences["+n[a].name+"]",l,d).scale(1/r))}return new this(e,-1,s)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const d=e[a],f=d.name.match(o);if(f&&f.length>1){const p=f[1];let g=i[p];g||(i[p]=g=[]),g.push(d)}}const s=[];for(const a in i)s.push(this.CreateFromMorphTargetSequence(a,i[a],n,r));return s}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(p,g,v,x,b){if(v.length!==0){const S=[],M=[];h8(v,S,M,x),S.length!==0&&b.push(new p(g,S,M))}},i=[],o=e.name||"default",s=e.fps||30,a=e.blendMode;let l=e.length||-1;const d=e.hierarchy||[];for(let p=0;p<d.length;p++){const g=d[p].keys;if(!(!g||g.length===0))if(g[0].morphTargets){const v={};let x;for(x=0;x<g.length;x++)if(g[x].morphTargets)for(let b=0;b<g[x].morphTargets.length;b++)v[g[x].morphTargets[b]]=-1;for(const b in v){const S=[],M=[];for(let T=0;T!==g[x].morphTargets.length;++T){const C=g[x];S.push(C.time),M.push(C.morphTarget===b?1:0)}i.push(new DM(".morphTargetInfluence["+b+"]",S,M))}l=v.length*s}else{const v=".bones["+n[p].name+"]";r(NM,v+".position",g,"pos",i),r(W1,v+".quaternion",g,"rot",i),r(NM,v+".scale",g,"scl",i)}}return i.length===0?null:new this(o,l,i,a)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const o=this.tracks[r];n=Math.max(n,o.times[o.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Yyt(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return DM;case"vector":case"vector2":case"vector3":case"vector4":return NM;case"color":return p8;case"quaternion":return W1;case"bool":case"boolean":return H0;case"string":return G0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function Xyt(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Yyt(t.type);if(t.times===void 0){const n=[],r=[];h8(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Kp={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class m8{constructor(e,n,r){const i=this;let o=!1,s=0,a=0,l;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(f){a++,o===!1&&i.onStart!==void 0&&i.onStart(f,s,a),o=!0},this.itemEnd=function(f){s++,i.onProgress!==void 0&&i.onProgress(f,s,a),s===a&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(f){i.onError!==void 0&&i.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,p){return d.push(f,p),this},this.removeHandler=function(f){const p=d.indexOf(f);return p!==-1&&d.splice(p,2),this},this.getHandler=function(f){for(let p=0,g=d.length;p<g;p+=2){const v=d[p],x=d[p+1];if(v.global&&(v.lastIndex=0),v.test(f))return x}return null}}}const Rde=new m8;class Pc{constructor(e){this.manager=e!==void 0?e:Rde,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,o){r.load(e,i,n,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Pc.DEFAULT_MATERIAL_NAME="__DEFAULT";const kp={};class Kyt extends Error{constructor(e,n){super(e),this.response=n}}class xm extends Pc{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=Kp.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(o),this.manager.itemEnd(e)},0),o;if(kp[e]!==void 0){kp[e].push({onLoad:n,onProgress:r,onError:i});return}kp[e]=[],kp[e].push({onLoad:n,onProgress:r,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(s).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const f=kp[e],p=d.body.getReader(),g=d.headers.get("Content-Length")||d.headers.get("X-File-Size"),v=g?parseInt(g):0,x=v!==0;let b=0;const S=new ReadableStream({start(M){T();function T(){p.read().then(({done:C,value:k})=>{if(C)M.close();else{b+=k.byteLength;const O=new ProgressEvent("progress",{lengthComputable:x,loaded:b,total:v});for(let D=0,B=f.length;D<B;D++){const U=f[D];U.onProgress&&U.onProgress(O)}M.enqueue(k),T()}})}}});return new Response(S)}else throw new Kyt(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(l){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return d.json();default:if(a===void 0)return d.text();{const p=/charset="?([^;"\s]*)"?/i.exec(a),g=p&&p[1]?p[1].toLowerCase():void 0,v=new TextDecoder(g);return d.arrayBuffer().then(x=>v.decode(x))}}}).then(d=>{Kp.add(e,d);const f=kp[e];delete kp[e];for(let p=0,g=f.length;p<g;p++){const v=f[p];v.onLoad&&v.onLoad(d)}}).catch(d=>{const f=kp[e];if(f===void 0)throw this.manager.itemError(e),d;delete kp[e];for(let p=0,g=f.length;p<g;p++){const v=f[p];v.onError&&v.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Zyt extends Pc{constructor(e){super(e)}load(e,n,r,i){const o=this,s=new xm(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{n(o.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=zM.parse(e[r]);n.push(i)}return n}}class Jyt extends Pc{constructor(e){super(e)}load(e,n,r,i){const o=this,s=[],a=new HO,l=new xm(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(o.withCredentials);let d=0;function f(p){l.load(e[p],function(g){const v=o.parse(g,!0);s[p]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},d+=1,d===6&&(v.mipmapCount===1&&(a.minFilter=Lo),a.image=s,a.format=v.format,a.needsUpdate=!0,n&&n(a))},r,i)}if(Array.isArray(e))for(let p=0,g=e.length;p<g;++p)f(p);else l.load(e,function(p){const g=o.parse(p,!0);if(g.isCubemap){const v=g.mipmaps.length/g.mipmapCount;for(let x=0;x<v;x++){s[x]={mipmaps:[]};for(let b=0;b<g.mipmapCount;b++)s[x].mipmaps.push(g.mipmaps[x*g.mipmapCount+b]),s[x].format=g.format,s[x].width=g.width,s[x].height=g.height}a.image=s}else a.image.width=g.width,a.image.height=g.height,a.mipmaps=g.mipmaps;g.mipmapCount===1&&(a.minFilter=Lo),a.format=g.format,a.needsUpdate=!0,n&&n(a)},r,i);return a}}class FM extends Pc{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=Kp.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){n&&n(s),o.manager.itemEnd(e)},0),s;const a=IM("img");function l(){f(),Kp.add(e,this),n&&n(this),o.manager.itemEnd(e)}function d(p){f(),i&&i(p),o.manager.itemError(e),o.manager.itemEnd(e)}function f(){a.removeEventListener("load",l,!1),a.removeEventListener("error",d,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}}class Qyt extends Pc{constructor(e){super(e)}load(e,n,r,i){const o=new FE;o.colorSpace=td;const s=new FM(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function l(d){s.load(e[d],function(f){o.images[d]=f,a++,a===6&&(o.needsUpdate=!0,n&&n(o))},void 0,i)}for(let d=0;d<e.length;++d)l(d);return o}}class evt extends Pc{constructor(e){super(e)}load(e,n,r,i){const o=this,s=new ly,a=new xm(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(o.withCredentials),a.load(e,function(l){let d;try{d=o.parse(l)}catch(f){if(i!==void 0)i(f);else{console.error(f);return}}d.image!==void 0?s.image=d.image:d.data!==void 0&&(s.image.width=d.width,s.image.height=d.height,s.image.data=d.data),s.wrapS=d.wrapS!==void 0?d.wrapS:fl,s.wrapT=d.wrapT!==void 0?d.wrapT:fl,s.magFilter=d.magFilter!==void 0?d.magFilter:Lo,s.minFilter=d.minFilter!==void 0?d.minFilter:Lo,s.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0&&(s.colorSpace=d.colorSpace),d.flipY!==void 0&&(s.flipY=d.flipY),d.format!==void 0&&(s.format=d.format),d.type!==void 0&&(s.type=d.type),d.mipmaps!==void 0&&(s.mipmaps=d.mipmaps,s.minFilter=bf),d.mipmapCount===1&&(s.minFilter=Lo),d.generateMipmaps!==void 0&&(s.generateMipmaps=d.generateMipmaps),s.needsUpdate=!0,n&&n(s,d)},r,i),s}}class tvt extends Pc{constructor(e){super(e)}load(e,n,r,i){const o=new Fo,s=new FM(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,n!==void 0&&n(o)},r,i),o}}class Ny extends vi{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Dn(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class Ode extends Ny{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(vi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Dn(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const ON=new mr,yZ=new Oe,vZ=new Oe;class g8{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new $t(512,512),this.map=null,this.mapPass=null,this.matrix=new mr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new BE,this._frameExtents=new $t(1,1),this._viewportCount=1,this._viewports=[new zi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;yZ.setFromMatrixPosition(e.matrixWorld),n.position.copy(yZ),vZ.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(vZ),n.updateMatrixWorld(),ON.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ON),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(ON)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class nvt extends g8{constructor(){super(new Xo(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=Zb*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=e.distance||n.far;(r!==n.fov||i!==n.aspect||o!==n.far)&&(n.fov=r,n.aspect=i,n.far=o,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Lde extends Ny{constructor(e,n,r=0,i=Math.PI/3,o=0,s=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(vi.DEFAULT_UP),this.updateMatrix(),this.target=new vi,this.distance=r,this.angle=i,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new nvt}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const _Z=new mr,rS=new Oe,LN=new Oe;class rvt extends g8{constructor(){super(new Xo(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new $t(4,2),this._viewportCount=6,this._viewports=[new zi(2,1,1,1),new zi(0,1,1,1),new zi(3,1,1,1),new zi(1,1,1,1),new zi(3,0,1,1),new zi(1,0,1,1)],this._cubeDirections=[new Oe(1,0,0),new Oe(-1,0,0),new Oe(0,0,1),new Oe(0,0,-1),new Oe(0,1,0),new Oe(0,-1,0)],this._cubeUps=[new Oe(0,1,0),new Oe(0,1,0),new Oe(0,1,0),new Oe(0,1,0),new Oe(0,0,1),new Oe(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,o=e.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),rS.setFromMatrixPosition(e.matrixWorld),r.position.copy(rS),LN.copy(r.position),LN.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(LN),r.updateMatrixWorld(),i.makeTranslation(-rS.x,-rS.y,-rS.z),_Z.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_Z)}}class Dde extends Ny{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new rvt}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class ivt extends g8{constructor(){super(new Xp(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Nde extends Ny{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(vi.DEFAULT_UP),this.updateMatrix(),this.target=new vi,this.shadow=new ivt}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class zde extends Ny{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class Fde extends Ny{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class Bde{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Oe)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,o=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.282095),n.addScaledVector(s[1],.488603*i),n.addScaledVector(s[2],.488603*o),n.addScaledVector(s[3],.488603*r),n.addScaledVector(s[4],1.092548*(r*i)),n.addScaledVector(s[5],1.092548*(i*o)),n.addScaledVector(s[6],.315392*(3*o*o-1)),n.addScaledVector(s[7],1.092548*(r*o)),n.addScaledVector(s[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,o=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.886227),n.addScaledVector(s[1],2*.511664*i),n.addScaledVector(s[2],2*.511664*o),n.addScaledVector(s[3],2*.511664*r),n.addScaledVector(s[4],2*.429043*r*i),n.addScaledVector(s[5],2*.429043*i*o),n.addScaledVector(s[6],.743125*o*o-.247708),n.addScaledVector(s[7],2*.429043*r*o),n.addScaledVector(s[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,o=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*o,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*o,n[6]=.315392*(3*o*o-1),n[7]=1.092548*r*o,n[8]=.546274*(r*r-i*i)}}class $de extends Ny{constructor(e=new Bde,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class oL extends Pc{constructor(e){super(e),this.textures={}}load(e,n,r,i){const o=this,s=new xm(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{n(o.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(o){return n[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),n[o]}const i=oL.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Dn().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const s=e.uniforms[o];switch(i.uniforms[o]={},s.type){case"t":i.uniforms[o].value=r(s.value);break;case"c":i.uniforms[o].value=new Dn().setHex(s.value);break;case"v2":i.uniforms[o].value=new $t().fromArray(s.value);break;case"v3":i.uniforms[o].value=new Oe().fromArray(s.value);break;case"v4":i.uniforms[o].value=new zi().fromArray(s.value);break;case"m3":i.uniforms[o].value=new Ir().fromArray(s.value);break;case"m4":i.uniforms[o].value=new mr().fromArray(s.value);break;default:i.uniforms[o].value=s.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const o in e.extensions)i.extensions[o]=e.extensions[o];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),i.normalScale=new $t().fromArray(o)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new $t().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:vde,SpriteMaterial:n8,RawShaderMaterial:_de,ShaderMaterial:kh,PointsMaterial:i8,MeshPhysicalMaterial:xde,MeshStandardMaterial:d8,MeshPhongMaterial:bde,MeshToonMaterial:wde,MeshNormalMaterial:Sde,MeshLambertMaterial:Mde,MeshDepthMaterial:Q6,MeshDistanceMaterial:e8,MeshBasicMaterial:Oy,MeshMatcapMaterial:Ede,LineDashedMaterial:Tde,LineBasicMaterial:Kl,Material:$a};return new n[e]}}class V4{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class jde extends Lr{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Ude extends Pc{constructor(e){super(e)}load(e,n,r,i){const o=this,s=new xm(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{n(o.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(v,x){if(n[x]!==void 0)return n[x];const S=v.interleavedBuffers[x],M=o(v,S.buffer),T=Lx(S.type,M),C=new VO(T,S.stride);return C.uuid=S.uuid,n[x]=C,C}function o(v,x){if(r[x]!==void 0)return r[x];const S=v.arrayBuffers[x],M=new Uint32Array(S).buffer;return r[x]=M,M}const s=e.isInstancedBufferGeometry?new jde:new Lr,a=e.data.index;if(a!==void 0){const v=Lx(a.type,a.array);s.setIndex(new Xi(v,1))}const l=e.data.attributes;for(const v in l){const x=l[v];let b;if(x.isInterleavedBufferAttribute){const S=i(e.data,x.data);b=new k0(S,x.itemSize,x.offset,x.normalized)}else{const S=Lx(x.type,x.array),M=x.isInstancedBufferAttribute?Qb:Xi;b=new M(S,x.itemSize,x.normalized)}x.name!==void 0&&(b.name=x.name),x.usage!==void 0&&b.setUsage(x.usage),s.setAttribute(v,b)}const d=e.data.morphAttributes;if(d)for(const v in d){const x=d[v],b=[];for(let S=0,M=x.length;S<M;S++){const T=x[S];let C;if(T.isInterleavedBufferAttribute){const k=i(e.data,T.data);C=new k0(k,T.itemSize,T.offset,T.normalized)}else{const k=Lx(T.type,T.array);C=new Xi(k,T.itemSize,T.normalized)}T.name!==void 0&&(C.name=T.name),b.push(C)}s.morphAttributes[v]=b}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let v=0,x=p.length;v!==x;++v){const b=p[v];s.addGroup(b.start,b.count,b.materialIndex)}const g=e.data.boundingSphere;if(g!==void 0){const v=new Oe;g.center!==void 0&&v.fromArray(g.center),s.boundingSphere=new _l(v,g.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class ovt extends Pc{constructor(e){super(e)}load(e,n,r,i){const o=this,s=this.path===""?V4.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const a=new xm(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let d=null;try{d=JSON.parse(l)}catch(p){i!==void 0&&i(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const f=d.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(d,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?V4.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const o=new xm(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const s=await o.loadAsync(e,n),a=JSON.parse(s),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,i),s=this.parseImages(e.images,function(){n!==void 0&&n(d)}),a=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,a),d=this.parseObject(e.object,o,l,a,r),f=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,f),n!==void 0){let p=!1;for(const g in s)if(s[g].data instanceof HTMLImageElement){p=!0;break}p===!1&&n(d)}return d}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,o),a=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,i,a,s,n),d=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,d),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const o=new f0().fromJSON(e[r]);n[o.uuid]=o}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(o){o.isBone&&(i[o.uuid]=o)}),e!==void 0)for(let o=0,s=e.length;o<s;o++){const a=new WO().fromJSON(e[o],i);r[a.uuid]=a}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new Ude;for(let o=0,s=e.length;o<s;o++){let a;const l=e[o];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in gZ?a=gZ[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const o=new oL;o.setTextures(n);for(let s=0,a=e.length;s<a;s++){const l=e[s];r[l.uuid]===void 0&&(r[l.uuid]=o.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],o=zM.parse(i);n[o.uuid]=o}return n}parseImages(e,n){const r=this,i={};let o;function s(l){return r.manager.itemStart(l),o.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const d=l,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:r.resourcePath+d;return s(f)}else return l.data?{data:Lx(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new m8(n);o=new FM(l),o.setCrossOrigin(this.crossOrigin);for(let d=0,f=e.length;d<f;d++){const p=e[d],g=p.url;if(Array.isArray(g)){const v=[];for(let x=0,b=g.length;x<b;x++){const S=g[x],M=a(S);M!==null&&(M instanceof HTMLImageElement?v.push(M):v.push(new ly(M.data,M.width,M.height)))}i[p.uuid]=new Jv(v)}else{const v=a(p.url);i[p.uuid]=new Jv(v)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function o(s){if(typeof s=="string"){const a=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await i.loadAsync(l)}else return s.data?{data:Lx(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){i=new FM(this.manager),i.setCrossOrigin(this.crossOrigin);for(let s=0,a=e.length;s<a;s++){const l=e[s],d=l.url;if(Array.isArray(d)){const f=[];for(let p=0,g=d.length;p<g;p++){const v=d[p],x=await o(v);x!==null&&(x instanceof HTMLImageElement?f.push(x):f.push(new ly(x.data,x.width,x.height)))}r[l.uuid]=new Jv(f)}else{const f=await o(l.url);r[l.uuid]=new Jv(f)}}}return r}parseTextures(e,n){function r(o,s){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),s[o])}const i={};if(e!==void 0)for(let o=0,s=e.length;o<s;o++){const a=e[o];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],d=l.data;let f;Array.isArray(d)?(f=new FE,d.length===6&&(f.needsUpdate=!0)):(d&&d.data?f=new ly:f=new Fo,d&&(f.needsUpdate=!0)),f.source=l,f.uuid=a.uuid,a.name!==void 0&&(f.name=a.name),a.mapping!==void 0&&(f.mapping=r(a.mapping,svt)),a.channel!==void 0&&(f.channel=a.channel),a.offset!==void 0&&f.offset.fromArray(a.offset),a.repeat!==void 0&&f.repeat.fromArray(a.repeat),a.center!==void 0&&f.center.fromArray(a.center),a.rotation!==void 0&&(f.rotation=a.rotation),a.wrap!==void 0&&(f.wrapS=r(a.wrap[0],xZ),f.wrapT=r(a.wrap[1],xZ)),a.format!==void 0&&(f.format=a.format),a.internalFormat!==void 0&&(f.internalFormat=a.internalFormat),a.type!==void 0&&(f.type=a.type),a.colorSpace!==void 0&&(f.colorSpace=a.colorSpace),a.minFilter!==void 0&&(f.minFilter=r(a.minFilter,bZ)),a.magFilter!==void 0&&(f.magFilter=r(a.magFilter,bZ)),a.anisotropy!==void 0&&(f.anisotropy=a.anisotropy),a.flipY!==void 0&&(f.flipY=a.flipY),a.generateMipmaps!==void 0&&(f.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(f.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(f.compareFunction=a.compareFunction),a.userData!==void 0&&(f.userData=a.userData),i[a.uuid]=f}return i}parseObject(e,n,r,i,o){let s;function a(g){return n[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",g),n[g]}function l(g){if(g!==void 0){if(Array.isArray(g)){const v=[];for(let x=0,b=g.length;x<b;x++){const S=g[x];r[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",S),v.push(r[S])}return v}return r[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),r[g]}}function d(g){return i[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",g),i[g]}let f,p;switch(e.type){case"Scene":s=new tk,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new Dn(e.background):s.background=d(e.background)),e.environment!==void 0&&(s.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new UO(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new jO(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new Xo(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Xp(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new zde(e.color,e.intensity);break;case"DirectionalLight":s=new Nde(e.color,e.intensity);break;case"PointLight":s=new Dde(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new Fde(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new Lde(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new Ode(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new $de().fromJSON(e);break;case"SkinnedMesh":f=a(e.geometry),p=l(e.material),s=new rde(f,p),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":f=a(e.geometry),p=l(e.material),s=new Cs(f,p);break;case"InstancedMesh":f=a(e.geometry),p=l(e.material);const g=e.count,v=e.instanceMatrix,x=e.instanceColor;s=new ide(f,p,g),s.instanceMatrix=new Qb(new Float32Array(v.array),16),x!==void 0&&(s.instanceColor=new Qb(new Float32Array(x.array),x.itemSize));break;case"BatchedMesh":f=a(e.geometry),p=l(e.material),s=new ode(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,p),s.geometry=f,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._visibility=e.visibility,s._active=e.active,s._bounds=e.bounds.map(b=>{const S=new Hl;S.min.fromArray(b.boxMin),S.max.fromArray(b.boxMax);const M=new _l;return M.radius=b.sphereRadius,M.center.fromArray(b.sphereCenter),{boxInitialized:b.boxInitialized,box:S,sphereInitialized:b.sphereInitialized,sphere:M}}),s._maxGeometryCount=e.maxGeometryCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._geometryCount=e.geometryCount,s._matricesTexture=d(e.matricesTexture.uuid);break;case"LOD":s=new nde;break;case"Line":s=new vy(a(e.geometry),l(e.material));break;case"LineLoop":s=new sde(a(e.geometry),l(e.material));break;case"LineSegments":s=new qf(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new ade(a(e.geometry),l(e.material));break;case"Sprite":s=new tde(l(e.material));break;case"Group":s=new zx;break;case"Bone":s=new r8;break;default:s=new vi}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const g=e.children;for(let v=0;v<g.length;v++)s.add(this.parseObject(g[v],n,r,i,o))}if(e.animations!==void 0){const g=e.animations;for(let v=0;v<g.length;v++){const x=g[v];s.animations.push(o[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const g=e.levels;for(let v=0;v<g.length;v++){const x=g[v],b=s.getObjectByProperty("uuid",x.object);b!==void 0&&s.addLevel(b,x.distance,x.hysteresis)}}return s}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const svt={UVMapping:DO,CubeReflectionMapping:_m,CubeRefractionMapping:yy,EquirectangularReflectionMapping:vM,EquirectangularRefractionMapping:_M,CubeUVReflectionMapping:B1},xZ={RepeatWrapping:xM,ClampToEdgeWrapping:fl,MirroredRepeatWrapping:bM},bZ={NearestFilter:cs,NearestMipmapNearestFilter:JI,NearestMipmapLinearFilter:Dv,LinearFilter:Lo,LinearMipmapNearestFilter:HS,LinearMipmapLinearFilter:bf};class avt extends Pc{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=Kp.get(e);if(s!==void 0){if(o.manager.itemStart(e),s.then){s.then(d=>{n&&n(d),o.manager.itemEnd(e)}).catch(d=>{i&&i(d)});return}return setTimeout(function(){n&&n(s),o.manager.itemEnd(e)},0),s}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(d){return Kp.add(e,d),n&&n(d),o.manager.itemEnd(e),d}).catch(function(d){i&&i(d),Kp.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});Kp.add(e,l),o.manager.itemStart(e)}}let tA;class y8{static getContext(){return tA===void 0&&(tA=new(window.AudioContext||window.webkitAudioContext)),tA}static setContext(e){tA=e}}class lvt extends Pc{constructor(e){super(e)}load(e,n,r,i){const o=this,s=new xm(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{const d=l.slice(0);y8.getContext().decodeAudioData(d,function(p){n(p)}).catch(a)}catch(d){a(d)}},r,i);function a(l){i?i(l):console.error(l),o.manager.itemError(e)}}}const wZ=new mr,SZ=new mr,gv=new mr;class cvt{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Xo,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Xo,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,gv.copy(e.projectionMatrix);const i=n.eyeSep/2,o=i*n.near/n.focus,s=n.near*Math.tan(d0*n.fov*.5)/n.zoom;let a,l;SZ.elements[12]=-i,wZ.elements[12]=i,a=-s*n.aspect+o,l=s*n.aspect+o,gv.elements[0]=2*n.near/(l-a),gv.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(gv),a=-s*n.aspect-o,l=s*n.aspect-o,gv.elements[0]=2*n.near/(l-a),gv.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(gv)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(SZ),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(wZ)}}class v8{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=MZ(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=MZ();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function MZ(){return(typeof performance>"u"?Date:performance).now()}const yv=new Oe,EZ=new ua,uvt=new Oe,vv=new Oe;class dvt extends vi{constructor(){super(),this.type="AudioListener",this.context=y8.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new v8}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(yv,EZ,uvt),vv.set(0,0,-1).applyQuaternion(EZ),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(yv.x,i),n.positionY.linearRampToValueAtTime(yv.y,i),n.positionZ.linearRampToValueAtTime(yv.z,i),n.forwardX.linearRampToValueAtTime(vv.x,i),n.forwardY.linearRampToValueAtTime(vv.y,i),n.forwardZ.linearRampToValueAtTime(vv.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(yv.x,yv.y,yv.z),n.setOrientation(vv.x,vv.y,vv.z,r.x,r.y,r.z)}}let Vde=class extends vi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}};const _v=new Oe,TZ=new ua,hvt=new Oe,xv=new Oe;class fvt extends Vde{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_v,TZ,hvt),xv.set(0,0,1).applyQuaternion(TZ);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(_v.x,r),n.positionY.linearRampToValueAtTime(_v.y,r),n.positionZ.linearRampToValueAtTime(_v.z,r),n.orientationX.linearRampToValueAtTime(xv.x,r),n.orientationY.linearRampToValueAtTime(xv.y,r),n.orientationZ.linearRampToValueAtTime(xv.z,r)}else n.setPosition(_v.x,_v.y,_v.z),n.setOrientation(xv.x,xv.y,xv.z)}}class pvt{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class Wde{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,o,s;switch(n){case"quaternion":i=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,o=e*i+i;let s=this.cumulativeWeight;if(s===0){for(let a=0;a!==i;++a)r[o+a]=r[a];s=n}else{s+=n;const a=n/s;this._mixBufferRegion(r,o,0,a,i)}this.cumulativeWeight=s}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-o,n)}s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,d=n+n;l!==d;++l)if(r[l]!==r[l+n]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let o=r,s=i;o!==s;++o)n[o]=n[i+o%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,o){if(i>=.5)for(let s=0;s!==o;++s)e[n+s]=e[r+s]}_slerp(e,n,r,i){ua.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,o){const s=this._workIndex*o;ua.multiplyQuaternionsFlat(e,s,e,n,e,r),ua.slerpFlat(e,n,e,n,e,s,i)}_lerp(e,n,r,i,o){const s=1-i;for(let a=0;a!==o;++a){const l=n+a;e[l]=e[l]*s+e[r+a]*i}}_lerpAdditive(e,n,r,i,o){for(let s=0;s!==o;++s){const a=n+s;e[a]=e[a]+e[r+s]*i}}}const _8="\\[\\]\\.:\\/",mvt=new RegExp("["+_8+"]","g"),x8="[^"+_8+"]",gvt="[^"+_8.replace("\\.","")+"]",yvt=/((?:WC+[\/:])*)/.source.replace("WC",x8),vvt=/(WCOD+)?/.source.replace("WCOD",gvt),_vt=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",x8),xvt=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",x8),bvt=new RegExp("^"+yvt+vvt+_vt+xvt+"$"),wvt=["material","materials","bones","map"];class Svt{constructor(e,n,r){const i=r||di.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=r.length;i!==o;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class di{constructor(e,n,r){this.path=n,this.parsedPath=r||di.parseTrackName(n),this.node=di.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new di.Composite(e,n,r):new di(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(mvt,"")}static parseTrackName(e){const n=bvt.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const o=r.nodeName.substring(i+1);wvt.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(o){for(let s=0;s<o.length;s++){const a=o[s];if(a.name===n||a.uuid===n)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let o=n.propertyIndex;if(e||(e=di.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let d=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===d){d=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const s=e[i];if(s===void 0){const d=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(o!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=o}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}di.Composite=Svt;di.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};di.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};di.prototype.GetterByBindingType=[di.prototype._getValue_direct,di.prototype._getValue_array,di.prototype._getValue_arrayElement,di.prototype._getValue_toArray];di.prototype.SetterByBindingTypeAndVersioning=[[di.prototype._setValue_direct,di.prototype._setValue_direct_setNeedsUpdate,di.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[di.prototype._setValue_array,di.prototype._setValue_array_setNeedsUpdate,di.prototype._setValue_array_setMatrixWorldNeedsUpdate],[di.prototype._setValue_arrayElement,di.prototype._setValue_arrayElement_setNeedsUpdate,di.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[di.prototype._setValue_fromArray,di.prototype._setValue_fromArray_setNeedsUpdate,di.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Mvt{constructor(){this.isAnimationObjectGroup=!0,this.uuid=du(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,o=this._bindings,s=o.length;let a,l=e.length,d=this.nCachedObjects_;for(let f=0,p=arguments.length;f!==p;++f){const g=arguments[f],v=g.uuid;let x=n[v];if(x===void 0){x=l++,n[v]=x,e.push(g);for(let b=0,S=s;b!==S;++b)o[b].push(new di(g,r[b],i[b]))}else if(x<d){a=e[x];const b=--d,S=e[b];n[S.uuid]=x,e[x]=S,n[v]=b,e[b]=g;for(let M=0,T=s;M!==T;++M){const C=o[M],k=C[b];let O=C[x];C[x]=k,O===void 0&&(O=new di(g,r[M],i[M])),C[b]=O}}else e[x]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let o=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){const l=arguments[s],d=l.uuid,f=n[d];if(f!==void 0&&f>=o){const p=o++,g=e[p];n[g.uuid]=f,e[f]=g,n[d]=p,e[p]=l;for(let v=0,x=i;v!==x;++v){const b=r[v],S=b[p],M=b[f];b[f]=S,b[p]=M}}}this.nCachedObjects_=o}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let o=this.nCachedObjects_,s=e.length;for(let a=0,l=arguments.length;a!==l;++a){const d=arguments[a],f=d.uuid,p=n[f];if(p!==void 0)if(delete n[f],p<o){const g=--o,v=e[g],x=--s,b=e[x];n[v.uuid]=p,e[p]=v,n[b.uuid]=g,e[g]=b,e.pop();for(let S=0,M=i;S!==M;++S){const T=r[S],C=T[g],k=T[x];T[p]=C,T[g]=k,T.pop()}}else{const g=--s,v=e[g];g>0&&(n[v.uuid]=p),e[p]=v,e.pop();for(let x=0,b=i;x!==b;++x){const S=r[x];S[p]=S[g],S.pop()}}}this.nCachedObjects_=o}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const o=this._bindings;if(i!==void 0)return o[i];const s=this._paths,a=this._parsedPaths,l=this._objects,d=l.length,f=this.nCachedObjects_,p=new Array(d);i=o.length,r[e]=i,s.push(e),a.push(n),o.push(p);for(let g=f,v=l.length;g!==v;++g){const x=l[g];p[g]=new di(x,e,n)}return p}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,o=this._parsedPaths,s=this._bindings,a=s.length-1,l=s[a],d=e[a];n[d]=r,s[r]=l,s.pop(),o[r]=o[a],o.pop(),i[r]=i[a],i.pop()}}}class Hde{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const o=n.tracks,s=o.length,a=new Array(s),l={endingStart:Kv,endingEnd:Kv};for(let d=0;d!==s;++d){const f=o[d].createInterpolant(null);a[d]=f,f.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Sue,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,o=e._clip.duration,s=o/i,a=i/o;e.warp(1,s,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,o=i.time,s=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,d=a.sampleValues;return l[0]=o,l[1]=o+r,d[0]=e/s,d[1]=n/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const l=(e-o)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const s=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case W6:for(let f=0,p=l.length;f!==p;++f)l[f].evaluate(s),d[f].accumulateAdditive(a);break;case zO:default:for(let f=0,p=l.length;f!==p;++f)l[f].evaluate(s),d[f].accumulate(i,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,o=this._loopCount;const s=r===Mue;if(e===0)return o===-1?i:s&&(o&1)===1?n-i:i;if(r===wue){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=n||i<0){const a=Math.floor(i/n);i-=n*a,o+=Math.abs(a);const l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const d=e<0;this._setEndings(d,!d,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(s&&(o&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=Zv,i.endingEnd=Zv):(e?i.endingStart=this.zeroSlopeAtStart?Zv:Kv:i.endingStart=MM,n?i.endingEnd=this.zeroSlopeAtEnd?Zv:Kv:i.endingEnd=MM)}_scheduleFading(e,n,r){const i=this._mixer,o=i.time;let s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=o,l[0]=n,a[1]=o+e,l[1]=r,this}}const Evt=new Float32Array(1);class Tvt extends Dh{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,o=i.length,s=e._propertyBindings,a=e._interpolants,l=r.uuid,d=this._bindingsByRootAndName;let f=d[l];f===void 0&&(f={},d[l]=f);for(let p=0;p!==o;++p){const g=i[p],v=g.name;let x=f[v];if(x!==void 0)++x.referenceCount,s[p]=x;else{if(x=s[p],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,l,v));continue}const b=n&&n._propertyBindings[p].binding.parsedPath;x=new Wde(di.create(r,v,b),g.ValueTypeName,g.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,l,v),s[p]=x}a[p].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,o=this._actionsByClip[i];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,o=this._actionsByClip;let s=o[n];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[n]=s;else{const a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const o=e._clip.uuid,s=this._actionsByClip,a=s[o],l=a.knownActions,d=l[l.length-1],f=e._byClipCacheIndex;d._byClipCacheIndex=f,l[f]=d,l.pop(),e._byClipCacheIndex=null;const p=a.actionByRoot,g=(e._localRoot||this._root).uuid;delete p[g],l.length===0&&delete s[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,o=this._bindings;let s=i[n];s===void 0&&(s={},i[n]=s),s[r]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,o=r.path,s=this._bindingsByRootAndName,a=s[i],l=n[n.length-1],d=e._cacheIndex;l._cacheIndex=d,n[d]=l,n.pop(),delete a[o],Object.keys(a).length===0&&delete s[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new f8(new Float32Array(2),new Float32Array(2),1,Evt),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,o=n[i];e.__cacheIndex=i,n[i]=e,o.__cacheIndex=r,n[r]=o}clipAction(e,n,r){const i=n||this._root,o=i.uuid;let s=typeof e=="string"?zM.findByName(i,e):e;const a=s!==null?s.uuid:e,l=this._actionsByClip[a];let d=null;if(r===void 0&&(s!==null?r=s.blendMode:r=zO),l!==void 0){const p=l.actionByRoot[o];if(p!==void 0&&p.blendMode===r)return p;d=l.knownActions[0],s===null&&(s=d._clip)}if(s===null)return null;const f=new Hde(this,s,n,r);return this._bindAction(f,d),this._addInactiveAction(f,a,o),f}existingAction(e,n){const r=n||this._root,i=r.uuid,o=typeof e=="string"?zM.findByName(r,e):e,s=o?o.uuid:e,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,o=Math.sign(e),s=this._accuIndex^=1;for(let d=0;d!==r;++d)n[d]._update(i,e,o,s);const a=this._bindings,l=this._nActiveBindings;for(let d=0;d!==l;++d)a[d].apply(s);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,o=i[r];if(o!==void 0){const s=o.knownActions;for(let a=0,l=s.length;a!==l;++a){const d=s[a];this._deactivateAction(d);const f=d._cacheIndex,p=n[n.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,p._cacheIndex=f,n[f]=p,n.pop(),this._removeInactiveBindingsForAction(d)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const s in r){const a=r[s].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,o=i[n];if(o!==void 0)for(const s in o){const a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class b8{constructor(e){this.value=e}clone(){return new b8(this.value.clone===void 0?this.value:this.value.clone())}}let Cvt=0;class Avt extends Dh{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Cvt++}),this.name="",this.usage=AM,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++){const o=Array.isArray(n[r])?n[r]:[n[r]];for(let s=0;s<o.length;s++)this.uniforms.push(o[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class Pvt extends VO{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class Ivt{constructor(e,n,r,i,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const CZ=new mr;class Gde{constructor(e,n,r=0,i=1/0){this.ray=new Ry(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new h0,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return CZ.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(CZ),this}intersectObject(e,n=!0,r=[]){return W4(e,this,r,n),r.sort(AZ),r}intersectObjects(e,n=!0,r=[]){for(let i=0,o=e.length;i<o;i++)W4(e[i],this,r,n);return r.sort(AZ),r}}function AZ(t,e){return t.distance-e.distance}function W4(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let o=0,s=i.length;o<s;o++)W4(i[o],e,n,!0)}}class BM{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Yo(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class kvt{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const PZ=new $t;class Rvt{constructor(e=new $t(1/0,1/0),n=new $t(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=PZ.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,PZ).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const IZ=new Oe,nA=new Oe;class Ovt{constructor(e=new Oe,n=new Oe){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){IZ.subVectors(e,this.start),nA.subVectors(this.end,this.start);const r=nA.dot(nA);let o=nA.dot(IZ)/r;return n&&(o=Yo(o,0,1)),o}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const kZ=new Oe;class Lvt extends vi{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new Lr,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,l=32;s<l;s++,a++){const d=s/l*Math.PI*2,f=a/l*Math.PI*2;i.push(Math.cos(d),Math.sin(d),1,Math.cos(f),Math.sin(f),1)}r.setAttribute("position",new Qn(i,3));const o=new Kl({fog:!1,toneMapped:!1});this.cone=new qf(r,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),kZ.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(kZ),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Tg=new Oe,rA=new mr,DN=new mr;class Dvt extends qf{constructor(e){const n=qde(e),r=new Lr,i=[],o=[],s=new Dn(0,0,1),a=new Dn(0,1,0);for(let d=0;d<n.length;d++){const f=n[d];f.parent&&f.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),o.push(s.r,s.g,s.b),o.push(a.r,a.g,a.b))}r.setAttribute("position",new Qn(i,3)),r.setAttribute("color",new Qn(o,3));const l=new Kl({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");DN.copy(this.root.matrixWorld).invert();for(let o=0,s=0;o<n.length;o++){const a=n[o];a.parent&&a.parent.isBone&&(rA.multiplyMatrices(DN,a.matrixWorld),Tg.setFromMatrixPosition(rA),i.setXYZ(s,Tg.x,Tg.y,Tg.z),rA.multiplyMatrices(DN,a.parent.matrixWorld),Tg.setFromMatrixPosition(rA),i.setXYZ(s+1,Tg.x,Tg.y,Tg.z),s+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function qde(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,qde(t.children[n]));return e}class Nvt extends Cs{constructor(e,n,r){const i=new V1(n,4,2),o=new Oy({wireframe:!0,fog:!1,toneMapped:!1});super(i,o),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const zvt=new Oe,RZ=new Dn,OZ=new Dn;class Fvt extends vi{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new UE(n);i.rotateY(Math.PI*.5),this.material=new Oy({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=i.getAttribute("position"),s=new Float32Array(o.count*3);i.setAttribute("color",new Xi(s,3)),this.add(new Cs(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");RZ.copy(this.light.color),OZ.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const o=r<i/2?RZ:OZ;n.setXYZ(r,o.r,o.g,o.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(zvt.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Bvt extends qf{constructor(e=10,n=10,r=4473924,i=8947848){r=new Dn(r),i=new Dn(i);const o=n/2,s=e/n,a=e/2,l=[],d=[];for(let g=0,v=0,x=-a;g<=n;g++,x+=s){l.push(-a,0,x,a,0,x),l.push(x,0,-a,x,0,a);const b=g===o?r:i;b.toArray(d,v),v+=3,b.toArray(d,v),v+=3,b.toArray(d,v),v+=3,b.toArray(d,v),v+=3}const f=new Lr;f.setAttribute("position",new Qn(l,3)),f.setAttribute("color",new Qn(d,3));const p=new Kl({vertexColors:!0,toneMapped:!1});super(f,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class $vt extends qf{constructor(e=10,n=16,r=8,i=64,o=4473924,s=8947848){o=new Dn(o),s=new Dn(s);const a=[],l=[];if(n>1)for(let p=0;p<n;p++){const g=p/n*(Math.PI*2),v=Math.sin(g)*e,x=Math.cos(g)*e;a.push(0,0,0),a.push(v,0,x);const b=p&1?o:s;l.push(b.r,b.g,b.b),l.push(b.r,b.g,b.b)}for(let p=0;p<r;p++){const g=p&1?o:s,v=e-e/r*p;for(let x=0;x<i;x++){let b=x/i*(Math.PI*2),S=Math.sin(b)*v,M=Math.cos(b)*v;a.push(S,0,M),l.push(g.r,g.g,g.b),b=(x+1)/i*(Math.PI*2),S=Math.sin(b)*v,M=Math.cos(b)*v,a.push(S,0,M),l.push(g.r,g.g,g.b)}}const d=new Lr;d.setAttribute("position",new Qn(a,3)),d.setAttribute("color",new Qn(l,3));const f=new Kl({vertexColors:!0,toneMapped:!1});super(d,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const LZ=new Oe,iA=new Oe,DZ=new Oe;class jvt extends vi{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new Lr;i.setAttribute("position",new Qn([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const o=new Kl({fog:!1,toneMapped:!1});this.lightPlane=new vy(i,o),this.add(this.lightPlane),i=new Lr,i.setAttribute("position",new Qn([0,0,0,0,0,1],3)),this.targetLine=new vy(i,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),LZ.setFromMatrixPosition(this.light.matrixWorld),iA.setFromMatrixPosition(this.light.target.matrixWorld),DZ.subVectors(iA,LZ),this.lightPlane.lookAt(iA),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(iA),this.targetLine.scale.z=DZ.length()}}const oA=new Oe,Wo=new zE;class Uvt extends qf{constructor(e){const n=new Lr,r=new Kl({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],o=[],s={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(x,b){l(x),l(b)}function l(x){i.push(0,0,0),o.push(0,0,0),s[x]===void 0&&(s[x]=[]),s[x].push(i.length/3-1)}n.setAttribute("position",new Qn(i,3)),n.setAttribute("color",new Qn(o,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const d=new Dn(16755200),f=new Dn(16711680),p=new Dn(43775),g=new Dn(16777215),v=new Dn(3355443);this.setColors(d,f,p,g,v)}setColors(e,n,r,i,o){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,o.r,o.g,o.b),a.setXYZ(41,o.r,o.g,o.b),a.setXYZ(42,o.r,o.g,o.b),a.setXYZ(43,o.r,o.g,o.b),a.setXYZ(44,o.r,o.g,o.b),a.setXYZ(45,o.r,o.g,o.b),a.setXYZ(46,o.r,o.g,o.b),a.setXYZ(47,o.r,o.g,o.b),a.setXYZ(48,o.r,o.g,o.b),a.setXYZ(49,o.r,o.g,o.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;Wo.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),as("c",n,e,Wo,0,0,-1),as("t",n,e,Wo,0,0,1),as("n1",n,e,Wo,-r,-i,-1),as("n2",n,e,Wo,r,-i,-1),as("n3",n,e,Wo,-r,i,-1),as("n4",n,e,Wo,r,i,-1),as("f1",n,e,Wo,-r,-i,1),as("f2",n,e,Wo,r,-i,1),as("f3",n,e,Wo,-r,i,1),as("f4",n,e,Wo,r,i,1),as("u1",n,e,Wo,r*.7,i*1.1,-1),as("u2",n,e,Wo,-r*.7,i*1.1,-1),as("u3",n,e,Wo,0,i*2,-1),as("cf1",n,e,Wo,-r,0,1),as("cf2",n,e,Wo,r,0,1),as("cf3",n,e,Wo,0,-i,1),as("cf4",n,e,Wo,0,i,1),as("cn1",n,e,Wo,-r,0,-1),as("cn2",n,e,Wo,r,0,-1),as("cn3",n,e,Wo,0,-i,-1),as("cn4",n,e,Wo,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function as(t,e,n,r,i,o,s){oA.set(i,o,s).unproject(r);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let d=0,f=a.length;d<f;d++)l.setXYZ(a[d],oA.x,oA.y,oA.z)}}const sA=new Hl;class Vvt extends qf{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),o=new Lr;o.setIndex(new Xi(r,1)),o.setAttribute("position",new Xi(i,3)),super(o,new Kl({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&sA.setFromObject(this.object),sA.isEmpty())return;const n=sA.min,r=sA.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Wvt extends qf{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new Lr;o.setIndex(new Xi(r,1)),o.setAttribute("position",new Qn(i,3)),super(o,new Kl({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Hvt extends vy{constructor(e,n=1,r=16776960){const i=r,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new Lr;s.setAttribute("position",new Qn(o,3)),s.computeBoundingSphere(),super(s,new Kl({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Lr;l.setAttribute("position",new Qn(a,3)),l.computeBoundingSphere(),this.add(new Cs(l,new Oy({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const NZ=new Oe;let aA,NN;class Gvt extends vi{constructor(e=new Oe(0,0,1),n=new Oe(0,0,0),r=1,i=16776960,o=r*.2,s=o*.2){super(),this.type="ArrowHelper",aA===void 0&&(aA=new Lr,aA.setAttribute("position",new Qn([0,0,0,0,1,0],3)),NN=new U1(0,.5,1,5,1),NN.translate(0,-.5,0)),this.position.copy(n),this.line=new vy(aA,new Kl({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Cs(NN,new Oy({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,o,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{NZ.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(NZ,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class qvt extends qf{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Lr;i.setAttribute("position",new Qn(n,3)),i.setAttribute("color",new Qn(r,3));const o=new Kl({vertexColors:!0,toneMapped:!1});super(i,o),this.type="AxesHelper"}setColors(e,n,r){const i=new Dn,o=this.geometry.attributes.color.array;return i.set(e),i.toArray(o,0),i.toArray(o,3),i.set(n),i.toArray(o,6),i.toArray(o,9),i.set(r),i.toArray(o,12),i.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Yvt{constructor(){this.type="ShapePath",this.color=new Dn,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new kM,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,o,s){return this.currentPath.bezierCurveTo(e,n,r,i,o,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(M){const T=[];for(let C=0,k=M.length;C<k;C++){const O=M[C],D=new f0;D.curves=O.curves,T.push(D)}return T}function r(M,T){const C=T.length;let k=!1;for(let O=C-1,D=0;D<C;O=D++){let B=T[O],U=T[D],J=U.x-B.x,V=U.y-B.y;if(Math.abs(V)>Number.EPSILON){if(V<0&&(B=T[D],J=-J,U=T[O],V=-V),M.y<B.y||M.y>U.y)continue;if(M.y===B.y){if(M.x===B.x)return!0}else{const X=V*(M.x-B.x)-J*(M.y-B.y);if(X===0)return!0;if(X<0)continue;k=!k}}else{if(M.y!==B.y)continue;if(U.x<=M.x&&M.x<=B.x||B.x<=M.x&&M.x<=U.x)return!0}}return k}const i=Of.isClockWise,o=this.subPaths;if(o.length===0)return[];let s,a,l;const d=[];if(o.length===1)return a=o[0],l=new f0,l.curves=a.curves,d.push(l),d;let f=!i(o[0].getPoints());f=e?!f:f;const p=[],g=[];let v=[],x=0,b;g[x]=void 0,v[x]=[];for(let M=0,T=o.length;M<T;M++)a=o[M],b=a.getPoints(),s=i(b),s=e?!s:s,s?(!f&&g[x]&&x++,g[x]={s:new f0,p:b},g[x].s.curves=a.curves,f&&x++,v[x]=[]):v[x].push({h:a,p:b[0]});if(!g[0])return n(o);if(g.length>1){let M=!1,T=0;for(let C=0,k=g.length;C<k;C++)p[C]=[];for(let C=0,k=g.length;C<k;C++){const O=v[C];for(let D=0;D<O.length;D++){const B=O[D];let U=!0;for(let J=0;J<g.length;J++)r(B.p,g[J].p)&&(C!==J&&T++,U?(U=!1,p[J].push(B)):M=!0);U&&p[C].push(B)}}T>0&&M===!1&&(v=p)}let S;for(let M=0,T=g.length;M<T;M++){l=g[M].s,d.push(l),S=v[M];for(let C=0,k=S.length;C<k;C++)l.holes.push(S[C].h)}return d}}class Xvt extends Ih{constructor(e=1,n=1,r=1,i={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,n,{...i,count:r}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:OO}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=OO);const Kvt=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:D6,AddEquation:zg,AddOperation:aue,AdditiveAnimationBlendMode:W6,AdditiveBlending:r4,AgXToneMapping:hue,AlphaFormat:yue,AlwaysCompare:Lue,AlwaysDepth:eue,AlwaysStencilFunc:L4,AmbientLight:zde,AnimationAction:Hde,AnimationClip:zM,AnimationLoader:Zyt,AnimationMixer:Tvt,AnimationObjectGroup:Mvt,AnimationUtils:qyt,ArcCurve:lde,ArrayCamera:Jue,ArrowHelper:Gvt,AttachedBindMode:l4,Audio:Vde,AudioAnalyser:pvt,AudioContext:y8,AudioListener:dvt,AudioLoader:lvt,AxesHelper:qvt,BackSide:Wl,BasicDepthPacking:Eue,BasicShadowMap:Nce,BatchedMesh:ode,Bone:r8,BooleanKeyframeTrack:H0,Box2:Rvt,Box3:Hl,Box3Helper:Wvt,BoxGeometry:Ly,BoxHelper:Vvt,BufferAttribute:Xi,BufferGeometry:Lr,BufferGeometryLoader:Ude,ByteType:mue,Cache:Kp,Camera:zE,CameraHelper:Uvt,CanvasTexture:yyt,CapsuleGeometry:qO,CatmullRomCurve3:cde,CineonToneMapping:uue,CircleGeometry:YO,ClampToEdgeWrapping:fl,Clock:v8,Color:Dn,ColorKeyframeTrack:p8,ColorManagement:Ni,CompressedArrayTexture:myt,CompressedCubeTexture:gyt,CompressedTexture:HO,CompressedTextureLoader:Jyt,ConeGeometry:XO,ConstantAlphaFactor:Zce,ConstantColorFactor:Xce,CubeCamera:Vue,CubeReflectionMapping:_m,CubeRefractionMapping:yy,CubeTexture:FE,CubeTextureLoader:Qyt,CubeUVReflectionMapping:B1,CubicBezierCurve:s8,CubicBezierCurve3:ude,CubicInterpolant:Pde,CullFaceBack:n4,CullFaceFront:Dce,CullFaceFrontBack:ndt,CullFaceNone:Lce,Curve:Nh,CurvePath:hde,CustomBlending:zce,CustomToneMapping:due,CylinderGeometry:U1,Cylindrical:kvt,Data3DTexture:Y6,DataArrayTexture:BO,DataTexture:ly,DataTextureLoader:evt,DataUtils:cht,DecrementStencilOp:fdt,DecrementWrapStencilOp:mdt,DefaultLoadingManager:Rde,DepthFormat:ay,DepthStencilFormat:I0,DepthTexture:J6,DetachedBindMode:pue,DirectionalLight:Nde,DirectionalLightHelper:jvt,DiscreteInterpolant:Ide,DisplayP3ColorSpace:FO,DodecahedronGeometry:jE,DoubleSide:bh,DstAlphaFactor:Wce,DstColorFactor:Gce,DynamicCopyUsage:Idt,DynamicDrawUsage:Mdt,DynamicReadUsage:Cdt,EdgesGeometry:fde,EllipseCurve:GO,EqualCompare:Iue,EqualDepth:nue,EqualStencilFunc:_dt,EquirectangularReflectionMapping:vM,EquirectangularRefractionMapping:_M,Euler:_u,EventDispatcher:Dh,ExtrudeGeometry:ZO,FileLoader:xm,Float16BufferAttribute:mht,Float32BufferAttribute:Qn,FloatType:iu,Fog:UO,FogExp2:jO,FramebufferTexture:pyt,FrontSide:vm,Frustum:BE,GLBufferAttribute:Ivt,GLSL1:Rdt,GLSL3:D4,GreaterCompare:kue,GreaterDepth:iue,GreaterEqualCompare:Oue,GreaterEqualDepth:rue,GreaterEqualStencilFunc:Sdt,GreaterStencilFunc:bdt,GridHelper:Bvt,Group:zx,HalfFloatType:Kb,HemisphereLight:Ode,HemisphereLightHelper:Fvt,IcosahedronGeometry:JO,ImageBitmapLoader:avt,ImageLoader:FM,ImageUtils:q6,IncrementStencilOp:hdt,IncrementWrapStencilOp:pdt,InstancedBufferAttribute:Qb,InstancedBufferGeometry:jde,InstancedInterleavedBuffer:Pvt,InstancedMesh:ide,Int16BufferAttribute:fht,Int32BufferAttribute:pht,Int8BufferAttribute:uht,IntType:N6,InterleavedBuffer:VO,InterleavedBufferAttribute:k0,Interpolant:VE,InterpolateDiscrete:wM,InterpolateLinear:SM,InterpolateSmooth:YA,InvertStencilOp:gdt,KeepStencilOp:kv,KeyframeTrack:zh,LOD:nde,LatheGeometry:$E,Layers:h0,LessCompare:Pue,LessDepth:tue,LessEqualCompare:H6,LessEqualDepth:yM,LessEqualStencilFunc:xdt,LessStencilFunc:vdt,Light:Ny,LightProbe:$de,Line:vy,Line3:Ovt,LineBasicMaterial:Kl,LineCurve:a8,LineCurve3:dde,LineDashedMaterial:Tde,LineLoop:sde,LineSegments:qf,LinearDisplayP3ColorSpace:NE,LinearFilter:Lo,LinearInterpolant:f8,LinearMipMapLinearFilter:sdt,LinearMipMapNearestFilter:odt,LinearMipmapLinearFilter:bf,LinearMipmapNearestFilter:HS,LinearSRGBColorSpace:Im,LinearToneMapping:lue,LinearTransfer:EM,Loader:Pc,LoaderUtils:V4,LoadingManager:m8,LoopOnce:wue,LoopPingPong:Mue,LoopRepeat:Sue,LuminanceAlphaFormat:_ue,LuminanceFormat:vue,MOUSE:Jc,Material:$a,MaterialLoader:oL,MathUtils:Due,Matrix3:Ir,Matrix4:mr,MaxEquation:a4,Mesh:Cs,MeshBasicMaterial:Oy,MeshDepthMaterial:Q6,MeshDistanceMaterial:e8,MeshLambertMaterial:Mde,MeshMatcapMaterial:Ede,MeshNormalMaterial:Sde,MeshPhongMaterial:bde,MeshPhysicalMaterial:xde,MeshStandardMaterial:d8,MeshToonMaterial:wde,MinEquation:s4,MirroredRepeatWrapping:bM,MixOperation:sue,MultiplyBlending:o4,MultiplyOperation:DE,NearestFilter:cs,NearestMipMapLinearFilter:idt,NearestMipMapNearestFilter:rdt,NearestMipmapLinearFilter:Dv,NearestMipmapNearestFilter:JI,NeutralToneMapping:fue,NeverCompare:Aue,NeverDepth:Qce,NeverStencilFunc:ydt,NoBlending:im,NoColorSpace:Fp,NoToneMapping:kf,NormalAnimationBlendMode:zO,NormalBlending:u0,NotEqualCompare:Rue,NotEqualDepth:oue,NotEqualStencilFunc:wdt,NumberKeyframeTrack:DM,Object3D:vi,ObjectLoader:ovt,ObjectSpaceNormalMap:Cue,OctahedronGeometry:UE,OneFactor:jce,OneMinusConstantAlphaFactor:Jce,OneMinusConstantColorFactor:Kce,OneMinusDstAlphaFactor:Hce,OneMinusDstColorFactor:qce,OneMinusSrcAlphaFactor:ZI,OneMinusSrcColorFactor:Vce,OrthographicCamera:Xp,P3Primaries:CM,PCFShadowMap:LO,PCFSoftShadowMap:WS,PMREMGenerator:z4,Path:kM,PerspectiveCamera:Xo,Plane:gf,PlaneGeometry:$1,PlaneHelper:Hvt,PointLight:Dde,PointLightHelper:Nvt,Points:ade,PointsMaterial:i8,PolarGridHelper:$vt,PolyhedronGeometry:Dy,PositionalAudio:fvt,PropertyBinding:di,PropertyMixer:Wde,QuadraticBezierCurve:l8,QuadraticBezierCurve3:c8,Quaternion:ua,QuaternionKeyframeTrack:W1,QuaternionLinearInterpolant:kde,RED_GREEN_RGTC2_Format:R4,RED_RGTC1_Format:bue,REVISION:OO,RGBADepthPacking:Tue,RGBAFormat:Bl,RGBAIntegerFormat:U6,RGBA_ASTC_10x10_Format:T4,RGBA_ASTC_10x5_Format:S4,RGBA_ASTC_10x6_Format:M4,RGBA_ASTC_10x8_Format:E4,RGBA_ASTC_12x10_Format:C4,RGBA_ASTC_12x12_Format:A4,RGBA_ASTC_4x4_Format:m4,RGBA_ASTC_5x4_Format:g4,RGBA_ASTC_5x5_Format:y4,RGBA_ASTC_6x5_Format:v4,RGBA_ASTC_6x6_Format:_4,RGBA_ASTC_8x5_Format:x4,RGBA_ASTC_8x6_Format:b4,RGBA_ASTC_8x8_Format:w4,RGBA_BPTC_Format:qA,RGBA_ETC2_EAC_Format:p4,RGBA_PVRTC_2BPPV1_Format:h4,RGBA_PVRTC_4BPPV1_Format:d4,RGBA_S3TC_DXT1_Format:WA,RGBA_S3TC_DXT3_Format:HA,RGBA_S3TC_DXT5_Format:GA,RGB_BPTC_SIGNED_Format:P4,RGB_BPTC_UNSIGNED_Format:I4,RGB_ETC1_Format:V6,RGB_ETC2_Format:f4,RGB_PVRTC_2BPPV1_Format:u4,RGB_PVRTC_4BPPV1_Format:c4,RGB_S3TC_DXT1_Format:VA,RGFormat:xue,RGIntegerFormat:j6,RawShaderMaterial:_de,Ray:Ry,Raycaster:Gde,Rec709Primaries:TM,RectAreaLight:Fde,RedFormat:B6,RedIntegerFormat:$6,ReinhardToneMapping:cue,RenderTarget:Bue,RepeatWrapping:xM,ReplaceStencilOp:ddt,ReverseSubtractEquation:Bce,RingGeometry:QO,SIGNED_RED_GREEN_RGTC2_Format:O4,SIGNED_RED_RGTC1_Format:k4,SRGBColorSpace:td,SRGBTransfer:so,Scene:tk,ShaderChunk:Nr,ShaderLib:vh,ShaderMaterial:kh,ShadowMaterial:vde,Shape:f0,ShapeGeometry:eL,ShapePath:Yvt,ShapeUtils:Of,ShortType:gue,Skeleton:WO,SkeletonHelper:Dvt,SkinnedMesh:rde,Source:Jv,Sphere:_l,SphereGeometry:V1,Spherical:BM,SphericalHarmonics3:Bde,SplineCurve:u8,SpotLight:Lde,SpotLightHelper:Lvt,Sprite:tde,SpriteMaterial:n8,SrcAlphaFactor:KI,SrcAlphaSaturateFactor:Yce,SrcColorFactor:Uce,StaticCopyUsage:Pdt,StaticDrawUsage:AM,StaticReadUsage:Tdt,StereoCamera:cvt,StreamCopyUsage:kdt,StreamDrawUsage:Edt,StreamReadUsage:Adt,StringKeyframeTrack:G0,SubtractEquation:Fce,SubtractiveBlending:i4,TOUCH:Qc,TangentSpaceNormalMap:ky,TetrahedronGeometry:tL,Texture:Fo,TextureLoader:tvt,TorusGeometry:nL,TorusKnotGeometry:rL,Triangle:ou,TriangleFanDrawMode:cdt,TriangleStripDrawMode:ldt,TrianglesDrawMode:adt,TubeGeometry:iL,UVMapping:DO,Uint16BufferAttribute:X6,Uint32BufferAttribute:K6,Uint8BufferAttribute:dht,Uint8ClampedBufferAttribute:hht,Uniform:b8,UniformsGroup:Avt,UniformsLib:Sn,UniformsUtils:Uue,UnsignedByteType:Rf,UnsignedInt248Type:sy,UnsignedIntType:Yp,UnsignedShort4444Type:z6,UnsignedShort5551Type:F6,UnsignedShortType:NO,VSMShadowMap:uh,Vector2:$t,Vector3:Oe,Vector4:zi,VectorKeyframeTrack:NM,VideoTexture:fyt,WebGL1Renderer:Que,WebGL3DRenderTarget:Jdt,WebGLArrayRenderTarget:Zdt,WebGLCoordinateSystem:wf,WebGLCubeRenderTarget:Wue,WebGLMultipleRenderTargets:Xvt,WebGLRenderTarget:Ih,WebGLRenderer:t8,WebGLUtils:Zue,WebGPUCoordinateSystem:PM,WireframeGeometry:yde,WrapAroundEnding:MM,ZeroCurvatureEnding:Kv,ZeroFactor:$ce,ZeroSlopeEnding:Zv,ZeroStencilOp:udt,_SRGBAFormat:QI,createCanvasElement:zue},Symbol.toStringTag,{value:"Module"}));var Yde={exports:{}},q0={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */q0.ConcurrentRoot=1;q0.ContinuousEventPriority=4;q0.DefaultEventPriority=16;q0.DiscreteEventPriority=1;q0.IdleEventPriority=536870912;q0.LegacyRoot=0;Yde.exports=q0;var Bx=Yde.exports;function Zvt(t){let e;const n=new Set,r=(d,f)=>{const p=typeof d=="function"?d(e):d;if(p!==e){const g=e;e=f?p:Object.assign({},e,p),n.forEach(v=>v(e,g))}},i=()=>e,o=(d,f=i,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let g=f(e);function v(){const x=f(e);if(!p(g,x)){const b=g;d(g=x,b)}}return n.add(v),()=>n.delete(v)},l={setState:r,getState:i,subscribe:(d,f,p)=>f||p?o(d,f,p):(n.add(d),()=>n.delete(d)),destroy:()=>n.clear()};return e=t(r,i,l),l}const Jvt=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),zZ=Jvt?W.useEffect:W.useLayoutEffect;function Qvt(t){const e=typeof t=="function"?Zvt(t):t,n=(r=e.getState,i=Object.is)=>{const[,o]=W.useReducer(S=>S+1,0),s=e.getState(),a=W.useRef(s),l=W.useRef(r),d=W.useRef(i),f=W.useRef(!1),p=W.useRef();p.current===void 0&&(p.current=r(s));let g,v=!1;(a.current!==s||l.current!==r||d.current!==i||f.current)&&(g=r(s),v=!i(p.current,g)),zZ(()=>{v&&(p.current=g),a.current=s,l.current=r,d.current=i,f.current=!1});const x=W.useRef(s);zZ(()=>{const S=()=>{try{const T=e.getState(),C=l.current(T);d.current(p.current,C)||(a.current=T,p.current=C,o())}catch{f.current=!0,o()}},M=e.subscribe(S);return e.getState()!==x.current&&S(),M},[]);const b=v?g:p.current;return W.useDebugValue(b),b};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}var Xde={exports:{}},Kde={exports:{}},Zde={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ie,ve){var Ee=ie.length;ie.push(ve);e:for(;0<Ee;){var Ne=Ee-1>>>1,Ge=ie[Ne];if(0<i(Ge,ve))ie[Ne]=ve,ie[Ee]=Ge,Ee=Ne;else break e}}function n(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var ve=ie[0],Ee=ie.pop();if(Ee!==ve){ie[0]=Ee;e:for(var Ne=0,Ge=ie.length,dt=Ge>>>1;Ne<dt;){var Ue=2*(Ne+1)-1,st=ie[Ue],lt=Ue+1,Rt=ie[lt];if(0>i(st,Ee))lt<Ge&&0>i(Rt,st)?(ie[Ne]=Rt,ie[lt]=Ee,Ne=lt):(ie[Ne]=st,ie[Ue]=Ee,Ne=Ue);else if(lt<Ge&&0>i(Rt,Ee))ie[Ne]=Rt,ie[lt]=Ee,Ne=lt;else break e}}return ve}function i(ie,ve){var Ee=ie.sortIndex-ve.sortIndex;return Ee!==0?Ee:ie.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],d=[],f=1,p=null,g=3,v=!1,x=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(ie){for(var ve=n(d);ve!==null;){if(ve.callback===null)r(d);else if(ve.startTime<=ie)r(d),ve.sortIndex=ve.expirationTime,e(l,ve);else break;ve=n(d)}}function k(ie){if(b=!1,C(ie),!x)if(n(l)!==null)x=!0,ue(O);else{var ve=n(d);ve!==null&&be(k,ve.startTime-ie)}}function O(ie,ve){x=!1,b&&(b=!1,M(U),U=-1),v=!0;var Ee=g;try{for(C(ve),p=n(l);p!==null&&(!(p.expirationTime>ve)||ie&&!X());){var Ne=p.callback;if(typeof Ne=="function"){p.callback=null,g=p.priorityLevel;var Ge=Ne(p.expirationTime<=ve);ve=t.unstable_now(),typeof Ge=="function"?p.callback=Ge:p===n(l)&&r(l),C(ve)}else r(l);p=n(l)}if(p!==null)var dt=!0;else{var Ue=n(d);Ue!==null&&be(k,Ue.startTime-ve),dt=!1}return dt}finally{p=null,g=Ee,v=!1}}var D=!1,B=null,U=-1,J=5,V=-1;function X(){return!(t.unstable_now()-V<J)}function oe(){if(B!==null){var ie=t.unstable_now();V=ie;var ve=!0;try{ve=B(!0,ie)}finally{ve?pe():(D=!1,B=null)}}else D=!1}var pe;if(typeof T=="function")pe=function(){T(oe)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,he=re.port2;re.port1.onmessage=oe,pe=function(){he.postMessage(null)}}else pe=function(){S(oe,0)};function ue(ie){B=ie,D||(D=!0,pe())}function be(ie,ve){U=S(function(){ie(t.unstable_now())},ve)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_continueExecution=function(){x||v||(x=!0,ue(O))},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(ie){switch(g){case 1:case 2:case 3:var ve=3;break;default:ve=g}var Ee=g;g=ve;try{return ie()}finally{g=Ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ie,ve){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var Ee=g;g=ie;try{return ve()}finally{g=Ee}},t.unstable_scheduleCallback=function(ie,ve,Ee){var Ne=t.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Ne+Ee:Ne):Ee=Ne,ie){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=Ee+Ge,ie={id:f++,callback:ve,priorityLevel:ie,startTime:Ee,expirationTime:Ge,sortIndex:-1},Ee>Ne?(ie.sortIndex=Ee,e(d,ie),n(l)===null&&ie===n(d)&&(b?(M(U),U=-1):b=!0,be(k,Ee-Ne))):(ie.sortIndex=Ge,e(l,ie),x||v||(x=!0,ue(O))),ie},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(ie){var ve=g;return function(){var Ee=g;g=ve;try{return ie.apply(this,arguments)}finally{g=Ee}}}})(Zde);Kde.exports=Zde;var H4=Kde.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e0t=function(e){var n={},r=W,i=H4,o=Object.assign;function s(w){for(var E="https://reactjs.org/docs/error-decoder.html?invariant="+w,$=1;$<arguments.length;$++)E+="&args[]="+encodeURIComponent(arguments[$]);return"Minified React error #"+w+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),d=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),x=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),k=Symbol.for("react.offscreen"),O=Symbol.iterator;function D(w){return w===null||typeof w!="object"?null:(w=O&&w[O]||w["@@iterator"],typeof w=="function"?w:null)}function B(w){if(w==null)return null;if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w;switch(w){case f:return"Fragment";case d:return"Portal";case g:return"Profiler";case p:return"StrictMode";case S:return"Suspense";case M:return"SuspenseList"}if(typeof w=="object")switch(w.$$typeof){case x:return(w.displayName||"Context")+".Consumer";case v:return(w._context.displayName||"Context")+".Provider";case b:var E=w.render;return w=w.displayName,w||(w=E.displayName||E.name||"",w=w!==""?"ForwardRef("+w+")":"ForwardRef"),w;case T:return E=w.displayName||null,E!==null?E:B(w.type)||"Memo";case C:E=w._payload,w=w._init;try{return B(w(E))}catch{}}return null}function U(w){var E=w.type;switch(w.tag){case 24:return"Cache";case 9:return(E.displayName||"Context")+".Consumer";case 10:return(E._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return w=E.render,w=w.displayName||w.name||"",E.displayName||(w!==""?"ForwardRef("+w+")":"ForwardRef");case 7:return"Fragment";case 5:return E;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(E);case 8:return E===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof E=="function")return E.displayName||E.name||null;if(typeof E=="string")return E}return null}function J(w){var E=w,$=w;if(w.alternate)for(;E.return;)E=E.return;else{w=E;do E=w,E.flags&4098&&($=E.return),w=E.return;while(w)}return E.tag===3?$:null}function V(w){if(J(w)!==w)throw Error(s(188))}function X(w){var E=w.alternate;if(!E){if(E=J(w),E===null)throw Error(s(188));return E!==w?null:w}for(var $=w,G=E;;){var Q=$.return;if(Q===null)break;var ce=Q.alternate;if(ce===null){if(G=Q.return,G!==null){$=G;continue}break}if(Q.child===ce.child){for(ce=Q.child;ce;){if(ce===$)return V(Q),w;if(ce===G)return V(Q),E;ce=ce.sibling}throw Error(s(188))}if($.return!==G.return)$=Q,G=ce;else{for(var Ve=!1,yt=Q.child;yt;){if(yt===$){Ve=!0,$=Q,G=ce;break}if(yt===G){Ve=!0,G=Q,$=ce;break}yt=yt.sibling}if(!Ve){for(yt=ce.child;yt;){if(yt===$){Ve=!0,$=ce,G=Q;break}if(yt===G){Ve=!0,G=ce,$=Q;break}yt=yt.sibling}if(!Ve)throw Error(s(189))}}if($.alternate!==G)throw Error(s(190))}if($.tag!==3)throw Error(s(188));return $.stateNode.current===$?w:E}function oe(w){return w=X(w),w!==null?pe(w):null}function pe(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){var E=pe(w);if(E!==null)return E;w=w.sibling}return null}function re(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){if(w.tag!==4){var E=re(w);if(E!==null)return E}w=w.sibling}return null}var he=Array.isArray,ue=e.getPublicInstance,be=e.getRootHostContext,ie=e.getChildHostContext,ve=e.prepareForCommit,Ee=e.resetAfterCommit,Ne=e.createInstance,Ge=e.appendInitialChild,dt=e.finalizeInitialChildren,Ue=e.prepareUpdate,st=e.shouldSetTextContent,lt=e.createTextInstance,Rt=e.scheduleTimeout,Lt=e.cancelTimeout,Fe=e.noTimeout,at=e.isPrimaryRenderer,nt=e.supportsMutation,ge=e.supportsPersistence,tt=e.supportsHydration,rt=e.getInstanceFromNode,vt=e.preparePortalMount,Tt=e.getCurrentEventPriority,We=e.detachDeletedInstance,Vt=e.supportsMicrotasks,sn=e.scheduleMicrotask,Ut=e.supportsTestSelectors,Pe=e.findFiberRoot,_e=e.getBoundingRect,Mt=e.getTextContent,wt=e.isHiddenSubtree,Wt=e.matchAccessibilityRole,Bt=e.setFocusIfFocusable,Mn=e.setupIntersectionObserver,an=e.appendChild,Je=e.appendChildToContainer,Yt=e.commitTextUpdate,xn=e.commitMount,en=e.commitUpdate,un=e.insertBefore,St=e.insertInContainerBefore,gt=e.removeChild,Ae=e.removeChildFromContainer,ft=e.resetTextContent,Ie=e.hideInstance,it=e.hideTextInstance,tn=e.unhideInstance,Xe=e.unhideTextInstance,xe=e.clearContainer,ee=e.cloneInstance,se=e.createContainerChildSet,me=e.appendChildToContainerChildSet,Ce=e.finalizeContainerChildren,qe=e.replaceContainerChildren,Ye=e.cloneHiddenInstance,et=e.cloneHiddenTextInstance,je=e.canHydrateInstance,ot=e.canHydrateTextInstance,Dt=e.canHydrateSuspenseInstance,It=e.isSuspenseInstancePending,Nt=e.isSuspenseInstanceFallback,En=e.registerSuspenseInstanceRetry,Nn=e.getNextHydratableSibling,zn=e.getFirstHydratableChild,yr=e.getFirstHydratableChildWithinContainer,tr=e.getFirstHydratableChildWithinSuspenseInstance,Qr=e.hydrateInstance,Ur=e.hydrateTextInstance,Oi=e.hydrateSuspenseInstance,Te=e.getNextHydratableInstanceAfterSuspenseInstance,pt=e.commitHydratedContainer,At=e.commitHydratedSuspenseInstance,mt=e.clearSuspenseBoundary,xt=e.clearSuspenseBoundaryFromContainer,gn=e.shouldDeleteUnhydratedTailInstances,In=e.didNotMatchHydratedContainerTextInstance,ir=e.didNotMatchHydratedTextInstance,lr;function Tn(w){if(lr===void 0)try{throw Error()}catch($){var E=$.stack.trim().match(/\n( *(at )?)/);lr=E&&E[1]||""}return`
`+lr+w}var cr=!1;function hr(w,E){if(!w||cr)return"";cr=!0;var $=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(E)if(E=function(){throw Error()},Object.defineProperty(E.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(E,[])}catch(pn){var G=pn}Reflect.construct(w,[],E)}else{try{E.call()}catch(pn){G=pn}w.call(E.prototype)}else{try{throw Error()}catch(pn){G=pn}w()}}catch(pn){if(pn&&G&&typeof pn.stack=="string"){for(var Q=pn.stack.split(`
`),ce=G.stack.split(`
`),Ve=Q.length-1,yt=ce.length-1;1<=Ve&&0<=yt&&Q[Ve]!==ce[yt];)yt--;for(;1<=Ve&&0<=yt;Ve--,yt--)if(Q[Ve]!==ce[yt]){if(Ve!==1||yt!==1)do if(Ve--,yt--,0>yt||Q[Ve]!==ce[yt]){var jt=`
`+Q[Ve].replace(" at new "," at ");return w.displayName&&jt.includes("<anonymous>")&&(jt=jt.replace("<anonymous>",w.displayName)),jt}while(1<=Ve&&0<=yt);break}}}finally{cr=!1,Error.prepareStackTrace=$}return(w=w?w.displayName||w.name:"")?Tn(w):""}var $r=Object.prototype.hasOwnProperty,li=[],Pi=-1;function Vr(w){return{current:w}}function qn(w){0>Pi||(w.current=li[Pi],li[Pi]=null,Pi--)}function Rn(w,E){Pi++,li[Pi]=w.current,w.current=E}var Io={},Yn=Vr(Io),Ii=Vr(!1),gs=Io;function Wr(w,E){var $=w.type.contextTypes;if(!$)return Io;var G=w.stateNode;if(G&&G.__reactInternalMemoizedUnmaskedChildContext===E)return G.__reactInternalMemoizedMaskedChildContext;var Q={},ce;for(ce in $)Q[ce]=E[ce];return G&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=E,w.__reactInternalMemoizedMaskedChildContext=Q),Q}function Ui(w){return w=w.childContextTypes,w!=null}function ei(){qn(Ii),qn(Yn)}function pa(w,E,$){if(Yn.current!==Io)throw Error(s(168));Rn(Yn,E),Rn(Ii,$)}function Is(w,E,$){var G=w.stateNode;if(E=E.childContextTypes,typeof G.getChildContext!="function")return $;G=G.getChildContext();for(var Q in G)if(!(Q in E))throw Error(s(108,U(w)||"Unknown",Q));return o({},$,G)}function ko(w){return w=(w=w.stateNode)&&w.__reactInternalMemoizedMergedChildContext||Io,gs=Yn.current,Rn(Yn,w),Rn(Ii,Ii.current),!0}function bl(w,E,$){var G=w.stateNode;if(!G)throw Error(s(169));$?(w=Is(w,E,gs),G.__reactInternalMemoizedMergedChildContext=w,qn(Ii),qn(Yn),Rn(Yn,w)):qn(Ii),Rn(Ii,$)}var vr=Math.clz32?Math.clz32:zy,Pd=Math.log,Zl=Math.LN2;function zy(w){return w>>>=0,w===0?32:31-(Pd(w)/Zl|0)|0}var Eu=64,Yf=4194304;function Xf(w){switch(w&-w){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return w&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return w}}function Id(w,E){var $=w.pendingLanes;if($===0)return 0;var G=0,Q=w.suspendedLanes,ce=w.pingedLanes,Ve=$&268435455;if(Ve!==0){var yt=Ve&~Q;yt!==0?G=Xf(yt):(ce&=Ve,ce!==0&&(G=Xf(ce)))}else Ve=$&~Q,Ve!==0?G=Xf(Ve):ce!==0&&(G=Xf(ce));if(G===0)return 0;if(E!==0&&E!==G&&!(E&Q)&&(Q=G&-G,ce=E&-E,Q>=ce||Q===16&&(ce&4194240)!==0))return E;if(G&4&&(G|=$&16),E=w.entangledLanes,E!==0)for(w=w.entanglements,E&=G;0<E;)$=31-vr(E),Q=1<<$,G|=w[$],E&=~Q;return G}function Y0(w,E){switch(w){case 1:case 2:case 4:return E+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return E+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X0(w,E){for(var $=w.suspendedLanes,G=w.pingedLanes,Q=w.expirationTimes,ce=w.pendingLanes;0<ce;){var Ve=31-vr(ce),yt=1<<Ve,jt=Q[Ve];jt===-1?(!(yt&$)||yt&G)&&(Q[Ve]=Y0(yt,E)):jt<=E&&(w.expiredLanes|=yt),ce&=~yt}}function Fy(w){return w=w.pendingLanes&-1073741825,w!==0?w:w&1073741824?1073741824:0}function km(w){for(var E=[],$=0;31>$;$++)E.push(w);return E}function Kf(w,E,$){w.pendingLanes|=E,E!==536870912&&(w.suspendedLanes=0,w.pingedLanes=0),w=w.eventTimes,E=31-vr(E),w[E]=$}function Rm(w,E){var $=w.pendingLanes&~E;w.pendingLanes=E,w.suspendedLanes=0,w.pingedLanes=0,w.expiredLanes&=E,w.mutableReadLanes&=E,w.entangledLanes&=E,E=w.entanglements;var G=w.eventTimes;for(w=w.expirationTimes;0<$;){var Q=31-vr($),ce=1<<Q;E[Q]=0,G[Q]=-1,w[Q]=-1,$&=~ce}}function Zf(w,E){var $=w.entangledLanes|=E;for(w=w.entanglements;$;){var G=31-vr($),Q=1<<G;Q&E|w[G]&E&&(w[G]|=E),$&=~Q}}var Hr=0;function By(w){return w&=-w,1<w?4<w?w&268435455?16:536870912:4:1}var Fh=i.unstable_scheduleCallback,Tu=i.unstable_cancelCallback,Om=i.unstable_shouldYield,ja=i.unstable_requestPaint,ro=i.unstable_now,kd=i.unstable_ImmediatePriority,Jf=i.unstable_UserBlockingPriority,Bh=i.unstable_NormalPriority,Qf=i.unstable_IdlePriority,Ic=null,Jl=null;function H1(w){if(Jl&&typeof Jl.onCommitFiberRoot=="function")try{Jl.onCommitFiberRoot(Ic,w,void 0,(w.current.flags&128)===128)}catch{}}function K0(w,E){return w===E&&(w!==0||1/w===1/E)||w!==w&&E!==E}var Ql=typeof Object.is=="function"?Object.is:K0,ks=null,Rd=!1,Rs=!1;function ys(w){ks===null?ks=[w]:ks.push(w)}function $h(w){Rd=!0,ys(w)}function _r(){if(!Rs&&ks!==null){Rs=!0;var w=0,E=Hr;try{var $=ks;for(Hr=1;w<$.length;w++){var G=$[w];do G=G(!0);while(G!==null)}ks=null,Rd=!1}catch(Q){throw ks!==null&&(ks=ks.slice(w+1)),Fh(kd,_r),Q}finally{Hr=E,Rs=!1}}return null}var Lm=a.ReactCurrentBatchConfig;function jh(w,E){if(Ql(w,E))return!0;if(typeof w!="object"||w===null||typeof E!="object"||E===null)return!1;var $=Object.keys(w),G=Object.keys(E);if($.length!==G.length)return!1;for(G=0;G<$.length;G++){var Q=$[G];if(!$r.call(E,Q)||!Ql(w[Q],E[Q]))return!1}return!0}function $y(w){switch(w.tag){case 5:return Tn(w.type);case 16:return Tn("Lazy");case 13:return Tn("Suspense");case 19:return Tn("SuspenseList");case 0:case 2:case 15:return w=hr(w.type,!1),w;case 11:return w=hr(w.type.render,!1),w;case 1:return w=hr(w.type,!0),w;default:return""}}function Ks(w,E){if(w&&w.defaultProps){E=o({},E),w=w.defaultProps;for(var $ in w)E[$]===void 0&&(E[$]=w[$]);return E}return E}var Uh=Vr(null),Vh=null,kc=null,Dm=null;function Nm(){Dm=kc=Vh=null}function Od(w,E,$){at?(Rn(Uh,E._currentValue),E._currentValue=$):(Rn(Uh,E._currentValue2),E._currentValue2=$)}function jy(w){var E=Uh.current;qn(Uh),at?w._currentValue=E:w._currentValue2=E}function Uy(w,E,$){for(;w!==null;){var G=w.alternate;if((w.childLanes&E)!==E?(w.childLanes|=E,G!==null&&(G.childLanes|=E)):G!==null&&(G.childLanes&E)!==E&&(G.childLanes|=E),w===$)break;w=w.return}}function Wh(w,E){Vh=w,Dm=kc=null,w=w.dependencies,w!==null&&w.firstContext!==null&&(w.lanes&E&&($o=!0),w.firstContext=null)}function Ua(w){var E=at?w._currentValue:w._currentValue2;if(Dm!==w)if(w={context:w,memoizedValue:E,next:null},kc===null){if(Vh===null)throw Error(s(308));kc=w,Vh.dependencies={lanes:0,firstContext:w}}else kc=kc.next=w;return E}var ec=null,Cu=!1;function ep(w){w.updateQueue={baseState:w.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tp(w,E){w=w.updateQueue,E.updateQueue===w&&(E.updateQueue={baseState:w.baseState,firstBaseUpdate:w.firstBaseUpdate,lastBaseUpdate:w.lastBaseUpdate,shared:w.shared,effects:w.effects})}function wl(w,E){return{eventTime:w,lane:E,tag:0,payload:null,callback:null,next:null}}function tc(w,E){var $=w.updateQueue;$!==null&&($=$.shared,ki!==null&&w.mode&1&&!(Cr&2)?(w=$.interleaved,w===null?(E.next=E,ec===null?ec=[$]:ec.push($)):(E.next=w.next,w.next=E),$.interleaved=E):(w=$.pending,w===null?E.next=E:(E.next=w.next,w.next=E),$.pending=E))}function Rc(w,E,$){if(E=E.updateQueue,E!==null&&(E=E.shared,($&4194240)!==0)){var G=E.lanes;G&=w.pendingLanes,$|=G,E.lanes=$,Zf(w,$)}}function Vy(w,E){var $=w.updateQueue,G=w.alternate;if(G!==null&&(G=G.updateQueue,$===G)){var Q=null,ce=null;if($=$.firstBaseUpdate,$!==null){do{var Ve={eventTime:$.eventTime,lane:$.lane,tag:$.tag,payload:$.payload,callback:$.callback,next:null};ce===null?Q=ce=Ve:ce=ce.next=Ve,$=$.next}while($!==null);ce===null?Q=ce=E:ce=ce.next=E}else Q=ce=E;$={baseState:G.baseState,firstBaseUpdate:Q,lastBaseUpdate:ce,shared:G.shared,effects:G.effects},w.updateQueue=$;return}w=$.lastBaseUpdate,w===null?$.firstBaseUpdate=E:w.next=E,$.lastBaseUpdate=E}function np(w,E,$,G){var Q=w.updateQueue;Cu=!1;var ce=Q.firstBaseUpdate,Ve=Q.lastBaseUpdate,yt=Q.shared.pending;if(yt!==null){Q.shared.pending=null;var jt=yt,pn=jt.next;jt.next=null,Ve===null?ce=pn:Ve.next=pn,Ve=jt;var $n=w.alternate;$n!==null&&($n=$n.updateQueue,yt=$n.lastBaseUpdate,yt!==Ve&&(yt===null?$n.firstBaseUpdate=pn:yt.next=pn,$n.lastBaseUpdate=jt))}if(ce!==null){var Er=Q.baseState;Ve=0,$n=pn=jt=null,yt=ce;do{var ar=yt.lane,Xr=yt.eventTime;if((G&ar)===ar){$n!==null&&($n=$n.next={eventTime:Xr,lane:0,tag:yt.tag,payload:yt.payload,callback:yt.callback,next:null});e:{var nr=w,zs=yt;switch(ar=E,Xr=$,zs.tag){case 1:if(nr=zs.payload,typeof nr=="function"){Er=nr.call(Xr,Er,ar);break e}Er=nr;break e;case 3:nr.flags=nr.flags&-65537|128;case 0:if(nr=zs.payload,ar=typeof nr=="function"?nr.call(Xr,Er,ar):nr,ar==null)break e;Er=o({},Er,ar);break e;case 2:Cu=!0}}yt.callback!==null&&yt.lane!==0&&(w.flags|=64,ar=Q.effects,ar===null?Q.effects=[yt]:ar.push(yt))}else Xr={eventTime:Xr,lane:ar,tag:yt.tag,payload:yt.payload,callback:yt.callback,next:null},$n===null?(pn=$n=Xr,jt=Er):$n=$n.next=Xr,Ve|=ar;if(yt=yt.next,yt===null){if(yt=Q.shared.pending,yt===null)break;ar=yt,yt=ar.next,ar.next=null,Q.lastBaseUpdate=ar,Q.shared.pending=null}}while(!0);if($n===null&&(jt=Er),Q.baseState=jt,Q.firstBaseUpdate=pn,Q.lastBaseUpdate=$n,E=Q.shared.interleaved,E!==null){Q=E;do Ve|=Q.lane,Q=Q.next;while(Q!==E)}else ce===null&&(Q.shared.lanes=0);Xd|=Ve,w.lanes=Ve,w.memoizedState=Er}}function zm(w,E,$){if(w=E.effects,E.effects=null,w!==null)for(E=0;E<w.length;E++){var G=w[E],Q=G.callback;if(Q!==null){if(G.callback=null,G=$,typeof Q!="function")throw Error(s(191,Q));Q.call(G)}}}var Au=new r.Component().refs;function Fm(w,E,$,G){E=w.memoizedState,$=$(G,E),$=$==null?E:o({},E,$),w.memoizedState=$,w.lanes===0&&(w.updateQueue.baseState=$)}var Oc={isMounted:function(w){return(w=w._reactInternals)?J(w)===w:!1},enqueueSetState:function(w,E,$){w=w._reactInternals;var G=es(),Q=of(w),ce=wl(G,Q);ce.payload=E,$!=null&&(ce.callback=$),tc(w,ce),E=wa(w,Q,G),E!==null&&Rc(E,w,Q)},enqueueReplaceState:function(w,E,$){w=w._reactInternals;var G=es(),Q=of(w),ce=wl(G,Q);ce.tag=1,ce.payload=E,$!=null&&(ce.callback=$),tc(w,ce),E=wa(w,Q,G),E!==null&&Rc(E,w,Q)},enqueueForceUpdate:function(w,E){w=w._reactInternals;var $=es(),G=of(w),Q=wl($,G);Q.tag=2,E!=null&&(Q.callback=E),tc(w,Q),E=wa(w,G,$),E!==null&&Rc(E,w,G)}};function Ld(w,E,$,G,Q,ce,Ve){return w=w.stateNode,typeof w.shouldComponentUpdate=="function"?w.shouldComponentUpdate(G,ce,Ve):E.prototype&&E.prototype.isPureReactComponent?!jh($,G)||!jh(Q,ce):!0}function Wy(w,E,$){var G=!1,Q=Io,ce=E.contextType;return typeof ce=="object"&&ce!==null?ce=Ua(ce):(Q=Ui(E)?gs:Yn.current,G=E.contextTypes,ce=(G=G!=null)?Wr(w,Q):Io),E=new E($,ce),w.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Oc,w.stateNode=E,E._reactInternals=w,G&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=Q,w.__reactInternalMemoizedMaskedChildContext=ce),E}function Bm(w,E,$,G){w=E.state,typeof E.componentWillReceiveProps=="function"&&E.componentWillReceiveProps($,G),typeof E.UNSAFE_componentWillReceiveProps=="function"&&E.UNSAFE_componentWillReceiveProps($,G),E.state!==w&&Oc.enqueueReplaceState(E,E.state,null)}function Br(w,E,$,G){var Q=w.stateNode;Q.props=$,Q.state=w.memoizedState,Q.refs=Au,ep(w);var ce=E.contextType;typeof ce=="object"&&ce!==null?Q.context=Ua(ce):(ce=Ui(E)?gs:Yn.current,Q.context=Wr(w,ce)),Q.state=w.memoizedState,ce=E.getDerivedStateFromProps,typeof ce=="function"&&(Fm(w,E,ce,$),Q.state=w.memoizedState),typeof E.getDerivedStateFromProps=="function"||typeof Q.getSnapshotBeforeUpdate=="function"||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(E=Q.state,typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount(),E!==Q.state&&Oc.enqueueReplaceState(Q,Q.state,null),np(w,$,Q,G),Q.state=w.memoizedState),typeof Q.componentDidMount=="function"&&(w.flags|=4194308)}var Sl=[],Hh=0,rp=null,Pu=0,Va=[],Yr=0,Iu=null,gr=1,ma="";function Gr(w,E){Sl[Hh++]=Pu,Sl[Hh++]=rp,rp=w,Pu=E}function ci(w,E,$){Va[Yr++]=gr,Va[Yr++]=ma,Va[Yr++]=Iu,Iu=w;var G=gr;w=ma;var Q=32-vr(G)-1;G&=~(1<<Q),$+=1;var ce=32-vr(E)+Q;if(30<ce){var Ve=Q-Q%5;ce=(G&(1<<Ve)-1).toString(32),G>>=Ve,Q-=Ve,gr=1<<32-vr(E)+Q|$<<Q|G,ma=ce+w}else gr=1<<ce|$<<Q|G,ma=w}function ku(w){w.return!==null&&(Gr(w,1),ci(w,1,0))}function Gh(w){for(;w===rp;)rp=Sl[--Hh],Sl[Hh]=null,Pu=Sl[--Hh],Sl[Hh]=null;for(;w===Iu;)Iu=Va[--Yr],Va[Yr]=null,ma=Va[--Yr],Va[Yr]=null,gr=Va[--Yr],Va[Yr]=null}var Zs=null,vs=null,Si=!1,Dd=!1,Wa=null;function ip(w,E){var $=Ns(5,null,null,0);$.elementType="DELETED",$.stateNode=E,$.return=w,E=w.deletions,E===null?(w.deletions=[$],w.flags|=16):E.push($)}function Hy(w,E){switch(w.tag){case 5:return E=je(E,w.type,w.pendingProps),E!==null?(w.stateNode=E,Zs=w,vs=zn(E),!0):!1;case 6:return E=ot(E,w.pendingProps),E!==null?(w.stateNode=E,Zs=w,vs=null,!0):!1;case 13:if(E=Dt(E),E!==null){var $=Iu!==null?{id:gr,overflow:ma}:null;return w.memoizedState={dehydrated:E,treeContext:$,retryLane:1073741824},$=Ns(18,null,null,0),$.stateNode=E,$.return=w,w.child=$,Zs=w,vs=null,!0}return!1;default:return!1}}function op(w){return(w.mode&1)!==0&&(w.flags&128)===0}function Ru(w){if(Si){var E=vs;if(E){var $=E;if(!Hy(w,E)){if(op(w))throw Error(s(418));E=Nn($);var G=Zs;E&&Hy(w,E)?ip(G,$):(w.flags=w.flags&-4097|2,Si=!1,Zs=w)}}else{if(op(w))throw Error(s(418));w.flags=w.flags&-4097|2,Si=!1,Zs=w}}}function $m(w){for(w=w.return;w!==null&&w.tag!==5&&w.tag!==3&&w.tag!==13;)w=w.return;Zs=w}function qh(w){if(!tt||w!==Zs)return!1;if(!Si)return $m(w),Si=!0,!1;if(w.tag!==3&&(w.tag!==5||gn(w.type)&&!st(w.type,w.memoizedProps))){var E=vs;if(E){if(op(w)){for(w=vs;w;)w=Nn(w);throw Error(s(418))}for(;E;)ip(w,E),E=Nn(E)}}if($m(w),w.tag===13){if(!tt)throw Error(s(316));if(w=w.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(s(317));vs=Te(w)}else vs=Zs?Nn(w.stateNode):null;return!0}function Nd(){tt&&(vs=Zs=null,Dd=Si=!1)}function Yh(w){Wa===null?Wa=[w]:Wa.push(w)}function zd(w,E,$){if(w=$.ref,w!==null&&typeof w!="function"&&typeof w!="object"){if($._owner){if($=$._owner,$){if($.tag!==1)throw Error(s(309));var G=$.stateNode}if(!G)throw Error(s(147,w));var Q=G,ce=""+w;return E!==null&&E.ref!==null&&typeof E.ref=="function"&&E.ref._stringRef===ce?E.ref:(E=function(Ve){var yt=Q.refs;yt===Au&&(yt=Q.refs={}),Ve===null?delete yt[ce]:yt[ce]=Ve},E._stringRef=ce,E)}if(typeof w!="string")throw Error(s(284));if(!$._owner)throw Error(s(290,w))}return w}function jm(w,E){throw w=Object.prototype.toString.call(E),Error(s(31,w==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":w))}function Gy(w){var E=w._init;return E(w._payload)}function Zi(w){function E(kt,bt){if(w){var zt=kt.deletions;zt===null?(kt.deletions=[bt],kt.flags|=16):zt.push(bt)}}function $(kt,bt){if(!w)return null;for(;bt!==null;)E(kt,bt),bt=bt.sibling;return null}function G(kt,bt){for(kt=new Map;bt!==null;)bt.key!==null?kt.set(bt.key,bt):kt.set(bt.index,bt),bt=bt.sibling;return kt}function Q(kt,bt){return kt=jc(kt,bt),kt.index=0,kt.sibling=null,kt}function ce(kt,bt,zt){return kt.index=zt,w?(zt=kt.alternate,zt!==null?(zt=zt.index,zt<bt?(kt.flags|=2,bt):zt):(kt.flags|=2,bt)):(kt.flags|=1048576,bt)}function Ve(kt){return w&&kt.alternate===null&&(kt.flags|=2),kt}function yt(kt,bt,zt,Pn){return bt===null||bt.tag!==6?(bt=vp(zt,kt.mode,Pn),bt.return=kt,bt):(bt=Q(bt,zt),bt.return=kt,bt)}function jt(kt,bt,zt,Pn){var Jn=zt.type;return Jn===f?$n(kt,bt,zt.props.children,Pn,zt.key):bt!==null&&(bt.elementType===Jn||typeof Jn=="object"&&Jn!==null&&Jn.$$typeof===C&&Gy(Jn)===bt.type)?(Pn=Q(bt,zt.props),Pn.ref=zd(kt,bt,zt),Pn.return=kt,Pn):(Pn=ev(zt.type,zt.key,zt.props,null,kt.mode,Pn),Pn.ref=zd(kt,bt,zt),Pn.return=kt,Pn)}function pn(kt,bt,zt,Pn){return bt===null||bt.tag!==4||bt.stateNode.containerInfo!==zt.containerInfo||bt.stateNode.implementation!==zt.implementation?(bt=l_(zt,kt.mode,Pn),bt.return=kt,bt):(bt=Q(bt,zt.children||[]),bt.return=kt,bt)}function $n(kt,bt,zt,Pn,Jn){return bt===null||bt.tag!==7?(bt=Wu(zt,kt.mode,Pn,Jn),bt.return=kt,bt):(bt=Q(bt,zt),bt.return=kt,bt)}function Er(kt,bt,zt){if(typeof bt=="string"&&bt!==""||typeof bt=="number")return bt=vp(""+bt,kt.mode,zt),bt.return=kt,bt;if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case l:return zt=ev(bt.type,bt.key,bt.props,null,kt.mode,zt),zt.ref=zd(kt,null,bt),zt.return=kt,zt;case d:return bt=l_(bt,kt.mode,zt),bt.return=kt,bt;case C:var Pn=bt._init;return Er(kt,Pn(bt._payload),zt)}if(he(bt)||D(bt))return bt=Wu(bt,kt.mode,zt,null),bt.return=kt,bt;jm(kt,bt)}return null}function ar(kt,bt,zt,Pn){var Jn=bt!==null?bt.key:null;if(typeof zt=="string"&&zt!==""||typeof zt=="number")return Jn!==null?null:yt(kt,bt,""+zt,Pn);if(typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case l:return zt.key===Jn?jt(kt,bt,zt,Pn):null;case d:return zt.key===Jn?pn(kt,bt,zt,Pn):null;case C:return Jn=zt._init,ar(kt,bt,Jn(zt._payload),Pn)}if(he(zt)||D(zt))return Jn!==null?null:$n(kt,bt,zt,Pn,null);jm(kt,zt)}return null}function Xr(kt,bt,zt,Pn,Jn){if(typeof Pn=="string"&&Pn!==""||typeof Pn=="number")return kt=kt.get(zt)||null,yt(bt,kt,""+Pn,Jn);if(typeof Pn=="object"&&Pn!==null){switch(Pn.$$typeof){case l:return kt=kt.get(Pn.key===null?zt:Pn.key)||null,jt(bt,kt,Pn,Jn);case d:return kt=kt.get(Pn.key===null?zt:Pn.key)||null,pn(bt,kt,Pn,Jn);case C:var Pr=Pn._init;return Xr(kt,bt,zt,Pr(Pn._payload),Jn)}if(he(Pn)||D(Pn))return kt=kt.get(zt)||null,$n(bt,kt,Pn,Jn,null);jm(bt,Pn)}return null}function nr(kt,bt,zt,Pn){for(var Jn=null,Pr=null,Tr=bt,ii=bt=0,Ss=null;Tr!==null&&ii<zt.length;ii++){Tr.index>ii?(Ss=Tr,Tr=null):Ss=Tr.sibling;var Kr=ar(kt,Tr,zt[ii],Pn);if(Kr===null){Tr===null&&(Tr=Ss);break}w&&Tr&&Kr.alternate===null&&E(kt,Tr),bt=ce(Kr,bt,ii),Pr===null?Jn=Kr:Pr.sibling=Kr,Pr=Kr,Tr=Ss}if(ii===zt.length)return $(kt,Tr),Si&&Gr(kt,ii),Jn;if(Tr===null){for(;ii<zt.length;ii++)Tr=Er(kt,zt[ii],Pn),Tr!==null&&(bt=ce(Tr,bt,ii),Pr===null?Jn=Tr:Pr.sibling=Tr,Pr=Tr);return Si&&Gr(kt,ii),Jn}for(Tr=G(kt,Tr);ii<zt.length;ii++)Ss=Xr(Tr,kt,ii,zt[ii],Pn),Ss!==null&&(w&&Ss.alternate!==null&&Tr.delete(Ss.key===null?ii:Ss.key),bt=ce(Ss,bt,ii),Pr===null?Jn=Ss:Pr.sibling=Ss,Pr=Ss);return w&&Tr.forEach(function(lc){return E(kt,lc)}),Si&&Gr(kt,ii),Jn}function zs(kt,bt,zt,Pn){var Jn=D(zt);if(typeof Jn!="function")throw Error(s(150));if(zt=Jn.call(zt),zt==null)throw Error(s(151));for(var Pr=Jn=null,Tr=bt,ii=bt=0,Ss=null,Kr=zt.next();Tr!==null&&!Kr.done;ii++,Kr=zt.next()){Tr.index>ii?(Ss=Tr,Tr=null):Ss=Tr.sibling;var lc=ar(kt,Tr,Kr.value,Pn);if(lc===null){Tr===null&&(Tr=Ss);break}w&&Tr&&lc.alternate===null&&E(kt,Tr),bt=ce(lc,bt,ii),Pr===null?Jn=lc:Pr.sibling=lc,Pr=lc,Tr=Ss}if(Kr.done)return $(kt,Tr),Si&&Gr(kt,ii),Jn;if(Tr===null){for(;!Kr.done;ii++,Kr=zt.next())Kr=Er(kt,Kr.value,Pn),Kr!==null&&(bt=ce(Kr,bt,ii),Pr===null?Jn=Kr:Pr.sibling=Kr,Pr=Kr);return Si&&Gr(kt,ii),Jn}for(Tr=G(kt,Tr);!Kr.done;ii++,Kr=zt.next())Kr=Xr(Tr,kt,ii,Kr.value,Pn),Kr!==null&&(w&&Kr.alternate!==null&&Tr.delete(Kr.key===null?ii:Kr.key),bt=ce(Kr,bt,ii),Pr===null?Jn=Kr:Pr.sibling=Kr,Pr=Kr);return w&&Tr.forEach(function(ew){return E(kt,ew)}),Si&&Gr(kt,ii),Jn}function Fs(kt,bt,zt,Pn){if(typeof zt=="object"&&zt!==null&&zt.type===f&&zt.key===null&&(zt=zt.props.children),typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case l:e:{for(var Jn=zt.key,Pr=bt;Pr!==null;){if(Pr.key===Jn){if(Jn=zt.type,Jn===f){if(Pr.tag===7){$(kt,Pr.sibling),bt=Q(Pr,zt.props.children),bt.return=kt,kt=bt;break e}}else if(Pr.elementType===Jn||typeof Jn=="object"&&Jn!==null&&Jn.$$typeof===C&&Gy(Jn)===Pr.type){$(kt,Pr.sibling),bt=Q(Pr,zt.props),bt.ref=zd(kt,Pr,zt),bt.return=kt,kt=bt;break e}$(kt,Pr);break}else E(kt,Pr);Pr=Pr.sibling}zt.type===f?(bt=Wu(zt.props.children,kt.mode,Pn,zt.key),bt.return=kt,kt=bt):(Pn=ev(zt.type,zt.key,zt.props,null,kt.mode,Pn),Pn.ref=zd(kt,bt,zt),Pn.return=kt,kt=Pn)}return Ve(kt);case d:e:{for(Pr=zt.key;bt!==null;){if(bt.key===Pr)if(bt.tag===4&&bt.stateNode.containerInfo===zt.containerInfo&&bt.stateNode.implementation===zt.implementation){$(kt,bt.sibling),bt=Q(bt,zt.children||[]),bt.return=kt,kt=bt;break e}else{$(kt,bt);break}else E(kt,bt);bt=bt.sibling}bt=l_(zt,kt.mode,Pn),bt.return=kt,kt=bt}return Ve(kt);case C:return Pr=zt._init,Fs(kt,bt,Pr(zt._payload),Pn)}if(he(zt))return nr(kt,bt,zt,Pn);if(D(zt))return zs(kt,bt,zt,Pn);jm(kt,zt)}return typeof zt=="string"&&zt!==""||typeof zt=="number"?(zt=""+zt,bt!==null&&bt.tag===6?($(kt,bt.sibling),bt=Q(bt,zt),bt.return=kt,kt=bt):($(kt,bt),bt=vp(zt,kt.mode,Pn),bt.return=kt,kt=bt),Ve(kt)):$(kt,bt)}return Fs}var ga=Zi(!0),Js=Zi(!1),nc={},Qs=Vr(nc),Fd=Vr(nc),Ml=Vr(nc);function _s(w){if(w===nc)throw Error(s(174));return w}function Ou(w,E){Rn(Ml,E),Rn(Fd,w),Rn(Qs,nc),w=be(E),qn(Qs),Rn(Qs,w)}function rc(){qn(Qs),qn(Fd),qn(Ml)}function Um(w){var E=_s(Ml.current),$=_s(Qs.current);E=ie($,w.type,E),$!==E&&(Rn(Fd,w),Rn(Qs,E))}function Xh(w){Fd.current===w&&(qn(Qs),qn(Fd))}var Li=Vr(0);function Kh(w){for(var E=w;E!==null;){if(E.tag===13){var $=E.memoizedState;if($!==null&&($=$.dehydrated,$===null||It($)||Nt($)))return E}else if(E.tag===19&&E.memoizedProps.revealOrder!==void 0){if(E.flags&128)return E}else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===w)break;for(;E.sibling===null;){if(E.return===null||E.return===w)return null;E=E.return}E.sibling.return=E.return,E=E.sibling}return null}var Ha=[];function Vm(){for(var w=0;w<Ha.length;w++){var E=Ha[w];at?E._workInProgressVersionPrimary=null:E._workInProgressVersionSecondary=null}Ha.length=0}var sp=a.ReactCurrentDispatcher,ya=a.ReactCurrentBatchConfig,Bd=0,Ji=null,xo=null,io=null,uo=!1,ic=!1,xs=0,oc=0;function Zo(){throw Error(s(321))}function bs(w,E){if(E===null)return!1;for(var $=0;$<E.length&&$<w.length;$++)if(!Ql(w[$],E[$]))return!1;return!0}function Lu(w,E,$,G,Q,ce){if(Bd=ce,Ji=E,E.memoizedState=null,E.updateQueue=null,E.lanes=0,sp.current=w===null||w.memoizedState===null?ea:Q0,w=$(G,Q),ic){ce=0;do{if(ic=!1,xs=0,25<=ce)throw Error(s(301));ce+=1,io=xo=null,E.updateQueue=null,sp.current=Cl,w=$(G,Q)}while(ic)}if(sp.current=$u,E=xo!==null&&xo.next!==null,Bd=0,io=xo=Ji=null,uo=!1,E)throw Error(s(300));return w}function ap(){var w=xs!==0;return xs=0,w}function Lc(){var w={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return io===null?Ji.memoizedState=io=w:io=io.next=w,io}function Ga(){if(xo===null){var w=Ji.alternate;w=w!==null?w.memoizedState:null}else w=xo.next;var E=io===null?Ji.memoizedState:io.next;if(E!==null)io=E,xo=w;else{if(w===null)throw Error(s(310));xo=w,w={memoizedState:xo.memoizedState,baseState:xo.baseState,baseQueue:xo.baseQueue,queue:xo.queue,next:null},io===null?Ji.memoizedState=io=w:io=io.next=w}return io}function Du(w,E){return typeof E=="function"?E(w):E}function qa(w){var E=Ga(),$=E.queue;if($===null)throw Error(s(311));$.lastRenderedReducer=w;var G=xo,Q=G.baseQueue,ce=$.pending;if(ce!==null){if(Q!==null){var Ve=Q.next;Q.next=ce.next,ce.next=Ve}G.baseQueue=Q=ce,$.pending=null}if(Q!==null){ce=Q.next,G=G.baseState;var yt=Ve=null,jt=null,pn=ce;do{var $n=pn.lane;if((Bd&$n)===$n)jt!==null&&(jt=jt.next={lane:0,action:pn.action,hasEagerState:pn.hasEagerState,eagerState:pn.eagerState,next:null}),G=pn.hasEagerState?pn.eagerState:w(G,pn.action);else{var Er={lane:$n,action:pn.action,hasEagerState:pn.hasEagerState,eagerState:pn.eagerState,next:null};jt===null?(yt=jt=Er,Ve=G):jt=jt.next=Er,Ji.lanes|=$n,Xd|=$n}pn=pn.next}while(pn!==null&&pn!==ce);jt===null?Ve=G:jt.next=yt,Ql(G,E.memoizedState)||($o=!0),E.memoizedState=G,E.baseState=Ve,E.baseQueue=jt,$.lastRenderedState=G}if(w=$.interleaved,w!==null){Q=w;do ce=Q.lane,Ji.lanes|=ce,Xd|=ce,Q=Q.next;while(Q!==w)}else Q===null&&($.lanes=0);return[E.memoizedState,$.dispatch]}function El(w){var E=Ga(),$=E.queue;if($===null)throw Error(s(311));$.lastRenderedReducer=w;var G=$.dispatch,Q=$.pending,ce=E.memoizedState;if(Q!==null){$.pending=null;var Ve=Q=Q.next;do ce=w(ce,Ve.action),Ve=Ve.next;while(Ve!==Q);Ql(ce,E.memoizedState)||($o=!0),E.memoizedState=ce,E.baseQueue===null&&(E.baseState=ce),$.lastRenderedState=ce}return[ce,G]}function wn(){}function Wm(w,E){var $=Ji,G=Ga(),Q=E(),ce=!Ql(G.memoizedState,Q);if(ce&&(G.memoizedState=Q,$o=!0),G=G.queue,Vd(Hm.bind(null,$,G,w),[w]),G.getSnapshot!==E||ce||io!==null&&io.memoizedState.tag&1){if($.flags|=2048,zu(9,$d.bind(null,$,G,Q,E),void 0,null),ki===null)throw Error(s(349));Bd&30||Nu($,E,Q)}return Q}function Nu(w,E,$){w.flags|=16384,w={getSnapshot:E,value:$},E=Ji.updateQueue,E===null?(E={lastEffect:null,stores:null},Ji.updateQueue=E,E.stores=[w]):($=E.stores,$===null?E.stores=[w]:$.push(w))}function $d(w,E,$,G){E.value=$,E.getSnapshot=G,yn(E)&&wa(w,1,-1)}function Hm(w,E,$){return $(function(){yn(E)&&wa(w,1,-1)})}function yn(w){var E=w.getSnapshot;w=w.value;try{var $=E();return!Ql(w,$)}catch{return!0}}function jd(w){var E=Lc();return typeof w=="function"&&(w=w()),E.memoizedState=E.baseState=w,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Du,lastRenderedState:w},E.queue=w,w=w.dispatch=up.bind(null,Ji,w),[E.memoizedState,w]}function zu(w,E,$,G){return w={tag:w,create:E,destroy:$,deps:G,next:null},E=Ji.updateQueue,E===null?(E={lastEffect:null,stores:null},Ji.updateQueue=E,E.lastEffect=w.next=w):($=E.lastEffect,$===null?E.lastEffect=w.next=w:(G=$.next,$.next=w,w.next=G,E.lastEffect=w)),w}function qy(){return Ga().memoizedState}function Ud(w,E,$,G){var Q=Lc();Ji.flags|=w,Q.memoizedState=zu(1|E,$,void 0,G===void 0?null:G)}function Zh(w,E,$,G){var Q=Ga();G=G===void 0?null:G;var ce=void 0;if(xo!==null){var Ve=xo.memoizedState;if(ce=Ve.destroy,G!==null&&bs(G,Ve.deps)){Q.memoizedState=zu(E,$,ce,G);return}}Ji.flags|=w,Q.memoizedState=zu(1|E,$,ce,G)}function lp(w,E){return Ud(8390656,8,w,E)}function Vd(w,E){return Zh(2048,8,w,E)}function Yy(w,E){return Zh(4,2,w,E)}function Fu(w,E){return Zh(4,4,w,E)}function Mi(w,E){if(typeof E=="function")return w=w(),E(w),function(){E(null)};if(E!=null)return w=w(),E.current=w,function(){E.current=null}}function cp(w,E,$){return $=$!=null?$.concat([w]):null,Zh(4,4,Mi.bind(null,E,w),$)}function Jh(){}function Gm(w,E){var $=Ga();E=E===void 0?null:E;var G=$.memoizedState;return G!==null&&E!==null&&bs(E,G[1])?G[0]:($.memoizedState=[w,E],w)}function qm(w,E){var $=Ga();E=E===void 0?null:E;var G=$.memoizedState;return G!==null&&E!==null&&bs(E,G[1])?G[0]:(w=w(),$.memoizedState=[w,E],w)}function Z0(w,E){var $=Hr;Hr=$!==0&&4>$?$:4,w(!0);var G=ya.transition;ya.transition={};try{w(!1),E()}finally{Hr=$,ya.transition=G}}function J0(){return Ga().memoizedState}function Tl(w,E,$){var G=of(w);$={lane:G,action:$,hasEagerState:!1,eagerState:null,next:null},On(w)?Xn(E,$):(Bu(w,E,$),$=es(),w=wa(w,G,$),w!==null&&Ym(w,E,G))}function up(w,E,$){var G=of(w),Q={lane:G,action:$,hasEagerState:!1,eagerState:null,next:null};if(On(w))Xn(E,Q);else{Bu(w,E,Q);var ce=w.alternate;if(w.lanes===0&&(ce===null||ce.lanes===0)&&(ce=E.lastRenderedReducer,ce!==null))try{var Ve=E.lastRenderedState,yt=ce(Ve,$);if(Q.hasEagerState=!0,Q.eagerState=yt,Ql(yt,Ve))return}catch{}finally{}$=es(),w=wa(w,G,$),w!==null&&Ym(w,E,G)}}function On(w){var E=w.alternate;return w===Ji||E!==null&&E===Ji}function Xn(w,E){ic=uo=!0;var $=w.pending;$===null?E.next=E:(E.next=$.next,$.next=E),w.pending=E}function Bu(w,E,$){ki!==null&&w.mode&1&&!(Cr&2)?(w=E.interleaved,w===null?($.next=$,ec===null?ec=[E]:ec.push(E)):($.next=w.next,w.next=$),E.interleaved=$):(w=E.pending,w===null?$.next=$:($.next=w.next,w.next=$),E.pending=$)}function Ym(w,E,$){if($&4194240){var G=E.lanes;G&=w.pendingLanes,$|=G,E.lanes=$,Zf(w,$)}}var $u={readContext:Ua,useCallback:Zo,useContext:Zo,useEffect:Zo,useImperativeHandle:Zo,useInsertionEffect:Zo,useLayoutEffect:Zo,useMemo:Zo,useReducer:Zo,useRef:Zo,useState:Zo,useDebugValue:Zo,useDeferredValue:Zo,useTransition:Zo,useMutableSource:Zo,useSyncExternalStore:Zo,useId:Zo,unstable_isNewReconciler:!1},ea={readContext:Ua,useCallback:function(w,E){return Lc().memoizedState=[w,E===void 0?null:E],w},useContext:Ua,useEffect:lp,useImperativeHandle:function(w,E,$){return $=$!=null?$.concat([w]):null,Ud(4194308,4,Mi.bind(null,E,w),$)},useLayoutEffect:function(w,E){return Ud(4194308,4,w,E)},useInsertionEffect:function(w,E){return Ud(4,2,w,E)},useMemo:function(w,E){var $=Lc();return E=E===void 0?null:E,w=w(),$.memoizedState=[w,E],w},useReducer:function(w,E,$){var G=Lc();return E=$!==void 0?$(E):E,G.memoizedState=G.baseState=E,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:w,lastRenderedState:E},G.queue=w,w=w.dispatch=Tl.bind(null,Ji,w),[G.memoizedState,w]},useRef:function(w){var E=Lc();return w={current:w},E.memoizedState=w},useState:jd,useDebugValue:Jh,useDeferredValue:function(w){var E=jd(w),$=E[0],G=E[1];return lp(function(){var Q=ya.transition;ya.transition={};try{G(w)}finally{ya.transition=Q}},[w]),$},useTransition:function(){var w=jd(!1),E=w[0];return w=Z0.bind(null,w[1]),Lc().memoizedState=w,[E,w]},useMutableSource:function(){},useSyncExternalStore:function(w,E,$){var G=Ji,Q=Lc();if(Si){if($===void 0)throw Error(s(407));$=$()}else{if($=E(),ki===null)throw Error(s(349));Bd&30||Nu(G,E,$)}Q.memoizedState=$;var ce={value:$,getSnapshot:E};return Q.queue=ce,lp(Hm.bind(null,G,ce,w),[w]),G.flags|=2048,zu(9,$d.bind(null,G,ce,$,E),void 0,null),$},useId:function(){var w=Lc(),E=ki.identifierPrefix;if(Si){var $=ma,G=gr;$=(G&~(1<<32-vr(G)-1)).toString(32)+$,E=":"+E+"R"+$,$=xs++,0<$&&(E+="H"+$.toString(32)),E+=":"}else $=oc++,E=":"+E+"r"+$.toString(32)+":";return w.memoizedState=E},unstable_isNewReconciler:!1},Q0={readContext:Ua,useCallback:Gm,useContext:Ua,useEffect:Vd,useImperativeHandle:cp,useInsertionEffect:Yy,useLayoutEffect:Fu,useMemo:qm,useReducer:qa,useRef:qy,useState:function(){return qa(Du)},useDebugValue:Jh,useDeferredValue:function(w){var E=qa(Du),$=E[0],G=E[1];return Vd(function(){var Q=ya.transition;ya.transition={};try{G(w)}finally{ya.transition=Q}},[w]),$},useTransition:function(){var w=qa(Du)[0],E=Ga().memoizedState;return[w,E]},useMutableSource:wn,useSyncExternalStore:Wm,useId:J0,unstable_isNewReconciler:!1},Cl={readContext:Ua,useCallback:Gm,useContext:Ua,useEffect:Vd,useImperativeHandle:cp,useInsertionEffect:Yy,useLayoutEffect:Fu,useMemo:qm,useReducer:El,useRef:qy,useState:function(){return El(Du)},useDebugValue:Jh,useDeferredValue:function(w){var E=El(Du),$=E[0],G=E[1];return Vd(function(){var Q=ya.transition;ya.transition={};try{G(w)}finally{ya.transition=Q}},[w]),$},useTransition:function(){var w=El(Du)[0],E=Ga().memoizedState;return[w,E]},useMutableSource:wn,useSyncExternalStore:Wm,useId:J0,unstable_isNewReconciler:!1};function Xm(w,E){try{var $="",G=E;do $+=$y(G),G=G.return;while(G);var Q=$}catch(ce){Q=`
Error generating stack: `+ce.message+`
`+ce.stack}return{value:w,source:E,stack:Q}}function ju(w,E){try{console.error(E.value)}catch($){setTimeout(function(){throw $})}}var Qi=typeof WeakMap=="function"?WeakMap:Map;function oo(w,E,$){$=wl(-1,$),$.tag=3,$.payload={element:null};var G=E.value;return $.callback=function(){nf||(nf=!0,rg=G),ju(w,E)},$}function Xy(w,E,$){$=wl(-1,$),$.tag=3;var G=w.type.getDerivedStateFromError;if(typeof G=="function"){var Q=E.value;$.payload=function(){return G(Q)},$.callback=function(){ju(w,E)}}var ce=w.stateNode;return ce!==null&&typeof ce.componentDidCatch=="function"&&($.callback=function(){ju(w,E),typeof G!="function"&&(Bc===null?Bc=new Set([this]):Bc.add(this));var Ve=E.stack;this.componentDidCatch(E.value,{componentStack:Ve!==null?Ve:""})}),$}function Qh(w,E,$){var G=w.pingCache;if(G===null){G=w.pingCache=new Qi;var Q=new Set;G.set(E,Q)}else Q=G.get(E),Q===void 0&&(Q=new Set,G.set(E,Q));Q.has($)||(Q.add($),w=lL.bind(null,w,E,$),E.then(w,w))}function dp(w){do{var E;if((E=w.tag===13)&&(E=w.memoizedState,E=E!==null?E.dehydrated!==null:!0),E)return w;w=w.return}while(w!==null);return null}function Dc(w,E,$,G,Q){return w.mode&1?(w.flags|=65536,w.lanes=Q,w):(w===E?w.flags|=65536:(w.flags|=128,$.flags|=131072,$.flags&=-52805,$.tag===1&&($.alternate===null?$.tag=17:(E=wl(-1,1),E.tag=2,tc($,E))),$.lanes|=1),w)}function Ya(w){w.flags|=4}function Km(w,E){if(w!==null&&w.child===E.child)return!0;if(E.flags&16)return!1;for(w=E.child;w!==null;){if(w.flags&12854||w.subtreeFlags&12854)return!1;w=w.sibling}return!0}var Nc,Wd,Hd,ef;if(nt)Nc=function(w,E){for(var $=E.child;$!==null;){if($.tag===5||$.tag===6)Ge(w,$.stateNode);else if($.tag!==4&&$.child!==null){$.child.return=$,$=$.child;continue}if($===E)break;for(;$.sibling===null;){if($.return===null||$.return===E)return;$=$.return}$.sibling.return=$.return,$=$.sibling}},Wd=function(){},Hd=function(w,E,$,G,Q){if(w=w.memoizedProps,w!==G){var ce=E.stateNode,Ve=_s(Qs.current);$=Ue(ce,$,w,G,Q,Ve),(E.updateQueue=$)&&Ya(E)}},ef=function(w,E,$,G){$!==G&&Ya(E)};else if(ge){Nc=function(w,E,$,G){for(var Q=E.child;Q!==null;){if(Q.tag===5){var ce=Q.stateNode;$&&G&&(ce=Ye(ce,Q.type,Q.memoizedProps,Q)),Ge(w,ce)}else if(Q.tag===6)ce=Q.stateNode,$&&G&&(ce=et(ce,Q.memoizedProps,Q)),Ge(w,ce);else if(Q.tag!==4){if(Q.tag===22&&Q.memoizedState!==null)ce=Q.child,ce!==null&&(ce.return=Q),Nc(w,Q,!0,!0);else if(Q.child!==null){Q.child.return=Q,Q=Q.child;continue}}if(Q===E)break;for(;Q.sibling===null;){if(Q.return===null||Q.return===E)return;Q=Q.return}Q.sibling.return=Q.return,Q=Q.sibling}};var Zm=function(w,E,$,G){for(var Q=E.child;Q!==null;){if(Q.tag===5){var ce=Q.stateNode;$&&G&&(ce=Ye(ce,Q.type,Q.memoizedProps,Q)),me(w,ce)}else if(Q.tag===6)ce=Q.stateNode,$&&G&&(ce=et(ce,Q.memoizedProps,Q)),me(w,ce);else if(Q.tag!==4){if(Q.tag===22&&Q.memoizedState!==null)ce=Q.child,ce!==null&&(ce.return=Q),Zm(w,Q,!0,!0);else if(Q.child!==null){Q.child.return=Q,Q=Q.child;continue}}if(Q===E)break;for(;Q.sibling===null;){if(Q.return===null||Q.return===E)return;Q=Q.return}Q.sibling.return=Q.return,Q=Q.sibling}};Wd=function(w,E){var $=E.stateNode;if(!Km(w,E)){w=$.containerInfo;var G=se(w);Zm(G,E,!1,!1),$.pendingChildren=G,Ya(E),Ce(w,G)}},Hd=function(w,E,$,G,Q){var ce=w.stateNode,Ve=w.memoizedProps;if((w=Km(w,E))&&Ve===G)E.stateNode=ce;else{var yt=E.stateNode,jt=_s(Qs.current),pn=null;Ve!==G&&(pn=Ue(yt,$,Ve,G,Q,jt)),w&&pn===null?E.stateNode=ce:(ce=ee(ce,pn,$,Ve,G,E,w,yt),dt(ce,$,G,Q,jt)&&Ya(E),E.stateNode=ce,w?Ya(E):Nc(ce,E,!1,!1))}},ef=function(w,E,$,G){$!==G?(w=_s(Ml.current),$=_s(Qs.current),E.stateNode=lt(G,w,$,E),Ya(E)):E.stateNode=w.stateNode}}else Wd=function(){},Hd=function(){},ef=function(){};function va(w,E){if(!Si)switch(w.tailMode){case"hidden":E=w.tail;for(var $=null;E!==null;)E.alternate!==null&&($=E),E=E.sibling;$===null?w.tail=null:$.sibling=null;break;case"collapsed":$=w.tail;for(var G=null;$!==null;)$.alternate!==null&&(G=$),$=$.sibling;G===null?E||w.tail===null?w.tail=null:w.tail.sibling=null:G.sibling=null}}function Ro(w){var E=w.alternate!==null&&w.alternate.child===w.child,$=0,G=0;if(E)for(var Q=w.child;Q!==null;)$|=Q.lanes|Q.childLanes,G|=Q.subtreeFlags&14680064,G|=Q.flags&14680064,Q.return=w,Q=Q.sibling;else for(Q=w.child;Q!==null;)$|=Q.lanes|Q.childLanes,G|=Q.subtreeFlags,G|=Q.flags,Q.return=w,Q=Q.sibling;return w.subtreeFlags|=G,w.childLanes=$,E}function hp(w,E,$){var G=E.pendingProps;switch(Gh(E),E.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ro(E),null;case 1:return Ui(E.type)&&ei(),Ro(E),null;case 3:return G=E.stateNode,rc(),qn(Ii),qn(Yn),Vm(),G.pendingContext&&(G.context=G.pendingContext,G.pendingContext=null),(w===null||w.child===null)&&(qh(E)?Ya(E):w===null||w.memoizedState.isDehydrated&&!(E.flags&256)||(E.flags|=1024,Wa!==null&&(q1(Wa),Wa=null))),Wd(w,E),Ro(E),null;case 5:Xh(E),$=_s(Ml.current);var Q=E.type;if(w!==null&&E.stateNode!=null)Hd(w,E,Q,G,$),w.ref!==E.ref&&(E.flags|=512,E.flags|=2097152);else{if(!G){if(E.stateNode===null)throw Error(s(166));return Ro(E),null}if(w=_s(Qs.current),qh(E)){if(!tt)throw Error(s(175));w=Qr(E.stateNode,E.type,E.memoizedProps,$,w,E,!Dd),E.updateQueue=w,w!==null&&Ya(E)}else{var ce=Ne(Q,G,$,w,E);Nc(ce,E,!1,!1),E.stateNode=ce,dt(ce,Q,G,$,w)&&Ya(E)}E.ref!==null&&(E.flags|=512,E.flags|=2097152)}return Ro(E),null;case 6:if(w&&E.stateNode!=null)ef(w,E,w.memoizedProps,G);else{if(typeof G!="string"&&E.stateNode===null)throw Error(s(166));if(w=_s(Ml.current),$=_s(Qs.current),qh(E)){if(!tt)throw Error(s(176));if(w=E.stateNode,G=E.memoizedProps,($=Ur(w,G,E,!Dd))&&(Q=Zs,Q!==null))switch(ce=(Q.mode&1)!==0,Q.tag){case 3:In(Q.stateNode.containerInfo,w,G,ce);break;case 5:ir(Q.type,Q.memoizedProps,Q.stateNode,w,G,ce)}$&&Ya(E)}else E.stateNode=lt(G,w,$,E)}return Ro(E),null;case 13:if(qn(Li),G=E.memoizedState,Si&&vs!==null&&E.mode&1&&!(E.flags&128)){for(w=vs;w;)w=Nn(w);return Nd(),E.flags|=98560,E}if(G!==null&&G.dehydrated!==null){if(G=qh(E),w===null){if(!G)throw Error(s(318));if(!tt)throw Error(s(344));if(w=E.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(s(317));Oi(w,E)}else Nd(),!(E.flags&128)&&(E.memoizedState=null),E.flags|=4;return Ro(E),null}return Wa!==null&&(q1(Wa),Wa=null),E.flags&128?(E.lanes=$,E):(G=G!==null,$=!1,w===null?qh(E):$=w.memoizedState!==null,G&&!$&&(E.child.flags|=8192,E.mode&1&&(w===null||Li.current&1?wo===0&&(wo=3):K1())),E.updateQueue!==null&&(E.flags|=4),Ro(E),null);case 4:return rc(),Wd(w,E),w===null&&vt(E.stateNode.containerInfo),Ro(E),null;case 10:return jy(E.type._context),Ro(E),null;case 17:return Ui(E.type)&&ei(),Ro(E),null;case 19:if(qn(Li),Q=E.memoizedState,Q===null)return Ro(E),null;if(G=(E.flags&128)!==0,ce=Q.rendering,ce===null)if(G)va(Q,!1);else{if(wo!==0||w!==null&&w.flags&128)for(w=E.child;w!==null;){if(ce=Kh(w),ce!==null){for(E.flags|=128,va(Q,!1),w=ce.updateQueue,w!==null&&(E.updateQueue=w,E.flags|=4),E.subtreeFlags=0,w=$,G=E.child;G!==null;)$=G,Q=w,$.flags&=14680066,ce=$.alternate,ce===null?($.childLanes=0,$.lanes=Q,$.child=null,$.subtreeFlags=0,$.memoizedProps=null,$.memoizedState=null,$.updateQueue=null,$.dependencies=null,$.stateNode=null):($.childLanes=ce.childLanes,$.lanes=ce.lanes,$.child=ce.child,$.subtreeFlags=0,$.deletions=null,$.memoizedProps=ce.memoizedProps,$.memoizedState=ce.memoizedState,$.updateQueue=ce.updateQueue,$.type=ce.type,Q=ce.dependencies,$.dependencies=Q===null?null:{lanes:Q.lanes,firstContext:Q.firstContext}),G=G.sibling;return Rn(Li,Li.current&1|2),E.child}w=w.sibling}Q.tail!==null&&ro()>tf&&(E.flags|=128,G=!0,va(Q,!1),E.lanes=4194304)}else{if(!G)if(w=Kh(ce),w!==null){if(E.flags|=128,G=!0,w=w.updateQueue,w!==null&&(E.updateQueue=w,E.flags|=4),va(Q,!0),Q.tail===null&&Q.tailMode==="hidden"&&!ce.alternate&&!Si)return Ro(E),null}else 2*ro()-Q.renderingStartTime>tf&&$!==1073741824&&(E.flags|=128,G=!0,va(Q,!1),E.lanes=4194304);Q.isBackwards?(ce.sibling=E.child,E.child=ce):(w=Q.last,w!==null?w.sibling=ce:E.child=ce,Q.last=ce)}return Q.tail!==null?(E=Q.tail,Q.rendering=E,Q.tail=E.sibling,Q.renderingStartTime=ro(),E.sibling=null,w=Li.current,Rn(Li,G?w&1|2:w&1),E):(Ro(E),null);case 22:case 23:return Ma(),G=E.memoizedState!==null,w!==null&&w.memoizedState!==null!==G&&(E.flags|=8192),G&&E.mode&1?Ds&1073741824&&(Ro(E),nt&&E.subtreeFlags&6&&(E.flags|=8192)):Ro(E),null;case 24:return null;case 25:return null}throw Error(s(156,E.tag))}var Jm=a.ReactCurrentOwner,$o=!1;function Jo(w,E,$,G){E.child=w===null?Js(E,null,$,G):ga(E,w.child,$,G)}function Gd(w,E,$,G,Q){$=$.render;var ce=E.ref;return Wh(E,Q),G=Lu(w,E,$,G,ce,Q),$=ap(),w!==null&&!$o?(E.updateQueue=w.updateQueue,E.flags&=-2053,w.lanes&=~Q,de(w,E,Q)):(Si&&$&&ku(E),E.flags|=1,Jo(w,E,G,Q),E.child)}function zc(w,E,$,G,Q){if(w===null){var ce=$.type;return typeof ce=="function"&&!Z1(ce)&&ce.defaultProps===void 0&&$.compare===null&&$.defaultProps===void 0?(E.tag=15,E.type=ce,Qm(w,E,ce,G,Q)):(w=ev($.type,null,G,E,E.mode,Q),w.ref=E.ref,w.return=E,E.child=w)}if(ce=w.child,!(w.lanes&Q)){var Ve=ce.memoizedProps;if($=$.compare,$=$!==null?$:jh,$(Ve,G)&&w.ref===E.ref)return de(w,E,Q)}return E.flags|=1,w=jc(ce,G),w.ref=E.ref,w.return=E,E.child=w}function Qm(w,E,$,G,Q){if(w!==null&&jh(w.memoizedProps,G)&&w.ref===E.ref)if($o=!1,(w.lanes&Q)!==0)w.flags&131072&&($o=!0);else return E.lanes=w.lanes,de(w,E,Q);return pp(w,E,$,G,Q)}function fp(w,E,$){var G=E.pendingProps,Q=G.children,ce=w!==null?w.memoizedState:null;if(G.mode==="hidden")if(!(E.mode&1))E.memoizedState={baseLanes:0,cachePool:null},Rn(Xa,Ds),Ds|=$;else if($&1073741824)E.memoizedState={baseLanes:0,cachePool:null},G=ce!==null?ce.baseLanes:$,Rn(Xa,Ds),Ds|=G;else return w=ce!==null?ce.baseLanes|$:$,E.lanes=E.childLanes=1073741824,E.memoizedState={baseLanes:w,cachePool:null},E.updateQueue=null,Rn(Xa,Ds),Ds|=w,null;else ce!==null?(G=ce.baseLanes|$,E.memoizedState=null):G=$,Rn(Xa,Ds),Ds|=G;return Jo(w,E,Q,$),E.child}function Uu(w,E){var $=E.ref;(w===null&&$!==null||w!==null&&w.ref!==$)&&(E.flags|=512,E.flags|=2097152)}function pp(w,E,$,G,Q){var ce=Ui($)?gs:Yn.current;return ce=Wr(E,ce),Wh(E,Q),$=Lu(w,E,$,G,ce,Q),G=ap(),w!==null&&!$o?(E.updateQueue=w.updateQueue,E.flags&=-2053,w.lanes&=~Q,de(w,E,Q)):(Si&&G&&ku(E),E.flags|=1,Jo(w,E,$,Q),E.child)}function eg(w,E,$,G,Q){if(Ui($)){var ce=!0;ko(E)}else ce=!1;if(Wh(E,Q),E.stateNode===null)w!==null&&(w.alternate=null,E.alternate=null,E.flags|=2),Wy(E,$,G),Br(E,$,G,Q),G=!0;else if(w===null){var Ve=E.stateNode,yt=E.memoizedProps;Ve.props=yt;var jt=Ve.context,pn=$.contextType;typeof pn=="object"&&pn!==null?pn=Ua(pn):(pn=Ui($)?gs:Yn.current,pn=Wr(E,pn));var $n=$.getDerivedStateFromProps,Er=typeof $n=="function"||typeof Ve.getSnapshotBeforeUpdate=="function";Er||typeof Ve.UNSAFE_componentWillReceiveProps!="function"&&typeof Ve.componentWillReceiveProps!="function"||(yt!==G||jt!==pn)&&Bm(E,Ve,G,pn),Cu=!1;var ar=E.memoizedState;Ve.state=ar,np(E,G,Ve,Q),jt=E.memoizedState,yt!==G||ar!==jt||Ii.current||Cu?(typeof $n=="function"&&(Fm(E,$,$n,G),jt=E.memoizedState),(yt=Cu||Ld(E,$,yt,G,ar,jt,pn))?(Er||typeof Ve.UNSAFE_componentWillMount!="function"&&typeof Ve.componentWillMount!="function"||(typeof Ve.componentWillMount=="function"&&Ve.componentWillMount(),typeof Ve.UNSAFE_componentWillMount=="function"&&Ve.UNSAFE_componentWillMount()),typeof Ve.componentDidMount=="function"&&(E.flags|=4194308)):(typeof Ve.componentDidMount=="function"&&(E.flags|=4194308),E.memoizedProps=G,E.memoizedState=jt),Ve.props=G,Ve.state=jt,Ve.context=pn,G=yt):(typeof Ve.componentDidMount=="function"&&(E.flags|=4194308),G=!1)}else{Ve=E.stateNode,tp(w,E),yt=E.memoizedProps,pn=E.type===E.elementType?yt:Ks(E.type,yt),Ve.props=pn,Er=E.pendingProps,ar=Ve.context,jt=$.contextType,typeof jt=="object"&&jt!==null?jt=Ua(jt):(jt=Ui($)?gs:Yn.current,jt=Wr(E,jt));var Xr=$.getDerivedStateFromProps;($n=typeof Xr=="function"||typeof Ve.getSnapshotBeforeUpdate=="function")||typeof Ve.UNSAFE_componentWillReceiveProps!="function"&&typeof Ve.componentWillReceiveProps!="function"||(yt!==Er||ar!==jt)&&Bm(E,Ve,G,jt),Cu=!1,ar=E.memoizedState,Ve.state=ar,np(E,G,Ve,Q);var nr=E.memoizedState;yt!==Er||ar!==nr||Ii.current||Cu?(typeof Xr=="function"&&(Fm(E,$,Xr,G),nr=E.memoizedState),(pn=Cu||Ld(E,$,pn,G,ar,nr,jt)||!1)?($n||typeof Ve.UNSAFE_componentWillUpdate!="function"&&typeof Ve.componentWillUpdate!="function"||(typeof Ve.componentWillUpdate=="function"&&Ve.componentWillUpdate(G,nr,jt),typeof Ve.UNSAFE_componentWillUpdate=="function"&&Ve.UNSAFE_componentWillUpdate(G,nr,jt)),typeof Ve.componentDidUpdate=="function"&&(E.flags|=4),typeof Ve.getSnapshotBeforeUpdate=="function"&&(E.flags|=1024)):(typeof Ve.componentDidUpdate!="function"||yt===w.memoizedProps&&ar===w.memoizedState||(E.flags|=4),typeof Ve.getSnapshotBeforeUpdate!="function"||yt===w.memoizedProps&&ar===w.memoizedState||(E.flags|=1024),E.memoizedProps=G,E.memoizedState=nr),Ve.props=G,Ve.state=nr,Ve.context=jt,G=pn):(typeof Ve.componentDidUpdate!="function"||yt===w.memoizedProps&&ar===w.memoizedState||(E.flags|=4),typeof Ve.getSnapshotBeforeUpdate!="function"||yt===w.memoizedProps&&ar===w.memoizedState||(E.flags|=1024),G=!1)}return mp(w,E,$,G,ce,Q)}function mp(w,E,$,G,Q,ce){Uu(w,E);var Ve=(E.flags&128)!==0;if(!G&&!Ve)return Q&&bl(E,$,!1),de(w,E,ce);G=E.stateNode,Jm.current=E;var yt=Ve&&typeof $.getDerivedStateFromError!="function"?null:G.render();return E.flags|=1,w!==null&&Ve?(E.child=ga(E,w.child,null,ce),E.child=ga(E,null,yt,ce)):Jo(w,E,yt,ce),E.memoizedState=G.state,Q&&bl(E,$,!0),E.child}function Ky(w){var E=w.stateNode;E.pendingContext?pa(w,E.pendingContext,E.pendingContext!==E.context):E.context&&pa(w,E.context,!1),Ou(w,E.containerInfo)}function R(w,E,$,G,Q){return Nd(),Yh(Q),E.flags|=256,Jo(w,E,$,G),E.child}var u={dehydrated:null,treeContext:null,retryLane:0};function y(w){return{baseLanes:w,cachePool:null}}function A(w,E,$){var G=E.pendingProps,Q=Li.current,ce=!1,Ve=(E.flags&128)!==0,yt;if((yt=Ve)||(yt=w!==null&&w.memoizedState===null?!1:(Q&2)!==0),yt?(ce=!0,E.flags&=-129):(w===null||w.memoizedState!==null)&&(Q|=1),Rn(Li,Q&1),w===null)return Ru(E),w=E.memoizedState,w!==null&&(w=w.dehydrated,w!==null)?(E.mode&1?Nt(w)?E.lanes=8:E.lanes=1073741824:E.lanes=1,null):(Q=G.children,w=G.fallback,ce?(G=E.mode,ce=E.child,Q={mode:"hidden",children:Q},!(G&1)&&ce!==null?(ce.childLanes=0,ce.pendingProps=Q):ce=yp(Q,G,0,null),w=Wu(w,G,$,null),ce.return=E,w.return=E,ce.sibling=w,E.child=ce,E.child.memoizedState=y($),E.memoizedState=u,w):P(E,Q));if(Q=w.memoizedState,Q!==null){if(yt=Q.dehydrated,yt!==null){if(Ve)return E.flags&256?(E.flags&=-257,q(w,E,$,Error(s(422)))):E.memoizedState!==null?(E.child=w.child,E.flags|=128,null):(ce=G.fallback,Q=E.mode,G=yp({mode:"visible",children:G.children},Q,0,null),ce=Wu(ce,Q,$,null),ce.flags|=2,G.return=E,ce.return=E,G.sibling=ce,E.child=G,E.mode&1&&ga(E,w.child,null,$),E.child.memoizedState=y($),E.memoizedState=u,ce);if(!(E.mode&1))E=q(w,E,$,null);else if(Nt(yt))E=q(w,E,$,Error(s(419)));else if(G=($&w.childLanes)!==0,$o||G){if(G=ki,G!==null){switch($&-$){case 4:ce=2;break;case 16:ce=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ce=32;break;case 536870912:ce=268435456;break;default:ce=0}G=ce&(G.suspendedLanes|$)?0:ce,G!==0&&G!==Q.retryLane&&(Q.retryLane=G,wa(w,G,-1))}K1(),E=q(w,E,$,Error(s(421)))}else It(yt)?(E.flags|=128,E.child=w.child,E=cL.bind(null,w),En(yt,E),E=null):($=Q.treeContext,tt&&(vs=tr(yt),Zs=E,Si=!0,Wa=null,Dd=!1,$!==null&&(Va[Yr++]=gr,Va[Yr++]=ma,Va[Yr++]=Iu,gr=$.id,ma=$.overflow,Iu=E)),E=P(E,E.pendingProps.children),E.flags|=4096);return E}return ce?(G=H(w,E,G.children,G.fallback,$),ce=E.child,Q=w.child.memoizedState,ce.memoizedState=Q===null?y($):{baseLanes:Q.baseLanes|$,cachePool:null},ce.childLanes=w.childLanes&~$,E.memoizedState=u,G):($=L(w,E,G.children,$),E.memoizedState=null,$)}return ce?(G=H(w,E,G.children,G.fallback,$),ce=E.child,Q=w.child.memoizedState,ce.memoizedState=Q===null?y($):{baseLanes:Q.baseLanes|$,cachePool:null},ce.childLanes=w.childLanes&~$,E.memoizedState=u,G):($=L(w,E,G.children,$),E.memoizedState=null,$)}function P(w,E){return E=yp({mode:"visible",children:E},w.mode,0,null),E.return=w,w.child=E}function L(w,E,$,G){var Q=w.child;return w=Q.sibling,$=jc(Q,{mode:"visible",children:$}),!(E.mode&1)&&($.lanes=G),$.return=E,$.sibling=null,w!==null&&(G=E.deletions,G===null?(E.deletions=[w],E.flags|=16):G.push(w)),E.child=$}function H(w,E,$,G,Q){var ce=E.mode;w=w.child;var Ve=w.sibling,yt={mode:"hidden",children:$};return!(ce&1)&&E.child!==w?($=E.child,$.childLanes=0,$.pendingProps=yt,E.deletions=null):($=jc(w,yt),$.subtreeFlags=w.subtreeFlags&14680064),Ve!==null?G=jc(Ve,G):(G=Wu(G,ce,Q,null),G.flags|=2),G.return=E,$.return=E,$.sibling=G,E.child=$,G}function q(w,E,$,G){return G!==null&&Yh(G),ga(E,w.child,null,$),w=P(E,E.pendingProps.children),w.flags|=2,E.memoizedState=null,w}function K(w,E,$){w.lanes|=E;var G=w.alternate;G!==null&&(G.lanes|=E),Uy(w.return,E,$)}function te(w,E,$,G,Q){var ce=w.memoizedState;ce===null?w.memoizedState={isBackwards:E,rendering:null,renderingStartTime:0,last:G,tail:$,tailMode:Q}:(ce.isBackwards=E,ce.rendering=null,ce.renderingStartTime=0,ce.last=G,ce.tail=$,ce.tailMode=Q)}function le(w,E,$){var G=E.pendingProps,Q=G.revealOrder,ce=G.tail;if(Jo(w,E,G.children,$),G=Li.current,G&2)G=G&1|2,E.flags|=128;else{if(w!==null&&w.flags&128)e:for(w=E.child;w!==null;){if(w.tag===13)w.memoizedState!==null&&K(w,$,E);else if(w.tag===19)K(w,$,E);else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===E)break e;for(;w.sibling===null;){if(w.return===null||w.return===E)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}G&=1}if(Rn(Li,G),!(E.mode&1))E.memoizedState=null;else switch(Q){case"forwards":for($=E.child,Q=null;$!==null;)w=$.alternate,w!==null&&Kh(w)===null&&(Q=$),$=$.sibling;$=Q,$===null?(Q=E.child,E.child=null):(Q=$.sibling,$.sibling=null),te(E,!1,Q,$,ce);break;case"backwards":for($=null,Q=E.child,E.child=null;Q!==null;){if(w=Q.alternate,w!==null&&Kh(w)===null){E.child=Q;break}w=Q.sibling,Q.sibling=$,$=Q,Q=w}te(E,!0,$,null,ce);break;case"together":te(E,!1,null,null,void 0);break;default:E.memoizedState=null}return E.child}function de(w,E,$){if(w!==null&&(E.dependencies=w.dependencies),Xd|=E.lanes,!($&E.childLanes))return null;if(w!==null&&E.child!==w.child)throw Error(s(153));if(E.child!==null){for(w=E.child,$=jc(w,w.pendingProps),E.child=$,$.return=E;w.sibling!==null;)w=w.sibling,$=$.sibling=jc(w,w.pendingProps),$.return=E;$.sibling=null}return E.child}function Se(w,E,$){switch(E.tag){case 3:Ky(E),Nd();break;case 5:Um(E);break;case 1:Ui(E.type)&&ko(E);break;case 4:Ou(E,E.stateNode.containerInfo);break;case 10:Od(E,E.type._context,E.memoizedProps.value);break;case 13:var G=E.memoizedState;if(G!==null)return G.dehydrated!==null?(Rn(Li,Li.current&1),E.flags|=128,null):$&E.child.childLanes?A(w,E,$):(Rn(Li,Li.current&1),w=de(w,E,$),w!==null?w.sibling:null);Rn(Li,Li.current&1);break;case 19:if(G=($&E.childLanes)!==0,w.flags&128){if(G)return le(w,E,$);E.flags|=128}var Q=E.memoizedState;if(Q!==null&&(Q.rendering=null,Q.tail=null,Q.lastEffect=null),Rn(Li,Li.current),G)break;return null;case 22:case 23:return E.lanes=0,fp(w,E,$)}return de(w,E,$)}function ze(w,E){switch(Gh(E),E.tag){case 1:return Ui(E.type)&&ei(),w=E.flags,w&65536?(E.flags=w&-65537|128,E):null;case 3:return rc(),qn(Ii),qn(Yn),Vm(),w=E.flags,w&65536&&!(w&128)?(E.flags=w&-65537|128,E):null;case 5:return Xh(E),null;case 13:if(qn(Li),w=E.memoizedState,w!==null&&w.dehydrated!==null){if(E.alternate===null)throw Error(s(340));Nd()}return w=E.flags,w&65536?(E.flags=w&-65537|128,E):null;case 19:return qn(Li),null;case 4:return rc(),null;case 10:return jy(E.type._context),null;case 22:case 23:return Ma(),null;case 24:return null;default:return null}}var De=!1,Be=!1,ke=typeof WeakSet=="function"?WeakSet:Set,Le=null;function Et(w,E){var $=w.ref;if($!==null)if(typeof $=="function")try{$(null)}catch(G){Ka(w,E,G)}else $.current=null}function He(w,E,$){try{$()}catch(G){Ka(w,E,G)}}var ct=!1;function Pt(w,E){for(ve(w.containerInfo),Le=E;Le!==null;)if(w=Le,E=w.child,(w.subtreeFlags&1028)!==0&&E!==null)E.return=w,Le=E;else for(;Le!==null;){w=Le;try{var $=w.alternate;if(w.flags&1024)switch(w.tag){case 0:case 11:case 15:break;case 1:if($!==null){var G=$.memoizedProps,Q=$.memoizedState,ce=w.stateNode,Ve=ce.getSnapshotBeforeUpdate(w.elementType===w.type?G:Ks(w.type,G),Q);ce.__reactInternalSnapshotBeforeUpdate=Ve}break;case 3:nt&&xe(w.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(yt){Ka(w,w.return,yt)}if(E=w.sibling,E!==null){E.return=w.return,Le=E;break}Le=w.return}return $=ct,ct=!1,$}function Ct(w,E,$){var G=E.updateQueue;if(G=G!==null?G.lastEffect:null,G!==null){var Q=G=G.next;do{if((Q.tag&w)===w){var ce=Q.destroy;Q.destroy=void 0,ce!==void 0&&He(E,$,ce)}Q=Q.next}while(Q!==G)}}function Ot(w,E){if(E=E.updateQueue,E=E!==null?E.lastEffect:null,E!==null){var $=E=E.next;do{if(($.tag&w)===w){var G=$.create;$.destroy=G()}$=$.next}while($!==E)}}function Zt(w){var E=w.ref;if(E!==null){var $=w.stateNode;switch(w.tag){case 5:w=ue($);break;default:w=$}typeof E=="function"?E(w):E.current=w}}function Gt(w,E,$){if(Jl&&typeof Jl.onCommitFiberUnmount=="function")try{Jl.onCommitFiberUnmount(Ic,E)}catch{}switch(E.tag){case 0:case 11:case 14:case 15:if(w=E.updateQueue,w!==null&&(w=w.lastEffect,w!==null)){var G=w=w.next;do{var Q=G,ce=Q.destroy;Q=Q.tag,ce!==void 0&&(Q&2||Q&4)&&He(E,$,ce),G=G.next}while(G!==w)}break;case 1:if(Et(E,$),w=E.stateNode,typeof w.componentWillUnmount=="function")try{w.props=E.memoizedProps,w.state=E.memoizedState,w.componentWillUnmount()}catch(Ve){Ka(E,$,Ve)}break;case 5:Et(E,$);break;case 4:nt?rr(w,E,$):ge&&ge&&(E=E.stateNode.containerInfo,$=se(E),qe(E,$))}}function Kt(w,E,$){for(var G=E;;)if(Gt(w,G,$),G.child===null||nt&&G.tag===4){if(G===E)break;for(;G.sibling===null;){if(G.return===null||G.return===E)return;G=G.return}G.sibling.return=G.return,G=G.sibling}else G.child.return=G,G=G.child}function bn(w){var E=w.alternate;E!==null&&(w.alternate=null,bn(E)),w.child=null,w.deletions=null,w.sibling=null,w.tag===5&&(E=w.stateNode,E!==null&&We(E)),w.stateNode=null,w.return=null,w.dependencies=null,w.memoizedProps=null,w.memoizedState=null,w.pendingProps=null,w.stateNode=null,w.updateQueue=null}function sr(w){return w.tag===5||w.tag===3||w.tag===4}function cn(w){e:for(;;){for(;w.sibling===null;){if(w.return===null||sr(w.return))return null;w=w.return}for(w.sibling.return=w.return,w=w.sibling;w.tag!==5&&w.tag!==6&&w.tag!==18;){if(w.flags&2||w.child===null||w.tag===4)continue e;w.child.return=w,w=w.child}if(!(w.flags&2))return w.stateNode}}function Zn(w){if(nt){e:{for(var E=w.return;E!==null;){if(sr(E))break e;E=E.return}throw Error(s(160))}var $=E;switch($.tag){case 5:E=$.stateNode,$.flags&32&&(ft(E),$.flags&=-33),$=cn(w),Mr(w,$,E);break;case 3:case 4:E=$.stateNode.containerInfo,$=cn(w),ur(w,$,E);break;default:throw Error(s(161))}}}function ur(w,E,$){var G=w.tag;if(G===5||G===6)w=w.stateNode,E?St($,w,E):Je($,w);else if(G!==4&&(w=w.child,w!==null))for(ur(w,E,$),w=w.sibling;w!==null;)ur(w,E,$),w=w.sibling}function Mr(w,E,$){var G=w.tag;if(G===5||G===6)w=w.stateNode,E?un($,w,E):an($,w);else if(G!==4&&(w=w.child,w!==null))for(Mr(w,E,$),w=w.sibling;w!==null;)Mr(w,E,$),w=w.sibling}function rr(w,E,$){for(var G=E,Q=!1,ce,Ve;;){if(!Q){Q=G.return;e:for(;;){if(Q===null)throw Error(s(160));switch(ce=Q.stateNode,Q.tag){case 5:Ve=!1;break e;case 3:ce=ce.containerInfo,Ve=!0;break e;case 4:ce=ce.containerInfo,Ve=!0;break e}Q=Q.return}Q=!0}if(G.tag===5||G.tag===6)Kt(w,G,$),Ve?Ae(ce,G.stateNode):gt(ce,G.stateNode);else if(G.tag===18)Ve?xt(ce,G.stateNode):mt(ce,G.stateNode);else if(G.tag===4){if(G.child!==null){ce=G.stateNode.containerInfo,Ve=!0,G.child.return=G,G=G.child;continue}}else if(Gt(w,G,$),G.child!==null){G.child.return=G,G=G.child;continue}if(G===E)break;for(;G.sibling===null;){if(G.return===null||G.return===E)return;G=G.return,G.tag===4&&(Q=!1)}G.sibling.return=G.return,G=G.sibling}}function fr(w,E){if(nt){switch(E.tag){case 0:case 11:case 14:case 15:Ct(3,E,E.return),Ot(3,E),Ct(5,E,E.return);return;case 1:return;case 5:var $=E.stateNode;if($!=null){var G=E.memoizedProps;w=w!==null?w.memoizedProps:G;var Q=E.type,ce=E.updateQueue;E.updateQueue=null,ce!==null&&en($,ce,Q,w,G,E)}return;case 6:if(E.stateNode===null)throw Error(s(162));$=E.memoizedProps,Yt(E.stateNode,w!==null?w.memoizedProps:$,$);return;case 3:tt&&w!==null&&w.memoizedState.isDehydrated&&pt(E.stateNode.containerInfo);return;case 12:return;case 13:dr(E);return;case 19:dr(E);return;case 17:return}throw Error(s(163))}switch(E.tag){case 0:case 11:case 14:case 15:Ct(3,E,E.return),Ot(3,E),Ct(5,E,E.return);return;case 12:return;case 13:dr(E);return;case 19:dr(E);return;case 3:tt&&w!==null&&w.memoizedState.isDehydrated&&pt(E.stateNode.containerInfo);break;case 22:case 23:return}e:if(ge){switch(E.tag){case 1:case 5:case 6:break e;case 3:case 4:E=E.stateNode,qe(E.containerInfo,E.pendingChildren);break e}throw Error(s(163))}}function dr(w){var E=w.updateQueue;if(E!==null){w.updateQueue=null;var $=w.stateNode;$===null&&($=w.stateNode=new ke),E.forEach(function(G){var Q=uL.bind(null,w,G);$.has(G)||($.add(G),G.then(Q,Q))})}}function Vi(w,E){for(Le=E;Le!==null;){E=Le;var $=E.deletions;if($!==null)for(var G=0;G<$.length;G++){var Q=$[G];try{var ce=w;nt?rr(ce,Q,E):Kt(ce,Q,E);var Ve=Q.alternate;Ve!==null&&(Ve.return=null),Q.return=null}catch(Jn){Ka(Q,E,Jn)}}if($=E.child,E.subtreeFlags&12854&&$!==null)$.return=E,Le=$;else for(;Le!==null;){E=Le;try{var yt=E.flags;if(yt&32&&nt&&ft(E.stateNode),yt&512){var jt=E.alternate;if(jt!==null){var pn=jt.ref;pn!==null&&(typeof pn=="function"?pn(null):pn.current=null)}}if(yt&8192)switch(E.tag){case 13:if(E.memoizedState!==null){var $n=E.alternate;($n===null||$n.memoizedState===null)&&(e_=ro())}break;case 22:var Er=E.memoizedState!==null,ar=E.alternate,Xr=ar!==null&&ar.memoizedState!==null;if($=E,nt){e:if(G=$,Q=Er,ce=null,nt)for(var nr=G;;){if(nr.tag===5){if(ce===null){ce=nr;var zs=nr.stateNode;Q?Ie(zs):tn(nr.stateNode,nr.memoizedProps)}}else if(nr.tag===6){if(ce===null){var Fs=nr.stateNode;Q?it(Fs):Xe(Fs,nr.memoizedProps)}}else if((nr.tag!==22&&nr.tag!==23||nr.memoizedState===null||nr===G)&&nr.child!==null){nr.child.return=nr,nr=nr.child;continue}if(nr===G)break;for(;nr.sibling===null;){if(nr.return===null||nr.return===G)break e;ce===nr&&(ce=null),nr=nr.return}ce===nr&&(ce=null),nr.sibling.return=nr.return,nr=nr.sibling}}if(Er&&!Xr&&$.mode&1){Le=$;for(var kt=$.child;kt!==null;){for($=Le=kt;Le!==null;){G=Le;var bt=G.child;switch(G.tag){case 0:case 11:case 14:case 15:Ct(4,G,G.return);break;case 1:Et(G,G.return);var zt=G.stateNode;if(typeof zt.componentWillUnmount=="function"){var Pn=G.return;try{zt.props=G.memoizedProps,zt.state=G.memoizedState,zt.componentWillUnmount()}catch(Jn){Ka(G,Pn,Jn)}}break;case 5:Et(G,G.return);break;case 22:if(G.memoizedState!==null){pi($);continue}}bt!==null?(bt.return=G,Le=bt):pi($)}kt=kt.sibling}}}switch(yt&4102){case 2:Zn(E),E.flags&=-3;break;case 6:Zn(E),E.flags&=-3,fr(E.alternate,E);break;case 4096:E.flags&=-4097;break;case 4100:E.flags&=-4097,fr(E.alternate,E);break;case 4:fr(E.alternate,E)}}catch(Jn){Ka(E,E.return,Jn)}if($=E.sibling,$!==null){$.return=E.return,Le=$;break}Le=E.return}}}function fi(w,E,$){Le=w,Os(w)}function Os(w,E,$){for(var G=(w.mode&1)!==0;Le!==null;){var Q=Le,ce=Q.child;if(Q.tag===22&&G){var Ve=Q.memoizedState!==null||De;if(!Ve){var yt=Q.alternate,jt=yt!==null&&yt.memoizedState!==null||Be;yt=De;var pn=Be;if(De=Ve,(Be=jt)&&!pn)for(Le=Q;Le!==null;)Ve=Le,jt=Ve.child,Ve.tag===22&&Ve.memoizedState!==null?Qo(Q):jt!==null?(jt.return=Ve,Le=jt):Qo(Q);for(;ce!==null;)Le=ce,Os(ce),ce=ce.sibling;Le=Q,De=yt,Be=pn}ho(w)}else Q.subtreeFlags&8772&&ce!==null?(ce.return=Q,Le=ce):ho(w)}}function ho(w){for(;Le!==null;){var E=Le;if(E.flags&8772){var $=E.alternate;try{if(E.flags&8772)switch(E.tag){case 0:case 11:case 15:Be||Ot(5,E);break;case 1:var G=E.stateNode;if(E.flags&4&&!Be)if($===null)G.componentDidMount();else{var Q=E.elementType===E.type?$.memoizedProps:Ks(E.type,$.memoizedProps);G.componentDidUpdate(Q,$.memoizedState,G.__reactInternalSnapshotBeforeUpdate)}var ce=E.updateQueue;ce!==null&&zm(E,ce,G);break;case 3:var Ve=E.updateQueue;if(Ve!==null){if($=null,E.child!==null)switch(E.child.tag){case 5:$=ue(E.child.stateNode);break;case 1:$=E.child.stateNode}zm(E,Ve,$)}break;case 5:var yt=E.stateNode;$===null&&E.flags&4&&xn(yt,E.type,E.memoizedProps,E);break;case 6:break;case 4:break;case 12:break;case 13:if(tt&&E.memoizedState===null){var jt=E.alternate;if(jt!==null){var pn=jt.memoizedState;if(pn!==null){var $n=pn.dehydrated;$n!==null&&At($n)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(s(163))}Be||E.flags&512&&Zt(E)}catch(Er){Ka(E,E.return,Er)}}if(E===w){Le=null;break}if($=E.sibling,$!==null){$.return=E.return,Le=$;break}Le=E.return}}function pi(w){for(;Le!==null;){var E=Le;if(E===w){Le=null;break}var $=E.sibling;if($!==null){$.return=E.return,Le=$;break}Le=E.return}}function Qo(w){for(;Le!==null;){var E=Le;try{switch(E.tag){case 0:case 11:case 15:var $=E.return;try{Ot(4,E)}catch(jt){Ka(E,$,jt)}break;case 1:var G=E.stateNode;if(typeof G.componentDidMount=="function"){var Q=E.return;try{G.componentDidMount()}catch(jt){Ka(E,Q,jt)}}var ce=E.return;try{Zt(E)}catch(jt){Ka(E,ce,jt)}break;case 5:var Ve=E.return;try{Zt(E)}catch(jt){Ka(E,Ve,jt)}}}catch(jt){Ka(E,E.return,jt)}if(E===w){Le=null;break}var yt=E.sibling;if(yt!==null){yt.return=E.return,Le=yt;break}Le=E.return}}var ta=0,_a=1,sc=2,ac=3,xa=4;if(typeof Symbol=="function"&&Symbol.for){var Ls=Symbol.for;ta=Ls("selector.component"),_a=Ls("selector.has_pseudo_class"),sc=Ls("selector.role"),ac=Ls("selector.test_id"),xa=Ls("selector.text")}function Di(w){var E=rt(w);if(E!=null){if(typeof E.memoizedProps["data-testname"]!="string")throw Error(s(364));return E}if(w=Pe(w),w===null)throw Error(s(362));return w.stateNode.current}function mi(w,E){switch(E.$$typeof){case ta:if(w.type===E.value)return!0;break;case _a:e:{E=E.value,w=[w,0];for(var $=0;$<w.length;){var G=w[$++],Q=w[$++],ce=E[Q];if(G.tag!==5||!wt(G)){for(;ce!=null&&mi(G,ce);)Q++,ce=E[Q];if(Q===E.length){E=!0;break e}else for(G=G.child;G!==null;)w.push(G,Q),G=G.sibling}}E=!1}return E;case sc:if(w.tag===5&&Wt(w.stateNode,E.value))return!0;break;case xa:if((w.tag===5||w.tag===6)&&(w=Mt(w),w!==null&&0<=w.indexOf(E.value)))return!0;break;case ac:if(w.tag===5&&(w=w.memoizedProps["data-testname"],typeof w=="string"&&w.toLowerCase()===E.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Wi(w){switch(w.$$typeof){case ta:return"<"+(B(w.value)||"Unknown")+">";case _a:return":has("+(Wi(w)||"")+")";case sc:return'[role="'+w.value+'"]';case xa:return'"'+w.value+'"';case ac:return'[data-testname="'+w.value+'"]';default:throw Error(s(365))}}function qd(w,E){var $=[];w=[w,0];for(var G=0;G<w.length;){var Q=w[G++],ce=w[G++],Ve=E[ce];if(Q.tag!==5||!wt(Q)){for(;Ve!=null&&mi(Q,Ve);)ce++,Ve=E[ce];if(ce===E.length)$.push(Q);else for(Q=Q.child;Q!==null;)w.push(Q,ce),Q=Q.sibling}}return $}function Ei(w,E){if(!Ut)throw Error(s(363));w=Di(w),w=qd(w,E),E=[],w=Array.from(w);for(var $=0;$<w.length;){var G=w[$++];if(G.tag===5)wt(G)||E.push(G.stateNode);else for(G=G.child;G!==null;)w.push(G),G=G.sibling}return E}var jo=Math.ceil,ws=a.ReactCurrentDispatcher,Sr=a.ReactCurrentOwner,eo=a.ReactCurrentBatchConfig,Cr=0,ki=null,Ri=null,bo=0,Ds=0,Xa=Vr(0),wo=0,Yd=null,Xd=0,Vu=0,tg=0,Fc=null,ba=null,e_=0,tf=1/0;function ng(){tf=ro()+500}var nf=!1,rg=null,Bc=null,Zy=!1,Kd=null,t_=0,Uo=0,rf=null,ig=-1,Jy=0;function es(){return Cr&6?ro():ig!==-1?ig:ig=ro()}function of(w){return w.mode&1?Cr&2&&bo!==0?bo&-bo:Lm.transition!==null?(Jy===0&&(w=Eu,Eu<<=1,!(Eu&4194240)&&(Eu=64),Jy=w),Jy):(w=Hr,w!==0?w:Tt()):1}function wa(w,E,$){if(50<Uo)throw Uo=0,rf=null,Error(s(185));var G=n_(w,E);return G===null?null:(Kf(G,E,$),(!(Cr&2)||G!==ki)&&(G===ki&&(!(Cr&2)&&(Vu|=E),wo===4&&Zd(G,bo)),Sa(G,$),E===1&&Cr===0&&!(w.mode&1)&&(ng(),Rd&&_r())),G)}function n_(w,E){w.lanes|=E;var $=w.alternate;for($!==null&&($.lanes|=E),$=w,w=w.return;w!==null;)w.childLanes|=E,$=w.alternate,$!==null&&($.childLanes|=E),$=w,w=w.return;return $.tag===3?$.stateNode:null}function Sa(w,E){var $=w.callbackNode;X0(w,E);var G=Id(w,w===ki?bo:0);if(G===0)$!==null&&Tu($),w.callbackNode=null,w.callbackPriority=0;else if(E=G&-G,w.callbackPriority!==E){if($!=null&&Tu($),E===1)w.tag===0?$h(i_.bind(null,w)):ys(i_.bind(null,w)),Vt?sn(function(){Cr===0&&_r()}):Fh(kd,_r),$=null;else{switch(By(G)){case 1:$=kd;break;case 4:$=Jf;break;case 16:$=Bh;break;case 536870912:$=Qf;break;default:$=Bh}$=a_($,G1.bind(null,w))}w.callbackPriority=E,w.callbackNode=$}}function G1(w,E){if(ig=-1,Jy=0,Cr&6)throw Error(s(327));var $=w.callbackNode;if($c()&&w.callbackNode!==$)return null;var G=Id(w,w===ki?bo:0);if(G===0)return null;if(G&30||G&w.expiredLanes||E)E=o_(w,G);else{E=G;var Q=Cr;Cr|=2;var ce=X1();(ki!==w||bo!==E)&&(ng(),sf(w,E));do try{aL();break}catch(yt){HE(w,yt)}while(!0);Nm(),ws.current=ce,Cr=Q,Ri!==null?E=0:(ki=null,bo=0,E=wo)}if(E!==0){if(E===2&&(Q=Fy(w),Q!==0&&(G=Q,E=r_(w,Q))),E===1)throw $=Yd,sf(w,0),Zd(w,G),Sa(w,ro()),$;if(E===6)Zd(w,G);else{if(Q=w.current.alternate,!(G&30)&&!Y1(Q)&&(E=o_(w,G),E===2&&(ce=Fy(w),ce!==0&&(G=ce,E=r_(w,ce))),E===1))throw $=Yd,sf(w,0),Zd(w,G),Sa(w,ro()),$;switch(w.finishedWork=Q,w.finishedLanes=G,E){case 0:case 1:throw Error(s(345));case 2:af(w,ba);break;case 3:if(Zd(w,G),(G&130023424)===G&&(E=e_+500-ro(),10<E)){if(Id(w,0)!==0)break;if(Q=w.suspendedLanes,(Q&G)!==G){es(),w.pingedLanes|=w.suspendedLanes&Q;break}w.timeoutHandle=Rt(af.bind(null,w,ba),E);break}af(w,ba);break;case 4:if(Zd(w,G),(G&4194240)===G)break;for(E=w.eventTimes,Q=-1;0<G;){var Ve=31-vr(G);ce=1<<Ve,Ve=E[Ve],Ve>Q&&(Q=Ve),G&=~ce}if(G=Q,G=ro()-G,G=(120>G?120:480>G?480:1080>G?1080:1920>G?1920:3e3>G?3e3:4320>G?4320:1960*jo(G/1960))-G,10<G){w.timeoutHandle=Rt(af.bind(null,w,ba),G);break}af(w,ba);break;case 5:af(w,ba);break;default:throw Error(s(329))}}}return Sa(w,ro()),w.callbackNode===$?G1.bind(null,w):null}function r_(w,E){var $=Fc;return w.current.memoizedState.isDehydrated&&(sf(w,E).flags|=256),w=o_(w,E),w!==2&&(E=ba,ba=$,E!==null&&q1(E)),w}function q1(w){ba===null?ba=w:ba.push.apply(ba,w)}function Y1(w){for(var E=w;;){if(E.flags&16384){var $=E.updateQueue;if($!==null&&($=$.stores,$!==null))for(var G=0;G<$.length;G++){var Q=$[G],ce=Q.getSnapshot;Q=Q.value;try{if(!Ql(ce(),Q))return!1}catch{return!1}}}if($=E.child,E.subtreeFlags&16384&&$!==null)$.return=E,E=$;else{if(E===w)break;for(;E.sibling===null;){if(E.return===null||E.return===w)return!0;E=E.return}E.sibling.return=E.return,E=E.sibling}}return!0}function Zd(w,E){for(E&=~tg,E&=~Vu,w.suspendedLanes|=E,w.pingedLanes&=~E,w=w.expirationTimes;0<E;){var $=31-vr(E),G=1<<$;w[$]=-1,E&=~G}}function i_(w){if(Cr&6)throw Error(s(327));$c();var E=Id(w,0);if(!(E&1))return Sa(w,ro()),null;var $=o_(w,E);if(w.tag!==0&&$===2){var G=Fy(w);G!==0&&(E=G,$=r_(w,G))}if($===1)throw $=Yd,sf(w,0),Zd(w,E),Sa(w,ro()),$;if($===6)throw Error(s(345));return w.finishedWork=w.current.alternate,w.finishedLanes=E,af(w,ba),Sa(w,ro()),null}function og(w){Kd!==null&&Kd.tag===0&&!(Cr&6)&&$c();var E=Cr;Cr|=1;var $=eo.transition,G=Hr;try{if(eo.transition=null,Hr=1,w)return w()}finally{Hr=G,eo.transition=$,Cr=E,!(Cr&6)&&_r()}}function Ma(){Ds=Xa.current,qn(Xa)}function sf(w,E){w.finishedWork=null,w.finishedLanes=0;var $=w.timeoutHandle;if($!==Fe&&(w.timeoutHandle=Fe,Lt($)),Ri!==null)for($=Ri.return;$!==null;){var G=$;switch(Gh(G),G.tag){case 1:G=G.type.childContextTypes,G!=null&&ei();break;case 3:rc(),qn(Ii),qn(Yn),Vm();break;case 5:Xh(G);break;case 4:rc();break;case 13:qn(Li);break;case 19:qn(Li);break;case 10:jy(G.type._context);break;case 22:case 23:Ma()}$=$.return}if(ki=w,Ri=w=jc(w.current,null),bo=Ds=E,wo=0,Yd=null,tg=Vu=Xd=0,ba=Fc=null,ec!==null){for(E=0;E<ec.length;E++)if($=ec[E],G=$.interleaved,G!==null){$.interleaved=null;var Q=G.next,ce=$.pending;if(ce!==null){var Ve=ce.next;ce.next=Q,G.next=Ve}$.pending=G}ec=null}return w}function HE(w,E){do{var $=Ri;try{if(Nm(),sp.current=$u,uo){for(var G=Ji.memoizedState;G!==null;){var Q=G.queue;Q!==null&&(Q.pending=null),G=G.next}uo=!1}if(Bd=0,io=xo=Ji=null,ic=!1,xs=0,Sr.current=null,$===null||$.return===null){wo=1,Yd=E,Ri=null;break}e:{var ce=w,Ve=$.return,yt=$,jt=E;if(E=bo,yt.flags|=32768,jt!==null&&typeof jt=="object"&&typeof jt.then=="function"){var pn=jt,$n=yt,Er=$n.tag;if(!($n.mode&1)&&(Er===0||Er===11||Er===15)){var ar=$n.alternate;ar?($n.updateQueue=ar.updateQueue,$n.memoizedState=ar.memoizedState,$n.lanes=ar.lanes):($n.updateQueue=null,$n.memoizedState=null)}var Xr=dp(Ve);if(Xr!==null){Xr.flags&=-257,Dc(Xr,Ve,yt,ce,E),Xr.mode&1&&Qh(ce,pn,E),E=Xr,jt=pn;var nr=E.updateQueue;if(nr===null){var zs=new Set;zs.add(jt),E.updateQueue=zs}else nr.add(jt);break e}else{if(!(E&1)){Qh(ce,pn,E),K1();break e}jt=Error(s(426))}}else if(Si&&yt.mode&1){var Fs=dp(Ve);if(Fs!==null){!(Fs.flags&65536)&&(Fs.flags|=256),Dc(Fs,Ve,yt,ce,E),Yh(jt);break e}}ce=jt,wo!==4&&(wo=2),Fc===null?Fc=[ce]:Fc.push(ce),jt=Xm(jt,yt),yt=Ve;do{switch(yt.tag){case 3:yt.flags|=65536,E&=-E,yt.lanes|=E;var kt=oo(yt,jt,E);Vy(yt,kt);break e;case 1:ce=jt;var bt=yt.type,zt=yt.stateNode;if(!(yt.flags&128)&&(typeof bt.getDerivedStateFromError=="function"||zt!==null&&typeof zt.componentDidCatch=="function"&&(Bc===null||!Bc.has(zt)))){yt.flags|=65536,E&=-E,yt.lanes|=E;var Pn=Xy(yt,ce,E);Vy(yt,Pn);break e}}yt=yt.return}while(yt!==null)}Qy($)}catch(Jn){E=Jn,Ri===$&&$!==null&&(Ri=$=$.return);continue}break}while(!0)}function X1(){var w=ws.current;return ws.current=$u,w===null?$u:w}function K1(){(wo===0||wo===3||wo===2)&&(wo=4),ki===null||!(Xd&268435455)&&!(Vu&268435455)||Zd(ki,bo)}function o_(w,E){var $=Cr;Cr|=2;var G=X1();ki===w&&bo===E||sf(w,E);do try{sL();break}catch(Q){HE(w,Q)}while(!0);if(Nm(),Cr=$,ws.current=G,Ri!==null)throw Error(s(261));return ki=null,bo=0,wo}function sL(){for(;Ri!==null;)s_(Ri)}function aL(){for(;Ri!==null&&!Om();)s_(Ri)}function s_(w){var E=YE(w.alternate,w,Ds);w.memoizedProps=w.pendingProps,E===null?Qy(w):Ri=E,Sr.current=null}function Qy(w){var E=w;do{var $=E.alternate;if(w=E.return,E.flags&32768){if($=ze($,E),$!==null){$.flags&=32767,Ri=$;return}if(w!==null)w.flags|=32768,w.subtreeFlags=0,w.deletions=null;else{wo=6,Ri=null;return}}else if($=hp($,E,Ds),$!==null){Ri=$;return}if(E=E.sibling,E!==null){Ri=E;return}Ri=E=w}while(E!==null);wo===0&&(wo=5)}function af(w,E){var $=Hr,G=eo.transition;try{eo.transition=null,Hr=1,gp(w,E,$)}finally{eo.transition=G,Hr=$}return null}function gp(w,E,$){do $c();while(Kd!==null);if(Cr&6)throw Error(s(327));var G=w.finishedWork,Q=w.finishedLanes;if(G===null)return null;if(w.finishedWork=null,w.finishedLanes=0,G===w.current)throw Error(s(177));w.callbackNode=null,w.callbackPriority=0;var ce=G.lanes|G.childLanes;if(Rm(w,ce),w===ki&&(Ri=ki=null,bo=0),!(G.subtreeFlags&2064)&&!(G.flags&2064)||Zy||(Zy=!0,a_(Bh,function(){return $c(),null})),ce=(G.flags&15990)!==0,G.subtreeFlags&15990||ce){ce=eo.transition,eo.transition=null;var Ve=Hr;Hr=1;var yt=Cr;Cr|=4,Sr.current=null,Pt(w,G),Vi(w,G),Ee(w.containerInfo),w.current=G,fi(G),ja(),Cr=yt,Hr=Ve,eo.transition=ce}else w.current=G;if(Zy&&(Zy=!1,Kd=w,t_=Q),ce=w.pendingLanes,ce===0&&(Bc=null),H1(G.stateNode),Sa(w,ro()),E!==null)for($=w.onRecoverableError,G=0;G<E.length;G++)$(E[G]);if(nf)throw nf=!1,w=rg,rg=null,w;return t_&1&&w.tag!==0&&$c(),ce=w.pendingLanes,ce&1?w===rf?Uo++:(Uo=0,rf=w):Uo=0,_r(),null}function $c(){if(Kd!==null){var w=By(t_),E=eo.transition,$=Hr;try{if(eo.transition=null,Hr=16>w?16:w,Kd===null)var G=!1;else{if(w=Kd,Kd=null,t_=0,Cr&6)throw Error(s(331));var Q=Cr;for(Cr|=4,Le=w.current;Le!==null;){var ce=Le,Ve=ce.child;if(Le.flags&16){var yt=ce.deletions;if(yt!==null){for(var jt=0;jt<yt.length;jt++){var pn=yt[jt];for(Le=pn;Le!==null;){var $n=Le;switch($n.tag){case 0:case 11:case 15:Ct(8,$n,ce)}var Er=$n.child;if(Er!==null)Er.return=$n,Le=Er;else for(;Le!==null;){$n=Le;var ar=$n.sibling,Xr=$n.return;if(bn($n),$n===pn){Le=null;break}if(ar!==null){ar.return=Xr,Le=ar;break}Le=Xr}}}var nr=ce.alternate;if(nr!==null){var zs=nr.child;if(zs!==null){nr.child=null;do{var Fs=zs.sibling;zs.sibling=null,zs=Fs}while(zs!==null)}}Le=ce}}if(ce.subtreeFlags&2064&&Ve!==null)Ve.return=ce,Le=Ve;else e:for(;Le!==null;){if(ce=Le,ce.flags&2048)switch(ce.tag){case 0:case 11:case 15:Ct(9,ce,ce.return)}var kt=ce.sibling;if(kt!==null){kt.return=ce.return,Le=kt;break e}Le=ce.return}}var bt=w.current;for(Le=bt;Le!==null;){Ve=Le;var zt=Ve.child;if(Ve.subtreeFlags&2064&&zt!==null)zt.return=Ve,Le=zt;else e:for(Ve=bt;Le!==null;){if(yt=Le,yt.flags&2048)try{switch(yt.tag){case 0:case 11:case 15:Ot(9,yt)}}catch(Jn){Ka(yt,yt.return,Jn)}if(yt===Ve){Le=null;break e}var Pn=yt.sibling;if(Pn!==null){Pn.return=yt.return,Le=Pn;break e}Le=yt.return}}if(Cr=Q,_r(),Jl&&typeof Jl.onPostCommitFiberRoot=="function")try{Jl.onPostCommitFiberRoot(Ic,w)}catch{}G=!0}return G}finally{Hr=$,eo.transition=E}}return!1}function GE(w,E,$){E=Xm($,E),E=oo(w,E,1),tc(w,E),E=es(),w=n_(w,1),w!==null&&(Kf(w,1,E),Sa(w,E))}function Ka(w,E,$){if(w.tag===3)GE(w,w,$);else for(;E!==null;){if(E.tag===3){GE(E,w,$);break}else if(E.tag===1){var G=E.stateNode;if(typeof E.type.getDerivedStateFromError=="function"||typeof G.componentDidCatch=="function"&&(Bc===null||!Bc.has(G))){w=Xm($,w),w=Xy(E,w,1),tc(E,w),w=es(),E=n_(E,1),E!==null&&(Kf(E,1,w),Sa(E,w));break}}E=E.return}}function lL(w,E,$){var G=w.pingCache;G!==null&&G.delete(E),E=es(),w.pingedLanes|=w.suspendedLanes&$,ki===w&&(bo&$)===$&&(wo===4||wo===3&&(bo&130023424)===bo&&500>ro()-e_?sf(w,0):tg|=$),Sa(w,E)}function qE(w,E){E===0&&(w.mode&1?(E=Yf,Yf<<=1,!(Yf&130023424)&&(Yf=4194304)):E=1);var $=es();w=n_(w,E),w!==null&&(Kf(w,E,$),Sa(w,$))}function cL(w){var E=w.memoizedState,$=0;E!==null&&($=E.retryLane),qE(w,$)}function uL(w,E){var $=0;switch(w.tag){case 13:var G=w.stateNode,Q=w.memoizedState;Q!==null&&($=Q.retryLane);break;case 19:G=w.stateNode;break;default:throw Error(s(314))}G!==null&&G.delete(E),qE(w,$)}var YE;YE=function(w,E,$){if(w!==null)if(w.memoizedProps!==E.pendingProps||Ii.current)$o=!0;else{if(!(w.lanes&$)&&!(E.flags&128))return $o=!1,Se(w,E,$);$o=!!(w.flags&131072)}else $o=!1,Si&&E.flags&1048576&&ci(E,Pu,E.index);switch(E.lanes=0,E.tag){case 2:var G=E.type;w!==null&&(w.alternate=null,E.alternate=null,E.flags|=2),w=E.pendingProps;var Q=Wr(E,Yn.current);Wh(E,$),Q=Lu(null,E,G,w,Q,$);var ce=ap();return E.flags|=1,typeof Q=="object"&&Q!==null&&typeof Q.render=="function"&&Q.$$typeof===void 0?(E.tag=1,E.memoizedState=null,E.updateQueue=null,Ui(G)?(ce=!0,ko(E)):ce=!1,E.memoizedState=Q.state!==null&&Q.state!==void 0?Q.state:null,ep(E),Q.updater=Oc,E.stateNode=Q,Q._reactInternals=E,Br(E,G,w,$),E=mp(null,E,G,!0,ce,$)):(E.tag=0,Si&&ce&&ku(E),Jo(null,E,Q,$),E=E.child),E;case 16:G=E.elementType;e:{switch(w!==null&&(w.alternate=null,E.alternate=null,E.flags|=2),w=E.pendingProps,Q=G._init,G=Q(G._payload),E.type=G,Q=E.tag=fo(G),w=Ks(G,w),Q){case 0:E=pp(null,E,G,w,$);break e;case 1:E=eg(null,E,G,w,$);break e;case 11:E=Gd(null,E,G,w,$);break e;case 14:E=zc(null,E,G,Ks(G.type,w),$);break e}throw Error(s(306,G,""))}return E;case 0:return G=E.type,Q=E.pendingProps,Q=E.elementType===G?Q:Ks(G,Q),pp(w,E,G,Q,$);case 1:return G=E.type,Q=E.pendingProps,Q=E.elementType===G?Q:Ks(G,Q),eg(w,E,G,Q,$);case 3:e:{if(Ky(E),w===null)throw Error(s(387));G=E.pendingProps,ce=E.memoizedState,Q=ce.element,tp(w,E),np(E,G,null,$);var Ve=E.memoizedState;if(G=Ve.element,tt&&ce.isDehydrated)if(ce={element:G,isDehydrated:!1,cache:Ve.cache,transitions:Ve.transitions},E.updateQueue.baseState=ce,E.memoizedState=ce,E.flags&256){Q=Error(s(423)),E=R(w,E,G,$,Q);break e}else if(G!==Q){Q=Error(s(424)),E=R(w,E,G,$,Q);break e}else for(tt&&(vs=yr(E.stateNode.containerInfo),Zs=E,Si=!0,Wa=null,Dd=!1),$=Js(E,null,G,$),E.child=$;$;)$.flags=$.flags&-3|4096,$=$.sibling;else{if(Nd(),G===Q){E=de(w,E,$);break e}Jo(w,E,G,$)}E=E.child}return E;case 5:return Um(E),w===null&&Ru(E),G=E.type,Q=E.pendingProps,ce=w!==null?w.memoizedProps:null,Ve=Q.children,st(G,Q)?Ve=null:ce!==null&&st(G,ce)&&(E.flags|=32),Uu(w,E),Jo(w,E,Ve,$),E.child;case 6:return w===null&&Ru(E),null;case 13:return A(w,E,$);case 4:return Ou(E,E.stateNode.containerInfo),G=E.pendingProps,w===null?E.child=ga(E,null,G,$):Jo(w,E,G,$),E.child;case 11:return G=E.type,Q=E.pendingProps,Q=E.elementType===G?Q:Ks(G,Q),Gd(w,E,G,Q,$);case 7:return Jo(w,E,E.pendingProps,$),E.child;case 8:return Jo(w,E,E.pendingProps.children,$),E.child;case 12:return Jo(w,E,E.pendingProps.children,$),E.child;case 10:e:{if(G=E.type._context,Q=E.pendingProps,ce=E.memoizedProps,Ve=Q.value,Od(E,G,Ve),ce!==null)if(Ql(ce.value,Ve)){if(ce.children===Q.children&&!Ii.current){E=de(w,E,$);break e}}else for(ce=E.child,ce!==null&&(ce.return=E);ce!==null;){var yt=ce.dependencies;if(yt!==null){Ve=ce.child;for(var jt=yt.firstContext;jt!==null;){if(jt.context===G){if(ce.tag===1){jt=wl(-1,$&-$),jt.tag=2;var pn=ce.updateQueue;if(pn!==null){pn=pn.shared;var $n=pn.pending;$n===null?jt.next=jt:(jt.next=$n.next,$n.next=jt),pn.pending=jt}}ce.lanes|=$,jt=ce.alternate,jt!==null&&(jt.lanes|=$),Uy(ce.return,$,E),yt.lanes|=$;break}jt=jt.next}}else if(ce.tag===10)Ve=ce.type===E.type?null:ce.child;else if(ce.tag===18){if(Ve=ce.return,Ve===null)throw Error(s(341));Ve.lanes|=$,yt=Ve.alternate,yt!==null&&(yt.lanes|=$),Uy(Ve,$,E),Ve=ce.sibling}else Ve=ce.child;if(Ve!==null)Ve.return=ce;else for(Ve=ce;Ve!==null;){if(Ve===E){Ve=null;break}if(ce=Ve.sibling,ce!==null){ce.return=Ve.return,Ve=ce;break}Ve=Ve.return}ce=Ve}Jo(w,E,Q.children,$),E=E.child}return E;case 9:return Q=E.type,G=E.pendingProps.children,Wh(E,$),Q=Ua(Q),G=G(Q),E.flags|=1,Jo(w,E,G,$),E.child;case 14:return G=E.type,Q=Ks(G,E.pendingProps),Q=Ks(G.type,Q),zc(w,E,G,Q,$);case 15:return Qm(w,E,E.type,E.pendingProps,$);case 17:return G=E.type,Q=E.pendingProps,Q=E.elementType===G?Q:Ks(G,Q),w!==null&&(w.alternate=null,E.alternate=null,E.flags|=2),E.tag=1,Ui(G)?(w=!0,ko(E)):w=!1,Wh(E,$),Wy(E,G,Q),Br(E,G,Q,$),mp(null,E,G,!0,w,$);case 19:return le(w,E,$);case 22:return fp(w,E,$)}throw Error(s(156,E.tag))};function a_(w,E){return Fh(w,E)}function dL(w,E,$,G){this.tag=w,this.key=$,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=E,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=G,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ns(w,E,$,G){return new dL(w,E,$,G)}function Z1(w){return w=w.prototype,!(!w||!w.isReactComponent)}function fo(w){if(typeof w=="function")return Z1(w)?1:0;if(w!=null){if(w=w.$$typeof,w===b)return 11;if(w===T)return 14}return 2}function jc(w,E){var $=w.alternate;return $===null?($=Ns(w.tag,E,w.key,w.mode),$.elementType=w.elementType,$.type=w.type,$.stateNode=w.stateNode,$.alternate=w,w.alternate=$):($.pendingProps=E,$.type=w.type,$.flags=0,$.subtreeFlags=0,$.deletions=null),$.flags=w.flags&14680064,$.childLanes=w.childLanes,$.lanes=w.lanes,$.child=w.child,$.memoizedProps=w.memoizedProps,$.memoizedState=w.memoizedState,$.updateQueue=w.updateQueue,E=w.dependencies,$.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext},$.sibling=w.sibling,$.index=w.index,$.ref=w.ref,$}function ev(w,E,$,G,Q,ce){var Ve=2;if(G=w,typeof w=="function")Z1(w)&&(Ve=1);else if(typeof w=="string")Ve=5;else e:switch(w){case f:return Wu($.children,Q,ce,E);case p:Ve=8,Q|=8;break;case g:return w=Ns(12,$,E,Q|2),w.elementType=g,w.lanes=ce,w;case S:return w=Ns(13,$,E,Q),w.elementType=S,w.lanes=ce,w;case M:return w=Ns(19,$,E,Q),w.elementType=M,w.lanes=ce,w;case k:return yp($,Q,ce,E);default:if(typeof w=="object"&&w!==null)switch(w.$$typeof){case v:Ve=10;break e;case x:Ve=9;break e;case b:Ve=11;break e;case T:Ve=14;break e;case C:Ve=16,G=null;break e}throw Error(s(130,w==null?w:typeof w,""))}return E=Ns(Ve,$,E,Q),E.elementType=w,E.type=G,E.lanes=ce,E}function Wu(w,E,$,G){return w=Ns(7,w,G,E),w.lanes=$,w}function yp(w,E,$,G){return w=Ns(22,w,G,E),w.elementType=k,w.lanes=$,w.stateNode={},w}function vp(w,E,$){return w=Ns(6,w,null,E),w.lanes=$,w}function l_(w,E,$){return E=Ns(4,w.children!==null?w.children:[],w.key,E),E.lanes=$,E.stateNode={containerInfo:w.containerInfo,pendingChildren:null,implementation:w.implementation},E}function XE(w,E,$,G,Q){this.tag=E,this.containerInfo=w,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Fe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=km(0),this.expirationTimes=km(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=km(0),this.identifierPrefix=G,this.onRecoverableError=Q,tt&&(this.mutableSourceEagerHydrationData=null)}function sg(w,E,$,G,Q,ce,Ve,yt,jt){return w=new XE(w,E,$,yt,jt),E===1?(E=1,ce===!0&&(E|=8)):E=0,ce=Ns(3,null,null,E),w.current=ce,ce.stateNode=w,ce.memoizedState={element:G,isDehydrated:$,cache:null,transitions:null},ep(ce),w}function c_(w){if(!w)return Io;w=w._reactInternals;e:{if(J(w)!==w||w.tag!==1)throw Error(s(170));var E=w;do{switch(E.tag){case 3:E=E.stateNode.context;break e;case 1:if(Ui(E.type)){E=E.stateNode.__reactInternalMemoizedMergedChildContext;break e}}E=E.return}while(E!==null);throw Error(s(171))}if(w.tag===1){var $=w.type;if(Ui($))return Is(w,$,E)}return E}function u_(w){var E=w._reactInternals;if(E===void 0)throw typeof w.render=="function"?Error(s(188)):(w=Object.keys(w).join(","),Error(s(268,w)));return w=oe(E),w===null?null:w.stateNode}function J1(w,E){if(w=w.memoizedState,w!==null&&w.dehydrated!==null){var $=w.retryLane;w.retryLane=$!==0&&$<E?$:E}}function Q1(w,E){J1(w,E),(w=w.alternate)&&J1(w,E)}function KE(w){return w=oe(w),w===null?null:w.stateNode}function tv(){return null}return n.attemptContinuousHydration=function(w){if(w.tag===13){var E=es();wa(w,134217728,E),Q1(w,134217728)}},n.attemptHydrationAtCurrentPriority=function(w){if(w.tag===13){var E=es(),$=of(w);wa(w,$,E),Q1(w,$)}},n.attemptSynchronousHydration=function(w){switch(w.tag){case 3:var E=w.stateNode;if(E.current.memoizedState.isDehydrated){var $=Xf(E.pendingLanes);$!==0&&(Zf(E,$|1),Sa(E,ro()),!(Cr&6)&&(ng(),_r()))}break;case 13:var G=es();og(function(){return wa(w,1,G)}),Q1(w,1)}},n.batchedUpdates=function(w,E){var $=Cr;Cr|=1;try{return w(E)}finally{Cr=$,Cr===0&&(ng(),Rd&&_r())}},n.createComponentSelector=function(w){return{$$typeof:ta,value:w}},n.createContainer=function(w,E,$,G,Q,ce,Ve){return sg(w,E,!1,null,$,G,Q,ce,Ve)},n.createHasPseudoClassSelector=function(w){return{$$typeof:_a,value:w}},n.createHydrationContainer=function(w,E,$,G,Q,ce,Ve,yt,jt){return w=sg($,G,!0,w,Q,ce,Ve,yt,jt),w.context=c_(null),$=w.current,G=es(),Q=of($),ce=wl(G,Q),ce.callback=E??null,tc($,ce),w.current.lanes=Q,Kf(w,Q,G),Sa(w,G),w},n.createPortal=function(w,E,$){var G=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:G==null?null:""+G,children:w,containerInfo:E,implementation:$}},n.createRoleSelector=function(w){return{$$typeof:sc,value:w}},n.createTestNameSelector=function(w){return{$$typeof:ac,value:w}},n.createTextSelector=function(w){return{$$typeof:xa,value:w}},n.deferredUpdates=function(w){var E=Hr,$=eo.transition;try{return eo.transition=null,Hr=16,w()}finally{Hr=E,eo.transition=$}},n.discreteUpdates=function(w,E,$,G,Q){var ce=Hr,Ve=eo.transition;try{return eo.transition=null,Hr=1,w(E,$,G,Q)}finally{Hr=ce,eo.transition=Ve,Cr===0&&ng()}},n.findAllNodes=Ei,n.findBoundingRects=function(w,E){if(!Ut)throw Error(s(363));E=Ei(w,E),w=[];for(var $=0;$<E.length;$++)w.push(_e(E[$]));for(E=w.length-1;0<E;E--){$=w[E];for(var G=$.x,Q=G+$.width,ce=$.y,Ve=ce+$.height,yt=E-1;0<=yt;yt--)if(E!==yt){var jt=w[yt],pn=jt.x,$n=pn+jt.width,Er=jt.y,ar=Er+jt.height;if(G>=pn&&ce>=Er&&Q<=$n&&Ve<=ar){w.splice(E,1);break}else if(G!==pn||$.width!==jt.width||ar<ce||Er>Ve){if(!(ce!==Er||$.height!==jt.height||$n<G||pn>Q)){pn>G&&(jt.width+=pn-G,jt.x=G),$n<Q&&(jt.width=Q-pn),w.splice(E,1);break}}else{Er>ce&&(jt.height+=Er-ce,jt.y=ce),ar<Ve&&(jt.height=Ve-Er),w.splice(E,1);break}}}return w},n.findHostInstance=u_,n.findHostInstanceWithNoPortals=function(w){return w=X(w),w=w!==null?re(w):null,w===null?null:w.stateNode},n.findHostInstanceWithWarning=function(w){return u_(w)},n.flushControlled=function(w){var E=Cr;Cr|=1;var $=eo.transition,G=Hr;try{eo.transition=null,Hr=1,w()}finally{Hr=G,eo.transition=$,Cr=E,Cr===0&&(ng(),_r())}},n.flushPassiveEffects=$c,n.flushSync=og,n.focusWithin=function(w,E){if(!Ut)throw Error(s(363));for(w=Di(w),E=qd(w,E),E=Array.from(E),w=0;w<E.length;){var $=E[w++];if(!wt($)){if($.tag===5&&Bt($.stateNode))return!0;for($=$.child;$!==null;)E.push($),$=$.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Hr},n.getFindAllNodesFailureDescription=function(w,E){if(!Ut)throw Error(s(363));var $=0,G=[];w=[Di(w),0];for(var Q=0;Q<w.length;){var ce=w[Q++],Ve=w[Q++],yt=E[Ve];if((ce.tag!==5||!wt(ce))&&(mi(ce,yt)&&(G.push(Wi(yt)),Ve++,Ve>$&&($=Ve)),Ve<E.length))for(ce=ce.child;ce!==null;)w.push(ce,Ve),ce=ce.sibling}if($<E.length){for(w=[];$<E.length;$++)w.push(Wi(E[$]));return`findAllNodes was able to match part of the selector:
  `+(G.join(" > ")+`

No matching component was found for:
  `)+w.join(" > ")}return null},n.getPublicRootInstance=function(w){if(w=w.current,!w.child)return null;switch(w.child.tag){case 5:return ue(w.child.stateNode);default:return w.child.stateNode}},n.injectIntoDevTools=function(w){if(w={bundleType:w.bundleType,version:w.version,rendererPackageName:w.rendererPackageName,rendererConfig:w.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:KE,findFiberByHostInstance:w.findFiberByHostInstance||tv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")w=!1;else{var E=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(E.isDisabled||!E.supportsFiber)w=!0;else{try{Ic=E.inject(w),Jl=E}catch{}w=!!E.checkDCE}}return w},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(w,E,$,G){if(!Ut)throw Error(s(363));w=Ei(w,E);var Q=Mn(w,$,G).disconnect;return{disconnect:function(){Q()}}},n.registerMutableSourceForHydration=function(w,E){var $=E._getVersion;$=$(E._source),w.mutableSourceEagerHydrationData==null?w.mutableSourceEagerHydrationData=[E,$]:w.mutableSourceEagerHydrationData.push(E,$)},n.runWithPriority=function(w,E){var $=Hr;try{return Hr=w,E()}finally{Hr=$}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(w,E,$,G){var Q=E.current,ce=es(),Ve=of(Q);return $=c_($),E.context===null?E.context=$:E.pendingContext=$,E=wl(ce,Ve),E.payload={element:w},G=G===void 0?null:G,G!==null&&(E.callback=G),tc(Q,E),w=wa(Q,Ve,ce),w!==null&&Rc(w,Q,Ve),Ve},n};Xde.exports=e0t;var t0t=Xde.exports;const n0t=xi(t0t),w8={},Jde=t=>void Object.assign(w8,t);function r0t(t,e){function n(f,{args:p=[],attach:g,...v},x){let b=`${f[0].toUpperCase()}${f.slice(1)}`,S;if(f==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const M=v.object;S=ax(M,{type:f,root:x,attach:g,primitive:!0})}else{const M=w8[b];if(!M)throw new Error(`R3F: ${b} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(p))throw new Error("R3F: The args prop must be an array!");S=ax(new M(...p),{type:f,root:x,attach:g,memoizedProps:{args:p}})}return S.__r3f.attach===void 0&&(S instanceof Lr?S.__r3f.attach="geometry":S instanceof $a&&(S.__r3f.attach="material")),b!=="inject"&&BN(S,v),S}function r(f,p){let g=!1;if(p){var v,x;(v=p.__r3f)!=null&&v.attach?FN(f,p,p.__r3f.attach):p.isObject3D&&f.isObject3D&&(f.add(p),g=!0),g||(x=f.__r3f)==null||x.objects.push(p),p.__r3f||ax(p,{}),p.__r3f.parent=f,q4(p),lx(p)}}function i(f,p,g){let v=!1;if(p){var x,b;if((x=p.__r3f)!=null&&x.attach)FN(f,p,p.__r3f.attach);else if(p.isObject3D&&f.isObject3D){p.parent=f,p.dispatchEvent({type:"added"}),f.dispatchEvent({type:"childadded",child:p});const S=f.children.filter(T=>T!==p),M=S.indexOf(g);f.children=[...S.slice(0,M),p,...S.slice(M)],v=!0}v||(b=f.__r3f)==null||b.objects.push(p),p.__r3f||ax(p,{}),p.__r3f.parent=f,q4(p),lx(p)}}function o(f,p,g=!1){f&&[...f].forEach(v=>s(p,v,g))}function s(f,p,g){if(p){var v,x,b;if(p.__r3f&&(p.__r3f.parent=null),(v=f.__r3f)!=null&&v.objects&&(f.__r3f.objects=f.__r3f.objects.filter(k=>k!==p)),(x=p.__r3f)!=null&&x.attach)UZ(f,p,p.__r3f.attach);else if(p.isObject3D&&f.isObject3D){var S;f.remove(p),(S=p.__r3f)!=null&&S.root&&d0t(KA(p),p)}const T=(b=p.__r3f)==null?void 0:b.primitive,C=!T&&(g===void 0?p.dispose!==null:g);if(!T){var M;o((M=p.__r3f)==null?void 0:M.objects,p,C),o(p.children,p,C)}if(delete p.__r3f,C&&p.dispose&&p.type!=="Scene"){const k=()=>{try{p.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?H4.unstable_scheduleCallback(H4.unstable_IdlePriority,k):k()}lx(f)}}function a(f,p,g,v){var x;const b=(x=f.__r3f)==null?void 0:x.parent;if(!b)return;const S=n(p,g,f.__r3f.root);if(f.children){for(const M of f.children)M.__r3f&&r(S,M);f.children=f.children.filter(M=>!M.__r3f)}f.__r3f.objects.forEach(M=>r(S,M)),f.__r3f.objects=[],f.__r3f.autoRemovedBeforeAppend||s(b,f),S.parent&&(S.__r3f.autoRemovedBeforeAppend=!0),r(b,S),S.raycast&&S.__r3f.eventCount&&KA(S).getState().internal.interaction.push(S),[v,v.alternate].forEach(M=>{M!==null&&(M.stateNode=S,M.ref&&(typeof M.ref=="function"?M.ref(S):M.ref.current=S))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:n0t({createInstance:n,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(f,p)=>{if(!p)return;const g=f.getState().scene;g.__r3f&&(g.__r3f.root=f,r(g,p))},removeChildFromContainer:(f,p)=>{p&&s(f.getState().scene,p)},insertInContainerBefore:(f,p,g)=>{if(!p||!g)return;const v=f.getState().scene;v.__r3f&&i(v,p,g)},getRootHostContext:()=>null,getChildHostContext:f=>f,finalizeInitialChildren(f){var p;return!!((p=f==null?void 0:f.__r3f)!=null?p:{}).handlers},prepareUpdate(f,p,g,v){var x;if(((x=f==null?void 0:f.__r3f)!=null?x:{}).primitive&&v.object&&v.object!==f)return[!0];{const{args:S=[],children:M,...T}=v,{args:C=[],children:k,...O}=g;if(!Array.isArray(S))throw new Error("R3F: the args prop must be an array!");if(S.some((B,U)=>B!==C[U]))return[!0];const D=ohe(f,T,O,!0);return D.changes.length?[!1,D]:null}},commitUpdate(f,[p,g],v,x,b,S){p?a(f,v,b,S):BN(f,g)},commitMount(f,p,g,v){var x;const b=(x=f.__r3f)!=null?x:{};f.raycast&&b.handlers&&b.eventCount&&KA(f).getState().internal.interaction.push(f)},getPublicInstance:f=>f,prepareForCommit:()=>null,preparePortalMount:f=>ax(f.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(f){var p;const{attach:g,parent:v}=(p=f.__r3f)!=null?p:{};g&&v&&UZ(v,f,g),f.isObject3D&&(f.visible=!1),lx(f)},unhideInstance(f,p){var g;const{attach:v,parent:x}=(g=f.__r3f)!=null?g:{};v&&x&&FN(x,f,v),(f.isObject3D&&p.visible==null||p.visible)&&(f.visible=!0),lx(f)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Bx.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Eo.fun(performance.now)?performance.now:Eo.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Eo.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Eo.fun(clearTimeout)?clearTimeout:void 0}),applyProps:BN}}var FZ,BZ;const zN=t=>"colorSpace"in t||"outputColorSpace"in t,Qde=()=>{var t;return(t=w8.ColorManagement)!=null?t:null},ehe=t=>t&&t.isOrthographicCamera,i0t=t=>t&&t.hasOwnProperty("current"),WE=typeof window<"u"&&((FZ=window.document)!=null&&FZ.createElement||((BZ=window.navigator)==null?void 0:BZ.product)==="ReactNative")?W.useLayoutEffect:W.useEffect;function the(t){const e=W.useRef(t);return WE(()=>void(e.current=t),[t]),e}function o0t({set:t}){return WE(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class nhe extends W.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}nhe.getDerivedStateFromError=()=>({error:!0});const rhe="__default",$Z=new Map,s0t=t=>t&&!!t.memoized&&!!t.changes;function ihe(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const iS=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()};function KA(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Eo={obj:t=>t===Object(t)&&!Eo.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(Eo.str(t)||Eo.num(t))return t===e;const o=Eo.obj(t);if(o&&r==="reference")return t===e;const s=Eo.arr(t);if(s&&n==="reference")return t===e;if((s||o)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(o&&n==="shallow"&&r==="shallow"){for(a in i?e:t)if(!Eo.equ(t[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:t)if(t[a]!==e[a])return!1;if(Eo.und(a)){if(s&&t.length===0&&e.length===0||o&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function a0t(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function ax(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function G4(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((o,s)=>o[s],t),{target:n,key:i}}else return{target:n,key:e}}const jZ=/-\d+$/;function FN(t,e,n){if(Eo.str(n)){if(jZ.test(n)){const o=n.replace(jZ,""),{target:s,key:a}=G4(t,o);Array.isArray(s[a])||(s[a]=[])}const{target:r,key:i}=G4(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function UZ(t,e,n){var r,i;if(Eo.str(n)){const{target:o,key:s}=G4(t,n),a=e.__r3f.previousAttach;a===void 0?delete o[s]:o[s]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function ohe(t,{children:e,key:n,ref:r,...i},{children:o,key:s,ref:a,...l}={},d=!1){var f;const p=(f=t==null?void 0:t.__r3f)!=null?f:{},g=Object.entries(i),v=[];if(d){const b=Object.keys(l);for(let S=0;S<b.length;S++)i.hasOwnProperty(b[S])||g.unshift([b[S],rhe+"remove"])}g.forEach(([b,S])=>{var M;if((M=t.__r3f)!=null&&M.primitive&&b==="object"||Eo.equ(S,l[b]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(b))return v.push([b,S,!0,[]]);let T=[];b.includes("-")&&(T=b.split("-")),v.push([b,S,!1,T]);for(const C in i){const k=i[C];C.startsWith(`${b}-`)&&v.push([C,k,!1,C.split("-")])}});const x={...i};return p.memoizedProps&&p.memoizedProps.args&&(x.args=p.memoizedProps.args),p.memoizedProps&&p.memoizedProps.attach&&(x.attach=p.memoizedProps.attach),{memoized:x,changes:v}}const l0t=typeof process<"u"&&!1;function BN(t,e){var n,r,i;const o=(n=t.__r3f)!=null?n:{},s=o.root,a=(r=s==null||s.getState==null?void 0:s.getState())!=null?r:{},{memoized:l,changes:d}=s0t(e)?e:ohe(t,e),f=o.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let g=0;g<d.length;g++){let[v,x,b,S]=d[g];if(zN(t)){const k="srgb",O="srgb-linear";v==="encoding"?(v="colorSpace",x=x===3001?k:O):v==="outputEncoding"&&(v="outputColorSpace",x=x===3001?k:O)}let M=t,T=M[v];if(S.length&&(T=S.reduce((C,k)=>C[k],t),!(T&&T.set))){const[C,...k]=S.reverse();M=k.reverse().reduce((O,D)=>O[D],t),v=C}if(x===rhe+"remove")if(M.constructor){let C=$Z.get(M.constructor);C||(C=new M.constructor,$Z.set(M.constructor,C)),x=C[v]}else x=0;if(b)x?o.handlers[v]=x:delete o.handlers[v],o.eventCount=Object.keys(o.handlers).length;else if(T&&T.set&&(T.copy||T instanceof h0)){if(Array.isArray(x))T.fromArray?T.fromArray(x):T.set(...x);else if(T.copy&&x&&x.constructor&&(l0t?T.constructor.name===x.constructor.name:T.constructor===x.constructor))T.copy(x);else if(x!==void 0){const C=T instanceof Dn;!C&&T.setScalar?T.setScalar(x):T instanceof h0&&x instanceof h0?T.mask=x.mask:T.set(x),!Qde()&&!a.linear&&C&&T.convertSRGBToLinear()}}else if(M[v]=x,M[v]instanceof Fo&&M[v].format===Bl&&M[v].type===Rf){const C=M[v];zN(C)&&zN(a.gl)?C.colorSpace=a.gl.outputColorSpace:C.encoding=a.gl.outputEncoding}lx(t)}if(o.parent&&t.raycast&&f!==o.eventCount){const g=KA(t).getState().internal,v=g.interaction.indexOf(t);v>-1&&g.interaction.splice(v,1),o.eventCount&&g.interaction.push(t)}return!(d.length===1&&d[0][0]==="onUpdate")&&d.length&&(i=t.__r3f)!=null&&i.parent&&q4(t),t}function lx(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function q4(t){t.onUpdate==null||t.onUpdate(t)}function c0t(t,e){t.manual||(ehe(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function lA(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function u0t(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Bx.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Bx.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Bx.ContinuousEventPriority;default:return Bx.DefaultEventPriority}}function she(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function d0t(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{she(n.capturedMap,e,r,i)})}function h0t(t){function e(l){const{internal:d}=t.getState(),f=l.offsetX-d.initialClick[0],p=l.offsetY-d.initialClick[1];return Math.round(Math.sqrt(f*f+p*p))}function n(l){return l.filter(d=>["Move","Over","Enter","Out","Leave"].some(f=>{var p;return(p=d.__r3f)==null?void 0:p.handlers["onPointer"+f]}))}function r(l,d){const f=t.getState(),p=new Set,g=[],v=d?d(f.internal.interaction):f.internal.interaction;for(let M=0;M<v.length;M++){const T=iS(v[M]);T&&(T.raycaster.camera=void 0)}f.previousRoot||f.events.compute==null||f.events.compute(l,f);function x(M){const T=iS(M);if(!T||!T.events.enabled||T.raycaster.camera===null)return[];if(T.raycaster.camera===void 0){var C;T.events.compute==null||T.events.compute(l,T,(C=T.previousRoot)==null?void 0:C.getState()),T.raycaster.camera===void 0&&(T.raycaster.camera=null)}return T.raycaster.camera?T.raycaster.intersectObject(M,!0):[]}let b=v.flatMap(x).sort((M,T)=>{const C=iS(M.object),k=iS(T.object);return!C||!k?M.distance-T.distance:k.events.priority-C.events.priority||M.distance-T.distance}).filter(M=>{const T=lA(M);return p.has(T)?!1:(p.add(T),!0)});f.events.filter&&(b=f.events.filter(b,f));for(const M of b){let T=M.object;for(;T;){var S;(S=T.__r3f)!=null&&S.eventCount&&g.push({...M,eventObject:T}),T=T.parent}}if("pointerId"in l&&f.internal.capturedMap.has(l.pointerId))for(let M of f.internal.capturedMap.get(l.pointerId).values())p.has(lA(M.intersection))||g.push(M.intersection);return g}function i(l,d,f,p){const g=t.getState();if(l.length){const v={stopped:!1};for(const x of l){const b=iS(x.object)||g,{raycaster:S,pointer:M,camera:T,internal:C}=b,k=new Oe(M.x,M.y,0).unproject(T),O=V=>{var X,oe;return(X=(oe=C.capturedMap.get(V))==null?void 0:oe.has(x.eventObject))!=null?X:!1},D=V=>{const X={intersection:x,target:d.target};C.capturedMap.has(V)?C.capturedMap.get(V).set(x.eventObject,X):C.capturedMap.set(V,new Map([[x.eventObject,X]])),d.target.setPointerCapture(V)},B=V=>{const X=C.capturedMap.get(V);X&&she(C.capturedMap,x.eventObject,X,V)};let U={};for(let V in d){let X=d[V];typeof X!="function"&&(U[V]=X)}let J={...x,...U,pointer:M,intersections:l,stopped:v.stopped,delta:f,unprojectedPoint:k,ray:S.ray,camera:T,stopPropagation(){const V="pointerId"in d&&C.capturedMap.get(d.pointerId);if((!V||V.has(x.eventObject))&&(J.stopped=v.stopped=!0,C.hovered.size&&Array.from(C.hovered.values()).find(X=>X.eventObject===x.eventObject))){const X=l.slice(0,l.indexOf(x));o([...X,x])}},target:{hasPointerCapture:O,setPointerCapture:D,releasePointerCapture:B},currentTarget:{hasPointerCapture:O,setPointerCapture:D,releasePointerCapture:B},nativeEvent:d};if(p(J),v.stopped===!0)break}}return l}function o(l){const{internal:d}=t.getState();for(const f of d.hovered.values())if(!l.length||!l.find(p=>p.object===f.object&&p.index===f.index&&p.instanceId===f.instanceId)){const g=f.eventObject.__r3f,v=g==null?void 0:g.handlers;if(d.hovered.delete(lA(f)),g!=null&&g.eventCount){const x={...f,intersections:l};v.onPointerOut==null||v.onPointerOut(x),v.onPointerLeave==null||v.onPointerLeave(x)}}}function s(l,d){for(let f=0;f<d.length;f++){const p=d[f].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return d=>{const{internal:f}=t.getState();"pointerId"in d&&f.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{f.capturedMap.has(d.pointerId)&&(f.capturedMap.delete(d.pointerId),o([]))})}}return function(f){const{onPointerMissed:p,internal:g}=t.getState();g.lastEvent.current=f;const v=l==="onPointerMove",x=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",S=r(f,v?n:void 0),M=x?e(f):0;l==="onPointerDown"&&(g.initialClick=[f.offsetX,f.offsetY],g.initialHits=S.map(C=>C.eventObject)),x&&!S.length&&M<=2&&(s(f,g.interaction),p&&p(f)),v&&o(S);function T(C){const k=C.eventObject,O=k.__r3f,D=O==null?void 0:O.handlers;if(O!=null&&O.eventCount)if(v){if(D.onPointerOver||D.onPointerEnter||D.onPointerOut||D.onPointerLeave){const B=lA(C),U=g.hovered.get(B);U?U.stopped&&C.stopPropagation():(g.hovered.set(B,C),D.onPointerOver==null||D.onPointerOver(C),D.onPointerEnter==null||D.onPointerEnter(C))}D.onPointerMove==null||D.onPointerMove(C)}else{const B=D[l];B?(!x||g.initialHits.includes(k))&&(s(f,g.interaction.filter(U=>!g.initialHits.includes(U))),B(C)):x&&g.initialHits.includes(k)&&s(f,g.interaction.filter(U=>!g.initialHits.includes(U)))}}i(S,f,M,T)}}return{handlePointer:a}}const ahe=t=>!!(t!=null&&t.render),lhe=W.createContext(null),f0t=(t,e)=>{const n=Qvt((a,l)=>{const d=new Oe,f=new Oe,p=new Oe;function g(M=l().camera,T=f,C=l().size){const{width:k,height:O,top:D,left:B}=C,U=k/O;T instanceof Oe?p.copy(T):p.set(...T);const J=M.getWorldPosition(d).distanceTo(p);if(ehe(M))return{width:k/M.zoom,height:O/M.zoom,top:D,left:B,factor:1,distance:J,aspect:U};{const V=M.fov*Math.PI/180,X=2*Math.tan(V/2)*J,oe=X*(k/O);return{width:oe,height:X,top:D,left:B,factor:k/oe,distance:J,aspect:U}}}let v;const x=M=>a(T=>({performance:{...T.performance,current:M}})),b=new $t;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(M=1)=>t(l(),M),advance:(M,T)=>e(M,T,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new v8,pointer:b,mouse:b,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=l();v&&clearTimeout(v),M.performance.current!==M.performance.min&&x(M.performance.min),v=setTimeout(()=>x(l().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:g},setEvents:M=>a(T=>({...T,events:{...T.events,...M}})),setSize:(M,T,C,k,O)=>{const D=l().camera,B={width:M,height:T,top:k||0,left:O||0,updateStyle:C};a(U=>({size:B,viewport:{...U.viewport,...g(D,f,B)}}))},setDpr:M=>a(T=>{const C=ihe(M);return{viewport:{...T.viewport,dpr:C,initialDpr:T.viewport.initialDpr||C}}}),setFrameloop:(M="always")=>{const T=l().clock;T.stop(),T.elapsedTime=0,M!=="never"&&(T.start(),T.elapsedTime=0),a(()=>({frameloop:M}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:W.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(M,T,C)=>{const k=l().internal;return k.priority=k.priority+(T>0?1:0),k.subscribers.push({ref:M,priority:T,store:C}),k.subscribers=k.subscribers.sort((O,D)=>O.priority-D.priority),()=>{const O=l().internal;O!=null&&O.subscribers&&(O.priority=O.priority-(T>0?1:0),O.subscribers=O.subscribers.filter(D=>D.ref!==M))}}}}}),r=n.getState();let i=r.size,o=r.viewport.dpr,s=r.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:d,gl:f,set:p}=n.getState();if(l.width!==i.width||l.height!==i.height||d.dpr!==o){var g;i=l,o=d.dpr,c0t(a,l),f.setPixelRatio(d.dpr);const v=(g=l.updateStyle)!=null?g:typeof HTMLCanvasElement<"u"&&f.domElement instanceof HTMLCanvasElement;f.setSize(l.width,l.height,v)}a!==s&&(s=a,p(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let cA,p0t=new Set,m0t=new Set,g0t=new Set;function $N(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function oS(t,e){switch(t){case"before":return $N(p0t,e);case"after":return $N(m0t,e);case"tail":return $N(g0t,e)}}let jN,UN;function VN(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),jN=e.internal.subscribers,cA=0;cA<jN.length;cA++)UN=jN[cA],UN.ref.current(UN.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function y0t(t){let e=!1,n,r,i;function o(l){r=requestAnimationFrame(o),e=!0,n=0,oS("before",l);for(const f of t.values()){var d;i=f.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((d=i.gl.xr)!=null&&d.isPresenting)&&(n+=VN(l,i))}if(oS("after",l),n===0)return oS("tail",l),e=!1,cancelAnimationFrame(r)}function s(l,d=1){var f;if(!l)return t.forEach(p=>s(p.store.getState(),d));(f=l.gl.xr)!=null&&f.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+d),e||(e=!0,requestAnimationFrame(o)))}function a(l,d=!0,f,p){if(d&&oS("before",l),f)VN(l,f,p);else for(const g of t.values())VN(l,g.store.getState());d&&oS("after",l)}return{loop:o,invalidate:s,advance:a}}function che(){const t=W.useContext(lhe);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Cg(t=n=>n,e){return che()(t,e)}function uhe(t,e=0){const n=che(),r=n.getState().internal.subscribe,i=the(t);return WE(()=>r(i,e,n),[e,r,n]),null}const e1=new Map,{invalidate:VZ,advance:WZ}=y0t(e1),{reconciler:rk,applyProps:rx}=r0t(e1,u0t),ix={objects:"shallow",strict:!1},v0t=(t,e)=>{const n=typeof t=="function"?t(e):t;return ahe(n)?n:new t8({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function _0t(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:o,left:s,updateStyle:a=n}=e;return{width:r,height:i,top:o,left:s,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:r,height:i,top:o,left:s}=t.parentElement.getBoundingClientRect();return{width:r,height:i,top:o,left:s,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function x0t(t){const e=e1.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,o=r||f0t(VZ,WZ),s=n||rk.createContainer(o,Bx.ConcurrentRoot,null,!1,null,"",i,null);e||e1.set(t,{fiber:s,store:o});let a,l=!1,d;return{configure(f={}){let{gl:p,size:g,scene:v,events:x,onCreated:b,shadows:S=!1,linear:M=!1,flat:T=!1,legacy:C=!1,orthographic:k=!1,frameloop:O="always",dpr:D=[1,2],performance:B,raycaster:U,camera:J,onPointerMissed:V}=f,X=o.getState(),oe=X.gl;X.gl||X.set({gl:oe=v0t(p,t)});let pe=X.raycaster;pe||X.set({raycaster:pe=new Gde});const{params:re,...he}=U||{};if(Eo.equ(he,pe,ix)||rx(pe,{...he}),Eo.equ(re,pe.params,ix)||rx(pe,{params:{...pe.params,...re}}),!X.camera||X.camera===d&&!Eo.equ(d,J,ix)){d=J;const Ee=J instanceof zE,Ne=Ee?J:k?new Xp(0,0,0,0,.1,1e3):new Xo(75,0,.1,1e3);Ee||(Ne.position.z=5,J&&rx(Ne,J),!X.camera&&!(J!=null&&J.rotation)&&Ne.lookAt(0,0,0)),X.set({camera:Ne}),pe.camera=Ne}if(!X.scene){let Ee;v instanceof tk?Ee=v:(Ee=new tk,v&&rx(Ee,v)),X.set({scene:ax(Ee)})}if(!X.xr){var ue;const Ee=(dt,Ue)=>{const st=o.getState();st.frameloop!=="never"&&WZ(dt,!0,st,Ue)},Ne=()=>{const dt=o.getState();dt.gl.xr.enabled=dt.gl.xr.isPresenting,dt.gl.xr.setAnimationLoop(dt.gl.xr.isPresenting?Ee:null),dt.gl.xr.isPresenting||VZ(dt)},Ge={connect(){const dt=o.getState().gl;dt.xr.addEventListener("sessionstart",Ne),dt.xr.addEventListener("sessionend",Ne)},disconnect(){const dt=o.getState().gl;dt.xr.removeEventListener("sessionstart",Ne),dt.xr.removeEventListener("sessionend",Ne)}};typeof((ue=oe.xr)==null?void 0:ue.addEventListener)=="function"&&Ge.connect(),X.set({xr:Ge})}if(oe.shadowMap){const Ee=oe.shadowMap.enabled,Ne=oe.shadowMap.type;if(oe.shadowMap.enabled=!!S,Eo.boo(S))oe.shadowMap.type=WS;else if(Eo.str(S)){var be;const Ge={basic:Nce,percentage:LO,soft:WS,variance:uh};oe.shadowMap.type=(be=Ge[S])!=null?be:WS}else Eo.obj(S)&&Object.assign(oe.shadowMap,S);(Ee!==oe.shadowMap.enabled||Ne!==oe.shadowMap.type)&&(oe.shadowMap.needsUpdate=!0)}const ie=Qde();ie&&("enabled"in ie?ie.enabled=!C:"legacyMode"in ie&&(ie.legacyMode=C)),l||rx(oe,{outputEncoding:M?3e3:3001,toneMapping:T?kf:D6}),X.legacy!==C&&X.set(()=>({legacy:C})),X.linear!==M&&X.set(()=>({linear:M})),X.flat!==T&&X.set(()=>({flat:T})),p&&!Eo.fun(p)&&!ahe(p)&&!Eo.equ(p,oe,ix)&&rx(oe,p),x&&!X.events.handlers&&X.set({events:x(o)});const ve=_0t(t,g);return Eo.equ(ve,X.size,ix)||X.setSize(ve.width,ve.height,ve.updateStyle,ve.top,ve.left),D&&X.viewport.dpr!==ihe(D)&&X.setDpr(D),X.frameloop!==O&&X.setFrameloop(O),X.onPointerMissed||X.set({onPointerMissed:V}),B&&!Eo.equ(B,X.performance,ix)&&X.set(Ee=>({performance:{...Ee.performance,...B}})),a=b,l=!0,this},render(f){return l||this.configure(),rk.updateContainer(W.createElement(b0t,{store:o,children:f,onCreated:a,rootElement:t}),s,null,()=>{}),o},unmount(){dhe(t)}}}function b0t({store:t,children:e,onCreated:n,rootElement:r}){return WE(()=>{const i=t.getState();i.set(o=>({internal:{...o.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),W.createElement(lhe.Provider,{value:t},e)}function dhe(t,e){const n=e1.get(t),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),rk.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var o,s,a,l;i.events.disconnect==null||i.events.disconnect(),(o=i.gl)==null||(s=o.renderLists)==null||s.dispose==null||s.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),a0t(i),e1.delete(t),e&&e(t)}catch{}},500)})}}rk.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:W.version});function Y4(t,e,n){var r,i,o,s,a;e==null&&(e=100);function l(){var f=Date.now()-s;f<e&&f>=0?r=setTimeout(l,e-f):(r=null,n||(a=t.apply(o,i),o=i=null))}var d=function(){o=this,i=arguments,s=Date.now();var f=n&&!r;return r||(r=setTimeout(l,e)),f&&(a=t.apply(o,i),o=i=null),a};return d.clear=function(){r&&(clearTimeout(r),r=null)},d.flush=function(){r&&(a=t.apply(o,i),o=i=null,clearTimeout(r),r=null)},d}Y4.debounce=Y4;var w0t=Y4;const HZ=xi(w0t);function S0t(t){let{debounce:e,scroll:n,polyfill:r,offsetSize:i}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const o=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=W.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=W.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),d=e?typeof e=="number"?e:e.scroll:null,f=e?typeof e=="number"?e:e.resize:null,p=W.useRef(!1);W.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[g,v,x]=W.useMemo(()=>{const T=()=>{if(!l.current.element)return;const{left:C,top:k,width:O,height:D,bottom:B,right:U,x:J,y:V}=l.current.element.getBoundingClientRect(),X={left:C,top:k,width:O,height:D,bottom:B,right:U,x:J,y:V};l.current.element instanceof HTMLElement&&i&&(X.height=l.current.element.offsetHeight,X.width=l.current.element.offsetWidth),Object.freeze(X),p.current&&!C0t(l.current.lastBounds,X)&&a(l.current.lastBounds=X)};return[T,f?HZ(T,f):T,d?HZ(T,d):T]},[a,i,d,f]);function b(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(T=>T.removeEventListener("scroll",x,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function S(){l.current.element&&(l.current.resizeObserver=new o(x),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(T=>T.addEventListener("scroll",x,{capture:!0,passive:!0})))}const M=T=>{!T||T===l.current.element||(b(),l.current.element=T,l.current.scrollContainers=hhe(T),S())};return E0t(x,!!n),M0t(v),W.useEffect(()=>{b(),S()},[n,x,v]),W.useEffect(()=>b,[]),[M,s,g]}function M0t(t){W.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function E0t(t,e){W.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function hhe(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(o=>o==="auto"||o==="scroll")&&e.push(t),[...e,...hhe(t.parentElement)]}const T0t=["x","y","top","bottom","left","right","width","height"],C0t=(t,e)=>T0t.every(n=>t[n]===e[n]);var A0t=Object.defineProperty,P0t=Object.defineProperties,I0t=Object.getOwnPropertyDescriptors,GZ=Object.getOwnPropertySymbols,k0t=Object.prototype.hasOwnProperty,R0t=Object.prototype.propertyIsEnumerable,qZ=(t,e,n)=>e in t?A0t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,YZ=(t,e)=>{for(var n in e||(e={}))k0t.call(e,n)&&qZ(t,n,e[n]);if(GZ)for(var n of GZ(e))R0t.call(e,n)&&qZ(t,n,e[n]);return t},O0t=(t,e)=>P0t(t,I0t(e));function fhe(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=fhe(r,e,n);if(i)return i;r=e?null:r.sibling}}function phe(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const S8=phe(W.createContext(null));class mhe extends W.Component{render(){return W.createElement(S8.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:XZ,ReactCurrentDispatcher:KZ}=W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function L0t(){const t=W.useContext(S8);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=W.useId();return W.useMemo(()=>{for(const r of[XZ==null?void 0:XZ.current,t,t==null?void 0:t.alternate]){if(!r)continue;const i=fhe(r,!1,o=>{let s=o.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[t,e])}function D0t(){var t;const e=L0t(),[n]=W.useState(()=>new Map);n.clear();let r=e;for(;r;){if(r.type&&typeof r.type=="object"){const o=r.type._context===void 0&&r.type.Provider===r.type?r.type:r.type._context;o&&o!==S8&&!n.has(o)&&n.set(o,(t=KZ==null?void 0:KZ.current)==null?void 0:t.readContext(phe(o)))}r=r.return}return n}function N0t(){const t=D0t();return W.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>W.createElement(e,null,W.createElement(n.Provider,O0t(YZ({},r),{value:t.get(n)}))),e=>W.createElement(mhe,YZ({},e))),[t])}const WN={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function z0t(t){const{handlePointer:e}=h0t(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(WN).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:o}=t.getState();o.disconnect==null||o.disconnect(),i(s=>({events:{...s.events,connected:n}})),Object.entries((r=o.handlers)!=null?r:[]).forEach(([s,a])=>{const[l,d]=WN[s];n.addEventListener(l,a,{passive:d})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([o,s])=>{if(r&&r.connected instanceof HTMLElement){const[a]=WN[o];r.connected.removeEventListener(a,s)}}),n(o=>({events:{...o.events,connected:void 0}}))}}}}const F0t=W.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:o,events:s=z0t,eventSource:a,eventPrefix:l,shadows:d,linear:f,flat:p,legacy:g,orthographic:v,frameloop:x,dpr:b,performance:S,raycaster:M,camera:T,scene:C,onPointerMissed:k,onCreated:O,...D},B){W.useMemo(()=>Jde(Kvt),[]);const U=N0t(),[J,V]=S0t({scroll:!0,debounce:{scroll:50,resize:0},...r}),X=W.useRef(null),oe=W.useRef(null);W.useImperativeHandle(B,()=>X.current);const pe=the(k),[re,he]=W.useState(!1),[ue,be]=W.useState(!1);if(re)throw re;if(ue)throw ue;const ie=W.useRef(null);WE(()=>{const Ee=X.current;V.width>0&&V.height>0&&Ee&&(ie.current||(ie.current=x0t(Ee)),ie.current.configure({gl:o,events:s,shadows:d,linear:f,flat:p,legacy:g,orthographic:v,frameloop:x,dpr:b,performance:S,raycaster:M,camera:T,scene:C,size:V,onPointerMissed:(...Ne)=>pe.current==null?void 0:pe.current(...Ne),onCreated:Ne=>{Ne.events.connect==null||Ne.events.connect(a?i0t(a)?a.current:a:oe.current),l&&Ne.setEvents({compute:(Ge,dt)=>{const Ue=Ge[l+"X"],st=Ge[l+"Y"];dt.pointer.set(Ue/dt.size.width*2-1,-(st/dt.size.height)*2+1),dt.raycaster.setFromCamera(dt.pointer,dt.camera)}}),O==null||O(Ne)}}),ie.current.render(W.createElement(U,null,W.createElement(nhe,{set:be},W.createElement(W.Suspense,{fallback:W.createElement(o0t,{set:he})},e)))))}),W.useEffect(()=>{const Ee=X.current;if(Ee)return()=>dhe(Ee)},[]);const ve=a?"none":"auto";return W.createElement("div",fe({ref:oe,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ve,...i}},D),W.createElement("div",{ref:J,style:{width:"100%",height:"100%"}},W.createElement("canvas",{ref:X,style:{display:"block"}},n)))}),B0t=W.forwardRef(function(e,n){return W.createElement(mhe,null,W.createElement(F0t,fe({},e,{ref:n})))});var $0t=Object.defineProperty,j0t=(t,e,n)=>e in t?$0t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wr=(t,e,n)=>(j0t(t,typeof e!="symbol"?e+"":e,n),n);const uA=new Ry,ZZ=new gf,U0t=Math.cos(70*(Math.PI/180)),JZ=(t,e)=>(t%e+e)%e;let V0t=class extends Dh{constructor(e,n){super(),wr(this,"object"),wr(this,"domElement"),wr(this,"enabled",!0),wr(this,"target",new Oe),wr(this,"minDistance",0),wr(this,"maxDistance",1/0),wr(this,"minZoom",0),wr(this,"maxZoom",1/0),wr(this,"minPolarAngle",0),wr(this,"maxPolarAngle",Math.PI),wr(this,"minAzimuthAngle",-1/0),wr(this,"maxAzimuthAngle",1/0),wr(this,"enableDamping",!1),wr(this,"dampingFactor",.05),wr(this,"enableZoom",!0),wr(this,"zoomSpeed",1),wr(this,"enableRotate",!0),wr(this,"rotateSpeed",1),wr(this,"enablePan",!0),wr(this,"panSpeed",1),wr(this,"screenSpacePanning",!0),wr(this,"keyPanSpeed",7),wr(this,"zoomToCursor",!1),wr(this,"autoRotate",!1),wr(this,"autoRotateSpeed",2),wr(this,"reverseOrbit",!1),wr(this,"reverseHorizontalOrbit",!1),wr(this,"reverseVerticalOrbit",!1),wr(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),wr(this,"mouseButtons",{LEFT:Jc.ROTATE,MIDDLE:Jc.DOLLY,RIGHT:Jc.PAN}),wr(this,"touches",{ONE:Qc.ROTATE,TWO:Qc.DOLLY_PAN}),wr(this,"target0"),wr(this,"position0"),wr(this,"zoom0"),wr(this,"_domElementKeyEvents",null),wr(this,"getPolarAngle"),wr(this,"getAzimuthalAngle"),wr(this,"setPolarAngle"),wr(this,"setAzimuthalAngle"),wr(this,"getDistance"),wr(this,"listenToKeyEvents"),wr(this,"stopListenToKeyEvents"),wr(this,"saveState"),wr(this,"reset"),wr(this,"update"),wr(this,"connect"),wr(this,"dispose"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>f.phi,this.getAzimuthalAngle=()=>f.theta,this.setPolarAngle=Ae=>{let ft=JZ(Ae,2*Math.PI),Ie=f.phi;Ie<0&&(Ie+=2*Math.PI),ft<0&&(ft+=2*Math.PI);let it=Math.abs(ft-Ie);2*Math.PI-it<it&&(ft<Ie?ft+=2*Math.PI:Ie+=2*Math.PI),p.phi=ft-Ie,r.update()},this.setAzimuthalAngle=Ae=>{let ft=JZ(Ae,2*Math.PI),Ie=f.theta;Ie<0&&(Ie+=2*Math.PI),ft<0&&(ft+=2*Math.PI);let it=Math.abs(ft-Ie);2*Math.PI-it<it&&(ft<Ie?ft+=2*Math.PI:Ie+=2*Math.PI),p.theta=ft-Ie,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=Ae=>{Ae.addEventListener("keydown",an),this._domElementKeyEvents=Ae},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",an),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const Ae=new Oe,ft=new Oe(0,1,0),Ie=new ua().setFromUnitVectors(e.up,ft),it=Ie.clone().invert(),tn=new Oe,Xe=new ua,xe=2*Math.PI;return function(){const se=r.object.position;Ie.setFromUnitVectors(e.up,ft),it.copy(Ie).invert(),Ae.copy(se).sub(r.target),Ae.applyQuaternion(Ie),f.setFromVector3(Ae),r.autoRotate&&l===a.NONE&&re(oe()),r.enableDamping?(f.theta+=p.theta*r.dampingFactor,f.phi+=p.phi*r.dampingFactor):(f.theta+=p.theta,f.phi+=p.phi);let me=r.minAzimuthAngle,Ce=r.maxAzimuthAngle;isFinite(me)&&isFinite(Ce)&&(me<-Math.PI?me+=xe:me>Math.PI&&(me-=xe),Ce<-Math.PI?Ce+=xe:Ce>Math.PI&&(Ce-=xe),me<=Ce?f.theta=Math.max(me,Math.min(Ce,f.theta)):f.theta=f.theta>(me+Ce)/2?Math.max(me,f.theta):Math.min(Ce,f.theta)),f.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,f.phi)),f.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(v,r.dampingFactor):r.target.add(v),r.zoomToCursor&&J||r.object.isOrthographicCamera?f.radius=Ge(f.radius):f.radius=Ge(f.radius*g),Ae.setFromSpherical(f),Ae.applyQuaternion(it),se.copy(r.target).add(Ae),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(p.theta*=1-r.dampingFactor,p.phi*=1-r.dampingFactor,v.multiplyScalar(1-r.dampingFactor)):(p.set(0,0,0),v.set(0,0,0));let qe=!1;if(r.zoomToCursor&&J){let Ye=null;if(r.object instanceof Xo&&r.object.isPerspectiveCamera){const et=Ae.length();Ye=Ge(et*g);const je=et-Ye;r.object.position.addScaledVector(B,je),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const et=new Oe(U.x,U.y,0);et.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/g)),r.object.updateProjectionMatrix(),qe=!0;const je=new Oe(U.x,U.y,0);je.unproject(r.object),r.object.position.sub(je).add(et),r.object.updateMatrixWorld(),Ye=Ae.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Ye!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Ye).add(r.object.position):(uA.origin.copy(r.object.position),uA.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(uA.direction))<U0t?e.lookAt(r.target):(ZZ.setFromNormalAndCoplanarPoint(r.object.up,r.target),uA.intersectPlane(ZZ,r.target))))}else r.object instanceof Xp&&r.object.isOrthographicCamera&&(qe=g!==1,qe&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/g)),r.object.updateProjectionMatrix()));return g=1,J=!1,qe||tn.distanceToSquared(r.object.position)>d||8*(1-Xe.dot(r.object.quaternion))>d?(r.dispatchEvent(i),tn.copy(r.object.position),Xe.copy(r.object.quaternion),qe=!1,!0):!1}})(),this.connect=Ae=>{Ae===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=Ae,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",xn),r.domElement.addEventListener("pointerdown",Pe),r.domElement.addEventListener("pointercancel",wt),r.domElement.addEventListener("wheel",Mn)},this.dispose=()=>{var Ae,ft,Ie,it,tn,Xe;(Ae=r.domElement)==null||Ae.removeEventListener("contextmenu",xn),(ft=r.domElement)==null||ft.removeEventListener("pointerdown",Pe),(Ie=r.domElement)==null||Ie.removeEventListener("pointercancel",wt),(it=r.domElement)==null||it.removeEventListener("wheel",Mn),(tn=r.domElement)==null||tn.ownerDocument.removeEventListener("pointermove",_e),(Xe=r.domElement)==null||Xe.ownerDocument.removeEventListener("pointerup",Mt),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",an)};const r=this,i={type:"change"},o={type:"start"},s={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const d=1e-6,f=new BM,p=new BM;let g=1;const v=new Oe,x=new $t,b=new $t,S=new $t,M=new $t,T=new $t,C=new $t,k=new $t,O=new $t,D=new $t,B=new Oe,U=new $t;let J=!1;const V=[],X={};function oe(){return 2*Math.PI/60/60*r.autoRotateSpeed}function pe(){return Math.pow(.95,r.zoomSpeed)}function re(Ae){r.reverseOrbit||r.reverseHorizontalOrbit?p.theta+=Ae:p.theta-=Ae}function he(Ae){r.reverseOrbit||r.reverseVerticalOrbit?p.phi+=Ae:p.phi-=Ae}const ue=(()=>{const Ae=new Oe;return function(Ie,it){Ae.setFromMatrixColumn(it,0),Ae.multiplyScalar(-Ie),v.add(Ae)}})(),be=(()=>{const Ae=new Oe;return function(Ie,it){r.screenSpacePanning===!0?Ae.setFromMatrixColumn(it,1):(Ae.setFromMatrixColumn(it,0),Ae.crossVectors(r.object.up,Ae)),Ae.multiplyScalar(Ie),v.add(Ae)}})(),ie=(()=>{const Ae=new Oe;return function(Ie,it){const tn=r.domElement;if(tn&&r.object instanceof Xo&&r.object.isPerspectiveCamera){const Xe=r.object.position;Ae.copy(Xe).sub(r.target);let xe=Ae.length();xe*=Math.tan(r.object.fov/2*Math.PI/180),ue(2*Ie*xe/tn.clientHeight,r.object.matrix),be(2*it*xe/tn.clientHeight,r.object.matrix)}else tn&&r.object instanceof Xp&&r.object.isOrthographicCamera?(ue(Ie*(r.object.right-r.object.left)/r.object.zoom/tn.clientWidth,r.object.matrix),be(it*(r.object.top-r.object.bottom)/r.object.zoom/tn.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function ve(Ae){r.object instanceof Xo&&r.object.isPerspectiveCamera||r.object instanceof Xp&&r.object.isOrthographicCamera?g/=Ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Ee(Ae){r.object instanceof Xo&&r.object.isPerspectiveCamera||r.object instanceof Xp&&r.object.isOrthographicCamera?g*=Ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Ne(Ae){if(!r.zoomToCursor||!r.domElement)return;J=!0;const ft=r.domElement.getBoundingClientRect(),Ie=Ae.clientX-ft.left,it=Ae.clientY-ft.top,tn=ft.width,Xe=ft.height;U.x=Ie/tn*2-1,U.y=-(it/Xe)*2+1,B.set(U.x,U.y,1).unproject(r.object).sub(r.object.position).normalize()}function Ge(Ae){return Math.max(r.minDistance,Math.min(r.maxDistance,Ae))}function dt(Ae){x.set(Ae.clientX,Ae.clientY)}function Ue(Ae){Ne(Ae),k.set(Ae.clientX,Ae.clientY)}function st(Ae){M.set(Ae.clientX,Ae.clientY)}function lt(Ae){b.set(Ae.clientX,Ae.clientY),S.subVectors(b,x).multiplyScalar(r.rotateSpeed);const ft=r.domElement;ft&&(re(2*Math.PI*S.x/ft.clientHeight),he(2*Math.PI*S.y/ft.clientHeight)),x.copy(b),r.update()}function Rt(Ae){O.set(Ae.clientX,Ae.clientY),D.subVectors(O,k),D.y>0?ve(pe()):D.y<0&&Ee(pe()),k.copy(O),r.update()}function Lt(Ae){T.set(Ae.clientX,Ae.clientY),C.subVectors(T,M).multiplyScalar(r.panSpeed),ie(C.x,C.y),M.copy(T),r.update()}function Fe(Ae){Ne(Ae),Ae.deltaY<0?Ee(pe()):Ae.deltaY>0&&ve(pe()),r.update()}function at(Ae){let ft=!1;switch(Ae.code){case r.keys.UP:ie(0,r.keyPanSpeed),ft=!0;break;case r.keys.BOTTOM:ie(0,-r.keyPanSpeed),ft=!0;break;case r.keys.LEFT:ie(r.keyPanSpeed,0),ft=!0;break;case r.keys.RIGHT:ie(-r.keyPanSpeed,0),ft=!0;break}ft&&(Ae.preventDefault(),r.update())}function nt(){if(V.length==1)x.set(V[0].pageX,V[0].pageY);else{const Ae=.5*(V[0].pageX+V[1].pageX),ft=.5*(V[0].pageY+V[1].pageY);x.set(Ae,ft)}}function ge(){if(V.length==1)M.set(V[0].pageX,V[0].pageY);else{const Ae=.5*(V[0].pageX+V[1].pageX),ft=.5*(V[0].pageY+V[1].pageY);M.set(Ae,ft)}}function tt(){const Ae=V[0].pageX-V[1].pageX,ft=V[0].pageY-V[1].pageY,Ie=Math.sqrt(Ae*Ae+ft*ft);k.set(0,Ie)}function rt(){r.enableZoom&&tt(),r.enablePan&&ge()}function vt(){r.enableZoom&&tt(),r.enableRotate&&nt()}function Tt(Ae){if(V.length==1)b.set(Ae.pageX,Ae.pageY);else{const Ie=gt(Ae),it=.5*(Ae.pageX+Ie.x),tn=.5*(Ae.pageY+Ie.y);b.set(it,tn)}S.subVectors(b,x).multiplyScalar(r.rotateSpeed);const ft=r.domElement;ft&&(re(2*Math.PI*S.x/ft.clientHeight),he(2*Math.PI*S.y/ft.clientHeight)),x.copy(b)}function We(Ae){if(V.length==1)T.set(Ae.pageX,Ae.pageY);else{const ft=gt(Ae),Ie=.5*(Ae.pageX+ft.x),it=.5*(Ae.pageY+ft.y);T.set(Ie,it)}C.subVectors(T,M).multiplyScalar(r.panSpeed),ie(C.x,C.y),M.copy(T)}function Vt(Ae){const ft=gt(Ae),Ie=Ae.pageX-ft.x,it=Ae.pageY-ft.y,tn=Math.sqrt(Ie*Ie+it*it);O.set(0,tn),D.set(0,Math.pow(O.y/k.y,r.zoomSpeed)),ve(D.y),k.copy(O)}function sn(Ae){r.enableZoom&&Vt(Ae),r.enablePan&&We(Ae)}function Ut(Ae){r.enableZoom&&Vt(Ae),r.enableRotate&&Tt(Ae)}function Pe(Ae){var ft,Ie;r.enabled!==!1&&(V.length===0&&((ft=r.domElement)==null||ft.ownerDocument.addEventListener("pointermove",_e),(Ie=r.domElement)==null||Ie.ownerDocument.addEventListener("pointerup",Mt)),en(Ae),Ae.pointerType==="touch"?Je(Ae):Wt(Ae))}function _e(Ae){r.enabled!==!1&&(Ae.pointerType==="touch"?Yt(Ae):Bt(Ae))}function Mt(Ae){var ft,Ie,it;un(Ae),V.length===0&&((ft=r.domElement)==null||ft.releasePointerCapture(Ae.pointerId),(Ie=r.domElement)==null||Ie.ownerDocument.removeEventListener("pointermove",_e),(it=r.domElement)==null||it.ownerDocument.removeEventListener("pointerup",Mt)),r.dispatchEvent(s),l=a.NONE}function wt(Ae){un(Ae)}function Wt(Ae){let ft;switch(Ae.button){case 0:ft=r.mouseButtons.LEFT;break;case 1:ft=r.mouseButtons.MIDDLE;break;case 2:ft=r.mouseButtons.RIGHT;break;default:ft=-1}switch(ft){case Jc.DOLLY:if(r.enableZoom===!1)return;Ue(Ae),l=a.DOLLY;break;case Jc.ROTATE:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(r.enablePan===!1)return;st(Ae),l=a.PAN}else{if(r.enableRotate===!1)return;dt(Ae),l=a.ROTATE}break;case Jc.PAN:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(r.enableRotate===!1)return;dt(Ae),l=a.ROTATE}else{if(r.enablePan===!1)return;st(Ae),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(o)}function Bt(Ae){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;lt(Ae);break;case a.DOLLY:if(r.enableZoom===!1)return;Rt(Ae);break;case a.PAN:if(r.enablePan===!1)return;Lt(Ae);break}}function Mn(Ae){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(Ae.preventDefault(),r.dispatchEvent(o),Fe(Ae),r.dispatchEvent(s))}function an(Ae){r.enabled===!1||r.enablePan===!1||at(Ae)}function Je(Ae){switch(St(Ae),V.length){case 1:switch(r.touches.ONE){case Qc.ROTATE:if(r.enableRotate===!1)return;nt(),l=a.TOUCH_ROTATE;break;case Qc.PAN:if(r.enablePan===!1)return;ge(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case Qc.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;rt(),l=a.TOUCH_DOLLY_PAN;break;case Qc.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;vt(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(o)}function Yt(Ae){switch(St(Ae),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;Tt(Ae),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;We(Ae),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;sn(Ae),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ut(Ae),r.update();break;default:l=a.NONE}}function xn(Ae){r.enabled!==!1&&Ae.preventDefault()}function en(Ae){V.push(Ae)}function un(Ae){delete X[Ae.pointerId];for(let ft=0;ft<V.length;ft++)if(V[ft].pointerId==Ae.pointerId){V.splice(ft,1);return}}function St(Ae){let ft=X[Ae.pointerId];ft===void 0&&(ft=new $t,X[Ae.pointerId]=ft),ft.set(Ae.pageX,Ae.pageY)}function gt(Ae){const ft=Ae.pointerId===V[0].pointerId?V[1]:V[0];return X[ft.pointerId]}n!==void 0&&this.connect(n),this.update()}};const W0t=W.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:i=!0,keyEvents:o=!1,onChange:s,onStart:a,onEnd:l,...d},f)=>{const p=Cg(D=>D.invalidate),g=Cg(D=>D.camera),v=Cg(D=>D.gl),x=Cg(D=>D.events),b=Cg(D=>D.setEvents),S=Cg(D=>D.set),M=Cg(D=>D.get),T=Cg(D=>D.performance),C=e||g,k=r||x.connected||v.domElement,O=W.useMemo(()=>new V0t(C),[C]);return uhe(()=>{O.enabled&&O.update()},-1),W.useEffect(()=>(o&&O.connect(o===!0?k:o),O.connect(k),()=>void O.dispose()),[o,k,n,O,p]),W.useEffect(()=>{const D=J=>{p(),n&&T.regress(),s&&s(J)},B=J=>{a&&a(J)},U=J=>{l&&l(J)};return O.addEventListener("change",D),O.addEventListener("start",B),O.addEventListener("end",U),()=>{O.removeEventListener("start",B),O.removeEventListener("end",U),O.removeEventListener("change",D)}},[s,a,l,O,p,b]),W.useEffect(()=>{if(t){const D=M().controls;return S({controls:O}),()=>S({controls:D})}},[t,O]),W.createElement("primitive",fe({ref:f,object:O,enableDamping:i},d))});var M8={},H0t=oi;Object.defineProperty(M8,"__esModule",{value:!0});var ghe=M8.default=void 0,G0t=H0t(bi()),q0t=F;ghe=M8.default=(0,G0t.default)((0,q0t.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"}),"AccountCircle");const Y0t=t=>W.createElement("svg",{width:189,height:100,viewBox:"0 0 189 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},W.createElement("g",{filter:"url(#filter0_i_515_194)"},W.createElement("path",{d:"M50.5271 48.0609L50.5394 66.4046C49.79 67.2593 48.6447 68.1767 47.1037 69.1569C45.5836 70.1371 43.6362 70.9822 41.2617 71.6921C38.8871 72.3812 36.054 72.7268 32.7624 72.729C29.7832 72.731 27.0745 72.2537 24.6364 71.297C22.1983 70.3194 20.1035 68.8938 18.3523 67.0199C16.601 65.1253 15.2453 62.8137 14.2851 60.0851C13.3458 57.3566 12.875 54.2319 12.8726 50.7111L12.8708 48.0236C12.8685 44.5028 13.3351 41.3774 14.2708 38.6476C15.2065 35.9179 16.5278 33.6149 18.2349 31.7387C19.942 29.8418 21.9723 28.4029 24.3258 27.4222C26.6793 26.4414 29.2831 25.9501 32.1373 25.9482C36.1998 25.9455 39.5232 26.5995 42.1074 27.9103C44.6916 29.2002 46.6511 30.9906 47.986 33.2813C49.3417 35.5721 50.1768 38.2069 50.4913 41.1859L40.6788 41.1925C40.4694 39.6718 40.0519 38.3596 39.4261 37.2558C38.8212 36.152 37.9561 35.3089 36.8307 34.7263C35.7053 34.1229 34.2467 33.8218 32.4551 33.823C31.0176 33.8239 29.7157 34.1269 28.5494 34.7318C27.404 35.3159 26.4358 36.202 25.645 37.39C24.8541 38.5781 24.2509 40.0576 23.8354 41.8287C23.4199 43.579 23.213 45.6208 23.2145 47.9542L23.2164 50.7042C23.2179 53.0375 23.4276 55.0894 23.8455 56.86C24.2842 58.6305 24.9206 60.1093 25.7547 61.2962C26.5888 62.4623 27.6415 63.347 28.9127 63.9504C30.2048 64.5537 31.705 64.8547 33.4133 64.8536C34.7467 64.8527 35.8716 64.7478 36.7881 64.5388C37.7046 64.3091 38.4545 64.0273 39.0376 63.6936C39.6207 63.339 40.0579 63.0158 40.3494 62.7239L40.3444 55.1614L32.2506 55.1669L32.2459 48.0731L50.5271 48.0609ZM57.4815 26.5875L74.9502 26.5758C78.4294 26.5734 81.4402 27.0923 83.9825 28.1322C86.5457 29.1722 88.5155 30.7125 89.8919 32.7533C91.2682 34.794 91.9574 37.3144 91.9594 40.3144C91.9611 42.8144 91.5563 44.9397 90.7449 46.6902C89.9336 48.4407 88.7888 49.8894 87.3104 51.0363C85.8528 52.1831 84.1451 53.1113 82.1872 53.8209L78.8759 55.6357L64.0009 55.6456L63.9331 47.7394L74.9956 47.732C76.5165 47.731 77.7767 47.4593 78.7763 46.917C79.776 46.3746 80.5255 45.6137 81.0248 44.6342C81.545 43.6339 81.8046 42.467 81.8037 41.1337C81.8028 39.7587 81.5416 38.5714 81.0201 37.5717C80.4986 36.5721 79.7272 35.8122 78.7061 35.292C77.7057 34.751 76.4555 34.481 74.9555 34.482L67.6743 34.4869L67.6994 72.0806L57.5119 72.0875L57.4815 26.5875ZM82.6994 72.0706L72.4672 51.8587L83.2171 51.8202L93.6054 71.5945L93.6057 72.0633L82.6994 72.0706ZM115.068 61.9552L125.169 26.5422L136.513 26.5346L120.949 72.045L113.543 72.0499L115.068 61.9552ZM105.825 26.5551L115.943 61.9546L117.543 72.0473L110.043 72.0523L94.5127 26.5627L105.825 26.5551ZM166.033 56.7648L176.158 56.758C175.993 59.8831 175.141 62.6441 173.601 65.041C172.082 67.417 169.968 69.283 167.261 70.639C164.554 71.9741 161.335 72.6429 157.606 72.6454C154.627 72.6474 151.96 72.1388 149.605 71.1196C147.25 70.1003 145.249 68.6433 143.602 66.7486C141.976 64.833 140.724 62.5317 139.848 59.8448C138.992 57.1371 138.562 54.0853 138.56 50.6894L138.558 47.9082C138.556 44.5124 139.002 41.46 139.896 38.751C140.79 36.0421 142.07 33.7288 143.735 31.811C145.4 29.8932 147.399 28.4231 149.732 27.4007C152.065 26.3783 154.669 25.8662 157.544 25.8642C161.419 25.8616 164.69 26.5574 167.357 27.9514C170.025 29.3455 172.089 31.2607 173.549 33.6973C175.03 36.1338 175.917 38.9144 176.211 42.0392L166.054 42.046C165.97 40.2753 165.635 38.7859 165.051 37.578C164.467 36.3492 163.571 35.4227 162.362 34.7985C161.153 34.1743 159.549 33.8629 157.549 33.8642C156.091 33.8652 154.809 34.1369 153.706 34.6793C152.623 35.2217 151.717 36.066 150.989 37.2124C150.281 38.3587 149.751 39.8174 149.398 41.5884C149.045 43.3387 148.869 45.4221 148.871 47.8388L148.873 50.6825C148.874 53.0784 149.032 55.1512 149.346 56.901C149.659 58.6508 150.16 60.0983 150.848 61.2437C151.558 62.3891 152.464 63.2426 153.569 63.8044C154.673 64.3662 156.017 64.6465 157.601 64.6454C159.413 64.6442 160.923 64.362 162.131 63.7987C163.339 63.2145 164.266 62.3389 164.911 61.1718C165.556 60.0047 165.93 58.5357 166.033 56.7648Z",fill:"#0904D8"})),W.createElement("defs",null,W.createElement("filter",{id:"filter0_i_515_194",x:12.8561,y:25.8517,width:163.375,height:46.8906,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},W.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),W.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),W.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),W.createElement("feOffset",null),W.createElement("feGaussianBlur",{stdDeviation:29.85}),W.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:-1,k3:1}),W.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.227569 0 0 0 0 0.298979 0 0 0 0 0.941667 0 0 0 1 0"}),W.createElement("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_515_194"})))),X0t=si(t=>({toolbar:{backgroundColor:t.palette.background.paper},image:{alignSelf:"center",maxWidth:"240px",maxHeight:"20px",width:"auto",height:"auto"}})),K0t=({title:t,navIcon:e,tabs:n})=>{var b;const r=Sy(),[i,o]=W.useState(null),[s,a]=W.useState(!1),l=X0t(),d=s?"Use Light Mode":"Use Dark Mode",f=F.jsx(Dg,{arrow:!0,title:d,children:F.jsx(br,{onClick:()=>a(S=>!S),children:s?F.jsx(V3e,{}):F.jsx(W3e,{})})}),p=F.jsx(H3e,{}),g=F.jsx(G3e,{color:"disabled"}),v=F.jsx(Dg,{arrow:!0,title:((b=i==null?void 0:i.ws)==null?void 0:b.url)??"Server unknown",children:F.jsx(br,{children:i!=null&&i.connected?p:g})}),x=[{title:"ROS",url:"/ros",submenu:[{title:"Connect ROS",action:()=>r("/topics")},{title:"Show Topics",action:()=>r("/topics")},{title:"Show Services",url:"seo",input:"yaml"}]},{title:"uav",url:"/services",submenu:[{title:"Web Design",url:"web-design"},{title:"Web Development",url:"web-dev"},{title:"SEO",url:"seo"}]}];return F.jsx(lR,{position:"static",color:"transparent",className:l.toolbar,children:F.jsx(oE,{maxWidth:"xl",children:F.jsxs(z0,{variant:"dense",children:[e??F.jsx(br,{children:F.jsx(Y0t,{className:l.image})}),F.jsx(Bn,{variant:"h6",style:{flexGrow:1,marginLeft:"1rem"},children:t??"Management Tool"}),n&&F.jsx(F.Fragment,{children:n}),Ze.Children.toArray(x.map((S,M)=>F.jsx(W.Fragment,{children:F.jsx(Cie,{items:S,depthLevel:0})},"s1-"+M))),f,v,F.jsx(ghe,{})]})})})},QZ={type:"change"},HN={type:"start"},eJ={type:"end"},dA=new Ry,tJ=new gf,Z0t=Math.cos(70*Due.DEG2RAD);class J0t extends Dh{constructor(e,n){super(),this.object=e,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Oe,this.cursor=new Oe,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Jc.ROTATE,MIDDLE:Jc.DOLLY,RIGHT:Jc.PAN},this.touches={ONE:Qc.ROTATE,TWO:Qc.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Ie){Ie.addEventListener("keydown",an),this._domElementKeyEvents=Ie},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",an),this._domElementKeyEvents=null},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(QZ),r.update(),o=i.NONE},this.update=function(){const Ie=new Oe,it=new ua().setFromUnitVectors(e.up,new Oe(0,1,0)),tn=it.clone().invert(),Xe=new Oe,xe=new ua,ee=new Oe,se=2*Math.PI;return function(Ce=null){const qe=r.object.position;Ie.copy(qe).sub(r.target),Ie.applyQuaternion(it),a.setFromVector3(Ie),r.autoRotate&&o===i.NONE&&oe(V(Ce)),r.enableDamping?(a.theta+=l.theta*r.dampingFactor,a.phi+=l.phi*r.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let Ye=r.minAzimuthAngle,et=r.maxAzimuthAngle;isFinite(Ye)&&isFinite(et)&&(Ye<-Math.PI?Ye+=se:Ye>Math.PI&&(Ye-=se),et<-Math.PI?et+=se:et>Math.PI&&(et-=se),Ye<=et?a.theta=Math.max(Ye,Math.min(et,a.theta)):a.theta=a.theta>(Ye+et)/2?Math.max(Ye,a.theta):Math.min(et,a.theta)),a.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,a.phi)),a.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(f,r.dampingFactor):r.target.add(f),r.target.sub(r.cursor),r.target.clampLength(r.minTargetRadius,r.maxTargetRadius),r.target.add(r.cursor);let je=!1;if(r.zoomToCursor&&D||r.object.isOrthographicCamera)a.radius=Ee(a.radius);else{const ot=a.radius;a.radius=Ee(a.radius*d),je=ot!=a.radius}if(Ie.setFromSpherical(a),Ie.applyQuaternion(tn),qe.copy(r.target).add(Ie),r.object.lookAt(r.target),r.enableDamping===!0?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,f.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),f.set(0,0,0)),r.zoomToCursor&&D){let ot=null;if(r.object.isPerspectiveCamera){const Dt=Ie.length();ot=Ee(Dt*d);const It=Dt-ot;r.object.position.addScaledVector(k,It),r.object.updateMatrixWorld(),je=!!It}else if(r.object.isOrthographicCamera){const Dt=new Oe(O.x,O.y,0);Dt.unproject(r.object);const It=r.object.zoom;r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),r.object.updateProjectionMatrix(),je=It!==r.object.zoom;const Nt=new Oe(O.x,O.y,0);Nt.unproject(r.object),r.object.position.sub(Nt).add(Dt),r.object.updateMatrixWorld(),ot=Ie.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;ot!==null&&(this.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(ot).add(r.object.position):(dA.origin.copy(r.object.position),dA.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(dA.direction))<Z0t?e.lookAt(r.target):(tJ.setFromNormalAndCoplanarPoint(r.object.up,r.target),dA.intersectPlane(tJ,r.target))))}else if(r.object.isOrthographicCamera){const ot=r.object.zoom;r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),ot!==r.object.zoom&&(r.object.updateProjectionMatrix(),je=!0)}return d=1,D=!1,je||Xe.distanceToSquared(r.object.position)>s||8*(1-xe.dot(r.object.quaternion))>s||ee.distanceToSquared(r.target)>s?(r.dispatchEvent(QZ),Xe.copy(r.object.position),xe.copy(r.object.quaternion),ee.copy(r.target),!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",xn),r.domElement.removeEventListener("pointerdown",sn),r.domElement.removeEventListener("pointercancel",Pe),r.domElement.removeEventListener("wheel",wt),r.domElement.removeEventListener("pointermove",Ut),r.domElement.removeEventListener("pointerup",Pe),r.domElement.getRootNode().removeEventListener("keydown",Bt,{capture:!0}),r._domElementKeyEvents!==null&&(r._domElementKeyEvents.removeEventListener("keydown",an),r._domElementKeyEvents=null)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=i.NONE;const s=1e-6,a=new BM,l=new BM;let d=1;const f=new Oe,p=new $t,g=new $t,v=new $t,x=new $t,b=new $t,S=new $t,M=new $t,T=new $t,C=new $t,k=new Oe,O=new $t;let D=!1;const B=[],U={};let J=!1;function V(Ie){return Ie!==null?2*Math.PI/60*r.autoRotateSpeed*Ie:2*Math.PI/60/60*r.autoRotateSpeed}function X(Ie){const it=Math.abs(Ie*.01);return Math.pow(.95,r.zoomSpeed*it)}function oe(Ie){l.theta-=Ie}function pe(Ie){l.phi-=Ie}const re=function(){const Ie=new Oe;return function(tn,Xe){Ie.setFromMatrixColumn(Xe,0),Ie.multiplyScalar(-tn),f.add(Ie)}}(),he=function(){const Ie=new Oe;return function(tn,Xe){r.screenSpacePanning===!0?Ie.setFromMatrixColumn(Xe,1):(Ie.setFromMatrixColumn(Xe,0),Ie.crossVectors(r.object.up,Ie)),Ie.multiplyScalar(tn),f.add(Ie)}}(),ue=function(){const Ie=new Oe;return function(tn,Xe){const xe=r.domElement;if(r.object.isPerspectiveCamera){const ee=r.object.position;Ie.copy(ee).sub(r.target);let se=Ie.length();se*=Math.tan(r.object.fov/2*Math.PI/180),re(2*tn*se/xe.clientHeight,r.object.matrix),he(2*Xe*se/xe.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(re(tn*(r.object.right-r.object.left)/r.object.zoom/xe.clientWidth,r.object.matrix),he(Xe*(r.object.top-r.object.bottom)/r.object.zoom/xe.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function be(Ie){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?d/=Ie:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function ie(Ie){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?d*=Ie:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function ve(Ie,it){if(!r.zoomToCursor)return;D=!0;const tn=r.domElement.getBoundingClientRect(),Xe=Ie-tn.left,xe=it-tn.top,ee=tn.width,se=tn.height;O.x=Xe/ee*2-1,O.y=-(xe/se)*2+1,k.set(O.x,O.y,1).unproject(r.object).sub(r.object.position).normalize()}function Ee(Ie){return Math.max(r.minDistance,Math.min(r.maxDistance,Ie))}function Ne(Ie){p.set(Ie.clientX,Ie.clientY)}function Ge(Ie){ve(Ie.clientX,Ie.clientX),M.set(Ie.clientX,Ie.clientY)}function dt(Ie){x.set(Ie.clientX,Ie.clientY)}function Ue(Ie){g.set(Ie.clientX,Ie.clientY),v.subVectors(g,p).multiplyScalar(r.rotateSpeed);const it=r.domElement;oe(2*Math.PI*v.x/it.clientHeight),pe(2*Math.PI*v.y/it.clientHeight),p.copy(g),r.update()}function st(Ie){T.set(Ie.clientX,Ie.clientY),C.subVectors(T,M),C.y>0?be(X(C.y)):C.y<0&&ie(X(C.y)),M.copy(T),r.update()}function lt(Ie){b.set(Ie.clientX,Ie.clientY),S.subVectors(b,x).multiplyScalar(r.panSpeed),ue(S.x,S.y),x.copy(b),r.update()}function Rt(Ie){ve(Ie.clientX,Ie.clientY),Ie.deltaY<0?ie(X(Ie.deltaY)):Ie.deltaY>0&&be(X(Ie.deltaY)),r.update()}function Lt(Ie){let it=!1;switch(Ie.code){case r.keys.UP:Ie.ctrlKey||Ie.metaKey||Ie.shiftKey?pe(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):ue(0,r.keyPanSpeed),it=!0;break;case r.keys.BOTTOM:Ie.ctrlKey||Ie.metaKey||Ie.shiftKey?pe(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):ue(0,-r.keyPanSpeed),it=!0;break;case r.keys.LEFT:Ie.ctrlKey||Ie.metaKey||Ie.shiftKey?oe(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):ue(r.keyPanSpeed,0),it=!0;break;case r.keys.RIGHT:Ie.ctrlKey||Ie.metaKey||Ie.shiftKey?oe(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):ue(-r.keyPanSpeed,0),it=!0;break}it&&(Ie.preventDefault(),r.update())}function Fe(Ie){if(B.length===1)p.set(Ie.pageX,Ie.pageY);else{const it=Ae(Ie),tn=.5*(Ie.pageX+it.x),Xe=.5*(Ie.pageY+it.y);p.set(tn,Xe)}}function at(Ie){if(B.length===1)x.set(Ie.pageX,Ie.pageY);else{const it=Ae(Ie),tn=.5*(Ie.pageX+it.x),Xe=.5*(Ie.pageY+it.y);x.set(tn,Xe)}}function nt(Ie){const it=Ae(Ie),tn=Ie.pageX-it.x,Xe=Ie.pageY-it.y,xe=Math.sqrt(tn*tn+Xe*Xe);M.set(0,xe)}function ge(Ie){r.enableZoom&&nt(Ie),r.enablePan&&at(Ie)}function tt(Ie){r.enableZoom&&nt(Ie),r.enableRotate&&Fe(Ie)}function rt(Ie){if(B.length==1)g.set(Ie.pageX,Ie.pageY);else{const tn=Ae(Ie),Xe=.5*(Ie.pageX+tn.x),xe=.5*(Ie.pageY+tn.y);g.set(Xe,xe)}v.subVectors(g,p).multiplyScalar(r.rotateSpeed);const it=r.domElement;oe(2*Math.PI*v.x/it.clientHeight),pe(2*Math.PI*v.y/it.clientHeight),p.copy(g)}function vt(Ie){if(B.length===1)b.set(Ie.pageX,Ie.pageY);else{const it=Ae(Ie),tn=.5*(Ie.pageX+it.x),Xe=.5*(Ie.pageY+it.y);b.set(tn,Xe)}S.subVectors(b,x).multiplyScalar(r.panSpeed),ue(S.x,S.y),x.copy(b)}function Tt(Ie){const it=Ae(Ie),tn=Ie.pageX-it.x,Xe=Ie.pageY-it.y,xe=Math.sqrt(tn*tn+Xe*Xe);T.set(0,xe),C.set(0,Math.pow(T.y/M.y,r.zoomSpeed)),be(C.y),M.copy(T);const ee=(Ie.pageX+it.x)*.5,se=(Ie.pageY+it.y)*.5;ve(ee,se)}function We(Ie){r.enableZoom&&Tt(Ie),r.enablePan&&vt(Ie)}function Vt(Ie){r.enableZoom&&Tt(Ie),r.enableRotate&&rt(Ie)}function sn(Ie){r.enabled!==!1&&(B.length===0&&(r.domElement.setPointerCapture(Ie.pointerId),r.domElement.addEventListener("pointermove",Ut),r.domElement.addEventListener("pointerup",Pe)),!St(Ie)&&(en(Ie),Ie.pointerType==="touch"?Je(Ie):_e(Ie)))}function Ut(Ie){r.enabled!==!1&&(Ie.pointerType==="touch"?Yt(Ie):Mt(Ie))}function Pe(Ie){switch(un(Ie),B.length){case 0:r.domElement.releasePointerCapture(Ie.pointerId),r.domElement.removeEventListener("pointermove",Ut),r.domElement.removeEventListener("pointerup",Pe),r.dispatchEvent(eJ),o=i.NONE;break;case 1:const it=B[0],tn=U[it];Je({pointerId:it,pageX:tn.x,pageY:tn.y});break}}function _e(Ie){let it;switch(Ie.button){case 0:it=r.mouseButtons.LEFT;break;case 1:it=r.mouseButtons.MIDDLE;break;case 2:it=r.mouseButtons.RIGHT;break;default:it=-1}switch(it){case Jc.DOLLY:if(r.enableZoom===!1)return;Ge(Ie),o=i.DOLLY;break;case Jc.ROTATE:if(Ie.ctrlKey||Ie.metaKey||Ie.shiftKey){if(r.enablePan===!1)return;dt(Ie),o=i.PAN}else{if(r.enableRotate===!1)return;Ne(Ie),o=i.ROTATE}break;case Jc.PAN:if(Ie.ctrlKey||Ie.metaKey||Ie.shiftKey){if(r.enableRotate===!1)return;Ne(Ie),o=i.ROTATE}else{if(r.enablePan===!1)return;dt(Ie),o=i.PAN}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(HN)}function Mt(Ie){switch(o){case i.ROTATE:if(r.enableRotate===!1)return;Ue(Ie);break;case i.DOLLY:if(r.enableZoom===!1)return;st(Ie);break;case i.PAN:if(r.enablePan===!1)return;lt(Ie);break}}function wt(Ie){r.enabled===!1||r.enableZoom===!1||o!==i.NONE||(Ie.preventDefault(),r.dispatchEvent(HN),Rt(Wt(Ie)),r.dispatchEvent(eJ))}function Wt(Ie){const it=Ie.deltaMode,tn={clientX:Ie.clientX,clientY:Ie.clientY,deltaY:Ie.deltaY};switch(it){case 1:tn.deltaY*=16;break;case 2:tn.deltaY*=100;break}return Ie.ctrlKey&&!J&&(tn.deltaY*=10),tn}function Bt(Ie){Ie.key==="Control"&&(J=!0,r.domElement.getRootNode().addEventListener("keyup",Mn,{passive:!0,capture:!0}))}function Mn(Ie){Ie.key==="Control"&&(J=!1,r.domElement.getRootNode().removeEventListener("keyup",Mn,{passive:!0,capture:!0}))}function an(Ie){r.enabled===!1||r.enablePan===!1||Lt(Ie)}function Je(Ie){switch(gt(Ie),B.length){case 1:switch(r.touches.ONE){case Qc.ROTATE:if(r.enableRotate===!1)return;Fe(Ie),o=i.TOUCH_ROTATE;break;case Qc.PAN:if(r.enablePan===!1)return;at(Ie),o=i.TOUCH_PAN;break;default:o=i.NONE}break;case 2:switch(r.touches.TWO){case Qc.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ge(Ie),o=i.TOUCH_DOLLY_PAN;break;case Qc.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;tt(Ie),o=i.TOUCH_DOLLY_ROTATE;break;default:o=i.NONE}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(HN)}function Yt(Ie){switch(gt(Ie),o){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;rt(Ie),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;vt(Ie),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;We(Ie),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Vt(Ie),r.update();break;default:o=i.NONE}}function xn(Ie){r.enabled!==!1&&Ie.preventDefault()}function en(Ie){B.push(Ie.pointerId)}function un(Ie){delete U[Ie.pointerId];for(let it=0;it<B.length;it++)if(B[it]==Ie.pointerId){B.splice(it,1);return}}function St(Ie){for(let it=0;it<B.length;it++)if(B[it]==Ie.pointerId)return!0;return!1}function gt(Ie){let it=U[Ie.pointerId];it===void 0&&(it=new $t,U[Ie.pointerId]=it),it.set(Ie.pageX,Ie.pageY)}function Ae(Ie){const it=Ie.pointerId===B[0]?B[1]:B[0];return U[it]}r.domElement.addEventListener("contextmenu",xn),r.domElement.addEventListener("pointerdown",sn),r.domElement.addEventListener("pointercancel",Pe),r.domElement.addEventListener("wheel",wt,{passive:!1}),r.domElement.getRootNode().addEventListener("keydown",Bt,{passive:!0,capture:!0}),this.update()}}Jde({OrbitControls:J0t});function Q0t(t){const e=t.materialProps??{wireframe:!0,color:new Dn(9358407)};return F.jsxs("group",{rotation:[0,0,t.theta],position:[t.x,t.y,0],scale:t.scale??[1,1,1],children:[F.jsxs("mesh",{scale:[.05,.05,.05],children:[F.jsx("boxGeometry",{}),F.jsx("meshBasicMaterial",{color:16711680})]}),F.jsx("group",{position:[.75,0,0],children:F.jsxs("mesh",{rotation:[0,0,-Math.PI/2],scale:[.5,.5,.5],children:[F.jsx("coneGeometry",{}),F.jsx("meshBasicMaterial",{...e})]})}),F.jsx("group",{position:[.25,0,0],children:F.jsxs("mesh",{rotation:[0,0,-Math.PI/2],scale:[.2,.5,.2],children:[F.jsx("cylinderGeometry",{}),F.jsx("meshBasicMaterial",{...e})]})})]})}function e_t({position:t,polyhedron:e}){const n=W.useRef(),[r,i]=W.useState(1);return console.log(e),uhe((o,s)=>{n.current.rotation.x+=s,n.current.rotation.y+=.5*s}),F.jsx("mesh",{position:t,ref:n,onPointerDown:()=>{i((r+1)%3)},geometry:e[r],children:F.jsx("meshBasicMaterial",{color:"lime",wireframe:!0})})}const t_t=si(t=>({root:{margin:"0",height:"100vh"},sidebarStyle:{display:"flex",flexDirection:"column",position:"fixed",left:0,top:"88px",height:"calc(100% - 95px)",width:"560px",margin:"0px",zIndex:3},middleStyle:{flex:1,display:"grid"},panelElevation:{display:"flex",flexDirection:"column",position:"fixed",right:0,bottom:0,height:"30vh",width:"calc(100% - 560px)",margin:"0px",zIndex:3}})),n_t=(t,e)=>{setList([...list,toastProperties])},r_t=()=>{const t=t_t(),e=0,[n,r]=W.useState(!1),i=pr(p=>p.data.positions),[o,s]=W.useState([]),a=[new Ly,new V1(.785398),new jE(.785398)];W.useEffect(()=>{s(Object.values(i))},[i]);const l=F.jsx(F.Fragment,{children:F.jsxs(Qne,{value:e,onChange:(p,g)=>navigate(`/robot/${id}/${g}`),style:{flexGrow:1},children:[F.jsx(jv,{label:"Viz"}),F.jsx(jv,{label:"Imagery"}),F.jsx(jv,{label:"Stats"}),F.jsx(jv,{label:"Report"})]})}),d=[];d.push(new Oe(-10,0,0)),d.push(new Oe(0,10,0)),d.push(new Oe(10,0,0));const f=new Lr().setFromPoints(d);return F.jsx("div",{className:t.root,children:F.jsx(SU,{children:F.jsxs(mE,{notification:n_t,children:[F.jsx(K0t,{tabs:l}),F.jsx(gE,{}),F.jsx("div",{style:{float:"right",width:"calc(100% - 560px)",height:"calc(70vh - 95px)",right:"0px",margin:"auto"},children:F.jsxs(B0t,{camera:{position:[1,2,3]},children:[F.jsx(e_t,{position:[2,2,0],polyhedron:a}),F.jsx("line",{geometry:f,children:F.jsx("lineBasicMaterial",{attach:"material",color:"#9c88ff",linewidth:10,linecap:"round",linejoin:"round"})}),F.jsxs("mesh",{"rotation-y":2,children:[F.jsx("boxGeometry",{}),F.jsx("meshBasicMaterial",{color:"orange"})]}),F.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[F.jsx("planeGeometry",{args:[5,5,64,64]}),F.jsx("meshBasicMaterial",{attach:"material",transparent:!0,side:bh})]}),F.jsx(Q0t,{x:0,y:0,theta:0,materialProps:{color:new Dn(3311528),wireframe:!0}}),F.jsx(W0t,{}),F.jsx("axesHelper",{args:[5]}),F.jsx("gridHelper",{})]})}),F.jsx("div",{className:t.sidebarStyle,children:F.jsx("div",{className:t.middleStyle,children:F.jsx(Gs,{square:!0,children:F.jsx(hse,{SetOpenSave:r})})})}),F.jsx("div",{className:t.panelElevation,children:F.jsx("div",{className:t.middleStyle,children:F.jsx(Gs,{square:!0,children:F.jsx(L6,{})})})}),n&&F.jsx(Tce,{SetOpenSave:r})]})})})},i_t=()=>{const t=Sy();Sk();const e=bDe();return f1(async()=>{t("/")},[e]),F.jsx(Hge,{children:F.jsxs(Ju,{path:"/",element:F.jsx(xDe,{}),children:[F.jsx(Ju,{index:!0,element:F.jsx(cje,{})}),F.jsx(Ju,{path:"mission",element:F.jsx(fut,{})}),F.jsx(Ju,{path:"3Dmission",element:F.jsx(r_t,{})}),F.jsx(Ju,{path:"planning",element:F.jsx(tdt,{})}),F.jsx(Ju,{path:"camera",element:F.jsx(Iut,{})}),F.jsx(Ju,{path:"device/:id",element:F.jsx(Cut,{})}),F.jsx(Ju,{path:"event/:id",element:F.jsx(put,{})}),F.jsx(Ju,{path:"events",element:F.jsx(Rut,{})}),F.jsx(Ju,{path:"replay",element:F.jsx(mut,{})}),F.jsx(Ju,{path:"topics",element:F.jsx(Out,{})})]})})},o_t=()=>{const t={white:x0.white,background:Ef[50],primary:ete[900],secondary:gh[800],positive:gh[500],medium:J5[700],negative:Np[500],neutral:Ef[500],geometry:"#3bb2d0"};return{background:{default:t.background},primary:{main:t.primary},secondary:{main:t.secondary,contrastText:t.white},colors:t}},s_t={sidebarWidth:"28%",sidebarWidthTablet:"52px",drawerWidthDesktop:"360px",drawerWidthTablet:"320px",drawerHeightPhone:"250px",filterFormWidth:"160px",eventsDrawerWidth:"320px",bottomBarHeight:56,popupMapOffset:300,popupMaxWidth:288,popupImageHeight:144},a_t={MuiUseMediaQuery:{defaultProps:{noSsr:!0}},MuiOutlinedInput:{styleOverrides:{root:{backgroundColor:Ef[50]}}},MuiButton:{styleOverrides:{sizeMedium:{height:"40px"}}},MuiFormControl:{defaultProps:{size:"small"}},MuiSnackbar:{defaultProps:{anchorOrigin:{vertical:"bottom",horizontal:"center"}}}},l_t=()=>W.useMemo(()=>S$({palette:o_t(),dimensions:s_t,components:a_t}),[]),c_t=({children:t})=>{const e=l_t();return F.jsx(X1e,{theme:e,children:t})},u_t=({children:t})=>{const e=Yl(),n=pr(o=>!!o.session.server),[r,i]=W.useState(null);return f1(async()=>{if(!r)try{const o=await fetch("/api/server");if(o.ok)e(mh.updateServer(await o.json()));else throw Error(await o.text())}catch(o){i(o.message)}},[r]),r?F.jsx(RSe,{severity:"error",action:F.jsx(br,{color:"inherit",size:"small",onClick:()=>i(null),children:F.jsx(qR,{fontSize:"inherit"})}),children:r}):n?t:F.jsx(GAe,{})};C0e();const d_t=mee(document.getElementById("root"));d_t.render(F.jsx(Xye,{store:d0e,children:F.jsx(Tte,{injectFirst:!0,children:F.jsxs(c_t,{children:[F.jsx(nCe,{}),F.jsx(u_t,{children:F.jsx(Yge,{children:F.jsx(i_t,{})})})]})})}))});export default h_t();
